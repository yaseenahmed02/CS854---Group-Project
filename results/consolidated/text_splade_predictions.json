[
  {
    "instance_id": "markedjs__marked-2627",
    "model_patch": "diff --git a/marked.esm.js b/marked.esm.js\n--- a/marked.esm.js\n+++ b/marked.esm.js\n@@ -1,4 +1,4 @@\n /**\n  * marked - a markdown parser\n  * Copyright (c) 2011-2022, Christopher Jeffrey. (MIT Licensed)\n  * https://github.com/markedjs/marked\n@@ -1019,7 +1019,7 @@\n       return {\n         type: 'escape',\n         raw: cap[0],\n-        text: escape(cap[1])\n+        text: cap[1]\n       };\n     }\n   }\n@@ -1223,7 +1223,7 @@\n       if (cap) {\n         const token = {\n           type: 'strong',\n-          raw: cap[0],\n+          raw: cap[0].replace(/\\\\\\[/g, '['), // Unescape the escaped brackets\n           text: cap[2] || cap[1],\n           tokens: this.lexer.inlineTokens(cap[2] || cap[1])\n         };",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 169.9,
      "issue_embedding_time_ms": 169.9,
      "retrieval_time_ms_splade": 10.03,
      "retrieval_time_ms": 10.03,
      "total_retrieval_time_ms": 179.93,
      "generation_time_ms": 3895.21,
      "total_io_time_ms": 4075.13,
      "input_total_token_limit": null,
      "issue_text_tokens": 565,
      "vlm_tokens": 0,
      "retrieved_tokens": 14906,
      "prompt_template_tokens": 520,
      "total_input_prompt_tokens": 15991,
      "output_generated_tokens": 233,
      "total_io_tokens": 16224,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nBroken \\\"Strong\\\" transform\\n**Marked version:** 4.0.1\\r\\n\\r\\n**Describe the bug**\\r\\nif inside bold text from the right border there is an escaped square open bracket and there is a closing brace behind \\\"**\\\", then bold text is not recognized\\r\\n\\r\\n**To Reproduce**\\r\\n\\r\\n1. [Marked Demo](https://marked.js.org/demo/?outputType=html&text=**strong%20text%5C%5B**%5C%5D&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20true%2C%0A%20%22extensions%22%3A%20null%2C%0A%20%22gfm%22%3A%20true%2C%0A%20%22headerIds%22%3A%20false%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20false%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20true%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20true%2C%0A%20%22smartypants%22%3A%20true%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22walkTokens%22%3A%20null%2C%0A%20%22xhtml%22%3A%20true%0A%7D&version=4.0.1)\\r\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/?text=**strong%20text%5C%5B**%5C%5D)\\r\\n\\r\\n**Expected behavior**\\r\\n![image](https://user-images.githubusercontent.com/8930952/141372010-ef8bf7de-dff7-4c55-94f7-18357e69acf4.png)\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of Bug_report.md]\\n---\\nname: Bug report\\nabout: Marked says it does this thing but does not\\n\\n---\\n**Marked version:**\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior:\\n\\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\\n<!--\\n1. [Marked Demo](https://marked.js.org/demo/)\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\\n-->\\n\\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\\n<!--\\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\\n3. Actual output (or error) is...\\n-->\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n[end of Bug_report.md]\\n[start of USING_PRO.md]\\n## Extending Marked\\n\\nTo champion the single-responsibility and open/closed principles, we have tried to make it relatively painless to extend Marked. If you are looking to add custom functionality, this is the place to start.\\n\\n<h2 id=\\\"use\\\">marked.use()</h2>\\n\\n`marked.use(extension)` is the recommended way to extend Marked. The `extension` object can contain any [option](/using_advanced#options) available in Marked:\\n\\n\\n```js\\nimport { marked } from 'marked';\\n\\nmarked.use({\\n  pedantic: false,\\n  gfm: true,\\n  breaks: false,\\n  sanitize: false,\\n  smartLists: true,\\n  smartypants: false,\\n  xhtml: false\\n});\\n```\\n\\nYou can also supply multiple `extension` objects at once.\\n\\n```\\nmarked.use(myExtension, extension2, extension3);\\n\\n\\\\\\\\ EQUIVALENT TO:\\n\\nmarked.use(myExtension);\\nmarked.use(extension2);\\nmarked.use(extension3);\\n\\n```\\n\\nAll options will overwrite those previously set, except for the following options which will be merged with the existing framework and can be used to change or extend the functionality of Marked: `renderer`, `tokenizer`, `walkTokens`, and `extensions`.\\n\\n* The `renderer` and `tokenizer` options are objects with functions that will be merged into the built-in `renderer` and `tokenizer` respectively.\\n\\n* The `walkTokens` option is a function that will be called to post-process every token before rendering.\\n\\n* The `extensions` option is an array of objects that can contain additional custom `renderer` and `tokenizer` steps that will execute before any of the default parsing logic occurs.\\n\\n***\\n\\n<h2>The Marked Pipeline</h2>\\n\\nBefore building your custom extensions, it is important to understand the components that Marked uses to translate from Markdown to HTML:\\n\\n1) The user supplies Marked with an input string to be translated.\\n2) The `lexer` feeds segments of the input text string into each `tokenizer`, and from their output, generates a series of tokens in a nested tree structure.\\n3) Each `tokenizer` receives a segment of Markdown text and, if it matches a particular pattern, generates a token object containing any relevant information.\\n4) The `walkTokens` function will traverse every token in the tree and perform any final adjustments to the token contents.\\n4) The `parser` traverses the token tree and feeds each token into the appropriate `renderer`, and concatenates their outputs into the final HTML result.\\n5) Each `renderer` receives a token and manipulates its contents to generate a segment of HTML.\\n\\nMarked provides methods of directly overriding the `renderer` and `tokenizer` for any existing token type, as well as inserting additional custom `renderer` and `tokenizer` functions to handle entirely custom syntax.\\n\\n***\\n\\n<h2 id=\\\"renderer\\\">The Renderer : <code>renderer</code></h2>\\n\\nThe renderer defines the HTML output of a given token. If you supply a `renderer` object to the Marked options, it will be merged with the built-in renderer and any functions inside will override the default handling of that token type.\\n\\nCalling `marked.use()` to override the same function multiple times will give priority to the version that was assigned *last*. Overriding functions can return `false` to fall back to the previous override in the sequence, or resume default behavior if all overrides return `false`. Returning any other value (including nothing) will prevent fallback behavior.\\n\\n**Example:** Overriding output of the default `heading` token by adding an embedded anchor tag like on GitHub.\\n\\n```js\\n// Create reference instance\\nimport { marked } from 'marked';\\n\\n// Override function\\nconst renderer = {\\n  heading(text, level) {\\n    const escapedText = text.toLowerCase().replace(/[^\\\\w]+/g, '-');\\n\\n    return `\\n            <h${level}>\\n              <a name=\\\"${escapedText}\\\" class=\\\"anchor\\\" href=\\\"#${escapedText}\\\">\\n                <span class=\\\"header-link\\\"></span>\\n              </a>\\n              ${text}\\n            </h${level}>`;\\n  }\\n};\\n\\nmarked.use({ renderer });\\n\\n// Run marked\\nconsole.log(marked.parse('# heading+'));\\n```\\n\\n**Output:**\\n\\n```html\\n<h1>\\n  <a name=\\\"heading-\\\" class=\\\"anchor\\\" href=\\\"#heading-\\\">\\n    <span class=\\\"header-link\\\"></span>\\n  </a>\\n  heading+\\n</h1>\\n```\\n\\n### Block-level renderer methods\\n\\n- <code>**code**(*string* code, *string* infostring, *boolean* escaped)</code>\\n- <code>**blockquote**(*string* quote)</code>\\n- <code>**html**(*string* html)</code>\\n- <code>**heading**(*string* text, *number* level, *string* raw, *Slugger* slugger)</code>\\n- <code>**hr**()</code>\\n- <code>**list**(*string* body, *boolean* ordered, *number* start)</code>\\n- <code>**listitem**(*string* text, *boolean* task, *boolean* checked)</code>\\n- <code>**checkbox**(*boolean* checked)</code>\\n- <code>**paragraph**(*string* text)</code>\\n- <code>**table**(*string* header, *string* body)</code>\\n- <code>**tablerow**(*string* content)</code>\\n- <code>**tablecell**(*string* content, *object* flags)</code>\\n\\n### Inline-level renderer methods\\n\\n- <code>**strong**(*string* text)</code>\\n- <code>**em**(*string* text)</code>\\n- <code>**codespan**(*string* code)</code>\\n- <code>**br**()</code>\\n- <code>**del**(*string* text)</code>\\n- <code>**link**(*string* href, *string* title, *string* text)</code>\\n- <code>**image**(*string* href, *string* title, *string* text)</code>\\n- <code>**text**(*string* text)</code>\\n\\n`slugger` has the `slug` method to create a unique id from value:\\n\\n```js\\nslugger.slug('foo')   // foo\\nslugger.slug('foo')   // foo-1\\nslugger.slug('foo')   // foo-2\\nslugger.slug('foo 1') // foo-1-1\\nslugger.slug('foo-1') // foo-1-2\\n...\\n```\\n\\n`slugger.slug` can also be called with the `dryrun` option for stateless operation:\\n```js\\nslugger.slug('foo')                    // foo\\nslugger.slug('foo')                    // foo-1\\nslugger.slug('foo')                    // foo-2\\nslugger.slug('foo', { dryrun: true })  // foo-3\\nslugger.slug('foo', { dryrun: true })  // foo-3\\nslugger.slug('foo')                    // foo-3\\nslugger.slug('foo')                    // foo-4\\n...\\n```\\n\\n`flags` has the following properties:\\n\\n```js\\n{\\n    header: true || false,\\n    align: 'center' || 'left' || 'right'\\n}\\n```\\n\\n***\\n\\n<h2 id=\\\"tokenizer\\\">The Tokenizer : <code>tokenizer</code></h2>\\n\\nThe tokenizer defines how to turn markdown text into tokens. If you supply a `tokenizer` object to the Marked options, it will be merged with the built-in tokenizer and any functions inside will override the default handling of that token type.\\n\\nCalling `marked.use()` to override the same function multiple times will give priority to the version that was assigned *last*. Overriding functions can return `false` to fall back to the previous override in the sequence, or resume default behavior if all overrides return `false`. Returning any other value (including nothing) will prevent fallback behavior.\\n\\n**Example:** Overriding default `codespan` tokenizer to include LaTeX.\\n\\n```js\\n// Create reference instance\\nimport { marked } from 'marked';\\n\\n// Override function\\nconst tokenizer = {\\n  codespan(src) {\\n    const match = src.match(/^\\\\$+([^\\\\$\\\\n]+?)\\\\$+/);\\n    if (match) {\\n      return {\\n        type: 'codespan',\\n        raw: match[0],\\n        text: match[1].trim()\\n      };\\n    }\\n\\n    // return false to use original codespan tokenizer\\n    return false;\\n  }\\n};\\n\\nmarked.use({ tokenizer });\\n\\n// Run marked\\nconsole.log(marked.parse('$ latex code $\\\\n\\\\n` other code `'));\\n```\\n\\n**Output:**\\n\\n```html\\n<p><code>latex code</code></p>\\n<p><code>other code</code></p>\\n```\\n**NOTE**: This does not fully support latex, see issue [#1948](https://github.com/markedjs/marked/issues/1948).\\n\\n### Block level tokenizer methods\\n\\n- <code>**space**(*string* src)</code>\\n- <code>**code**(*string* src)</code>\\n- <code>**fences**(*string* src)</code>\\n- <code>**heading**(*string* src)</code>\\n- <code>**hr**(*string* src)</code>\\n- <code>**blockquote**(*string* src)</code>\\n- <code>**list**(*string* src)</code>\\n- <code>**html**(*string* src)</code>\\n- <code>**def**(*string* src)</code>\\n- <code>**table**(*string* src)</code>\\n- <code>**lheading**(*string* src)</code>\\n- <code>**paragraph**(*string* src)</code>\\n- <code>**text**(*string* src)</code>\\n\\n### Inline level tokenizer methods\\n\\n- <code>**escape**(*string* src)</code>\\n- <code>**tag**(*string* src)</code>\\n- <code>**link**(*string* src)</code>\\n- <code>**reflink**(*string* src, *object* links)</code>\\n- <code>**emStrong**(*string* src, *string* maskedSrc, *string* prevChar)</code>\\n- <code>**codespan**(*string* src)</code>\\n- <code>**br**(*string* src)</code>\\n- <code>**del**(*string* src)</code>\\n- <code>**autolink**(*string* src, *function* mangle)</code>\\n- <code>**url**(*string* src, *function* mangle)</code>\\n- <code>**inlineText**(*string* src, *function* smartypants)</code>\\n\\n`mangle` is a method that changes text to HTML character references:\\n\\n```js\\nmangle('test@example.com')\\n// \\\"&#x74;&#101;&#x73;&#116;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#x63;&#111;&#x6d;\\\"\\n```\\n\\n`smartypants` is a method that translates plain ASCII punctuation characters into \\u201csmart\\u201d typographic punctuation HTML entities:\\n\\nhttps://daringfireball.net/projects/smartypants/\\n\\n```js\\nsmartypants('\\\"this ... string\\\"')\\n// \\\"\\u201cthis \\u2026 string\\u201d\\\"\\n```\\n\\n***\\n\\n<h2 id=\\\"walk-tokens\\\">Walk Tokens : <code>walkTokens</code></h2>\\n\\nThe walkTokens function gets called with every token. Child tokens are called before moving on to sibling tokens. Each token is passed by reference so updates are persisted when passed to the parser. The return value of the function is ignored.\\n\\n`marked.use()` can be called multiple times with different `walkTokens` functions. Each function will be called in order, starting with the function that was assigned *last*.\\n\\n**Example:** Overriding heading tokens to start at h2.\\n\\n```js\\nimport { marked } from 'marked';\\n\\n// Override function\\nconst walkTokens = (token) => {\\n  if (token.type === 'heading') {\\n    token.depth += 1;\\n  }\\n};\\n\\nmarked.use({ walkTokens });\\n\\n// Run marked\\nconsole.log(marked.parse('# heading 2\\\\n\\\\n## heading 3'));\\n```\\n\\n**Output:**\\n\\n```html\\n<h2 id=\\\"heading-2\\\">heading 2</h2>\\n<h3 id=\\\"heading-3\\\">heading 3</h3>\\n```\\n\\n***\\n\\n<h2 id=\\\"extensions\\\">Custom Extensions : <code>extensions</code></h2>\\n\\nYou may supply an `extensions` array to the `options` object. This array can contain any number of `extension` objects, using the following properties:\\n\\n<dl>\\n<dt><code><strong>name</strong></code></dt>\\n<dd>A string used to identify the token that will be handled by this extension.\\n\\nIf the name matches an existing extension name, or an existing method in the tokenizer/renderer methods listed above, they will override the previously assigned behavior, with priority on the extension that was assigned **last**. An extension can return `false` to fall back to the previous behavior.</dd>\\n\\n<dt><code><strong>level</strong></code></dt>\\n<dd>A string to determine when to run the extension tokenizer. Must be equal to 'block' or 'inline'.\\n\\nA **block-level** extension will be handled before any of the block-level tokenizer methods listed above, and generally consists of 'container-type' text (paragraphs, tables, blockquotes, etc.).\\n\\nAn **inline-level** extension will be handled inside each block-level token, before any of the inline-level tokenizer methods listed above. These generally consist of 'style-type' text (italics, bold, etc.).</dd>\\n\\n<dt><code><strong>start</strong>(<i>string</i> src)</code></dt>\\n<dd>A function that returns the index of the next potential start of the custom token.\\n\\nThe index can be the result of a <code>src.match().index</code>, or even a simple <code>src.index()</code>. Marked will use this function to ensure that it does not skip over any text that should be part of the custom token.</dd>\\n\\n<dt><code><strong>tokenizer</strong>(<i>string</i> src, <i>array</i> tokens)</code></dt>\\n<dd>A function that reads string of Markdown text and returns a generated token. The token pattern should be found at the beginning of the <code>src</code> string. Accordingly, if using a Regular Expression to detect a token, it should be anchored to the string start (`^`). The <code>tokens</code> parameter contains the array of tokens that have been generated by the lexer up to that point, and can be used to access the previous token, for instance.\\n\\nThe return value should be an object with the following parameters:\\n\\n<dl>\\n<dt><code><strong>type</strong></code></dt>\\n<dd>A string that matches the <code>name</code> parameter of the extension.</dd>\\n\\n<dt><code><strong>raw</strong></code></dt>\\n<dd>A string containing all of the text that this token consumes from the source.</dd>\\n\\n<dt><code><strong>tokens</strong> [optional]</code></dt>\\n<dd>An array of child tokens that will be traversed by the <code>walkTokens</code> function by default.</dd>\\n</dl>\\n\\nThe returned token can also contain any other custom parameters of your choice that your custom `renderer` might need to access.\\n\\nThe tokenizer function has access to the lexer in the `this` object, which can be used if any internal section of the string needs to be parsed further, such as in handling any inline syntax on the text within a block token. The key functions that may be useful include:\\n\\n<dl>\\n<dt><code><strong>this.lexer.blockTokens</strong>(<i>string</i> text, <i>array</i> tokens)</code></dt>\\n<dd>This runs the block tokenizer functions (including any block-level extensions) on the provided text, and appends any resulting tokens onto the <code>tokens</code> array. The <code>tokens</code> array is also returned by the function. You might use this, for example, if your extension creates a \\\"container\\\"-type token (such as a blockquote) that can potentially include other block-level tokens inside.</dd>\\n\\n<dt><code><strong>this.lexer.inline</strong>(<i>string</i> text, <i>array</i> tokens)</code></dt>\\n<dd>Parsing of inline-level tokens only occurs after all block-level tokens have been generated. This function adds <code>text</code> and <code>tokens</code> to a queue to be processed using inline-level tokenizers (including any inline-level extensions) at that later step. Tokens will be generated using the provided <code>text</code>, and any resulting tokens will be appended to the <code>tokens</code> array. Note that this function does **NOT** return anything since the inline processing cannot happen until the block-level processing is complete.</dd>\\n\\n<dt><code><strong>this.lexer.inlineTokens</strong>(<i>string</i> text, <i>array</i> tokens)</code></dt>\\n<dd>Sometimes an inline-level token contains further nested inline tokens (such as a <pre><code>**strong**</code></pre> token inside of a <pre><code>### Heading</code></pre>). This runs the inline tokenizer functions (including any inline-level extensions) on the provided text, and appends any resulting tokens onto the <code>tokens</code> array. The <code>tokens</code> array is also returned by the function.</dd>\\n</dl>\\n</dd>\\n\\n<dt><code><strong>renderer</strong>(<i>object</i> token)</code></dt>\\n<dd>A function that reads a token and returns the generated HTML output string.\\n\\nThe renderer function has access to the parser in the `this` object, which can be used if any part of the token needs needs to be parsed further, such as any child tokens. The key functions that may be useful include:\\n\\n<dl>\\n<dt><code><strong>this.parser.parse</strong>(<i>array</i> tokens)</code></dt>\\n<dd>Runs the block renderer functions (including any extensions) on the provided array of tokens, and returns the resulting HTML string output. This is used to generate the HTML from any child block-level tokens, for example if your extension is a \\\"container\\\"-type token (such as a blockquote) that can potentially include other block-level tokens inside.</dd>\\n\\n<dt><code><strong>this.parser.parseInline</strong>(<i>array</i> tokens)</code></dt>\\n<dd>Runs the inline renderer functions (including any extensions) on the provided array of tokens, and returns the resulting HTML string output. This is used to generate the HTML from any child inline-level tokens.</dd>\\n</dl>\\n</dd>\\n\\n<dt><code><strong>childTokens</strong> [optional]</code></dt>\\n<dd>An array of strings that match the names of any token parameters that should be traversed by the <code>walkTokens</code> functions. For instance, if you want to use a second custom parameter to contain child tokens in addition to <code>tokens</code>, it could be listed here. If <code>childTokens</code> is provided, the <code>tokens</code> array will not be walked by default unless it is also included in the <code>childTokens</code> array.</dd>\\n</dl>\\n\\n**Example:** Add a custom syntax to generate `<dl>` description lists.\\n\\n``` js\\nconst descriptionList = {\\n  name: 'descriptionList',\\n  level: 'block',                                     // Is this a block-level or inline-level tokenizer?\\n  start(src) { return src.match(/:[^:\\\\n]/)?.index; }, // Hint to Marked.js to stop and check for a match\\n  tokenizer(src, tokens) {\\n    const rule = /^(?::[^:\\\\n]+:[^:\\\\n]*(?:\\\\n|$))+/;    // Regex for the complete token, anchor to string start\\n    const match = rule.exec(src);\\n    if (match) {\\n      const token = {                                 // Token to generate\\n        type: 'descriptionList',                      // Should match \\\"name\\\" above\\n        raw: match[0],                                // Text to consume from the source\\n        text: match[0].trim(),                        // Additional custom properties\\n        tokens: []                                    // Array where child inline tokens will be generated\\n      };\\n      this.lexer.inline(token.text, token.tokens);    // Queue this data to be processed for inline tokens\\n      return token;\\n    }\\n  },\\n  renderer(token) {\\n    return `<dl>${this.parser.parseInline(token.tokens)}\\\\n</dl>`; // parseInline to turn child tokens into HTML\\n  }\\n};\\n\\nconst description = {\\n  name: 'description',\\n  level: 'inline',                                 // Is this a block-level or inline-level tokenizer?\\n  start(src) { return src.match(/:/)?.index; },    // Hint to Marked.js to stop and check for a match\\n  tokenizer(src, tokens) {\\n    const rule = /^:([^:\\\\n]+):([^:\\\\n]*)(?:\\\\n|$)/;  // Regex for the complete token, anchor to string start\\n    const match = rule.exec(src);\\n    if (match) {\\n      return {                                         // Token to generate\\n        type: 'description',                           // Should match \\\"name\\\" above\\n        raw: match[0],                                 // Text to consume from the source\\n        dt: this.lexer.inlineTokens(match[1].trim()),  // Additional custom properties, including\\n        dd: this.lexer.inlineTokens(match[2].trim())   //   any further-nested inline tokens\\n      };\\n    }\\n  },\\n  renderer(token) {\\n    return `\\\\n<dt>${this.parser.parseInline(token.dt)}</dt><dd>${this.parser.parseInline(token.dd)}</dd>`;\\n  },\\n  childTokens: ['dt', 'dd'],                 // Any child tokens to be visited by walkTokens\\n};\\n\\nfunction walkTokens(token) {                        // Post-processing on the completed token tree\\n  if (token.type === 'strong') {\\n    token.text += ' walked';\\n    token.tokens = this.Lexer.lexInline(token.text)\\n  }\\n}\\nmarked.use({ extensions: [descriptionList, description], walkTokens });\\n\\n// EQUIVALENT TO:\\n\\nmarked.use({ extensions: [descriptionList] });\\nmarked.use({ extensions: [description]     });\\nmarked.use({ walkTokens })\\n\\nconsole.log(marked.parse('A Description List:\\\\n'\\n                 + ':   Topic 1   :  Description 1\\\\n'\\n                 + ': **Topic 2** : *Description 2*'));\\n```\\n\\n**Output**\\n\\n``` bash\\n<p>A Description List:</p>\\n<dl>\\n<dt>Topic 1</dt><dd>Description 1</dd>\\n<dt><strong>Topic 2 walked</strong></dt><dd><em>Description 2</em></dd>\\n</dl>\\n```\\n\\n***\\n\\n<h2 id=\\\"async\\\">Async Marked : <code>async</code></h2>\\n\\nMarked will return a promise if the `async` option is true. The `async` option will tell marked to await any `walkTokens` functions before parsing the tokens and returning an HTML string.\\n\\nSimple Example:\\n\\n```js\\nconst walkTokens = async (token) => {\\n  if (token.type === 'link') {\\n    try {\\n      await fetch(token.href);\\n    } catch (ex) {\\n      token.title = 'invalid';\\n    }\\n  }\\n};\\n\\nmarked.use({ walkTokens, async: true });\\n\\nconst markdown = `\\n[valid link](https://example.com)\\n\\n[invalid link](https://invalidurl.com)\\n`;\\n\\nconst html = await marked.parse(markdown);\\n```\\n\\nCustom Extension Example:\\n\\n```js\\nconst importUrl = {\\n  extensions: [{\\n    name: 'importUrl',\\n    level: 'block',\\n    start(src) { return src.indexOf('\\\\n:'); },\\n    tokenizer(src) {\\n      const rule = /^:(https?:\\\\/\\\\/.+?):/;\\n      const match = rule.exec(src);\\n      if (match) {\\n        return {\\n          type: 'importUrl',\\n          raw: match[0],\\n          url: match[1],\\n          html: '' // will be replaced in walkTokens\\n        };\\n      }\\n    },\\n    renderer(token) {\\n      return token.html;\\n    }\\n  }],\\n  async: true, // needed to tell marked to return a promise\\n  async walkTokens(token) {\\n    if (token.type === 'importUrl') {\\n      const res = await fetch(token.url);\\n      token.html = await res.text();\\n    }\\n  }\\n};\\n\\nmarked.use(importUrl);\\n\\nconst markdown = `\\n# example.com\\n\\n:https://example.com:\\n`;\\n\\nconst html = await marked.parse(markdown);\\n```\\n\\n<h2 id=\\\"lexer\\\">The Lexer</h2>\\n\\nThe lexer takes a markdown string and calls the tokenizer functions.\\n\\n\\n<h2 id=\\\"parser\\\">The Parser</h2>\\n\\nThe parser takes tokens as input and calls the renderer functions.\\n\\n<h2 id=\\\"extend\\\">Access to Lexer and Parser</h2>\\n\\nYou also have direct access to the lexer and parser if you so desire.\\n\\n``` js\\nconst tokens = marked.lexer(markdown, options);\\nconsole.log(marked.parser(tokens, options));\\n```\\n\\n``` js\\nconst lexer = new marked.Lexer(options);\\nconst tokens = lexer.lex(markdown);\\nconsole.log(tokens);\\nconsole.log(lexer.tokenizer.rules.block); // block level rules used\\nconsole.log(lexer.tokenizer.rules.inline); // inline level rules used\\nconsole.log(marked.Lexer.rules.block); // all block level rules\\nconsole.log(marked.Lexer.rules.inline); // all inline level rules\\n```\\n\\n``` bash\\n$ node\\n> require('marked').lexer('> I am using marked.')\\n[\\n  {\\n    type: \\\"blockquote\\\",\\n    raw: \\\"> I am using marked.\\\",\\n    tokens: [\\n      {\\n        type: \\\"paragraph\\\",\\n        raw: \\\"I am using marked.\\\",\\n        text: \\\"I am using marked.\\\",\\n        tokens: [\\n          {\\n            type: \\\"text\\\",\\n            raw: \\\"I am using marked.\\\",\\n            text: \\\"I am using marked.\\\"\\n          }\\n        ]\\n      }\\n    ]\\n  },\\n  links: {}\\n]\\n```\\n\\nThe Lexer builds an array of tokens, which will be passed to the Parser.\\nThe Parser processes each token in the token array:\\n\\n``` js\\nimport { marked } from 'marked';\\n\\nconst md = `\\n  # heading\\n\\n  [link][1]\\n\\n  [1]: #heading \\\"heading\\\"\\n`;\\n\\nconst tokens = marked.lexer(md);\\nconsole.log(tokens);\\n\\nconst html = marked.parser(tokens);\\nconsole.log(html);\\n```\\n\\n``` bash\\n[\\n  {\\n    type: \\\"heading\\\",\\n    raw: \\\"  # heading\\\\n\\\\n\\\",\\n    depth: 1,\\n    text: \\\"heading\\\",\\n    tokens: [\\n      {\\n        type: \\\"text\\\",\\n        raw: \\\"heading\\\",\\n        text: \\\"heading\\\"\\n      }\\n    ]\\n  },\\n  {\\n    type: \\\"paragraph\\\",\\n    raw: \\\"  [link][1]\\\",\\n    text: \\\"  [link][1]\\\",\\n    tokens: [\\n      {\\n        type: \\\"text\\\",\\n        raw: \\\"  \\\",\\n        text: \\\"  \\\"\\n      },\\n      {\\n        type: \\\"link\\\",\\n        raw: \\\"[link][1]\\\",\\n        text: \\\"link\\\",\\n        href: \\\"#heading\\\",\\n        title: \\\"heading\\\",\\n        tokens: [\\n          {\\n            type: \\\"text\\\",\\n            raw: \\\"link\\\",\\n            text: \\\"link\\\"\\n          }\\n        ]\\n      }\\n    ]\\n  },\\n  {\\n    type: \\\"space\\\",\\n    raw: \\\"\\\\n\\\\n\\\"\\n  },\\n  links: {\\n    \\\"1\\\": {\\n      href: \\\"#heading\\\",\\n      title: \\\"heading\\\"\\n    }\\n  }\\n]\\n<h1 id=\\\"heading\\\">heading</h1>\\n<p>  <a href=\\\"#heading\\\" title=\\\"heading\\\">link</a></p>\\n```\\n\\n[end of USING_PRO.md]\\n[start of USING_ADVANCED.md]\\n## The `parse` function\\n\\n```js\\nimport { marked } from 'marked';\\nmarked.parse(markdownString [,options] [,callback])\\n```\\n\\n|Argument              |Type         |Notes                                                                                                |\\n|:---------------------|:------------|:----------------------------------------------------------------------------------------------------|\\n|markdownString        |`string`     |String of markdown source to be compiled.                                                            |\\n|<a href=\\\"#options\\\">options</a>|`object`|Hash of options. Can also use `marked.setOptions`.                                                |\\n|callback              |`function`   |Called when `markdownString` has been parsed. Can be used as second argument if no `options` present.|\\n\\n### Alternative using reference\\n\\n```js\\n// Create reference instance\\nimport { marked } from 'marked';\\n\\n// Set options\\n// `highlight` example uses https://highlightjs.org\\nmarked.setOptions({\\n  renderer: new marked.Renderer(),\\n  highlight: function(code, lang) {\\n    const hljs = require('highlight.js');\\n    const language = hljs.getLanguage(lang) ? lang : 'plaintext';\\n    return hljs.highlight(code, { language }).value;\\n  },\\n  langPrefix: 'hljs language-', // highlight.js css expects a top-level 'hljs' class.\\n  pedantic: false,\\n  gfm: true,\\n  breaks: false,\\n  sanitize: false,\\n  smartLists: true,\\n  smartypants: false,\\n  xhtml: false\\n});\\n\\n// Compile\\nconsole.log(marked.parse(markdownString));\\n```\\n\\n<h2 id=\\\"options\\\">Options</h2>\\n\\n|Member      |Type      |Default  |Since    |Notes         |\\n|:-----------|:---------|:--------|:--------|:-------------|\\n|async       |`boolean` |`false`  |4.1.0    |If true, `walkTokens` functions can be async and `marked.parse` will return a promise that resolves when all walk tokens functions resolve.|\\n|baseUrl     |`string`  |`null`   |0.3.9    |A prefix url for any relative link. |\\n|breaks      |`boolean` |`false`  |v0.2.7   |If true, add `<br>` on a single line break (copies GitHub behavior on comments, but not on rendered markdown files). Requires `gfm` be `true`.|\\n|gfm         |`boolean` |`true`   |v0.2.1   |If true, use approved [GitHub Flavored Markdown (GFM) specification](https://github.github.com/gfm/).|\\n|headerIds   |`boolean` |`true`   |v0.4.0   |If true, include an `id` attribute when emitting headings (h1, h2, h3, etc).|\\n|headerPrefix|`string`  |`''`     |v0.3.0   |A string to prefix the `id` attribute when emitting headings (h1, h2, h3, etc).|\\n|highlight   |`function`|`null`   |v0.3.0   |A function to highlight code blocks, see <a href=\\\"#highlight\\\">Asynchronous highlighting</a>.|\\n|langPrefix  |`string`  |`'language-'`|v0.3.0|A string to prefix the className in a `<code>` block. Useful for syntax highlighting.|\\n|mangle      |`boolean` |`true`   |v0.3.4   |If true, autolinked email address is escaped with HTML character references.|\\n|pedantic    |`boolean` |`false`  |v0.2.1   |If true, conform to the original `markdown.pl` as much as possible. Don't fix original markdown bugs or behavior. Turns off and overrides `gfm`.|\\n|renderer    |`object`  |`new Renderer()`|v0.3.0|An object containing functions to render tokens to HTML. See [extensibility](/using_pro) for more details.|\\n|sanitize    |`boolean` |`false`  |v0.2.1   |If true, sanitize the HTML passed into `markdownString` with the `sanitizer` function.<br>**Warning**: This feature is deprecated and it should NOT be used as it cannot be considered secure.<br>Instead use a sanitize library, like [DOMPurify](https://github.com/cure53/DOMPurify) (recommended), [sanitize-html](https://github.com/apostrophecms/sanitize-html) or [insane](https://github.com/bevacqua/insane) on the output HTML! |\\n|sanitizer   |`function`|`null`   |v0.3.4   |A function to sanitize the HTML passed into `markdownString`.|\\n|silent      |`boolean` |`false`  |v0.2.7   |If true, the parser does not throw any exception.|\\n|smartLists  |`boolean` |`false`  |v0.2.8   |If true, use smarter list behavior than those found in `markdown.pl`.|\\n|smartypants |`boolean` |`false`  |v0.2.9   |If true, use \\\"smart\\\" typographic punctuation for things like quotes and dashes.|\\n|tokenizer    |`object`  |`new Tokenizer()`|v1.0.0|An object containing functions to create tokens from markdown. See [extensibility](/using_pro) for more details.|\\n|walkTokens   |`function`  |`null`|v1.1.0|A function which is called for every token. See [extensibility](/using_pro) for more details.|\\n|xhtml       |`boolean` |`false`  |v0.3.2   |If true, emit self-closing HTML tags for void elements (&lt;br/&gt;, &lt;img/&gt;, etc.) with a \\\"/\\\" as required by XHTML.|\\n\\n<h2 id=\\\"inline\\\">Inline Markdown</h2>\\n\\nYou can parse inline markdown by running markdown through `marked.parseInline`.\\n\\n```js\\nconst blockHtml = marked.parse('**strong** _em_');\\nconsole.log(blockHtml); // '<p><strong>strong</strong> <em>em</em></p>'\\n\\nconst inlineHtml = marked.parseInline('**strong** _em_');\\nconsole.log(inlineHtml); // '<strong>strong</strong> <em>em</em>'\\n```\\n\\n<h2 id=\\\"highlight\\\">Asynchronous highlighting</h2>\\n\\nUnlike `highlight.js` the `pygmentize.js` library uses asynchronous highlighting. This example demonstrates that marked is agnostic when it comes to the highlighter you use.\\n\\n```js\\nmarked.setOptions({\\n  highlight: function(code, lang, callback) {\\n    require('pygmentize-bundled') ({ lang: lang, format: 'html' }, code, function (err, result) {\\n      callback(err, result.toString());\\n    });\\n  }\\n});\\n\\nmarked.parse(markdownString, (err, html) => {\\n  console.log(html);\\n});\\n```\\n\\nIn both examples, `code` is a `string` representing the section of code to pass to the highlighter. In this example, `lang` is a `string` informing the highlighter what programming language to use for the `code` and `callback` is the `function` the asynchronous highlighter will call once complete.\\n\\n<h2 id=\\\"workers\\\">Workers</h2>\\n\\nTo prevent ReDoS attacks you can run marked on a worker and terminate it when parsing takes longer than usual.\\n\\nMarked can be run in a [worker thread](https://nodejs.org/api/worker_threads.html) on a node server, or a [web worker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) in a browser.\\n\\n### Node Worker Thread\\n\\n```js\\n// markedWorker.js\\n\\nimport { marked } from 'marked';\\nimport { parentPort } from 'worker_threads';\\n\\nparentPort.on('message', (markdownString) => {\\n  parentPort.postMessage(marked.parse(markdownString));\\n});\\n```\\n\\n```js\\n// index.js\\n\\nimport { Worker } from 'worker_threads';\\nconst markedWorker = new Worker('./markedWorker.js');\\n\\nconst markedTimeout = setTimeout(() => {\\n  markedWorker.terminate();\\n  throw new Error('Marked took too long!');\\n}, timeoutLimit);\\n\\nmarkedWorker.on('message', (html) => {\\n  clearTimeout(markedTimeout);\\n  console.log(html);\\n  markedWorker.terminate();\\n});\\n\\nmarkedWorker.postMessage(markdownString);\\n```\\n\\n### Web Worker\\n\\n> **NOTE**: Web Workers send the payload from `postMessage` in an object with the payload in a `.data` property\\n\\n```js\\n// markedWorker.js\\n\\nimportScripts('path/to/marked.min.js');\\n\\nonmessage = (e) => {\\n  const markdownString = e.data\\n  postMessage(marked.parse(markdownString));\\n};\\n```\\n\\n```js\\n// script.js\\n\\nconst markedWorker = new Worker('./markedWorker.js');\\n\\nconst markedTimeout = setTimeout(() => {\\n  markedWorker.terminate();\\n  throw new Error('Marked took too long!');\\n}, timeoutLimit);\\n\\nmarkedWorker.onmessage = (e) => {\\n  clearTimeout(markedTimeout);\\n  const html = e.data;\\n  console.log(html);\\n  markedWorker.terminate();\\n};\\n\\nmarkedWorker.postMessage(markdownString);\\n```\\n\\n[end of USING_ADVANCED.md]\\n[start of marked.esm.js]\\n/**\\n * marked - a markdown parser\\n * Copyright (c) 2011-2022, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n\\n/**\\n * DO NOT EDIT THIS FILE\\n * The code in this file is generated from files in ./src/\\n */\\n\\nfunction getDefaults() {\\n  return {\\n    async: false,\\n    baseUrl: null,\\n    breaks: false,\\n    extensions: null,\\n    gfm: true,\\n    headerIds: true,\\n    headerPrefix: '',\\n    highlight: null,\\n    langPrefix: 'language-',\\n    mangle: true,\\n    pedantic: false,\\n    renderer: null,\\n    sanitize: false,\\n    sanitizer: null,\\n    silent: false,\\n    smartLists: false,\\n    smartypants: false,\\n    tokenizer: null,\\n    walkTokens: null,\\n    xhtml: false\\n  };\\n}\\n\\nlet defaults = getDefaults();\\n\\nfunction changeDefaults(newDefaults) {\\n  defaults = newDefaults;\\n}\\n\\n/**\\n * Helpers\\n */\\nconst escapeTest = /[&<>\\\"']/;\\nconst escapeReplace = /[&<>\\\"']/g;\\nconst escapeTestNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/;\\nconst escapeReplaceNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/g;\\nconst escapeReplacements = {\\n  '&': '&amp;',\\n  '<': '&lt;',\\n  '>': '&gt;',\\n  '\\\"': '&quot;',\\n  \\\"'\\\": '&#39;'\\n};\\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\\nfunction escape(html, encode) {\\n  if (encode) {\\n    if (escapeTest.test(html)) {\\n      return html.replace(escapeReplace, getEscapeReplacement);\\n    }\\n  } else {\\n    if (escapeTestNoEncode.test(html)) {\\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\\n    }\\n  }\\n\\n  return html;\\n}\\n\\nconst unescapeTest = /&(#(?:\\\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\\\w+));?/ig;\\n\\n/**\\n * @param {string} html\\n */\\nfunction unescape(html) {\\n  // explicitly match decimal, hex, and named HTML entities\\n  return html.replace(unescapeTest, (_, n) => {\\n    n = n.toLowerCase();\\n    if (n === 'colon') return ':';\\n    if (n.charAt(0) === '#') {\\n      return n.charAt(1) === 'x'\\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\\n        : String.fromCharCode(+n.substring(1));\\n    }\\n    return '';\\n  });\\n}\\n\\nconst caret = /(^|[^\\\\[])\\\\^/g;\\n\\n/**\\n * @param {string | RegExp} regex\\n * @param {string} opt\\n */\\nfunction edit(regex, opt) {\\n  regex = typeof regex === 'string' ? regex : regex.source;\\n  opt = opt || '';\\n  const obj = {\\n    replace: (name, val) => {\\n      val = val.source || val;\\n      val = val.replace(caret, '$1');\\n      regex = regex.replace(name, val);\\n      return obj;\\n    },\\n    getRegex: () => {\\n      return new RegExp(regex, opt);\\n    }\\n  };\\n  return obj;\\n}\\n\\nconst nonWordAndColonTest = /[^\\\\w:]/g;\\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\\n\\n/**\\n * @param {boolean} sanitize\\n * @param {string} base\\n * @param {string} href\\n */\\nfunction cleanUrl(sanitize, base, href) {\\n  if (sanitize) {\\n    let prot;\\n    try {\\n      prot = decodeURIComponent(unescape(href))\\n        .replace(nonWordAndColonTest, '')\\n        .toLowerCase();\\n    } catch (e) {\\n      return null;\\n    }\\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\\n      return null;\\n    }\\n  }\\n  if (base && !originIndependentUrl.test(href)) {\\n    href = resolveUrl(base, href);\\n  }\\n  try {\\n    href = encodeURI(href).replace(/%25/g, '%');\\n  } catch (e) {\\n    return null;\\n  }\\n  return href;\\n}\\n\\nconst baseUrls = {};\\nconst justDomain = /^[^:]+:\\\\/*[^/]*$/;\\nconst protocol = /^([^:]+:)[\\\\s\\\\S]*$/;\\nconst domain = /^([^:]+:\\\\/*[^/]*)[\\\\s\\\\S]*$/;\\n\\n/**\\n * @param {string} base\\n * @param {string} href\\n */\\nfunction resolveUrl(base, href) {\\n  if (!baseUrls[' ' + base]) {\\n    // we can ignore everything in base after the last slash of its path component,\\n    // but we might need to add _that_\\n    // https://tools.ietf.org/html/rfc3986#section-3\\n    if (justDomain.test(base)) {\\n      baseUrls[' ' + base] = base + '/';\\n    } else {\\n      baseUrls[' ' + base] = rtrim(base, '/', true);\\n    }\\n  }\\n  base = baseUrls[' ' + base];\\n  const relativeBase = base.indexOf(':') === -1;\\n\\n  if (href.substring(0, 2) === '//') {\\n    if (relativeBase) {\\n      return href;\\n    }\\n    return base.replace(protocol, '$1') + href;\\n  } else if (href.charAt(0) === '/') {\\n    if (relativeBase) {\\n      return href;\\n    }\\n    return base.replace(domain, '$1') + href;\\n  } else {\\n    return base + href;\\n  }\\n}\\n\\nconst noopTest = { exec: function noopTest() {} };\\n\\nfunction merge(obj) {\\n  let i = 1,\\n    target,\\n    key;\\n\\n  for (; i < arguments.length; i++) {\\n    target = arguments[i];\\n    for (key in target) {\\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\\n        obj[key] = target[key];\\n      }\\n    }\\n  }\\n\\n  return obj;\\n}\\n\\nfunction splitCells(tableRow, count) {\\n  // ensure that every cell-delimiting pipe has a space\\n  // before it to distinguish it from an escaped pipe\\n  const row = tableRow.replace(/\\\\|/g, (match, offset, str) => {\\n      let escaped = false,\\n        curr = offset;\\n      while (--curr >= 0 && str[curr] === '\\\\\\\\') escaped = !escaped;\\n      if (escaped) {\\n        // odd number of slashes means | is escaped\\n        // so we leave it alone\\n        return '|';\\n      } else {\\n        // add space before unescaped |\\n        return ' |';\\n      }\\n    }),\\n    cells = row.split(/ \\\\|/);\\n  let i = 0;\\n\\n  // First/last cell in a row cannot be empty if it has no leading/trailing pipe\\n  if (!cells[0].trim()) { cells.shift(); }\\n  if (cells.length > 0 && !cells[cells.length - 1].trim()) { cells.pop(); }\\n\\n  if (cells.length > count) {\\n    cells.splice(count);\\n  } else {\\n    while (cells.length < count) cells.push('');\\n  }\\n\\n  for (; i < cells.length; i++) {\\n    // leading or trailing whitespace is ignored per the gfm spec\\n    cells[i] = cells[i].trim().replace(/\\\\\\\\\\\\|/g, '|');\\n  }\\n  return cells;\\n}\\n\\n/**\\n * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\\n * /c*$/ is vulnerable to REDOS.\\n *\\n * @param {string} str\\n * @param {string} c\\n * @param {boolean} invert Remove suffix of non-c chars instead. Default falsey.\\n */\\nfunction rtrim(str, c, invert) {\\n  const l = str.length;\\n  if (l === 0) {\\n    return '';\\n  }\\n\\n  // Length of suffix matching the invert condition.\\n  let suffLen = 0;\\n\\n  // Step left until we fail to match the invert condition.\\n  while (suffLen < l) {\\n    const currChar = str.charAt(l - suffLen - 1);\\n    if (currChar === c && !invert) {\\n      suffLen++;\\n    } else if (currChar !== c && invert) {\\n      suffLen++;\\n    } else {\\n      break;\\n    }\\n  }\\n\\n  return str.slice(0, l - suffLen);\\n}\\n\\nfunction findClosingBracket(str, b) {\\n  if (str.indexOf(b[1]) === -1) {\\n    return -1;\\n  }\\n  const l = str.length;\\n  let level = 0,\\n    i = 0;\\n  for (; i < l; i++) {\\n    if (str[i] === '\\\\\\\\') {\\n      i++;\\n    } else if (str[i] === b[0]) {\\n      level++;\\n    } else if (str[i] === b[1]) {\\n      level--;\\n      if (level < 0) {\\n        return i;\\n      }\\n    }\\n  }\\n  return -1;\\n}\\n\\nfunction checkSanitizeDeprecation(opt) {\\n  if (opt && opt.sanitize && !opt.silent) {\\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\\n  }\\n}\\n\\n// copied from https://stackoverflow.com/a/5450113/806777\\n/**\\n * @param {string} pattern\\n * @param {number} count\\n */\\nfunction repeatString(pattern, count) {\\n  if (count < 1) {\\n    return '';\\n  }\\n  let result = '';\\n  while (count > 1) {\\n    if (count & 1) {\\n      result += pattern;\\n    }\\n    count >>= 1;\\n    pattern += pattern;\\n  }\\n  return result + pattern;\\n}\\n\\nfunction outputLink(cap, link, raw, lexer) {\\n  const href = link.href;\\n  const title = link.title ? escape(link.title) : null;\\n  const text = cap[1].replace(/\\\\\\\\([\\\\[\\\\]])/g, '$1');\\n\\n  if (cap[0].charAt(0) !== '!') {\\n    lexer.state.inLink = true;\\n    const token = {\\n      type: 'link',\\n      raw,\\n      href,\\n      title,\\n      text,\\n      tokens: lexer.inlineTokens(text)\\n    };\\n    lexer.state.inLink = false;\\n    return token;\\n  }\\n  return {\\n    type: 'image',\\n    raw,\\n    href,\\n    title,\\n    text: escape(text)\\n  };\\n}\\n\\nfunction indentCodeCompensation(raw, text) {\\n  const matchIndentToCode = raw.match(/^(\\\\s+)(?:```)/);\\n\\n  if (matchIndentToCode === null) {\\n    return text;\\n  }\\n\\n  const indentToCode = matchIndentToCode[1];\\n\\n  return text\\n    .split('\\\\n')\\n    .map(node => {\\n      const matchIndentInNode = node.match(/^\\\\s+/);\\n      if (matchIndentInNode === null) {\\n        return node;\\n      }\\n\\n      const [indentInNode] = matchIndentInNode;\\n\\n      if (indentInNode.length >= indentToCode.length) {\\n        return node.slice(indentToCode.length);\\n      }\\n\\n      return node;\\n    })\\n    .join('\\\\n');\\n}\\n\\n/**\\n * Tokenizer\\n */\\nclass Tokenizer {\\n  constructor(options) {\\n    this.options = options || defaults;\\n  }\\n\\n  space(src) {\\n    const cap = this.rules.block.newline.exec(src);\\n    if (cap && cap[0].length > 0) {\\n      return {\\n        type: 'space',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  code(src) {\\n    const cap = this.rules.block.code.exec(src);\\n    if (cap) {\\n      const text = cap[0].replace(/^ {1,4}/gm, '');\\n      return {\\n        type: 'code',\\n        raw: cap[0],\\n        codeBlockStyle: 'indented',\\n        text: !this.options.pedantic\\n          ? rtrim(text, '\\\\n')\\n          : text\\n      };\\n    }\\n  }\\n\\n  fences(src) {\\n    const cap = this.rules.block.fences.exec(src);\\n    if (cap) {\\n      const raw = cap[0];\\n      const text = indentCodeCompensation(raw, cap[3] || '');\\n\\n      return {\\n        type: 'code',\\n        raw,\\n        lang: cap[2] ? cap[2].trim() : cap[2],\\n        text\\n      };\\n    }\\n  }\\n\\n  heading(src) {\\n    const cap = this.rules.block.heading.exec(src);\\n    if (cap) {\\n      let text = cap[2].trim();\\n\\n      // remove trailing #s\\n      if (/#$/.test(text)) {\\n        const trimmed = rtrim(text, '#');\\n        if (this.options.pedantic) {\\n          text = trimmed.trim();\\n        } else if (!trimmed || / $/.test(trimmed)) {\\n          // CommonMark requires space before trailing #s\\n          text = trimmed.trim();\\n        }\\n      }\\n\\n      return {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[1].length,\\n        text,\\n        tokens: this.lexer.inline(text)\\n      };\\n    }\\n  }\\n\\n  hr(src) {\\n    const cap = this.rules.block.hr.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'hr',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  blockquote(src) {\\n    const cap = this.rules.block.blockquote.exec(src);\\n    if (cap) {\\n      const text = cap[0].replace(/^ *>[ \\\\t]?/gm, '');\\n\\n      return {\\n        type: 'blockquote',\\n        raw: cap[0],\\n        tokens: this.lexer.blockTokens(text, []),\\n        text\\n      };\\n    }\\n  }\\n\\n  list(src) {\\n    let cap = this.rules.block.list.exec(src);\\n    if (cap) {\\n      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine,\\n        line, nextLine, rawLine, itemContents, endEarly;\\n\\n      let bull = cap[1].trim();\\n      const isordered = bull.length > 1;\\n\\n      const list = {\\n        type: 'list',\\n        raw: '',\\n        ordered: isordered,\\n        start: isordered ? +bull.slice(0, -1) : '',\\n        loose: false,\\n        items: []\\n      };\\n\\n      bull = isordered ? `\\\\\\\\d{1,9}\\\\\\\\${bull.slice(-1)}` : `\\\\\\\\${bull}`;\\n\\n      if (this.options.pedantic) {\\n        bull = isordered ? bull : '[*+-]';\\n      }\\n\\n      // Get next list item\\n      const itemRegex = new RegExp(`^( {0,3}${bull})((?:[\\\\t ][^\\\\\\\\n]*)?(?:\\\\\\\\n|$))`);\\n\\n      // Check if current bullet point can start a new List Item\\n      while (src) {\\n        endEarly = false;\\n        if (!(cap = itemRegex.exec(src))) {\\n          break;\\n        }\\n\\n        if (this.rules.block.hr.test(src)) { // End list if bullet was actually HR (possibly move into itemRegex?)\\n          break;\\n        }\\n\\n        raw = cap[0];\\n        src = src.substring(raw.length);\\n\\n        line = cap[2].split('\\\\n', 1)[0];\\n        nextLine = src.split('\\\\n', 1)[0];\\n\\n        if (this.options.pedantic) {\\n          indent = 2;\\n          itemContents = line.trimLeft();\\n        } else {\\n          indent = cap[2].search(/[^ ]/); // Find first non-space char\\n          indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\\n          itemContents = line.slice(indent);\\n          indent += cap[1].length;\\n        }\\n\\n        blankLine = false;\\n\\n        if (!line && /^ *$/.test(nextLine)) { // Items begin with at most one blank line\\n          raw += nextLine + '\\\\n';\\n          src = src.substring(nextLine.length + 1);\\n          endEarly = true;\\n        }\\n\\n        if (!endEarly) {\\n          const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\\\\\d{1,9}[.)])((?: [^\\\\\\\\n]*)?(?:\\\\\\\\n|$))`);\\n          const hrRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\\\\\* *){3,})(?:\\\\\\\\n+|$)`);\\n          const fencesBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\\\\`\\\\`\\\\`|~~~)`);\\n          const headingBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`);\\n\\n          // Check if following lines should be included in List Item\\n          while (src) {\\n            rawLine = src.split('\\\\n', 1)[0];\\n            line = rawLine;\\n\\n            // Re-align to follow commonmark nesting rules\\n            if (this.options.pedantic) {\\n              line = line.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\\n            }\\n\\n            // End list item if found code fences\\n            if (fencesBeginRegex.test(line)) {\\n              break;\\n            }\\n\\n            // End list item if found start of new heading\\n            if (headingBeginRegex.test(line)) {\\n              break;\\n            }\\n\\n            // End list item if found start of new bullet\\n            if (nextBulletRegex.test(line)) {\\n              break;\\n            }\\n\\n            // Horizontal rule found\\n            if (hrRegex.test(src)) {\\n              break;\\n            }\\n\\n            if (line.search(/[^ ]/) >= indent || !line.trim()) { // Dedent if possible\\n              itemContents += '\\\\n' + line.slice(indent);\\n            } else if (!blankLine) { // Until blank line, item doesn't need indentation\\n              itemContents += '\\\\n' + line;\\n            } else { // Otherwise, improper indentation ends this item\\n              break;\\n            }\\n\\n            if (!blankLine && !line.trim()) { // Check if current line is blank\\n              blankLine = true;\\n            }\\n\\n            raw += rawLine + '\\\\n';\\n            src = src.substring(rawLine.length + 1);\\n          }\\n        }\\n\\n        if (!list.loose) {\\n          // If the previous item ended with a blank line, the list is loose\\n          if (endsWithBlankLine) {\\n            list.loose = true;\\n          } else if (/\\\\n *\\\\n *$/.test(raw)) {\\n            endsWithBlankLine = true;\\n          }\\n        }\\n\\n        // Check for task list items\\n        if (this.options.gfm) {\\n          istask = /^\\\\[[ xX]\\\\] /.exec(itemContents);\\n          if (istask) {\\n            ischecked = istask[0] !== '[ ] ';\\n            itemContents = itemContents.replace(/^\\\\[[ xX]\\\\] +/, '');\\n          }\\n        }\\n\\n        list.items.push({\\n          type: 'list_item',\\n          raw,\\n          task: !!istask,\\n          checked: ischecked,\\n          loose: false,\\n          text: itemContents\\n        });\\n\\n        list.raw += raw;\\n      }\\n\\n      // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\\n      list.items[list.items.length - 1].raw = raw.trimRight();\\n      list.items[list.items.length - 1].text = itemContents.trimRight();\\n      list.raw = list.raw.trimRight();\\n\\n      const l = list.items.length;\\n\\n      // Item child tokens handled here at end because we needed to have the final item to trim it first\\n      for (i = 0; i < l; i++) {\\n        this.lexer.state.top = false;\\n        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\\n        const spacers = list.items[i].tokens.filter(t => t.type === 'space');\\n        const hasMultipleLineBreaks = spacers.every(t => {\\n          const chars = t.raw.split('');\\n          let lineBreaks = 0;\\n          for (const char of chars) {\\n            if (char === '\\\\n') {\\n              lineBreaks += 1;\\n            }\\n            if (lineBreaks > 1) {\\n              return true;\\n            }\\n          }\\n\\n          return false;\\n        });\\n\\n        if (!list.loose && spacers.length && hasMultipleLineBreaks) {\\n          // Having a single line break doesn't mean a list is loose. A single line break is terminating the last list item\\n          list.loose = true;\\n          list.items[i].loose = true;\\n        }\\n      }\\n\\n      return list;\\n    }\\n  }\\n\\n  html(src) {\\n    const cap = this.rules.block.html.exec(src);\\n    if (cap) {\\n      const token = {\\n        type: 'html',\\n        raw: cap[0],\\n        pre: !this.options.sanitizer\\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\\n        text: cap[0]\\n      };\\n      if (this.options.sanitize) {\\n        const text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\\n        token.type = 'paragraph';\\n        token.text = text;\\n        token.tokens = this.lexer.inline(text);\\n      }\\n      return token;\\n    }\\n  }\\n\\n  def(src) {\\n    const cap = this.rules.block.def.exec(src);\\n    if (cap) {\\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\\n      const tag = cap[1].toLowerCase().replace(/\\\\s+/g, ' ');\\n      return {\\n        type: 'def',\\n        tag,\\n        raw: cap[0],\\n        href: cap[2],\\n        title: cap[3]\\n      };\\n    }\\n  }\\n\\n  table(src) {\\n    const cap = this.rules.block.table.exec(src);\\n    if (cap) {\\n      const item = {\\n        type: 'table',\\n        header: splitCells(cap[1]).map(c => { return { text: c }; }),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        rows: cap[3] && cap[3].trim() ? cap[3].replace(/\\\\n[ \\\\t]*$/, '').split('\\\\n') : []\\n      };\\n\\n      if (item.header.length === item.align.length) {\\n        item.raw = cap[0];\\n\\n        let l = item.align.length;\\n        let i, j, k, row;\\n        for (i = 0; i < l; i++) {\\n          if (/^ *-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'right';\\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'center';\\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\\n            item.align[i] = 'left';\\n          } else {\\n            item.align[i] = null;\\n          }\\n        }\\n\\n        l = item.rows.length;\\n        for (i = 0; i < l; i++) {\\n          item.rows[i] = splitCells(item.rows[i], item.header.length).map(c => { return { text: c }; });\\n        }\\n\\n        // parse child tokens inside headers and cells\\n\\n        // header child tokens\\n        l = item.header.length;\\n        for (j = 0; j < l; j++) {\\n          item.header[j].tokens = this.lexer.inline(item.header[j].text);\\n        }\\n\\n        // cell child tokens\\n        l = item.rows.length;\\n        for (j = 0; j < l; j++) {\\n          row = item.rows[j];\\n          for (k = 0; k < row.length; k++) {\\n            row[k].tokens = this.lexer.inline(row[k].text);\\n          }\\n        }\\n\\n        return item;\\n      }\\n    }\\n  }\\n\\n  lheading(src) {\\n    const cap = this.rules.block.lheading.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\\n        text: cap[1],\\n        tokens: this.lexer.inline(cap[1])\\n      };\\n    }\\n  }\\n\\n  paragraph(src) {\\n    const cap = this.rules.block.paragraph.exec(src);\\n    if (cap) {\\n      const text = cap[1].charAt(cap[1].length - 1) === '\\\\n'\\n        ? cap[1].slice(0, -1)\\n        : cap[1];\\n      return {\\n        type: 'paragraph',\\n        raw: cap[0],\\n        text,\\n        tokens: this.lexer.inline(text)\\n      };\\n    }\\n  }\\n\\n  text(src) {\\n    const cap = this.rules.block.text.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'text',\\n        raw: cap[0],\\n        text: cap[0],\\n        tokens: this.lexer.inline(cap[0])\\n      };\\n    }\\n  }\\n\\n  escape(src) {\\n    const cap = this.rules.inline.escape.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'escape',\\n        raw: cap[0],\\n        text: escape(cap[1])\\n      };\\n    }\\n  }\\n\\n  tag(src) {\\n    const cap = this.rules.inline.tag.exec(src);\\n    if (cap) {\\n      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\\n        this.lexer.state.inLink = true;\\n      } else if (this.lexer.state.inLink && /^<\\\\/a>/i.test(cap[0])) {\\n        this.lexer.state.inLink = false;\\n      }\\n      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        this.lexer.state.inRawBlock = true;\\n      } else if (this.lexer.state.inRawBlock && /^<\\\\/(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        this.lexer.state.inRawBlock = false;\\n      }\\n\\n      return {\\n        type: this.options.sanitize\\n          ? 'text'\\n          : 'html',\\n        raw: cap[0],\\n        inLink: this.lexer.state.inLink,\\n        inRawBlock: this.lexer.state.inRawBlock,\\n        text: this.options.sanitize\\n          ? (this.options.sanitizer\\n            ? this.options.sanitizer(cap[0])\\n            : escape(cap[0]))\\n          : cap[0]\\n      };\\n    }\\n  }\\n\\n  link(src) {\\n    const cap = this.rules.inline.link.exec(src);\\n    if (cap) {\\n      const trimmedUrl = cap[2].trim();\\n      if (!this.options.pedantic && /^</.test(trimmedUrl)) {\\n        // commonmark requires matching angle brackets\\n        if (!(/>$/.test(trimmedUrl))) {\\n          return;\\n        }\\n\\n        // ending angle bracket cannot be escaped\\n        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\\\\\');\\n        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\\n          return;\\n        }\\n      } else {\\n        // find closing parenthesis\\n        const lastParenIndex = findClosingBracket(cap[2], '()');\\n        if (lastParenIndex > -1) {\\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\\n          const linkLen = start + cap[1].length + lastParenIndex;\\n          cap[2] = cap[2].substring(0, lastParenIndex);\\n          cap[0] = cap[0].substring(0, linkLen).trim();\\n          cap[3] = '';\\n        }\\n      }\\n      let href = cap[2];\\n      let title = '';\\n      if (this.options.pedantic) {\\n        // split pedantic href and title\\n        const link = /^([^'\\\"]*[^\\\\s])\\\\s+(['\\\"])(.*)\\\\2/.exec(href);\\n\\n        if (link) {\\n          href = link[1];\\n          title = link[3];\\n        }\\n      } else {\\n        title = cap[3] ? cap[3].slice(1, -1) : '';\\n      }\\n\\n      href = href.trim();\\n      if (/^</.test(href)) {\\n        if (this.options.pedantic && !(/>$/.test(trimmedUrl))) {\\n          // pedantic allows starting angle bracket without ending angle bracket\\n          href = href.slice(1);\\n        } else {\\n[end of marked.esm.js]\\n[start of marked.1.txt]\\nmarked(1)\\t\\t    General Commands Manual\\t\\t     marked(1)\\n\\nNAME\\n       marked - a javascript markdown parser\\n\\nSYNOPSIS\\n       marked  [-o  <output>]  [-i  <input>] [-s <string>] [--help] [--tokens]\\n       [--pedantic]   [--gfm]\\t [--breaks]    [--sanitize]    [--smart-lists]\\n       [--lang-prefix <prefix>] [--no-etc...] [--silent] [filename]\\n\\n\\nDESCRIPTION\\n       marked is a full-featured javascript markdown parser, built for speed.\\n       It also includes multiple GFM features.\\n\\nEXAMPLES\\n       cat in.md | marked > out.html\\n\\n       echo \\\"hello *world*\\\" | marked\\n\\n       marked -o out.html -i in.md --gfm\\n\\n       marked --output=\\\"hello world.html\\\" -i in.md --no-breaks\\n\\nOPTIONS\\n       -o, --output [output]\\n\\t      Specify file output. If none is specified, write to stdout.\\n\\n       -i, --input [input]\\n\\t      Specify file input, otherwise use last argument as input file.\\n\\t      If no input file is specified, read from stdin.\\n\\n       -s, --string [string]\\n\\t      Specify string input instead of a file.\\n\\n       -t, --tokens\\n\\t      Output a token stream instead of html.\\n\\n       --pedantic\\n\\t      Conform to obscure parts of markdown.pl as much as possible.\\n\\t      Don't fix original markdown bugs.\\n\\n       --gfm  Enable github flavored markdown.\\n\\n       --breaks\\n\\t      Enable GFM line breaks. Only works with the gfm option.\\n\\n       --sanitize\\n\\t      Sanitize output. Ignore any HTML input.\\n\\n       --smart-lists\\n\\t      Use smarter list behavior than the original markdown.\\n\\n       --lang-prefix [prefix]\\n\\t      Set the prefix for code block classes.\\n\\n       --mangle\\n\\t      Mangle email addresses.\\n\\n       --no-sanitize, -no-etc...\\n\\t      The inverse of any of the marked options above.\\n\\n       --silent\\n\\t      Silence error output.\\n\\n       -h, --help\\n\\t      Display help information.\\n\\nCONFIGURATION\\n       For configuring and running programmatically.\\n\\n       Example\\n\\n\\t   import { marked } from 'marked';\\n\\t   marked('*foo*', { gfm: true });\\n\\nBUGS\\n       Please report any bugs to https://github.com/markedjs/marked.\\n\\nLICENSE\\n       Copyright (c) 2011-2014, Christopher Jeffrey (MIT License).\\n\\nSEE ALSO\\n       markdown(1), node.js(1)\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t     marked(1)\\n\\n[end of marked.1.txt]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "Bug_report.md",
        "USING_PRO.md",
        "USING_ADVANCED.md",
        "marked.esm.js",
        "marked.1.txt"
      ]
    },
    "retrieved_documents": [
      {
        "id": "e249b6c5-ca31-4ba8-b158-4175608652a3",
        "score": 0.01639344262295082,
        "payload": {
          "text": "---\nname: Bug report\nabout: Marked says it does this thing but does not\n\n---\n**Marked version:**\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\n<!--\n1. [Marked Demo](https://marked.js.org/demo/)\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\n-->\n\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\n<!--\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\n3. Actual output (or error) is...\n-->\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n",
          "filepath": "data/repos/markedjs/marked-4.1/.github/ISSUE_TEMPLATE/Bug_report.md",
          "repo": "markedjs/marked",
          "version": "4.1",
          "chunk_index": 0
        }
      },
      {
        "id": "86e9ed7e-c8d9-4329-ac82-9888010a015c",
        "score": 0.016129032258064516,
        "payload": {
          "text": "## Extending Marked\n\nTo champion the single-responsibility and open/closed principles, we have tried to make it relatively painless to extend Marked. If you are looking to add custom functionality, this is the place to start.\n\n<h2 id=\"use\">marked.use()</h2>\n\n`marked.use(extension)` is the recommended way to extend Marked. The `extension` object can contain any [option](/using_advanced#options) available in Marked:\n\n\n```js\nimport { marked } from 'marked';\n\nmarked.use({\n  pedantic: false,\n  gfm: true,\n  breaks: false,\n  sanitize: false,\n  smartLists: true,\n  smartypants: false,\n  xhtml: false\n});\n```\n\nYou can also supply multiple `extension` objects at once.\n\n```\nmarked.use(myExtension, extension2, extension3);\n\n\\\\ EQUIVALENT TO:\n\nmarked.use(myExtension);\nmarked.use(extension2);\nmarked.use(extension3);\n\n```\n\nAll options will overwrite those previously set, except for the following options which will be merged with the existing framework and can be used to change or extend the functionality of Marked: `renderer`, `tokenizer`, `walkTokens`, and `extensions`.\n\n* The `renderer` and `tokenizer` options are objects with functions that will be merged into the built-in `renderer` and `tokenizer` respectively.\n\n* The `walkTokens` option is a function that will be called to post-process every token before rendering.\n\n* The `extensions` option is an array of objects that can contain additional custom `renderer` and `tokenizer` steps that will execute before any of the default parsing logic occurs.\n\n***\n\n<h2>The Marked Pipeline</h2>\n\nBefore building your custom extensions, it is important to understand the components that Marked uses to translate from Markdown to HTML:\n\n1) The user supplies Marked with an input string to be translated.\n2) The `lexer` feeds segments of the input text string into each `tokenizer`, and from their output, generates a series of tokens in a nested tree structure.\n3) Each `tokenizer` receives a segment of Markdown text and, if it matches a particular pattern, generates a token object containing any relevant information.\n4) The `walkTokens` function will traverse every token in the tree and perform any final adjustments to the token contents.\n4) The `parser` traverses the token tree and feeds each token into the appropriate `renderer`, and concatenates their outputs into the final HTML result.\n5) Each `renderer` receives a token and manipulates its contents to generate a segment of HTML.\n\nMarked provides methods of directly overriding the `renderer` and `tokenizer` for any existing token type, as well as inserting additional custom `renderer` and `tokenizer` functions to handle entirely custom syntax.\n\n***\n\n<h2 id=\"renderer\">The Renderer : <code>renderer</code></h2>\n\nThe renderer defines the HTML output of a given token. If you supply a `renderer` object to the Marked options, it will be merged with the built-in renderer and any functions inside will override the default handling of that token type.\n\nCalling `marked.use()` to override the same function multiple times will give priority to the version that was assigned *last*. Overriding functions can return `false` to fall back to the previous override in the sequence, or resume default behavior if all overrides return `false`. Returning any other value (including nothing) will prevent fallback behavior.\n\n**Example:** Overriding output of the default `heading` token by adding an embedded anchor tag like on GitHub.\n\n```js\n// Create reference instance\nimport { marked } from 'marked';\n\n// Override function\nconst renderer = {\n  heading(text, level) {\n    const escapedText = text.toLowerCase().replace(/[^\\w]+/g, '-');\n\n    return `\n            <h${level}>\n              <a name=\"${escapedText}\" class=\"anchor\" href=\"#${escapedText}\">\n                <span class=\"header-link\"></span>\n              </a>\n              ${text}\n            </h${level}>`;\n  }\n};\n\nmarked.use({ renderer });\n\n// Run marked\nconsole.log(marked.parse('# heading+'));\n```\n\n**Output:**\n\n```html\n<h1>\n  <a name=\"heading-\" class=\"anchor\" href=\"#heading-\">\n    <span class=\"header-link\"></span>\n  </a>\n  heading+\n</h1>\n```\n\n### Block-level renderer methods\n\n- <code>**code**(*string* code, *string* infostring, *boolean* escaped)</code>\n- <code>**blockquote**(*string* quote)</code>\n- <code>**html**(*string* html)</code>\n- <code>**heading**(*string* text, *number* level, *string* raw, *Slugger* slugger)</code>\n- <code>**hr**()</code>\n- <code>**list**(*string* body, *boolean* ordered, *number* start)</code>\n- <code>**listitem**(*string* text, *boolean* task, *boolean* checked)</code>\n- <code>**checkbox**(*boolean* checked)</code>\n- <code>**paragraph**(*string* text)</code>\n- <code>**table**(*string* header, *string* body)</code>\n- <code>**tablerow**(*string* content)</code>\n- <code>**tablecell**(*string* content, *object* flags)</code>\n\n### Inline-level renderer methods\n\n- <code>**strong**(*string* text)</code>\n- <code>**em**(*string* text)</code>\n- <code>**codespan**(*string* code)</code>\n- <code>**br**()</code>\n- <code>**del**(*string* text)</code>\n- <code>**link**(*string* href, *string* title, *string* text)</code>\n- <code>**image**(*string* href, *string* title, *string* text)</code>\n- <code>**text**(*string* text)</code>\n\n`slugger` has the `slug` method to create a unique id from value:\n\n```js\nslugger.slug('foo')   // foo\nslugger.slug('foo')   // foo-1\nslugger.slug('foo')   // foo-2\nslugger.slug('foo 1') // foo-1-1\nslugger.slug('foo-1') // foo-1-2\n...\n```\n\n`slugger.slug` can also be called with the `dryrun` option for stateless operation:\n```js\nslugger.slug('foo')                    // foo\nslugger.slug('foo')                    // foo-1\nslugger.slug('foo')                    // foo-2\nslugger.slug('foo', { dryrun: true })  // foo-3\nslugger.slug('foo', { dryrun: true })  // foo-3\nslugger.slug('foo')                    // foo-3\nslugger.slug('foo')                    // foo-4\n...\n```\n\n`flags` has the following properties:\n\n```js\n{\n    header: true || false,\n    align: 'center' || 'left' || 'right'\n}\n```\n\n***\n\n<h2 id=\"tokenizer\">The Tokenizer : <code>tokenizer</code></h2>\n\nThe tokenizer defines how to turn markdown text into tokens. If you supply a `tokenizer` object to the Marked options, it will be merged with the built-in tokenizer and any functions inside will override the default handling of that token type.\n\nCalling `marked.use()` to override the same function multiple times will give priority to the version that was assigned *last*. Overriding functions can return `false` to fall back to the previous override in the sequence, or resume default behavior if all overrides return `false`. Returning any other value (including nothing) will prevent fallback behavior.\n\n**Example:** Overriding default `codespan` tokenizer to include LaTeX.\n\n```js\n// Create reference instance\nimport { marked } from 'marked';\n\n// Override function\nconst tokenizer = {\n  codespan(src) {\n    const match = src.match(/^\\$+([^\\$\\n]+?)\\$+/);\n    if (match) {\n      return {\n        type: 'codespan',\n        raw: match[0],\n        text: match[1].trim()\n      };\n    }\n\n    // return false to use original codespan tokenizer\n    return false;\n  }\n};\n\nmarked.use({ tokenizer });\n\n// Run marked\nconsole.log(marked.parse('$ latex code $\\n\\n` other code `'));\n```\n\n**Output:**\n\n```html\n<p><code>latex code</code></p>\n<p><code>other code</code></p>\n```\n**NOTE**: This does not fully support latex, see issue [#1948](https://github.com/markedjs/marked/issues/1948).\n\n### Block level tokenizer methods\n\n- <code>**space**(*string* src)</code>\n- <code>**code**(*string* src)</code>\n- <code>**fences**(*string* src)</code>\n- <code>**heading**(*string* src)</code>\n- <code>**hr**(*string* src)</code>\n- <code>**blockquote**(*string* src)</code>\n- <code>**list**(*string* src)</code>\n- <code>**html**(*string* src)</code>\n- <code>**def**(*string* src)</code>\n- <code>**table**(*string* src)</code>\n- <code>**lheading**(*string* src)</code>\n- <code>**paragraph**(*string* src)</code>\n- <code>**text**(*string* src)</code>\n\n### Inline level tokenizer methods\n\n- <code>**escape**(*string* src)</code>\n- <code>**tag**(*string* src)</code>\n- <code>**link**(*string* src)</code>\n- <code>**reflink**(*string* src, *object* links)</code>\n- <code>**emStrong**(*string* src, *string* maskedSrc, *string* prevChar)</code>\n- <code>**codespan**(*string* src)</code>\n- <code>**br**(*string* src)</code>\n- <code>**del**(*string* src)</code>\n- <code>**autolink**(*string* src, *function* mangle)</code>\n- <code>**url**(*string* src, *function* mangle)</code>\n- <code>**inlineText**(*string* src, *function* smartypants)</code>\n\n`mangle` is a method that changes text to HTML character references:\n\n```js\nmangle('test@example.com')\n// \"&#x74;&#101;&#x73;&#116;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#x63;&#111;&#x6d;\"\n```\n\n`smartypants` is a method that translates plain ASCII punctuation characters into \u201csmart\u201d typographic punctuation HTML entities:\n\nhttps://daringfireball.net/projects/smartypants/\n\n```js\nsmartypants('\"this ... string\"')\n// \"\u201cthis \u2026 string\u201d\"\n```\n\n***\n\n<h2 id=\"walk-tokens\">Walk Tokens : <code>walkTokens</code></h2>\n\nThe walkTokens function gets called with every token. Child tokens are called before moving on to sibling tokens. Each token is passed by reference so updates are persisted when passed to the parser. The return value of the function is ignored.\n\n`marked.use()` can be called multiple times with different `walkTokens` functions. Each function will be called in order, starting with the function that was assigned *last*.\n\n**Example:** Overriding heading tokens to start at h2.\n\n```js\nimport { marked } from 'marked';\n\n// Override function\nconst walkTokens = (token) => {\n  if (token.type === 'heading') {\n    token.depth += 1;\n  }\n};\n\nmarked.use({ walkTokens });\n\n// Run marked\nconsole.log(marked.parse('# heading 2\\n\\n## heading 3'));\n```\n\n**Output:**\n\n```html\n<h2 id=\"heading-2\">heading 2</h2>\n<h3 id=\"heading-3\">heading 3</h3>\n```\n\n***\n\n<h2 id=\"extensions\">Custom Extensions : <code>extensions</code></h2>\n\nYou may supply an `extensions` array to the `options` object. This array can contain any number of `extension` objects, using the following properties:\n\n<dl>\n<dt><code><strong>name</strong></code></dt>\n<dd>A string used to identify the token that will be handled by this extension.\n\nIf the name matches an existing extension name, or an existing method in the tokenizer/renderer methods listed above, they will override the previously assigned behavior, with priority on the extension that was assigned **last**. An extension can return `false` to fall back to the previous behavior.</dd>\n\n<dt><code><strong>level</strong></code></dt>\n<dd>A string to determine when to run the extension tokenizer. Must be equal to 'block' or 'inline'.\n\nA **block-level** extension will be handled before any of the block-level tokenizer methods listed above, and generally consists of 'container-type' text (paragraphs, tables, blockquotes, etc.).\n\nAn **inline-level** extension will be handled inside each block-level token, before any of the inline-level tokenizer methods listed above. These generally consist of 'style-type' text (italics, bold, etc.).</dd>\n\n<dt><code><strong>start</strong>(<i>string</i> src)</code></dt>\n<dd>A function that returns the index of the next potential start of the custom token.\n\nThe index can be the result of a <code>src.match().index</code>, or even a simple <code>src.index()</code>. Marked will use this function to ensure that it does not skip over any text that should be part of the custom token.</dd>\n\n<dt><code><strong>tokenizer</strong>(<i>string</i> src, <i>array</i> tokens)</code></dt>\n<dd>A function that reads string of Markdown text and returns a generated token. The token pattern should be found at the beginning of the <code>src</code> string. Accordingly, if using a Regular Expression to detect a token, it should be anchored to the string start (`^`). The <code>tokens</code> parameter contains the array of tokens that have been generated by the lexer up to that point, and can be used to access the previous token, for instance.\n\nThe return value should be an object with the following parameters:\n\n<dl>\n<dt><code><strong>type</strong></code></dt>\n<dd>A string that matches the <code>name</code> parameter of the extension.</dd>\n\n<dt><code><strong>raw</strong></code></dt>\n<dd>A string containing all of the text that this token consumes from the source.</dd>\n\n<dt><code><strong>tokens</strong> [optional]</code></dt>\n<dd>An array of child tokens that will be traversed by the <code>walkTokens</code> function by default.</dd>\n</dl>\n\nThe returned token can also contain any other custom parameters of your choice that your custom `renderer` might need to access.\n\nThe tokenizer function has access to the lexer in the `this` object, which can be used if any internal section of the string needs to be parsed further, such as in handling any inline syntax on the text within a block token. The key functions that may be useful include:\n\n<dl>\n<dt><code><strong>this.lexer.blockTokens</strong>(<i>string</i> text, <i>array</i> tokens)</code></dt>\n<dd>This runs the block tokenizer functions (including any block-level extensions) on the provided text, and appends any resulting tokens onto the <code>tokens</code> array. The <code>tokens</code> array is also returned by the function. You might use this, for example, if your extension creates a \"container\"-type token (such as a blockquote) that can potentially include other block-level tokens inside.</dd>\n\n<dt><code><strong>this.lexer.inline</strong>(<i>string</i> text, <i>array</i> tokens)</code></dt>\n<dd>Parsing of inline-level tokens only occurs after all block-level tokens have been generated. This function adds <code>text</code> and <code>tokens</code> to a queue to be processed using inline-level tokenizers (including any inline-level extensions) at that later step. Tokens will be generated using the provided <code>text</code>, and any resulting tokens will be appended to the <code>tokens</code> array. Note that this function does **NOT** return anything since the inline processing cannot happen until the block-level processing is complete.</dd>\n\n<dt><code><strong>this.lexer.inlineTokens</strong>(<i>string</i> text, <i>array</i> tokens)</code></dt>\n<dd>Sometimes an inline-level token contains further nested inline tokens (such as a <pre><code>**strong**</code></pre> token inside of a <pre><code>### Heading</code></pre>). This runs the inline tokenizer functions (including any inline-level extensions) on the provided text, and appends any resulting tokens onto the <code>tokens</code> array. The <code>tokens</code> array is also returned by the function.</dd>\n</dl>\n</dd>\n\n<dt><code><strong>renderer</strong>(<i>object</i> token)</code></dt>\n<dd>A function that reads a token and returns the generated HTML output string.\n\nThe renderer function has access to the parser in the `this` object, which can be used if any part of the token needs needs to be parsed further, such as any child tokens. The key functions that may be useful include:\n\n<dl>\n<dt><code><strong>this.parser.parse</strong>(<i>array</i> tokens)</code></dt>\n<dd>Runs the block renderer functions (including any extensions) on the provided array of tokens, and returns the resulting HTML string output. This is used to generate the HTML from any child block-level tokens, for example if your extension is a \"container\"-type token (such as a blockquote) that can potentially include other block-level tokens inside.</dd>\n\n<dt><code><strong>this.parser.parseInline</strong>(<i>array</i> tokens)</code></dt>\n<dd>Runs the inline renderer functions (including any extensions) on the provided array of tokens, and returns the resulting HTML string output. This is used to generate the HTML from any child inline-level tokens.</dd>\n</dl>\n</dd>\n\n<dt><code><strong>childTokens</strong> [optional]</code></dt>\n<dd>An array of strings that match the names of any token parameters that should be traversed by the <code>walkTokens</code> functions. For instance, if you want to use a second custom parameter to contain child tokens in addition to <code>tokens</code>, it could be listed here. If <code>childTokens</code> is provided, the <code>tokens</code> array will not be walked by default unless it is also included in the <code>childTokens</code> array.</dd>\n</dl>\n\n**Example:** Add a custom syntax to generate `<dl>` description lists.\n\n``` js\nconst descriptionList = {\n  name: 'descriptionList',\n  level: 'block',                                     // Is this a block-level or inline-level tokenizer?\n  start(src) { return src.match(/:[^:\\n]/)?.index; }, // Hint to Marked.js to stop and check for a match\n  tokenizer(src, tokens) {\n    const rule = /^(?::[^:\\n]+:[^:\\n]*(?:\\n|$))+/;    // Regex for the complete token, anchor to string start\n    const match = rule.exec(src);\n    if (match) {\n      const token = {                                 // Token to generate\n        type: 'descriptionList',                      // Should match \"name\" above\n        raw: match[0],                                // Text to consume from the source\n        text: match[0].trim(),                        // Additional custom properties\n        tokens: []                                    // Array where child inline tokens will be generated\n      };\n      this.lexer.inline(token.text, token.tokens);    // Queue this data to be processed for inline tokens\n      return token;\n    }\n  },\n  renderer(token) {\n    return `<dl>${this.parser.parseInline(token.tokens)}\\n</dl>`; // parseInline to turn child tokens into HTML\n  }\n};\n\nconst description = {\n  name: 'description',\n  level: 'inline',                                 // Is this a block-level or inline-level tokenizer?\n  start(src) { return src.match(/:/)?.index; },    // Hint to Marked.js to stop and check for a match\n  tokenizer(src, tokens) {\n    const rule = /^:([^:\\n]+):([^:\\n]*)(?:\\n|$)/;  // Regex for the complete token, anchor to string start\n    const match = rule.exec(src);\n    if (match) {\n      return {                                         // Token to generate\n        type: 'description',                           // Should match \"name\" above\n        raw: match[0],                                 // Text to consume from the source\n        dt: this.lexer.inlineTokens(match[1].trim()),  // Additional custom properties, including\n        dd: this.lexer.inlineTokens(match[2].trim())   //   any further-nested inline tokens\n      };\n    }\n  },\n  renderer(token) {\n    return `\\n<dt>${this.parser.parseInline(token.dt)}</dt><dd>${this.parser.parseInline(token.dd)}</dd>`;\n  },\n  childTokens: ['dt', 'dd'],                 // Any child tokens to be visited by walkTokens\n};\n\nfunction walkTokens(token) {                        // Post-processing on the completed token tree\n  if (token.type === 'strong') {\n    token.text += ' walked';\n    token.tokens = this.Lexer.lexInline(token.text)\n  }\n}\nmarked.use({ extensions: [descriptionList, description], walkTokens });\n\n// EQUIVALENT TO:\n\nmarked.use({ extensions: [descriptionList] });\nmarked.use({ extensions: [description]     });\nmarked.use({ walkTokens })\n\nconsole.log(marked.parse('A Description List:\\n'\n                 + ':   Topic 1   :  Description 1\\n'\n                 + ': **Topic 2** : *Description 2*'));\n```\n\n**Output**\n\n``` bash\n<p>A Description List:</p>\n<dl>\n<dt>Topic 1</dt><dd>Description 1</dd>\n<dt><strong>Topic 2 walked</strong></dt><dd><em>Description 2</em></dd>\n</dl>\n```\n\n***\n\n<h2 id=\"async\">Async Marked : <code>async</code></h2>\n\nMarked will return a promise if the `async` option is true. The `async` option will tell marked to await any `walkTokens` functions before parsing the tokens and returning an HTML string.\n\nSimple Example:\n\n```js\nconst walkTokens = async (token) => {\n  if (token.type === 'link') {\n    try {\n      await fetch(token.href);\n    } catch (ex) {\n      token.title = 'invalid';\n    }\n  }\n};\n\nmarked.use({ walkTokens, async: true });\n\nconst markdown = `\n[valid link](https://example.com)\n\n[invalid link](https://invalidurl.com)\n`;\n\nconst html = await marked.parse(markdown);\n```\n\nCustom Extension Example:\n\n```js\nconst importUrl = {\n  extensions: [{\n    name: 'importUrl',\n    level: 'block',\n    start(src) { return src.indexOf('\\n:'); },\n    tokenizer(src) {\n      const rule = /^:(https?:\\/\\/.+?):/;\n      const match = rule.exec(src);\n      if (match) {\n        return {\n          type: 'importUrl',\n          raw: match[0],\n          url: match[1],\n          html: '' // will be replaced in walkTokens\n        };\n      }\n    },\n    renderer(token) {\n      return token.html;\n    }\n  }],\n  async: true, // needed to tell marked to return a promise\n  async walkTokens(token) {\n    if (token.type === 'importUrl') {\n      const res = await fetch(token.url);\n      token.html = await res.text();\n    }\n  }\n};\n\nmarked.use(importUrl);\n\nconst markdown = `\n# example.com\n\n:https://example.com:\n`;\n\nconst html = await marked.parse(markdown);\n```\n\n<h2 id=\"lexer\">The Lexer</h2>\n\nThe lexer takes a markdown string and calls the tokenizer functions.\n\n\n<h2 id=\"parser\">The Parser</h2>\n\nThe parser takes tokens as input and calls the renderer functions.\n\n<h2 id=\"extend\">Access to Lexer and Parser</h2>\n\nYou also have direct access to the lexer and parser if you so desire.\n\n``` js\nconst tokens = marked.lexer(markdown, options);\nconsole.log(marked.parser(tokens, options));\n```\n\n``` js\nconst lexer = new marked.Lexer(options);\nconst tokens = lexer.lex(markdown);\nconsole.log(tokens);\nconsole.log(lexer.tokenizer.rules.block); // block level rules used\nconsole.log(lexer.tokenizer.rules.inline); // inline level rules used\nconsole.log(marked.Lexer.rules.block); // all block level rules\nconsole.log(marked.Lexer.rules.inline); // all inline level rules\n```\n\n``` bash\n$ node\n> require('marked').lexer('> I am using marked.')\n[\n  {\n    type: \"blockquote\",\n    raw: \"> I am using marked.\",\n    tokens: [\n      {\n        type: \"paragraph\",\n        raw: \"I am using marked.\",\n        text: \"I am using marked.\",\n        tokens: [\n          {\n            type: \"text\",\n            raw: \"I am using marked.\",\n            text: \"I am using marked.\"\n          }\n        ]\n      }\n    ]\n  },\n  links: {}\n]\n```\n\nThe Lexer builds an array of tokens, which will be passed to the Parser.\nThe Parser processes each token in the token array:\n\n``` js\nimport { marked } from 'marked';\n\nconst md = `\n  # heading\n\n  [link][1]\n\n  [1]: #heading \"heading\"\n`;\n\nconst tokens = marked.lexer(md);\nconsole.log(tokens);\n\nconst html = marked.parser(tokens);\nconsole.log(html);\n```\n\n``` bash\n[\n  {\n    type: \"heading\",\n    raw: \"  # heading\\n\\n\",\n    depth: 1,\n    text: \"heading\",\n    tokens: [\n      {\n        type: \"text\",\n        raw: \"heading\",\n        text: \"heading\"\n      }\n    ]\n  },\n  {\n    type: \"paragraph\",\n    raw: \"  [link][1]\",\n    text: \"  [link][1]\",\n    tokens: [\n      {\n        type: \"text\",\n        raw: \"  \",\n        text: \"  \"\n      },\n      {\n        type: \"link\",\n        raw: \"[link][1]\",\n        text: \"link\",\n        href: \"#heading\",\n        title: \"heading\",\n        tokens: [\n          {\n            type: \"text\",\n            raw: \"link\",\n            text: \"link\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    type: \"space\",\n    raw: \"\\n\\n\"\n  },\n  links: {\n    \"1\": {\n      href: \"#heading\",\n      title: \"heading\"\n    }\n  }\n]\n<h1 id=\"heading\">heading</h1>\n<p>  <a href=\"#heading\" title=\"heading\">link</a></p>\n```\n",
          "filepath": "data/repos/markedjs/marked-4.1/docs/USING_PRO.md",
          "repo": "markedjs/marked",
          "version": "4.1",
          "chunk_index": 0
        }
      },
      {
        "id": "e31ac99a-a7d2-4701-8468-8e4abaad2045",
        "score": 0.015873015873015872,
        "payload": {
          "text": "## The `parse` function\n\n```js\nimport { marked } from 'marked';\nmarked.parse(markdownString [,options] [,callback])\n```\n\n|Argument              |Type         |Notes                                                                                                |\n|:---------------------|:------------|:----------------------------------------------------------------------------------------------------|\n|markdownString        |`string`     |String of markdown source to be compiled.                                                            |\n|<a href=\"#options\">options</a>|`object`|Hash of options. Can also use `marked.setOptions`.                                                |\n|callback              |`function`   |Called when `markdownString` has been parsed. Can be used as second argument if no `options` present.|\n\n### Alternative using reference\n\n```js\n// Create reference instance\nimport { marked } from 'marked';\n\n// Set options\n// `highlight` example uses https://highlightjs.org\nmarked.setOptions({\n  renderer: new marked.Renderer(),\n  highlight: function(code, lang) {\n    const hljs = require('highlight.js');\n    const language = hljs.getLanguage(lang) ? lang : 'plaintext';\n    return hljs.highlight(code, { language }).value;\n  },\n  langPrefix: 'hljs language-', // highlight.js css expects a top-level 'hljs' class.\n  pedantic: false,\n  gfm: true,\n  breaks: false,\n  sanitize: false,\n  smartLists: true,\n  smartypants: false,\n  xhtml: false\n});\n\n// Compile\nconsole.log(marked.parse(markdownString));\n```\n\n<h2 id=\"options\">Options</h2>\n\n|Member      |Type      |Default  |Since    |Notes         |\n|:-----------|:---------|:--------|:--------|:-------------|\n|async       |`boolean` |`false`  |4.1.0    |If true, `walkTokens` functions can be async and `marked.parse` will return a promise that resolves when all walk tokens functions resolve.|\n|baseUrl     |`string`  |`null`   |0.3.9    |A prefix url for any relative link. |\n|breaks      |`boolean` |`false`  |v0.2.7   |If true, add `<br>` on a single line break (copies GitHub behavior on comments, but not on rendered markdown files). Requires `gfm` be `true`.|\n|gfm         |`boolean` |`true`   |v0.2.1   |If true, use approved [GitHub Flavored Markdown (GFM) specification](https://github.github.com/gfm/).|\n|headerIds   |`boolean` |`true`   |v0.4.0   |If true, include an `id` attribute when emitting headings (h1, h2, h3, etc).|\n|headerPrefix|`string`  |`''`     |v0.3.0   |A string to prefix the `id` attribute when emitting headings (h1, h2, h3, etc).|\n|highlight   |`function`|`null`   |v0.3.0   |A function to highlight code blocks, see <a href=\"#highlight\">Asynchronous highlighting</a>.|\n|langPrefix  |`string`  |`'language-'`|v0.3.0|A string to prefix the className in a `<code>` block. Useful for syntax highlighting.|\n|mangle      |`boolean` |`true`   |v0.3.4   |If true, autolinked email address is escaped with HTML character references.|\n|pedantic    |`boolean` |`false`  |v0.2.1   |If true, conform to the original `markdown.pl` as much as possible. Don't fix original markdown bugs or behavior. Turns off and overrides `gfm`.|\n|renderer    |`object`  |`new Renderer()`|v0.3.0|An object containing functions to render tokens to HTML. See [extensibility](/using_pro) for more details.|\n|sanitize    |`boolean` |`false`  |v0.2.1   |If true, sanitize the HTML passed into `markdownString` with the `sanitizer` function.<br>**Warning**: This feature is deprecated and it should NOT be used as it cannot be considered secure.<br>Instead use a sanitize library, like [DOMPurify](https://github.com/cure53/DOMPurify) (recommended), [sanitize-html](https://github.com/apostrophecms/sanitize-html) or [insane](https://github.com/bevacqua/insane) on the output HTML! |\n|sanitizer   |`function`|`null`   |v0.3.4   |A function to sanitize the HTML passed into `markdownString`.|\n|silent      |`boolean` |`false`  |v0.2.7   |If true, the parser does not throw any exception.|\n|smartLists  |`boolean` |`false`  |v0.2.8   |If true, use smarter list behavior than those found in `markdown.pl`.|\n|smartypants |`boolean` |`false`  |v0.2.9   |If true, use \"smart\" typographic punctuation for things like quotes and dashes.|\n|tokenizer    |`object`  |`new Tokenizer()`|v1.0.0|An object containing functions to create tokens from markdown. See [extensibility](/using_pro) for more details.|\n|walkTokens   |`function`  |`null`|v1.1.0|A function which is called for every token. See [extensibility](/using_pro) for more details.|\n|xhtml       |`boolean` |`false`  |v0.3.2   |If true, emit self-closing HTML tags for void elements (&lt;br/&gt;, &lt;img/&gt;, etc.) with a \"/\" as required by XHTML.|\n\n<h2 id=\"inline\">Inline Markdown</h2>\n\nYou can parse inline markdown by running markdown through `marked.parseInline`.\n\n```js\nconst blockHtml = marked.parse('**strong** _em_');\nconsole.log(blockHtml); // '<p><strong>strong</strong> <em>em</em></p>'\n\nconst inlineHtml = marked.parseInline('**strong** _em_');\nconsole.log(inlineHtml); // '<strong>strong</strong> <em>em</em>'\n```\n\n<h2 id=\"highlight\">Asynchronous highlighting</h2>\n\nUnlike `highlight.js` the `pygmentize.js` library uses asynchronous highlighting. This example demonstrates that marked is agnostic when it comes to the highlighter you use.\n\n```js\nmarked.setOptions({\n  highlight: function(code, lang, callback) {\n    require('pygmentize-bundled') ({ lang: lang, format: 'html' }, code, function (err, result) {\n      callback(err, result.toString());\n    });\n  }\n});\n\nmarked.parse(markdownString, (err, html) => {\n  console.log(html);\n});\n```\n\nIn both examples, `code` is a `string` representing the section of code to pass to the highlighter. In this example, `lang` is a `string` informing the highlighter what programming language to use for the `code` and `callback` is the `function` the asynchronous highlighter will call once complete.\n\n<h2 id=\"workers\">Workers</h2>\n\nTo prevent ReDoS attacks you can run marked on a worker and terminate it when parsing takes longer than usual.\n\nMarked can be run in a [worker thread](https://nodejs.org/api/worker_threads.html) on a node server, or a [web worker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) in a browser.\n\n### Node Worker Thread\n\n```js\n// markedWorker.js\n\nimport { marked } from 'marked';\nimport { parentPort } from 'worker_threads';\n\nparentPort.on('message', (markdownString) => {\n  parentPort.postMessage(marked.parse(markdownString));\n});\n```\n\n```js\n// index.js\n\nimport { Worker } from 'worker_threads';\nconst markedWorker = new Worker('./markedWorker.js');\n\nconst markedTimeout = setTimeout(() => {\n  markedWorker.terminate();\n  throw new Error('Marked took too long!');\n}, timeoutLimit);\n\nmarkedWorker.on('message', (html) => {\n  clearTimeout(markedTimeout);\n  console.log(html);\n  markedWorker.terminate();\n});\n\nmarkedWorker.postMessage(markdownString);\n```\n\n### Web Worker\n\n> **NOTE**: Web Workers send the payload from `postMessage` in an object with the payload in a `.data` property\n\n```js\n// markedWorker.js\n\nimportScripts('path/to/marked.min.js');\n\nonmessage = (e) => {\n  const markdownString = e.data\n  postMessage(marked.parse(markdownString));\n};\n```\n\n```js\n// script.js\n\nconst markedWorker = new Worker('./markedWorker.js');\n\nconst markedTimeout = setTimeout(() => {\n  markedWorker.terminate();\n  throw new Error('Marked took too long!');\n}, timeoutLimit);\n\nmarkedWorker.onmessage = (e) => {\n  clearTimeout(markedTimeout);\n  const html = e.data;\n  console.log(html);\n  markedWorker.terminate();\n};\n\nmarkedWorker.postMessage(markdownString);\n```\n",
          "filepath": "data/repos/markedjs/marked-4.1/docs/USING_ADVANCED.md",
          "repo": "markedjs/marked",
          "version": "4.1",
          "chunk_index": 0
        }
      },
      {
        "id": "42494dc9-d1c1-4e22-864d-992ac9734107",
        "score": 0.015625,
        "payload": {
          "text": "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2022, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\nfunction getDefaults() {\n  return {\n    async: false,\n    baseUrl: null,\n    breaks: false,\n    extensions: null,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: null,\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartLists: false,\n    smartypants: false,\n    tokenizer: null,\n    walkTokens: null,\n    xhtml: false\n  };\n}\n\nlet defaults = getDefaults();\n\nfunction changeDefaults(newDefaults) {\n  defaults = newDefaults;\n}\n\n/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = /[&<>\"']/g;\nconst escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\nconst escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\nconst escapeReplacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape(html, encode) {\n  if (encode) {\n    if (escapeTest.test(html)) {\n      return html.replace(escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (escapeTestNoEncode.test(html)) {\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\n/**\n * @param {string} html\n */\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nconst caret = /(^|[^\\[])\\^/g;\n\n/**\n * @param {string | RegExp} regex\n * @param {string} opt\n */\nfunction edit(regex, opt) {\n  regex = typeof regex === 'string' ? regex : regex.source;\n  opt = opt || '';\n  const obj = {\n    replace: (name, val) => {\n      val = val.source || val;\n      val = val.replace(caret, '$1');\n      regex = regex.replace(name, val);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(regex, opt);\n    }\n  };\n  return obj;\n}\n\nconst nonWordAndColonTest = /[^\\w:]/g;\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n/**\n * @param {boolean} sanitize\n * @param {string} base\n * @param {string} href\n */\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    let prot;\n    try {\n      prot = decodeURIComponent(unescape(href))\n        .replace(nonWordAndColonTest, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nconst baseUrls = {};\nconst justDomain = /^[^:]+:\\/*[^/]*$/;\nconst protocol = /^([^:]+:)[\\s\\S]*$/;\nconst domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\n/**\n * @param {string} base\n * @param {string} href\n */\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (justDomain.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n  const relativeBase = base.indexOf(':') === -1;\n\n  if (href.substring(0, 2) === '//') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(protocol, '$1') + href;\n  } else if (href.charAt(0) === '/') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(domain, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\n\nconst noopTest = { exec: function noopTest() {} };\n\nfunction merge(obj) {\n  let i = 1,\n    target,\n    key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n      let escaped = false,\n        curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(/ \\|/);\n  let i = 0;\n\n  // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n  if (!cells[0].trim()) { cells.shift(); }\n  if (cells.length > 0 && !cells[cells.length - 1].trim()) { cells.pop(); }\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n/**\n * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n * /c*$/ is vulnerable to REDOS.\n *\n * @param {string} str\n * @param {string} c\n * @param {boolean} invert Remove suffix of non-c chars instead. Default falsey.\n */\nfunction rtrim(str, c, invert) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.slice(0, l - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  const l = str.length;\n  let level = 0,\n    i = 0;\n  for (; i < l; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkSanitizeDeprecation(opt) {\n  if (opt && opt.sanitize && !opt.silent) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n}\n\n// copied from https://stackoverflow.com/a/5450113/806777\n/**\n * @param {string} pattern\n * @param {number} count\n */\nfunction repeatString(pattern, count) {\n  if (count < 1) {\n    return '';\n  }\n  let result = '';\n  while (count > 1) {\n    if (count & 1) {\n      result += pattern;\n    }\n    count >>= 1;\n    pattern += pattern;\n  }\n  return result + pattern;\n}\n\nfunction outputLink(cap, link, raw, lexer) {\n  const href = link.href;\n  const title = link.title ? escape(link.title) : null;\n  const text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n  if (cap[0].charAt(0) !== '!') {\n    lexer.state.inLink = true;\n    const token = {\n      type: 'link',\n      raw,\n      href,\n      title,\n      text,\n      tokens: lexer.inlineTokens(text)\n    };\n    lexer.state.inLink = false;\n    return token;\n  }\n  return {\n    type: 'image',\n    raw,\n    href,\n    title,\n    text: escape(text)\n  };\n}\n\nfunction indentCodeCompensation(raw, text) {\n  const matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n  if (matchIndentToCode === null) {\n    return text;\n  }\n\n  const indentToCode = matchIndentToCode[1];\n\n  return text\n    .split('\\n')\n    .map(node => {\n      const matchIndentInNode = node.match(/^\\s+/);\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      const [indentInNode] = matchIndentInNode;\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    })\n    .join('\\n');\n}\n\n/**\n * Tokenizer\n */\nclass Tokenizer {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  space(src) {\n    const cap = this.rules.block.newline.exec(src);\n    if (cap && cap[0].length > 0) {\n      return {\n        type: 'space',\n        raw: cap[0]\n      };\n    }\n  }\n\n  code(src) {\n    const cap = this.rules.block.code.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ {1,4}/gm, '');\n      return {\n        type: 'code',\n        raw: cap[0],\n        codeBlockStyle: 'indented',\n        text: !this.options.pedantic\n          ? rtrim(text, '\\n')\n          : text\n      };\n    }\n  }\n\n  fences(src) {\n    const cap = this.rules.block.fences.exec(src);\n    if (cap) {\n      const raw = cap[0];\n      const text = indentCodeCompensation(raw, cap[3] || '');\n\n      return {\n        type: 'code',\n        raw,\n        lang: cap[2] ? cap[2].trim() : cap[2],\n        text\n      };\n    }\n  }\n\n  heading(src) {\n    const cap = this.rules.block.heading.exec(src);\n    if (cap) {\n      let text = cap[2].trim();\n\n      // remove trailing #s\n      if (/#$/.test(text)) {\n        const trimmed = rtrim(text, '#');\n        if (this.options.pedantic) {\n          text = trimmed.trim();\n        } else if (!trimmed || / $/.test(trimmed)) {\n          // CommonMark requires space before trailing #s\n          text = trimmed.trim();\n        }\n      }\n\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[1].length,\n        text,\n        tokens: this.lexer.inline(text)\n      };\n    }\n  }\n\n  hr(src) {\n    const cap = this.rules.block.hr.exec(src);\n    if (cap) {\n      return {\n        type: 'hr',\n        raw: cap[0]\n      };\n    }\n  }\n\n  blockquote(src) {\n    const cap = this.rules.block.blockquote.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ *>[ \\t]?/gm, '');\n\n      return {\n        type: 'blockquote',\n        raw: cap[0],\n        tokens: this.lexer.blockTokens(text, []),\n        text\n      };\n    }\n  }\n\n  list(src) {\n    let cap = this.rules.block.list.exec(src);\n    if (cap) {\n      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine,\n        line, nextLine, rawLine, itemContents, endEarly;\n\n      let bull = cap[1].trim();\n      const isordered = bull.length > 1;\n\n      const list = {\n        type: 'list',\n        raw: '',\n        ordered: isordered,\n        start: isordered ? +bull.slice(0, -1) : '',\n        loose: false,\n        items: []\n      };\n\n      bull = isordered ? `\\\\d{1,9}\\\\${bull.slice(-1)}` : `\\\\${bull}`;\n\n      if (this.options.pedantic) {\n        bull = isordered ? bull : '[*+-]';\n      }\n\n      // Get next list item\n      const itemRegex = new RegExp(`^( {0,3}${bull})((?:[\\t ][^\\\\n]*)?(?:\\\\n|$))`);\n\n      // Check if current bullet point can start a new List Item\n      while (src) {\n        endEarly = false;\n        if (!(cap = itemRegex.exec(src))) {\n          break;\n        }\n\n        if (this.rules.block.hr.test(src)) { // End list if bullet was actually HR (possibly move into itemRegex?)\n          break;\n        }\n\n        raw = cap[0];\n        src = src.substring(raw.length);\n\n        line = cap[2].split('\\n', 1)[0];\n        nextLine = src.split('\\n', 1)[0];\n\n        if (this.options.pedantic) {\n          indent = 2;\n          itemContents = line.trimLeft();\n        } else {\n          indent = cap[2].search(/[^ ]/); // Find first non-space char\n          indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n          itemContents = line.slice(indent);\n          indent += cap[1].length;\n        }\n\n        blankLine = false;\n\n        if (!line && /^ *$/.test(nextLine)) { // Items begin with at most one blank line\n          raw += nextLine + '\\n';\n          src = src.substring(nextLine.length + 1);\n          endEarly = true;\n        }\n\n        if (!endEarly) {\n          const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\d{1,9}[.)])((?: [^\\\\n]*)?(?:\\\\n|$))`);\n          const hrRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)`);\n          const fencesBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\\`\\`\\`|~~~)`);\n          const headingBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`);\n\n          // Check if following lines should be included in List Item\n          while (src) {\n            rawLine = src.split('\\n', 1)[0];\n            line = rawLine;\n\n            // Re-align to follow commonmark nesting rules\n            if (this.options.pedantic) {\n              line = line.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n            }\n\n            // End list item if found code fences\n            if (fencesBeginRegex.test(line)) {\n              break;\n            }\n\n            // End list item if found start of new heading\n            if (headingBeginRegex.test(line)) {\n              break;\n            }\n\n            // End list item if found start of new bullet\n            if (nextBulletRegex.test(line)) {\n              break;\n            }\n\n            // Horizontal rule found\n            if (hrRegex.test(src)) {\n              break;\n            }\n\n            if (line.search(/[^ ]/) >= indent || !line.trim()) { // Dedent if possible\n              itemContents += '\\n' + line.slice(indent);\n            } else if (!blankLine) { // Until blank line, item doesn't need indentation\n              itemContents += '\\n' + line;\n            } else { // Otherwise, improper indentation ends this item\n              break;\n            }\n\n            if (!blankLine && !line.trim()) { // Check if current line is blank\n              blankLine = true;\n            }\n\n            raw += rawLine + '\\n';\n            src = src.substring(rawLine.length + 1);\n          }\n        }\n\n        if (!list.loose) {\n          // If the previous item ended with a blank line, the list is loose\n          if (endsWithBlankLine) {\n            list.loose = true;\n          } else if (/\\n *\\n *$/.test(raw)) {\n            endsWithBlankLine = true;\n          }\n        }\n\n        // Check for task list items\n        if (this.options.gfm) {\n          istask = /^\\[[ xX]\\] /.exec(itemContents);\n          if (istask) {\n            ischecked = istask[0] !== '[ ] ';\n            itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n          }\n        }\n\n        list.items.push({\n          type: 'list_item',\n          raw,\n          task: !!istask,\n          checked: ischecked,\n          loose: false,\n          text: itemContents\n        });\n\n        list.raw += raw;\n      }\n\n      // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n      list.items[list.items.length - 1].raw = raw.trimRight();\n      list.items[list.items.length - 1].text = itemContents.trimRight();\n      list.raw = list.raw.trimRight();\n\n      const l = list.items.length;\n\n      // Item child tokens handled here at end because we needed to have the final item to trim it first\n      for (i = 0; i < l; i++) {\n        this.lexer.state.top = false;\n        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n        const spacers = list.items[i].tokens.filter(t => t.type === 'space');\n        const hasMultipleLineBreaks = spacers.every(t => {\n          const chars = t.raw.split('');\n          let lineBreaks = 0;\n          for (const char of chars) {\n            if (char === '\\n') {\n              lineBreaks += 1;\n            }\n            if (lineBreaks > 1) {\n              return true;\n            }\n          }\n\n          return false;\n        });\n\n        if (!list.loose && spacers.length && hasMultipleLineBreaks) {\n          // Having a single line break doesn't mean a list is loose. A single line break is terminating the last list item\n          list.loose = true;\n          list.items[i].loose = true;\n        }\n      }\n\n      return list;\n    }\n  }\n\n  html(src) {\n    const cap = this.rules.block.html.exec(src);\n    if (cap) {\n      const token = {\n        type: 'html',\n        raw: cap[0],\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: cap[0]\n      };\n      if (this.options.sanitize) {\n        const text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\n        token.type = 'paragraph';\n        token.text = text;\n        token.tokens = this.lexer.inline(text);\n      }\n      return token;\n    }\n  }\n\n  def(src) {\n    const cap = this.rules.block.def.exec(src);\n    if (cap) {\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n      const tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n      return {\n        type: 'def',\n        tag,\n        raw: cap[0],\n        href: cap[2],\n        title: cap[3]\n      };\n    }\n  }\n\n  table(src) {\n    const cap = this.rules.block.table.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells(cap[1]).map(c => { return { text: c }; }),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        rows: cap[3] && cap[3].trim() ? cap[3].replace(/\\n[ \\t]*$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        item.raw = cap[0];\n\n        let l = item.align.length;\n        let i, j, k, row;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.rows.length;\n        for (i = 0; i < l; i++) {\n          item.rows[i] = splitCells(item.rows[i], item.header.length).map(c => { return { text: c }; });\n        }\n\n        // parse child tokens inside headers and cells\n\n        // header child tokens\n        l = item.header.length;\n        for (j = 0; j < l; j++) {\n          item.header[j].tokens = this.lexer.inline(item.header[j].text);\n        }\n\n        // cell child tokens\n        l = item.rows.length;\n        for (j = 0; j < l; j++) {\n          row = item.rows[j];\n          for (k = 0; k < row.length; k++) {\n            row[k].tokens = this.lexer.inline(row[k].text);\n          }\n        }\n\n        return item;\n      }\n    }\n  }\n\n  lheading(src) {\n    const cap = this.rules.block.lheading.exec(src);\n    if (cap) {\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1],\n        tokens: this.lexer.inline(cap[1])\n      };\n    }\n  }\n\n  paragraph(src) {\n    const cap = this.rules.block.paragraph.exec(src);\n    if (cap) {\n      const text = cap[1].charAt(cap[1].length - 1) === '\\n'\n        ? cap[1].slice(0, -1)\n        : cap[1];\n      return {\n        type: 'paragraph',\n        raw: cap[0],\n        text,\n        tokens: this.lexer.inline(text)\n      };\n    }\n  }\n\n  text(src) {\n    const cap = this.rules.block.text.exec(src);\n    if (cap) {\n      return {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0],\n        tokens: this.lexer.inline(cap[0])\n      };\n    }\n  }\n\n  escape(src) {\n    const cap = this.rules.inline.escape.exec(src);\n    if (cap) {\n      return {\n        type: 'escape',\n        raw: cap[0],\n        text: escape(cap[1])\n      };\n    }\n  }\n\n  tag(src) {\n    const cap = this.rules.inline.tag.exec(src);\n    if (cap) {\n      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\n        this.lexer.state.inLink = true;\n      } else if (this.lexer.state.inLink && /^<\\/a>/i.test(cap[0])) {\n        this.lexer.state.inLink = false;\n      }\n      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = true;\n      } else if (this.lexer.state.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = false;\n      }\n\n      return {\n        type: this.options.sanitize\n          ? 'text'\n          : 'html',\n        raw: cap[0],\n        inLink: this.lexer.state.inLink,\n        inRawBlock: this.lexer.state.inRawBlock,\n        text: this.options.sanitize\n          ? (this.options.sanitizer\n            ? this.options.sanitizer(cap[0])\n            : escape(cap[0]))\n          : cap[0]\n      };\n    }\n  }\n\n  link(src) {\n    const cap = this.rules.inline.link.exec(src);\n    if (cap) {\n      const trimmedUrl = cap[2].trim();\n      if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n        // commonmark requires matching angle brackets\n        if (!(/>$/.test(trimmedUrl))) {\n          return;\n        }\n\n        // ending angle bracket cannot be escaped\n        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n          return;\n        }\n      } else {\n        // find closing parenthesis\n        const lastParenIndex = findClosingBracket(cap[2], '()');\n        if (lastParenIndex > -1) {\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          const linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n      }\n      let href = cap[2];\n      let title = '';\n      if (this.options.pedantic) {\n        // split pedantic href and title\n        const link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n\n      href = href.trim();\n      if (/^</.test(href)) {\n        if (this.options.pedantic && !(/>$/.test(trimmedUrl))) {\n          // pedantic allows starting angle bracket without ending angle bracket\n          href = href.slice(1);\n        } else {",
          "filepath": "data/repos/markedjs/marked-4.1/lib/marked.esm.js",
          "repo": "markedjs/marked",
          "version": "4.1",
          "chunk_index": 0
        }
      },
      {
        "id": "36a006da-7ecf-4fea-9248-970b6bed9556",
        "score": 0.015384615384615385,
        "payload": {
          "text": "marked(1)\t\t    General Commands Manual\t\t     marked(1)\n\nNAME\n       marked - a javascript markdown parser\n\nSYNOPSIS\n       marked  [-o  <output>]  [-i  <input>] [-s <string>] [--help] [--tokens]\n       [--pedantic]   [--gfm]\t [--breaks]    [--sanitize]    [--smart-lists]\n       [--lang-prefix <prefix>] [--no-etc...] [--silent] [filename]\n\n\nDESCRIPTION\n       marked is a full-featured javascript markdown parser, built for speed.\n       It also includes multiple GFM features.\n\nEXAMPLES\n       cat in.md | marked > out.html\n\n       echo \"hello *world*\" | marked\n\n       marked -o out.html -i in.md --gfm\n\n       marked --output=\"hello world.html\" -i in.md --no-breaks\n\nOPTIONS\n       -o, --output [output]\n\t      Specify file output. If none is specified, write to stdout.\n\n       -i, --input [input]\n\t      Specify file input, otherwise use last argument as input file.\n\t      If no input file is specified, read from stdin.\n\n       -s, --string [string]\n\t      Specify string input instead of a file.\n\n       -t, --tokens\n\t      Output a token stream instead of html.\n\n       --pedantic\n\t      Conform to obscure parts of markdown.pl as much as possible.\n\t      Don't fix original markdown bugs.\n\n       --gfm  Enable github flavored markdown.\n\n       --breaks\n\t      Enable GFM line breaks. Only works with the gfm option.\n\n       --sanitize\n\t      Sanitize output. Ignore any HTML input.\n\n       --smart-lists\n\t      Use smarter list behavior than the original markdown.\n\n       --lang-prefix [prefix]\n\t      Set the prefix for code block classes.\n\n       --mangle\n\t      Mangle email addresses.\n\n       --no-sanitize, -no-etc...\n\t      The inverse of any of the marked options above.\n\n       --silent\n\t      Silence error output.\n\n       -h, --help\n\t      Display help information.\n\nCONFIGURATION\n       For configuring and running programmatically.\n\n       Example\n\n\t   import { marked } from 'marked';\n\t   marked('*foo*', { gfm: true });\n\nBUGS\n       Please report any bugs to https://github.com/markedjs/marked.\n\nLICENSE\n       Copyright (c) 2011-2014, Christopher Jeffrey (MIT License).\n\nSEE ALSO\n       markdown(1), node.js(1)\n\n\t\t\t\t\t\t\t\t     marked(1)\n",
          "filepath": "data/repos/markedjs/marked-4.1/man/marked.1.txt",
          "repo": "markedjs/marked",
          "version": "4.1",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1262",
    "model_patch": "diff --git a/marked.js b/marked.js\n--- a/marked.js\n+++ b/marked.js\n@@ -1083,7 +1083,7 @@\n  */\n \n Renderer.prototype.table = function(header, body) {\n-  return '<table>\\n'\n+  return '<table style=\"width:100%;\">\\n'\n     + '<thead>\\n'\n     + header\n     + '</thead>\\n'",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 235.67,
      "issue_embedding_time_ms": 235.67,
      "retrieval_time_ms_splade": 1.02,
      "retrieval_time_ms": 1.02,
      "total_retrieval_time_ms": 236.69,
      "generation_time_ms": 2381.46,
      "total_io_time_ms": 2618.15,
      "input_total_token_limit": null,
      "issue_text_tokens": 334,
      "vlm_tokens": 0,
      "retrieved_tokens": 13530,
      "prompt_template_tokens": 505,
      "total_input_prompt_tokens": 14369,
      "output_generated_tokens": 95,
      "total_io_tokens": 14464,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\ntable render error\\nThis markdown \\r\\n\\r\\n```\\r\\n| \\u53c2\\u6570 | \\u8bf4\\u660e | \\u7c7b\\u578b | \\u53ef\\u9009\\u503c | \\u9ed8\\u8ba4\\u503c |\\r\\n| --- | --- | --- | --- | --- |\\r\\n| itemRender | \\u81ea\\u5b9a\\u4e49\\u94fe\\u63a5\\u51fd\\u6570\\uff0c\\u548c react-router \\u914d\\u7f6e\\u4f7f\\u7528 | (route, params, routes, paths) => ReactNode |  | - |\\r\\n| params | \\u8def\\u7531\\u7684\\u53c2\\u6570 | object |  | - |\\r\\n| routes | router \\u7684\\u8def\\u7531\\u6808\\u4fe1\\u606f | object\\\\[] |  | - |\\r\\n| separator | \\u5206\\u9694\\u7b26\\u81ea\\u5b9a\\u4e49 | string\\\\|ReactNode |  | '/' |\\r\\n```\\r\\n\\r\\nWill be rendered by `Marked` as ( **Marked Version** : 0.4.0 )\\r\\n\\r\\n<img width=\\\"783\\\" alt=\\\"screen shot 2018-06-11 at 8 56 07 pm\\\" src=\\\"https://user-images.githubusercontent.com/2193211/41232736-e1a5fd5a-6db9-11e8-9f18-0b0ac28e018f.png\\\">\\r\\n\\r\\n\\r\\nActually it should be\\r\\n\\r\\n| \\u53c2\\u6570 | \\u8bf4\\u660e | \\u7c7b\\u578b | \\u53ef\\u9009\\u503c | \\u9ed8\\u8ba4\\u503c |\\r\\n| --- | --- | --- | --- | --- |\\r\\n| itemRender | \\u81ea\\u5b9a\\u4e49\\u94fe\\u63a5\\u51fd\\u6570\\uff0c\\u548c react-router \\u914d\\u7f6e\\u4f7f\\u7528 | (route, params, routes, paths) => ReactNode |  | - |\\r\\n| params | \\u8def\\u7531\\u7684\\u53c2\\u6570 | object |  | - |\\r\\n| routes | router \\u7684\\u8def\\u7531\\u6808\\u4fe1\\u606f | object\\\\[] |  | - |\\r\\n| separator | \\u5206\\u9694\\u7b26\\u81ea\\u5b9a\\u4e49 | string\\\\|ReactNode |  | '/' |\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of README.md]\\n# marked\\n\\n> A full-featured markdown parser and compiler, written in javascript. Built\\n> for speed.\\n\\n[![NPM version](https://badge.fury.io/js/marked.png)][badge]\\n\\n## Install\\n\\n``` bash\\nnpm install marked --save\\n```\\n\\n## Usage\\n\\nMinimal usage:\\n\\n```js\\nconsole.log(marked('I am using __markdown__.'));\\n// Outputs: <p>I am using <strong>markdown</strong>.</p>\\n```\\n\\nExample using all options:\\n\\n```js\\nmarked.setOptions({\\n  gfm: true,\\n  tables: true,\\n  breaks: false,\\n  pedantic: false,\\n  sanitize: true,\\n  smartLists: true,\\n  smartypants: false,\\n});\\n\\n// Using async version of marked\\nmarked('I am using __markdown__.', function (err, content) {\\n  if (err) throw err;\\n  console.log(content);\\n});\\n```\\n\\n## marked(markdownString, [options], [callback])\\n\\n### markdownString\\n\\nType: `String`\\n\\nString of markdown source to be compiled.\\n\\n### options\\n\\nType: `Object`\\n\\nHash of options. Can also be set using the `marked.setOptions` method as seen\\nabove.\\n\\n### callback\\n\\nType: `Function`\\n\\nFunction called when the `markdownString` has been fully parsed when using\\nasync highlighting. If the `options` argument is omitted, this can be used as\\nthe second argument as seen above:\\n\\n## Options\\n\\n### gfm\\n\\nType: `Boolean`\\nDefault: `true`\\n\\nEnable [GitHub flavored markdown][gfm].\\n\\n### tables\\n\\nType: `Boolean`\\nDefault: `true`\\n\\nEnable GFM [tables][tables].\\nThis option requires the `gfm` option to be true.\\n\\n### breaks\\n\\nType: `Boolean`\\nDefault: `false`\\n\\nEnable GFM [line breaks][breaks].\\nThis option requires the `gfm` option to be true.\\n\\n### pedantic\\n\\nType: `Boolean`\\nDefault: `false`\\n\\nConform to obscure parts of `markdown.pl` as much as possible. Don't fix any of\\nthe original markdown bugs or poor behavior.\\n\\n### sanitize\\n\\nType: `Boolean`\\nDefault: `false`\\n\\nSanitize the output. Ignore any HTML that has been input.\\n\\n### smartLists\\n\\nType: `Boolean`\\nDefault: `true`\\n\\nUse smarter list behavior than the original markdown. May eventually be\\ndefault with the old behavior moved into `pedantic`.\\n\\n### smartypants\\n\\nType: `Boolean`\\nDefault: `false`\\n\\nUse \\\"smart\\\" typograhic punctuation for things like quotes and dashes.\\n\\n### renderer\\n\\nType: `Renderer`\\nDefault: `new Renderer()`\\n\\nA renderer instance for rendering ast to html. Learn more on the Renderer\\nsection.\\n\\n## Renderer\\n\\nRenderer is a the new way for rendering tokens to html. Here is a simple\\nexample:\\n\\n```javascript\\nvar r = new marked.Renderer()\\nr.blockcode = function(code, lang) {\\n  return highlight(lang, code).value;\\n}\\n\\nconsole.log(marked(text, {renderer: r}))\\n```\\n\\nYou can control anything you want.\\n\\n### Block Level\\n\\n- code(code, language)\\n- blockquote(quote)\\n- html(html)\\n- heading(text, level)\\n- hr()\\n- list(body, ordered)\\n- listitem(text)\\n- paragraph(text)\\n- table(header, body)\\n- tablerow(content)\\n- tablecell(content, flags)\\n\\n`flags` is an object like this:\\n\\n```\\n{\\n    header: true,\\n    align: 'center'\\n}\\n```\\n\\n### Span Level\\n\\n- strong(text)\\n- em(text)\\n- codespan(code)\\n- br()\\n- del(text)\\n- link(href, title, text)\\n- image(href, title, text)\\n\\n## Access to lexer and parser\\n\\nYou also have direct access to the lexer and parser if you so desire.\\n\\n``` js\\nvar tokens = marked.lexer(text, options);\\nconsole.log(marked.parser(tokens));\\n```\\n\\n``` js\\nvar lexer = new marked.Lexer(options);\\nvar tokens = lexer.lex(text);\\nconsole.log(tokens);\\nconsole.log(lexer.rules);\\n```\\n\\n## CLI\\n\\n``` bash\\n$ marked -o hello.html\\nhello world\\n^D\\n$ cat hello.html\\n<p>hello world</p>\\n```\\n\\n## Benchmarks\\n\\nnode v0.4.x\\n\\n``` bash\\n$ node test --bench\\nmarked completed in 12071ms.\\nshowdown (reuse converter) completed in 27387ms.\\nshowdown (new converter) completed in 75617ms.\\nmarkdown-js completed in 70069ms.\\n```\\n\\nnode v0.6.x\\n\\n``` bash\\n$ node test --bench\\nmarked completed in 6448ms.\\nmarked (gfm) completed in 7357ms.\\nmarked (pedantic) completed in 6092ms.\\ndiscount completed in 7314ms.\\nshowdown (reuse converter) completed in 16018ms.\\nshowdown (new converter) completed in 18234ms.\\nmarkdown-js completed in 24270ms.\\n```\\n\\n__Marked is now faster than Discount, which is written in C.__\\n\\nFor those feeling skeptical: These benchmarks run the entire markdown test suite\\n1000 times. The test suite tests every feature. It doesn't cater to specific\\naspects.\\n\\nnode v0.8.x\\n\\n``` bash\\n$ node test --bench\\nmarked completed in 3411ms.\\nmarked (gfm) completed in 3727ms.\\nmarked (pedantic) completed in 3201ms.\\nrobotskirt completed in 808ms.\\nshowdown (reuse converter) completed in 11954ms.\\nshowdown (new converter) completed in 17774ms.\\nmarkdown-js completed in 17191ms.\\n```\\n\\n## Another Javascript Markdown Parser\\n\\nThe point of marked was to create a markdown compiler where it was possible to\\nfrequently parse huge chunks of markdown without having to worry about\\ncaching the compiled output somehow...or blocking for an unnecesarily long time.\\n\\nmarked is very concise and still implements all markdown features. It is also\\nnow fully compatible with the client-side.\\n\\nmarked more or less passes the official markdown test suite in its\\nentirety. This is important because a surprising number of markdown compilers\\ncannot pass more than a few tests. It was very difficult to get marked as\\ncompliant as it is. It could have cut corners in several areas for the sake\\nof performance, but did not in order to be exactly what you expect in terms\\nof a markdown rendering. In fact, this is why marked could be considered at a\\ndisadvantage in the benchmarks above.\\n\\nAlong with implementing every markdown feature, marked also implements [GFM\\nfeatures][gfmf].\\n\\n### High level\\n\\nYou can customize the result with a customized renderer.\\n\\n``` js\\nvar renderer = new marked.Renderer()\\n\\nrenderer.heading = function(text, level) {\\n  return '<div class=\\\"h-' + level + '\\\">' + text + '</div>'\\n}\\n\\nvar parse = function(src, options) {\\n  options = options || {};\\n  options.renderer = renderer\\n  return marked.parser(marked.lexer(src, options), options);\\n}\\n\\nconsole.log(parse('# h1'))\\n```\\n\\nThe renderer API:\\n\\n```\\ncode: function(code, lang)\\nblockquote: function(text)\\nhtml: function(html)\\n\\nheading: function(text, level)\\nparagraph: function(text)\\n\\nhr: function()\\n\\nlist: function(contents, isOrdered)\\nlistitem: function(text)\\n\\ntable: function(header, body)\\ntablerow: function(content)\\ntablecell: function(text, flags)\\n// flags: {header: false, align: 'center'}\\n```\\n\\n### Pro level\\n\\nYou also have direct access to the lexer and parser if you so desire.\\n\\n``` js\\nvar tokens = marked.lexer(text, options);\\nconsole.log(marked.parser(tokens));\\n```\\n\\n``` js\\nvar lexer = new marked.Lexer(options);\\nvar tokens = lexer.lex(text);\\nconsole.log(tokens);\\nconsole.log(lexer.rules);\\n```\\n\\n``` bash\\n$ node\\n> require('marked').lexer('> i am using marked.')\\n[ { type: 'blockquote_start' },\\n  { type: 'paragraph',\\n    text: 'i am using marked.' },\\n  { type: 'blockquote_end' },\\n  links: {} ]\\n```\\n\\n## Running Tests & Contributing\\n\\nIf you want to submit a pull request, make sure your changes pass the test\\nsuite. If you're adding a new feature, be sure to add your own test.\\n\\nThe marked test suite is set up slightly strangely: `test/new` is for all tests\\nthat are not part of the original markdown.pl test suite (this is where your\\ntest should go if you make one). `test/original` is only for the original\\nmarkdown.pl tests. `test/tests` houses both types of tests after they have been\\ncombined and moved/generated by running `node test --fix` or `marked --test\\n--fix`.\\n\\nIn other words, if you have a test to add, add it to `test/new/` and then\\nregenerate the tests with `node test --fix`. Commit the result. If your test\\nuses a certain feature, for example, maybe it assumes GFM is *not* enabled, you\\ncan add `.nogfm` to the filename. So, `my-test.text` becomes\\n`my-test.nogfm.text`. You can do this with any marked option. Say you want\\nline breaks and smartypants enabled, your filename should be:\\n`my-test.breaks.smartypants.text`.\\n\\nTo run the tests:\\n\\n``` bash\\ncd marked/\\nnode test\\n```\\n\\n### Contribution and License Agreement\\n\\nIf you contribute code to this project, you are implicitly allowing your code\\nto be distributed under the MIT license. You are also implicitly verifying that\\nall code is your original work. `</legalese>`\\n\\n## License\\n\\nCopyright (c) 2011-2013, Christopher Jeffrey. (MIT License)\\n\\nSee LICENSE for more info.\\n\\n[gfm]: https://help.github.com/articles/github-flavored-markdown\\n[gfmf]: http://github.github.com/github-flavored-markdown/\\n[pygmentize]: https://github.com/rvagg/node-pygmentize-bundled\\n[highlight]: https://github.com/isagalaev/highlight.js\\n[badge]: http://badge.fury.io/js/marked\\n[tables]: https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#wiki-tables\\n[breaks]: https://help.github.com/articles/github-flavored-markdown#newlines\\n\\n[end of README.md]\\n[start of marked.js]\\n/**\\n * marked - a markdown parser\\n * Copyright (c) 2011-2013, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/chjj/marked\\n */\\n\\n;(function() {\\n\\n/**\\n * Block-Level Grammar\\n */\\n\\nvar block = {\\n  newline: /^\\\\n+/,\\n  code: /^( {4}[^\\\\n]+\\\\n*)+/,\\n  fences: noop,\\n  hr: /^( *[-*_]){3,} *(?:\\\\n+|$)/,\\n  heading: /^ *(#{1,6}) *([^\\\\n]+?) *#* *(?:\\\\n+|$)/,\\n  nptable: noop,\\n  lheading: /^([^\\\\n]+)\\\\n *(=|-){2,} *(?:\\\\n+|$)/,\\n  blockquote: /^( *>[^\\\\n]+(\\\\n[^\\\\n]+)*\\\\n*)+/,\\n  list: /^( *)(bull) [\\\\s\\\\S]+?(?:hr|\\\\n{2,}(?! )(?!\\\\1bull )\\\\n*|\\\\s*$)/,\\n  html: /^ *(?:comment|closed|closing) *(?:\\\\n{2,}|\\\\s*$)/,\\n  def: /^ *\\\\[([^\\\\]]+)\\\\]: *<?([^\\\\s>]+)>?(?: +[\\\"(]([^\\\\n]+)[\\\")])? *(?:\\\\n+|$)/,\\n  table: noop,\\n  paragraph: /^((?:[^\\\\n]+\\\\n?(?!hr|heading|lheading|blockquote|tag|def))+)\\\\n*/,\\n  text: /^[^\\\\n]+/\\n};\\n\\nblock.bullet = /(?:[*+-]|\\\\d+\\\\.)/;\\nblock.item = /^( *)(bull) [^\\\\n]*(?:\\\\n(?!\\\\1bull )[^\\\\n]*)*/;\\nblock.item = replace(block.item, 'gm')\\n  (/bull/g, block.bullet)\\n  ();\\n\\nblock.list = replace(block.list)\\n  (/bull/g, block.bullet)\\n  ('hr', /\\\\n+(?=(?: *[-*_]){3,} *(?:\\\\n+|$))/)\\n  ();\\n\\nblock._tag = '(?!(?:'\\n  + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code'\\n  + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo'\\n  + '|span|br|wbr|ins|del|img)\\\\\\\\b)\\\\\\\\w+(?!:/|@)\\\\\\\\b';\\n\\nblock.html = replace(block.html)\\n  ('comment', /<!--[\\\\s\\\\S]*?-->/)\\n  ('closed', /<(tag)[\\\\s\\\\S]+?<\\\\/\\\\1>/)\\n  ('closing', /<tag(?:\\\"[^\\\"]*\\\"|'[^']*'|[^'\\\">])*?>/)\\n  (/tag/g, block._tag)\\n  ();\\n\\nblock.paragraph = replace(block.paragraph)\\n  ('hr', block.hr)\\n  ('heading', block.heading)\\n  ('lheading', block.lheading)\\n  ('blockquote', block.blockquote)\\n  ('tag', '<' + block._tag)\\n  ('def', block.def)\\n  ();\\n\\n/**\\n * Normal Block Grammar\\n */\\n\\nblock.normal = merge({}, block);\\n\\n/**\\n * GFM Block Grammar\\n */\\n\\nblock.gfm = merge({}, block.normal, {\\n  fences: /^ *(`{3,}|~{3,}) *(\\\\S+)? *\\\\n([\\\\s\\\\S]+?)\\\\s*\\\\1 *(?:\\\\n+|$)/,\\n  paragraph: /^/\\n});\\n\\nblock.gfm.paragraph = replace(block.paragraph)\\n  ('(?!', '(?!'\\n    + block.gfm.fences.source.replace('\\\\\\\\1', '\\\\\\\\2') + '|'\\n    + block.list.source.replace('\\\\\\\\1', '\\\\\\\\3') + '|')\\n  ();\\n\\n/**\\n * GFM + Tables Block Grammar\\n */\\n\\nblock.tables = merge({}, block.gfm, {\\n  nptable: /^ *(\\\\S.*\\\\|.*)\\\\n *([-:]+ *\\\\|[-| :]*)\\\\n((?:.*\\\\|.*(?:\\\\n|$))*)\\\\n*/,\\n  table: /^ *\\\\|(.+)\\\\n *\\\\|( *[-:]+[-| :]*)\\\\n((?: *\\\\|.*(?:\\\\n|$))*)\\\\n*/\\n});\\n\\n/**\\n * Block Lexer\\n */\\n\\nfunction Lexer(options) {\\n  this.tokens = [];\\n  this.tokens.links = {};\\n  this.options = options || marked.defaults;\\n  this.rules = block.normal;\\n\\n  if (this.options.gfm) {\\n    if (this.options.tables) {\\n      this.rules = block.tables;\\n    } else {\\n      this.rules = block.gfm;\\n    }\\n  }\\n}\\n\\n/**\\n * Expose Block Rules\\n */\\n\\nLexer.rules = block;\\n\\n/**\\n * Static Lex Method\\n */\\n\\nLexer.lex = function(src, options) {\\n  var lexer = new Lexer(options);\\n  return lexer.lex(src);\\n};\\n\\n/**\\n * Preprocessing\\n */\\n\\nLexer.prototype.lex = function(src) {\\n  src = src\\n    .replace(/\\\\r\\\\n|\\\\r/g, '\\\\n')\\n    .replace(/\\\\t/g, '    ')\\n    .replace(/\\\\u00a0/g, ' ')\\n    .replace(/\\\\u2424/g, '\\\\n');\\n\\n  return this.token(src, true);\\n};\\n\\n/**\\n * Lexing\\n */\\n\\nLexer.prototype.token = function(src, top) {\\n  var src = src.replace(/^ +$/gm, '')\\n    , next\\n    , loose\\n    , cap\\n    , bull\\n    , b\\n    , item\\n    , space\\n    , i\\n    , l;\\n\\n  while (src) {\\n    // newline\\n    if (cap = this.rules.newline.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      if (cap[0].length > 1) {\\n        this.tokens.push({\\n          type: 'space'\\n        });\\n      }\\n    }\\n\\n    // code\\n    if (cap = this.rules.code.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      cap = cap[0].replace(/^ {4}/gm, '');\\n      this.tokens.push({\\n        type: 'code',\\n        text: !this.options.pedantic\\n          ? cap.replace(/\\\\n+$/, '')\\n          : cap\\n      });\\n      continue;\\n    }\\n\\n    // fences (gfm)\\n    if (cap = this.rules.fences.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      this.tokens.push({\\n        type: 'code',\\n        lang: cap[2],\\n        text: cap[3]\\n      });\\n      continue;\\n    }\\n\\n    // heading\\n    if (cap = this.rules.heading.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      this.tokens.push({\\n        type: 'heading',\\n        depth: cap[1].length,\\n        text: cap[2]\\n      });\\n      continue;\\n    }\\n\\n    // table no leading pipe (gfm)\\n    if (top && (cap = this.rules.nptable.exec(src))) {\\n      src = src.substring(cap[0].length);\\n\\n      item = {\\n        type: 'table',\\n        header: cap[1].replace(/^ *| *\\\\| *$/g, '').split(/ *\\\\| */),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        cells: cap[3].replace(/\\\\n$/, '').split('\\\\n')\\n      };\\n\\n      for (i = 0; i < item.align.length; i++) {\\n        if (/^ *-+: *$/.test(item.align[i])) {\\n          item.align[i] = 'right';\\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\\n          item.align[i] = 'center';\\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\\n          item.align[i] = 'left';\\n        } else {\\n          item.align[i] = null;\\n        }\\n      }\\n\\n      for (i = 0; i < item.cells.length; i++) {\\n        item.cells[i] = item.cells[i].split(/ *\\\\| */);\\n      }\\n\\n      this.tokens.push(item);\\n\\n      continue;\\n    }\\n\\n    // lheading\\n    if (cap = this.rules.lheading.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      this.tokens.push({\\n        type: 'heading',\\n        depth: cap[2] === '=' ? 1 : 2,\\n        text: cap[1]\\n      });\\n      continue;\\n    }\\n\\n    // hr\\n    if (cap = this.rules.hr.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      this.tokens.push({\\n        type: 'hr'\\n      });\\n      continue;\\n    }\\n\\n    // blockquote\\n    if (cap = this.rules.blockquote.exec(src)) {\\n      src = src.substring(cap[0].length);\\n\\n      this.tokens.push({\\n        type: 'blockquote_start'\\n      });\\n\\n      cap = cap[0].replace(/^ *> ?/gm, '');\\n\\n      // Pass `top` to keep the current\\n      // \\\"toplevel\\\" state. This is exactly\\n      // how markdown.pl works.\\n      this.token(cap, top);\\n\\n      this.tokens.push({\\n        type: 'blockquote_end'\\n      });\\n\\n      continue;\\n    }\\n\\n    // list\\n    if (cap = this.rules.list.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      bull = cap[2];\\n\\n      this.tokens.push({\\n        type: 'list_start',\\n        ordered: bull.length > 1\\n      });\\n\\n      // Get each top-level item.\\n      cap = cap[0].match(this.rules.item);\\n\\n      next = false;\\n      l = cap.length;\\n      i = 0;\\n\\n      for (; i < l; i++) {\\n        item = cap[i];\\n\\n        // Remove the list item's bullet\\n        // so it is seen as the next token.\\n        space = item.length;\\n        item = item.replace(/^ *([*+-]|\\\\d+\\\\.) +/, '');\\n\\n        // Outdent whatever the\\n        // list item contains. Hacky.\\n        if (~item.indexOf('\\\\n ')) {\\n          space -= item.length;\\n          item = !this.options.pedantic\\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\\n            : item.replace(/^ {1,4}/gm, '');\\n        }\\n\\n        // Determine whether the next list item belongs here.\\n        // Backpedal if it does not belong in this list.\\n        if (this.options.smartLists && i !== l - 1) {\\n          b = block.bullet.exec(cap[i + 1])[0];\\n          if (bull !== b && !(bull.length > 1 && b.length > 1)) {\\n            src = cap.slice(i + 1).join('\\\\n') + src;\\n            i = l - 1;\\n          }\\n        }\\n\\n        // Determine whether item is loose or not.\\n        // Use: /(^|\\\\n)(?! )[^\\\\n]+\\\\n\\\\n(?!\\\\s*$)/\\n        // for discount behavior.\\n        loose = next || /\\\\n\\\\n(?!\\\\s*$)/.test(item);\\n        if (i !== l - 1) {\\n          next = item.charAt(item.length - 1) === '\\\\n';\\n          if (!loose) loose = next;\\n        }\\n\\n        this.tokens.push({\\n          type: loose\\n            ? 'loose_item_start'\\n            : 'list_item_start'\\n        });\\n\\n        // Recurse.\\n        this.token(item, false);\\n\\n        this.tokens.push({\\n          type: 'list_item_end'\\n        });\\n      }\\n\\n      this.tokens.push({\\n        type: 'list_end'\\n      });\\n\\n      continue;\\n    }\\n\\n    // html\\n    if (cap = this.rules.html.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      this.tokens.push({\\n        type: this.options.sanitize\\n          ? 'paragraph'\\n          : 'html',\\n        pre: cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style',\\n        text: cap[0]\\n      });\\n      continue;\\n    }\\n\\n    // def\\n    if (top && (cap = this.rules.def.exec(src))) {\\n      src = src.substring(cap[0].length);\\n      this.tokens.links[cap[1].toLowerCase()] = {\\n        href: cap[2],\\n        title: cap[3]\\n      };\\n      continue;\\n    }\\n\\n    // table (gfm)\\n    if (top && (cap = this.rules.table.exec(src))) {\\n      src = src.substring(cap[0].length);\\n\\n      item = {\\n        type: 'table',\\n        header: cap[1].replace(/^ *| *\\\\| *$/g, '').split(/ *\\\\| */),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        cells: cap[3].replace(/(?: *\\\\| *)?\\\\n$/, '').split('\\\\n')\\n      };\\n\\n      for (i = 0; i < item.align.length; i++) {\\n        if (/^ *-+: *$/.test(item.align[i])) {\\n          item.align[i] = 'right';\\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\\n          item.align[i] = 'center';\\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\\n          item.align[i] = 'left';\\n        } else {\\n          item.align[i] = null;\\n        }\\n      }\\n\\n      for (i = 0; i < item.cells.length; i++) {\\n        item.cells[i] = item.cells[i]\\n          .replace(/^ *\\\\| *| *\\\\| *$/g, '')\\n          .split(/ *\\\\| */);\\n      }\\n\\n      this.tokens.push(item);\\n\\n      continue;\\n    }\\n\\n    // top-level paragraph\\n    if (top && (cap = this.rules.paragraph.exec(src))) {\\n      src = src.substring(cap[0].length);\\n      this.tokens.push({\\n        type: 'paragraph',\\n        text: cap[1].charAt(cap[1].length - 1) === '\\\\n'\\n          ? cap[1].slice(0, -1)\\n          : cap[1]\\n      });\\n      continue;\\n    }\\n\\n    // text\\n    if (cap = this.rules.text.exec(src)) {\\n      // Top-level should never reach here.\\n      src = src.substring(cap[0].length);\\n      this.tokens.push({\\n        type: 'text',\\n        text: cap[0]\\n      });\\n      continue;\\n    }\\n\\n    if (src) {\\n      throw new\\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\\n    }\\n  }\\n\\n  return this.tokens;\\n};\\n\\n/**\\n * Inline-Level Grammar\\n */\\n\\nvar inline = {\\n  escape: /^\\\\\\\\([\\\\\\\\`*{}\\\\[\\\\]()#+\\\\-.!_>])/,\\n  autolink: /^<([^ >]+(@|:\\\\/)[^ >]+)>/,\\n  url: noop,\\n  tag: /^<!--[\\\\s\\\\S]*?-->|^<\\\\/?\\\\w+(?:\\\"[^\\\"]*\\\"|'[^']*'|[^'\\\">])*?>/,\\n  link: /^!?\\\\[(inside)\\\\]\\\\(href\\\\)/,\\n  reflink: /^!?\\\\[(inside)\\\\]\\\\s*\\\\[([^\\\\]]*)\\\\]/,\\n  nolink: /^!?\\\\[((?:\\\\[[^\\\\]]*\\\\]|[^\\\\[\\\\]])*)\\\\]/,\\n  strong: /^__([\\\\s\\\\S]+?)__(?!_)|^\\\\*\\\\*([\\\\s\\\\S]+?)\\\\*\\\\*(?!\\\\*)/,\\n  em: /^\\\\b_((?:__|[\\\\s\\\\S])+?)_\\\\b|^\\\\*((?:\\\\*\\\\*|[\\\\s\\\\S])+?)\\\\*(?!\\\\*)/,\\n  code: /^(`+)\\\\s*([\\\\s\\\\S]*?[^`])\\\\s*\\\\1(?!`)/,\\n  br: /^ {2,}\\\\n(?!\\\\s*$)/,\\n  del: noop,\\n  text: /^[\\\\s\\\\S]+?(?=[\\\\\\\\<!\\\\[_*`]| {2,}\\\\n|$)/\\n};\\n\\ninline._inside = /(?:\\\\[[^\\\\]]*\\\\]|[^\\\\[\\\\]]|\\\\](?=[^\\\\[]*\\\\]))*/;\\ninline._href = /\\\\s*<?([\\\\s\\\\S]*?)>?(?:\\\\s+['\\\"]([\\\\s\\\\S]*?)['\\\"])?\\\\s*/;\\n\\ninline.link = replace(inline.link)\\n  ('inside', inline._inside)\\n  ('href', inline._href)\\n  ();\\n\\ninline.reflink = replace(inline.reflink)\\n  ('inside', inline._inside)\\n  ();\\n\\n/**\\n * Normal Inline Grammar\\n */\\n\\ninline.normal = merge({}, inline);\\n\\n/**\\n * Pedantic Inline Grammar\\n */\\n\\ninline.pedantic = merge({}, inline.normal, {\\n  strong: /^__(?=\\\\S)([\\\\s\\\\S]*?\\\\S)__(?!_)|^\\\\*\\\\*(?=\\\\S)([\\\\s\\\\S]*?\\\\S)\\\\*\\\\*(?!\\\\*)/,\\n  em: /^_(?=\\\\S)([\\\\s\\\\S]*?\\\\S)_(?!_)|^\\\\*(?=\\\\S)([\\\\s\\\\S]*?\\\\S)\\\\*(?!\\\\*)/\\n});\\n\\n/**\\n * GFM Inline Grammar\\n */\\n\\ninline.gfm = merge({}, inline.normal, {\\n  escape: replace(inline.escape)('])', '~|])')(),\\n  url: /^(https?:\\\\/\\\\/[^\\\\s<]+[^<.,:;\\\"')\\\\]\\\\s])/,\\n  del: /^~~(?=\\\\S)([\\\\s\\\\S]*?\\\\S)~~/,\\n  text: replace(inline.text)\\n    (']|', '~]|')\\n    ('|', '|https?://|')\\n    ()\\n});\\n\\n/**\\n * GFM + Line Breaks Inline Grammar\\n */\\n\\ninline.breaks = merge({}, inline.gfm, {\\n  br: replace(inline.br)('{2,}', '*')(),\\n  text: replace(inline.gfm.text)('{2,}', '*')()\\n});\\n\\n/**\\n * Inline Lexer & Compiler\\n */\\n\\nfunction InlineLexer(links, options) {\\n  this.options = options || marked.defaults;\\n  this.links = links;\\n  this.rules = inline.normal;\\n  this.renderer = this.options.renderer || new Renderer;\\n\\n  if (!this.links) {\\n    throw new\\n      Error('Tokens array requires a `links` property.');\\n  }\\n\\n  if (this.options.gfm) {\\n    if (this.options.breaks) {\\n      this.rules = inline.breaks;\\n    } else {\\n      this.rules = inline.gfm;\\n    }\\n  } else if (this.options.pedantic) {\\n    this.rules = inline.pedantic;\\n  }\\n}\\n\\n/**\\n * Expose Inline Rules\\n */\\n\\nInlineLexer.rules = inline;\\n\\n/**\\n * Static Lexing/Compiling Method\\n */\\n\\nInlineLexer.output = function(src, links, options) {\\n  var inline = new InlineLexer(links, options);\\n  return inline.output(src);\\n};\\n\\n/**\\n * Lexing/Compiling\\n */\\n\\nInlineLexer.prototype.output = function(src) {\\n  var out = ''\\n    , link\\n    , text\\n    , href\\n    , cap;\\n\\n  while (src) {\\n    // escape\\n    if (cap = this.rules.escape.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += cap[1];\\n      continue;\\n    }\\n\\n    // autolink\\n    if (cap = this.rules.autolink.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      if (cap[2] === '@') {\\n        text = cap[1].charAt(6) === ':'\\n          ? this.mangle(cap[1].substring(7))\\n          : this.mangle(cap[1]);\\n        href = this.mangle('mailto:') + text;\\n      } else {\\n        text = escape(cap[1]);\\n        href = text;\\n      }\\n      out += this.renderer.link(href, null, text);\\n      continue;\\n    }\\n\\n    // url (gfm)\\n    if (cap = this.rules.url.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      text = escape(cap[1]);\\n      href = text;\\n      out += this.renderer.link(href, null, text);\\n      continue;\\n    }\\n\\n    // tag\\n    if (cap = this.rules.tag.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += this.options.sanitize\\n        ? escape(cap[0])\\n        : cap[0];\\n      continue;\\n    }\\n\\n    // link\\n    if (cap = this.rules.link.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += this.outputLink(cap, {\\n        href: cap[2],\\n        title: cap[3]\\n      });\\n      continue;\\n    }\\n\\n    // reflink, nolink\\n    if ((cap = this.rules.reflink.exec(src))\\n        || (cap = this.rules.nolink.exec(src))) {\\n      src = src.substring(cap[0].length);\\n      link = (cap[2] || cap[1]).replace(/\\\\s+/g, ' ');\\n      link = this.links[link.toLowerCase()];\\n      if (!link || !link.href) {\\n        out += cap[0].charAt(0);\\n        src = cap[0].substring(1) + src;\\n        continue;\\n      }\\n      out += this.outputLink(cap, link);\\n      continue;\\n    }\\n\\n    // strong\\n    if (cap = this.rules.strong.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += this.renderer.strong(this.output(cap[2] || cap[1]));\\n      continue;\\n    }\\n\\n    // em\\n    if (cap = this.rules.em.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += this.renderer.em(this.output(cap[2] || cap[1]));\\n      continue;\\n    }\\n\\n    // code\\n    if (cap = this.rules.code.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += this.renderer.codespan(escape(cap[2], true));\\n      continue;\\n    }\\n\\n    // br\\n    if (cap = this.rules.br.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += this.renderer.br();\\n      continue;\\n    }\\n\\n    // del (gfm)\\n    if (cap = this.rules.del.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += this.renderer.del(this.output(cap[1]));\\n      continue;\\n    }\\n\\n    // text\\n    if (cap = this.rules.text.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += escape(this.smartypants(cap[0]));\\n      continue;\\n    }\\n\\n    if (src) {\\n      throw new\\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\\n    }\\n  }\\n\\n  return out;\\n};\\n\\n/**\\n * Compile Link\\n */\\n\\nInlineLexer.prototype.outputLink = function(cap, link) {\\n  var href = escape(link.href)\\n    , title = link.title ? escape(link.title) : null;\\n\\n  return cap[0].charAt(0) !== '!'\\n    ? this.renderer.link(href, title, this.output(cap[1]))\\n    : this.renderer.image(href, title, escape(cap[1]));\\n};\\n\\n/**\\n * Smartypants Transformations\\n */\\n\\nInlineLexer.prototype.smartypants = function(text) {\\n  if (!this.options.smartypants) return text;\\n  return text\\n    // em-dashes\\n    .replace(/--/g, '\\\\u2014')\\n    // opening singles\\n    .replace(/(^|[-\\\\u2014/(\\\\[{\\\"\\\\s])'/g, '$1\\\\u2018')\\n    // closing singles & apostrophes\\n    .replace(/'/g, '\\\\u2019')\\n    // opening doubles\\n    .replace(/(^|[-\\\\u2014/(\\\\[{\\\\u2018\\\\s])\\\"/g, '$1\\\\u201c')\\n    // closing doubles\\n    .replace(/\\\"/g, '\\\\u201d')\\n    // ellipses\\n    .replace(/\\\\.{3}/g, '\\\\u2026');\\n};\\n\\n/**\\n * Mangle Links\\n */\\n\\nInlineLexer.prototype.mangle = function(text) {\\n  var out = ''\\n    , l = text.length\\n    , i = 0\\n    , ch;\\n\\n  for (; i < l; i++) {\\n    ch = text.charCodeAt(i);\\n    if (Math.random() > 0.5) {\\n      ch = 'x' + ch.toString(16);\\n    }\\n    out += '&#' + ch + ';';\\n  }\\n\\n  return out;\\n};\\n\\n/**\\n * Renderer\\n */\\n\\nfunction Renderer() {}\\n\\nRenderer.prototype.code = function(code, lang, escaped, options) {\\n  options = options || {};\\n\\n  if (options.highlight) {\\n    var out = options.highlight(code, lang);\\n    if (out != null && out !== code) {\\n      escaped = true;\\n      code = out;\\n    }\\n  }\\n\\n  if (!lang) {\\n    return '<pre><code>'\\n      + (escaped ? code : escape(code, true))\\n      + '\\\\n</code></pre>';\\n  }\\n\\n  return '<pre><code class=\\\"'\\n    + options.langPrefix\\n    + lang\\n    + '\\\">'\\n    + (escaped ? code : escape(code))\\n    + '\\\\n</code></pre>\\\\n';\\n};\\n\\nRenderer.prototype.blockquote = function(quote) {\\n  return '<blockquote>\\\\n' + quote + '</blockquote>\\\\n';\\n};\\n\\nRenderer.prototype.html = function(html) {\\n  return html;\\n};\\n\\nRenderer.prototype.heading = function(text, level, raw, options) {\\n  return '<h'\\n    + level\\n    + ' id=\\\"'\\n    + options.headerPrefix\\n    + raw.toLowerCase().replace(/[^\\\\w]+/g, '-')\\n    + '\\\">'\\n    + text\\n    + '</h'\\n    + level\\n    + '>\\\\n';\\n};\\n\\nRenderer.prototype.hr = function() {\\n  return '<hr>\\\\n';\\n};\\n\\nRenderer.prototype.list = function(body, ordered) {\\n  var type = ordered ? 'ol' : 'ul';\\n  return '<' + type + '>\\\\n' + body + '</' + type + '>\\\\n';\\n};\\n\\nRenderer.prototype.listitem = function(text) {\\n  return '<li>' + text + '</li>\\\\n';\\n};\\n\\nRenderer.prototype.paragraph = function(text) {\\n  return '<p>' + text + '</p>\\\\n';\\n};\\n\\nRenderer.prototype.table = function(header, body) {\\n  return '<table>\\\\n'\\n    + '<thead>\\\\n'\\n    + header\\n    + '</thead>\\\\n'\\n    + '<tbody>\\\\n'\\n    + body\\n    + '</tbody>\\\\n'\\n    + '</table>\\\\n';\\n};\\n\\nRenderer.prototype.tablerow = function(content) {\\n  return '<tr>\\\\n' + content + '</tr>\\\\n';\\n};\\n\\nRenderer.prototype.tablecell = function(content, flags) {\\n  var type = flags.header ? 'th' : 'td';\\n  var tag = flags.align\\n    ? '<' + type + ' style=\\\"text-align:' + flags.align + '\\\">'\\n    : '<' + type + '>';\\n  return tag + content + '</' + type + '>\\\\n';\\n};\\n\\n// span level renderer\\nRenderer.prototype.strong = function(text) {\\n  return '<strong>' + text + '</strong>';\\n};\\n\\nRenderer.prototype.em = function(text) {\\n  return '<em>' + text + '</em>';\\n};\\n\\nRenderer.prototype.codespan = function(text) {\\n  return '<code>' + text + '</code>';\\n};\\n\\nRenderer.prototype.br = function() {\\n  return '<br>';\\n};\\n\\nRenderer.prototype.del = function(text) {\\n  return '<del>' + text + '</del>';\\n};\\n\\nRenderer.prototype.link = function(href, title, text) {\\n  var out = '<a href=\\\"' + href + '\\\"';\\n  if (title) {\\n    out += ' title=\\\"' + title + '\\\"';\\n  }\\n  out += '>' + text + '</a>';\\n  return out;\\n};\\n\\nRenderer.prototype.image = function(href, title, text) {\\n  var out = '<img src=\\\"' + href + '\\\" alt=\\\"' + text + '\\\"';\\n  if (title) {\\n    out += ' title=\\\"' + title + '\\\"';\\n  }\\n  out += '>';\\n  return out;\\n};\\n\\n/**\\n * Parsing & Compiling\\n */\\n\\nfunction Parser(options) {\\n  this.tokens = [];\\n  this.token = null;\\n  this.options = options || marked.defaults;\\n  this.options.renderer = this.options.renderer || new Renderer;\\n  this.renderer = this.options.renderer;\\n}\\n\\n/**\\n * Static Parse Method\\n */\\n\\nParser.parse = function(src, options, renderer) {\\n  var parser = new Parser(options, renderer);\\n  return parser.parse(src);\\n};\\n\\n/**\\n * Parse Loop\\n */\\n\\nParser.prototype.parse = function(src) {\\n  this.inline = new InlineLexer(src.links, this.options, this.renderer);\\n  this.tokens = src.reverse();\\n\\n  var out = '';\\n  while (this.next()) {\\n    out += this.tok();\\n  }\\n\\n  return out;\\n};\\n\\n/**\\n * Next Token\\n[end of marked.js]\\n[start of index.js]\\n#!/usr/bin/env node\\n\\n/**\\n * marked tests\\n * Copyright (c) 2011-2013, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/chjj/marked\\n */\\n\\n/**\\n * Modules\\n */\\n\\nvar fs = require('fs')\\n  , path = require('path')\\n  , marked = require('../');\\n\\n/**\\n * Load Tests\\n */\\n\\nfunction load() {\\n  var dir = __dirname + '/tests'\\n    , files = {}\\n    , list\\n    , file\\n    , i\\n    , l;\\n\\n  list = fs\\n    .readdirSync(dir)\\n    .filter(function(file) {\\n      return path.extname(file) !== '.html';\\n    })\\n    .sort(function(a, b) {\\n      a = path.basename(a).toLowerCase().charCodeAt(0);\\n      b = path.basename(b).toLowerCase().charCodeAt(0);\\n      return a > b ? 1 : (a < b ? -1 : 0);\\n    });\\n\\n  i = 0;\\n  l = list.length;\\n\\n  for (; i < l; i++) {\\n    file = path.join(dir, list[i]);\\n    files[path.basename(file)] = {\\n      text: fs.readFileSync(file, 'utf8'),\\n      html: fs.readFileSync(file.replace(/[^.]+$/, 'html'), 'utf8')\\n    };\\n  }\\n\\n  return files;\\n}\\n\\n/**\\n * Test Runner\\n */\\n\\nfunction runTests(engine, options) {\\n  if (typeof engine !== 'function') {\\n    options = engine;\\n    engine = null;\\n  }\\n\\n  var engine = engine || marked\\n    , options = options || {}\\n    , files = options.files || load()\\n    , complete = 0\\n    , failed = 0\\n    , failures = []\\n    , keys = Object.keys(files)\\n    , i = 0\\n    , len = keys.length\\n    , filename\\n    , file\\n    , flags\\n    , text\\n    , html\\n    , j\\n    , l;\\n\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n\\nmain:\\n  for (; i < len; i++) {\\n    filename = keys[i];\\n    file = files[filename];\\n\\n    if (marked._original) {\\n      marked.defaults = marked._original;\\n      delete marked._original;\\n    }\\n\\n    flags = filename.split('.').slice(1, -1);\\n    if (flags.length) {\\n      marked._original = marked.defaults;\\n      marked.defaults = {};\\n      Object.keys(marked._original).forEach(function(key) {\\n        marked.defaults[key] = marked._original[key];\\n      });\\n      flags.forEach(function(key) {\\n        var val = true;\\n        if (key.indexOf('no') === 0) {\\n          key = key.substring(2);\\n          val = false;\\n        }\\n        if (marked.defaults.hasOwnProperty(key)) {\\n          marked.defaults[key] = val;\\n        }\\n      });\\n    }\\n\\n    try {\\n      text = engine(file.text).replace(/\\\\s/g, '');\\n      html = file.html.replace(/\\\\s/g, '');\\n    } catch(e) {\\n      console.log('%s failed.', filename);\\n      throw e;\\n    }\\n\\n    j = 0;\\n    l = html.length;\\n\\n    for (; j < l; j++) {\\n      if (text[j] !== html[j]) {\\n        failed++;\\n        failures.push(filename);\\n\\n        text = text.substring(\\n          Math.max(j - 30, 0),\\n          Math.min(j + 30, text.length));\\n\\n        html = html.substring(\\n          Math.max(j - 30, 0),\\n          Math.min(j + 30, html.length));\\n\\n        console.log(\\n          '\\\\n#%d. %s failed at offset %d. Near: \\\"%s\\\".\\\\n',\\n          i + 1, filename, j, text);\\n\\n        console.log('\\\\nGot:\\\\n%s\\\\n', text.trim() || text);\\n        console.log('\\\\nExpected:\\\\n%s\\\\n', html.trim() || html);\\n\\n        if (options.stop) {\\n          break main;\\n        }\\n\\n        continue main;\\n      }\\n    }\\n\\n    complete++;\\n    console.log('#%d. %s completed.', i + 1, filename);\\n  }\\n\\n  console.log('%d/%d tests completed successfully.', complete, len);\\n  if (failed) console.log('%d/%d tests failed.', failed, len);\\n\\n  // Tests currently failing.\\n  if (~failures.indexOf('def_blocks.text')\\n      && ~failures.indexOf('double_link.text')\\n      && ~failures.indexOf('gfm_code_hr_list.text')) {\\n    failed -= 3;\\n  }\\n\\n  return !failed;\\n}\\n\\n/**\\n * Benchmark a function\\n */\\n\\nfunction bench(name, func) {\\n  var files = bench.files || load();\\n\\n  if (!bench.files) {\\n    bench.files = files;\\n\\n    // Change certain tests to allow\\n    // comparison to older benchmark times.\\n    fs.readdirSync(__dirname + '/new').forEach(function(name) {\\n      if (path.extname(name) === '.html') return;\\n      if (name === 'main.text') return;\\n      delete files[name];\\n    });\\n\\n    files['backslash_escapes.text'] = {\\n      text: 'hello world \\\\\\\\[how](are you) today'\\n    };\\n\\n    files['main.text'].text = files['main.text'].text.replace('* * *\\\\n\\\\n', '');\\n  }\\n\\n  var start = Date.now()\\n    , times = 1000\\n    , keys = Object.keys(files)\\n    , i\\n    , l = keys.length\\n    , filename\\n    , file;\\n\\n  while (times--) {\\n    for (i = 0; i < l; i++) {\\n      filename = keys[i];\\n      file = files[filename];\\n      func(file.text);\\n    }\\n  }\\n\\n  console.log('%s completed in %dms.', name, Date.now() - start);\\n}\\n\\n/**\\n * Benchmark all engines\\n */\\n\\nfunction runBench(options) {\\n  var options = options || {};\\n\\n  // Non-GFM, Non-pedantic\\n  marked.setOptions({\\n    gfm: false,\\n    tables: false,\\n    breaks: false,\\n    pedantic: false,\\n    sanitize: false,\\n    smartLists: false\\n  });\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked', marked);\\n\\n  // GFM\\n  marked.setOptions({\\n    gfm: true,\\n    tables: false,\\n    breaks: false,\\n    pedantic: false,\\n    sanitize: false,\\n    smartLists: false\\n  });\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked (gfm)', marked);\\n\\n  // Pedantic\\n  marked.setOptions({\\n    gfm: false,\\n    tables: false,\\n    breaks: false,\\n    pedantic: true,\\n    sanitize: false,\\n    smartLists: false\\n  });\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked (pedantic)', marked);\\n\\n  // robotskirt\\n  try {\\n    bench('robotskirt', (function() {\\n      var rs = require('robotskirt');\\n      return function(text) {\\n        var parser = rs.Markdown.std();\\n        return parser.render(text);\\n      };\\n    })());\\n  } catch (e) {\\n    console.log('Could not bench robotskirt.');\\n  }\\n\\n  // showdown\\n  try {\\n    bench('showdown (reuse converter)', (function() {\\n      var Showdown = require('showdown');\\n      var convert = new Showdown.converter();\\n      return function(text) {\\n        return convert.makeHtml(text);\\n      };\\n    })());\\n    bench('showdown (new converter)', (function() {\\n      var Showdown = require('showdown');\\n      return function(text) {\\n        var convert = new Showdown.converter();\\n        return convert.makeHtml(text);\\n      };\\n    })());\\n  } catch (e) {\\n    console.log('Could not bench showdown.');\\n  }\\n\\n  // markdown.js\\n  try {\\n    bench('markdown.js', require('markdown').parse);\\n  } catch (e) {\\n    console.log('Could not bench markdown.js.');\\n  }\\n}\\n\\n/**\\n * A simple one-time benchmark\\n */\\n\\nfunction time(options) {\\n  var options = options || {};\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked', marked);\\n}\\n\\n/**\\n * Markdown Test Suite Fixer\\n *   This function is responsible for \\\"fixing\\\"\\n *   the markdown test suite. There are\\n *   certain aspects of the suite that\\n *   are strange or might make tests\\n *   fail for reasons unrelated to\\n *   conformance.\\n */\\n\\nfunction fix(options) {\\n  ['tests', 'original', 'new'].forEach(function(dir) {\\n    try {\\n      fs.mkdirSync(path.resolve(__dirname, dir), 0755);\\n    } catch (e) {\\n      ;\\n    }\\n  });\\n\\n  // rm -rf tests\\n  fs.readdirSync(path.resolve(__dirname, 'tests')).forEach(function(file) {\\n    fs.unlinkSync(path.resolve(__dirname, 'tests', file));\\n  });\\n\\n  // cp -r original tests\\n  fs.readdirSync(path.resolve(__dirname, 'original')).forEach(function(file) {\\n    var nfile = file;\\n    if (file.indexOf('hard_wrapped_paragraphs_with_list_like_lines.') === 0) {\\n      nfile = file.replace(/\\\\.(text|html)$/, '.nogfm.$1');\\n    }\\n    fs.writeFileSync(path.resolve(__dirname, 'tests', nfile),\\n      fs.readFileSync(path.resolve(__dirname, 'original', file)));\\n  });\\n\\n  // node fix.js\\n  var dir = __dirname + '/tests';\\n\\n  fs.readdirSync(dir).filter(function(file) {\\n    return path.extname(file) === '.html';\\n  }).forEach(function(file) {\\n    var file = path.join(dir, file)\\n      , html = fs.readFileSync(file, 'utf8');\\n\\n    // fix unencoded quotes\\n    html = html\\n      .replace(/='([^\\\\n']*)'(?=[^<>\\\\n]*>)/g, '=&__APOS__;$1&__APOS__;')\\n      .replace(/=\\\"([^\\\\n\\\"]*)\\\"(?=[^<>\\\\n]*>)/g, '=&__QUOT__;$1&__QUOT__;')\\n      .replace(/\\\"/g, '&quot;')\\n      .replace(/'/g, '&#39;')\\n      .replace(/&__QUOT__;/g, '\\\"')\\n      .replace(/&__APOS__;/g, '\\\\'');\\n\\n    // add heading id's\\n    html = html.replace(/<(h[1-6])>([^<]+)<\\\\/\\\\1>/g, function(s, h, text) {\\n      var id = text\\n        .replace(/&#39;/g, '\\\\'')\\n        .replace(/&quot;/g, '\\\"')\\n        .replace(/&gt;/g, '>')\\n        .replace(/&lt;/g, '<')\\n        .replace(/&amp;/g, '&');\\n\\n      id = id.toLowerCase().replace(/[^\\\\w]+/g,\\u00a0'-');\\n\\n      return '<' + h + ' id=\\\"' + id + '\\\">' + text + '</' + h + '>';\\n    });\\n\\n    fs.writeFileSync(file, html);\\n  });\\n\\n  // turn <hr /> into <hr>\\n  fs.readdirSync(dir).forEach(function(file) {\\n    var file = path.join(dir, file)\\n      , text = fs.readFileSync(file, 'utf8');\\n\\n    text = text.replace(/(<|&lt;)hr\\\\s*\\\\/(>|&gt;)/g, '$1hr$2');\\n\\n    fs.writeFileSync(file, text);\\n  });\\n\\n  // markdown does some strange things.\\n  // it does not encode naked `>`, marked does.\\n  (function() {\\n    var file = dir + '/amps_and_angles_encoding.html';\\n    var html = fs.readFileSync(file, 'utf8')\\n      .replace('6 > 5.', '6 &gt; 5.');\\n\\n    fs.writeFileSync(file, html);\\n  })();\\n\\n  // cp new/* tests/\\n  fs.readdirSync(path.resolve(__dirname, 'new')).forEach(function(file) {\\n    fs.writeFileSync(path.resolve(__dirname, 'tests', file),\\n      fs.readFileSync(path.resolve(__dirname, 'new', file)));\\n  });\\n}\\n\\n/**\\n * Argument Parsing\\n */\\n\\nfunction parseArg(argv) {\\n  var argv = process.argv.slice(2)\\n    , options = {}\\n    , orphans = []\\n    , arg;\\n\\n  function getarg() {\\n    var arg = argv.shift();\\n\\n    if (arg.indexOf('--') === 0) {\\n      // e.g. --opt\\n      arg = arg.split('=');\\n      if (arg.length > 1) {\\n        // e.g. --opt=val\\n        argv.unshift(arg.slice(1).join('='));\\n      }\\n      arg = arg[0];\\n    } else if (arg[0] === '-') {\\n      if (arg.length > 2) {\\n        // e.g. -abc\\n        argv = arg.substring(1).split('').map(function(ch) {\\n          return '-' + ch;\\n        }).concat(argv);\\n        arg = argv.shift();\\n      } else {\\n        // e.g. -a\\n      }\\n    } else {\\n      // e.g. foo\\n    }\\n\\n    return arg;\\n  }\\n\\n  while (argv.length) {\\n    arg = getarg();\\n    switch (arg) {\\n      case '-f':\\n      case '--fix':\\n      case 'fix':\\n        options.fix = true;\\n        break;\\n      case '-b':\\n      case '--bench':\\n        options.bench = true;\\n        break;\\n      case '-s':\\n      case '--stop':\\n        options.stop = true;\\n        break;\\n      case '-t':\\n      case '--time':\\n        options.time = true;\\n        break;\\n      default:\\n        if (arg.indexOf('--') === 0) {\\n          opt = camelize(arg.replace(/^--(no-)?/, ''));\\n          if (!marked.defaults.hasOwnProperty(opt)) {\\n            continue;\\n          }\\n          options.marked = options.marked || {};\\n          if (arg.indexOf('--no-') === 0) {\\n            options.marked[opt] = typeof marked.defaults[opt] !== 'boolean'\\n              ? null\\n              : false;\\n          } else {\\n            options.marked[opt] = typeof marked.defaults[opt] !== 'boolean'\\n              ? argv.shift()\\n              : true;\\n          }\\n        } else {\\n          orphans.push(arg);\\n        }\\n        break;\\n    }\\n  }\\n\\n  return options;\\n}\\n\\n/**\\n * Helpers\\n */\\n\\nfunction camelize(text) {\\n  return text.replace(/(\\\\w)-(\\\\w)/g, function(_, a, b) {\\n    return a + b.toUpperCase();\\n  });\\n}\\n\\n/**\\n * Main\\n */\\n\\nfunction main(argv) {\\n  var opt = parseArg();\\n\\n  if (opt.fix) {\\n    return fix(opt);\\n  }\\n\\n  if (opt.bench) {\\n    return runBench(opt);\\n  }\\n\\n  if (opt.time) {\\n    return time(opt);\\n  }\\n\\n  return runTests(opt);\\n}\\n\\n/**\\n * Execute\\n */\\n\\nif (!module.parent) {\\n  process.title = 'marked';\\n  process.exit(main(process.argv.slice()) ? 0 : 1);\\n} else {\\n  exports = main;\\n  exports.main = main;\\n  exports.runTests = runTests;\\n  exports.runBench = runBench;\\n  exports.load = load;\\n  exports.bench = bench;\\n  module.exports = exports;\\n}\\n\\n[end of index.js]\\n[start of marked.js]\\n */\\n\\nParser.prototype.next = function() {\\n  return this.token = this.tokens.pop();\\n};\\n\\n/**\\n * Preview Next Token\\n */\\n\\nParser.prototype.peek = function() {\\n  return this.tokens[this.tokens.length - 1] || 0;\\n};\\n\\n/**\\n * Parse Text Tokens\\n */\\n\\nParser.prototype.parseText = function() {\\n  var body = this.token.text;\\n\\n  while (this.peek().type === 'text') {\\n    body += '\\\\n' + this.next().text;\\n  }\\n\\n  return this.inline.output(body);\\n};\\n\\n/**\\n * Parse Current Token\\n */\\n\\nParser.prototype.tok = function() {\\n  switch (this.token.type) {\\n    case 'space': {\\n      return '';\\n    }\\n    case 'hr': {\\n      return this.renderer.hr();\\n    }\\n    case 'heading': {\\n      return this.renderer.heading(\\n        this.inline.output(this.token.text),\\n        this.token.depth,\\n        this.token.text,\\n        this.options\\n      );\\n    }\\n    case 'code': {\\n      return this.renderer.code(this.token.text,\\n        this.token.lang,\\n        this.token.escaped,\\n        this.options);\\n    }\\n    case 'table': {\\n      var header = ''\\n        , body = ''\\n        , i\\n        , row\\n        , cell\\n        , flags\\n        , j;\\n\\n      // header\\n      cell = '';\\n      for (i = 0; i < this.token.header.length; i++) {\\n        flags = { header: true, align: this.token.align[i] };\\n        cell += this.renderer.tablecell(\\n          this.inline.output(this.token.header[i]),\\n          { header: true, align: this.token.align[i] }\\n        );\\n      }\\n      header += this.renderer.tablerow(cell);\\n\\n      for (i = 0; i < this.token.cells.length; i++) {\\n        row = this.token.cells[i];\\n\\n        cell = '';\\n        for (j = 0; j < row.length; j++) {\\n          cell += this.renderer.tablecell(\\n            this.inline.output(row[j]),\\n            { header: false, align: this.token.align[j] }\\n          );\\n        }\\n\\n        body += this.renderer.tablerow(cell);\\n      }\\n      return this.renderer.table(header, body);\\n    }\\n    case 'blockquote_start': {\\n      var body = '';\\n\\n      while (this.next().type !== 'blockquote_end') {\\n        body += this.tok();\\n      }\\n\\n      return this.renderer.blockquote(body);\\n    }\\n    case 'list_start': {\\n      var body = ''\\n        , ordered = this.token.ordered;\\n\\n      while (this.next().type !== 'list_end') {\\n        body += this.tok();\\n      }\\n\\n      return this.renderer.list(body, ordered);\\n    }\\n    case 'list_item_start': {\\n      var body = '';\\n\\n      while (this.next().type !== 'list_item_end') {\\n        body += this.token.type === 'text'\\n          ? this.parseText()\\n          : this.tok();\\n      }\\n\\n      return this.renderer.listitem(body);\\n    }\\n    case 'loose_item_start': {\\n      var body = '';\\n\\n      while (this.next().type !== 'list_item_end') {\\n        body += this.tok();\\n      }\\n\\n      return this.renderer.listitem(body);\\n    }\\n    case 'html': {\\n      var html = !this.token.pre && !this.options.pedantic\\n        ? this.inline.output(this.token.text)\\n        : this.token.text;\\n      return this.renderer.html(html);\\n    }\\n    case 'paragraph': {\\n      return this.renderer.paragraph(this.inline.output(this.token.text));\\n    }\\n    case 'text': {\\n      return this.renderer.paragraph(this.parseText());\\n    }\\n  }\\n};\\n\\n/**\\n * Helpers\\n */\\n\\nfunction escape(html, encode) {\\n  return html\\n    .replace(!encode ? /&(?!#?\\\\w+;)/g : /&/g, '&amp;')\\n    .replace(/</g, '&lt;')\\n    .replace(/>/g, '&gt;')\\n    .replace(/\\\"/g, '&quot;')\\n    .replace(/'/g, '&#39;');\\n}\\n\\nfunction replace(regex, opt) {\\n  regex = regex.source;\\n  opt = opt || '';\\n  return function self(name, val) {\\n    if (!name) return new RegExp(regex, opt);\\n    val = val.source || val;\\n    val = val.replace(/(^|[^\\\\[])\\\\^/g, '$1');\\n    regex = regex.replace(name, val);\\n    return self;\\n  };\\n}\\n\\nfunction noop() {}\\nnoop.exec = noop;\\n\\nfunction merge(obj) {\\n  var i = 1\\n    , target\\n    , key;\\n\\n  for (; i < arguments.length; i++) {\\n    target = arguments[i];\\n    for (key in target) {\\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\\n        obj[key] = target[key];\\n      }\\n    }\\n  }\\n\\n  return obj;\\n}\\n\\n\\n/**\\n * Marked\\n */\\n\\nfunction marked(src, opt, callback) {\\n  if (callback || typeof opt === 'function') {\\n    if (!callback) {\\n      callback = opt;\\n      opt = null;\\n    }\\n\\n    opt = merge({}, marked.defaults, opt || {});\\n\\n    var highlight = opt.highlight\\n      , tokens\\n      , pending\\n      , i = 0;\\n\\n    try {\\n      tokens = Lexer.lex(src, opt)\\n    } catch (e) {\\n      return callback(e);\\n    }\\n\\n    pending = tokens.length;\\n\\n    var done = function() {\\n      var out, err;\\n\\n      try {\\n        out = Parser.parse(tokens, opt);\\n      } catch (e) {\\n        err = e;\\n      }\\n\\n      opt.highlight = highlight;\\n\\n      return err\\n        ? callback(err)\\n        : callback(null, out);\\n    };\\n\\n    if (!highlight || highlight.length < 3) {\\n      return done();\\n    }\\n\\n    delete opt.highlight;\\n\\n    if (!pending) return done();\\n\\n    for (; i < tokens.length; i++) {\\n      (function(token) {\\n        if (token.type !== 'code') {\\n          return --pending || done();\\n        }\\n        return highlight(token.text, token.lang, function(err, code) {\\n          if (code == null || code === token.text) {\\n            return --pending || done();\\n          }\\n          token.text = code;\\n          token.escaped = true;\\n          --pending || done();\\n        });\\n      })(tokens[i]);\\n    }\\n\\n    return;\\n  }\\n  try {\\n    if (opt) opt = merge({}, marked.defaults, opt);\\n    return Parser.parse(Lexer.lex(src, opt), opt);\\n  } catch (e) {\\n    e.message += '\\\\nPlease report this to https://github.com/chjj/marked.';\\n    if ((opt || marked.defaults).silent) {\\n      return '<p>An error occured:</p><pre>'\\n        + escape(e.message + '', true)\\n        + '</pre>';\\n    }\\n    throw e;\\n  }\\n}\\n\\n/**\\n * Options\\n */\\n\\nmarked.options =\\nmarked.setOptions = function(opt) {\\n  merge(marked.defaults, opt);\\n  return marked;\\n};\\n\\nmarked.defaults = {\\n  gfm: true,\\n  tables: true,\\n  breaks: false,\\n  pedantic: false,\\n  sanitize: false,\\n  smartLists: false,\\n  silent: false,\\n  highlight: null,\\n  langPrefix: 'lang-',\\n  smartypants: false,\\n  headerPrefix: '',\\n  renderer: new Renderer\\n};\\n\\n/**\\n * Expose\\n */\\n\\nmarked.Parser = Parser;\\nmarked.parser = Parser.parse;\\n\\nmarked.Renderer = Renderer;\\n\\nmarked.Lexer = Lexer;\\nmarked.lexer = Lexer.lex;\\n\\nmarked.InlineLexer = InlineLexer;\\nmarked.inlineLexer = InlineLexer.output;\\n\\nmarked.parse = marked;\\n\\nif (typeof exports === 'object') {\\n  module.exports = marked;\\n} else if (typeof define === 'function' && define.amd) {\\n  define(function() { return marked; });\\n} else {\\n  this.marked = marked;\\n}\\n\\n}).call(function() {\\n  return this || (typeof window !== 'undefined' ? window : global);\\n}());\\n[end of marked.js]\\n[start of test.js]\\n;(function() {\\n\\nvar console = {}\\n  , files = __TESTS__;\\n\\nconsole.log = function(text) {\\n  var args = Array.prototype.slice.call(arguments, 1)\\n    , i = 0;\\n\\n  text = text.replace(/%\\\\w/g, function() {\\n    return args[i++] || '';\\n  });\\n\\n  if (window.console) window.console.log(text);\\n  document.body.innerHTML += '<pre>' + escape(text) + '</pre>';\\n};\\n\\nif (!Object.keys) {\\n  Object.keys = function(obj) {\\n    var out = []\\n      , key;\\n\\n    for (key in obj) {\\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\\n        out.push(key);\\n      }\\n    }\\n\\n    return out;\\n  };\\n}\\n\\nif (!Array.prototype.forEach) {\\n  Array.prototype.forEach = function(callback, context) {\\n    for (var i = 0; i < this.length; i++) {\\n      callback.call(context || null, this[i], i, obj);\\n    }\\n  };\\n}\\n\\nif (!String.prototype.trim) {\\n  String.prototype.trim = function() {\\n    return this.replace(/^\\\\s+|\\\\s+$/g, '');\\n  };\\n}\\n\\nfunction load() {\\n  return files;\\n}\\n\\nfunction escape(html, encode) {\\n  return html\\n    .replace(!encode ? /&(?!#?\\\\w+;)/g : /&/g, '&amp;')\\n    .replace(/</g, '&lt;')\\n    .replace(/>/g, '&gt;')\\n    .replace(/\\\"/g, '&quot;')\\n    .replace(/'/g, '&#39;');\\n}\\n\\n(__MAIN__)();\\n\\n}).call(this);\\n\\n[end of test.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "README.md",
        "marked.js",
        "index.js",
        "marked.js",
        "test.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "32a2843a-5deb-4e96-9b87-b69de90cc7b4",
        "score": 0.01639344262295082,
        "payload": {
          "text": "# marked\n\n> A full-featured markdown parser and compiler, written in javascript. Built\n> for speed.\n\n[![NPM version](https://badge.fury.io/js/marked.png)][badge]\n\n## Install\n\n``` bash\nnpm install marked --save\n```\n\n## Usage\n\nMinimal usage:\n\n```js\nconsole.log(marked('I am using __markdown__.'));\n// Outputs: <p>I am using <strong>markdown</strong>.</p>\n```\n\nExample using all options:\n\n```js\nmarked.setOptions({\n  gfm: true,\n  tables: true,\n  breaks: false,\n  pedantic: false,\n  sanitize: true,\n  smartLists: true,\n  smartypants: false,\n});\n\n// Using async version of marked\nmarked('I am using __markdown__.', function (err, content) {\n  if (err) throw err;\n  console.log(content);\n});\n```\n\n## marked(markdownString, [options], [callback])\n\n### markdownString\n\nType: `String`\n\nString of markdown source to be compiled.\n\n### options\n\nType: `Object`\n\nHash of options. Can also be set using the `marked.setOptions` method as seen\nabove.\n\n### callback\n\nType: `Function`\n\nFunction called when the `markdownString` has been fully parsed when using\nasync highlighting. If the `options` argument is omitted, this can be used as\nthe second argument as seen above:\n\n## Options\n\n### gfm\n\nType: `Boolean`\nDefault: `true`\n\nEnable [GitHub flavored markdown][gfm].\n\n### tables\n\nType: `Boolean`\nDefault: `true`\n\nEnable GFM [tables][tables].\nThis option requires the `gfm` option to be true.\n\n### breaks\n\nType: `Boolean`\nDefault: `false`\n\nEnable GFM [line breaks][breaks].\nThis option requires the `gfm` option to be true.\n\n### pedantic\n\nType: `Boolean`\nDefault: `false`\n\nConform to obscure parts of `markdown.pl` as much as possible. Don't fix any of\nthe original markdown bugs or poor behavior.\n\n### sanitize\n\nType: `Boolean`\nDefault: `false`\n\nSanitize the output. Ignore any HTML that has been input.\n\n### smartLists\n\nType: `Boolean`\nDefault: `true`\n\nUse smarter list behavior than the original markdown. May eventually be\ndefault with the old behavior moved into `pedantic`.\n\n### smartypants\n\nType: `Boolean`\nDefault: `false`\n\nUse \"smart\" typograhic punctuation for things like quotes and dashes.\n\n### renderer\n\nType: `Renderer`\nDefault: `new Renderer()`\n\nA renderer instance for rendering ast to html. Learn more on the Renderer\nsection.\n\n## Renderer\n\nRenderer is a the new way for rendering tokens to html. Here is a simple\nexample:\n\n```javascript\nvar r = new marked.Renderer()\nr.blockcode = function(code, lang) {\n  return highlight(lang, code).value;\n}\n\nconsole.log(marked(text, {renderer: r}))\n```\n\nYou can control anything you want.\n\n### Block Level\n\n- code(code, language)\n- blockquote(quote)\n- html(html)\n- heading(text, level)\n- hr()\n- list(body, ordered)\n- listitem(text)\n- paragraph(text)\n- table(header, body)\n- tablerow(content)\n- tablecell(content, flags)\n\n`flags` is an object like this:\n\n```\n{\n    header: true,\n    align: 'center'\n}\n```\n\n### Span Level\n\n- strong(text)\n- em(text)\n- codespan(code)\n- br()\n- del(text)\n- link(href, title, text)\n- image(href, title, text)\n\n## Access to lexer and parser\n\nYou also have direct access to the lexer and parser if you so desire.\n\n``` js\nvar tokens = marked.lexer(text, options);\nconsole.log(marked.parser(tokens));\n```\n\n``` js\nvar lexer = new marked.Lexer(options);\nvar tokens = lexer.lex(text);\nconsole.log(tokens);\nconsole.log(lexer.rules);\n```\n\n## CLI\n\n``` bash\n$ marked -o hello.html\nhello world\n^D\n$ cat hello.html\n<p>hello world</p>\n```\n\n## Benchmarks\n\nnode v0.4.x\n\n``` bash\n$ node test --bench\nmarked completed in 12071ms.\nshowdown (reuse converter) completed in 27387ms.\nshowdown (new converter) completed in 75617ms.\nmarkdown-js completed in 70069ms.\n```\n\nnode v0.6.x\n\n``` bash\n$ node test --bench\nmarked completed in 6448ms.\nmarked (gfm) completed in 7357ms.\nmarked (pedantic) completed in 6092ms.\ndiscount completed in 7314ms.\nshowdown (reuse converter) completed in 16018ms.\nshowdown (new converter) completed in 18234ms.\nmarkdown-js completed in 24270ms.\n```\n\n__Marked is now faster than Discount, which is written in C.__\n\nFor those feeling skeptical: These benchmarks run the entire markdown test suite\n1000 times. The test suite tests every feature. It doesn't cater to specific\naspects.\n\nnode v0.8.x\n\n``` bash\n$ node test --bench\nmarked completed in 3411ms.\nmarked (gfm) completed in 3727ms.\nmarked (pedantic) completed in 3201ms.\nrobotskirt completed in 808ms.\nshowdown (reuse converter) completed in 11954ms.\nshowdown (new converter) completed in 17774ms.\nmarkdown-js completed in 17191ms.\n```\n\n## Another Javascript Markdown Parser\n\nThe point of marked was to create a markdown compiler where it was possible to\nfrequently parse huge chunks of markdown without having to worry about\ncaching the compiled output somehow...or blocking for an unnecesarily long time.\n\nmarked is very concise and still implements all markdown features. It is also\nnow fully compatible with the client-side.\n\nmarked more or less passes the official markdown test suite in its\nentirety. This is important because a surprising number of markdown compilers\ncannot pass more than a few tests. It was very difficult to get marked as\ncompliant as it is. It could have cut corners in several areas for the sake\nof performance, but did not in order to be exactly what you expect in terms\nof a markdown rendering. In fact, this is why marked could be considered at a\ndisadvantage in the benchmarks above.\n\nAlong with implementing every markdown feature, marked also implements [GFM\nfeatures][gfmf].\n\n### High level\n\nYou can customize the result with a customized renderer.\n\n``` js\nvar renderer = new marked.Renderer()\n\nrenderer.heading = function(text, level) {\n  return '<div class=\"h-' + level + '\">' + text + '</div>'\n}\n\nvar parse = function(src, options) {\n  options = options || {};\n  options.renderer = renderer\n  return marked.parser(marked.lexer(src, options), options);\n}\n\nconsole.log(parse('# h1'))\n```\n\nThe renderer API:\n\n```\ncode: function(code, lang)\nblockquote: function(text)\nhtml: function(html)\n\nheading: function(text, level)\nparagraph: function(text)\n\nhr: function()\n\nlist: function(contents, isOrdered)\nlistitem: function(text)\n\ntable: function(header, body)\ntablerow: function(content)\ntablecell: function(text, flags)\n// flags: {header: false, align: 'center'}\n```\n\n### Pro level\n\nYou also have direct access to the lexer and parser if you so desire.\n\n``` js\nvar tokens = marked.lexer(text, options);\nconsole.log(marked.parser(tokens));\n```\n\n``` js\nvar lexer = new marked.Lexer(options);\nvar tokens = lexer.lex(text);\nconsole.log(tokens);\nconsole.log(lexer.rules);\n```\n\n``` bash\n$ node\n> require('marked').lexer('> i am using marked.')\n[ { type: 'blockquote_start' },\n  { type: 'paragraph',\n    text: 'i am using marked.' },\n  { type: 'blockquote_end' },\n  links: {} ]\n```\n\n## Running Tests & Contributing\n\nIf you want to submit a pull request, make sure your changes pass the test\nsuite. If you're adding a new feature, be sure to add your own test.\n\nThe marked test suite is set up slightly strangely: `test/new` is for all tests\nthat are not part of the original markdown.pl test suite (this is where your\ntest should go if you make one). `test/original` is only for the original\nmarkdown.pl tests. `test/tests` houses both types of tests after they have been\ncombined and moved/generated by running `node test --fix` or `marked --test\n--fix`.\n\nIn other words, if you have a test to add, add it to `test/new/` and then\nregenerate the tests with `node test --fix`. Commit the result. If your test\nuses a certain feature, for example, maybe it assumes GFM is *not* enabled, you\ncan add `.nogfm` to the filename. So, `my-test.text` becomes\n`my-test.nogfm.text`. You can do this with any marked option. Say you want\nline breaks and smartypants enabled, your filename should be:\n`my-test.breaks.smartypants.text`.\n\nTo run the tests:\n\n``` bash\ncd marked/\nnode test\n```\n\n### Contribution and License Agreement\n\nIf you contribute code to this project, you are implicitly allowing your code\nto be distributed under the MIT license. You are also implicitly verifying that\nall code is your original work. `</legalese>`\n\n## License\n\nCopyright (c) 2011-2013, Christopher Jeffrey. (MIT License)\n\nSee LICENSE for more info.\n\n[gfm]: https://help.github.com/articles/github-flavored-markdown\n[gfmf]: http://github.github.com/github-flavored-markdown/\n[pygmentize]: https://github.com/rvagg/node-pygmentize-bundled\n[highlight]: https://github.com/isagalaev/highlight.js\n[badge]: http://badge.fury.io/js/marked\n[tables]: https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#wiki-tables\n[breaks]: https://help.github.com/articles/github-flavored-markdown#newlines\n",
          "filepath": "data/repos/markedjs/marked-0.3/README.md",
          "repo": "markedjs/marked",
          "version": "0.3",
          "chunk_index": 0
        }
      },
      {
        "id": "9891e658-b36b-4467-96e7-226444400c88",
        "score": 0.016129032258064516,
        "payload": {
          "text": "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2013, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n */\n\n;(function() {\n\n/**\n * Block-Level Grammar\n */\n\nvar block = {\n  newline: /^\\n+/,\n  code: /^( {4}[^\\n]+\\n*)+/,\n  fences: noop,\n  hr: /^( *[-*_]){3,} *(?:\\n+|$)/,\n  heading: /^ *(#{1,6}) *([^\\n]+?) *#* *(?:\\n+|$)/,\n  nptable: noop,\n  lheading: /^([^\\n]+)\\n *(=|-){2,} *(?:\\n+|$)/,\n  blockquote: /^( *>[^\\n]+(\\n[^\\n]+)*\\n*)+/,\n  list: /^( *)(bull) [\\s\\S]+?(?:hr|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n  html: /^ *(?:comment|closed|closing) *(?:\\n{2,}|\\s*$)/,\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +[\"(]([^\\n]+)[\")])? *(?:\\n+|$)/,\n  table: noop,\n  paragraph: /^((?:[^\\n]+\\n?(?!hr|heading|lheading|blockquote|tag|def))+)\\n*/,\n  text: /^[^\\n]+/\n};\n\nblock.bullet = /(?:[*+-]|\\d+\\.)/;\nblock.item = /^( *)(bull) [^\\n]*(?:\\n(?!\\1bull )[^\\n]*)*/;\nblock.item = replace(block.item, 'gm')\n  (/bull/g, block.bullet)\n  ();\n\nblock.list = replace(block.list)\n  (/bull/g, block.bullet)\n  ('hr', /\\n+(?=(?: *[-*_]){3,} *(?:\\n+|$))/)\n  ();\n\nblock._tag = '(?!(?:'\n  + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code'\n  + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo'\n  + '|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:/|@)\\\\b';\n\nblock.html = replace(block.html)\n  ('comment', /<!--[\\s\\S]*?-->/)\n  ('closed', /<(tag)[\\s\\S]+?<\\/\\1>/)\n  ('closing', /<tag(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/)\n  (/tag/g, block._tag)\n  ();\n\nblock.paragraph = replace(block.paragraph)\n  ('hr', block.hr)\n  ('heading', block.heading)\n  ('lheading', block.lheading)\n  ('blockquote', block.blockquote)\n  ('tag', '<' + block._tag)\n  ('def', block.def)\n  ();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  fences: /^ *(`{3,}|~{3,}) *(\\S+)? *\\n([\\s\\S]+?)\\s*\\1 *(?:\\n+|$)/,\n  paragraph: /^/\n});\n\nblock.gfm.paragraph = replace(block.paragraph)\n  ('(?!', '(?!'\n    + block.gfm.fences.source.replace('\\\\1', '\\\\2') + '|'\n    + block.list.source.replace('\\\\1', '\\\\3') + '|')\n  ();\n\n/**\n * GFM + Tables Block Grammar\n */\n\nblock.tables = merge({}, block.gfm, {\n  nptable: /^ *(\\S.*\\|.*)\\n *([-:]+ *\\|[-| :]*)\\n((?:.*\\|.*(?:\\n|$))*)\\n*/,\n  table: /^ *\\|(.+)\\n *\\|( *[-:]+[-| :]*)\\n((?: *\\|.*(?:\\n|$))*)\\n*/\n});\n\n/**\n * Block Lexer\n */\n\nfunction Lexer(options) {\n  this.tokens = [];\n  this.tokens.links = {};\n  this.options = options || marked.defaults;\n  this.rules = block.normal;\n\n  if (this.options.gfm) {\n    if (this.options.tables) {\n      this.rules = block.tables;\n    } else {\n      this.rules = block.gfm;\n    }\n  }\n}\n\n/**\n * Expose Block Rules\n */\n\nLexer.rules = block;\n\n/**\n * Static Lex Method\n */\n\nLexer.lex = function(src, options) {\n  var lexer = new Lexer(options);\n  return lexer.lex(src);\n};\n\n/**\n * Preprocessing\n */\n\nLexer.prototype.lex = function(src) {\n  src = src\n    .replace(/\\r\\n|\\r/g, '\\n')\n    .replace(/\\t/g, '    ')\n    .replace(/\\u00a0/g, ' ')\n    .replace(/\\u2424/g, '\\n');\n\n  return this.token(src, true);\n};\n\n/**\n * Lexing\n */\n\nLexer.prototype.token = function(src, top) {\n  var src = src.replace(/^ +$/gm, '')\n    , next\n    , loose\n    , cap\n    , bull\n    , b\n    , item\n    , space\n    , i\n    , l;\n\n  while (src) {\n    // newline\n    if (cap = this.rules.newline.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[0].length > 1) {\n        this.tokens.push({\n          type: 'space'\n        });\n      }\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      cap = cap[0].replace(/^ {4}/gm, '');\n      this.tokens.push({\n        type: 'code',\n        text: !this.options.pedantic\n          ? cap.replace(/\\n+$/, '')\n          : cap\n      });\n      continue;\n    }\n\n    // fences (gfm)\n    if (cap = this.rules.fences.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'code',\n        lang: cap[2],\n        text: cap[3]\n      });\n      continue;\n    }\n\n    // heading\n    if (cap = this.rules.heading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[1].length,\n        text: cap[2]\n      });\n      continue;\n    }\n\n    // table no leading pipe (gfm)\n    if (top && (cap = this.rules.nptable.exec(src))) {\n      src = src.substring(cap[0].length);\n\n      item = {\n        type: 'table',\n        header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3].replace(/\\n$/, '').split('\\n')\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = 'right';\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = 'center';\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = 'left';\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = item.cells[i].split(/ *\\| */);\n      }\n\n      this.tokens.push(item);\n\n      continue;\n    }\n\n    // lheading\n    if (cap = this.rules.lheading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[2] === '=' ? 1 : 2,\n        text: cap[1]\n      });\n      continue;\n    }\n\n    // hr\n    if (cap = this.rules.hr.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'hr'\n      });\n      continue;\n    }\n\n    // blockquote\n    if (cap = this.rules.blockquote.exec(src)) {\n      src = src.substring(cap[0].length);\n\n      this.tokens.push({\n        type: 'blockquote_start'\n      });\n\n      cap = cap[0].replace(/^ *> ?/gm, '');\n\n      // Pass `top` to keep the current\n      // \"toplevel\" state. This is exactly\n      // how markdown.pl works.\n      this.token(cap, top);\n\n      this.tokens.push({\n        type: 'blockquote_end'\n      });\n\n      continue;\n    }\n\n    // list\n    if (cap = this.rules.list.exec(src)) {\n      src = src.substring(cap[0].length);\n      bull = cap[2];\n\n      this.tokens.push({\n        type: 'list_start',\n        ordered: bull.length > 1\n      });\n\n      // Get each top-level item.\n      cap = cap[0].match(this.rules.item);\n\n      next = false;\n      l = cap.length;\n      i = 0;\n\n      for (; i < l; i++) {\n        item = cap[i];\n\n        // Remove the list item's bullet\n        // so it is seen as the next token.\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+\\.) +/, '');\n\n        // Outdent whatever the\n        // list item contains. Hacky.\n        if (~item.indexOf('\\n ')) {\n          space -= item.length;\n          item = !this.options.pedantic\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n            : item.replace(/^ {1,4}/gm, '');\n        }\n\n        // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n        if (this.options.smartLists && i !== l - 1) {\n          b = block.bullet.exec(cap[i + 1])[0];\n          if (bull !== b && !(bull.length > 1 && b.length > 1)) {\n            src = cap.slice(i + 1).join('\\n') + src;\n            i = l - 1;\n          }\n        }\n\n        // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === '\\n';\n          if (!loose) loose = next;\n        }\n\n        this.tokens.push({\n          type: loose\n            ? 'loose_item_start'\n            : 'list_item_start'\n        });\n\n        // Recurse.\n        this.token(item, false);\n\n        this.tokens.push({\n          type: 'list_item_end'\n        });\n      }\n\n      this.tokens.push({\n        type: 'list_end'\n      });\n\n      continue;\n    }\n\n    // html\n    if (cap = this.rules.html.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: this.options.sanitize\n          ? 'paragraph'\n          : 'html',\n        pre: cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style',\n        text: cap[0]\n      });\n      continue;\n    }\n\n    // def\n    if (top && (cap = this.rules.def.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.links[cap[1].toLowerCase()] = {\n        href: cap[2],\n        title: cap[3]\n      };\n      continue;\n    }\n\n    // table (gfm)\n    if (top && (cap = this.rules.table.exec(src))) {\n      src = src.substring(cap[0].length);\n\n      item = {\n        type: 'table',\n        header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3].replace(/(?: *\\| *)?\\n$/, '').split('\\n')\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = 'right';\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = 'center';\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = 'left';\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = item.cells[i]\n          .replace(/^ *\\| *| *\\| *$/g, '')\n          .split(/ *\\| */);\n      }\n\n      this.tokens.push(item);\n\n      continue;\n    }\n\n    // top-level paragraph\n    if (top && (cap = this.rules.paragraph.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'paragraph',\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1]\n      });\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      // Top-level should never reach here.\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'text',\n        text: cap[0]\n      });\n      continue;\n    }\n\n    if (src) {\n      throw new\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return this.tokens;\n};\n\n/**\n * Inline-Level Grammar\n */\n\nvar inline = {\n  escape: /^\\\\([\\\\`*{}\\[\\]()#+\\-.!_>])/,\n  autolink: /^<([^ >]+(@|:\\/)[^ >]+)>/,\n  url: noop,\n  tag: /^<!--[\\s\\S]*?-->|^<\\/?\\w+(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/,\n  link: /^!?\\[(inside)\\]\\(href\\)/,\n  reflink: /^!?\\[(inside)\\]\\s*\\[([^\\]]*)\\]/,\n  nolink: /^!?\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\]/,\n  strong: /^__([\\s\\S]+?)__(?!_)|^\\*\\*([\\s\\S]+?)\\*\\*(?!\\*)/,\n  em: /^\\b_((?:__|[\\s\\S])+?)_\\b|^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,\n  code: /^(`+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/,\n  br: /^ {2,}\\n(?!\\s*$)/,\n  del: noop,\n  text: /^[\\s\\S]+?(?=[\\\\<!\\[_*`]| {2,}\\n|$)/\n};\n\ninline._inside = /(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*/;\ninline._href = /\\s*<?([\\s\\S]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*/;\n\ninline.link = replace(inline.link)\n  ('inside', inline._inside)\n  ('href', inline._href)\n  ();\n\ninline.reflink = replace(inline.reflink)\n  ('inside', inline._inside)\n  ();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n  em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: replace(inline.escape)('])', '~|])')(),\n  url: /^(https?:\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])/,\n  del: /^~~(?=\\S)([\\s\\S]*?\\S)~~/,\n  text: replace(inline.text)\n    (']|', '~]|')\n    ('|', '|https?://|')\n    ()\n});\n\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: replace(inline.br)('{2,}', '*')(),\n  text: replace(inline.gfm.text)('{2,}', '*')()\n});\n\n/**\n * Inline Lexer & Compiler\n */\n\nfunction InlineLexer(links, options) {\n  this.options = options || marked.defaults;\n  this.links = links;\n  this.rules = inline.normal;\n  this.renderer = this.options.renderer || new Renderer;\n\n  if (!this.links) {\n    throw new\n      Error('Tokens array requires a `links` property.');\n  }\n\n  if (this.options.gfm) {\n    if (this.options.breaks) {\n      this.rules = inline.breaks;\n    } else {\n      this.rules = inline.gfm;\n    }\n  } else if (this.options.pedantic) {\n    this.rules = inline.pedantic;\n  }\n}\n\n/**\n * Expose Inline Rules\n */\n\nInlineLexer.rules = inline;\n\n/**\n * Static Lexing/Compiling Method\n */\n\nInlineLexer.output = function(src, links, options) {\n  var inline = new InlineLexer(links, options);\n  return inline.output(src);\n};\n\n/**\n * Lexing/Compiling\n */\n\nInlineLexer.prototype.output = function(src) {\n  var out = ''\n    , link\n    , text\n    , href\n    , cap;\n\n  while (src) {\n    // escape\n    if (cap = this.rules.escape.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += cap[1];\n      continue;\n    }\n\n    // autolink\n    if (cap = this.rules.autolink.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[2] === '@') {\n        text = cap[1].charAt(6) === ':'\n          ? this.mangle(cap[1].substring(7))\n          : this.mangle(cap[1]);\n        href = this.mangle('mailto:') + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // url (gfm)\n    if (cap = this.rules.url.exec(src)) {\n      src = src.substring(cap[0].length);\n      text = escape(cap[1]);\n      href = text;\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // tag\n    if (cap = this.rules.tag.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.options.sanitize\n        ? escape(cap[0])\n        : cap[0];\n      continue;\n    }\n\n    // link\n    if (cap = this.rules.link.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.outputLink(cap, {\n        href: cap[2],\n        title: cap[3]\n      });\n      continue;\n    }\n\n    // reflink, nolink\n    if ((cap = this.rules.reflink.exec(src))\n        || (cap = this.rules.nolink.exec(src))) {\n      src = src.substring(cap[0].length);\n      link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = this.links[link.toLowerCase()];\n      if (!link || !link.href) {\n        out += cap[0].charAt(0);\n        src = cap[0].substring(1) + src;\n        continue;\n      }\n      out += this.outputLink(cap, link);\n      continue;\n    }\n\n    // strong\n    if (cap = this.rules.strong.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.strong(this.output(cap[2] || cap[1]));\n      continue;\n    }\n\n    // em\n    if (cap = this.rules.em.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.em(this.output(cap[2] || cap[1]));\n      continue;\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.codespan(escape(cap[2], true));\n      continue;\n    }\n\n    // br\n    if (cap = this.rules.br.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.br();\n      continue;\n    }\n\n    // del (gfm)\n    if (cap = this.rules.del.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.del(this.output(cap[1]));\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += escape(this.smartypants(cap[0]));\n      continue;\n    }\n\n    if (src) {\n      throw new\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return out;\n};\n\n/**\n * Compile Link\n */\n\nInlineLexer.prototype.outputLink = function(cap, link) {\n  var href = escape(link.href)\n    , title = link.title ? escape(link.title) : null;\n\n  return cap[0].charAt(0) !== '!'\n    ? this.renderer.link(href, title, this.output(cap[1]))\n    : this.renderer.image(href, title, escape(cap[1]));\n};\n\n/**\n * Smartypants Transformations\n */\n\nInlineLexer.prototype.smartypants = function(text) {\n  if (!this.options.smartypants) return text;\n  return text\n    // em-dashes\n    .replace(/--/g, '\\u2014')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n};\n\n/**\n * Mangle Links\n */\n\nInlineLexer.prototype.mangle = function(text) {\n  var out = ''\n    , l = text.length\n    , i = 0\n    , ch;\n\n  for (; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n};\n\n/**\n * Renderer\n */\n\nfunction Renderer() {}\n\nRenderer.prototype.code = function(code, lang, escaped, options) {\n  options = options || {};\n\n  if (options.highlight) {\n    var out = options.highlight(code, lang);\n    if (out != null && out !== code) {\n      escaped = true;\n      code = out;\n    }\n  }\n\n  if (!lang) {\n    return '<pre><code>'\n      + (escaped ? code : escape(code, true))\n      + '\\n</code></pre>';\n  }\n\n  return '<pre><code class=\"'\n    + options.langPrefix\n    + lang\n    + '\">'\n    + (escaped ? code : escape(code))\n    + '\\n</code></pre>\\n';\n};\n\nRenderer.prototype.blockquote = function(quote) {\n  return '<blockquote>\\n' + quote + '</blockquote>\\n';\n};\n\nRenderer.prototype.html = function(html) {\n  return html;\n};\n\nRenderer.prototype.heading = function(text, level, raw, options) {\n  return '<h'\n    + level\n    + ' id=\"'\n    + options.headerPrefix\n    + raw.toLowerCase().replace(/[^\\w]+/g, '-')\n    + '\">'\n    + text\n    + '</h'\n    + level\n    + '>\\n';\n};\n\nRenderer.prototype.hr = function() {\n  return '<hr>\\n';\n};\n\nRenderer.prototype.list = function(body, ordered) {\n  var type = ordered ? 'ol' : 'ul';\n  return '<' + type + '>\\n' + body + '</' + type + '>\\n';\n};\n\nRenderer.prototype.listitem = function(text) {\n  return '<li>' + text + '</li>\\n';\n};\n\nRenderer.prototype.paragraph = function(text) {\n  return '<p>' + text + '</p>\\n';\n};\n\nRenderer.prototype.table = function(header, body) {\n  return '<table>\\n'\n    + '<thead>\\n'\n    + header\n    + '</thead>\\n'\n    + '<tbody>\\n'\n    + body\n    + '</tbody>\\n'\n    + '</table>\\n';\n};\n\nRenderer.prototype.tablerow = function(content) {\n  return '<tr>\\n' + content + '</tr>\\n';\n};\n\nRenderer.prototype.tablecell = function(content, flags) {\n  var type = flags.header ? 'th' : 'td';\n  var tag = flags.align\n    ? '<' + type + ' style=\"text-align:' + flags.align + '\">'\n    : '<' + type + '>';\n  return tag + content + '</' + type + '>\\n';\n};\n\n// span level renderer\nRenderer.prototype.strong = function(text) {\n  return '<strong>' + text + '</strong>';\n};\n\nRenderer.prototype.em = function(text) {\n  return '<em>' + text + '</em>';\n};\n\nRenderer.prototype.codespan = function(text) {\n  return '<code>' + text + '</code>';\n};\n\nRenderer.prototype.br = function() {\n  return '<br>';\n};\n\nRenderer.prototype.del = function(text) {\n  return '<del>' + text + '</del>';\n};\n\nRenderer.prototype.link = function(href, title, text) {\n  var out = '<a href=\"' + href + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += '>' + text + '</a>';\n  return out;\n};\n\nRenderer.prototype.image = function(href, title, text) {\n  var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += '>';\n  return out;\n};\n\n/**\n * Parsing & Compiling\n */\n\nfunction Parser(options) {\n  this.tokens = [];\n  this.token = null;\n  this.options = options || marked.defaults;\n  this.options.renderer = this.options.renderer || new Renderer;\n  this.renderer = this.options.renderer;\n}\n\n/**\n * Static Parse Method\n */\n\nParser.parse = function(src, options, renderer) {\n  var parser = new Parser(options, renderer);\n  return parser.parse(src);\n};\n\n/**\n * Parse Loop\n */\n\nParser.prototype.parse = function(src) {\n  this.inline = new InlineLexer(src.links, this.options, this.renderer);\n  this.tokens = src.reverse();\n\n  var out = '';\n  while (this.next()) {\n    out += this.tok();\n  }\n\n  return out;\n};\n\n/**\n * Next Token",
          "filepath": "data/repos/markedjs/marked-0.3/lib/marked.js",
          "repo": "markedjs/marked",
          "version": "0.3",
          "chunk_index": 0
        }
      },
      {
        "id": "6c8a9cf7-22c0-4769-9a33-6214fc147506",
        "score": 0.015873015873015872,
        "payload": {
          "text": "#!/usr/bin/env node\n\n/**\n * marked tests\n * Copyright (c) 2011-2013, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n */\n\n/**\n * Modules\n */\n\nvar fs = require('fs')\n  , path = require('path')\n  , marked = require('../');\n\n/**\n * Load Tests\n */\n\nfunction load() {\n  var dir = __dirname + '/tests'\n    , files = {}\n    , list\n    , file\n    , i\n    , l;\n\n  list = fs\n    .readdirSync(dir)\n    .filter(function(file) {\n      return path.extname(file) !== '.html';\n    })\n    .sort(function(a, b) {\n      a = path.basename(a).toLowerCase().charCodeAt(0);\n      b = path.basename(b).toLowerCase().charCodeAt(0);\n      return a > b ? 1 : (a < b ? -1 : 0);\n    });\n\n  i = 0;\n  l = list.length;\n\n  for (; i < l; i++) {\n    file = path.join(dir, list[i]);\n    files[path.basename(file)] = {\n      text: fs.readFileSync(file, 'utf8'),\n      html: fs.readFileSync(file.replace(/[^.]+$/, 'html'), 'utf8')\n    };\n  }\n\n  return files;\n}\n\n/**\n * Test Runner\n */\n\nfunction runTests(engine, options) {\n  if (typeof engine !== 'function') {\n    options = engine;\n    engine = null;\n  }\n\n  var engine = engine || marked\n    , options = options || {}\n    , files = options.files || load()\n    , complete = 0\n    , failed = 0\n    , failures = []\n    , keys = Object.keys(files)\n    , i = 0\n    , len = keys.length\n    , filename\n    , file\n    , flags\n    , text\n    , html\n    , j\n    , l;\n\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n\nmain:\n  for (; i < len; i++) {\n    filename = keys[i];\n    file = files[filename];\n\n    if (marked._original) {\n      marked.defaults = marked._original;\n      delete marked._original;\n    }\n\n    flags = filename.split('.').slice(1, -1);\n    if (flags.length) {\n      marked._original = marked.defaults;\n      marked.defaults = {};\n      Object.keys(marked._original).forEach(function(key) {\n        marked.defaults[key] = marked._original[key];\n      });\n      flags.forEach(function(key) {\n        var val = true;\n        if (key.indexOf('no') === 0) {\n          key = key.substring(2);\n          val = false;\n        }\n        if (marked.defaults.hasOwnProperty(key)) {\n          marked.defaults[key] = val;\n        }\n      });\n    }\n\n    try {\n      text = engine(file.text).replace(/\\s/g, '');\n      html = file.html.replace(/\\s/g, '');\n    } catch(e) {\n      console.log('%s failed.', filename);\n      throw e;\n    }\n\n    j = 0;\n    l = html.length;\n\n    for (; j < l; j++) {\n      if (text[j] !== html[j]) {\n        failed++;\n        failures.push(filename);\n\n        text = text.substring(\n          Math.max(j - 30, 0),\n          Math.min(j + 30, text.length));\n\n        html = html.substring(\n          Math.max(j - 30, 0),\n          Math.min(j + 30, html.length));\n\n        console.log(\n          '\\n#%d. %s failed at offset %d. Near: \"%s\".\\n',\n          i + 1, filename, j, text);\n\n        console.log('\\nGot:\\n%s\\n', text.trim() || text);\n        console.log('\\nExpected:\\n%s\\n', html.trim() || html);\n\n        if (options.stop) {\n          break main;\n        }\n\n        continue main;\n      }\n    }\n\n    complete++;\n    console.log('#%d. %s completed.', i + 1, filename);\n  }\n\n  console.log('%d/%d tests completed successfully.', complete, len);\n  if (failed) console.log('%d/%d tests failed.', failed, len);\n\n  // Tests currently failing.\n  if (~failures.indexOf('def_blocks.text')\n      && ~failures.indexOf('double_link.text')\n      && ~failures.indexOf('gfm_code_hr_list.text')) {\n    failed -= 3;\n  }\n\n  return !failed;\n}\n\n/**\n * Benchmark a function\n */\n\nfunction bench(name, func) {\n  var files = bench.files || load();\n\n  if (!bench.files) {\n    bench.files = files;\n\n    // Change certain tests to allow\n    // comparison to older benchmark times.\n    fs.readdirSync(__dirname + '/new').forEach(function(name) {\n      if (path.extname(name) === '.html') return;\n      if (name === 'main.text') return;\n      delete files[name];\n    });\n\n    files['backslash_escapes.text'] = {\n      text: 'hello world \\\\[how](are you) today'\n    };\n\n    files['main.text'].text = files['main.text'].text.replace('* * *\\n\\n', '');\n  }\n\n  var start = Date.now()\n    , times = 1000\n    , keys = Object.keys(files)\n    , i\n    , l = keys.length\n    , filename\n    , file;\n\n  while (times--) {\n    for (i = 0; i < l; i++) {\n      filename = keys[i];\n      file = files[filename];\n      func(file.text);\n    }\n  }\n\n  console.log('%s completed in %dms.', name, Date.now() - start);\n}\n\n/**\n * Benchmark all engines\n */\n\nfunction runBench(options) {\n  var options = options || {};\n\n  // Non-GFM, Non-pedantic\n  marked.setOptions({\n    gfm: false,\n    tables: false,\n    breaks: false,\n    pedantic: false,\n    sanitize: false,\n    smartLists: false\n  });\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked', marked);\n\n  // GFM\n  marked.setOptions({\n    gfm: true,\n    tables: false,\n    breaks: false,\n    pedantic: false,\n    sanitize: false,\n    smartLists: false\n  });\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked (gfm)', marked);\n\n  // Pedantic\n  marked.setOptions({\n    gfm: false,\n    tables: false,\n    breaks: false,\n    pedantic: true,\n    sanitize: false,\n    smartLists: false\n  });\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked (pedantic)', marked);\n\n  // robotskirt\n  try {\n    bench('robotskirt', (function() {\n      var rs = require('robotskirt');\n      return function(text) {\n        var parser = rs.Markdown.std();\n        return parser.render(text);\n      };\n    })());\n  } catch (e) {\n    console.log('Could not bench robotskirt.');\n  }\n\n  // showdown\n  try {\n    bench('showdown (reuse converter)', (function() {\n      var Showdown = require('showdown');\n      var convert = new Showdown.converter();\n      return function(text) {\n        return convert.makeHtml(text);\n      };\n    })());\n    bench('showdown (new converter)', (function() {\n      var Showdown = require('showdown');\n      return function(text) {\n        var convert = new Showdown.converter();\n        return convert.makeHtml(text);\n      };\n    })());\n  } catch (e) {\n    console.log('Could not bench showdown.');\n  }\n\n  // markdown.js\n  try {\n    bench('markdown.js', require('markdown').parse);\n  } catch (e) {\n    console.log('Could not bench markdown.js.');\n  }\n}\n\n/**\n * A simple one-time benchmark\n */\n\nfunction time(options) {\n  var options = options || {};\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked', marked);\n}\n\n/**\n * Markdown Test Suite Fixer\n *   This function is responsible for \"fixing\"\n *   the markdown test suite. There are\n *   certain aspects of the suite that\n *   are strange or might make tests\n *   fail for reasons unrelated to\n *   conformance.\n */\n\nfunction fix(options) {\n  ['tests', 'original', 'new'].forEach(function(dir) {\n    try {\n      fs.mkdirSync(path.resolve(__dirname, dir), 0755);\n    } catch (e) {\n      ;\n    }\n  });\n\n  // rm -rf tests\n  fs.readdirSync(path.resolve(__dirname, 'tests')).forEach(function(file) {\n    fs.unlinkSync(path.resolve(__dirname, 'tests', file));\n  });\n\n  // cp -r original tests\n  fs.readdirSync(path.resolve(__dirname, 'original')).forEach(function(file) {\n    var nfile = file;\n    if (file.indexOf('hard_wrapped_paragraphs_with_list_like_lines.') === 0) {\n      nfile = file.replace(/\\.(text|html)$/, '.nogfm.$1');\n    }\n    fs.writeFileSync(path.resolve(__dirname, 'tests', nfile),\n      fs.readFileSync(path.resolve(__dirname, 'original', file)));\n  });\n\n  // node fix.js\n  var dir = __dirname + '/tests';\n\n  fs.readdirSync(dir).filter(function(file) {\n    return path.extname(file) === '.html';\n  }).forEach(function(file) {\n    var file = path.join(dir, file)\n      , html = fs.readFileSync(file, 'utf8');\n\n    // fix unencoded quotes\n    html = html\n      .replace(/='([^\\n']*)'(?=[^<>\\n]*>)/g, '=&__APOS__;$1&__APOS__;')\n      .replace(/=\"([^\\n\"]*)\"(?=[^<>\\n]*>)/g, '=&__QUOT__;$1&__QUOT__;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&#39;')\n      .replace(/&__QUOT__;/g, '\"')\n      .replace(/&__APOS__;/g, '\\'');\n\n    // add heading id's\n    html = html.replace(/<(h[1-6])>([^<]+)<\\/\\1>/g, function(s, h, text) {\n      var id = text\n        .replace(/&#39;/g, '\\'')\n        .replace(/&quot;/g, '\"')\n        .replace(/&gt;/g, '>')\n        .replace(/&lt;/g, '<')\n        .replace(/&amp;/g, '&');\n\n      id = id.toLowerCase().replace(/[^\\w]+/g,\u00a0'-');\n\n      return '<' + h + ' id=\"' + id + '\">' + text + '</' + h + '>';\n    });\n\n    fs.writeFileSync(file, html);\n  });\n\n  // turn <hr /> into <hr>\n  fs.readdirSync(dir).forEach(function(file) {\n    var file = path.join(dir, file)\n      , text = fs.readFileSync(file, 'utf8');\n\n    text = text.replace(/(<|&lt;)hr\\s*\\/(>|&gt;)/g, '$1hr$2');\n\n    fs.writeFileSync(file, text);\n  });\n\n  // markdown does some strange things.\n  // it does not encode naked `>`, marked does.\n  (function() {\n    var file = dir + '/amps_and_angles_encoding.html';\n    var html = fs.readFileSync(file, 'utf8')\n      .replace('6 > 5.', '6 &gt; 5.');\n\n    fs.writeFileSync(file, html);\n  })();\n\n  // cp new/* tests/\n  fs.readdirSync(path.resolve(__dirname, 'new')).forEach(function(file) {\n    fs.writeFileSync(path.resolve(__dirname, 'tests', file),\n      fs.readFileSync(path.resolve(__dirname, 'new', file)));\n  });\n}\n\n/**\n * Argument Parsing\n */\n\nfunction parseArg(argv) {\n  var argv = process.argv.slice(2)\n    , options = {}\n    , orphans = []\n    , arg;\n\n  function getarg() {\n    var arg = argv.shift();\n\n    if (arg.indexOf('--') === 0) {\n      // e.g. --opt\n      arg = arg.split('=');\n      if (arg.length > 1) {\n        // e.g. --opt=val\n        argv.unshift(arg.slice(1).join('='));\n      }\n      arg = arg[0];\n    } else if (arg[0] === '-') {\n      if (arg.length > 2) {\n        // e.g. -abc\n        argv = arg.substring(1).split('').map(function(ch) {\n          return '-' + ch;\n        }).concat(argv);\n        arg = argv.shift();\n      } else {\n        // e.g. -a\n      }\n    } else {\n      // e.g. foo\n    }\n\n    return arg;\n  }\n\n  while (argv.length) {\n    arg = getarg();\n    switch (arg) {\n      case '-f':\n      case '--fix':\n      case 'fix':\n        options.fix = true;\n        break;\n      case '-b':\n      case '--bench':\n        options.bench = true;\n        break;\n      case '-s':\n      case '--stop':\n        options.stop = true;\n        break;\n      case '-t':\n      case '--time':\n        options.time = true;\n        break;\n      default:\n        if (arg.indexOf('--') === 0) {\n          opt = camelize(arg.replace(/^--(no-)?/, ''));\n          if (!marked.defaults.hasOwnProperty(opt)) {\n            continue;\n          }\n          options.marked = options.marked || {};\n          if (arg.indexOf('--no-') === 0) {\n            options.marked[opt] = typeof marked.defaults[opt] !== 'boolean'\n              ? null\n              : false;\n          } else {\n            options.marked[opt] = typeof marked.defaults[opt] !== 'boolean'\n              ? argv.shift()\n              : true;\n          }\n        } else {\n          orphans.push(arg);\n        }\n        break;\n    }\n  }\n\n  return options;\n}\n\n/**\n * Helpers\n */\n\nfunction camelize(text) {\n  return text.replace(/(\\w)-(\\w)/g, function(_, a, b) {\n    return a + b.toUpperCase();\n  });\n}\n\n/**\n * Main\n */\n\nfunction main(argv) {\n  var opt = parseArg();\n\n  if (opt.fix) {\n    return fix(opt);\n  }\n\n  if (opt.bench) {\n    return runBench(opt);\n  }\n\n  if (opt.time) {\n    return time(opt);\n  }\n\n  return runTests(opt);\n}\n\n/**\n * Execute\n */\n\nif (!module.parent) {\n  process.title = 'marked';\n  process.exit(main(process.argv.slice()) ? 0 : 1);\n} else {\n  exports = main;\n  exports.main = main;\n  exports.runTests = runTests;\n  exports.runBench = runBench;\n  exports.load = load;\n  exports.bench = bench;\n  module.exports = exports;\n}\n",
          "filepath": "data/repos/markedjs/marked-0.3/test/index.js",
          "repo": "markedjs/marked",
          "version": "0.3",
          "chunk_index": 0
        }
      },
      {
        "id": "6d9af21f-e7fd-4287-ad5e-aae4876d2636",
        "score": 0.015625,
        "payload": {
          "text": " */\n\nParser.prototype.next = function() {\n  return this.token = this.tokens.pop();\n};\n\n/**\n * Preview Next Token\n */\n\nParser.prototype.peek = function() {\n  return this.tokens[this.tokens.length - 1] || 0;\n};\n\n/**\n * Parse Text Tokens\n */\n\nParser.prototype.parseText = function() {\n  var body = this.token.text;\n\n  while (this.peek().type === 'text') {\n    body += '\\n' + this.next().text;\n  }\n\n  return this.inline.output(body);\n};\n\n/**\n * Parse Current Token\n */\n\nParser.prototype.tok = function() {\n  switch (this.token.type) {\n    case 'space': {\n      return '';\n    }\n    case 'hr': {\n      return this.renderer.hr();\n    }\n    case 'heading': {\n      return this.renderer.heading(\n        this.inline.output(this.token.text),\n        this.token.depth,\n        this.token.text,\n        this.options\n      );\n    }\n    case 'code': {\n      return this.renderer.code(this.token.text,\n        this.token.lang,\n        this.token.escaped,\n        this.options);\n    }\n    case 'table': {\n      var header = ''\n        , body = ''\n        , i\n        , row\n        , cell\n        , flags\n        , j;\n\n      // header\n      cell = '';\n      for (i = 0; i < this.token.header.length; i++) {\n        flags = { header: true, align: this.token.align[i] };\n        cell += this.renderer.tablecell(\n          this.inline.output(this.token.header[i]),\n          { header: true, align: this.token.align[i] }\n        );\n      }\n      header += this.renderer.tablerow(cell);\n\n      for (i = 0; i < this.token.cells.length; i++) {\n        row = this.token.cells[i];\n\n        cell = '';\n        for (j = 0; j < row.length; j++) {\n          cell += this.renderer.tablecell(\n            this.inline.output(row[j]),\n            { header: false, align: this.token.align[j] }\n          );\n        }\n\n        body += this.renderer.tablerow(cell);\n      }\n      return this.renderer.table(header, body);\n    }\n    case 'blockquote_start': {\n      var body = '';\n\n      while (this.next().type !== 'blockquote_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.blockquote(body);\n    }\n    case 'list_start': {\n      var body = ''\n        , ordered = this.token.ordered;\n\n      while (this.next().type !== 'list_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.list(body, ordered);\n    }\n    case 'list_item_start': {\n      var body = '';\n\n      while (this.next().type !== 'list_item_end') {\n        body += this.token.type === 'text'\n          ? this.parseText()\n          : this.tok();\n      }\n\n      return this.renderer.listitem(body);\n    }\n    case 'loose_item_start': {\n      var body = '';\n\n      while (this.next().type !== 'list_item_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.listitem(body);\n    }\n    case 'html': {\n      var html = !this.token.pre && !this.options.pedantic\n        ? this.inline.output(this.token.text)\n        : this.token.text;\n      return this.renderer.html(html);\n    }\n    case 'paragraph': {\n      return this.renderer.paragraph(this.inline.output(this.token.text));\n    }\n    case 'text': {\n      return this.renderer.paragraph(this.parseText());\n    }\n  }\n};\n\n/**\n * Helpers\n */\n\nfunction escape(html, encode) {\n  return html\n    .replace(!encode ? /&(?!#?\\w+;)/g : /&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;');\n}\n\nfunction replace(regex, opt) {\n  regex = regex.source;\n  opt = opt || '';\n  return function self(name, val) {\n    if (!name) return new RegExp(regex, opt);\n    val = val.source || val;\n    val = val.replace(/(^|[^\\[])\\^/g, '$1');\n    regex = regex.replace(name, val);\n    return self;\n  };\n}\n\nfunction noop() {}\nnoop.exec = noop;\n\nfunction merge(obj) {\n  var i = 1\n    , target\n    , key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\n\n/**\n * Marked\n */\n\nfunction marked(src, opt, callback) {\n  if (callback || typeof opt === 'function') {\n    if (!callback) {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n\n    var highlight = opt.highlight\n      , tokens\n      , pending\n      , i = 0;\n\n    try {\n      tokens = Lexer.lex(src, opt)\n    } catch (e) {\n      return callback(e);\n    }\n\n    pending = tokens.length;\n\n    var done = function() {\n      var out, err;\n\n      try {\n        out = Parser.parse(tokens, opt);\n      } catch (e) {\n        err = e;\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!pending) return done();\n\n    for (; i < tokens.length; i++) {\n      (function(token) {\n        if (token.type !== 'code') {\n          return --pending || done();\n        }\n        return highlight(token.text, token.lang, function(err, code) {\n          if (code == null || code === token.text) {\n            return --pending || done();\n          }\n          token.text = code;\n          token.escaped = true;\n          --pending || done();\n        });\n      })(tokens[i]);\n    }\n\n    return;\n  }\n  try {\n    if (opt) opt = merge({}, marked.defaults, opt);\n    return Parser.parse(Lexer.lex(src, opt), opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/chjj/marked.';\n    if ((opt || marked.defaults).silent) {\n      return '<p>An error occured:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  return marked;\n};\n\nmarked.defaults = {\n  gfm: true,\n  tables: true,\n  breaks: false,\n  pedantic: false,\n  sanitize: false,\n  smartLists: false,\n  silent: false,\n  highlight: null,\n  langPrefix: 'lang-',\n  smartypants: false,\n  headerPrefix: '',\n  renderer: new Renderer\n};\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Renderer = Renderer;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.InlineLexer = InlineLexer;\nmarked.inlineLexer = InlineLexer.output;\n\nmarked.parse = marked;\n\nif (typeof exports === 'object') {\n  module.exports = marked;\n} else if (typeof define === 'function' && define.amd) {\n  define(function() { return marked; });\n} else {\n  this.marked = marked;\n}\n\n}).call(function() {\n  return this || (typeof window !== 'undefined' ? window : global);\n}());",
          "filepath": "data/repos/markedjs/marked-0.3/lib/marked.js",
          "repo": "markedjs/marked",
          "version": "0.3",
          "chunk_index": 1
        }
      },
      {
        "id": "eb6feda7-71f9-4875-9408-880bc778ae8c",
        "score": 0.015384615384615385,
        "payload": {
          "text": ";(function() {\n\nvar console = {}\n  , files = __TESTS__;\n\nconsole.log = function(text) {\n  var args = Array.prototype.slice.call(arguments, 1)\n    , i = 0;\n\n  text = text.replace(/%\\w/g, function() {\n    return args[i++] || '';\n  });\n\n  if (window.console) window.console.log(text);\n  document.body.innerHTML += '<pre>' + escape(text) + '</pre>';\n};\n\nif (!Object.keys) {\n  Object.keys = function(obj) {\n    var out = []\n      , key;\n\n    for (key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        out.push(key);\n      }\n    }\n\n    return out;\n  };\n}\n\nif (!Array.prototype.forEach) {\n  Array.prototype.forEach = function(callback, context) {\n    for (var i = 0; i < this.length; i++) {\n      callback.call(context || null, this[i], i, obj);\n    }\n  };\n}\n\nif (!String.prototype.trim) {\n  String.prototype.trim = function() {\n    return this.replace(/^\\s+|\\s+$/g, '');\n  };\n}\n\nfunction load() {\n  return files;\n}\n\nfunction escape(html, encode) {\n  return html\n    .replace(!encode ? /&(?!#?\\w+;)/g : /&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;');\n}\n\n(__MAIN__)();\n\n}).call(this);\n",
          "filepath": "data/repos/markedjs/marked-0.3/test/browser/test.js",
          "repo": "markedjs/marked",
          "version": "0.3",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1936",
    "model_patch": "diff --git a/src/Lexer.js b/src/Lexer.js\nindex 1234567..89abcde 100644\n--- a/src/Lexer.js\n+++ b/src/Lexer.js\n@@ -1,5 +1,6 @@\n class Lexer {\n   constructor(options) {\n+    this.lastToken = null;\n     this.tokens = [];\n     this.tokens.links = {};\n     this.options = options || {};\n@@ -20,6 +21,10 @@ class Lexer {\n     let token;\n     while (src) {\n       // Newline\n+      if (this.lastToken && this.lastToken.type === 'list_item' && /^\\n+/.test(src)) {\n+        this.tokens.push({ type: 'space', raw: '\\n' });\n+        src = src.replace(/^\\n+/, '');\n+      }\n       if (token = this.tokenizer.space(src)) {\n         src = src.substring(token.raw.length);\n         if (token.type) {\n@@ -32,6 +37,7 @@ class Lexer {\n         continue;\n       }\n \n+      this.lastToken = token;\n       // Code\n       if (token = this.tokenizer.code(src)) {\n         src = src.substring(token.raw.length);\ndiff --git a/test/Lexer-spec.js b/test/Lexer-spec.js\nindex 7654321..fedcba9 100644\n--- a/test/Lexer-spec.js\n+++ b/test/Lexer-spec.js\n@@ -1,5 +1,6 @@\n const Lexer = require('../../src/Lexer.js');\n \n+// Test case for space between list and paragraph\n function expectTokens({ md, options, tokens = [], links = {} }) {\n   const lexer = new Lexer(options);\n   const actual = lexer.lex(md);\n@@ -250,6 +251,22 @@ describe('Lexer', () => {\n           }\n         ]\n       });\n+    });\n+\n+    it('space between list and paragraph', () => {\n+      expectTokens({\n+        md: '- item 1\\n- item 2\\n\\nparagraph',\n+        tokens: [\n+          {\n+            type: 'list',\n+            raw: '- item 1\\n- item 2\\n',\n+            ordered: false,\n+            start: '',\n+            loose: false,\n+            items: [\n+              { type: 'list_item', raw: '- item 1', text: 'item 1', tokens: [{ type: 'text', raw: 'item 1', text: 'item 1' }] },\n+              { type: 'list_item', raw: '- item 2\\n', text: 'item 2', tokens: [{ type: 'text', raw: 'item 2', text: 'item 2' }] }\n+            ]\n+          },\n+          { type: 'space', raw: '\\n\\n' },\n+          { type: 'paragraph', raw: 'paragraph', text: 'paragraph', tokens: [{ type: 'text', raw: 'paragraph', text: 'paragraph' }] }\n+        ]\n       });\n     });\n   });",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 149.16,
      "issue_embedding_time_ms": 149.16,
      "retrieval_time_ms_splade": 10.61,
      "retrieval_time_ms": 10.61,
      "total_retrieval_time_ms": 159.77,
      "generation_time_ms": 6905.99,
      "total_io_time_ms": 7065.76,
      "input_total_token_limit": null,
      "issue_text_tokens": 271,
      "vlm_tokens": 0,
      "retrieved_tokens": 10045,
      "prompt_template_tokens": 515,
      "total_input_prompt_tokens": 10831,
      "output_generated_tokens": 653,
      "total_io_tokens": 11484,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nLexer: Space after list appears in last list_item\\nmarked 2.0.0\\r\\n\\r\\nSorry if it is not a bug, but a feature... \\r\\n\\r\\nIn a semantic tree (marked.lexer) an empty space between List and Paragraph appears in a last `list_item`. It looks unlogical. \\r\\n\\r\\nWhile traverse the tree, you should write additional code for exclude this empty space from `list_item`. And then write code to add space between List and Paragraph. \\r\\n\\r\\nExpected: Space node should be at the first level of the semantic tree, between the List and the next Paragraph  \\r\\n\\r\\nfor reproduce, please visit: \\r\\nhttps://codesandbox.io/s/markedjs-klt1h?file=/src/marked8lexer.js\\r\\n\\r\\n```javascript\\r\\nimport marked from \\\"marked\\\";\\r\\n\\r\\nconst markdownText = `This is paragraph \\r\\n\\r\\nthis is a list with 3 items: \\r\\n\\r\\n- item one \\r\\n- item two \\r\\n- item tree \\r\\n\\r\\nHere is another paragrah.`;\\r\\n\\r\\nconst lexerArray = marked.lexer(markdownText);\\r\\n\\r\\nconsole.log(lexerArray);\\r\\n```\\r\\n![Screenshot from 2021-02-15 19-40-18](https://user-images.githubusercontent.com/1222611/107973010-b8869400-6fc5-11eb-839b-ac9d66c0500d.png)\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of update-specs.js]\\nconst fetch = require('node-fetch');\\nconst cheerio = require('cheerio');\\nconst marked = require('../');\\nconst htmlDiffer = require('./helpers/html-differ.js');\\nconst fs = require('fs');\\nconst path = require('path');\\n\\nfunction removeFiles(dir) {\\n  fs.readdirSync(dir).forEach(file => {\\n    fs.unlinkSync(path.join(dir, file));\\n  });\\n}\\n\\nasync function updateCommonmark(dir, options) {\\n  try {\\n    const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\\n    const pkg = await res.json();\\n    const version = pkg.version.replace(/^(\\\\d+\\\\.\\\\d+).*$/, '$1');\\n    const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\\n    const specs = await res2.json();\\n    specs.forEach(spec => {\\n      const html = marked(spec.markdown, options);\\n      if (!htmlDiffer.isEqual(html, spec.html)) {\\n        spec.shouldFail = true;\\n      }\\n    });\\n    fs.writeFileSync(path.resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\\\n');\\n    console.log(`Saved CommonMark v${version} specs`);\\n  } catch (ex) {\\n    console.log(ex);\\n  }\\n}\\n\\nasync function updateGfm(dir) {\\n  try {\\n    const res = await fetch('https://github.github.com/gfm/');\\n    const html = await res.text();\\n    const $ = cheerio.load(html);\\n    const version = $('.version').text().match(/\\\\d+\\\\.\\\\d+/)[0];\\n    if (!version) {\\n      throw new Error('No version found');\\n    }\\n    const specs = [];\\n    $('.extension').each((i, ext) => {\\n      const section = $('.definition', ext).text().trim().replace(/^\\\\d+\\\\.\\\\d+(.*?) \\\\(extension\\\\)[\\\\s\\\\S]*$/, '$1');\\n      $('.example', ext).each((j, exa) => {\\n        const example = +$(exa).attr('id').replace(/\\\\D/g, '');\\n        const markdown = $('.language-markdown', exa).text().trim();\\n        const html = $('.language-html', exa).text().trim();\\n        specs.push({\\n          section: `[extension] ${section}`,\\n          html,\\n          markdown,\\n          example\\n        });\\n      });\\n    });\\n\\n    specs.forEach(spec => {\\n      const html = marked(spec.markdown, { gfm: true, pedantic: false });\\n      if (!htmlDiffer.isEqual(html, spec.html)) {\\n        spec.shouldFail = true;\\n      }\\n    });\\n    fs.writeFileSync(path.resolve(dir, `./gfm.${version}.json`), JSON.stringify(specs, null, 2) + '\\\\n');\\n    console.log(`Saved GFM v${version} specs.`);\\n  } catch (ex) {\\n    console.log(ex);\\n  }\\n}\\n\\nconst commonmarkDir = path.resolve(__dirname, './specs/commonmark');\\nconst gfmDir = path.resolve(__dirname, './specs/gfm');\\nremoveFiles(commonmarkDir);\\nremoveFiles(gfmDir);\\nupdateCommonmark(commonmarkDir, { gfm: false, pedantic: false, headerIds: false });\\nupdateCommonmark(gfmDir, { gfm: true, pedantic: false, headerIds: false });\\nupdateGfm(gfmDir);\\n\\n[end of update-specs.js]\\n[start of Lexer-spec.js]\\nconst Lexer = require('../../src/Lexer.js');\\n\\nfunction expectTokens({ md, options, tokens = [], links = {} }) {\\n  const lexer = new Lexer(options);\\n  const actual = lexer.lex(md);\\n  const expected = tokens;\\n  expected.links = links;\\n  // console.log(JSON.stringify(actual, null, 2));\\n  expect(actual).toEqual(expected);\\n}\\n\\nfunction expectInlineTokens({ md, options, tokens = jasmine.any(Array), links = {} }) {\\n  const lexer = new Lexer(options);\\n  lexer.tokens.links = links;\\n  const outTokens = [];\\n  lexer.inlineTokens(md, outTokens);\\n  expect(outTokens).toEqual(tokens);\\n}\\n\\nfunction expectInline({ token, options, tokens }) {\\n  const lexer = new Lexer(options);\\n  lexer.inline([token]);\\n  expect(token.tokens).toEqual(tokens);\\n}\\n\\ndescribe('Lexer', () => {\\n  describe('paragraph', () => {\\n    it('space between paragraphs', () => {\\n      expectTokens({\\n        md: 'paragraph 1\\\\n\\\\nparagraph 2',\\n        tokens: [\\n          {\\n            type: 'paragraph',\\n            raw: 'paragraph 1',\\n            text: 'paragraph 1',\\n            tokens: [{ type: 'text', raw: 'paragraph 1', text: 'paragraph 1' }]\\n          },\\n          { type: 'space', raw: '\\\\n\\\\n' },\\n          {\\n            type: 'paragraph',\\n            raw: 'paragraph 2',\\n            text: 'paragraph 2',\\n            tokens: [{ type: 'text', raw: 'paragraph 2', text: 'paragraph 2' }]\\n          }\\n        ]\\n      });\\n    });\\n  });\\n\\n  describe('code', () => {\\n    it('indented code', () => {\\n      expectTokens({\\n        md: '    code',\\n        tokens: [\\n          { type: 'code', raw: '    code', text: 'code', codeBlockStyle: 'indented' }\\n        ]\\n      });\\n    });\\n\\n    it('fenced code', () => {\\n      expectTokens({\\n        md: '```\\\\ncode\\\\n```',\\n        tokens: [\\n          { type: 'code', raw: '```\\\\ncode\\\\n```', text: 'code', lang: '' }\\n        ]\\n      });\\n    });\\n\\n    it('fenced code lang', () => {\\n      expectTokens({\\n        md: '```text\\\\ncode\\\\n```',\\n        tokens: [\\n          { type: 'code', raw: '```text\\\\ncode\\\\n```', text: 'code', lang: 'text' }\\n        ]\\n      });\\n    });\\n  });\\n\\n  describe('headings', () => {\\n    it('depth', () => {\\n      expectTokens({\\n        md: `\\n# heading 1\\n\\n## heading 2\\n\\n### heading 3\\n\\n#### heading 4\\n\\n##### heading 5\\n\\n###### heading 6\\n\\nlheading 1\\n==========\\n\\nlheading 2\\n----------\\n`,\\n        tokens: [\\n          {\\n            type: 'heading',\\n            raw: '# heading 1\\\\n\\\\n',\\n            depth: 1,\\n            text: 'heading 1',\\n            tokens: [{ type: 'text', raw: 'heading 1', text: 'heading 1' }]\\n          },\\n          {\\n            type: 'heading',\\n            raw: '## heading 2\\\\n\\\\n',\\n            depth: 2,\\n            text: 'heading 2',\\n            tokens: [{ type: 'text', raw: 'heading 2', text: 'heading 2' }]\\n          },\\n          {\\n            type: 'heading',\\n            raw: '### heading 3\\\\n\\\\n',\\n            depth: 3,\\n            text: 'heading 3',\\n            tokens: [{ type: 'text', raw: 'heading 3', text: 'heading 3' }]\\n          },\\n          {\\n            type: 'heading',\\n            raw: '#### heading 4\\\\n\\\\n',\\n            depth: 4,\\n            text: 'heading 4',\\n            tokens: [{ type: 'text', raw: 'heading 4', text: 'heading 4' }]\\n          },\\n          {\\n            type: 'heading',\\n            raw: '##### heading 5\\\\n\\\\n',\\n            depth: 5,\\n            text: 'heading 5',\\n            tokens: [{ type: 'text', raw: 'heading 5', text: 'heading 5' }]\\n          },\\n          {\\n            type: 'heading',\\n            raw: '###### heading 6\\\\n\\\\n',\\n            depth: 6,\\n            text: 'heading 6',\\n            tokens: [{ type: 'text', raw: 'heading 6', text: 'heading 6' }]\\n          },\\n          {\\n            type: 'heading',\\n            raw: 'lheading 1\\\\n==========\\\\n\\\\n',\\n            depth: 1,\\n            text: 'lheading 1',\\n            tokens: [{ type: 'text', raw: 'lheading 1', text: 'lheading 1' }]\\n          },\\n          {\\n            type: 'heading',\\n            raw: 'lheading 2\\\\n----------\\\\n',\\n            depth: 2,\\n            text: 'lheading 2',\\n            tokens: [{ type: 'text', raw: 'lheading 2', text: 'lheading 2' }]\\n          }\\n        ]\\n      });\\n    });\\n\\n    it('should not be heading if depth > 6', () => {\\n      expectTokens({\\n        md: '####### heading 7',\\n        tokens: [{\\n          type: 'paragraph',\\n          raw: '####### heading 7',\\n          text: '####### heading 7',\\n          tokens: [{ type: 'text', raw: '####### heading 7', text: '####### heading 7' }]\\n        }]\\n      });\\n    });\\n  });\\n\\n  describe('table', () => {\\n    it('pipe table', () => {\\n      expectTokens({\\n        md: `\\n| a | b |\\n|---|---|\\n| 1 | 2 |\\n`,\\n        tokens: [{\\n          type: 'table',\\n          header: ['a', 'b'],\\n          align: [null, null],\\n          cells: [['1', '2']],\\n          raw: '| a | b |\\\\n|---|---|\\\\n| 1 | 2 |\\\\n',\\n          tokens: {\\n            header: [\\n              [{ type: 'text', raw: 'a', text: 'a' }],\\n              [{ type: 'text', raw: 'b', text: 'b' }]\\n            ],\\n            cells: [[\\n              [{ type: 'text', raw: '1', text: '1' }],\\n              [{ type: 'text', raw: '2', text: '2' }]\\n            ]]\\n          }\\n        }]\\n      });\\n    });\\n\\n    it('align table', () => {\\n      expectTokens({\\n        md: `\\n| a | b | c |\\n|:--|:-:|--:|\\n| 1 | 2 | 3 |\\n`,\\n        tokens: [{\\n          type: 'table',\\n          header: ['a', 'b', 'c'],\\n          align: ['left', 'center', 'right'],\\n          cells: [['1', '2', '3']],\\n          raw: '| a | b | c |\\\\n|:--|:-:|--:|\\\\n| 1 | 2 | 3 |\\\\n',\\n          tokens: {\\n            header: [\\n              [{ type: 'text', raw: 'a', text: 'a' }],\\n              [{ type: 'text', raw: 'b', text: 'b' }],\\n              [{ type: 'text', raw: 'c', text: 'c' }]\\n            ],\\n            cells: [[\\n              [{ type: 'text', raw: '1', text: '1' }],\\n              [{ type: 'text', raw: '2', text: '2' }],\\n              [{ type: 'text', raw: '3', text: '3' }]\\n            ]]\\n          }\\n        }]\\n      });\\n    });\\n\\n    it('no pipe table', () => {\\n      expectTokens({\\n        md: `\\na | b\\n--|--\\n1 | 2\\n`,\\n        tokens: [{\\n          type: 'table',\\n          header: ['a', 'b'],\\n          align: [null, null],\\n          cells: [['1', '2']],\\n          raw: 'a | b\\\\n--|--\\\\n1 | 2\\\\n',\\n          tokens: {\\n            header: [\\n              [{ type: 'text', raw: 'a', text: 'a' }],\\n              [{ type: 'text', raw: 'b', text: 'b' }]\\n            ],\\n            cells: [[\\n              [{ type: 'text', raw: '1', text: '1' }],\\n              [{ type: 'text', raw: '2', text: '2' }]\\n            ]]\\n          }\\n        }]\\n      });\\n    });\\n  });\\n\\n  describe('hr', () => {\\n    it('hr', () => {\\n      expectTokens({\\n        md: '---',\\n        tokens: [\\n          { type: 'hr', raw: '---' }\\n        ]\\n      });\\n    });\\n  });\\n\\n  describe('blockquote', () => {\\n    it('start, inner-tokens, end', () => {\\n      expectTokens({\\n        md: '> blockquote',\\n        tokens: [\\n          {\\n            type: 'blockquote',\\n            raw: '> blockquote',\\n            text: 'blockquote',\\n            tokens: [{\\n              type: 'paragraph',\\n              raw: 'blockquote',\\n              text: 'blockquote',\\n              tokens: [\\n                { type: 'text', raw: 'blockquote', text: 'blockquote' }\\n              ]\\n            }]\\n          }\\n        ]\\n      });\\n    });\\n  });\\n\\n  describe('list', () => {\\n    it('unordered', () => {\\n      expectTokens({\\n        md: `\\n- item 1\\n- item 2\\n`,\\n        tokens: [\\n          {\\n            type: 'list',\\n            raw: '- item 1\\\\n- item 2\\\\n',\\n            ordered: false,\\n            start: '',\\n            loose: false,\\n            items: [\\n              {\\n                type: 'list_item',\\n                raw: '- item 1',\\n                task: false,\\n                checked: undefined,\\n                loose: false,\\n                text: 'item 1',\\n                tokens: [{\\n                  type: 'text',\\n                  raw: 'item 1',\\n                  text: 'item 1',\\n                  tokens: [{ type: 'text', raw: 'item 1', text: 'item 1' }]\\n                }]\\n              },\\n              {\\n                type: 'list_item',\\n                raw: '- item 2\\\\n',\\n                task: false,\\n                checked: undefined,\\n                loose: false,\\n                text: 'item 2\\\\n',\\n                tokens: [{\\n                  type: 'text',\\n                  raw: 'item 2',\\n                  text: 'item 2',\\n                  tokens: [{ type: 'text', raw: 'item 2', text: 'item 2' }]\\n                }]\\n              }\\n            ]\\n          }\\n        ]\\n      });\\n    });\\n\\n    it('ordered', () => {\\n      expectTokens({\\n        md: `\\n1. item 1\\n2. item 2\\n`,\\n        tokens: jasmine.arrayContaining([\\n          jasmine.objectContaining({\\n            type: 'list',\\n            raw: '1. item 1\\\\n2. item 2\\\\n',\\n            ordered: true,\\n            start: 1,\\n            items: [\\n              jasmine.objectContaining({\\n                raw: '1. item 1'\\n              }),\\n              jasmine.objectContaining({\\n                raw: '2. item 2\\\\n'\\n              })\\n            ]\\n          })\\n        ])\\n      });\\n    });\\n\\n    it('ordered with parenthesis', () => {\\n      expectTokens({\\n        md: `\\n1) item 1\\n2) item 2\\n`,\\n        tokens: jasmine.arrayContaining([\\n          jasmine.objectContaining({\\n            type: 'list',\\n            raw: '1) item 1\\\\n2) item 2\\\\n',\\n            ordered: true,\\n            start: 1,\\n            items: [\\n              jasmine.objectContaining({\\n                raw: '1) item 1'\\n              }),\\n              jasmine.objectContaining({\\n                raw: '2) item 2\\\\n'\\n              })\\n            ]\\n          })\\n        ])\\n      });\\n    });\\n\\n    it('start', () => {\\n      expectTokens({\\n        md: `\\n2. item 1\\n3. item 2\\n`,\\n        tokens: jasmine.arrayContaining([\\n          jasmine.objectContaining({\\n            type: 'list',\\n            raw: '2. item 1\\\\n3. item 2\\\\n',\\n            ordered: true,\\n            start: 2,\\n            items: [\\n              jasmine.objectContaining({\\n                raw: '2. item 1'\\n              }),\\n              jasmine.objectContaining({\\n                raw: '3. item 2\\\\n'\\n              })\\n            ]\\n          })\\n        ])\\n      });\\n    });\\n\\n    it('loose', () => {\\n      expectTokens({\\n        md: `\\n- item 1\\n\\n- item 2\\n`,\\n        tokens: jasmine.arrayContaining([\\n          jasmine.objectContaining({\\n            type: 'list',\\n            raw: '- item 1\\\\n\\\\n- item 2\\\\n',\\n            loose: true\\n          })\\n        ])\\n      });\\n    });\\n\\n    it('task', () => {\\n      expectTokens({\\n        md: `\\n- [ ] item 1\\n- [x] item 2\\n`,\\n        tokens: jasmine.arrayContaining([\\n          jasmine.objectContaining({\\n            type: 'list',\\n            raw: '- [ ] item 1\\\\n- [x] item 2\\\\n',\\n            items: [\\n              jasmine.objectContaining({\\n                raw: '- [ ] item 1',\\n                task: true,\\n                checked: false\\n              }),\\n              jasmine.objectContaining({\\n                raw: '- [x] item 2\\\\n',\\n                task: true,\\n                checked: true\\n              })\\n            ]\\n          })\\n        ])\\n      });\\n    });\\n  });\\n\\n  describe('html', () => {\\n    it('div', () => {\\n      expectTokens({\\n        md: '<div>html</div>',\\n        tokens: [\\n          {\\n            type: 'html',\\n            raw: '<div>html</div>',\\n            pre: false,\\n            text: '<div>html</div>'\\n          }\\n        ]\\n      });\\n    });\\n\\n    it('pre', () => {\\n      expectTokens({\\n        md: '<pre>html</pre>',\\n        tokens: [\\n          {\\n            type: 'html',\\n            raw: '<pre>html</pre>',\\n            pre: true,\\n            text: '<pre>html</pre>'\\n          }\\n        ]\\n      });\\n    });\\n\\n    it('sanitize', () => {\\n      expectTokens({\\n        md: '<div>html</div>',\\n        options: { sanitize: true },\\n        tokens: [\\n          {\\n            type: 'paragraph',\\n            raw: '<div>html</div>',\\n            pre: false,\\n            text: '&lt;div&gt;html&lt;/div&gt;',\\n            tokens: [{\\n              type: 'text',\\n              raw: '&lt;div&gt;html&lt;/div&gt;',\\n              text: '&lt;div&gt;html&lt;/div&gt;'\\n            }]\\n          }\\n        ]\\n      });\\n    });\\n  });\\n\\n  describe('def', () => {\\n    it('link', () => {\\n      expectTokens({\\n        md: '[link]: https://example.com',\\n        links: {\\n          link: { href: 'https://example.com', title: undefined }\\n        }\\n      });\\n    });\\n\\n    it('title', () => {\\n      expectTokens({\\n        md: '[link]: https://example.com \\\"title\\\"',\\n        links: {\\n          link: { href: 'https://example.com', title: 'title' }\\n        }\\n      });\\n    });\\n  });\\n\\n  describe('inline', () => {\\n    describe('inline', () => {\\n      it('paragraph', () => {\\n        expectInline({\\n          token: { type: 'paragraph', text: 'text' },\\n          tokens: [\\n            { type: 'text', raw: 'text', text: 'text' }\\n          ]\\n        });\\n      });\\n\\n      it('text', () => {\\n        expectInline({\\n          token: { type: 'text', text: 'text' },\\n          tokens: [\\n            { type: 'text', raw: 'text', text: 'text' }\\n          ]\\n        });\\n      });\\n\\n      it('heading', () => {\\n        expectInline({\\n          token: { type: 'heading', text: 'text' },\\n          tokens: [\\n            { type: 'text', raw: 'text', text: 'text' }\\n          ]\\n        });\\n      });\\n\\n      it('table', () => {\\n        expectInline({\\n          token: {\\n            type: 'table',\\n            header: ['a', 'b'],\\n            align: [null, null],\\n            cells: [['1', '2']]\\n          },\\n          tokens: {\\n            header: [\\n              [{ type: 'text', raw: 'a', text: 'a' }],\\n              [{ type: 'text', raw: 'b', text: 'b' }]\\n            ],\\n            cells: [\\n              [\\n                [{ type: 'text', raw: '1', text: '1' }],\\n                [{ type: 'text', raw: '2', text: '2' }]\\n              ]\\n            ]\\n          }\\n        });\\n      });\\n\\n      it('code no inline tokens', () => {\\n        expectInline({\\n          token: { type: 'code', text: 'code' },\\n          tokens: undefined\\n        });\\n      });\\n    });\\n\\n    describe('inlineTokens', () => {\\n      it('escape', () => {\\n        expectInlineTokens({\\n          md: '\\\\\\\\>',\\n          tokens: [\\n            { type: 'escape', raw: '\\\\\\\\>', text: '&gt;' }\\n          ]\\n        });\\n      });\\n\\n      it('html', () => {\\n        expectInlineTokens({\\n          md: '<div>html</div>',\\n          tokens: [\\n            { type: 'html', raw: '<div>', inLink: false, inRawBlock: false, text: '<div>' },\\n            { type: 'text', raw: 'html', text: 'html' },\\n            { type: 'html', raw: '</div>', inLink: false, inRawBlock: false, text: '</div>' }\\n          ]\\n        });\\n      });\\n\\n      it('html sanitize', () => {\\n        expectInlineTokens({\\n          md: '<div>html</div>',\\n          options: { sanitize: true },\\n          tokens: [\\n            { type: 'text', raw: '<div>html</div>', inLink: false, inRawBlock: false, text: '&lt;div&gt;html&lt;/div&gt;' }\\n          ]\\n        });\\n      });\\n\\n      it('link', () => {\\n        expectInlineTokens({\\n          md: '[link](https://example.com)',\\n          tokens: [\\n            {\\n              type: 'link',\\n              raw: '[link](https://example.com)',\\n              href: 'https://example.com',\\n              title: null,\\n              text: 'link',\\n              tokens: [\\n                { type: 'text', raw: 'link', text: 'link' }\\n              ]\\n            }\\n          ]\\n        });\\n      });\\n\\n      it('link title', () => {\\n        expectInlineTokens({\\n          md: '[link](https://example.com \\\"title\\\")',\\n          tokens: [\\n            {\\n              type: 'link',\\n              raw: '[link](https://example.com \\\"title\\\")',\\n              href: 'https://example.com',\\n              title: 'title',\\n              text: 'link',\\n              tokens: [\\n                { type: 'text', raw: 'link', text: 'link' }\\n              ]\\n            }\\n          ]\\n        });\\n      });\\n\\n      it('image', () => {\\n        expectInlineTokens({\\n          md: '![image](https://example.com/image.png)',\\n          tokens: [\\n            {\\n              type: 'image',\\n              raw: '![image](https://example.com/image.png)',\\n              text: 'image',\\n              href: 'https://example.com/image.png',\\n              title: null\\n            }\\n          ]\\n        });\\n      });\\n\\n      it('image title', () => {\\n        expectInlineTokens({\\n          md: '![image](https://example.com/image.png \\\"title\\\")',\\n          tokens: [\\n            {\\n              type: 'image',\\n              raw: '![image](https://example.com/image.png \\\"title\\\")',\\n              text: 'image',\\n              href: 'https://example.com/image.png',\\n              title: 'title'\\n            }\\n          ]\\n        });\\n      });\\n\\n      describe('reflink', () => {\\n        it('reflink', () => {\\n          expectInlineTokens({\\n            md: '[link][]',\\n            links: {\\n              link: { href: 'https://example.com', title: 'title' }\\n            },\\n            tokens: [\\n              {\\n                type: 'link',\\n                raw: '[link][]',\\n                href: 'https://example.com',\\n                title: 'title',\\n                text: 'link',\\n                tokens: [{\\n                  type: 'text',\\n                  raw: 'link',\\n                  text: 'link'\\n                }]\\n              }\\n            ]\\n          });\\n        });\\n\\n        it('nolink', () => {\\n          expectInlineTokens({\\n            md: '[link]',\\n            links: {\\n              link: { href: 'https://example.com', title: 'title' }\\n            },\\n            tokens: [\\n              {\\n                type: 'link',\\n                raw: '[link]',\\n                href: 'https://example.com',\\n                title: 'title',\\n                text: 'link',\\n                tokens: [{\\n                  type: 'text',\\n                  raw: 'link',\\n                  text: 'link'\\n                }]\\n              }\\n            ]\\n          });\\n        });\\n\\n        it('no def', () => {\\n          expectInlineTokens({\\n            md: '[link]',\\n            tokens: [\\n              { type: 'text', raw: '[link]', text: '[link]' }\\n            ]\\n          });\\n        });\\n      });\\n\\n      it('strong', () => {\\n        expectInlineTokens({\\n          md: '**strong**',\\n          tokens: [\\n            {\\n              type: 'strong',\\n              raw: '**strong**',\\n              text: 'strong',\\n              tokens: [\\n                { type: 'text', raw: 'strong', text: 'strong' }\\n              ]\\n            }\\n          ]\\n        });\\n      });\\n\\n      it('em', () => {\\n        expectInlineTokens({\\n          md: '*em*',\\n          tokens: [\\n            {\\n              type: 'em',\\n              raw: '*em*',\\n              text: 'em',\\n              tokens: [\\n                { type: 'text', raw: 'em', text: 'em' }\\n              ]\\n            }\\n          ]\\n        });\\n      });\\n\\n      describe('codespan', () => {\\n        it('code', () => {\\n          expectInlineTokens({\\n            md: '`code`',\\n            tokens: [\\n              { type: 'codespan', raw: '`code`', text: 'code' }\\n            ]\\n          });\\n        });\\n\\n        it('only spaces not stripped', () => {\\n          expectInlineTokens({\\n            md: '`   `',\\n            tokens: [\\n              { type: 'codespan', raw: '`   `', text: '   ' }\\n            ]\\n          });\\n        });\\n\\n        it('beginning space only not stripped', () => {\\n          expectInlineTokens({\\n            md: '` a`',\\n            tokens: [\\n              { type: 'codespan', raw: '` a`', text: ' a' }\\n            ]\\n          });\\n        });\\n\\n        it('end space only not stripped', () => {\\n          expectInlineTokens({\\n            md: '`a `',\\n            tokens: [\\n              { type: 'codespan', raw: '`a `', text: 'a ' }\\n            ]\\n          });\\n        });\\n\\n        it('begin and end spaces are stripped', () => {\\n          expectInlineTokens({\\n            md: '` a `',\\n            tokens: [\\n              { type: 'codespan', raw: '` a `', text: 'a' }\\n            ]\\n          });\\n        });\\n\\n        it('begin and end newlines are stripped', () => {\\n          expectInlineTokens({\\n            md: '`\\\\na\\\\n`',\\n            tokens: [\\n              { type: 'codespan', raw: '`\\\\na\\\\n`', text: 'a' }\\n            ]\\n          });\\n        });\\n\\n        it('begin and end tabs are not stripped', () => {\\n          expectInlineTokens({\\n            md: '`\\\\ta\\\\t`',\\n            tokens: [\\n              { type: 'codespan', raw: '`\\\\ta\\\\t`', text: '\\\\ta\\\\t' }\\n            ]\\n          });\\n        });\\n\\n        it('begin and end newlines', () => {\\n          expectInlineTokens({\\n            md: '`\\\\na\\\\n`',\\n            tokens: [\\n              { type: 'codespan', raw: '`\\\\na\\\\n`', text: 'a' }\\n            ]\\n          });\\n        });\\n\\n        it('begin and end multiple spaces only one stripped', () => {\\n          expectInlineTokens({\\n            md: '`  a  `',\\n            tokens: [\\n              { type: 'codespan', raw: '`  a  `', text: ' a ' }\\n            ]\\n          });\\n        });\\n\\n        it('newline to space', () => {\\n          expectInlineTokens({\\n            md: '`a\\\\nb`',\\n            tokens: [\\n              { type: 'codespan', raw: '`a\\\\nb`', text: 'a b' }\\n            ]\\n          });\\n        });\\n      });\\n\\n      it('br', () => {\\n        expectInlineTokens({\\n          md: 'a\\\\nb',\\n          options: { gfm: true, breaks: true },\\n          tokens: jasmine.arrayContaining([\\n            { type: 'br', raw: '\\\\n' }\\n          ])\\n        });\\n      });\\n\\n      it('del', () => {\\n        expectInlineTokens({\\n          md: '~~del~~',\\n          tokens: [\\n            {\\n              type: 'del',\\n              raw: '~~del~~',\\n              text: 'del',\\n              tokens: [\\n                { type: 'text', raw: 'del', text: 'del' }\\n              ]\\n            }\\n          ]\\n        });\\n      });\\n\\n      describe('url', () => {\\n        it('autolink', () => {\\n          expectInlineTokens({\\n            md: '<https://example.com>',\\n            tokens: [\\n              {\\n                type: 'link',\\n                raw: '<https://example.com>',\\n                text: 'https://example.com',\\n                href: 'https://example.com',\\n                tokens: [\\n                  { type: 'text', raw: 'https://example.com', text: 'https://example.com' }\\n                ]\\n              }\\n            ]\\n          });\\n        });\\n\\n        it('autolink email', () => {\\n          expectInlineTokens({\\n            md: '<test@example.com>',\\n            options: { mangle: false },\\n            tokens: [\\n              {\\n                type: 'link',\\n                raw: '<test@example.com>',\\n                text: 'test@example.com',\\n                href: 'mailto:test@example.com',\\n                tokens: [\\n                  { type: 'text', raw: 'test@example.com', text: 'test@example.com' }\\n                ]\\n              }\\n            ]\\n          });\\n        });\\n\\n        it('autolink mangle email', () => {\\n          expectInlineTokens({\\n            md: '<test@example.com>',\\n            options: { mangle: true },\\n            tokens: [\\n              {\\n                type: 'link',\\n                raw: '<test@example.com>',\\n                text: jasmine.stringMatching(/^(&#x?[0-9a-f]+;)+$/),\\n                href: jasmine.stringMatching(/^mailto:(&#x?[0-9a-f]+;)+$/),\\n                tokens: [\\n                  {\\n                    type: 'text',\\n                    raw: jasmine.stringMatching(/^(&#x?[0-9a-f]+;)+$/),\\n                    text: jasmine.stringMatching(/^(&#x?[0-9a-f]+;)+$/)\\n                  }\\n                ]\\n              }\\n            ]\\n          });\\n        });\\n\\n        it('url', () => {\\n          expectInlineTokens({\\n            md: 'https://example.com',\\n            tokens: [\\n              {\\n                type: 'link',\\n                raw: 'https://example.com',\\n                text: 'https://example.com',\\n                href: 'https://example.com',\\n                tokens: [\\n                  { type: 'text', raw: 'https://example.com', text: 'https://example.com' }\\n                ]\\n              }\\n            ]\\n          });\\n        });\\n\\n        it('url email', () => {\\n          expectInlineTokens({\\n            md: 'test@example.com',\\n            options: { gfm: true, mangle: false },\\n            tokens: [\\n              {\\n                type: 'link',\\n                raw: 'test@example.com',\\n                text: 'test@example.com',\\n                href: 'mailto:test@example.com',\\n                tokens: [\\n                  { type: 'text', raw: 'test@example.com', text: 'test@example.com' }\\n                ]\\n              }\\n            ]\\n          });\\n        });\\n\\n        it('url mangle email', () => {\\n          expectInlineTokens({\\n            md: 'test@example.com',\\n            options: { gfm: true, mangle: true },\\n            tokens: [\\n              {\\n                type: 'link',\\n                raw: 'test@example.com',\\n                text: jasmine.stringMatching(/^(&#x?[0-9a-f]+;)+$/),\\n                href: jasmine.stringMatching(/^mailto:(&#x?[0-9a-f]+;)+$/),\\n                tokens: [\\n                  {\\n                    type: 'text',\\n                    raw: jasmine.stringMatching(/^(&#x?[0-9a-f]+;)+$/),\\n                    text: jasmine.stringMatching(/^(&#x?[0-9a-f]+;)+$/)\\n                  }\\n                ]\\n              }\\n            ]\\n          });\\n        });\\n      });\\n\\n      it('text', () => {\\n        expectInlineTokens({\\n          md: 'text',\\n          tokens: [\\n            {\\n              type: 'text',\\n              raw: 'text',\\n              text: 'text'\\n            }\\n          ]\\n        });\\n      });\\n\\n      describe('smartypants', () => {\\n        it('single quotes', () => {\\n          expectInlineTokens({\\n            md: \\\"'single quotes'\\\",\\n            options: { smartypants: true },\\n            tokens: [\\n              {\\n                type: 'text',\\n                raw: \\\"'single quotes'\\\",\\n                text: '\\u2018single quotes\\u2019'\\n              }\\n            ]\\n          });\\n        });\\n\\n        it('double quotes', () => {\\n          expectInlineTokens({\\n            md: '\\\"double quotes\\\"',\\n            options: { smartypants: true },\\n            tokens: [\\n              {\\n                type: 'text',\\n                raw: '\\\"double quotes\\\"',\\n                text: '\\u201cdouble quotes\\u201d'\\n              }\\n            ]\\n          });\\n        });\\n\\n        it('ellipses', () => {\\n          expectInlineTokens({\\n            md: 'ellipses...',\\n            options: { smartypants: true },\\n            tokens: [\\n              {\\n                type: 'text',\\n                raw: 'ellipses...',\\n                text: 'ellipses\\u2026'\\n              }\\n            ]\\n          });\\n        });\\n\\n        it('en-dash', () => {\\n          expectInlineTokens({\\n            md: 'en--dash',\\n            options: { smartypants: true },\\n            tokens: [\\n              {\\n                type: 'text',\\n                raw: 'en--dash',\\n                text: 'en\\u2013dash'\\n              }\\n            ]\\n          });\\n        });\\n\\n        it('em-dash', () => {\\n          expectInlineTokens({\\n            md: 'em---dash',\\n            options: { smartypants: true },\\n            tokens: [\\n              {\\n                type: 'text',\\n                raw: 'em---dash',\\n                text: 'em\\u2014dash'\\n              }\\n            ]\\n          });\\n        });\\n      });\\n    });\\n  });\\n});\\n\\n[end of Lexer-spec.js]\\n[start of USING_PRO.md]\\n## Extending Marked\\n\\nTo champion the single-responsibility and open/closed principles, we have tried to make it relatively painless to extend marked. If you are looking to add custom functionality, this is the place to start.\\n\\n<h2 id=\\\"use\\\">marked.use()</h2>\\n\\n`marked.use(options)` is the recommended way to extend marked. The options object can contain any [option](/using_advanced#options) available in marked.\\n\\nThe `renderer` and `tokenizer` options can be an object with functions that will be merged into the `renderer` and `tokenizer` respectively.\\n\\nThe `renderer` and `tokenizer` functions can return false to fallback to the previous function.\\n\\nThe `walkTokens` option can be a function that will be called with every token before rendering. When calling `use` multiple times with different `walkTokens` functions each function will be called in the **reverse** order in which they were assigned.\\n\\nAll other options will overwrite previously set options.\\n\\n<h2 id=\\\"renderer\\\">The renderer</h2>\\n\\nThe renderer defines the output of the parser.\\n\\n**Example:** Overriding default heading token by adding an embedded anchor tag like on GitHub.\\n\\n```js\\n// Create reference instance\\nconst marked = require('marked');\\n\\n// Override function\\nconst renderer = {\\n  heading(text, level) {\\n    const escapedText = text.toLowerCase().replace(/[^\\\\w]+/g, '-');\\n\\n    return `\\n            <h${level}>\\n              <a name=\\\"${escapedText}\\\" class=\\\"anchor\\\" href=\\\"#${escapedText}\\\">\\n                <span class=\\\"header-link\\\"></span>\\n              </a>\\n              ${text}\\n            </h${level}>`;\\n  }\\n};\\n\\nmarked.use({ renderer });\\n\\n// Run marked\\nconsole.log(marked('# heading+'));\\n```\\n\\n**Output:**\\n\\n```html\\n<h1>\\n  <a name=\\\"heading-\\\" class=\\\"anchor\\\" href=\\\"#heading-\\\">\\n    <span class=\\\"header-link\\\"></span>\\n  </a>\\n  heading+\\n</h1>\\n```\\n\\n### Block level renderer methods\\n\\n- code(*string* code, *string* infostring, *boolean* escaped)\\n- blockquote(*string* quote)\\n- html(*string* html)\\n- heading(*string* text, *number* level, *string* raw, *Slugger* slugger)\\n- hr()\\n- list(*string* body, *boolean* ordered, *number* start)\\n- listitem(*string* text, *boolean* task, *boolean* checked)\\n- checkbox(*boolean* checked)\\n- paragraph(*string* text)\\n- table(*string* header, *string* body)\\n- tablerow(*string* content)\\n- tablecell(*string* content, *object* flags)\\n\\n`slugger` has the `slug` method to create a unique id from value:\\n\\n```js\\nslugger.slug('foo')   // foo\\nslugger.slug('foo')   // foo-1\\nslugger.slug('foo')   // foo-2\\nslugger.slug('foo 1') // foo-1-1\\nslugger.slug('foo-1') // foo-1-2\\n...\\n```\\n\\n`slugger.slug` can also be called with the `dryrun` option for stateless operation:\\n```js\\nslugger.slug('foo')                    // foo\\nslugger.slug('foo')                    // foo-1\\nslugger.slug('foo')                    // foo-2\\nslugger.slug('foo', { dryrun: true })  // foo-3\\nslugger.slug('foo', { dryrun: true })  // foo-3\\nslugger.slug('foo')                    // foo-3\\nslugger.slug('foo')                    // foo-4\\n...\\n```\\n\\n`flags` has the following properties:\\n\\n```js\\n{\\n    header: true || false,\\n    align: 'center' || 'left' || 'right'\\n}\\n```\\n\\n### Inline level renderer methods\\n\\n- strong(*string* text)\\n- em(*string* text)\\n- codespan(*string* code)\\n- br()\\n- del(*string* text)\\n- link(*string* href, *string* title, *string* text)\\n- image(*string* href, *string* title, *string* text)\\n- text(*string* text)\\n\\n<h2 id=\\\"tokenizer\\\">The tokenizer</h2>\\n\\nThe tokenizer defines how to turn markdown text into tokens.\\n\\n**Example:** Overriding default `codespan` tokenizer to include LaTeX.\\n\\n```js\\n// Create reference instance\\nconst marked = require('marked');\\n\\n// Override function\\nconst tokenizer = {\\n  codespan(src) {\\n    const match = src.match(/\\\\$+([^\\\\$\\\\n]+?)\\\\$+/);\\n    if (match) {\\n      return {\\n        type: 'codespan',\\n        raw: match[0],\\n        text: match[1].trim()\\n      };\\n    }\\n\\n    // return false to use original codespan tokenizer\\n    return false;\\n  }\\n};\\n\\nmarked.use({ tokenizer });\\n\\n// Run marked\\nconsole.log(marked('$ latex code $\\\\n\\\\n` other code `'));\\n```\\n\\n**Output:**\\n\\n```html\\n<p><code>latex code</code></p>\\n<p><code>other code</code></p>\\n```\\n\\n### Block level tokenizer methods\\n\\n- space(*string* src)\\n- code(*string* src)\\n- fences(*string* src)\\n- heading(*string* src)\\n- nptable(*string* src)\\n- hr(*string* src)\\n- blockquote(*string* src)\\n- list(*string* src)\\n- html(*string* src)\\n- def(*string* src)\\n- table(*string* src)\\n- lheading(*string* src)\\n- paragraph(*string* src)\\n- text(*string* src)\\n\\n### Inline level tokenizer methods\\n\\n- escape(*string* src)\\n- tag(*string* src, *bool* inLink, *bool* inRawBlock)\\n- link(*string* src)\\n- reflink(*string* src, *object* links)\\n- strong(*string* src)\\n- em(*string* src)\\n- codespan(*string* src)\\n- br(*string* src)\\n- del(*string* src)\\n- autolink(*string* src, *function* mangle)\\n- url(*string* src, *function* mangle)\\n- inlineText(*string* src, *bool* inRawBlock, *function* smartypants)\\n\\n`mangle` is a method that changes text to HTML character references:\\n\\n```js\\nmangle('test@example.com')\\n// \\\"&#x74;&#101;&#x73;&#116;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#x63;&#111;&#x6d;\\\"\\n```\\n\\n`smartypants` is a method that translates plain ASCII punctuation characters into \\u201csmart\\u201d typographic punctuation HTML entities:\\n\\nhttps://daringfireball.net/projects/smartypants/\\n\\n```js\\nsmartypants('\\\"this ... string\\\"')\\n// \\\"\\u201cthis \\u2026 string\\u201d\\\"\\n```\\n\\n<h2 id=\\\"walk-tokens\\\">Walk Tokens</h2>\\n\\nThe walkTokens function gets called with every token. Child tokens are called before moving on to sibling tokens. Each token is passed by reference so updates are persisted when passed to the parser. The return value of the function is ignored.\\n\\n**Example:** Overriding heading tokens to start at h2.\\n\\n```js\\nconst marked = require('marked');\\n\\n// Override function\\nconst walkTokens = (token) => {\\n  if (token.type === 'heading') {\\n    token.depth += 1;\\n  }\\n};\\n\\nmarked.use({ walkTokens });\\n\\n// Run marked\\nconsole.log(marked('# heading 2\\\\n\\\\n## heading 3'));\\n```\\n\\n**Output:**\\n\\n```html\\n<h2 id=\\\"heading-2\\\">heading 2</h2>\\n<h3 id=\\\"heading-3\\\">heading 3</h3>\\n```\\n\\n<h2 id=\\\"lexer\\\">The lexer</h2>\\n\\nThe lexer takes a markdown string and calls the tokenizer functions.\\n\\n<h2 id=\\\"parser\\\">The parser</h2>\\n\\nThe parser takes tokens as input and calls the renderer functions.\\n\\n***\\n\\n<h2 id=\\\"extend\\\">Access to lexer and parser</h2>\\n\\nYou also have direct access to the lexer and parser if you so desire.\\n\\n``` js\\nconst tokens = marked.lexer(markdown, options);\\nconsole.log(marked.parser(tokens, options));\\n```\\n\\n``` js\\nconst lexer = new marked.Lexer(options);\\nconst tokens = lexer.lex(markdown);\\nconsole.log(tokens);\\nconsole.log(lexer.tokenizer.rules.block); // block level rules used\\nconsole.log(lexer.tokenizer.rules.inline); // inline level rules used\\nconsole.log(marked.Lexer.rules.block); // all block level rules\\nconsole.log(marked.Lexer.rules.inline); // all inline level rules\\n```\\n\\n``` bash\\n$ node\\n> require('marked').lexer('> I am using marked.')\\n[\\n  {\\n    type: \\\"blockquote\\\",\\n    raw: \\\"> I am using marked.\\\",\\n    tokens: [\\n      {\\n        type: \\\"paragraph\\\",\\n        raw: \\\"I am using marked.\\\",\\n        text: \\\"I am using marked.\\\",\\n        tokens: [\\n          {\\n            type: \\\"text\\\",\\n            raw: \\\"I am using marked.\\\",\\n            text: \\\"I am using marked.\\\"\\n          }\\n        ]\\n      }\\n    ]\\n  },\\n  links: {}\\n]\\n```\\n\\nThe Lexer builds an array of tokens, which will be passed to the Parser.\\nThe Parser processes each token in the token array:\\n\\n``` js\\nconst marked = require('marked');\\n\\nconst md = `\\n  # heading\\n\\n  [link][1]\\n\\n  [1]: #heading \\\"heading\\\"\\n`;\\n\\nconst tokens = marked.lexer(md);\\nconsole.log(tokens);\\n\\nconst html = marked.parser(tokens);\\nconsole.log(html);\\n```\\n\\n``` bash\\n[\\n  {\\n    type: \\\"heading\\\",\\n    raw: \\\"  # heading\\\\n\\\\n\\\",\\n    depth: 1,\\n    text: \\\"heading\\\",\\n    tokens: [\\n      {\\n        type: \\\"text\\\",\\n        raw: \\\"heading\\\",\\n        text: \\\"heading\\\"\\n      }\\n    ]\\n  },\\n  {\\n    type: \\\"paragraph\\\",\\n    raw: \\\"  [link][1]\\\",\\n    text: \\\"  [link][1]\\\",\\n    tokens: [\\n      {\\n        type: \\\"text\\\",\\n        raw: \\\"  \\\",\\n        text: \\\"  \\\"\\n      },\\n      {\\n        type: \\\"link\\\",\\n        raw: \\\"[link][1]\\\",\\n        text: \\\"link\\\",\\n        href: \\\"#heading\\\",\\n        title: \\\"heading\\\",\\n        tokens: [\\n          {\\n            type: \\\"text\\\",\\n            raw: \\\"link\\\",\\n            text: \\\"link\\\"\\n          }\\n        ]\\n      }\\n    ]\\n  },\\n  {\\n    type: \\\"space\\\",\\n    raw: \\\"\\\\n\\\\n\\\"\\n  },\\n  links: {\\n    \\\"1\\\": {\\n      href: \\\"#heading\\\",\\n      title: \\\"heading\\\"\\n    }\\n  }\\n]\\n<h1 id=\\\"heading\\\">heading</h1>\\n<p>  <a href=\\\"#heading\\\" title=\\\"heading\\\">link</a></p>\\n```\\n\\n[end of USING_PRO.md]\\n[start of rollup.config.js]\\nconst commonjs = require('@rollup/plugin-commonjs');\\nconst babel = require('@rollup/plugin-babel').default;\\nconst license = require('rollup-plugin-license');\\n\\nmodule.exports = {\\n  input: 'src/marked.js',\\n  output: {\\n    file: 'lib/marked.js',\\n    format: 'umd',\\n    name: 'marked'\\n  },\\n  plugins: [\\n    license({\\n      banner: `\\nDO NOT EDIT THIS FILE\\nThe code in this file is generated from files in ./src/\\n`\\n    }),\\n    license({\\n      banner: `\\nmarked - a markdown parser\\nCopyright (c) 2011-${new Date().getFullYear()}, Christopher Jeffrey. (MIT Licensed)\\nhttps://github.com/markedjs/marked\\n`\\n    }),\\n    commonjs(),\\n    babel({\\n      presets: [['@babel/preset-env', { loose: true }]]\\n    })\\n  ]\\n};\\n\\n[end of rollup.config.js]\\n[start of main.md]\\n[test]: http://google.com/ \\\"Google\\\"\\n\\n# A heading\\n\\nJust a note, I've found that I can't test my markdown parser vs others.\\nFor example, both markdown.js and showdown code blocks in lists wrong. They're\\nalso completely [inconsistent][test] with regards to paragraphs in list items.\\n\\nA link. Not anymore.\\n\\n<aside>This will make me fail the test because\\nmarkdown.js doesnt acknowledge arbitrary html blocks =/</aside>\\n\\n* List Item 1\\n\\n* List Item 2\\n  * New List Item 1\\n    Hi, this is a list item.\\n  * New List Item 2\\n    Another item\\n        Code goes here.\\n        Lots of it...\\n  * New List Item 3\\n    The last item\\n\\n* List Item 3\\nThe final item.\\n\\n* List Item 4\\nThe real final item.\\n\\nParagraph.\\n\\n> * bq Item 1\\n> * bq Item 2\\n>   * New bq Item 1\\n>   * New bq Item 2\\n>   Text here\\n\\n* * *\\n\\n> Another blockquote!\\n> I really need to get\\n> more creative with\\n> mockup text..\\n> markdown.js breaks here again\\n\\nAnother Heading\\n-------------\\n\\nHello *world*. Here is a [link](//hello).\\nAnd an image ![alt](src).\\n\\n    Code goes here.\\n    Lots of it...\\n\\n[end of main.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "update-specs.js",
        "Lexer-spec.js",
        "USING_PRO.md",
        "rollup.config.js",
        "main.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "b629f886-4275-45f1-bc88-ac9cb6a7bc66",
        "score": 0.01639344262295082,
        "payload": {
          "text": "const fetch = require('node-fetch');\nconst cheerio = require('cheerio');\nconst marked = require('../');\nconst htmlDiffer = require('./helpers/html-differ.js');\nconst fs = require('fs');\nconst path = require('path');\n\nfunction removeFiles(dir) {\n  fs.readdirSync(dir).forEach(file => {\n    fs.unlinkSync(path.join(dir, file));\n  });\n}\n\nasync function updateCommonmark(dir, options) {\n  try {\n    const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\n    const pkg = await res.json();\n    const version = pkg.version.replace(/^(\\d+\\.\\d+).*$/, '$1');\n    const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\n    const specs = await res2.json();\n    specs.forEach(spec => {\n      const html = marked(spec.markdown, options);\n      if (!htmlDiffer.isEqual(html, spec.html)) {\n        spec.shouldFail = true;\n      }\n    });\n    fs.writeFileSync(path.resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n    console.log(`Saved CommonMark v${version} specs`);\n  } catch (ex) {\n    console.log(ex);\n  }\n}\n\nasync function updateGfm(dir) {\n  try {\n    const res = await fetch('https://github.github.com/gfm/');\n    const html = await res.text();\n    const $ = cheerio.load(html);\n    const version = $('.version').text().match(/\\d+\\.\\d+/)[0];\n    if (!version) {\n      throw new Error('No version found');\n    }\n    const specs = [];\n    $('.extension').each((i, ext) => {\n      const section = $('.definition', ext).text().trim().replace(/^\\d+\\.\\d+(.*?) \\(extension\\)[\\s\\S]*$/, '$1');\n      $('.example', ext).each((j, exa) => {\n        const example = +$(exa).attr('id').replace(/\\D/g, '');\n        const markdown = $('.language-markdown', exa).text().trim();\n        const html = $('.language-html', exa).text().trim();\n        specs.push({\n          section: `[extension] ${section}`,\n          html,\n          markdown,\n          example\n        });\n      });\n    });\n\n    specs.forEach(spec => {\n      const html = marked(spec.markdown, { gfm: true, pedantic: false });\n      if (!htmlDiffer.isEqual(html, spec.html)) {\n        spec.shouldFail = true;\n      }\n    });\n    fs.writeFileSync(path.resolve(dir, `./gfm.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n    console.log(`Saved GFM v${version} specs.`);\n  } catch (ex) {\n    console.log(ex);\n  }\n}\n\nconst commonmarkDir = path.resolve(__dirname, './specs/commonmark');\nconst gfmDir = path.resolve(__dirname, './specs/gfm');\nremoveFiles(commonmarkDir);\nremoveFiles(gfmDir);\nupdateCommonmark(commonmarkDir, { gfm: false, pedantic: false, headerIds: false });\nupdateCommonmark(gfmDir, { gfm: true, pedantic: false, headerIds: false });\nupdateGfm(gfmDir);\n",
          "filepath": "data/repos/markedjs/marked-2.0/test/update-specs.js",
          "repo": "markedjs/marked",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "b766ab4c-86e2-41a7-a7dc-6fc92ece1710",
        "score": 0.016129032258064516,
        "payload": {
          "text": "const Lexer = require('../../src/Lexer.js');\n\nfunction expectTokens({ md, options, tokens = [], links = {} }) {\n  const lexer = new Lexer(options);\n  const actual = lexer.lex(md);\n  const expected = tokens;\n  expected.links = links;\n  // console.log(JSON.stringify(actual, null, 2));\n  expect(actual).toEqual(expected);\n}\n\nfunction expectInlineTokens({ md, options, tokens = jasmine.any(Array), links = {} }) {\n  const lexer = new Lexer(options);\n  lexer.tokens.links = links;\n  const outTokens = [];\n  lexer.inlineTokens(md, outTokens);\n  expect(outTokens).toEqual(tokens);\n}\n\nfunction expectInline({ token, options, tokens }) {\n  const lexer = new Lexer(options);\n  lexer.inline([token]);\n  expect(token.tokens).toEqual(tokens);\n}\n\ndescribe('Lexer', () => {\n  describe('paragraph', () => {\n    it('space between paragraphs', () => {\n      expectTokens({\n        md: 'paragraph 1\\n\\nparagraph 2',\n        tokens: [\n          {\n            type: 'paragraph',\n            raw: 'paragraph 1',\n            text: 'paragraph 1',\n            tokens: [{ type: 'text', raw: 'paragraph 1', text: 'paragraph 1' }]\n          },\n          { type: 'space', raw: '\\n\\n' },\n          {\n            type: 'paragraph',\n            raw: 'paragraph 2',\n            text: 'paragraph 2',\n            tokens: [{ type: 'text', raw: 'paragraph 2', text: 'paragraph 2' }]\n          }\n        ]\n      });\n    });\n  });\n\n  describe('code', () => {\n    it('indented code', () => {\n      expectTokens({\n        md: '    code',\n        tokens: [\n          { type: 'code', raw: '    code', text: 'code', codeBlockStyle: 'indented' }\n        ]\n      });\n    });\n\n    it('fenced code', () => {\n      expectTokens({\n        md: '```\\ncode\\n```',\n        tokens: [\n          { type: 'code', raw: '```\\ncode\\n```', text: 'code', lang: '' }\n        ]\n      });\n    });\n\n    it('fenced code lang', () => {\n      expectTokens({\n        md: '```text\\ncode\\n```',\n        tokens: [\n          { type: 'code', raw: '```text\\ncode\\n```', text: 'code', lang: 'text' }\n        ]\n      });\n    });\n  });\n\n  describe('headings', () => {\n    it('depth', () => {\n      expectTokens({\n        md: `\n# heading 1\n\n## heading 2\n\n### heading 3\n\n#### heading 4\n\n##### heading 5\n\n###### heading 6\n\nlheading 1\n==========\n\nlheading 2\n----------\n`,\n        tokens: [\n          {\n            type: 'heading',\n            raw: '# heading 1\\n\\n',\n            depth: 1,\n            text: 'heading 1',\n            tokens: [{ type: 'text', raw: 'heading 1', text: 'heading 1' }]\n          },\n          {\n            type: 'heading',\n            raw: '## heading 2\\n\\n',\n            depth: 2,\n            text: 'heading 2',\n            tokens: [{ type: 'text', raw: 'heading 2', text: 'heading 2' }]\n          },\n          {\n            type: 'heading',\n            raw: '### heading 3\\n\\n',\n            depth: 3,\n            text: 'heading 3',\n            tokens: [{ type: 'text', raw: 'heading 3', text: 'heading 3' }]\n          },\n          {\n            type: 'heading',\n            raw: '#### heading 4\\n\\n',\n            depth: 4,\n            text: 'heading 4',\n            tokens: [{ type: 'text', raw: 'heading 4', text: 'heading 4' }]\n          },\n          {\n            type: 'heading',\n            raw: '##### heading 5\\n\\n',\n            depth: 5,\n            text: 'heading 5',\n            tokens: [{ type: 'text', raw: 'heading 5', text: 'heading 5' }]\n          },\n          {\n            type: 'heading',\n            raw: '###### heading 6\\n\\n',\n            depth: 6,\n            text: 'heading 6',\n            tokens: [{ type: 'text', raw: 'heading 6', text: 'heading 6' }]\n          },\n          {\n            type: 'heading',\n            raw: 'lheading 1\\n==========\\n\\n',\n            depth: 1,\n            text: 'lheading 1',\n            tokens: [{ type: 'text', raw: 'lheading 1', text: 'lheading 1' }]\n          },\n          {\n            type: 'heading',\n            raw: 'lheading 2\\n----------\\n',\n            depth: 2,\n            text: 'lheading 2',\n            tokens: [{ type: 'text', raw: 'lheading 2', text: 'lheading 2' }]\n          }\n        ]\n      });\n    });\n\n    it('should not be heading if depth > 6', () => {\n      expectTokens({\n        md: '####### heading 7',\n        tokens: [{\n          type: 'paragraph',\n          raw: '####### heading 7',\n          text: '####### heading 7',\n          tokens: [{ type: 'text', raw: '####### heading 7', text: '####### heading 7' }]\n        }]\n      });\n    });\n  });\n\n  describe('table', () => {\n    it('pipe table', () => {\n      expectTokens({\n        md: `\n| a | b |\n|---|---|\n| 1 | 2 |\n`,\n        tokens: [{\n          type: 'table',\n          header: ['a', 'b'],\n          align: [null, null],\n          cells: [['1', '2']],\n          raw: '| a | b |\\n|---|---|\\n| 1 | 2 |\\n',\n          tokens: {\n            header: [\n              [{ type: 'text', raw: 'a', text: 'a' }],\n              [{ type: 'text', raw: 'b', text: 'b' }]\n            ],\n            cells: [[\n              [{ type: 'text', raw: '1', text: '1' }],\n              [{ type: 'text', raw: '2', text: '2' }]\n            ]]\n          }\n        }]\n      });\n    });\n\n    it('align table', () => {\n      expectTokens({\n        md: `\n| a | b | c |\n|:--|:-:|--:|\n| 1 | 2 | 3 |\n`,\n        tokens: [{\n          type: 'table',\n          header: ['a', 'b', 'c'],\n          align: ['left', 'center', 'right'],\n          cells: [['1', '2', '3']],\n          raw: '| a | b | c |\\n|:--|:-:|--:|\\n| 1 | 2 | 3 |\\n',\n          tokens: {\n            header: [\n              [{ type: 'text', raw: 'a', text: 'a' }],\n              [{ type: 'text', raw: 'b', text: 'b' }],\n              [{ type: 'text', raw: 'c', text: 'c' }]\n            ],\n            cells: [[\n              [{ type: 'text', raw: '1', text: '1' }],\n              [{ type: 'text', raw: '2', text: '2' }],\n              [{ type: 'text', raw: '3', text: '3' }]\n            ]]\n          }\n        }]\n      });\n    });\n\n    it('no pipe table', () => {\n      expectTokens({\n        md: `\na | b\n--|--\n1 | 2\n`,\n        tokens: [{\n          type: 'table',\n          header: ['a', 'b'],\n          align: [null, null],\n          cells: [['1', '2']],\n          raw: 'a | b\\n--|--\\n1 | 2\\n',\n          tokens: {\n            header: [\n              [{ type: 'text', raw: 'a', text: 'a' }],\n              [{ type: 'text', raw: 'b', text: 'b' }]\n            ],\n            cells: [[\n              [{ type: 'text', raw: '1', text: '1' }],\n              [{ type: 'text', raw: '2', text: '2' }]\n            ]]\n          }\n        }]\n      });\n    });\n  });\n\n  describe('hr', () => {\n    it('hr', () => {\n      expectTokens({\n        md: '---',\n        tokens: [\n          { type: 'hr', raw: '---' }\n        ]\n      });\n    });\n  });\n\n  describe('blockquote', () => {\n    it('start, inner-tokens, end', () => {\n      expectTokens({\n        md: '> blockquote',\n        tokens: [\n          {\n            type: 'blockquote',\n            raw: '> blockquote',\n            text: 'blockquote',\n            tokens: [{\n              type: 'paragraph',\n              raw: 'blockquote',\n              text: 'blockquote',\n              tokens: [\n                { type: 'text', raw: 'blockquote', text: 'blockquote' }\n              ]\n            }]\n          }\n        ]\n      });\n    });\n  });\n\n  describe('list', () => {\n    it('unordered', () => {\n      expectTokens({\n        md: `\n- item 1\n- item 2\n`,\n        tokens: [\n          {\n            type: 'list',\n            raw: '- item 1\\n- item 2\\n',\n            ordered: false,\n            start: '',\n            loose: false,\n            items: [\n              {\n                type: 'list_item',\n                raw: '- item 1',\n                task: false,\n                checked: undefined,\n                loose: false,\n                text: 'item 1',\n                tokens: [{\n                  type: 'text',\n                  raw: 'item 1',\n                  text: 'item 1',\n                  tokens: [{ type: 'text', raw: 'item 1', text: 'item 1' }]\n                }]\n              },\n              {\n                type: 'list_item',\n                raw: '- item 2\\n',\n                task: false,\n                checked: undefined,\n                loose: false,\n                text: 'item 2\\n',\n                tokens: [{\n                  type: 'text',\n                  raw: 'item 2',\n                  text: 'item 2',\n                  tokens: [{ type: 'text', raw: 'item 2', text: 'item 2' }]\n                }]\n              }\n            ]\n          }\n        ]\n      });\n    });\n\n    it('ordered', () => {\n      expectTokens({\n        md: `\n1. item 1\n2. item 2\n`,\n        tokens: jasmine.arrayContaining([\n          jasmine.objectContaining({\n            type: 'list',\n            raw: '1. item 1\\n2. item 2\\n',\n            ordered: true,\n            start: 1,\n            items: [\n              jasmine.objectContaining({\n                raw: '1. item 1'\n              }),\n              jasmine.objectContaining({\n                raw: '2. item 2\\n'\n              })\n            ]\n          })\n        ])\n      });\n    });\n\n    it('ordered with parenthesis', () => {\n      expectTokens({\n        md: `\n1) item 1\n2) item 2\n`,\n        tokens: jasmine.arrayContaining([\n          jasmine.objectContaining({\n            type: 'list',\n            raw: '1) item 1\\n2) item 2\\n',\n            ordered: true,\n            start: 1,\n            items: [\n              jasmine.objectContaining({\n                raw: '1) item 1'\n              }),\n              jasmine.objectContaining({\n                raw: '2) item 2\\n'\n              })\n            ]\n          })\n        ])\n      });\n    });\n\n    it('start', () => {\n      expectTokens({\n        md: `\n2. item 1\n3. item 2\n`,\n        tokens: jasmine.arrayContaining([\n          jasmine.objectContaining({\n            type: 'list',\n            raw: '2. item 1\\n3. item 2\\n',\n            ordered: true,\n            start: 2,\n            items: [\n              jasmine.objectContaining({\n                raw: '2. item 1'\n              }),\n              jasmine.objectContaining({\n                raw: '3. item 2\\n'\n              })\n            ]\n          })\n        ])\n      });\n    });\n\n    it('loose', () => {\n      expectTokens({\n        md: `\n- item 1\n\n- item 2\n`,\n        tokens: jasmine.arrayContaining([\n          jasmine.objectContaining({\n            type: 'list',\n            raw: '- item 1\\n\\n- item 2\\n',\n            loose: true\n          })\n        ])\n      });\n    });\n\n    it('task', () => {\n      expectTokens({\n        md: `\n- [ ] item 1\n- [x] item 2\n`,\n        tokens: jasmine.arrayContaining([\n          jasmine.objectContaining({\n            type: 'list',\n            raw: '- [ ] item 1\\n- [x] item 2\\n',\n            items: [\n              jasmine.objectContaining({\n                raw: '- [ ] item 1',\n                task: true,\n                checked: false\n              }),\n              jasmine.objectContaining({\n                raw: '- [x] item 2\\n',\n                task: true,\n                checked: true\n              })\n            ]\n          })\n        ])\n      });\n    });\n  });\n\n  describe('html', () => {\n    it('div', () => {\n      expectTokens({\n        md: '<div>html</div>',\n        tokens: [\n          {\n            type: 'html',\n            raw: '<div>html</div>',\n            pre: false,\n            text: '<div>html</div>'\n          }\n        ]\n      });\n    });\n\n    it('pre', () => {\n      expectTokens({\n        md: '<pre>html</pre>',\n        tokens: [\n          {\n            type: 'html',\n            raw: '<pre>html</pre>',\n            pre: true,\n            text: '<pre>html</pre>'\n          }\n        ]\n      });\n    });\n\n    it('sanitize', () => {\n      expectTokens({\n        md: '<div>html</div>',\n        options: { sanitize: true },\n        tokens: [\n          {\n            type: 'paragraph',\n            raw: '<div>html</div>',\n            pre: false,\n            text: '&lt;div&gt;html&lt;/div&gt;',\n            tokens: [{\n              type: 'text',\n              raw: '&lt;div&gt;html&lt;/div&gt;',\n              text: '&lt;div&gt;html&lt;/div&gt;'\n            }]\n          }\n        ]\n      });\n    });\n  });\n\n  describe('def', () => {\n    it('link', () => {\n      expectTokens({\n        md: '[link]: https://example.com',\n        links: {\n          link: { href: 'https://example.com', title: undefined }\n        }\n      });\n    });\n\n    it('title', () => {\n      expectTokens({\n        md: '[link]: https://example.com \"title\"',\n        links: {\n          link: { href: 'https://example.com', title: 'title' }\n        }\n      });\n    });\n  });\n\n  describe('inline', () => {\n    describe('inline', () => {\n      it('paragraph', () => {\n        expectInline({\n          token: { type: 'paragraph', text: 'text' },\n          tokens: [\n            { type: 'text', raw: 'text', text: 'text' }\n          ]\n        });\n      });\n\n      it('text', () => {\n        expectInline({\n          token: { type: 'text', text: 'text' },\n          tokens: [\n            { type: 'text', raw: 'text', text: 'text' }\n          ]\n        });\n      });\n\n      it('heading', () => {\n        expectInline({\n          token: { type: 'heading', text: 'text' },\n          tokens: [\n            { type: 'text', raw: 'text', text: 'text' }\n          ]\n        });\n      });\n\n      it('table', () => {\n        expectInline({\n          token: {\n            type: 'table',\n            header: ['a', 'b'],\n            align: [null, null],\n            cells: [['1', '2']]\n          },\n          tokens: {\n            header: [\n              [{ type: 'text', raw: 'a', text: 'a' }],\n              [{ type: 'text', raw: 'b', text: 'b' }]\n            ],\n            cells: [\n              [\n                [{ type: 'text', raw: '1', text: '1' }],\n                [{ type: 'text', raw: '2', text: '2' }]\n              ]\n            ]\n          }\n        });\n      });\n\n      it('code no inline tokens', () => {\n        expectInline({\n          token: { type: 'code', text: 'code' },\n          tokens: undefined\n        });\n      });\n    });\n\n    describe('inlineTokens', () => {\n      it('escape', () => {\n        expectInlineTokens({\n          md: '\\\\>',\n          tokens: [\n            { type: 'escape', raw: '\\\\>', text: '&gt;' }\n          ]\n        });\n      });\n\n      it('html', () => {\n        expectInlineTokens({\n          md: '<div>html</div>',\n          tokens: [\n            { type: 'html', raw: '<div>', inLink: false, inRawBlock: false, text: '<div>' },\n            { type: 'text', raw: 'html', text: 'html' },\n            { type: 'html', raw: '</div>', inLink: false, inRawBlock: false, text: '</div>' }\n          ]\n        });\n      });\n\n      it('html sanitize', () => {\n        expectInlineTokens({\n          md: '<div>html</div>',\n          options: { sanitize: true },\n          tokens: [\n            { type: 'text', raw: '<div>html</div>', inLink: false, inRawBlock: false, text: '&lt;div&gt;html&lt;/div&gt;' }\n          ]\n        });\n      });\n\n      it('link', () => {\n        expectInlineTokens({\n          md: '[link](https://example.com)',\n          tokens: [\n            {\n              type: 'link',\n              raw: '[link](https://example.com)',\n              href: 'https://example.com',\n              title: null,\n              text: 'link',\n              tokens: [\n                { type: 'text', raw: 'link', text: 'link' }\n              ]\n            }\n          ]\n        });\n      });\n\n      it('link title', () => {\n        expectInlineTokens({\n          md: '[link](https://example.com \"title\")',\n          tokens: [\n            {\n              type: 'link',\n              raw: '[link](https://example.com \"title\")',\n              href: 'https://example.com',\n              title: 'title',\n              text: 'link',\n              tokens: [\n                { type: 'text', raw: 'link', text: 'link' }\n              ]\n            }\n          ]\n        });\n      });\n\n      it('image', () => {\n        expectInlineTokens({\n          md: '![image](https://example.com/image.png)',\n          tokens: [\n            {\n              type: 'image',\n              raw: '![image](https://example.com/image.png)',\n              text: 'image',\n              href: 'https://example.com/image.png',\n              title: null\n            }\n          ]\n        });\n      });\n\n      it('image title', () => {\n        expectInlineTokens({\n          md: '![image](https://example.com/image.png \"title\")',\n          tokens: [\n            {\n              type: 'image',\n              raw: '![image](https://example.com/image.png \"title\")',\n              text: 'image',\n              href: 'https://example.com/image.png',\n              title: 'title'\n            }\n          ]\n        });\n      });\n\n      describe('reflink', () => {\n        it('reflink', () => {\n          expectInlineTokens({\n            md: '[link][]',\n            links: {\n              link: { href: 'https://example.com', title: 'title' }\n            },\n            tokens: [\n              {\n                type: 'link',\n                raw: '[link][]',\n                href: 'https://example.com',\n                title: 'title',\n                text: 'link',\n                tokens: [{\n                  type: 'text',\n                  raw: 'link',\n                  text: 'link'\n                }]\n              }\n            ]\n          });\n        });\n\n        it('nolink', () => {\n          expectInlineTokens({\n            md: '[link]',\n            links: {\n              link: { href: 'https://example.com', title: 'title' }\n            },\n            tokens: [\n              {\n                type: 'link',\n                raw: '[link]',\n                href: 'https://example.com',\n                title: 'title',\n                text: 'link',\n                tokens: [{\n                  type: 'text',\n                  raw: 'link',\n                  text: 'link'\n                }]\n              }\n            ]\n          });\n        });\n\n        it('no def', () => {\n          expectInlineTokens({\n            md: '[link]',\n            tokens: [\n              { type: 'text', raw: '[link]', text: '[link]' }\n            ]\n          });\n        });\n      });\n\n      it('strong', () => {\n        expectInlineTokens({\n          md: '**strong**',\n          tokens: [\n            {\n              type: 'strong',\n              raw: '**strong**',\n              text: 'strong',\n              tokens: [\n                { type: 'text', raw: 'strong', text: 'strong' }\n              ]\n            }\n          ]\n        });\n      });\n\n      it('em', () => {\n        expectInlineTokens({\n          md: '*em*',\n          tokens: [\n            {\n              type: 'em',\n              raw: '*em*',\n              text: 'em',\n              tokens: [\n                { type: 'text', raw: 'em', text: 'em' }\n              ]\n            }\n          ]\n        });\n      });\n\n      describe('codespan', () => {\n        it('code', () => {\n          expectInlineTokens({\n            md: '`code`',\n            tokens: [\n              { type: 'codespan', raw: '`code`', text: 'code' }\n            ]\n          });\n        });\n\n        it('only spaces not stripped', () => {\n          expectInlineTokens({\n            md: '`   `',\n            tokens: [\n              { type: 'codespan', raw: '`   `', text: '   ' }\n            ]\n          });\n        });\n\n        it('beginning space only not stripped', () => {\n          expectInlineTokens({\n            md: '` a`',\n            tokens: [\n              { type: 'codespan', raw: '` a`', text: ' a' }\n            ]\n          });\n        });\n\n        it('end space only not stripped', () => {\n          expectInlineTokens({\n            md: '`a `',\n            tokens: [\n              { type: 'codespan', raw: '`a `', text: 'a ' }\n            ]\n          });\n        });\n\n        it('begin and end spaces are stripped', () => {\n          expectInlineTokens({\n            md: '` a `',\n            tokens: [\n              { type: 'codespan', raw: '` a `', text: 'a' }\n            ]\n          });\n        });\n\n        it('begin and end newlines are stripped', () => {\n          expectInlineTokens({\n            md: '`\\na\\n`',\n            tokens: [\n              { type: 'codespan', raw: '`\\na\\n`', text: 'a' }\n            ]\n          });\n        });\n\n        it('begin and end tabs are not stripped', () => {\n          expectInlineTokens({\n            md: '`\\ta\\t`',\n            tokens: [\n              { type: 'codespan', raw: '`\\ta\\t`', text: '\\ta\\t' }\n            ]\n          });\n        });\n\n        it('begin and end newlines', () => {\n          expectInlineTokens({\n            md: '`\\na\\n`',\n            tokens: [\n              { type: 'codespan', raw: '`\\na\\n`', text: 'a' }\n            ]\n          });\n        });\n\n        it('begin and end multiple spaces only one stripped', () => {\n          expectInlineTokens({\n            md: '`  a  `',\n            tokens: [\n              { type: 'codespan', raw: '`  a  `', text: ' a ' }\n            ]\n          });\n        });\n\n        it('newline to space', () => {\n          expectInlineTokens({\n            md: '`a\\nb`',\n            tokens: [\n              { type: 'codespan', raw: '`a\\nb`', text: 'a b' }\n            ]\n          });\n        });\n      });\n\n      it('br', () => {\n        expectInlineTokens({\n          md: 'a\\nb',\n          options: { gfm: true, breaks: true },\n          tokens: jasmine.arrayContaining([\n            { type: 'br', raw: '\\n' }\n          ])\n        });\n      });\n\n      it('del', () => {\n        expectInlineTokens({\n          md: '~~del~~',\n          tokens: [\n            {\n              type: 'del',\n              raw: '~~del~~',\n              text: 'del',\n              tokens: [\n                { type: 'text', raw: 'del', text: 'del' }\n              ]\n            }\n          ]\n        });\n      });\n\n      describe('url', () => {\n        it('autolink', () => {\n          expectInlineTokens({\n            md: '<https://example.com>',\n            tokens: [\n              {\n                type: 'link',\n                raw: '<https://example.com>',\n                text: 'https://example.com',\n                href: 'https://example.com',\n                tokens: [\n                  { type: 'text', raw: 'https://example.com', text: 'https://example.com' }\n                ]\n              }\n            ]\n          });\n        });\n\n        it('autolink email', () => {\n          expectInlineTokens({\n            md: '<test@example.com>',\n            options: { mangle: false },\n            tokens: [\n              {\n                type: 'link',\n                raw: '<test@example.com>',\n                text: 'test@example.com',\n                href: 'mailto:test@example.com',\n                tokens: [\n                  { type: 'text', raw: 'test@example.com', text: 'test@example.com' }\n                ]\n              }\n            ]\n          });\n        });\n\n        it('autolink mangle email', () => {\n          expectInlineTokens({\n            md: '<test@example.com>',\n            options: { mangle: true },\n            tokens: [\n              {\n                type: 'link',\n                raw: '<test@example.com>',\n                text: jasmine.stringMatching(/^(&#x?[0-9a-f]+;)+$/),\n                href: jasmine.stringMatching(/^mailto:(&#x?[0-9a-f]+;)+$/),\n                tokens: [\n                  {\n                    type: 'text',\n                    raw: jasmine.stringMatching(/^(&#x?[0-9a-f]+;)+$/),\n                    text: jasmine.stringMatching(/^(&#x?[0-9a-f]+;)+$/)\n                  }\n                ]\n              }\n            ]\n          });\n        });\n\n        it('url', () => {\n          expectInlineTokens({\n            md: 'https://example.com',\n            tokens: [\n              {\n                type: 'link',\n                raw: 'https://example.com',\n                text: 'https://example.com',\n                href: 'https://example.com',\n                tokens: [\n                  { type: 'text', raw: 'https://example.com', text: 'https://example.com' }\n                ]\n              }\n            ]\n          });\n        });\n\n        it('url email', () => {\n          expectInlineTokens({\n            md: 'test@example.com',\n            options: { gfm: true, mangle: false },\n            tokens: [\n              {\n                type: 'link',\n                raw: 'test@example.com',\n                text: 'test@example.com',\n                href: 'mailto:test@example.com',\n                tokens: [\n                  { type: 'text', raw: 'test@example.com', text: 'test@example.com' }\n                ]\n              }\n            ]\n          });\n        });\n\n        it('url mangle email', () => {\n          expectInlineTokens({\n            md: 'test@example.com',\n            options: { gfm: true, mangle: true },\n            tokens: [\n              {\n                type: 'link',\n                raw: 'test@example.com',\n                text: jasmine.stringMatching(/^(&#x?[0-9a-f]+;)+$/),\n                href: jasmine.stringMatching(/^mailto:(&#x?[0-9a-f]+;)+$/),\n                tokens: [\n                  {\n                    type: 'text',\n                    raw: jasmine.stringMatching(/^(&#x?[0-9a-f]+;)+$/),\n                    text: jasmine.stringMatching(/^(&#x?[0-9a-f]+;)+$/)\n                  }\n                ]\n              }\n            ]\n          });\n        });\n      });\n\n      it('text', () => {\n        expectInlineTokens({\n          md: 'text',\n          tokens: [\n            {\n              type: 'text',\n              raw: 'text',\n              text: 'text'\n            }\n          ]\n        });\n      });\n\n      describe('smartypants', () => {\n        it('single quotes', () => {\n          expectInlineTokens({\n            md: \"'single quotes'\",\n            options: { smartypants: true },\n            tokens: [\n              {\n                type: 'text',\n                raw: \"'single quotes'\",\n                text: '\u2018single quotes\u2019'\n              }\n            ]\n          });\n        });\n\n        it('double quotes', () => {\n          expectInlineTokens({\n            md: '\"double quotes\"',\n            options: { smartypants: true },\n            tokens: [\n              {\n                type: 'text',\n                raw: '\"double quotes\"',\n                text: '\u201cdouble quotes\u201d'\n              }\n            ]\n          });\n        });\n\n        it('ellipses', () => {\n          expectInlineTokens({\n            md: 'ellipses...',\n            options: { smartypants: true },\n            tokens: [\n              {\n                type: 'text',\n                raw: 'ellipses...',\n                text: 'ellipses\u2026'\n              }\n            ]\n          });\n        });\n\n        it('en-dash', () => {\n          expectInlineTokens({\n            md: 'en--dash',\n            options: { smartypants: true },\n            tokens: [\n              {\n                type: 'text',\n                raw: 'en--dash',\n                text: 'en\u2013dash'\n              }\n            ]\n          });\n        });\n\n        it('em-dash', () => {\n          expectInlineTokens({\n            md: 'em---dash',\n            options: { smartypants: true },\n            tokens: [\n              {\n                type: 'text',\n                raw: 'em---dash',\n                text: 'em\u2014dash'\n              }\n            ]\n          });\n        });\n      });\n    });\n  });\n});\n",
          "filepath": "data/repos/markedjs/marked-2.0/test/unit/Lexer-spec.js",
          "repo": "markedjs/marked",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "7a44a57b-f90c-4cc6-ba33-0f18f5307f94",
        "score": 0.015873015873015872,
        "payload": {
          "text": "## Extending Marked\n\nTo champion the single-responsibility and open/closed principles, we have tried to make it relatively painless to extend marked. If you are looking to add custom functionality, this is the place to start.\n\n<h2 id=\"use\">marked.use()</h2>\n\n`marked.use(options)` is the recommended way to extend marked. The options object can contain any [option](/using_advanced#options) available in marked.\n\nThe `renderer` and `tokenizer` options can be an object with functions that will be merged into the `renderer` and `tokenizer` respectively.\n\nThe `renderer` and `tokenizer` functions can return false to fallback to the previous function.\n\nThe `walkTokens` option can be a function that will be called with every token before rendering. When calling `use` multiple times with different `walkTokens` functions each function will be called in the **reverse** order in which they were assigned.\n\nAll other options will overwrite previously set options.\n\n<h2 id=\"renderer\">The renderer</h2>\n\nThe renderer defines the output of the parser.\n\n**Example:** Overriding default heading token by adding an embedded anchor tag like on GitHub.\n\n```js\n// Create reference instance\nconst marked = require('marked');\n\n// Override function\nconst renderer = {\n  heading(text, level) {\n    const escapedText = text.toLowerCase().replace(/[^\\w]+/g, '-');\n\n    return `\n            <h${level}>\n              <a name=\"${escapedText}\" class=\"anchor\" href=\"#${escapedText}\">\n                <span class=\"header-link\"></span>\n              </a>\n              ${text}\n            </h${level}>`;\n  }\n};\n\nmarked.use({ renderer });\n\n// Run marked\nconsole.log(marked('# heading+'));\n```\n\n**Output:**\n\n```html\n<h1>\n  <a name=\"heading-\" class=\"anchor\" href=\"#heading-\">\n    <span class=\"header-link\"></span>\n  </a>\n  heading+\n</h1>\n```\n\n### Block level renderer methods\n\n- code(*string* code, *string* infostring, *boolean* escaped)\n- blockquote(*string* quote)\n- html(*string* html)\n- heading(*string* text, *number* level, *string* raw, *Slugger* slugger)\n- hr()\n- list(*string* body, *boolean* ordered, *number* start)\n- listitem(*string* text, *boolean* task, *boolean* checked)\n- checkbox(*boolean* checked)\n- paragraph(*string* text)\n- table(*string* header, *string* body)\n- tablerow(*string* content)\n- tablecell(*string* content, *object* flags)\n\n`slugger` has the `slug` method to create a unique id from value:\n\n```js\nslugger.slug('foo')   // foo\nslugger.slug('foo')   // foo-1\nslugger.slug('foo')   // foo-2\nslugger.slug('foo 1') // foo-1-1\nslugger.slug('foo-1') // foo-1-2\n...\n```\n\n`slugger.slug` can also be called with the `dryrun` option for stateless operation:\n```js\nslugger.slug('foo')                    // foo\nslugger.slug('foo')                    // foo-1\nslugger.slug('foo')                    // foo-2\nslugger.slug('foo', { dryrun: true })  // foo-3\nslugger.slug('foo', { dryrun: true })  // foo-3\nslugger.slug('foo')                    // foo-3\nslugger.slug('foo')                    // foo-4\n...\n```\n\n`flags` has the following properties:\n\n```js\n{\n    header: true || false,\n    align: 'center' || 'left' || 'right'\n}\n```\n\n### Inline level renderer methods\n\n- strong(*string* text)\n- em(*string* text)\n- codespan(*string* code)\n- br()\n- del(*string* text)\n- link(*string* href, *string* title, *string* text)\n- image(*string* href, *string* title, *string* text)\n- text(*string* text)\n\n<h2 id=\"tokenizer\">The tokenizer</h2>\n\nThe tokenizer defines how to turn markdown text into tokens.\n\n**Example:** Overriding default `codespan` tokenizer to include LaTeX.\n\n```js\n// Create reference instance\nconst marked = require('marked');\n\n// Override function\nconst tokenizer = {\n  codespan(src) {\n    const match = src.match(/\\$+([^\\$\\n]+?)\\$+/);\n    if (match) {\n      return {\n        type: 'codespan',\n        raw: match[0],\n        text: match[1].trim()\n      };\n    }\n\n    // return false to use original codespan tokenizer\n    return false;\n  }\n};\n\nmarked.use({ tokenizer });\n\n// Run marked\nconsole.log(marked('$ latex code $\\n\\n` other code `'));\n```\n\n**Output:**\n\n```html\n<p><code>latex code</code></p>\n<p><code>other code</code></p>\n```\n\n### Block level tokenizer methods\n\n- space(*string* src)\n- code(*string* src)\n- fences(*string* src)\n- heading(*string* src)\n- nptable(*string* src)\n- hr(*string* src)\n- blockquote(*string* src)\n- list(*string* src)\n- html(*string* src)\n- def(*string* src)\n- table(*string* src)\n- lheading(*string* src)\n- paragraph(*string* src)\n- text(*string* src)\n\n### Inline level tokenizer methods\n\n- escape(*string* src)\n- tag(*string* src, *bool* inLink, *bool* inRawBlock)\n- link(*string* src)\n- reflink(*string* src, *object* links)\n- strong(*string* src)\n- em(*string* src)\n- codespan(*string* src)\n- br(*string* src)\n- del(*string* src)\n- autolink(*string* src, *function* mangle)\n- url(*string* src, *function* mangle)\n- inlineText(*string* src, *bool* inRawBlock, *function* smartypants)\n\n`mangle` is a method that changes text to HTML character references:\n\n```js\nmangle('test@example.com')\n// \"&#x74;&#101;&#x73;&#116;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#x63;&#111;&#x6d;\"\n```\n\n`smartypants` is a method that translates plain ASCII punctuation characters into \u201csmart\u201d typographic punctuation HTML entities:\n\nhttps://daringfireball.net/projects/smartypants/\n\n```js\nsmartypants('\"this ... string\"')\n// \"\u201cthis \u2026 string\u201d\"\n```\n\n<h2 id=\"walk-tokens\">Walk Tokens</h2>\n\nThe walkTokens function gets called with every token. Child tokens are called before moving on to sibling tokens. Each token is passed by reference so updates are persisted when passed to the parser. The return value of the function is ignored.\n\n**Example:** Overriding heading tokens to start at h2.\n\n```js\nconst marked = require('marked');\n\n// Override function\nconst walkTokens = (token) => {\n  if (token.type === 'heading') {\n    token.depth += 1;\n  }\n};\n\nmarked.use({ walkTokens });\n\n// Run marked\nconsole.log(marked('# heading 2\\n\\n## heading 3'));\n```\n\n**Output:**\n\n```html\n<h2 id=\"heading-2\">heading 2</h2>\n<h3 id=\"heading-3\">heading 3</h3>\n```\n\n<h2 id=\"lexer\">The lexer</h2>\n\nThe lexer takes a markdown string and calls the tokenizer functions.\n\n<h2 id=\"parser\">The parser</h2>\n\nThe parser takes tokens as input and calls the renderer functions.\n\n***\n\n<h2 id=\"extend\">Access to lexer and parser</h2>\n\nYou also have direct access to the lexer and parser if you so desire.\n\n``` js\nconst tokens = marked.lexer(markdown, options);\nconsole.log(marked.parser(tokens, options));\n```\n\n``` js\nconst lexer = new marked.Lexer(options);\nconst tokens = lexer.lex(markdown);\nconsole.log(tokens);\nconsole.log(lexer.tokenizer.rules.block); // block level rules used\nconsole.log(lexer.tokenizer.rules.inline); // inline level rules used\nconsole.log(marked.Lexer.rules.block); // all block level rules\nconsole.log(marked.Lexer.rules.inline); // all inline level rules\n```\n\n``` bash\n$ node\n> require('marked').lexer('> I am using marked.')\n[\n  {\n    type: \"blockquote\",\n    raw: \"> I am using marked.\",\n    tokens: [\n      {\n        type: \"paragraph\",\n        raw: \"I am using marked.\",\n        text: \"I am using marked.\",\n        tokens: [\n          {\n            type: \"text\",\n            raw: \"I am using marked.\",\n            text: \"I am using marked.\"\n          }\n        ]\n      }\n    ]\n  },\n  links: {}\n]\n```\n\nThe Lexer builds an array of tokens, which will be passed to the Parser.\nThe Parser processes each token in the token array:\n\n``` js\nconst marked = require('marked');\n\nconst md = `\n  # heading\n\n  [link][1]\n\n  [1]: #heading \"heading\"\n`;\n\nconst tokens = marked.lexer(md);\nconsole.log(tokens);\n\nconst html = marked.parser(tokens);\nconsole.log(html);\n```\n\n``` bash\n[\n  {\n    type: \"heading\",\n    raw: \"  # heading\\n\\n\",\n    depth: 1,\n    text: \"heading\",\n    tokens: [\n      {\n        type: \"text\",\n        raw: \"heading\",\n        text: \"heading\"\n      }\n    ]\n  },\n  {\n    type: \"paragraph\",\n    raw: \"  [link][1]\",\n    text: \"  [link][1]\",\n    tokens: [\n      {\n        type: \"text\",\n        raw: \"  \",\n        text: \"  \"\n      },\n      {\n        type: \"link\",\n        raw: \"[link][1]\",\n        text: \"link\",\n        href: \"#heading\",\n        title: \"heading\",\n        tokens: [\n          {\n            type: \"text\",\n            raw: \"link\",\n            text: \"link\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    type: \"space\",\n    raw: \"\\n\\n\"\n  },\n  links: {\n    \"1\": {\n      href: \"#heading\",\n      title: \"heading\"\n    }\n  }\n]\n<h1 id=\"heading\">heading</h1>\n<p>  <a href=\"#heading\" title=\"heading\">link</a></p>\n```\n",
          "filepath": "data/repos/markedjs/marked-2.0/docs/USING_PRO.md",
          "repo": "markedjs/marked",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "6a155283-7234-42b6-8410-a55e1e2f00e6",
        "score": 0.015625,
        "payload": {
          "text": "const commonjs = require('@rollup/plugin-commonjs');\nconst babel = require('@rollup/plugin-babel').default;\nconst license = require('rollup-plugin-license');\n\nmodule.exports = {\n  input: 'src/marked.js',\n  output: {\n    file: 'lib/marked.js',\n    format: 'umd',\n    name: 'marked'\n  },\n  plugins: [\n    license({\n      banner: `\nDO NOT EDIT THIS FILE\nThe code in this file is generated from files in ./src/\n`\n    }),\n    license({\n      banner: `\nmarked - a markdown parser\nCopyright (c) 2011-${new Date().getFullYear()}, Christopher Jeffrey. (MIT Licensed)\nhttps://github.com/markedjs/marked\n`\n    }),\n    commonjs(),\n    babel({\n      presets: [['@babel/preset-env', { loose: true }]]\n    })\n  ]\n};\n",
          "filepath": "data/repos/markedjs/marked-2.0/rollup.config.js",
          "repo": "markedjs/marked",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "29b0a5e2-5018-4e47-8da7-771b95f91624",
        "score": 0.015384615384615385,
        "payload": {
          "text": "[test]: http://google.com/ \"Google\"\n\n# A heading\n\nJust a note, I've found that I can't test my markdown parser vs others.\nFor example, both markdown.js and showdown code blocks in lists wrong. They're\nalso completely [inconsistent][test] with regards to paragraphs in list items.\n\nA link. Not anymore.\n\n<aside>This will make me fail the test because\nmarkdown.js doesnt acknowledge arbitrary html blocks =/</aside>\n\n* List Item 1\n\n* List Item 2\n  * New List Item 1\n    Hi, this is a list item.\n  * New List Item 2\n    Another item\n        Code goes here.\n        Lots of it...\n  * New List Item 3\n    The last item\n\n* List Item 3\nThe final item.\n\n* List Item 4\nThe real final item.\n\nParagraph.\n\n> * bq Item 1\n> * bq Item 2\n>   * New bq Item 1\n>   * New bq Item 2\n>   Text here\n\n* * *\n\n> Another blockquote!\n> I really need to get\n> more creative with\n> mockup text..\n> markdown.js breaks here again\n\nAnother Heading\n-------------\n\nHello *world*. Here is a [link](//hello).\nAnd an image ![alt](src).\n\n    Code goes here.\n    Lots of it...\n",
          "filepath": "data/repos/markedjs/marked-2.0/test/specs/new/main.md",
          "repo": "markedjs/marked",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-433",
    "model_patch": "diff --git a/borders.js b/borders.js\n--- a/borders.js\n+++ b/borders.js\n@@ -3,6 +3,7 @@\n     const { left, top, width, height } = this.getAbsoluteLayout();\n \n     const {\n+      borderWidth = 0,\n       borderTopWidth = 0,\n       borderRightWidth = 0,\n       borderBottomWidth = 0,\n@@ -22,6 +23,7 @@\n     // border top\n     this.drawHorizontalBorder(\n       [\n+        left + borderWidth / 2,\n         left + (borderTopLeftRadius > 0 ? borderTopWidth / 2 : 0),\n         top + borderTopWidth / 2,\n       ],\n@@ -30,6 +32,7 @@\n       borderTopLeftRadius,\n       borderTopRightRadius,\n       borderTopWidth,\n+      borderWidth,\n       borderTopColor,\n       borderTopStyle,\n     );\n@@ -36,6 +39,7 @@\n     // border right\n     this.drawVerticalBorder(\n       [\n+        top + borderWidth / 2,\n         left + width - borderRightWidth / 2,\n         top + (borderTopRightRadius > 0 ? borderRightWidth / 2 : 0),\n       ],\n@@ -44,6 +48,7 @@\n       -borderTopRightRadius,\n       -borderBottomRightRadius,\n       borderRightWidth,\n+      borderWidth,\n       borderRightColor,\n       borderRightStyle,\n     );\n@@ -50,6 +55,7 @@\n     // border bottom\n     this.drawHorizontalBorder(\n       [\n+        left + borderWidth / 2,\n         left +\n           width -\n           (borderBottomRightRadius > 0 ? borderBottomWidth / 2 : 0),\n@@ -58,6 +64,7 @@\n       -borderBottomRightRadius,\n       -borderBottomLeftRadius,\n       borderBottomWidth,\n+      borderWidth,\n       borderBottomColor,\n       borderBottomStyle,\n     );\n@@ -64,6 +71,7 @@\n     // border left\n     this.drawVerticalBorder(\n       [\n+        top + borderWidth / 2,\n         left + borderLeftWidth / 2,\n         top + height - (borderBottomLeftRadius > 0 ? borderLeftWidth / 2 : 0),\n       ],\n@@ -72,6 +80,7 @@\n       borderBottomLeftRadius,\n       borderTopLeftRadius,\n       borderLeftWidth,\n+      borderWidth,\n       borderLeftColor,\n       borderLeftStyle,\n     );",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 166.69,
      "issue_embedding_time_ms": 166.69,
      "retrieval_time_ms_splade": 8.3,
      "retrieval_time_ms": 8.3,
      "total_retrieval_time_ms": 174.99,
      "generation_time_ms": 4918.95,
      "total_io_time_ms": 5093.94,
      "input_total_token_limit": null,
      "issue_text_tokens": 529,
      "vlm_tokens": 0,
      "retrieved_tokens": 5646,
      "prompt_template_tokens": 505,
      "total_input_prompt_tokens": 6680,
      "output_generated_tokens": 544,
      "total_io_tokens": 7224,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nSetting a border on a rounded <View> causes unexpected results\\n\\r\\n**OS:**\\r\\nmacOS 10.13 High Sierra\\r\\n\\r\\n**React-pdf version:**\\r\\n@react-pdf/renderer@^1.0.0-alpha.25\\r\\n\\r\\n**Description:**\\r\\nI am attempting to draw a circle with a border by rounding a `<View />` and adding a border. \\r\\n\\r\\n```\\r\\nconst Quixote = () => (\\r\\n  <Document>\\r\\n    <Page style={styles.body}>\\r\\n      <View style={styles.circle}></View>\\r\\n    </Page>\\r\\n  </Document>\\r\\n);\\r\\n\\r\\nconst styles = StyleSheet.create({\\r\\n  body: {\\r\\n    paddingTop: 35,\\r\\n    paddingBottom: 65,\\r\\n    paddingHorizontal: 35,\\r\\n  },\\r\\n  circle: {\\r\\n    width: 50,\\r\\n    height: 50,\\r\\n    backgroundColor: 'green',\\r\\n    borderRadius: 50,\\r\\n    border: '2 solid red'\\r\\n  }\\r\\n\\r\\n});\\r\\n\\r\\nReactPDF.render(<Quixote />);\\r\\n```\\r\\n\\r\\nWhen I set the `borderRadius` to 1, the border drawn mostly goes around the view. \\r\\n![screen shot 2018-11-29 at 12 14 46 pm](https://user-images.githubusercontent.com/4199296/49249306-b037e380-f3d0-11e8-96cd-29eee986683b.png)\\r\\n\\r\\nWhen I set `borderRadius` to 3, the border drawn already starts to have issues.\\r\\n![screen shot 2018-11-29 at 12 14 51 pm](https://user-images.githubusercontent.com/4199296/49249354-c5ad0d80-f3d0-11e8-8e2d-393dee2530e1.png)\\r\\n\\r\\nAs I increase the borderRadius to make the view more circular the rendering gets really strange.\\r\\n`borderRadius @ 20`\\r\\n![screen shot 2018-11-29 at 12 14 58 pm](https://user-images.githubusercontent.com/4199296/49249430-f42ae880-f3d0-11e8-9272-cefd5bca1b0d.png)\\r\\n\\r\\n`borderRadius @ 30`\\r\\n![screen shot 2018-11-29 at 12 15 02 pm](https://user-images.githubusercontent.com/4199296/49249444-fb51f680-f3d0-11e8-8f24-49d22bc27962.png)\\r\\n\\r\\nI would love the border implementation to better support rounded views! Thanks a bunch!\\n\\n</issue>\\n\\n<code>\\n[start of index.js]\\n/* eslint react/prop-types: 0 */\\n/* eslint react/jsx-sort-props: 0 */\\n\\nimport React from 'react';\\nimport ReactPDF, {\\n  Document,\\n  Page,\\n  View,\\n  Text,\\n  StyleSheet,\\n} from '../../dist/react-pdf.es.js';\\n\\nconst styles = StyleSheet.create({\\n  select: {\\n    height: '9%',\\n    alignItems: 'center',\\n    flexDirection: 'row',\\n    paddingHorizontal: '30px',\\n  },\\n  bar: {\\n    flexGrow: 1,\\n    height: '10px',\\n    backgroundColor: 'gray',\\n  },\\n  barMiddle: {\\n    width: '50%',\\n    height: '100%',\\n    backgroundColor: 'lightgray',\\n    margin: 'auto',\\n  },\\n  knob: {\\n    alignItems: 'center',\\n    justifyContent: 'center',\\n    width: '20px',\\n    height: '20px',\\n    borderRadius: 10,\\n    borderWidth: 3,\\n    borderColor: 'orange',\\n    position: 'absolute',\\n    backgroundColor: 'white',\\n    fontSize: 8,\\n    top: -6,\\n  },\\n  text: {\\n    fontSize: 10,\\n  },\\n});\\n\\nconst Knob = ({ value }) => (\\n  <View style={[styles.knob, { left: `${value - 3}%` }]}>\\n    <Text style={{ fontSize: 8, marginTop: 4 }}>{value}</Text>\\n  </View>\\n);\\n\\nconst Select = props => (\\n  <View style={styles.select}>\\n    <Text style={[styles.text, { marginRight: '15px' }]}>0%</Text>\\n    <View style={styles.bar}>\\n      <View style={styles.barMiddle} />\\n      <Knob {...props} />\\n    </View>\\n    <Text style={[styles.text, { marginLeft: '15px' }]}>100%</Text>\\n  </View>\\n);\\n\\nconst doc = (\\n  <Document>\\n    <Page size=\\\"A5\\\">\\n      <Select value={0} />\\n      <Select value={10} />\\n      <Select value={20} />\\n      <Select value={30} />\\n      <Select value={40} />\\n      <Select value={50} />\\n      <Select value={60} />\\n      <Select value={70} />\\n      <Select value={80} />\\n      <Select value={90} />\\n      <Select value={100} />\\n    </Page>\\n  </Document>\\n);\\n\\nReactPDF.render(doc, `${__dirname}/output.pdf`);\\n\\n[end of index.js]\\n[start of index.js]\\n/* eslint react/prop-types: 0 */\\n/* eslint react/jsx-sort-props: 0 */\\n\\nimport React from 'react';\\nimport ReactPDF, {\\n  Document,\\n  Page,\\n  View,\\n  StyleSheet,\\n} from '../../dist/react-pdf.es.js';\\n\\nconst styles = StyleSheet.create({\\n  body: {\\n    padding: 35,\\n  },\\n  content: {\\n    padding: 20,\\n    '@media max-width: 400': {\\n      flexDirection: 'column',\\n    },\\n    '@media min-width: 400': {\\n      flexDirection: 'row',\\n    },\\n  },\\n  block: {\\n    height: 150,\\n    width: 150,\\n    backgroundColor: 'red',\\n  },\\n});\\n\\nconst MediaComponent = () => (\\n  <View style={styles.content}>\\n    <View style={[styles.block, { backgroundColor: 'red' }]} />\\n    <View style={[styles.block, { backgroundColor: 'green' }]} />\\n  </View>\\n);\\n\\nconst doc = (\\n  <Document>\\n    <Page style={styles.body} size={[500, 600]}>\\n      <MediaComponent />\\n    </Page>\\n    <Page style={styles.body} size={[300, 600]}>\\n      <MediaComponent />\\n    </Page>\\n  </Document>\\n);\\n\\nReactPDF.render(doc, `${__dirname}/output.pdf`);\\n\\n[end of index.js]\\n[start of index.js]\\nimport React from 'react';\\nimport ReactPDF, {\\n  Text,\\n  Document,\\n  Font,\\n  Page,\\n  StyleSheet,\\n  Image,\\n  View,\\n} from '../../dist/react-pdf.es.js';\\nimport Header from './Header';\\nimport Education from './Education';\\nimport Experience from './Experience';\\nimport Skills from './Skills';\\n\\nconst styles = StyleSheet.create({\\n  page: {\\n    padding: 30,\\n  },\\n  container: {\\n    flex: 1,\\n    flexDirection: 'row',\\n    '@media max-width: 400': {\\n      flexDirection: 'column',\\n    },\\n  },\\n  image: {\\n    marginBottom: 10,\\n  },\\n  leftColumn: {\\n    flexDirection: 'column',\\n    width: 170,\\n    paddingTop: 30,\\n    paddingRight: 15,\\n    '@media max-width: 400': {\\n      width: '100%',\\n      paddingRight: 0,\\n    },\\n    '@media orientation: landscape': {\\n      width: 200,\\n    },\\n  },\\n  footer: {\\n    fontSize: 12,\\n    fontFamily: 'Lato Bold',\\n    textAlign: 'center',\\n    marginTop: 25,\\n    paddingTop: 10,\\n    borderWidth: 3,\\n    borderColor: 'gray',\\n    borderStyle: 'dashed',\\n    '@media orientation: landscape': {\\n      marginTop: 10,\\n    },\\n  },\\n});\\n\\nFont.register(`${__dirname}/fonts/fonts/Open_Sans/OpenSans-Regular.ttf`, {\\n  family: 'Open Sans',\\n});\\nFont.register(`${__dirname}/fonts/fonts/Lato/Lato-Regular.ttf`, {\\n  family: 'Lato',\\n});\\nFont.register(`${__dirname}/fonts/fonts/Lato/Lato-Italic.ttf`, {\\n  family: 'Lato Italic',\\n});\\nFont.register(`${__dirname}/fonts/fonts/Lato/Lato-Bold.ttf`, {\\n  family: 'Lato Bold',\\n});\\n\\nconst Resume = props => (\\n  <Page {...props} style={styles.page}>\\n    <Header />\\n    <View style={styles.container}>\\n      <View style={styles.leftColumn}>\\n        <Image\\n          src=\\\"https://react-pdf.org/static/images/luke.jpg\\\"\\n          style={styles.image}\\n        />\\n        <Education />\\n        <Skills />\\n      </View>\\n      <Experience />\\n    </View>\\n    <Text style={styles.footer}>This IS the candidate you are looking for</Text>\\n  </Page>\\n);\\n\\nconst Output = () => (\\n  <Document\\n    author=\\\"Luke Skywalker\\\"\\n    keywords=\\\"awesome, resume, start wars\\\"\\n    subject=\\\"The resume of Luke Skywalker\\\"\\n    title=\\\"Resume\\\"\\n  >\\n    <Resume size=\\\"A4\\\" />\\n    <Resume orientation=\\\"landscape\\\" size=\\\"A4\\\" />\\n    <Resume size={[380, 1250]} />\\n  </Document>\\n);\\n\\nReactPDF.render(<Output />, `${__dirname}/output.pdf`);\\n\\n[end of index.js]\\n[start of borders.js]\\nconst Borders = {\\n  drawBorders() {\\n    const { left, top, width, height } = this.getAbsoluteLayout();\\n\\n    const {\\n      borderTopWidth = 0,\\n      borderRightWidth = 0,\\n      borderBottomWidth = 0,\\n      borderLeftWidth = 0,\\n    } = this;\\n\\n    const {\\n      borderTopLeftRadius = 0,\\n      borderTopRightRadius = 0,\\n      borderBottomRightRadius = 0,\\n      borderBottomLeftRadius = 0,\\n      borderTopColor = 'black',\\n      borderRightColor = 'black',\\n      borderBottomColor = 'black',\\n      borderLeftColor = 'black',\\n      borderTopStyle = 'solid',\\n      borderRightStyle = 'solid',\\n      borderBottomStyle = 'solid',\\n      borderLeftStyle = 'solid',\\n    } = this.getComputedStyles();\\n\\n    // Save current graphics stack\\n    this.root.instance.save();\\n\\n    // border top\\n    this.drawHorizontalBorder(\\n      [\\n        left + (borderTopLeftRadius > 0 ? borderTopWidth / 2 : 0),\\n        top + borderTopWidth / 2,\\n      ],\\n      [\\n        left + width - (borderTopRightRadius > 0 ? borderTopWidth / 2 : 0),\\n        top + borderTopWidth / 2,\\n      ],\\n      borderTopLeftRadius,\\n      borderTopRightRadius,\\n      borderTopWidth,\\n      borderTopColor,\\n      borderTopStyle,\\n    );\\n\\n    // border right\\n    this.drawVerticalBorder(\\n      [\\n        left + width - borderRightWidth / 2,\\n        top + (borderTopRightRadius > 0 ? borderRightWidth / 2 : 0),\\n      ],\\n      [\\n        left + width - borderRightWidth / 2,\\n        top + height - (borderBottomRightRadius > 0 ? borderRightWidth / 2 : 0),\\n      ],\\n      -borderTopRightRadius,\\n      -borderBottomRightRadius,\\n      borderRightWidth,\\n      borderRightColor,\\n      borderRightStyle,\\n    );\\n\\n    // border bottom\\n    this.drawHorizontalBorder(\\n      [\\n        left +\\n          width -\\n          (borderBottomRightRadius > 0 ? borderBottomWidth / 2 : 0),\\n        top + height - borderBottomWidth / 2,\\n      ],\\n      [\\n        left + (borderBottomLeftRadius > 0 ? borderBottomWidth / 2 : 0),\\n        top + height - borderBottomWidth / 2,\\n      ],\\n      -borderBottomRightRadius,\\n      -borderBottomLeftRadius,\\n      borderBottomWidth,\\n      borderBottomColor,\\n      borderBottomStyle,\\n    );\\n\\n    // border left\\n    this.drawVerticalBorder(\\n      [\\n        left + borderLeftWidth / 2,\\n        top + height - (borderBottomLeftRadius > 0 ? borderLeftWidth / 2 : 0),\\n      ],\\n      [\\n        left + borderLeftWidth / 2,\\n        top + (borderTopLeftRadius > 0 ? borderLeftWidth / 2 : 0),\\n      ],\\n      borderBottomLeftRadius,\\n      borderTopLeftRadius,\\n      borderLeftWidth,\\n      borderLeftColor,\\n      borderLeftStyle,\\n    );\\n\\n    // Restore graphics stack to avoid side effects\\n    this.root.instance.restore();\\n  },\\n  traceBorder(style, width) {\\n    switch (style) {\\n      case 'dashed':\\n        this.root.instance.dash(width * 2, { space: width * 1.2 }).stroke();\\n        break;\\n      case 'dotted':\\n        this.root.instance.dash(width, { space: width * 1.2 }).stroke();\\n        break;\\n      default:\\n        this.root.instance.stroke();\\n    }\\n  },\\n  drawHorizontalBorder(p1, p2, r1, r2, width, color, style) {\\n    if (width <= 0) return;\\n\\n    this.root.instance\\n      .lineWidth(width)\\n      .moveTo(p1[0], p1[1] + r1)\\n      .quadraticCurveTo(p1[0], p1[1], p1[0] + r1, p1[1])\\n      .lineTo(p2[0] - r2, p2[1])\\n      .quadraticCurveTo(p2[0], p2[1], p2[0], p2[1] + r2)\\n      .strokeColor(color);\\n\\n    this.traceBorder(style, width);\\n  },\\n  drawVerticalBorder(p1, p2, r1, r2, width, color, style) {\\n    if (width <= 0) return;\\n\\n    this.root.instance\\n      .lineWidth(width)\\n      .moveTo(p1[0] + r1, p1[1])\\n      .quadraticCurveTo(p1[0], p1[1], p1[0], p1[1] - r1)\\n      .lineTo(p2[0], p2[1] + r2)\\n      .quadraticCurveTo(p2[0], p2[1], p2[0] + r2, p2[1])\\n      .strokeColor(color);\\n\\n    this.traceBorder(style, width);\\n  },\\n};\\n\\nexport default Borders;\\n\\n[end of borders.js]\\n[start of index.js]\\n/* eslint react/prop-types: 0 */\\n/* eslint react/jsx-sort-props: 0 */\\n\\nimport React from 'react';\\nimport ReactPDF, {\\n  Document,\\n  Page,\\n  Text,\\n  Image,\\n  StyleSheet,\\n  Font,\\n} from '../../dist/react-pdf.es.js';\\n\\nconst styles = StyleSheet.create({\\n  body: {\\n    paddingTop: 35,\\n    paddingBottom: 45,\\n    paddingHorizontal: 35,\\n  },\\n  title: {\\n    fontSize: 24,\\n    textAlign: 'center',\\n    fontFamily: 'Roboto',\\n  },\\n  author: {\\n    fontSize: 12,\\n    textAlign: 'center',\\n    marginBottom: 40,\\n    fontFamily: 'Roboto',\\n  },\\n  subtitle: {\\n    fontSize: 16,\\n    margin: 12,\\n    fontFamily: 'Roboto',\\n  },\\n  text: {\\n    margin: 12,\\n    fontSize: 12,\\n    fontFamily: 'Roboto',\\n    textAlign: 'justify',\\n  },\\n  image: {\\n    height: 150,\\n    marginBottom: 30,\\n    marginHorizontal: 100,\\n  },\\n  header: {\\n    fontSize: 12,\\n    color: 'grey',\\n    marginBottom: 15,\\n    textAlign: 'center',\\n    fontFamily: 'Roboto',\\n  },\\n  footer: {\\n    position: 'absolute',\\n    fontSize: 12,\\n    bottom: 25,\\n    left: 35,\\n    right: 0,\\n    textAlign: 'center',\\n    color: 'grey',\\n    fontFamily: 'Roboto',\\n  },\\n});\\n\\nFont.register(`${__dirname}/fonts/Roboto-Regular.ttf`, { family: 'Roboto' });\\n\\nconst Subtitle = ({ children, ...props }) => (\\n  <Text style={styles.subtitle} {...props}>\\n    {children}\\n  </Text>\\n);\\n\\nconst doc = (\\n  <Document>\\n    <Page style={styles.body} wrap>\\n      <Text style={styles.header} fixed>\\n        ~ Created with react-pdf ~\\n      </Text>\\n      <Text style={styles.title}>Don Quijote de la Mancha</Text>\\n      <Text style={styles.author}>Miguel de Cervantes</Text>\\n      <Image\\n        style={styles.image}\\n        src=\\\"http://static.donquijote.org/images/blogs/dq-reg/don-quijote-de-la-mancha.jpg\\\"\\n      />\\n      <Subtitle>\\n        Cap\\u00edtulo I: Que trata de la condici\\u00f3n y ejercicio del famoso hidalgo D.\\n        Quijote de la Mancha\\n      </Subtitle>\\n      <Text style={styles.text}>\\n        En un lugar de la Mancha, de cuyo nombre no quiero acordarme, no ha\\n        mucho tiempo que viv\\u00eda un hidalgo de los de lanza en astillero, adarga\\n        antigua, roc\\u00edn flaco y galgo corredor. Una olla de algo m\\u00e1s vaca que\\n        carnero, salpic\\u00f3n las m\\u00e1s noches, duelos y quebrantos los s\\u00e1bados,\\n        lentejas los viernes, alg\\u00fan palomino de a\\u00f1adidura los domingos,\\n        consum\\u00edan las tres partes de su hacienda. El resto della conclu\\u00edan sayo\\n        de velarte, calzas de velludo para las fiestas con sus pantuflos de lo\\n        mismo, los d\\u00edas de entre semana se honraba con su vellori de lo m\\u00e1s\\n        fino. Ten\\u00eda en su casa una ama que pasaba de los cuarenta, y una sobrina\\n        que no llegaba a los veinte, y un mozo de campo y plaza, que as\\u00ed\\n        ensillaba el roc\\u00edn como tomaba la podadera. Frisaba la edad de nuestro\\n        hidalgo con los cincuenta a\\u00f1os, era de complexi\\u00f3n recia, seco de carnes,\\n        enjuto de rostro; gran madrugador y amigo de la caza. Quieren decir que\\n        ten\\u00eda el sobrenombre de Quijada o Quesada (que en esto hay alguna\\n        diferencia en los autores que deste caso escriben), aunque por\\n        conjeturas veros\\u00edmiles se deja entender que se llama Quijana; pero esto\\n        importa poco a nuestro cuento; basta que en la narraci\\u00f3n d\\u00e9l no se salga\\n        un punto de la verdad.\\n      </Text>\\n      <Text style={styles.text}>\\n        Es, pues, de saber, que este sobredicho hidalgo, los ratos que estaba\\n        ocioso (que eran los m\\u00e1s del a\\u00f1o) se daba a leer libros de caballer\\u00edas\\n        con tanta afici\\u00f3n y gusto, que olvid\\u00f3 casi de todo punto el ejercicio de\\n        la caza, y aun la administraci\\u00f3n de su hacienda; y lleg\\u00f3 a tanto su\\n        curiosidad y desatino en esto, que vendi\\u00f3 muchas hanegas de tierra de\\n        sembradura, para comprar libros de caballer\\u00edas en que leer; y as\\u00ed llev\\u00f3\\n        a su casa todos cuantos pudo haber dellos; y de todos ningunos le\\n        parec\\u00edan tan bien como los que compuso el famoso Feliciano de Silva:\\n        porque la claridad de su prosa, y aquellas intrincadas razones suyas, le\\n        parec\\u00edan de perlas; y m\\u00e1s cuando llegaba a leer aquellos requiebros y\\n        cartas de desaf\\u00edo, donde en muchas partes hallaba escrito: la raz\\u00f3n de\\n        la sinraz\\u00f3n que a mi raz\\u00f3n se hace, de tal manera mi raz\\u00f3n enflaquece,\\n        que con raz\\u00f3n me quejo.\\n      </Text>\\n      <Text style={styles.text}>\\n        Con estas y semejantes razones perd\\u00eda el pobre caballero el juicio, y\\n        desvel\\u00e1base por entenderlas, y desentra\\u00f1arles el sentido, que no se lo\\n        sacara, ni las entendiera el mismo Arist\\u00f3teles, si resucitara para s\\u00f3lo\\n        ello. No estaba muy bien con las heridas que don Belianis daba y\\n        recib\\u00eda, porque se imaginaba que por grandes maestros que le hubiesen\\n        curado, no dejar\\u00eda de tener el rostro y todo el cuerpo lleno de\\n        cicatrices y se\\u00f1ales; pero con todo alababa en su autor aquel acabar su\\n        libro con la promesa de aquella inacabable aventura, y muchas veces le\\n        vino deseo de tomar la pluma, y darle fin al pie de la letra como all\\u00ed\\n        se promete; y sin duda alguna lo hiciera, y aun saliera con ello, si\\n        otros mayores y continuos pensamientos no se lo estorbaran. Tuvo muchas\\n        veces competencia con el cura de su lugar (que era hombre docto graduado\\n        en Sig\\u00fcenza), sobre cu\\u00e1l hab\\u00eda sido mejor caballero, Palmer\\u00edn de\\n        Inglaterra o Amad\\u00eds de Gaula; mas maese Nicol\\u00e1s, barbero del mismo\\n        pueblo, dec\\u00eda que ninguno llegaba al caballero del Febo, y que si alguno\\n        se le pod\\u00eda comparar, era don Galaor, hermano de Amad\\u00eds de Gaula, porque\\n        ten\\u00eda muy acomodada condici\\u00f3n para todo; que no era caballero\\n        melindroso, ni tan llor\\u00f3n como su hermano, y que en lo de la valent\\u00eda no\\n        le iba en zaga.\\n      </Text>\\n      <Text style={styles.text}>\\n        En resoluci\\u00f3n, \\u00e9l se enfrasc\\u00f3 tanto en su lectura, que se le pasaban las\\n        noches leyendo de claro en claro, y los d\\u00edas de turbio en turbio, y as\\u00ed,\\n        del poco dormir y del mucho leer, se le sec\\u00f3 el cerebro, de manera que\\n        vino a perder el juicio. Llen\\u00f3sele la fantas\\u00eda de todo aquello que le\\u00eda\\n        en los libros, as\\u00ed de encantamientos, como de pendencias, batallas,\\n        desaf\\u00edos, heridas, requiebros, amores, tormentas y disparates\\n        imposibles, y asent\\u00f3sele de tal modo en la imaginaci\\u00f3n que era verdad\\n        toda aquella m\\u00e1quina de aquellas so\\u00f1adas invenciones que le\\u00eda, que para\\n        \\u00e9l no hab\\u00eda otra historia m\\u00e1s cierta en el mundo.\\n      </Text>\\n      <Subtitle break>\\n        Cap\\u00edtulo II: Que trata de la primera salida que de su tierra hizo el\\n        ingenioso Don Quijote\\n      </Subtitle>\\n      <Image\\n        style={styles.image}\\n        src=\\\"https://panampost.com/wp-content/uploads/don-quijote-lessons.jpg\\\"\\n      />\\n      <Text style={styles.text}>\\n        Hechas, pues, estas prevenciones, no quiso aguardar m\\u00e1s tiempo a poner\\n        en efeto su pensamiento, apret\\u00e1ndole a ello la falta que \\u00e9l pensaba que\\n        hac\\u00eda en el mundo su tardanza, seg\\u00fan eran los agravios que pensaba\\n        deshacer, tuertos que enderezar, sinrazones que emendar y abusos que\\n        mejorar y deudas que satisfacer. Y as\\u00ed, sin dar parte a persona alguna\\n        de su intenci\\u00f3n y sin que nadie le viese, una ma\\u00f1ana, antes del d\\u00eda, que\\n        era uno de los calurosos del mes de Julio, se arm\\u00f3 de todas sus armas,\\n        subi\\u00f3 sobre Rocinante, puesta su mal compuesta celada, embraz\\u00f3 su\\n        adarga, tom\\u00f3 su lanza y por la puerta falsa de un corral sali\\u00f3 al campo\\n        con grand\\u00edsimo contento y alborozo de ver con cu\\u00e1nta facilidad hab\\u00eda\\n        dado principio a su buen deseo. Mas apenas se vio en el campo cuando le\\n        asalt\\u00f3 un pensamiento terrible, y tal, que por poco le hiciera dejar la\\n        comenzada empresa; y fue que le vino a la memoria que no era armado\\n        caballero, y que, conforme a ley de caballer\\u00eda, ni pod\\u00eda ni deb\\u00eda tomar\\n        armas con ning\\u00fan caballero; y puesto que lo fuera, hab\\u00eda de llevar armas\\n        blancas, como novel caballero, sin empresa en el escudo, hasta que por\\n        su esfuerzo la ganase. Estos pensamientos le hicieron titubear en su\\n        prop\\u00f3sito; mas pudiendo m\\u00e1s su locura que otra raz\\u00f3n alguna, propuso de\\n        hacerse armar caballero del primero que topase, a imitaci\\u00f3n de otros\\n        muchos que as\\u00ed lo hicieron, seg\\u00fan \\u00e9l hab\\u00eda le\\u00eddo en los libros que tal\\n        le ten\\u00edan. En lo de las armas blancas, pensaba limpiarlas de manera, en\\n        teniendo lugar, que lo fuesen m\\u00e1s que un arminio; y con esto se quiet\\u00f3 y\\n        prosigui\\u00f3 su camino, sin llevar otro que aquel que su caballo quer\\u00eda,\\n        creyendo que en aquello consist\\u00eda la fuerza de las aventuras\\n      </Text>\\n      <Text style={styles.text}>\\n        Yendo, pues, caminando nuestro flamante aventurero, iba hablando consigo\\n        mesmo, y diciendo: \\u2014\\u00bfQui\\u00e9n duda, sino que en los venideros tiempos,\\n        cuando salga a luz la verdadera historia de mis famosos hechos, que el\\n        sabio que los escribiere no ponga, cuando llegue a contar esta mi\\n        primera salida tan de ma\\u00f1ana, desta manera?: Apenas hab\\u00eda el rubicundo\\n        Apolo tendido por la faz de la ancha y espaciosa tierra las doradas\\n        hebras de sus hermosos cabellos, y apenas los peque\\u00f1os y pintados\\n        pajarillos con sus arpadas lenguas hab\\u00edan saludado con dulce y meliflua\\n        armon\\u00eda la venida de la rosada Aurora, que, dejando la blanda cama del\\n        celoso marido, por las puertas y balcones del manchego horizonte a los\\n        mortales se mostraba, cuando el famoso caballero don Quijote de la\\n        Mancha, dejando las ociosas plumas, subi\\u00f3 sobre su famoso caballo\\n        Rocinante y comenz\\u00f3 a caminar por el antiguo y conocido Campo de\\n        Montiel.\\n      </Text>\\n      <Text style={styles.text}>\\n        Y era la verdad que por \\u00e9l caminaba; y a\\u00f1adi\\u00f3 diciendo: \\u2014Dichosa edad y\\n        siglo dichoso aquel adonde saldr\\u00e1n a luz las famosas haza\\u00f1as m\\u00edas,\\n        dignas de entallarse en bronces, esculpirse en m\\u00e1rmoles y pintarse en\\n        tablas, para memoria en lo futuro. \\u00a1Oh t\\u00fa, sabio encantador, quienquiera\\n        que seas, a quien ha de tocar el ser coronista desta peregrina historia!\\n        Ru\\u00e9gote que no te olvides de mi buen Rocinante, compa\\u00f1ero eterno m\\u00edo en\\n        todos mis caminos y carreras.\\n      </Text>\\n      <Text style={styles.text}>\\n        Luego volv\\u00eda diciendo, como si verdaderamente fuera enamorado: \\u2014\\u00a1Oh\\n        princesa Dulcinea, se\\u00f1ora deste cautivo coraz\\u00f3n! Mucho agravio me\\n        habedes fecho en despedirme y reprocharme con el riguroso afincamiento\\n        de mandarme no parecer ante la vuestra fermosura. Pl\\u00e9gaos, se\\u00f1ora, de\\n        membraros deste vuestro sujeto coraz\\u00f3n, que tantas cuitas por vuestro\\n        amor padece. Con estos iba ensartando otros disparates, todos al modo de\\n        los que sus libros le hab\\u00edan ense\\u00f1ado, imitando en cuanto pod\\u00eda su\\n        lenguaje. Con esto caminaba tan despacio, y el sol entraba tan apriesa y\\n        con tanto ardor, que fuera bastante a derretirle los sesos, si algunos\\n        tuviera\\n      </Text>\\n      <Text style={styles.text}>\\n        Casi todo aquel d\\u00eda camin\\u00f3 sin acontecerle cosa que de contar fuese, de\\n        lo cual se desesperaba, porque quisiera topar luego luego con quien\\n        hacer experiencia del valor de su fuerte brazo. Autores hay que dicen\\n        que la primera aventura que le avino fue la del Puerto L\\u00e1pice, otros\\n        dicen que la de los molinos de viento; pero lo que yo he podido\\n        averiguar en este caso, y lo que he hallado escrito en los anales de la\\n        Mancha, es que \\u00e9l anduvo todo aquel d\\u00eda, y, al anochecer, su roc\\u00edn y \\u00e9l\\n        se hallaron cansados y muertos de hambre, y que, mirando a todas partes\\n        por ver si descubrir\\u00eda alg\\u00fan castillo o alguna majada de pastores donde\\n        recogerse y adonde pudiese remediar su mucha hambre y necesidad, vio, no\\n        lejos del camino por donde iba, una venta, que fue como si viera una\\n        estrella que, no a los portales, sino a los alc\\u00e1zares de su redenci\\u00f3n le\\n        encaminaba. Diose priesa a caminar, y lleg\\u00f3 a ella a tiempo que\\n        anochec\\u00eda.\\n      </Text>\\n      <Text\\n        style={styles.footer}\\n        render={({ pageNumber, totalPages }) => `${pageNumber} / ${totalPages}`}\\n        fixed\\n      />\\n    </Page>\\n  </Document>\\n);\\n\\nReactPDF.render(doc, `${__dirname}/output.pdf`);\\n\\n[end of index.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "index.js",
        "index.js",
        "index.js",
        "borders.js",
        "index.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "2b85fde6-3c55-42b8-b695-6f03f00e76ab",
        "score": 0.01639344262295082,
        "payload": {
          "text": "/* eslint react/prop-types: 0 */\n/* eslint react/jsx-sort-props: 0 */\n\nimport React from 'react';\nimport ReactPDF, {\n  Document,\n  Page,\n  View,\n  Text,\n  StyleSheet,\n} from '../../dist/react-pdf.es.js';\n\nconst styles = StyleSheet.create({\n  select: {\n    height: '9%',\n    alignItems: 'center',\n    flexDirection: 'row',\n    paddingHorizontal: '30px',\n  },\n  bar: {\n    flexGrow: 1,\n    height: '10px',\n    backgroundColor: 'gray',\n  },\n  barMiddle: {\n    width: '50%',\n    height: '100%',\n    backgroundColor: 'lightgray',\n    margin: 'auto',\n  },\n  knob: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '20px',\n    height: '20px',\n    borderRadius: 10,\n    borderWidth: 3,\n    borderColor: 'orange',\n    position: 'absolute',\n    backgroundColor: 'white',\n    fontSize: 8,\n    top: -6,\n  },\n  text: {\n    fontSize: 10,\n  },\n});\n\nconst Knob = ({ value }) => (\n  <View style={[styles.knob, { left: `${value - 3}%` }]}>\n    <Text style={{ fontSize: 8, marginTop: 4 }}>{value}</Text>\n  </View>\n);\n\nconst Select = props => (\n  <View style={styles.select}>\n    <Text style={[styles.text, { marginRight: '15px' }]}>0%</Text>\n    <View style={styles.bar}>\n      <View style={styles.barMiddle} />\n      <Knob {...props} />\n    </View>\n    <Text style={[styles.text, { marginLeft: '15px' }]}>100%</Text>\n  </View>\n);\n\nconst doc = (\n  <Document>\n    <Page size=\"A5\">\n      <Select value={0} />\n      <Select value={10} />\n      <Select value={20} />\n      <Select value={30} />\n      <Select value={40} />\n      <Select value={50} />\n      <Select value={60} />\n      <Select value={70} />\n      <Select value={80} />\n      <Select value={90} />\n      <Select value={100} />\n    </Page>\n  </Document>\n);\n\nReactPDF.render(doc, `${__dirname}/output.pdf`);\n",
          "filepath": "data/repos/diegomura/react-pdf-1.1/examples/knobs/index.js",
          "repo": "diegomura/react-pdf",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "aab0514a-41bd-4148-9b69-a1ec9b9951b7",
        "score": 0.016129032258064516,
        "payload": {
          "text": "/* eslint react/prop-types: 0 */\n/* eslint react/jsx-sort-props: 0 */\n\nimport React from 'react';\nimport ReactPDF, {\n  Document,\n  Page,\n  View,\n  StyleSheet,\n} from '../../dist/react-pdf.es.js';\n\nconst styles = StyleSheet.create({\n  body: {\n    padding: 35,\n  },\n  content: {\n    padding: 20,\n    '@media max-width: 400': {\n      flexDirection: 'column',\n    },\n    '@media min-width: 400': {\n      flexDirection: 'row',\n    },\n  },\n  block: {\n    height: 150,\n    width: 150,\n    backgroundColor: 'red',\n  },\n});\n\nconst MediaComponent = () => (\n  <View style={styles.content}>\n    <View style={[styles.block, { backgroundColor: 'red' }]} />\n    <View style={[styles.block, { backgroundColor: 'green' }]} />\n  </View>\n);\n\nconst doc = (\n  <Document>\n    <Page style={styles.body} size={[500, 600]}>\n      <MediaComponent />\n    </Page>\n    <Page style={styles.body} size={[300, 600]}>\n      <MediaComponent />\n    </Page>\n  </Document>\n);\n\nReactPDF.render(doc, `${__dirname}/output.pdf`);\n",
          "filepath": "data/repos/diegomura/react-pdf-1.1/examples/mediaQueries/index.js",
          "repo": "diegomura/react-pdf",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "54496b5e-a4e9-42f4-aa6a-1df2c8dddf35",
        "score": 0.015873015873015872,
        "payload": {
          "text": "import React from 'react';\nimport ReactPDF, {\n  Text,\n  Document,\n  Font,\n  Page,\n  StyleSheet,\n  Image,\n  View,\n} from '../../dist/react-pdf.es.js';\nimport Header from './Header';\nimport Education from './Education';\nimport Experience from './Experience';\nimport Skills from './Skills';\n\nconst styles = StyleSheet.create({\n  page: {\n    padding: 30,\n  },\n  container: {\n    flex: 1,\n    flexDirection: 'row',\n    '@media max-width: 400': {\n      flexDirection: 'column',\n    },\n  },\n  image: {\n    marginBottom: 10,\n  },\n  leftColumn: {\n    flexDirection: 'column',\n    width: 170,\n    paddingTop: 30,\n    paddingRight: 15,\n    '@media max-width: 400': {\n      width: '100%',\n      paddingRight: 0,\n    },\n    '@media orientation: landscape': {\n      width: 200,\n    },\n  },\n  footer: {\n    fontSize: 12,\n    fontFamily: 'Lato Bold',\n    textAlign: 'center',\n    marginTop: 25,\n    paddingTop: 10,\n    borderWidth: 3,\n    borderColor: 'gray',\n    borderStyle: 'dashed',\n    '@media orientation: landscape': {\n      marginTop: 10,\n    },\n  },\n});\n\nFont.register(`${__dirname}/fonts/fonts/Open_Sans/OpenSans-Regular.ttf`, {\n  family: 'Open Sans',\n});\nFont.register(`${__dirname}/fonts/fonts/Lato/Lato-Regular.ttf`, {\n  family: 'Lato',\n});\nFont.register(`${__dirname}/fonts/fonts/Lato/Lato-Italic.ttf`, {\n  family: 'Lato Italic',\n});\nFont.register(`${__dirname}/fonts/fonts/Lato/Lato-Bold.ttf`, {\n  family: 'Lato Bold',\n});\n\nconst Resume = props => (\n  <Page {...props} style={styles.page}>\n    <Header />\n    <View style={styles.container}>\n      <View style={styles.leftColumn}>\n        <Image\n          src=\"https://react-pdf.org/static/images/luke.jpg\"\n          style={styles.image}\n        />\n        <Education />\n        <Skills />\n      </View>\n      <Experience />\n    </View>\n    <Text style={styles.footer}>This IS the candidate you are looking for</Text>\n  </Page>\n);\n\nconst Output = () => (\n  <Document\n    author=\"Luke Skywalker\"\n    keywords=\"awesome, resume, start wars\"\n    subject=\"The resume of Luke Skywalker\"\n    title=\"Resume\"\n  >\n    <Resume size=\"A4\" />\n    <Resume orientation=\"landscape\" size=\"A4\" />\n    <Resume size={[380, 1250]} />\n  </Document>\n);\n\nReactPDF.render(<Output />, `${__dirname}/output.pdf`);\n",
          "filepath": "data/repos/diegomura/react-pdf-1.1/examples/resume/index.js",
          "repo": "diegomura/react-pdf",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "ac82f42b-f0b0-4ee0-94ce-1f59644a0c4a",
        "score": 0.015625,
        "payload": {
          "text": "const Borders = {\n  drawBorders() {\n    const { left, top, width, height } = this.getAbsoluteLayout();\n\n    const {\n      borderTopWidth = 0,\n      borderRightWidth = 0,\n      borderBottomWidth = 0,\n      borderLeftWidth = 0,\n    } = this;\n\n    const {\n      borderTopLeftRadius = 0,\n      borderTopRightRadius = 0,\n      borderBottomRightRadius = 0,\n      borderBottomLeftRadius = 0,\n      borderTopColor = 'black',\n      borderRightColor = 'black',\n      borderBottomColor = 'black',\n      borderLeftColor = 'black',\n      borderTopStyle = 'solid',\n      borderRightStyle = 'solid',\n      borderBottomStyle = 'solid',\n      borderLeftStyle = 'solid',\n    } = this.getComputedStyles();\n\n    // Save current graphics stack\n    this.root.instance.save();\n\n    // border top\n    this.drawHorizontalBorder(\n      [\n        left + (borderTopLeftRadius > 0 ? borderTopWidth / 2 : 0),\n        top + borderTopWidth / 2,\n      ],\n      [\n        left + width - (borderTopRightRadius > 0 ? borderTopWidth / 2 : 0),\n        top + borderTopWidth / 2,\n      ],\n      borderTopLeftRadius,\n      borderTopRightRadius,\n      borderTopWidth,\n      borderTopColor,\n      borderTopStyle,\n    );\n\n    // border right\n    this.drawVerticalBorder(\n      [\n        left + width - borderRightWidth / 2,\n        top + (borderTopRightRadius > 0 ? borderRightWidth / 2 : 0),\n      ],\n      [\n        left + width - borderRightWidth / 2,\n        top + height - (borderBottomRightRadius > 0 ? borderRightWidth / 2 : 0),\n      ],\n      -borderTopRightRadius,\n      -borderBottomRightRadius,\n      borderRightWidth,\n      borderRightColor,\n      borderRightStyle,\n    );\n\n    // border bottom\n    this.drawHorizontalBorder(\n      [\n        left +\n          width -\n          (borderBottomRightRadius > 0 ? borderBottomWidth / 2 : 0),\n        top + height - borderBottomWidth / 2,\n      ],\n      [\n        left + (borderBottomLeftRadius > 0 ? borderBottomWidth / 2 : 0),\n        top + height - borderBottomWidth / 2,\n      ],\n      -borderBottomRightRadius,\n      -borderBottomLeftRadius,\n      borderBottomWidth,\n      borderBottomColor,\n      borderBottomStyle,\n    );\n\n    // border left\n    this.drawVerticalBorder(\n      [\n        left + borderLeftWidth / 2,\n        top + height - (borderBottomLeftRadius > 0 ? borderLeftWidth / 2 : 0),\n      ],\n      [\n        left + borderLeftWidth / 2,\n        top + (borderTopLeftRadius > 0 ? borderLeftWidth / 2 : 0),\n      ],\n      borderBottomLeftRadius,\n      borderTopLeftRadius,\n      borderLeftWidth,\n      borderLeftColor,\n      borderLeftStyle,\n    );\n\n    // Restore graphics stack to avoid side effects\n    this.root.instance.restore();\n  },\n  traceBorder(style, width) {\n    switch (style) {\n      case 'dashed':\n        this.root.instance.dash(width * 2, { space: width * 1.2 }).stroke();\n        break;\n      case 'dotted':\n        this.root.instance.dash(width, { space: width * 1.2 }).stroke();\n        break;\n      default:\n        this.root.instance.stroke();\n    }\n  },\n  drawHorizontalBorder(p1, p2, r1, r2, width, color, style) {\n    if (width <= 0) return;\n\n    this.root.instance\n      .lineWidth(width)\n      .moveTo(p1[0], p1[1] + r1)\n      .quadraticCurveTo(p1[0], p1[1], p1[0] + r1, p1[1])\n      .lineTo(p2[0] - r2, p2[1])\n      .quadraticCurveTo(p2[0], p2[1], p2[0], p2[1] + r2)\n      .strokeColor(color);\n\n    this.traceBorder(style, width);\n  },\n  drawVerticalBorder(p1, p2, r1, r2, width, color, style) {\n    if (width <= 0) return;\n\n    this.root.instance\n      .lineWidth(width)\n      .moveTo(p1[0] + r1, p1[1])\n      .quadraticCurveTo(p1[0], p1[1], p1[0], p1[1] - r1)\n      .lineTo(p2[0], p2[1] + r2)\n      .quadraticCurveTo(p2[0], p2[1], p2[0] + r2, p2[1])\n      .strokeColor(color);\n\n    this.traceBorder(style, width);\n  },\n};\n\nexport default Borders;\n",
          "filepath": "data/repos/diegomura/react-pdf-1.1/src/mixins/borders.js",
          "repo": "diegomura/react-pdf",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "b0d7f997-9b7a-4746-840b-9409660a2149",
        "score": 0.015384615384615385,
        "payload": {
          "text": "/* eslint react/prop-types: 0 */\n/* eslint react/jsx-sort-props: 0 */\n\nimport React from 'react';\nimport ReactPDF, {\n  Document,\n  Page,\n  Text,\n  Image,\n  StyleSheet,\n  Font,\n} from '../../dist/react-pdf.es.js';\n\nconst styles = StyleSheet.create({\n  body: {\n    paddingTop: 35,\n    paddingBottom: 45,\n    paddingHorizontal: 35,\n  },\n  title: {\n    fontSize: 24,\n    textAlign: 'center',\n    fontFamily: 'Roboto',\n  },\n  author: {\n    fontSize: 12,\n    textAlign: 'center',\n    marginBottom: 40,\n    fontFamily: 'Roboto',\n  },\n  subtitle: {\n    fontSize: 16,\n    margin: 12,\n    fontFamily: 'Roboto',\n  },\n  text: {\n    margin: 12,\n    fontSize: 12,\n    fontFamily: 'Roboto',\n    textAlign: 'justify',\n  },\n  image: {\n    height: 150,\n    marginBottom: 30,\n    marginHorizontal: 100,\n  },\n  header: {\n    fontSize: 12,\n    color: 'grey',\n    marginBottom: 15,\n    textAlign: 'center',\n    fontFamily: 'Roboto',\n  },\n  footer: {\n    position: 'absolute',\n    fontSize: 12,\n    bottom: 25,\n    left: 35,\n    right: 0,\n    textAlign: 'center',\n    color: 'grey',\n    fontFamily: 'Roboto',\n  },\n});\n\nFont.register(`${__dirname}/fonts/Roboto-Regular.ttf`, { family: 'Roboto' });\n\nconst Subtitle = ({ children, ...props }) => (\n  <Text style={styles.subtitle} {...props}>\n    {children}\n  </Text>\n);\n\nconst doc = (\n  <Document>\n    <Page style={styles.body} wrap>\n      <Text style={styles.header} fixed>\n        ~ Created with react-pdf ~\n      </Text>\n      <Text style={styles.title}>Don Quijote de la Mancha</Text>\n      <Text style={styles.author}>Miguel de Cervantes</Text>\n      <Image\n        style={styles.image}\n        src=\"http://static.donquijote.org/images/blogs/dq-reg/don-quijote-de-la-mancha.jpg\"\n      />\n      <Subtitle>\n        Cap\u00edtulo I: Que trata de la condici\u00f3n y ejercicio del famoso hidalgo D.\n        Quijote de la Mancha\n      </Subtitle>\n      <Text style={styles.text}>\n        En un lugar de la Mancha, de cuyo nombre no quiero acordarme, no ha\n        mucho tiempo que viv\u00eda un hidalgo de los de lanza en astillero, adarga\n        antigua, roc\u00edn flaco y galgo corredor. Una olla de algo m\u00e1s vaca que\n        carnero, salpic\u00f3n las m\u00e1s noches, duelos y quebrantos los s\u00e1bados,\n        lentejas los viernes, alg\u00fan palomino de a\u00f1adidura los domingos,\n        consum\u00edan las tres partes de su hacienda. El resto della conclu\u00edan sayo\n        de velarte, calzas de velludo para las fiestas con sus pantuflos de lo\n        mismo, los d\u00edas de entre semana se honraba con su vellori de lo m\u00e1s\n        fino. Ten\u00eda en su casa una ama que pasaba de los cuarenta, y una sobrina\n        que no llegaba a los veinte, y un mozo de campo y plaza, que as\u00ed\n        ensillaba el roc\u00edn como tomaba la podadera. Frisaba la edad de nuestro\n        hidalgo con los cincuenta a\u00f1os, era de complexi\u00f3n recia, seco de carnes,\n        enjuto de rostro; gran madrugador y amigo de la caza. Quieren decir que\n        ten\u00eda el sobrenombre de Quijada o Quesada (que en esto hay alguna\n        diferencia en los autores que deste caso escriben), aunque por\n        conjeturas veros\u00edmiles se deja entender que se llama Quijana; pero esto\n        importa poco a nuestro cuento; basta que en la narraci\u00f3n d\u00e9l no se salga\n        un punto de la verdad.\n      </Text>\n      <Text style={styles.text}>\n        Es, pues, de saber, que este sobredicho hidalgo, los ratos que estaba\n        ocioso (que eran los m\u00e1s del a\u00f1o) se daba a leer libros de caballer\u00edas\n        con tanta afici\u00f3n y gusto, que olvid\u00f3 casi de todo punto el ejercicio de\n        la caza, y aun la administraci\u00f3n de su hacienda; y lleg\u00f3 a tanto su\n        curiosidad y desatino en esto, que vendi\u00f3 muchas hanegas de tierra de\n        sembradura, para comprar libros de caballer\u00edas en que leer; y as\u00ed llev\u00f3\n        a su casa todos cuantos pudo haber dellos; y de todos ningunos le\n        parec\u00edan tan bien como los que compuso el famoso Feliciano de Silva:\n        porque la claridad de su prosa, y aquellas intrincadas razones suyas, le\n        parec\u00edan de perlas; y m\u00e1s cuando llegaba a leer aquellos requiebros y\n        cartas de desaf\u00edo, donde en muchas partes hallaba escrito: la raz\u00f3n de\n        la sinraz\u00f3n que a mi raz\u00f3n se hace, de tal manera mi raz\u00f3n enflaquece,\n        que con raz\u00f3n me quejo.\n      </Text>\n      <Text style={styles.text}>\n        Con estas y semejantes razones perd\u00eda el pobre caballero el juicio, y\n        desvel\u00e1base por entenderlas, y desentra\u00f1arles el sentido, que no se lo\n        sacara, ni las entendiera el mismo Arist\u00f3teles, si resucitara para s\u00f3lo\n        ello. No estaba muy bien con las heridas que don Belianis daba y\n        recib\u00eda, porque se imaginaba que por grandes maestros que le hubiesen\n        curado, no dejar\u00eda de tener el rostro y todo el cuerpo lleno de\n        cicatrices y se\u00f1ales; pero con todo alababa en su autor aquel acabar su\n        libro con la promesa de aquella inacabable aventura, y muchas veces le\n        vino deseo de tomar la pluma, y darle fin al pie de la letra como all\u00ed\n        se promete; y sin duda alguna lo hiciera, y aun saliera con ello, si\n        otros mayores y continuos pensamientos no se lo estorbaran. Tuvo muchas\n        veces competencia con el cura de su lugar (que era hombre docto graduado\n        en Sig\u00fcenza), sobre cu\u00e1l hab\u00eda sido mejor caballero, Palmer\u00edn de\n        Inglaterra o Amad\u00eds de Gaula; mas maese Nicol\u00e1s, barbero del mismo\n        pueblo, dec\u00eda que ninguno llegaba al caballero del Febo, y que si alguno\n        se le pod\u00eda comparar, era don Galaor, hermano de Amad\u00eds de Gaula, porque\n        ten\u00eda muy acomodada condici\u00f3n para todo; que no era caballero\n        melindroso, ni tan llor\u00f3n como su hermano, y que en lo de la valent\u00eda no\n        le iba en zaga.\n      </Text>\n      <Text style={styles.text}>\n        En resoluci\u00f3n, \u00e9l se enfrasc\u00f3 tanto en su lectura, que se le pasaban las\n        noches leyendo de claro en claro, y los d\u00edas de turbio en turbio, y as\u00ed,\n        del poco dormir y del mucho leer, se le sec\u00f3 el cerebro, de manera que\n        vino a perder el juicio. Llen\u00f3sele la fantas\u00eda de todo aquello que le\u00eda\n        en los libros, as\u00ed de encantamientos, como de pendencias, batallas,\n        desaf\u00edos, heridas, requiebros, amores, tormentas y disparates\n        imposibles, y asent\u00f3sele de tal modo en la imaginaci\u00f3n que era verdad\n        toda aquella m\u00e1quina de aquellas so\u00f1adas invenciones que le\u00eda, que para\n        \u00e9l no hab\u00eda otra historia m\u00e1s cierta en el mundo.\n      </Text>\n      <Subtitle break>\n        Cap\u00edtulo II: Que trata de la primera salida que de su tierra hizo el\n        ingenioso Don Quijote\n      </Subtitle>\n      <Image\n        style={styles.image}\n        src=\"https://panampost.com/wp-content/uploads/don-quijote-lessons.jpg\"\n      />\n      <Text style={styles.text}>\n        Hechas, pues, estas prevenciones, no quiso aguardar m\u00e1s tiempo a poner\n        en efeto su pensamiento, apret\u00e1ndole a ello la falta que \u00e9l pensaba que\n        hac\u00eda en el mundo su tardanza, seg\u00fan eran los agravios que pensaba\n        deshacer, tuertos que enderezar, sinrazones que emendar y abusos que\n        mejorar y deudas que satisfacer. Y as\u00ed, sin dar parte a persona alguna\n        de su intenci\u00f3n y sin que nadie le viese, una ma\u00f1ana, antes del d\u00eda, que\n        era uno de los calurosos del mes de Julio, se arm\u00f3 de todas sus armas,\n        subi\u00f3 sobre Rocinante, puesta su mal compuesta celada, embraz\u00f3 su\n        adarga, tom\u00f3 su lanza y por la puerta falsa de un corral sali\u00f3 al campo\n        con grand\u00edsimo contento y alborozo de ver con cu\u00e1nta facilidad hab\u00eda\n        dado principio a su buen deseo. Mas apenas se vio en el campo cuando le\n        asalt\u00f3 un pensamiento terrible, y tal, que por poco le hiciera dejar la\n        comenzada empresa; y fue que le vino a la memoria que no era armado\n        caballero, y que, conforme a ley de caballer\u00eda, ni pod\u00eda ni deb\u00eda tomar\n        armas con ning\u00fan caballero; y puesto que lo fuera, hab\u00eda de llevar armas\n        blancas, como novel caballero, sin empresa en el escudo, hasta que por\n        su esfuerzo la ganase. Estos pensamientos le hicieron titubear en su\n        prop\u00f3sito; mas pudiendo m\u00e1s su locura que otra raz\u00f3n alguna, propuso de\n        hacerse armar caballero del primero que topase, a imitaci\u00f3n de otros\n        muchos que as\u00ed lo hicieron, seg\u00fan \u00e9l hab\u00eda le\u00eddo en los libros que tal\n        le ten\u00edan. En lo de las armas blancas, pensaba limpiarlas de manera, en\n        teniendo lugar, que lo fuesen m\u00e1s que un arminio; y con esto se quiet\u00f3 y\n        prosigui\u00f3 su camino, sin llevar otro que aquel que su caballo quer\u00eda,\n        creyendo que en aquello consist\u00eda la fuerza de las aventuras\n      </Text>\n      <Text style={styles.text}>\n        Yendo, pues, caminando nuestro flamante aventurero, iba hablando consigo\n        mesmo, y diciendo: \u2014\u00bfQui\u00e9n duda, sino que en los venideros tiempos,\n        cuando salga a luz la verdadera historia de mis famosos hechos, que el\n        sabio que los escribiere no ponga, cuando llegue a contar esta mi\n        primera salida tan de ma\u00f1ana, desta manera?: Apenas hab\u00eda el rubicundo\n        Apolo tendido por la faz de la ancha y espaciosa tierra las doradas\n        hebras de sus hermosos cabellos, y apenas los peque\u00f1os y pintados\n        pajarillos con sus arpadas lenguas hab\u00edan saludado con dulce y meliflua\n        armon\u00eda la venida de la rosada Aurora, que, dejando la blanda cama del\n        celoso marido, por las puertas y balcones del manchego horizonte a los\n        mortales se mostraba, cuando el famoso caballero don Quijote de la\n        Mancha, dejando las ociosas plumas, subi\u00f3 sobre su famoso caballo\n        Rocinante y comenz\u00f3 a caminar por el antiguo y conocido Campo de\n        Montiel.\n      </Text>\n      <Text style={styles.text}>\n        Y era la verdad que por \u00e9l caminaba; y a\u00f1adi\u00f3 diciendo: \u2014Dichosa edad y\n        siglo dichoso aquel adonde saldr\u00e1n a luz las famosas haza\u00f1as m\u00edas,\n        dignas de entallarse en bronces, esculpirse en m\u00e1rmoles y pintarse en\n        tablas, para memoria en lo futuro. \u00a1Oh t\u00fa, sabio encantador, quienquiera\n        que seas, a quien ha de tocar el ser coronista desta peregrina historia!\n        Ru\u00e9gote que no te olvides de mi buen Rocinante, compa\u00f1ero eterno m\u00edo en\n        todos mis caminos y carreras.\n      </Text>\n      <Text style={styles.text}>\n        Luego volv\u00eda diciendo, como si verdaderamente fuera enamorado: \u2014\u00a1Oh\n        princesa Dulcinea, se\u00f1ora deste cautivo coraz\u00f3n! Mucho agravio me\n        habedes fecho en despedirme y reprocharme con el riguroso afincamiento\n        de mandarme no parecer ante la vuestra fermosura. Pl\u00e9gaos, se\u00f1ora, de\n        membraros deste vuestro sujeto coraz\u00f3n, que tantas cuitas por vuestro\n        amor padece. Con estos iba ensartando otros disparates, todos al modo de\n        los que sus libros le hab\u00edan ense\u00f1ado, imitando en cuanto pod\u00eda su\n        lenguaje. Con esto caminaba tan despacio, y el sol entraba tan apriesa y\n        con tanto ardor, que fuera bastante a derretirle los sesos, si algunos\n        tuviera\n      </Text>\n      <Text style={styles.text}>\n        Casi todo aquel d\u00eda camin\u00f3 sin acontecerle cosa que de contar fuese, de\n        lo cual se desesperaba, porque quisiera topar luego luego con quien\n        hacer experiencia del valor de su fuerte brazo. Autores hay que dicen\n        que la primera aventura que le avino fue la del Puerto L\u00e1pice, otros\n        dicen que la de los molinos de viento; pero lo que yo he podido\n        averiguar en este caso, y lo que he hallado escrito en los anales de la\n        Mancha, es que \u00e9l anduvo todo aquel d\u00eda, y, al anochecer, su roc\u00edn y \u00e9l\n        se hallaron cansados y muertos de hambre, y que, mirando a todas partes\n        por ver si descubrir\u00eda alg\u00fan castillo o alguna majada de pastores donde\n        recogerse y adonde pudiese remediar su mucha hambre y necesidad, vio, no\n        lejos del camino por donde iba, una venta, que fue como si viera una\n        estrella que, no a los portales, sino a los alc\u00e1zares de su redenci\u00f3n le\n        encaminaba. Diose priesa a caminar, y lleg\u00f3 a ella a tiempo que\n        anochec\u00eda.\n      </Text>\n      <Text\n        style={styles.footer}\n        render={({ pageNumber, totalPages }) => `${pageNumber} / ${totalPages}`}\n        fixed\n      />\n    </Page>\n  </Document>\n);\n\nReactPDF.render(doc, `${__dirname}/output.pdf`);\n",
          "filepath": "data/repos/diegomura/react-pdf-1.1/examples/pageWrap/index.js",
          "repo": "diegomura/react-pdf",
          "version": "1.1",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-2483",
    "model_patch": "diff --git a/USING_PRO.md b/USING_PRO.md\nindex 1f3e5c2..d4e5f6a 100644\n--- a/USING_PRO.md\n+++ b/USING_PRO.md\n@@ -1,5 +1,6 @@\n ## Extending Marked\n \n+<!-- Add a note about the fenced code block issue -->\n To champion the single-responsibility and open/closed principles, we have tried to make it relatively painless to extend Marked. If you are looking to add custom functionality, this is the place to start.\n \n <h2 id=\"use\">marked.use()</h2>\ndiff --git a/update-specs.js b/update-specs.js\nindex 2d3e4f5..4e5f6a7 100644\n--- a/update-specs.js\n+++ b/update-specs.js\n@@ -1,6 +1,7 @@\n import fetch from 'node-fetch';\n import { load } from 'cheerio';\n import marked from '../';\n+import { isEqual } from './helpers/html-differ.js';\n import { readdirSync, unlinkSync, writeFileSync } from 'fs';\n import { join, resolve } from 'path';\n \n@@ -10,6 +11,7 @@ function removeFiles(dir) {\n async function updateCommonmark(dir, options) {\n   try {\n     const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\n+    // Fetch the CommonMark version\n     const pkg = await res.json();\n     const version = pkg.version.replace(/^(\\d+\\.\\d+).*$/, '$1');\n     const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\n@@ -19,6 +21,7 @@ async function updateCommonmark(dir, options) {\n       const html = marked(spec.markdown, options);\n       if (!isEqual(html, spec.html)) {\n         spec.shouldFail = true;\n+        // Mark the spec as failed if the output doesn't match\n       }\n     });\n     writeFileSync(resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n@@ -29,6 +32,7 @@ async function updateCommonmark(dir, options) {\n async function updateGfm(dir) {\n   try {\n     const res = await fetch('https://github.github.com/gfm/');\n+    // Fetch the GFM version\n     const html = await res.text();\n     const $ = load(html);\n     const version = $('.version').text().match(/\\d+\\.\\d+/)[0];\n@@ -46,6 +50,7 @@ async function updateGfm(dir) {\n         const html = $('.language-html', exa).text().trim();\n         specs.push({\n           section: `[extension] ${section}`,\n+          // Add the section to the specs\n           html,\n           markdown,\n           example\n@@ -54,6 +59,7 @@ async function updateGfm(dir) {\n     specs.forEach(spec => {\n       const html = marked(spec.markdown, { gfm: true, pedantic: false });\n       if (!isEqual(html, spec.html)) {\n+        // Mark the spec as failed if the output doesn't match\n         spec.shouldFail = true;\n       }\n     });\ndiff --git a/src/Tokenizer.js b/src/Tokenizer.js\nindex abcdef0..1234567 100644\n--- a/src/Tokenizer.js\n+++ b/src/Tokenizer.js\n@@ -100,6 +100,10 @@ class Tokenizer {\n     return cap;\n   }\n \n+  // Modify the fences method to handle blank lines\n+  fences(src) {\n+    const cap = this.rules.block.fences.exec(src);\n+    if (cap) {\n+      const raw = cap[0];\n+      const text = cap[3] || '';\n+      return {\n+        type: 'code',\n+        raw,\n+        lang: cap[2] ? cap[2].trim() : cap[2],\n+        text\n+      };\n+    }\n+  }\n }\n \n export default Tokenizer;",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 171.32,
      "issue_embedding_time_ms": 171.32,
      "retrieval_time_ms_splade": 9.86,
      "retrieval_time_ms": 9.86,
      "total_retrieval_time_ms": 181.17,
      "generation_time_ms": 8344.19,
      "total_io_time_ms": 8525.37,
      "input_total_token_limit": null,
      "issue_text_tokens": 1097,
      "vlm_tokens": 0,
      "retrieved_tokens": 7182,
      "prompt_template_tokens": 517,
      "total_input_prompt_tokens": 8796,
      "output_generated_tokens": 878,
      "total_io_tokens": 9674,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\n[BUG] The fenced code block that follows the list is strange.\\n**Marked version:**\\r\\n4.0.16\\r\\n\\r\\n**Describe the bug**\\r\\nThe fenced code block that follows the list is strange.\\r\\nIf code block contains blankline, it is not judged as code block.\\r\\n\\r\\n**To Reproduce**\\r\\n\\r\\n![repro1](https://user-images.githubusercontent.com/80378/169825319-7f786584-0be3-4694-8962-530731a28ad0.png)\\r\\n\\r\\n[Marked Demo permalink](https://marked.js.org/demo/?outputType=html&text=-%20abc%0A%60%60%60ruby%0Aa%0A%0Ab%0A%60%60%60%0A&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20false%2C%0A%20%22extensions%22%3A%20null%2C%0A%20%22gfm%22%3A%20true%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22walkTokens%22%3A%20null%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=4.0.16)\\r\\n\\r\\n[CommonMark Dingus permalink](https://spec.commonmark.org/dingus/?text=-%20abc%0A%60%60%60ruby%0Aa%0A%0Ab%0A%60%60%60%0A)\\r\\n\\r\\n----\\r\\n\\r\\n**If there is no blankline, no problem.**\\r\\n\\r\\n[Marked Demo permalink](https://marked.js.org/demo/?outputType=html&text=-%20abc%0A%60%60%60ruby%0Aa%0Ab%0A%60%60%60%0A&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20false%2C%0A%20%22extensions%22%3A%20null%2C%0A%20%22gfm%22%3A%20true%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22walkTokens%22%3A%20null%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=4.0.16)\\r\\n\\r\\n**Expected behavior**\\r\\nFences that follow the list should ignore blank lines.\\r\\nI want the following HTML output.\\r\\n\\r\\n```html\\r\\n<ul>\\r\\n<li>abc<pre><code class=\\\"language-ruby\\\">a\\r\\n\\r\\nb\\r\\n</code></pre>\\r\\n</li>\\r\\n</ul>\\r\\n```\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of Bug_report.md]\\n---\\nname: Bug report\\nabout: Marked says it does this thing but does not\\n\\n---\\n**Marked version:**\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior:\\n\\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\\n<!--\\n1. [Marked Demo](https://marked.js.org/demo/)\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\\n-->\\n\\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\\n<!--\\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\\n3. Actual output (or error) is...\\n-->\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n[end of Bug_report.md]\\n[start of marked.1.txt]\\nmarked(1)\\t\\t    General Commands Manual\\t\\t     marked(1)\\n\\nNAME\\n       marked - a javascript markdown parser\\n\\nSYNOPSIS\\n       marked  [-o  <output>]  [-i  <input>] [-s <string>] [--help] [--tokens]\\n       [--pedantic]   [--gfm]\\t [--breaks]    [--sanitize]    [--smart-lists]\\n       [--lang-prefix <prefix>] [--no-etc...] [--silent] [filename]\\n\\n\\nDESCRIPTION\\n       marked is a full-featured javascript markdown parser, built for speed.\\n       It also includes multiple GFM features.\\n\\nEXAMPLES\\n       cat in.md | marked > out.html\\n\\n       echo \\\"hello *world*\\\" | marked\\n\\n       marked -o out.html -i in.md --gfm\\n\\n       marked --output=\\\"hello world.html\\\" -i in.md --no-breaks\\n\\nOPTIONS\\n       -o, --output [output]\\n\\t      Specify file output. If none is specified, write to stdout.\\n\\n       -i, --input [input]\\n\\t      Specify file input, otherwise use last argument as input file.\\n\\t      If no input file is specified, read from stdin.\\n\\n       -s, --string [string]\\n\\t      Specify string input instead of a file.\\n\\n       -t, --tokens\\n\\t      Output a token stream instead of html.\\n\\n       --pedantic\\n\\t      Conform to obscure parts of markdown.pl as much as possible.\\n\\t      Don't fix original markdown bugs.\\n\\n       --gfm  Enable github flavored markdown.\\n\\n       --breaks\\n\\t      Enable GFM line breaks. Only works with the gfm option.\\n\\n       --sanitize\\n\\t      Sanitize output. Ignore any HTML input.\\n\\n       --smart-lists\\n\\t      Use smarter list behavior than the original markdown.\\n\\n       --lang-prefix [prefix]\\n\\t      Set the prefix for code block classes.\\n\\n       --mangle\\n\\t      Mangle email addresses.\\n\\n       --no-sanitize, -no-etc...\\n\\t      The inverse of any of the marked options above.\\n\\n       --silent\\n\\t      Silence error output.\\n\\n       -h, --help\\n\\t      Display help information.\\n\\nCONFIGURATION\\n       For configuring and running programmatically.\\n\\n       Example\\n\\n\\t   import { marked } from 'marked';\\n\\t   marked('*foo*', { gfm: true });\\n\\nBUGS\\n       Please report any bugs to https://github.com/markedjs/marked.\\n\\nLICENSE\\n       Copyright (c) 2011-2014, Christopher Jeffrey (MIT License).\\n\\nSEE ALSO\\n       markdown(1), node.js(1)\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t     marked(1)\\n\\n[end of marked.1.txt]\\n[start of ISSUE_TEMPLATE.md]\\n**Marked version:**\\n\\n**Markdown flavor:** Markdown.pl|CommonMark|GitHub Flavored Markdown|n/a\\n\\n<!-- The NPM version or commit hash having the issue -->\\n\\n<!--\\n\\n\\tIf submitting something other than a defect with Marked itself, please use the following:\\n\\n**Proposal type:** new feature | project operations | other\\n\\n## What pain point are you perceiving?\\n\\n## What solution are you suggesting?\\n\\n-->\\n\\n## Expectation\\n\\n**CommonMark Demo:** [demo](https://spec.commonmark.org/dingus/)\\n<!-- You can replace the link above with a permalink from: https://spec.commonmark.org/dingus/ -->\\n\\n<!-- Describe the output you are expecting from marked -->\\n\\n## Result\\n\\n**Marked Demo:** [demo](https://marked.js.org/demo/)\\n<!-- You can replace the link above with a permalink from: https://marked.js.org/demo/ -->\\n\\n<!-- Describe the output you received from marked -->\\n\\n## What was attempted\\n\\n<!-- Describe what code combination got you there -->\\n\\n<!--\\n\\tIf error is thrown add the following:\\n\\n## Call stack & console log\\n\\n-->\\n\\n[end of ISSUE_TEMPLATE.md]\\n[start of update-specs.js]\\nimport fetch from 'node-fetch';\\nimport { load } from 'cheerio';\\nimport marked from '../';\\nimport { isEqual } from './helpers/html-differ.js';\\nimport { readdirSync, unlinkSync, writeFileSync } from 'fs';\\nimport { join, resolve } from 'path';\\n\\nfunction removeFiles(dir) {\\n  readdirSync(dir).forEach(file => {\\n    unlinkSync(join(dir, file));\\n  });\\n}\\n\\nasync function updateCommonmark(dir, options) {\\n  try {\\n    const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\\n    const pkg = await res.json();\\n    const version = pkg.version.replace(/^(\\\\d+\\\\.\\\\d+).*$/, '$1');\\n    const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\\n    const specs = await res2.json();\\n    specs.forEach(spec => {\\n      const html = marked(spec.markdown, options);\\n      if (!isEqual(html, spec.html)) {\\n        spec.shouldFail = true;\\n      }\\n    });\\n    writeFileSync(resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\\\n');\\n    console.log(`Saved CommonMark v${version} specs`);\\n  } catch (ex) {\\n    console.log(ex);\\n  }\\n}\\n\\nasync function updateGfm(dir) {\\n  try {\\n    const res = await fetch('https://github.github.com/gfm/');\\n    const html = await res.text();\\n    const $ = load(html);\\n    const version = $('.version').text().match(/\\\\d+\\\\.\\\\d+/)[0];\\n    if (!version) {\\n      throw new Error('No version found');\\n    }\\n    const specs = [];\\n    $('.extension').each((i, ext) => {\\n      const section = $('.definition', ext).text().trim().replace(/^\\\\d+\\\\.\\\\d+(.*?) \\\\(extension\\\\)[\\\\s\\\\S]*$/, '$1');\\n      $('.example', ext).each((j, exa) => {\\n        const example = +$(exa).attr('id').replace(/\\\\D/g, '');\\n        const markdown = $('.language-markdown', exa).text().trim();\\n        const html = $('.language-html', exa).text().trim();\\n        specs.push({\\n          section: `[extension] ${section}`,\\n          html,\\n          markdown,\\n          example\\n        });\\n      });\\n    });\\n\\n    specs.forEach(spec => {\\n      const html = marked(spec.markdown, { gfm: true, pedantic: false });\\n      if (!isEqual(html, spec.html)) {\\n        spec.shouldFail = true;\\n      }\\n    });\\n    writeFileSync(resolve(dir, `./gfm.${version}.json`), JSON.stringify(specs, null, 2) + '\\\\n');\\n    console.log(`Saved GFM v${version} specs.`);\\n  } catch (ex) {\\n    console.log(ex);\\n  }\\n}\\n\\nconst commonmarkDir = resolve(__dirname, './specs/commonmark');\\nconst gfmDir = resolve(__dirname, './specs/gfm');\\nremoveFiles(commonmarkDir);\\nremoveFiles(gfmDir);\\nupdateCommonmark(commonmarkDir, { gfm: false, pedantic: false, headerIds: false });\\nupdateCommonmark(gfmDir, { gfm: true, pedantic: false, headerIds: false });\\nupdateGfm(gfmDir);\\n\\n[end of update-specs.js]\\n[start of USING_PRO.md]\\n## Extending Marked\\n\\nTo champion the single-responsibility and open/closed principles, we have tried to make it relatively painless to extend Marked. If you are looking to add custom functionality, this is the place to start.\\n\\n<h2 id=\\\"use\\\">marked.use()</h2>\\n\\n`marked.use(extension)` is the recommended way to extend Marked. The `extension` object can contain any [option](/using_advanced#options) available in Marked:\\n\\n\\n```js\\nimport { marked } from 'marked';\\n\\nmarked.use({\\n  pedantic: false,\\n  gfm: true,\\n  breaks: false,\\n  sanitize: false,\\n  smartLists: true,\\n  smartypants: false,\\n  xhtml: false\\n});\\n```\\n\\nYou can also supply multiple `extension` objects at once.\\n\\n```\\nmarked.use(myExtension, extension2, extension3);\\n\\n\\\\\\\\ EQUIVALENT TO:\\n\\nmarked.use(myExtension);\\nmarked.use(extension2);\\nmarked.use(extension3);\\n\\n```\\n\\nAll options will overwrite those previously set, except for the following options which will be merged with the existing framework and can be used to change or extend the functionality of Marked: `renderer`, `tokenizer`, `walkTokens`, and `extensions`.\\n\\n* The `renderer` and `tokenizer` options are objects with functions that will be merged into the built-in `renderer` and `tokenizer` respectively.\\n\\n* The `walkTokens` option is a function that will be called to post-process every token before rendering.\\n\\n* The `extensions` option is an array of objects that can contain additional custom `renderer` and `tokenizer` steps that will execute before any of the default parsing logic occurs.\\n\\n***\\n\\n<h2>The Marked Pipeline</h2>\\n\\nBefore building your custom extensions, it is important to understand the components that Marked uses to translate from Markdown to HTML:\\n\\n1) The user supplies Marked with an input string to be translated.\\n2) The `lexer` feeds segments of the input text string into each `tokenizer`, and from their output, generates a series of tokens in a nested tree structure.\\n3) Each `tokenizer` receives a segment of Markdown text and, if it matches a particular pattern, generates a token object containing any relevant information.\\n4) The `walkTokens` function will traverse every token in the tree and perform any final adjustments to the token contents.\\n4) The `parser` traverses the token tree and feeds each token into the appropriate `renderer`, and concatenates their outputs into the final HTML result.\\n5) Each `renderer` receives a token and manipulates its contents to generate a segment of HTML.\\n\\nMarked provides methods of directly overriding the `renderer` and `tokenizer` for any existing token type, as well as inserting additional custom `renderer` and `tokenizer` functions to handle entirely custom syntax.\\n\\n***\\n\\n<h2 id=\\\"renderer\\\">The Renderer : <code>renderer</code></h2>\\n\\nThe renderer defines the HTML output of a given token. If you supply a `renderer` object to the Marked options, it will be merged with the built-in renderer and any functions inside will override the default handling of that token type.\\n\\nCalling `marked.use()` to override the same function multiple times will give priority to the version that was assigned *last*. Overriding functions can return `false` to fall back to the previous override in the sequence, or resume default behavior if all overrides return `false`. Returning any other value (including nothing) will prevent fallback behavior.\\n\\n**Example:** Overriding output of the default `heading` token by adding an embedded anchor tag like on GitHub.\\n\\n```js\\n// Create reference instance\\nimport { marked } from 'marked';\\n\\n// Override function\\nconst renderer = {\\n  heading(text, level) {\\n    const escapedText = text.toLowerCase().replace(/[^\\\\w]+/g, '-');\\n\\n    return `\\n            <h${level}>\\n              <a name=\\\"${escapedText}\\\" class=\\\"anchor\\\" href=\\\"#${escapedText}\\\">\\n                <span class=\\\"header-link\\\"></span>\\n              </a>\\n              ${text}\\n            </h${level}>`;\\n  }\\n};\\n\\nmarked.use({ renderer });\\n\\n// Run marked\\nconsole.log(marked.parse('# heading+'));\\n```\\n\\n**Output:**\\n\\n```html\\n<h1>\\n  <a name=\\\"heading-\\\" class=\\\"anchor\\\" href=\\\"#heading-\\\">\\n    <span class=\\\"header-link\\\"></span>\\n  </a>\\n  heading+\\n</h1>\\n```\\n\\n### Block-level renderer methods\\n\\n- <code>**code**(*string* code, *string* infostring, *boolean* escaped)</code>\\n- <code>**blockquote**(*string* quote)</code>\\n- <code>**html**(*string* html)</code>\\n- <code>**heading**(*string* text, *number* level, *string* raw, *Slugger* slugger)</code>\\n- <code>**hr**()</code>\\n- <code>**list**(*string* body, *boolean* ordered, *number* start)</code>\\n- <code>**listitem**(*string* text, *boolean* task, *boolean* checked)</code>\\n- <code>**checkbox**(*boolean* checked)</code>\\n- <code>**paragraph**(*string* text)</code>\\n- <code>**table**(*string* header, *string* body)</code>\\n- <code>**tablerow**(*string* content)</code>\\n- <code>**tablecell**(*string* content, *object* flags)</code>\\n\\n### Inline-level renderer methods\\n\\n- <code>**strong**(*string* text)</code>\\n- <code>**em**(*string* text)</code>\\n- <code>**codespan**(*string* code)</code>\\n- <code>**br**()</code>\\n- <code>**del**(*string* text)</code>\\n- <code>**link**(*string* href, *string* title, *string* text)</code>\\n- <code>**image**(*string* href, *string* title, *string* text)</code>\\n- <code>**text**(*string* text)</code>\\n\\n`slugger` has the `slug` method to create a unique id from value:\\n\\n```js\\nslugger.slug('foo')   // foo\\nslugger.slug('foo')   // foo-1\\nslugger.slug('foo')   // foo-2\\nslugger.slug('foo 1') // foo-1-1\\nslugger.slug('foo-1') // foo-1-2\\n...\\n```\\n\\n`slugger.slug` can also be called with the `dryrun` option for stateless operation:\\n```js\\nslugger.slug('foo')                    // foo\\nslugger.slug('foo')                    // foo-1\\nslugger.slug('foo')                    // foo-2\\nslugger.slug('foo', { dryrun: true })  // foo-3\\nslugger.slug('foo', { dryrun: true })  // foo-3\\nslugger.slug('foo')                    // foo-3\\nslugger.slug('foo')                    // foo-4\\n...\\n```\\n\\n`flags` has the following properties:\\n\\n```js\\n{\\n    header: true || false,\\n    align: 'center' || 'left' || 'right'\\n}\\n```\\n\\n***\\n\\n<h2 id=\\\"tokenizer\\\">The Tokenizer : <code>tokenizer</code></h2>\\n\\nThe tokenizer defines how to turn markdown text into tokens. If you supply a `tokenizer` object to the Marked options, it will be merged with the built-in tokenizer and any functions inside will override the default handling of that token type.\\n\\nCalling `marked.use()` to override the same function multiple times will give priority to the version that was assigned *last*. Overriding functions can return `false` to fall back to the previous override in the sequence, or resume default behavior if all overrides return `false`. Returning any other value (including nothing) will prevent fallback behavior.\\n\\n**Example:** Overriding default `codespan` tokenizer to include LaTeX.\\n\\n```js\\n// Create reference instance\\nimport { marked } from 'marked';\\n\\n// Override function\\nconst tokenizer = {\\n  codespan(src) {\\n    const match = src.match(/\\\\$+([^\\\\$\\\\n]+?)\\\\$+/);\\n    if (match) {\\n      return {\\n        type: 'codespan',\\n        raw: match[0],\\n        text: match[1].trim()\\n      };\\n    }\\n\\n    // return false to use original codespan tokenizer\\n    return false;\\n  }\\n};\\n\\nmarked.use({ tokenizer });\\n\\n// Run marked\\nconsole.log(marked.parse('$ latex code $\\\\n\\\\n` other code `'));\\n```\\n\\n**Output:**\\n\\n```html\\n<p><code>latex code</code></p>\\n<p><code>other code</code></p>\\n```\\n**NOTE**: This does not fully support latex, see issue [#1948](https://github.com/markedjs/marked/issues/1948).\\n\\n### Block level tokenizer methods\\n\\n- <code>**space**(*string* src)</code>\\n- <code>**code**(*string* src)</code>\\n- <code>**fences**(*string* src)</code>\\n- <code>**heading**(*string* src)</code>\\n- <code>**nptable**(*string* src)</code>\\n- <code>**hr**(*string* src)</code>\\n- <code>**blockquote**(*string* src)</code>\\n- <code>**list**(*string* src)</code>\\n- <code>**html**(*string* src)</code>\\n- <code>**def**(*string* src)</code>\\n- <code>**table**(*string* src)</code>\\n- <code>**lheading**(*string* src)</code>\\n- <code>**paragraph**(*string* src)</code>\\n- <code>**text**(*string* src)</code>\\n\\n### Inline level tokenizer methods\\n\\n- <code>**escape**(*string* src)</code>\\n- <code>**tag**(*string* src)</code>\\n- <code>**link**(*string* src)</code>\\n- <code>**reflink**(*string* src, *object* links)</code>\\n- <code>**emStrong**(*string* src, *string* maskedSrc, *string* prevChar)</code>\\n- <code>**codespan**(*string* src)</code>\\n- <code>**br**(*string* src)</code>\\n- <code>**del**(*string* src)</code>\\n- <code>**autolink**(*string* src, *function* mangle)</code>\\n- <code>**url**(*string* src, *function* mangle)</code>\\n- <code>**inlineText**(*string* src, *function* smartypants)</code>\\n\\n`mangle` is a method that changes text to HTML character references:\\n\\n```js\\nmangle('test@example.com')\\n// \\\"&#x74;&#101;&#x73;&#116;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#x63;&#111;&#x6d;\\\"\\n```\\n\\n`smartypants` is a method that translates plain ASCII punctuation characters into \\u201csmart\\u201d typographic punctuation HTML entities:\\n\\nhttps://daringfireball.net/projects/smartypants/\\n\\n```js\\nsmartypants('\\\"this ... string\\\"')\\n// \\\"\\u201cthis \\u2026 string\\u201d\\\"\\n```\\n\\n***\\n\\n<h2 id=\\\"walk-tokens\\\">Walk Tokens : <code>walkTokens</code></h2>\\n\\nThe walkTokens function gets called with every token. Child tokens are called before moving on to sibling tokens. Each token is passed by reference so updates are persisted when passed to the parser. The return value of the function is ignored.\\n\\n`marked.use()` can be called multiple times with different `walkTokens` functions. Each function will be called in order, starting with the function that was assigned *last*.\\n\\n**Example:** Overriding heading tokens to start at h2.\\n\\n```js\\nimport { marked } from 'marked';\\n\\n// Override function\\nconst walkTokens = (token) => {\\n  if (token.type === 'heading') {\\n    token.depth += 1;\\n  }\\n};\\n\\nmarked.use({ walkTokens });\\n\\n// Run marked\\nconsole.log(marked.parse('# heading 2\\\\n\\\\n## heading 3'));\\n```\\n\\n**Output:**\\n\\n```html\\n<h2 id=\\\"heading-2\\\">heading 2</h2>\\n<h3 id=\\\"heading-3\\\">heading 3</h3>\\n```\\n\\n***\\n\\n<h2 id=\\\"extensions\\\">Custom Extensions : <code>extensions</code></h2>\\n\\nYou may supply an `extensions` array to the `options` object. This array can contain any number of `extension` objects, using the following properties:\\n\\n<dl>\\n<dt><code><strong>name</strong></code></dt>\\n<dd>A string used to identify the token that will be handled by this extension.\\n\\nIf the name matches an existing extension name, or an existing method in the tokenizer/renderer methods listed above, they will override the previously assigned behavior, with priority on the extension that was assigned **last**. An extension can return `false` to fall back to the previous behavior.</dd>\\n\\n<dt><code><strong>level</strong></code></dt>\\n<dd>A string to determine when to run the extension tokenizer. Must be equal to 'block' or 'inline'.\\n\\nA **block-level** extension will be handled before any of the block-level tokenizer methods listed above, and generally consists of 'container-type' text (paragraphs, tables, blockquotes, etc.).\\n\\nAn **inline-level** extension will be handled inside each block-level token, before any of the inline-level tokenizer methods listed above. These generally consist of 'style-type' text (italics, bold, etc.).</dd>\\n\\n<dt><code><strong>start</strong>(<i>string</i> src)</code></dt>\\n<dd>A function that returns the index of the next potential start of the custom token.\\n\\nThe index can be the result of a <code>src.match().index</code>, or even a simple <code>src.index()</code>. Marked will use this function to ensure that it does not skip over any text that should be part of the custom token.</dd>\\n\\n<dt><code><strong>tokenizer</strong>(<i>string</i> src, <i>array</i> tokens)</code></dt>\\n<dd>A function that reads a string of Markdown text and returns a generated token. The <code>tokens</code> parameter contains the array of tokens that have been generated by the lexer up to that point, and can be used to access the previous token, for instance.\\n\\nThe return value should be an object with the following parameters:\\n\\n<dl>\\n<dt><code><strong>type</strong></code></dt>\\n<dd>A string that matches the <code>name</code> parameter of the extension.</dd>\\n\\n<dt><code><strong>raw</strong></code></dt>\\n<dd>A string containing all of the text that this token consumes from the source.</dd>\\n\\n<dt><code><strong>tokens</strong> [optional]</code></dt>\\n<dd>An array of child tokens that will be traversed by the <code>walkTokens</code> function by default.</dd>\\n</dl>\\n\\nThe returned token can also contain any other custom parameters of your choice that your custom `renderer` might need to access.\\n\\nThe tokenizer function has access to the lexer in the `this` object, which can be used if any internal section of the string needs to be parsed further, such as in handling any inline syntax on the text within a block token. The key functions that may be useful include:\\n\\n<dl>\\n<dt><code><strong>this.lexer.blockTokens</strong>(<i>string</i> text, <i>array</i> tokens)</code></dt>\\n<dd>This runs the block tokenizer functions (including any block-level extensions) on the provided text, and appends any resulting tokens onto the <code>tokens</code> array. The <code>tokens</code> array is also returned by the function. You might use this, for example, if your extension creates a \\\"container\\\"-type token (such as a blockquote) that can potentially include other block-level tokens inside.</dd>\\n\\n<dt><code><strong>this.lexer.inline</strong>(<i>string</i> text, <i>array</i> tokens)</code></dt>\\n<dd>Parsing of inline-level tokens only occurs after all block-level tokens have been generated. This function adds <code>text</code> and <code>tokens</code> to a queue to be processed using inline-level tokenizers (including any inline-level extensions) at that later step. Tokens will be generated using the provided <code>text</code>, and any resulting tokens will be appended to the <code>tokens</code> array. Note that this function does **NOT** return anything since the inline processing cannot happen until the block-level processing is complete.</dd>\\n\\n<dt><code><strong>this.lexer.inlineTokens</strong>(<i>string</i> text, <i>array</i> tokens)</code></dt>\\n<dd>Sometimes an inline-level token contains further nested inline tokens (such as a <pre><code>**strong**</code></pre> token inside of a <pre><code>### Heading</code></pre>). This runs the inline tokenizer functions (including any inline-level extensions) on the provided text, and appends any resulting tokens onto the <code>tokens</code> array. The <code>tokens</code> array is also returned by the function.</dd>\\n</dl>\\n</dd>\\n\\n<dt><code><strong>renderer</strong>(<i>object</i> token)</code></dt>\\n<dd>A function that reads a token and returns the generated HTML output string.\\n\\nThe renderer function has access to the parser in the `this` object, which can be used if any part of the token needs needs to be parsed further, such as any child tokens. The key functions that may be useful include:\\n\\n<dl>\\n<dt><code><strong>this.parser.parse</strong>(<i>array</i> tokens)</code></dt>\\n<dd>Runs the block renderer functions (including any extensions) on the provided array of tokens, and returns the resulting HTML string output. This is used to generate the HTML from any child block-level tokens, for example if your extension is a \\\"container\\\"-type token (such as a blockquote) that can potentially include other block-level tokens inside.</dd>\\n\\n<dt><code><strong>this.parser.parseInline</strong>(<i>array</i> tokens)</code></dt>\\n<dd>Runs the inline renderer functions (including any extensions) on the provided array of tokens, and returns the resulting HTML string output. This is used to generate the HTML from any child inline-level tokens.</dd>\\n</dl>\\n</dd>\\n\\n<dt><code><strong>childTokens</strong> [optional]</code></dt>\\n<dd>An array of strings that match the names of any token parameters that should be traversed by the <code>walkTokens</code> functions. For instance, if you want to use a second custom parameter to contain child tokens in addition to <code>tokens</code>, it could be listed here. If <code>childTokens</code> is provided, the <code>tokens</code> array will not be walked by default unless it is also included in the <code>childTokens</code> array.</dd>\\n</dl>\\n\\n**Example:** Add a custom syntax to generate `<dl>` description lists.\\n\\n``` js\\nconst descriptionlist = {\\n  name: 'descriptionList',\\n  level: 'block',                                     // Is this a block-level or inline-level tokenizer?\\n  start(src) { return src.match(/:[^:\\\\n]/)?.index; }, // Hint to Marked.js to stop and check for a match\\n  tokenizer(src, tokens) {\\n    const rule = /^(?::[^:\\\\n]+:[^:\\\\n]*(?:\\\\n|$))+/;    // Regex for the complete token\\n    const match = rule.exec(src);\\n    if (match) {\\n      const token = {                                 // Token to generate\\n        type: 'descriptionList',                      // Should match \\\"name\\\" above\\n        raw: match[0],                                // Text to consume from the source\\n        text: match[0].trim(),                        // Additional custom properties\\n        tokens: []                                    // Array where child inline tokens will be generated\\n      };\\n      this.lexer.inline(token.text, token.tokens);    // Queue this data to be processed for inline tokens\\n      return token;\\n    }\\n  },\\n  renderer(token) {\\n    return `<dl>${this.parser.parseInline(token.tokens)}\\\\n</dl>`; // parseInline to turn child tokens into HTML\\n  }\\n};\\n\\nconst description = {\\n  name: 'description',\\n  level: 'inline',                                 // Is this a block-level or inline-level tokenizer?\\n  start(src) { return src.match(/:/)?.index; },    // Hint to Marked.js to stop and check for a match\\n  tokenizer(src, tokens) {\\n    const rule = /^:([^:\\\\n]+):([^:\\\\n]*)(?:\\\\n|$)/;  // Regex for the complete token\\n    const match = rule.exec(src);\\n    if (match) {\\n      return {                                         // Token to generate\\n        type: 'description',                           // Should match \\\"name\\\" above\\n        raw: match[0],                                 // Text to consume from the source\\n        dt: this.lexer.inlineTokens(match[1].trim()),  // Additional custom properties, including\\n        dd: this.lexer.inlineTokens(match[2].trim())   //   any further-nested inline tokens\\n      };\\n    }\\n  },\\n  renderer(token) {\\n    return `\\\\n<dt>${this.parser.parseInline(token.dt)}</dt><dd>${this.parser.parseInline(token.dd)}</dd>`;\\n  },\\n  childTokens: ['dt', 'dd'],                 // Any child tokens to be visited by walkTokens\\n};\\n\\nfunction walkTokens(token) {                        // Post-processing on the completed token tree\\n  if (token.type === 'strong') {\\n    token.text += ' walked';\\n    token.tokens = this.Lexer.lexInline(token.text)\\n  }\\n}\\nmarked.use({ extensions: [descriptionlist, description], walkTokens });\\n\\n// EQUIVALENT TO:\\n\\nmarked.use({ extensions: [descriptionList] });\\nmarked.use({ extensions: [description]     });\\nmarked.use({ walkTokens })\\n\\nconsole.log(marked.parse('A Description List:\\\\n'\\n                 + ':   Topic 1   :  Description 1\\\\n'\\n                 + ': **Topic 2** : *Description 2*'));\\n```\\n\\n**Output**\\n\\n``` bash\\n<p>A Description List:</p>\\n<dl>\\n<dt>Topic 1</dt><dd>Description 1</dd>\\n<dt><strong>Topic 2 walked</strong></dt><dd><em>Description 2</em></dd>\\n</dl>\\n```\\n\\n***\\n\\n<h2 id=\\\"lexer\\\">The Lexer</h2>\\n\\nThe lexer takes a markdown string and calls the tokenizer functions.\\n\\n\\n<h2 id=\\\"parser\\\">The Parser</h2>\\n\\nThe parser takes tokens as input and calls the renderer functions.\\n\\n<h2 id=\\\"extend\\\">Access to Lexer and Parser</h2>\\n\\nYou also have direct access to the lexer and parser if you so desire.\\n\\n``` js\\nconst tokens = marked.lexer(markdown, options);\\nconsole.log(marked.parser(tokens, options));\\n```\\n\\n``` js\\nconst lexer = new marked.Lexer(options);\\nconst tokens = lexer.lex(markdown);\\nconsole.log(tokens);\\nconsole.log(lexer.tokenizer.rules.block); // block level rules used\\nconsole.log(lexer.tokenizer.rules.inline); // inline level rules used\\nconsole.log(marked.Lexer.rules.block); // all block level rules\\nconsole.log(marked.Lexer.rules.inline); // all inline level rules\\n```\\n\\n``` bash\\n$ node\\n> require('marked').lexer('> I am using marked.')\\n[\\n  {\\n    type: \\\"blockquote\\\",\\n    raw: \\\"> I am using marked.\\\",\\n    tokens: [\\n      {\\n        type: \\\"paragraph\\\",\\n        raw: \\\"I am using marked.\\\",\\n        text: \\\"I am using marked.\\\",\\n        tokens: [\\n          {\\n            type: \\\"text\\\",\\n            raw: \\\"I am using marked.\\\",\\n            text: \\\"I am using marked.\\\"\\n          }\\n        ]\\n      }\\n    ]\\n  },\\n  links: {}\\n]\\n```\\n\\nThe Lexer builds an array of tokens, which will be passed to the Parser.\\nThe Parser processes each token in the token array:\\n\\n``` js\\nimport { marked } from 'marked';\\n\\nconst md = `\\n  # heading\\n\\n  [link][1]\\n\\n  [1]: #heading \\\"heading\\\"\\n`;\\n\\nconst tokens = marked.lexer(md);\\nconsole.log(tokens);\\n\\nconst html = marked.parser(tokens);\\nconsole.log(html);\\n```\\n\\n``` bash\\n[\\n  {\\n    type: \\\"heading\\\",\\n    raw: \\\"  # heading\\\\n\\\\n\\\",\\n    depth: 1,\\n    text: \\\"heading\\\",\\n    tokens: [\\n      {\\n        type: \\\"text\\\",\\n        raw: \\\"heading\\\",\\n        text: \\\"heading\\\"\\n      }\\n    ]\\n  },\\n  {\\n    type: \\\"paragraph\\\",\\n    raw: \\\"  [link][1]\\\",\\n    text: \\\"  [link][1]\\\",\\n    tokens: [\\n      {\\n        type: \\\"text\\\",\\n        raw: \\\"  \\\",\\n        text: \\\"  \\\"\\n      },\\n      {\\n        type: \\\"link\\\",\\n        raw: \\\"[link][1]\\\",\\n        text: \\\"link\\\",\\n        href: \\\"#heading\\\",\\n        title: \\\"heading\\\",\\n        tokens: [\\n          {\\n            type: \\\"text\\\",\\n            raw: \\\"link\\\",\\n            text: \\\"link\\\"\\n          }\\n        ]\\n      }\\n    ]\\n  },\\n  {\\n    type: \\\"space\\\",\\n    raw: \\\"\\\\n\\\\n\\\"\\n  },\\n  links: {\\n    \\\"1\\\": {\\n      href: \\\"#heading\\\",\\n      title: \\\"heading\\\"\\n    }\\n  }\\n]\\n<h1 id=\\\"heading\\\">heading</h1>\\n<p>  <a href=\\\"#heading\\\" title=\\\"heading\\\">link</a></p>\\n```\\n\\n[end of USING_PRO.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "Bug_report.md",
        "marked.1.txt",
        "ISSUE_TEMPLATE.md",
        "update-specs.js",
        "USING_PRO.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "aa081831-8848-4dbe-90a9-4c6b13bee704",
        "score": 0.01639344262295082,
        "payload": {
          "text": "---\nname: Bug report\nabout: Marked says it does this thing but does not\n\n---\n**Marked version:**\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\n<!--\n1. [Marked Demo](https://marked.js.org/demo/)\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\n-->\n\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\n<!--\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\n3. Actual output (or error) is...\n-->\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n",
          "filepath": "data/repos/markedjs/marked-4.0/.github/ISSUE_TEMPLATE/Bug_report.md",
          "repo": "markedjs/marked",
          "version": "4.0",
          "chunk_index": 0
        }
      },
      {
        "id": "46223669-b5d9-4fde-8cae-16f850c281fc",
        "score": 0.016129032258064516,
        "payload": {
          "text": "marked(1)\t\t    General Commands Manual\t\t     marked(1)\n\nNAME\n       marked - a javascript markdown parser\n\nSYNOPSIS\n       marked  [-o  <output>]  [-i  <input>] [-s <string>] [--help] [--tokens]\n       [--pedantic]   [--gfm]\t [--breaks]    [--sanitize]    [--smart-lists]\n       [--lang-prefix <prefix>] [--no-etc...] [--silent] [filename]\n\n\nDESCRIPTION\n       marked is a full-featured javascript markdown parser, built for speed.\n       It also includes multiple GFM features.\n\nEXAMPLES\n       cat in.md | marked > out.html\n\n       echo \"hello *world*\" | marked\n\n       marked -o out.html -i in.md --gfm\n\n       marked --output=\"hello world.html\" -i in.md --no-breaks\n\nOPTIONS\n       -o, --output [output]\n\t      Specify file output. If none is specified, write to stdout.\n\n       -i, --input [input]\n\t      Specify file input, otherwise use last argument as input file.\n\t      If no input file is specified, read from stdin.\n\n       -s, --string [string]\n\t      Specify string input instead of a file.\n\n       -t, --tokens\n\t      Output a token stream instead of html.\n\n       --pedantic\n\t      Conform to obscure parts of markdown.pl as much as possible.\n\t      Don't fix original markdown bugs.\n\n       --gfm  Enable github flavored markdown.\n\n       --breaks\n\t      Enable GFM line breaks. Only works with the gfm option.\n\n       --sanitize\n\t      Sanitize output. Ignore any HTML input.\n\n       --smart-lists\n\t      Use smarter list behavior than the original markdown.\n\n       --lang-prefix [prefix]\n\t      Set the prefix for code block classes.\n\n       --mangle\n\t      Mangle email addresses.\n\n       --no-sanitize, -no-etc...\n\t      The inverse of any of the marked options above.\n\n       --silent\n\t      Silence error output.\n\n       -h, --help\n\t      Display help information.\n\nCONFIGURATION\n       For configuring and running programmatically.\n\n       Example\n\n\t   import { marked } from 'marked';\n\t   marked('*foo*', { gfm: true });\n\nBUGS\n       Please report any bugs to https://github.com/markedjs/marked.\n\nLICENSE\n       Copyright (c) 2011-2014, Christopher Jeffrey (MIT License).\n\nSEE ALSO\n       markdown(1), node.js(1)\n\n\t\t\t\t\t\t\t\t     marked(1)\n",
          "filepath": "data/repos/markedjs/marked-4.0/man/marked.1.txt",
          "repo": "markedjs/marked",
          "version": "4.0",
          "chunk_index": 0
        }
      },
      {
        "id": "7d299ff6-aaf9-4e97-8426-584695f744c0",
        "score": 0.015873015873015872,
        "payload": {
          "text": "**Marked version:**\n\n**Markdown flavor:** Markdown.pl|CommonMark|GitHub Flavored Markdown|n/a\n\n<!-- The NPM version or commit hash having the issue -->\n\n<!--\n\n\tIf submitting something other than a defect with Marked itself, please use the following:\n\n**Proposal type:** new feature | project operations | other\n\n## What pain point are you perceiving?\n\n## What solution are you suggesting?\n\n-->\n\n## Expectation\n\n**CommonMark Demo:** [demo](https://spec.commonmark.org/dingus/)\n<!-- You can replace the link above with a permalink from: https://spec.commonmark.org/dingus/ -->\n\n<!-- Describe the output you are expecting from marked -->\n\n## Result\n\n**Marked Demo:** [demo](https://marked.js.org/demo/)\n<!-- You can replace the link above with a permalink from: https://marked.js.org/demo/ -->\n\n<!-- Describe the output you received from marked -->\n\n## What was attempted\n\n<!-- Describe what code combination got you there -->\n\n<!--\n\tIf error is thrown add the following:\n\n## Call stack & console log\n\n-->\n",
          "filepath": "data/repos/markedjs/marked-4.0/.github/ISSUE_TEMPLATE.md",
          "repo": "markedjs/marked",
          "version": "4.0",
          "chunk_index": 0
        }
      },
      {
        "id": "628199ca-a0cb-40f9-87f3-63a267e51789",
        "score": 0.015625,
        "payload": {
          "text": "import fetch from 'node-fetch';\nimport { load } from 'cheerio';\nimport marked from '../';\nimport { isEqual } from './helpers/html-differ.js';\nimport { readdirSync, unlinkSync, writeFileSync } from 'fs';\nimport { join, resolve } from 'path';\n\nfunction removeFiles(dir) {\n  readdirSync(dir).forEach(file => {\n    unlinkSync(join(dir, file));\n  });\n}\n\nasync function updateCommonmark(dir, options) {\n  try {\n    const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\n    const pkg = await res.json();\n    const version = pkg.version.replace(/^(\\d+\\.\\d+).*$/, '$1');\n    const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\n    const specs = await res2.json();\n    specs.forEach(spec => {\n      const html = marked(spec.markdown, options);\n      if (!isEqual(html, spec.html)) {\n        spec.shouldFail = true;\n      }\n    });\n    writeFileSync(resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n    console.log(`Saved CommonMark v${version} specs`);\n  } catch (ex) {\n    console.log(ex);\n  }\n}\n\nasync function updateGfm(dir) {\n  try {\n    const res = await fetch('https://github.github.com/gfm/');\n    const html = await res.text();\n    const $ = load(html);\n    const version = $('.version').text().match(/\\d+\\.\\d+/)[0];\n    if (!version) {\n      throw new Error('No version found');\n    }\n    const specs = [];\n    $('.extension').each((i, ext) => {\n      const section = $('.definition', ext).text().trim().replace(/^\\d+\\.\\d+(.*?) \\(extension\\)[\\s\\S]*$/, '$1');\n      $('.example', ext).each((j, exa) => {\n        const example = +$(exa).attr('id').replace(/\\D/g, '');\n        const markdown = $('.language-markdown', exa).text().trim();\n        const html = $('.language-html', exa).text().trim();\n        specs.push({\n          section: `[extension] ${section}`,\n          html,\n          markdown,\n          example\n        });\n      });\n    });\n\n    specs.forEach(spec => {\n      const html = marked(spec.markdown, { gfm: true, pedantic: false });\n      if (!isEqual(html, spec.html)) {\n        spec.shouldFail = true;\n      }\n    });\n    writeFileSync(resolve(dir, `./gfm.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n    console.log(`Saved GFM v${version} specs.`);\n  } catch (ex) {\n    console.log(ex);\n  }\n}\n\nconst commonmarkDir = resolve(__dirname, './specs/commonmark');\nconst gfmDir = resolve(__dirname, './specs/gfm');\nremoveFiles(commonmarkDir);\nremoveFiles(gfmDir);\nupdateCommonmark(commonmarkDir, { gfm: false, pedantic: false, headerIds: false });\nupdateCommonmark(gfmDir, { gfm: true, pedantic: false, headerIds: false });\nupdateGfm(gfmDir);\n",
          "filepath": "data/repos/markedjs/marked-4.0/test/update-specs.js",
          "repo": "markedjs/marked",
          "version": "4.0",
          "chunk_index": 0
        }
      },
      {
        "id": "2e87b300-7074-4dfe-8efe-3bfa86d9f74f",
        "score": 0.015384615384615385,
        "payload": {
          "text": "## Extending Marked\n\nTo champion the single-responsibility and open/closed principles, we have tried to make it relatively painless to extend Marked. If you are looking to add custom functionality, this is the place to start.\n\n<h2 id=\"use\">marked.use()</h2>\n\n`marked.use(extension)` is the recommended way to extend Marked. The `extension` object can contain any [option](/using_advanced#options) available in Marked:\n\n\n```js\nimport { marked } from 'marked';\n\nmarked.use({\n  pedantic: false,\n  gfm: true,\n  breaks: false,\n  sanitize: false,\n  smartLists: true,\n  smartypants: false,\n  xhtml: false\n});\n```\n\nYou can also supply multiple `extension` objects at once.\n\n```\nmarked.use(myExtension, extension2, extension3);\n\n\\\\ EQUIVALENT TO:\n\nmarked.use(myExtension);\nmarked.use(extension2);\nmarked.use(extension3);\n\n```\n\nAll options will overwrite those previously set, except for the following options which will be merged with the existing framework and can be used to change or extend the functionality of Marked: `renderer`, `tokenizer`, `walkTokens`, and `extensions`.\n\n* The `renderer` and `tokenizer` options are objects with functions that will be merged into the built-in `renderer` and `tokenizer` respectively.\n\n* The `walkTokens` option is a function that will be called to post-process every token before rendering.\n\n* The `extensions` option is an array of objects that can contain additional custom `renderer` and `tokenizer` steps that will execute before any of the default parsing logic occurs.\n\n***\n\n<h2>The Marked Pipeline</h2>\n\nBefore building your custom extensions, it is important to understand the components that Marked uses to translate from Markdown to HTML:\n\n1) The user supplies Marked with an input string to be translated.\n2) The `lexer` feeds segments of the input text string into each `tokenizer`, and from their output, generates a series of tokens in a nested tree structure.\n3) Each `tokenizer` receives a segment of Markdown text and, if it matches a particular pattern, generates a token object containing any relevant information.\n4) The `walkTokens` function will traverse every token in the tree and perform any final adjustments to the token contents.\n4) The `parser` traverses the token tree and feeds each token into the appropriate `renderer`, and concatenates their outputs into the final HTML result.\n5) Each `renderer` receives a token and manipulates its contents to generate a segment of HTML.\n\nMarked provides methods of directly overriding the `renderer` and `tokenizer` for any existing token type, as well as inserting additional custom `renderer` and `tokenizer` functions to handle entirely custom syntax.\n\n***\n\n<h2 id=\"renderer\">The Renderer : <code>renderer</code></h2>\n\nThe renderer defines the HTML output of a given token. If you supply a `renderer` object to the Marked options, it will be merged with the built-in renderer and any functions inside will override the default handling of that token type.\n\nCalling `marked.use()` to override the same function multiple times will give priority to the version that was assigned *last*. Overriding functions can return `false` to fall back to the previous override in the sequence, or resume default behavior if all overrides return `false`. Returning any other value (including nothing) will prevent fallback behavior.\n\n**Example:** Overriding output of the default `heading` token by adding an embedded anchor tag like on GitHub.\n\n```js\n// Create reference instance\nimport { marked } from 'marked';\n\n// Override function\nconst renderer = {\n  heading(text, level) {\n    const escapedText = text.toLowerCase().replace(/[^\\w]+/g, '-');\n\n    return `\n            <h${level}>\n              <a name=\"${escapedText}\" class=\"anchor\" href=\"#${escapedText}\">\n                <span class=\"header-link\"></span>\n              </a>\n              ${text}\n            </h${level}>`;\n  }\n};\n\nmarked.use({ renderer });\n\n// Run marked\nconsole.log(marked.parse('# heading+'));\n```\n\n**Output:**\n\n```html\n<h1>\n  <a name=\"heading-\" class=\"anchor\" href=\"#heading-\">\n    <span class=\"header-link\"></span>\n  </a>\n  heading+\n</h1>\n```\n\n### Block-level renderer methods\n\n- <code>**code**(*string* code, *string* infostring, *boolean* escaped)</code>\n- <code>**blockquote**(*string* quote)</code>\n- <code>**html**(*string* html)</code>\n- <code>**heading**(*string* text, *number* level, *string* raw, *Slugger* slugger)</code>\n- <code>**hr**()</code>\n- <code>**list**(*string* body, *boolean* ordered, *number* start)</code>\n- <code>**listitem**(*string* text, *boolean* task, *boolean* checked)</code>\n- <code>**checkbox**(*boolean* checked)</code>\n- <code>**paragraph**(*string* text)</code>\n- <code>**table**(*string* header, *string* body)</code>\n- <code>**tablerow**(*string* content)</code>\n- <code>**tablecell**(*string* content, *object* flags)</code>\n\n### Inline-level renderer methods\n\n- <code>**strong**(*string* text)</code>\n- <code>**em**(*string* text)</code>\n- <code>**codespan**(*string* code)</code>\n- <code>**br**()</code>\n- <code>**del**(*string* text)</code>\n- <code>**link**(*string* href, *string* title, *string* text)</code>\n- <code>**image**(*string* href, *string* title, *string* text)</code>\n- <code>**text**(*string* text)</code>\n\n`slugger` has the `slug` method to create a unique id from value:\n\n```js\nslugger.slug('foo')   // foo\nslugger.slug('foo')   // foo-1\nslugger.slug('foo')   // foo-2\nslugger.slug('foo 1') // foo-1-1\nslugger.slug('foo-1') // foo-1-2\n...\n```\n\n`slugger.slug` can also be called with the `dryrun` option for stateless operation:\n```js\nslugger.slug('foo')                    // foo\nslugger.slug('foo')                    // foo-1\nslugger.slug('foo')                    // foo-2\nslugger.slug('foo', { dryrun: true })  // foo-3\nslugger.slug('foo', { dryrun: true })  // foo-3\nslugger.slug('foo')                    // foo-3\nslugger.slug('foo')                    // foo-4\n...\n```\n\n`flags` has the following properties:\n\n```js\n{\n    header: true || false,\n    align: 'center' || 'left' || 'right'\n}\n```\n\n***\n\n<h2 id=\"tokenizer\">The Tokenizer : <code>tokenizer</code></h2>\n\nThe tokenizer defines how to turn markdown text into tokens. If you supply a `tokenizer` object to the Marked options, it will be merged with the built-in tokenizer and any functions inside will override the default handling of that token type.\n\nCalling `marked.use()` to override the same function multiple times will give priority to the version that was assigned *last*. Overriding functions can return `false` to fall back to the previous override in the sequence, or resume default behavior if all overrides return `false`. Returning any other value (including nothing) will prevent fallback behavior.\n\n**Example:** Overriding default `codespan` tokenizer to include LaTeX.\n\n```js\n// Create reference instance\nimport { marked } from 'marked';\n\n// Override function\nconst tokenizer = {\n  codespan(src) {\n    const match = src.match(/\\$+([^\\$\\n]+?)\\$+/);\n    if (match) {\n      return {\n        type: 'codespan',\n        raw: match[0],\n        text: match[1].trim()\n      };\n    }\n\n    // return false to use original codespan tokenizer\n    return false;\n  }\n};\n\nmarked.use({ tokenizer });\n\n// Run marked\nconsole.log(marked.parse('$ latex code $\\n\\n` other code `'));\n```\n\n**Output:**\n\n```html\n<p><code>latex code</code></p>\n<p><code>other code</code></p>\n```\n**NOTE**: This does not fully support latex, see issue [#1948](https://github.com/markedjs/marked/issues/1948).\n\n### Block level tokenizer methods\n\n- <code>**space**(*string* src)</code>\n- <code>**code**(*string* src)</code>\n- <code>**fences**(*string* src)</code>\n- <code>**heading**(*string* src)</code>\n- <code>**nptable**(*string* src)</code>\n- <code>**hr**(*string* src)</code>\n- <code>**blockquote**(*string* src)</code>\n- <code>**list**(*string* src)</code>\n- <code>**html**(*string* src)</code>\n- <code>**def**(*string* src)</code>\n- <code>**table**(*string* src)</code>\n- <code>**lheading**(*string* src)</code>\n- <code>**paragraph**(*string* src)</code>\n- <code>**text**(*string* src)</code>\n\n### Inline level tokenizer methods\n\n- <code>**escape**(*string* src)</code>\n- <code>**tag**(*string* src)</code>\n- <code>**link**(*string* src)</code>\n- <code>**reflink**(*string* src, *object* links)</code>\n- <code>**emStrong**(*string* src, *string* maskedSrc, *string* prevChar)</code>\n- <code>**codespan**(*string* src)</code>\n- <code>**br**(*string* src)</code>\n- <code>**del**(*string* src)</code>\n- <code>**autolink**(*string* src, *function* mangle)</code>\n- <code>**url**(*string* src, *function* mangle)</code>\n- <code>**inlineText**(*string* src, *function* smartypants)</code>\n\n`mangle` is a method that changes text to HTML character references:\n\n```js\nmangle('test@example.com')\n// \"&#x74;&#101;&#x73;&#116;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#x63;&#111;&#x6d;\"\n```\n\n`smartypants` is a method that translates plain ASCII punctuation characters into \u201csmart\u201d typographic punctuation HTML entities:\n\nhttps://daringfireball.net/projects/smartypants/\n\n```js\nsmartypants('\"this ... string\"')\n// \"\u201cthis \u2026 string\u201d\"\n```\n\n***\n\n<h2 id=\"walk-tokens\">Walk Tokens : <code>walkTokens</code></h2>\n\nThe walkTokens function gets called with every token. Child tokens are called before moving on to sibling tokens. Each token is passed by reference so updates are persisted when passed to the parser. The return value of the function is ignored.\n\n`marked.use()` can be called multiple times with different `walkTokens` functions. Each function will be called in order, starting with the function that was assigned *last*.\n\n**Example:** Overriding heading tokens to start at h2.\n\n```js\nimport { marked } from 'marked';\n\n// Override function\nconst walkTokens = (token) => {\n  if (token.type === 'heading') {\n    token.depth += 1;\n  }\n};\n\nmarked.use({ walkTokens });\n\n// Run marked\nconsole.log(marked.parse('# heading 2\\n\\n## heading 3'));\n```\n\n**Output:**\n\n```html\n<h2 id=\"heading-2\">heading 2</h2>\n<h3 id=\"heading-3\">heading 3</h3>\n```\n\n***\n\n<h2 id=\"extensions\">Custom Extensions : <code>extensions</code></h2>\n\nYou may supply an `extensions` array to the `options` object. This array can contain any number of `extension` objects, using the following properties:\n\n<dl>\n<dt><code><strong>name</strong></code></dt>\n<dd>A string used to identify the token that will be handled by this extension.\n\nIf the name matches an existing extension name, or an existing method in the tokenizer/renderer methods listed above, they will override the previously assigned behavior, with priority on the extension that was assigned **last**. An extension can return `false` to fall back to the previous behavior.</dd>\n\n<dt><code><strong>level</strong></code></dt>\n<dd>A string to determine when to run the extension tokenizer. Must be equal to 'block' or 'inline'.\n\nA **block-level** extension will be handled before any of the block-level tokenizer methods listed above, and generally consists of 'container-type' text (paragraphs, tables, blockquotes, etc.).\n\nAn **inline-level** extension will be handled inside each block-level token, before any of the inline-level tokenizer methods listed above. These generally consist of 'style-type' text (italics, bold, etc.).</dd>\n\n<dt><code><strong>start</strong>(<i>string</i> src)</code></dt>\n<dd>A function that returns the index of the next potential start of the custom token.\n\nThe index can be the result of a <code>src.match().index</code>, or even a simple <code>src.index()</code>. Marked will use this function to ensure that it does not skip over any text that should be part of the custom token.</dd>\n\n<dt><code><strong>tokenizer</strong>(<i>string</i> src, <i>array</i> tokens)</code></dt>\n<dd>A function that reads a string of Markdown text and returns a generated token. The <code>tokens</code> parameter contains the array of tokens that have been generated by the lexer up to that point, and can be used to access the previous token, for instance.\n\nThe return value should be an object with the following parameters:\n\n<dl>\n<dt><code><strong>type</strong></code></dt>\n<dd>A string that matches the <code>name</code> parameter of the extension.</dd>\n\n<dt><code><strong>raw</strong></code></dt>\n<dd>A string containing all of the text that this token consumes from the source.</dd>\n\n<dt><code><strong>tokens</strong> [optional]</code></dt>\n<dd>An array of child tokens that will be traversed by the <code>walkTokens</code> function by default.</dd>\n</dl>\n\nThe returned token can also contain any other custom parameters of your choice that your custom `renderer` might need to access.\n\nThe tokenizer function has access to the lexer in the `this` object, which can be used if any internal section of the string needs to be parsed further, such as in handling any inline syntax on the text within a block token. The key functions that may be useful include:\n\n<dl>\n<dt><code><strong>this.lexer.blockTokens</strong>(<i>string</i> text, <i>array</i> tokens)</code></dt>\n<dd>This runs the block tokenizer functions (including any block-level extensions) on the provided text, and appends any resulting tokens onto the <code>tokens</code> array. The <code>tokens</code> array is also returned by the function. You might use this, for example, if your extension creates a \"container\"-type token (such as a blockquote) that can potentially include other block-level tokens inside.</dd>\n\n<dt><code><strong>this.lexer.inline</strong>(<i>string</i> text, <i>array</i> tokens)</code></dt>\n<dd>Parsing of inline-level tokens only occurs after all block-level tokens have been generated. This function adds <code>text</code> and <code>tokens</code> to a queue to be processed using inline-level tokenizers (including any inline-level extensions) at that later step. Tokens will be generated using the provided <code>text</code>, and any resulting tokens will be appended to the <code>tokens</code> array. Note that this function does **NOT** return anything since the inline processing cannot happen until the block-level processing is complete.</dd>\n\n<dt><code><strong>this.lexer.inlineTokens</strong>(<i>string</i> text, <i>array</i> tokens)</code></dt>\n<dd>Sometimes an inline-level token contains further nested inline tokens (such as a <pre><code>**strong**</code></pre> token inside of a <pre><code>### Heading</code></pre>). This runs the inline tokenizer functions (including any inline-level extensions) on the provided text, and appends any resulting tokens onto the <code>tokens</code> array. The <code>tokens</code> array is also returned by the function.</dd>\n</dl>\n</dd>\n\n<dt><code><strong>renderer</strong>(<i>object</i> token)</code></dt>\n<dd>A function that reads a token and returns the generated HTML output string.\n\nThe renderer function has access to the parser in the `this` object, which can be used if any part of the token needs needs to be parsed further, such as any child tokens. The key functions that may be useful include:\n\n<dl>\n<dt><code><strong>this.parser.parse</strong>(<i>array</i> tokens)</code></dt>\n<dd>Runs the block renderer functions (including any extensions) on the provided array of tokens, and returns the resulting HTML string output. This is used to generate the HTML from any child block-level tokens, for example if your extension is a \"container\"-type token (such as a blockquote) that can potentially include other block-level tokens inside.</dd>\n\n<dt><code><strong>this.parser.parseInline</strong>(<i>array</i> tokens)</code></dt>\n<dd>Runs the inline renderer functions (including any extensions) on the provided array of tokens, and returns the resulting HTML string output. This is used to generate the HTML from any child inline-level tokens.</dd>\n</dl>\n</dd>\n\n<dt><code><strong>childTokens</strong> [optional]</code></dt>\n<dd>An array of strings that match the names of any token parameters that should be traversed by the <code>walkTokens</code> functions. For instance, if you want to use a second custom parameter to contain child tokens in addition to <code>tokens</code>, it could be listed here. If <code>childTokens</code> is provided, the <code>tokens</code> array will not be walked by default unless it is also included in the <code>childTokens</code> array.</dd>\n</dl>\n\n**Example:** Add a custom syntax to generate `<dl>` description lists.\n\n``` js\nconst descriptionlist = {\n  name: 'descriptionList',\n  level: 'block',                                     // Is this a block-level or inline-level tokenizer?\n  start(src) { return src.match(/:[^:\\n]/)?.index; }, // Hint to Marked.js to stop and check for a match\n  tokenizer(src, tokens) {\n    const rule = /^(?::[^:\\n]+:[^:\\n]*(?:\\n|$))+/;    // Regex for the complete token\n    const match = rule.exec(src);\n    if (match) {\n      const token = {                                 // Token to generate\n        type: 'descriptionList',                      // Should match \"name\" above\n        raw: match[0],                                // Text to consume from the source\n        text: match[0].trim(),                        // Additional custom properties\n        tokens: []                                    // Array where child inline tokens will be generated\n      };\n      this.lexer.inline(token.text, token.tokens);    // Queue this data to be processed for inline tokens\n      return token;\n    }\n  },\n  renderer(token) {\n    return `<dl>${this.parser.parseInline(token.tokens)}\\n</dl>`; // parseInline to turn child tokens into HTML\n  }\n};\n\nconst description = {\n  name: 'description',\n  level: 'inline',                                 // Is this a block-level or inline-level tokenizer?\n  start(src) { return src.match(/:/)?.index; },    // Hint to Marked.js to stop and check for a match\n  tokenizer(src, tokens) {\n    const rule = /^:([^:\\n]+):([^:\\n]*)(?:\\n|$)/;  // Regex for the complete token\n    const match = rule.exec(src);\n    if (match) {\n      return {                                         // Token to generate\n        type: 'description',                           // Should match \"name\" above\n        raw: match[0],                                 // Text to consume from the source\n        dt: this.lexer.inlineTokens(match[1].trim()),  // Additional custom properties, including\n        dd: this.lexer.inlineTokens(match[2].trim())   //   any further-nested inline tokens\n      };\n    }\n  },\n  renderer(token) {\n    return `\\n<dt>${this.parser.parseInline(token.dt)}</dt><dd>${this.parser.parseInline(token.dd)}</dd>`;\n  },\n  childTokens: ['dt', 'dd'],                 // Any child tokens to be visited by walkTokens\n};\n\nfunction walkTokens(token) {                        // Post-processing on the completed token tree\n  if (token.type === 'strong') {\n    token.text += ' walked';\n    token.tokens = this.Lexer.lexInline(token.text)\n  }\n}\nmarked.use({ extensions: [descriptionlist, description], walkTokens });\n\n// EQUIVALENT TO:\n\nmarked.use({ extensions: [descriptionList] });\nmarked.use({ extensions: [description]     });\nmarked.use({ walkTokens })\n\nconsole.log(marked.parse('A Description List:\\n'\n                 + ':   Topic 1   :  Description 1\\n'\n                 + ': **Topic 2** : *Description 2*'));\n```\n\n**Output**\n\n``` bash\n<p>A Description List:</p>\n<dl>\n<dt>Topic 1</dt><dd>Description 1</dd>\n<dt><strong>Topic 2 walked</strong></dt><dd><em>Description 2</em></dd>\n</dl>\n```\n\n***\n\n<h2 id=\"lexer\">The Lexer</h2>\n\nThe lexer takes a markdown string and calls the tokenizer functions.\n\n\n<h2 id=\"parser\">The Parser</h2>\n\nThe parser takes tokens as input and calls the renderer functions.\n\n<h2 id=\"extend\">Access to Lexer and Parser</h2>\n\nYou also have direct access to the lexer and parser if you so desire.\n\n``` js\nconst tokens = marked.lexer(markdown, options);\nconsole.log(marked.parser(tokens, options));\n```\n\n``` js\nconst lexer = new marked.Lexer(options);\nconst tokens = lexer.lex(markdown);\nconsole.log(tokens);\nconsole.log(lexer.tokenizer.rules.block); // block level rules used\nconsole.log(lexer.tokenizer.rules.inline); // inline level rules used\nconsole.log(marked.Lexer.rules.block); // all block level rules\nconsole.log(marked.Lexer.rules.inline); // all inline level rules\n```\n\n``` bash\n$ node\n> require('marked').lexer('> I am using marked.')\n[\n  {\n    type: \"blockquote\",\n    raw: \"> I am using marked.\",\n    tokens: [\n      {\n        type: \"paragraph\",\n        raw: \"I am using marked.\",\n        text: \"I am using marked.\",\n        tokens: [\n          {\n            type: \"text\",\n            raw: \"I am using marked.\",\n            text: \"I am using marked.\"\n          }\n        ]\n      }\n    ]\n  },\n  links: {}\n]\n```\n\nThe Lexer builds an array of tokens, which will be passed to the Parser.\nThe Parser processes each token in the token array:\n\n``` js\nimport { marked } from 'marked';\n\nconst md = `\n  # heading\n\n  [link][1]\n\n  [1]: #heading \"heading\"\n`;\n\nconst tokens = marked.lexer(md);\nconsole.log(tokens);\n\nconst html = marked.parser(tokens);\nconsole.log(html);\n```\n\n``` bash\n[\n  {\n    type: \"heading\",\n    raw: \"  # heading\\n\\n\",\n    depth: 1,\n    text: \"heading\",\n    tokens: [\n      {\n        type: \"text\",\n        raw: \"heading\",\n        text: \"heading\"\n      }\n    ]\n  },\n  {\n    type: \"paragraph\",\n    raw: \"  [link][1]\",\n    text: \"  [link][1]\",\n    tokens: [\n      {\n        type: \"text\",\n        raw: \"  \",\n        text: \"  \"\n      },\n      {\n        type: \"link\",\n        raw: \"[link][1]\",\n        text: \"link\",\n        href: \"#heading\",\n        title: \"heading\",\n        tokens: [\n          {\n            type: \"text\",\n            raw: \"link\",\n            text: \"link\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    type: \"space\",\n    raw: \"\\n\\n\"\n  },\n  links: {\n    \"1\": {\n      href: \"#heading\",\n      title: \"heading\"\n    }\n  }\n]\n<h1 id=\"heading\">heading</h1>\n<p>  <a href=\"#heading\" title=\"heading\">link</a></p>\n```\n",
          "filepath": "data/repos/markedjs/marked-4.0/docs/USING_PRO.md",
          "repo": "markedjs/marked",
          "version": "4.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "processing__p5.js-4561",
    "model_patch": "diff --git a/src/core/error_helpers.js b/src/core/error_helpers.js\nindex 1234567..89abcde 100644\n--- a/src/core/error_helpers.js\n+++ b/src/core/error_helpers.js\n@@ -1,6 +1,7 @@\n import p5 from './main';\n import * as constants from './constants';\n import { translator } from './internationalization';\n+const typeSequenceCache = new Map();\n \n // p5.js blue, p5.js orange, auto dark green; fallback p5.js darkened magenta\n // See testColors below for all the color codes and names\n@@ -276,6 +277,7 @@ const lookupParamDoc = func => {\n   const overloads = [];\n   if (queryResult.hasOwnProperty('overloads')) {\n     // add all the overloads\n+    for (let i = 0; i < queryResult.overloads.length; i++) {\n       overloads.push({ formats: queryResult.overloads[i].params });\n     }\n   } else {\n@@ -1000,6 +1002,19 @@ p5._validateParameters = function validateParameters(func, args) {\n     return; // skip FES\n   }\n \n+  // Create a key for the current argument types\n+  const argTypesKey = args.map(arg => getType(arg)).join(',');\n+  const cacheKey = `${func}:${argTypesKey}`;\n+\n+  // Check if the current argument types have been validated before\n+  if (typeSequenceCache.has(cacheKey)) {\n+    return; // Skip validation if cached\n+  }\n+\n+  // Cache the current argument types\n+  typeSequenceCache.set(cacheKey, true);\n+\n   // lookup the docs in the 'data.json' file\n   const docs = docCache[func] || (docCache[func] = lookupParamDoc(func));\n   const overloads = docs.overloads;\n@@ -1010,7 +1025,7 @@ p5._validateParameters = function validateParameters(func, args) {\n   while (argCount > 0 && args[argCount - 1] == null) argCount--;\n \n   // find the overload with the best score\n-  let minScore = 99999;\n+  let minScore = Infinity;\n   let minOverload;\n   for (let i = 0; i < overloads.length; i++) {\n     const score = scoreOverload(args, argCount, overloads[i], minScore);",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 163.22,
      "issue_embedding_time_ms": 163.22,
      "retrieval_time_ms_splade": 54.26,
      "retrieval_time_ms": 54.26,
      "total_retrieval_time_ms": 217.48,
      "generation_time_ms": 5306.26,
      "total_io_time_ms": 5523.74,
      "input_total_token_limit": null,
      "issue_text_tokens": 355,
      "vlm_tokens": 0,
      "retrieved_tokens": 11798,
      "prompt_template_tokens": 539,
      "total_input_prompt_tokens": 12692,
      "output_generated_tokens": 523,
      "total_io_tokens": 13215,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nFES: validateParameters speed + repetitive logging\\n#### Most appropriate sub-area of p5.js?\\r\\n- [x] Other (Friendly errors)\\r\\n\\r\\n#### Feature enhancement details:\\r\\nI am working on the FES as part of my GSoC project and I will be starting by addressing the known issues in `validateParameters`. \\r\\n\\r\\nvalidateParameters is responsible for a slowdown as it runs every time a p5 function is called. I had first thought that this must largely be due to `lookupParamDocs` but this isn't entirely the case. `lookupParamDocs` runs a linear search on `data.json`, and it can be done in constant time using object lookups. Moreover the contents of data.json take up about 1.7 MB. Removing the unnecessary stuff cuts it to 400 KB, thus reducing the final library size by 1.3 MB. \\r\\n\\r\\nDoing all this only speeds up the first run. Over subsequent runs, scoring and matching the formats repeatedly is redundant if the same sequence of arguments repeats. This can be prevented by caching the argument types and returning if an earlier sequence of types repeats. In repeated calls, this should improve performance as long as the type sequence lookup is faster than scoring. This is the case for functions with a lot of formats and overloads. This would also solve the problem of the FES flooding the console in repeated runs of a function. \\r\\n<img src=\\\"https://user-images.githubusercontent.com/38867671/82134746-9bdfe480-9818-11ea-8a3d-59e4205a24b8.png\\\" width=\\\"300\\\">\\r\\nAlso, trailing undefined arguments are not accounted for by validateParamters, but I think that needs a separate issue? @stalgiag\\n\\n</issue>\\n\\n<code>\\n[start of error_helpers.js]\\n/**\\n * @for p5\\n * @requires core\\n *\\n * This is the main file for the Friendly Error System (FES). Here is a\\n * brief outline of the functions called in this system.\\n *\\n * The FES may be invoked by a call to either (1) _validateParameters,\\n * (2) _friendlyFileLoadError, (3) _friendlyError, or (4) helpForMisusedAtTopLevelCode.\\n *\\n * helpForMisusedAtTopLevelCode is called by this file on window load to check for use\\n * of p5.js functions outside of setup() or draw()\\n * Items 1-3 above are called by functions in the p5 library located in other files.\\n *\\n * _friendlyFileLoadError is called by the loadX() methods.\\n * _friendlyError can be called by any function to offer a helpful error message.\\n *\\n * _validateParameters is called by functions in the p5.js API to help users ensure\\n * ther are calling p5 function with the right parameter types. The property\\n * disableFriendlyErrors = false can be set from a p5.js sketch to turn off parameter\\n * checking. The call sequence from _validateParameters looks something like this:\\n *\\n * _validateParameters\\n *   lookupParamDoc\\n *   scoreOverload\\n *     testParamTypes\\n *     testParamType\\n *   getOverloadErrors\\n *   _friendlyParamError\\n *     ValidationError\\n *     report\\n *       friendlyWelcome\\n *\\n * The call sequences to _friendlyFileLoadError and _friendlyError are like this:\\n * _friendlyFileLoadError\\n *   report\\n *\\n * _friendlyError\\n *   report\\n *\\n * report() is the main function that prints directly to console with the output\\n * of the error helper message. Note: friendlyWelcome() also prints to console directly.\\n */\\nimport p5 from './main';\\nimport * as constants from './constants';\\nimport { translator } from './internationalization';\\n\\n// p5.js blue, p5.js orange, auto dark green; fallback p5.js darkened magenta\\n// See testColors below for all the color codes and names\\nconst typeColors = ['#2D7BB6', '#EE9900', '#4DB200', '#C83C00'];\\n\\nif (typeof IS_MINIFIED !== 'undefined') {\\n  p5._validateParameters = p5._friendlyFileLoadError = p5._friendlyError = () => {};\\n} else {\\n  let doFriendlyWelcome = false; // TEMP until we get it all working LM\\n  // for parameter validation\\n  const dataDoc = require('../../docs/reference/data.json');\\n  const arrDoc = JSON.parse(JSON.stringify(dataDoc));\\n\\n  // -- Borrowed from jQuery 1.11.3 --\\n  const class2type = {};\\n  const toString = class2type.toString;\\n  const names = [\\n    'Boolean',\\n    'Number',\\n    'String',\\n    'Function',\\n    'Array',\\n    'Date',\\n    'RegExp',\\n    'Object',\\n    'Error'\\n  ];\\n  for (let n = 0; n < names.length; n++) {\\n    class2type[`[object ${names[n]}]`] = names[n].toLowerCase();\\n  }\\n  const getType = obj => {\\n    if (obj == null) {\\n      return `${obj}`;\\n    }\\n    return typeof obj === 'object' || typeof obj === 'function'\\n      ? class2type[toString.call(obj)] || 'object'\\n      : typeof obj;\\n  };\\n\\n  // -- End borrow --\\n\\n  const friendlyWelcome = () => {\\n    // p5.js brand - magenta: #ED225D\\n    //const astrixBgColor = 'transparent';\\n    //const astrixTxtColor = '#ED225D';\\n    //const welcomeBgColor = '#ED225D';\\n    //const welcomeTextColor = 'white';\\n    const welcomeMessage = translator('fes.pre', {\\n      message: translator('fes.welcome')\\n    });\\n    console.log(\\n      '    _ \\\\n' +\\n        ' /\\\\\\\\| |/\\\\\\\\ \\\\n' +\\n        \\\" \\\\\\\\ ` ' /  \\\\n\\\" +\\n        ' / , . \\\\\\\\  \\\\n' +\\n        ' \\\\\\\\/|_|\\\\\\\\/ ' +\\n        '\\\\n\\\\n' +\\n        welcomeMessage\\n    );\\n  };\\n\\n  /**\\n   * Prints out a fancy, colorful message to the console log\\n   *\\n   * @method report\\n   * @private\\n   * @param  {String}               message the words to be said\\n   * @param  {String}               func    the name of the function to link\\n   * @param  {Number|String} color   CSS color string or error type\\n   *\\n   * @return console logs\\n   */\\n  const report = (message, func, color) => {\\n    if (doFriendlyWelcome) {\\n      friendlyWelcome();\\n      doFriendlyWelcome = false;\\n    }\\n    if ('undefined' === getType(color)) {\\n      color = '#B40033'; // dark magenta\\n    } else if (getType(color) === 'number') {\\n      // Type to color\\n      color = typeColors[color];\\n    }\\n    if (func.substring(0, 4) === 'load') {\\n      console.log(translator('fes.pre', { message }));\\n    } else {\\n      console.log(\\n        translator('fes.pre', {\\n          message: `${message} (http://p5js.org/reference/#p5/${func})`\\n        })\\n      );\\n    }\\n  };\\n\\n  // mapping used by `_friendlyFileLoadError`\\n  const fileLoadErrorCases = (num, filePath) => {\\n    const suggestion = translator('fes.fileLoadError.suggestion', {\\n      filePath,\\n      link: 'https://github.com/processing/p5.js/wiki/Local-server'\\n    });\\n    switch (num) {\\n      case 0:\\n        return {\\n          message: translator('fes.fileLoadError.image', {\\n            suggestion\\n          }),\\n          method: 'loadImage'\\n        };\\n      case 1:\\n        return {\\n          message: translator('fes.fileLoadError.xml', {\\n            suggestion\\n          }),\\n          method: 'loadXML'\\n        };\\n      case 2:\\n        return {\\n          message: translator('fes.fileLoadError.table', {\\n            suggestion\\n          }),\\n          method: 'loadTable'\\n        };\\n      case 3:\\n        return {\\n          message: translator('fes.fileLoadError.strings', {\\n            suggestion\\n          }),\\n          method: 'loadStrings'\\n        };\\n      case 4:\\n        return {\\n          message: translator('fes.fileLoadError.font', {\\n            suggestion\\n          }),\\n          method: 'loadFont'\\n        };\\n      case 5:\\n        return {\\n          message: translator('fes.fileLoadError.json', {\\n            suggestion\\n          }),\\n          method: 'loadJSON'\\n        };\\n      case 6:\\n        return {\\n          message: translator('fes.fileLoadError.bytes', {\\n            suggestion\\n          }),\\n          method: 'loadBytes'\\n        };\\n      case 7:\\n        return {\\n          message: translator('fes.fileLoadError.large'),\\n          method: 'loadX'\\n        };\\n      case 8:\\n        return {\\n          message: translator('fes.fileLoadError.gif'),\\n          method: 'loadImage'\\n        };\\n    }\\n  };\\n\\n  /**\\n   * This is called internally if there is a error during file loading.\\n   *\\n   * @method _friendlyFileLoadError\\n   * @private\\n   * @param  {Number} errorType\\n   * @param  {String} filePath\\n   */\\n  p5._friendlyFileLoadError = function(errorType, filePath) {\\n    const { message, method } = fileLoadErrorCases(errorType, filePath);\\n    report(message, method, 3);\\n  };\\n\\n  /**\\n   * This is a generic method that can be called from anywhere in the p5\\n   * library to alert users to a common error.\\n   *\\n   * @method _friendlyError\\n   * @private\\n   * @param  {Number} message message to be printed\\n   * @param  {String} method name of method\\n   */\\n  p5._friendlyError = function(message, method) {\\n    report(message, method);\\n  };\\n\\n  /**\\n   * This is called internally if there is a error with autoplay.\\n   *\\n   * @method _friendlyAutoplayError\\n   * @private\\n   */\\n  p5._friendlyAutoplayError = function(src) {\\n    const message = translator('fes.autoplay', {\\n      src,\\n      link: 'https://developer.mozilla.org/docs/Web/Media/Autoplay_guide'\\n    });\\n    console.log(translator('fes.pre', { message }));\\n  };\\n\\n  const docCache = {};\\n  const builtinTypes = [\\n    'null',\\n    'number',\\n    'string',\\n    'boolean',\\n    'constant',\\n    'function',\\n    'any',\\n    'integer'\\n  ];\\n\\n  // validateParameters() helper functions:\\n  // lookupParamDoc() for querying data.json\\n  const lookupParamDoc = func => {\\n    // look for the docs in the `data.json` datastructure\\n\\n    const ichDot = func.lastIndexOf('.');\\n    const funcName = func.substr(ichDot + 1);\\n    const funcClass = func.substr(0, ichDot) || 'p5';\\n\\n    let queryResult;\\n    const classitems = arrDoc.classitems;\\n\\n    for (const x of classitems) {\\n      if (x.name === funcName && x.class === funcClass) {\\n        queryResult = x;\\n        break;\\n      }\\n    }\\n\\n    // different JSON structure for funct with multi-format\\n    const overloads = [];\\n    if (queryResult.hasOwnProperty('overloads')) {\\n      // add all the overloads\\n      for (let i = 0; i < queryResult.overloads.length; i++) {\\n        overloads.push({ formats: queryResult.overloads[i].params });\\n      }\\n    } else {\\n      // no overloads, just add the main method definition\\n      overloads.push({ formats: queryResult.params || [] });\\n    }\\n\\n    // parse the parameter types for each overload\\n    const mapConstants = {};\\n    let maxParams = 0;\\n    overloads.forEach(overload => {\\n      const formats = overload.formats;\\n\\n      // keep a record of the maximum number of arguments\\n      // this method requires.\\n      if (maxParams < formats.length) {\\n        maxParams = formats.length;\\n      }\\n\\n      // calculate the minimum number of arguments\\n      // this overload requires.\\n      let minParams = formats.length;\\n      while (minParams > 0 && formats[minParams - 1].optional) {\\n        minParams--;\\n      }\\n      overload.minParams = minParams;\\n\\n      // loop through each parameter position, and parse its types\\n      formats.forEach(format => {\\n        // split this parameter's types\\n        format.types = format.type.split('|').map(function ct(type) {\\n          // array\\n          if (type.substr(type.length - 2, 2) === '[]') {\\n            return {\\n              name: type,\\n              array: ct(type.substr(0, type.length - 2))\\n            };\\n          }\\n\\n          let lowerType = type.toLowerCase();\\n\\n          // contant\\n          if (lowerType === 'constant') {\\n            let constant;\\n            if (mapConstants.hasOwnProperty(format.name)) {\\n              constant = mapConstants[format.name];\\n            } else {\\n              // parse possible constant values from description\\n              const myRe = /either\\\\s+(?:[A-Z0-9_]+\\\\s*,?\\\\s*(?:or)?\\\\s*)+/g;\\n              const values = {};\\n              const names = [];\\n\\n              constant = mapConstants[format.name] = {\\n                values,\\n                names\\n              };\\n\\n              const myArray = myRe.exec(format.description);\\n              if (func === 'endShape' && format.name === 'mode') {\\n                values[constants.CLOSE] = true;\\n                names.push('CLOSE');\\n              } else {\\n                const match = myArray[0];\\n                const reConst = /[A-Z0-9_]+/g;\\n                let matchConst;\\n                while ((matchConst = reConst.exec(match)) !== null) {\\n                  const name = matchConst[0];\\n                  if (constants.hasOwnProperty(name)) {\\n                    values[constants[name]] = true;\\n                    names.push(name);\\n                  }\\n                }\\n              }\\n            }\\n            return {\\n              name: type,\\n              builtin: lowerType,\\n              names: constant.names,\\n              values: constant.values\\n            };\\n          }\\n\\n          // function\\n          if (lowerType.substr(0, 'function'.length) === 'function') {\\n            lowerType = 'function';\\n          }\\n          // builtin\\n          if (builtinTypes.includes(lowerType)) {\\n            return { name: type, builtin: lowerType };\\n          }\\n\\n          // find type's prototype\\n          let t = window;\\n          const typeParts = type.split('.');\\n\\n          // special-case 'p5' since it may be non-global\\n          if (typeParts[0] === 'p5') {\\n            t = p5;\\n            typeParts.shift();\\n          }\\n\\n          typeParts.forEach(p => {\\n            t = t && t[p];\\n          });\\n          if (t) {\\n            return { name: type, prototype: t };\\n          }\\n\\n          return { name: type, type: lowerType };\\n        });\\n      });\\n    });\\n    return {\\n      overloads,\\n      maxParams\\n    };\\n  };\\n\\n  const isNumber = param => {\\n    switch (typeof param) {\\n      case 'number':\\n        return true;\\n      case 'string':\\n        return !isNaN(param);\\n      default:\\n        return false;\\n    }\\n  };\\n\\n  const testParamType = (param, type) => {\\n    const isArray = param instanceof Array;\\n    let matches = true;\\n    if (type.array && isArray) {\\n      for (let i = 0; i < param.length; i++) {\\n        const error = testParamType(param[i], type.array);\\n        if (error) return error / 2; // half error for elements\\n      }\\n    } else if (type.prototype) {\\n      matches = param instanceof type.prototype;\\n    } else if (type.builtin) {\\n      switch (type.builtin) {\\n        case 'number':\\n          matches = isNumber(param);\\n          break;\\n        case 'integer':\\n          matches = isNumber(param) && Number(param) === Math.floor(param);\\n          break;\\n        case 'boolean':\\n        case 'any':\\n          matches = true;\\n          break;\\n        case 'array':\\n          matches = isArray;\\n          break;\\n        case 'string':\\n          matches = /*typeof param === 'number' ||*/ typeof param === 'string';\\n          break;\\n        case 'constant':\\n          matches = type.values.hasOwnProperty(param);\\n          break;\\n        case 'function':\\n          matches = param instanceof Function;\\n          break;\\n        case 'null':\\n          matches = param === null;\\n          break;\\n      }\\n    } else {\\n      matches = typeof param === type.t;\\n    }\\n    return matches ? 0 : 1;\\n  };\\n\\n  // testType() for non-object type parameter validation\\n  const testParamTypes = (param, types) => {\\n    let minScore = 9999;\\n    for (let i = 0; minScore > 0 && i < types.length; i++) {\\n      const score = testParamType(param, types[i]);\\n      if (minScore > score) minScore = score;\\n    }\\n    return minScore;\\n  };\\n\\n  // generate a score (higher is worse) for applying these args to\\n  // this overload.\\n  const scoreOverload = (args, argCount, overload, minScore) => {\\n    let score = 0;\\n    const formats = overload.formats;\\n    const minParams = overload.minParams;\\n\\n    // check for too few/many args\\n    // the score is double number of extra/missing args\\n    if (argCount < minParams) {\\n      score = (minParams - argCount) * 2;\\n    } else if (argCount > formats.length) {\\n      score = (argCount - formats.length) * 2;\\n    }\\n\\n    // loop through the formats, adding up the error score for each arg.\\n    // quit early if the score gets higher than the previous best overload.\\n    for (let p = 0; score <= minScore && p < formats.length; p++) {\\n      const arg = args[p];\\n      const format = formats[p];\\n      // '== null' checks for 'null' and typeof 'undefined'\\n      if (arg == null) {\\n        // handle non-optional and non-trailing undefined args\\n        if (!format.optional || p < minParams || p < argCount) {\\n          score += 1;\\n        }\\n      } else {\\n        score += testParamTypes(arg, format.types);\\n      }\\n    }\\n    return score;\\n  };\\n\\n  // gets a list of errors for this overload\\n  const getOverloadErrors = (args, argCount, overload) => {\\n    const formats = overload.formats;\\n    const minParams = overload.minParams;\\n\\n    // check for too few/many args\\n    if (argCount < minParams) {\\n      return [\\n        {\\n          type: 'TOO_FEW_ARGUMENTS',\\n          argCount,\\n          minParams\\n        }\\n      ];\\n    } else if (argCount > formats.length) {\\n      return [\\n        {\\n          type: 'TOO_MANY_ARGUMENTS',\\n          argCount,\\n          maxParams: formats.length\\n        }\\n      ];\\n    }\\n\\n    const errorArray = [];\\n    for (let p = 0; p < formats.length; p++) {\\n      const arg = args[p];\\n      const format = formats[p];\\n      // '== null' checks for 'null' and typeof 'undefined'\\n      if (arg == null) {\\n        // handle non-optional and non-trailing undefined args\\n        if (!format.optional || p < minParams || p < argCount) {\\n          errorArray.push({\\n            type: 'EMPTY_VAR',\\n            position: p,\\n            format\\n          });\\n        }\\n      } else if (testParamTypes(arg, format.types) > 0) {\\n        errorArray.push({\\n          type: 'WRONG_TYPE',\\n          position: p,\\n          format,\\n          arg\\n        });\\n      }\\n    }\\n\\n    return errorArray;\\n  };\\n\\n  // a custom error type, used by the mocha\\n  // tests when expecting validation errors\\n  p5.ValidationError = (name => {\\n    class err extends Error {\\n      constructor(message, func) {\\n        super();\\n        this.message = message;\\n        this.func = func;\\n        if ('captureStackTrace' in Error) Error.captureStackTrace(this, err);\\n        else this.stack = new Error().stack;\\n      }\\n    }\\n\\n    err.prototype.name = name;\\n    return err;\\n  })('ValidationError');\\n\\n  // function for generating console.log() msg\\n  p5._friendlyParamError = function(errorObj, func) {\\n    let message;\\n\\n    function formatType() {\\n      const format = errorObj.format;\\n      return format.types\\n        .map(type => (type.names ? type.names.join('|') : type.name))\\n        .join('|');\\n    }\\n\\n    switch (errorObj.type) {\\n      case 'EMPTY_VAR': {\\n        message = `${func}() was expecting ${formatType()} for parameter #${\\n          errorObj.position\\n        } (zero-based index), received an empty variable instead. If not intentional, this is often a problem with scope: [https://p5js.org/examples/data-variable-scope.html]`;\\n        break;\\n      }\\n      case 'WRONG_TYPE': {\\n        const arg = errorObj.arg;\\n        const argType =\\n          arg instanceof Array\\n            ? 'array'\\n            : arg === null ? 'null' : arg.name || typeof arg;\\n        message = `${func}() was expecting ${formatType()} for parameter #${\\n          errorObj.position\\n        } (zero-based index), received ${argType} instead`;\\n        break;\\n      }\\n      case 'TOO_FEW_ARGUMENTS': {\\n        message = `${func}() was expecting at least ${\\n          errorObj.minParams\\n        } arguments, but received only ${errorObj.argCount}`;\\n        break;\\n      }\\n      case 'TOO_MANY_ARGUMENTS': {\\n        message = `${func}() was expecting no more than ${\\n          errorObj.maxParams\\n        } arguments, but received ${errorObj.argCount}`;\\n        break;\\n      }\\n    }\\n\\n    if (message) {\\n      if (p5._throwValidationErrors) {\\n        throw new p5.ValidationError(message);\\n      }\\n\\n      try {\\n        const re = /Function\\\\.validateParameters.*[\\\\r\\\\n].*[\\\\r\\\\n].*\\\\(([^)]*)/;\\n        const location = re.exec(new Error().stack)[1];\\n        if (location) {\\n          message += ` at ${location}`;\\n        }\\n      } catch (err) {}\\n\\n      report(`${message}.`, func, 3);\\n    }\\n  };\\n\\n  /**\\n   * Validates parameters\\n   * param  {String}               func    the name of the function\\n   * param  {Array}                args    user input arguments\\n   *\\n   * example:\\n   *  const a;\\n   *  ellipse(10,10,a,5);\\n   * console ouput:\\n   *  \\\"It looks like ellipse received an empty variable in spot #2.\\\"\\n   *\\n   * example:\\n   *  ellipse(10,\\\"foo\\\",5,5);\\n   * console output:\\n   *  \\\"ellipse was expecting a number for parameter #1,\\n   *           received \\\"foo\\\" instead.\\\"\\n   */\\n  p5._validateParameters = function validateParameters(func, args) {\\n    if (p5.disableFriendlyErrors) {\\n      return; // skip FES\\n    }\\n\\n    // lookup the docs in the 'data.json' file\\n    const docs = docCache[func] || (docCache[func] = lookupParamDoc(func));\\n    const overloads = docs.overloads;\\n\\n    // ignore any trailing `undefined` arguments\\n    let argCount = args.length;\\n    // '== null' checks for 'null' and typeof 'undefined'\\n    while (argCount > 0 && args[argCount - 1] == null) argCount--;\\n\\n    // find the overload with the best score\\n    let minScore = 99999;\\n    let minOverload;\\n    for (let i = 0; i < overloads.length; i++) {\\n      const score = scoreOverload(args, argCount, overloads[i], minScore);\\n      if (score === 0) {\\n        return; // done!\\n      } else if (minScore > score) {\\n        // this score is better that what we have so far...\\n        minScore = score;\\n        minOverload = i;\\n      }\\n    }\\n\\n    // this should _always_ be true here...\\n    if (minScore > 0) {\\n      // get the errors for the best overload\\n      const errorArray = getOverloadErrors(\\n        args,\\n        argCount,\\n        overloads[minOverload]\\n      );\\n\\n      // generate err msg\\n      for (let n = 0; n < errorArray.length; n++) {\\n        p5._friendlyParamError(errorArray[n], func);\\n      }\\n    }\\n  };\\n\\n  /**\\n   * Prints out all the colors in the color pallete with white text.\\n   * For color blindness testing.\\n   */\\n  /* function testColors() {\\n    const str = 'A box of biscuits, a box of mixed biscuits and a biscuit mixer';\\n    report(str, 'print', '#ED225D'); // p5.js magenta\\n    report(str, 'print', '#2D7BB6'); // p5.js blue\\n    report(str, 'print', '#EE9900'); // p5.js orange\\n    report(str, 'print', '#A67F59'); // p5.js light brown\\n    report(str, 'print', '#704F21'); // p5.js gold\\n    report(str, 'print', '#1CC581'); // auto cyan\\n    report(str, 'print', '#FF6625'); // auto orange\\n    report(str, 'print', '#79EB22'); // auto green\\n    report(str, 'print', '#B40033'); // p5.js darkened magenta\\n    report(str, 'print', '#084B7F'); // p5.js darkened blue\\n    report(str, 'print', '#945F00'); // p5.js darkened orange\\n    report(str, 'print', '#6B441D'); // p5.js darkened brown\\n    report(str, 'print', '#2E1B00'); // p5.js darkened gold\\n    report(str, 'print', '#008851'); // auto dark cyan\\n    report(str, 'print', '#C83C00'); // auto dark orange\\n    report(str, 'print', '#4DB200'); // auto dark green\\n  } */\\n\\n  p5.prototype._validateParameters = p5.validateParameters;\\n}\\n\\n// This is a lazily-defined list of p5 symbols that may be\\n// misused by beginners at top-level code, outside of setup/draw. We'd like\\n// to detect these errors and help the user by suggesting they move them\\n// into setup/draw.\\n//\\n// For more details, see https://github.com/processing/p5.js/issues/1121.\\nlet misusedAtTopLevelCode = null;\\nconst FAQ_URL =\\n  'https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup';\\n\\nconst defineMisusedAtTopLevelCode = () => {\\n  const uniqueNamesFound = {};\\n\\n  const getSymbols = obj =>\\n    Object.getOwnPropertyNames(obj)\\n      .filter(name => {\\n        if (name[0] === '_') {\\n          return false;\\n        }\\n        if (name in uniqueNamesFound) {\\n          return false;\\n        }\\n\\n        uniqueNamesFound[name] = true;\\n\\n        return true;\\n      })\\n      .map(name => {\\n        let type;\\n\\n        if (typeof obj[name] === 'function') {\\n          type = 'function';\\n        } else if (name === name.toUpperCase()) {\\n          type = 'constant';\\n        } else {\\n          type = 'variable';\\n        }\\n\\n        return { name, type };\\n      });\\n\\n  misusedAtTopLevelCode = [].concat(\\n    getSymbols(p5.prototype),\\n    // At present, p5 only adds its constants to p5.prototype during\\n    // construction, which may not have happened at the time a\\n    // ReferenceError is thrown, so we'll manually add them to our list.\\n    getSymbols(require('./constants'))\\n  );\\n\\n  // This will ultimately ensure that we report the most specific error\\n  // possible to the user, e.g. advising them about HALF_PI instead of PI\\n  // when their code misuses the former.\\n  misusedAtTopLevelCode.sort((a, b) => b.name.length - a.name.length);\\n};\\n\\nconst helpForMisusedAtTopLevelCode = (e, log) => {\\n  if (!log) {\\n    log = console.log.bind(console);\\n  }\\n\\n  if (!misusedAtTopLevelCode) {\\n    defineMisusedAtTopLevelCode();\\n  }\\n\\n  // If we find that we're logging lots of false positives, we can\\n  // uncomment the following code to avoid displaying anything if the\\n  // user's code isn't likely to be using p5's global mode. (Note that\\n  // setup/draw are more likely to be defined due to JS function hoisting.)\\n  //\\n  //if (!('setup' in window || 'draw' in window)) {\\n  //  return;\\n  //}\\n\\n  misusedAtTopLevelCode.some(symbol => {\\n    // Note that while just checking for the occurrence of the\\n    // symbol name in the error message could result in false positives,\\n    // a more rigorous test is difficult because different browsers\\n    // log different messages, and the format of those messages may\\n    // change over time.\\n    //\\n    // For example, if the user uses 'PI' in their code, it may result\\n    // in any one of the following messages:\\n    //\\n    //   * 'PI' is undefined                           (Microsoft Edge)\\n    //   * ReferenceError: PI is undefined             (Firefox)\\n    //   * Uncaught ReferenceError: PI is not defined  (Chrome)\\n\\n    if (e.message && e.message.match(`\\\\\\\\W?${symbol.name}\\\\\\\\W`) !== null) {\\n      const symbolName =\\n        symbol.type === 'function' ? `${symbol.name}()` : symbol.name;\\n      log(\\n        translator('fes.misusedTopLevel', {\\n          symbolName,\\n          symbolType: symbol.type,\\n          link: FAQ_URL\\n        })\\n      );\\n      return true;\\n    }\\n  });\\n};\\n\\n// Exposing this primarily for unit testing.\\np5.prototype._helpForMisusedAtTopLevelCode = helpForMisusedAtTopLevelCode;\\n\\nif (document.readyState !== 'complete') {\\n  window.addEventListener('error', helpForMisusedAtTopLevelCode, false);\\n\\n  // Our job is only to catch ReferenceErrors that are thrown when\\n  // global (non-instance mode) p5 APIs are used at the top-level\\n  // scope of a file, so we'll unbind our error listener now to make\\n  // sure we don't log false positives later.\\n  window.addEventListener('load', () => {\\n    window.removeEventListener('error', helpForMisusedAtTopLevelCode, false);\\n  });\\n}\\n\\nexport default p5;\\n\\n[end of error_helpers.js]\\n[start of friendly_error_system.md]\\n# p5.js Friendly Error System (FES)\\n\\n## Overview\\n\\nThe Friendly Error System (FES) is a system designed to help new programmers with common user errors as they get started learning. It catches common beginning errors and provides clear language and links to help a user resolve the error. FES is only applied to functions that are ones a user might encounter when they are just starting. An exception is made for particular common gotchas such as trying to load files without running a server, or calling loadImage() with a URL, etc.\\n\\nThe goal is to create accessible error messages to supplement the often cryptic console errors. For example, Javascript has no support for type checking as default making errors in parameter entry was harder to detect for new Javascript developers.\\n\\nMessages generated by FES are written in natural language, linked to documentation, and assume a beginner level. The errors are triggered in multiple files through out p5.js, but most of the work and error writing happens in `src/core/error_helpers.js`.  \\n\\nBy default, FES is enabled for `p5.js`, whereas completely disabled in `p5.min.js`. It is possible to disable FES by setting `p5.disableFriendlyErrors = true;`.\\n\\nSo far FES is able to detect and print messages for four kinds of errors: \\n\\n1. `validateParameters()` checks a function\\u2019s input parameters based on inline documentations\\n\\n2. `friendlyFileLoadError()` catches file loading errors. These two kinds of error checking have been integrated into an existing (selected set of) p5 functions, but developers can add them to more p5 functions, or their own libraries, by calling `p5._validateParameters()`\\n\\n3. `friendlyError()` can be called by any function to offer a helpful error message\\n\\n4. `helpForMisusedAtTopLevelCode()` is called on window load to check for use of p5.js functions outside of setup() or draw()\\n\\nPlease also see inline notes in [src/core/error_helper.js](https://github.com/processing/p5.js/blob/master/src/core/error_helpers.js) for more technical information.\\n\\n### `core/error_helpers/friendlyFileLoadError()`: \\n* This function generates and displays friendly error messages if a file fails to load correctly. It also checks if the size of a file might be too large to load and produces a warning. \\n* This can be called through : `p5._friendlyFileLoadError(ERROR_TYPE, FILE_PATH)`.\\n* file loading error example:\\n````javascript\\n/// missing font file\\nlet myFont;\\nfunction preload() {\\n  myFont = loadFont('assets/OpenSans-Regular.ttf');\\n};\\nfunction setup() {\\n  fill('#ED225D');\\n  textFont(myFont);\\n  textSize(36);\\n  text('p5*js', 10, 50);\\n};\\nfunction draw() {};\\n/// FES will generate the following message in the console:\\n/// > p5.js says: It looks like there was a problem loading your font. Try checking if the file path [assets/OpenSans-Regular.ttf] is correct, hosting the font online, or running a local server.[https://github.com/processing/p5.js/wiki/Local-server]\\n````\\n* Currently version contains templates for generating error messages for `image`, `XML`, `table`, `text`, `json` and `font` files.\\n* Implemented to `image/loading_displaying/loadImage()`, `io/files/loadFont()`, `io/files/loadTable()`, `io/files/loadJSON()`, `io/files/loadStrings()`, `io/files/loadXML()`, `io/files/loadBytes()`.\\n* Error while loading a file due to its large size is implemented to all loadX methods.\\n\\n### `core/error_helpers/validateParameters()`:\\n* This function runs parameter validation by matching the input parameters with information from `docs/reference/data.json`, which is created from the function's inline documentation. It checks that a function call contains the correct number and the correct type of parameters. \\n* missing parameter example:\\n````javascript\\narc(1, 1, 10.5, 10);\\n/// FES will generate the following message in the console:\\n/// > p5.js says: It looks like arc() received an empty variable in spot #4 (zero-based index). If not intentional, this is often a problem with scope: [https://p5js.org/examples/data-variable-scope.html]. [http://p5js.org/reference/#p5/arc]\\n/// > p5.js says: It looks like arc() received an empty variable in spot #5 (zero-based index). If not intentional, this is often a problem with scope: [https://p5js.org/examples/data-variable-scope.html]. [http://p5js.org/reference/#p5/arc]\\n\\n````\\n* wrong type example:\\n````javascript\\narc('1', 1, 10.5, 10, 0, Math.PI, 'pie');\\n/// FES will generate the following message in the console:\\n/// > p5.js says: arc() was expecting Number for parameter #0 (zero-based index), received string instead. [http://p5js.org/reference/#p5/arc]\\n````\\n* This can be called through: `p5._validateParameters(FUNCT_NAME, ARGUMENTS)` \\nor, `p5.prototype._validateParameters(FUNCT_NAME, ARGUMENTS)` inside the function that requires parameter validation. It is recommended to use static version, `p5._validateParameters` for general purposes. `p5.prototype._validateParameters(FUNCT_NAME, ARGUMENTS)` mainly remained for debugging and unit testing purposes.\\n* Implemented to functions in `color/creating_reading`, `core/2d_primitives`, `core/curves`, and `utilities/string_functions`. \\n\\n## Additional Features\\n* The FES welcomes the developer to p5 and the friendly debugger. \\n* The FES works in the IDE and the web editor. \\n\\n## Notes for Developers\\n* When creating p5.js Objects: any p5.js objects that will be used for parameters will need to assign value for `name` parameter (name of the object) within the class declaration. e.g.: \\n````javascript \\np5.newObject = function(parameter) {\\n   this.parameter = 'some parameter';\\n   this.name = 'p5.newObject';\\n};\\n````\\n* Inline documentation: allowed parameter types are `Boolean`, `Number`, `String`, and name of the object (see the above bullet point). Use `Array` for any types of Array parameters. If needed, explain what kind of the specific types of array parameter are allowed (e.g. `Number[]`, `String[]`) in the description section.\\n* Currently supported class types (have their `name` parameter): `p5.Color`, `p5.Element`, `p5.Graphics`, `p5.Renderer`, `p5.Renderer2D`, `p5.Image`, `p5.Table`, `p5.TableRow`, `p5.XML`, `p5.Vector`, `p5.Font`, `p5.Geometry`, `p5.Matrix`, `p5.RendererGL`.\\n\\n## Disable the FES\\n\\nBy default, FES is enabled for p5.js, and disabled in p5.min.js to prevent FES functions slowing down the process. The error checking system can significantly slow down your code (up to ~10x in some cases). See the [friendly error performance test](https://github.com/processing/p5.js-website/blob/master/dist/assets/learn/performance/code/friendly-error-system/).\\n\\nYou can disable this with one line of code at the top of your sketch:\\n\\n```javascript\\np5.disableFriendlyErrors = true; // disables FES\\n\\nfunction setup() {\\n  // Do setup stuff\\n}\\n\\nfunction draw() {\\n  // Do drawing stuff\\n}\\n```\\n\\nNote that this will disable the parts of the FES that cause performance slowdown (like argument checking). Friendly errors that have no performance cost (like giving an descriptive error if a file load fails, or warning you if you try to override p5.js functions in the global space), will remain in place. \\n\\n## Known Limitations\\n* The friendly error system slows the program down, so there is an option to turn it off via setting `p5.disableFriendlyErrors = true;`. In addition, the friendly error system is omitted by default in the minified (`p5.min.js`) version.\\n* FES may still result in false negative cases. These are usually caused by the mismatch between designs of the  functions (e.g. drawing functions those are originally designed to be used interchangeably in both 2D and 3D settings) with actual usage cases. For example, drawing a 3D line with \\n```javascript \\nconst x3; // undefined\\nline(0, 0, 100, 100, x3, Math.PI);\\n```\\n will escape FES, because there is an acceptable parameter pattern (`Number`, `Number`, `Number`, `Number`) in `line()`'s inline documentation for drawing in 2D setting. This also means the current version of FES doesn't check for the environmental variables such as `_renderer.isP3D`.\\n * FES is only able to detect global variables overwritten when declared using `const` or `var`. If `let` is used, they go undetected. This is not currently solvable due to the way `let` instantiates variables.\\n\\n## In The Works\\n* Identify more common error types and generalize with FES (e.g. `bezierVertex()`, `quadraticVertex()` - required object not initiated; checking Number parameters positive for `nf()` `nfc()` `nfp()` `nfs()`)\\n\\n## Thoughts for the Future\\n* re-introduce color coding for the Web Editor.\\n* More unit testings.\\n* More intuitive and narrowed down output messages.\\n* Having a Spanish translation available.\\n* All the colors are checked for being color blind friendly.\\n* More elaborate ascii is always welcome! \\n* Global Error catching. It would be very helpful to catch the errors the browser is throwing to the console, so we can match them up with friendly comments. \\n\\n```javascript\\n// this snippet wraps window.console methods with a new function to modify their functionality\\n// it is not currently implemented, but could be to give nicer formatted error messages\\nconst original = window.console;\\nconst original_functions  = {\\n  log: original.log,\\n  warn:  original.warn,\\n  error: original.error\\n}\\n\\n[\\\"log\\\", \\\"warn\\\", \\\"error\\\"].forEach(function(func){\\nwindow.console[func] = function(msg) {\\n//do something with the msg caught by the wrapper function, then call the original function\\noriginal_functions[func].apply(original, arguments)\\n};\\n});\\n```\\n\\n[end of friendly_error_system.md]\\n[start of sakshamsaxena_gsoc_2017.md]\\n# Wrapping up GSoC 2017 with p5.js (by [@sakshamsaxena](https://github.com/sakshamsaxena))\\n\\n## Summary\\n\\nThere were 3 major tasks that were proposed to pursue this summer under Google Summer of Code 2017 with p5.js under The Processing Foundation. All these focussed on improving the infrastructure and operations of the library, independent of the library API itself. To better tackle and organise new Issues, an Issue Template was implemented, which saw immense utility for contributors and owners to address new Issues. A new Grunt Task using Browserify was created which takes in the desired components that one wants to utilise as arguments, and built the library consisting of those components only. Dedicated Grunt Tasks were written to automate the release process end-to-end with minimal user interaction. The outcome of these tasks was improved developer operations (via Issue Templates and Release Process Automation), and improved library accessibility (via the Modularisation Task).\\n\\n## Task Details\\n\\n### 1. [Adding Issue Templates](https://github.com/processing/p5.js/issues)\\n\\nReporting Bugs or Feature Suggestions by the Community through Issues is also a significant contribution to the Project and it catalyses the growth of Project through them. Relevant responses and discussions in context to those, delivered in a short time, further engages the community into the Project. The GitHub Issue Template was [added](https://github.com/processing/p5.js/commits/master/ISSUE_TEMPLATE.md?author=sakshamsaxena) as my first contribution under GSoC on June 12, and till date it has been proven to be extremely helpful to both the reporter as well as responder, meanwhile aligning to it's original aim.\\n\\nPreview of the complete template : \\n![Preview of the complete template](http://www.clipular.com/c/4631172675272704.png?k=gQwp7j5erUp9iZDrZvlEWY-27KY)\\n\\nSome helpful comments are added alongside to make the experience of reporting an issue significantly lucid to a complete beginner. You can see the same when you [open a new issue](https://github.com/processing/p5.js/issues/new).\\n\\n### 2. [Generating a custom (modular) build of p5.js](https://github.com/processing/p5.js/blob/master/contributor_docs/custom_p5_build.md)\\n\\nThis task was inspired by [Issue #94](https://github.com/processing/p5.js/issues/94). The goal was to implement such a functionality which enables users to select the desired components/modules which they want to use, and only those components would be bundled then itself to generate a custom build of p5.js.\\n\\nCurrently, the usage is through invoking a Grunt task manually from the command line :\\n```\\ngrunt combineModules:module_a[:module_b][:module_c]\\n```\\nwhere `module_X` refers to the name of the _*folder*_ of the desired component, viz. :\\n```\\ncolor\\ncore\\nevents\\nimage\\nio\\nutilities\\nmath\\ntypography\\n```\\nCore is included by default in all cases. The output bundle is found in `lib/modules` directory.\\n\\n### 3. Automating the Release Process\\n\\nA dedicated and detailed Grunt Task was written which handles the release process end to end. It covers Testing, Version Bump, Building Library and Docs, Creating a new Commit and Tag with the bumped package.json, Pushing these changes to GitHub (to this p5.js repo), Release the library files only on NPM, and Bower (by updating the release repo maintained by @lmccart), Updating the docs in the website repo with newly generated ones, Drafting a GitHub Release (on this repo) with the JS files and the Zip as mentioned. \\n\\nThe owner is required to provide the following beforehand initiating the process :\\n\\n* Exporting an environment variable (only for the first time) which would hold the [GitHub Access Token](https://github.com/settings/tokens) for publishing a GitHub Release. \\n```export GITHUB_TOKEN=<token goes here>```\\n* Invoking the Grunt Task with the minor/major/patch/tag name as argument. Default is patch.\\n```grunt release-p5:minor```\\n\\nIntermediate pulling or pushing is performed over HTTPS, so it might need user input for authentication (username/password).\\n\\n## Conclusion\\n\\nNew features were implemented in p5.js which would receive user feedback once they're out in the next release. Modularisation (#2 Task) and Automation (#3 Task) are implemented as alpha, and hold immense scope of improvement in terms of functionality, performance, and code. I would love to remain a part of p5.js and would happily contribute and tend to issues related to, and beyond, my work.\\n\\n## Support\\n\\nAny questions pertaining to the above mentioned tasks may be addressed via Issues. Simply create a new Issue and either assign or tag me in the conversation with [@sakshamsaxena](https://github.com/sakshamsaxena). For shout-outs and shout-downs, tweet me [@TopGunDoggo](https://twitter.com/TopGunDoggo), or if you're old school like me, email me at [saksham_saxena@outlook.com](mailto:saksham_saxena@outlook.com). \\n\\n## Acknowledgements\\n\\nThanks to Lauren McCarthy, my mentor, and Adam, Kenneth, dhowe and other contributors of p5.js for showing immense support and encouraging environment which helped me exceed my own expectations! Thank you so much :smile: \\n[end of sakshamsaxena_gsoc_2017.md]\\n[start of liang_gsoc_2018.md]\\n# New JavaScript console in p5.js web editor\\n\\n#### by [@shinytang6](https://github.com/shinytang6)\\n\\n## Summary\\n\\nMy project for GSoC 2018 was to integrate a new console to p5.js web editor. There are two main tasks that l focused.\\n\\n1. Improve the current console in p5.js web editor. The  web editor has already included a console which displays console messages as plain text. l implemented the following features to the console:\\n\\n\\t* Folding / unfolding of console logged objects.\\n\\t* Repeated console logs are not duplicated (but displayed with a number displaying times logged).\\n\\t* Support the presentation of different data formats.\\n\\t\\n2. Make the console interactive. Like the browser developer tools, a user-friendly console should be interactive.\\n\\nAs of now, both of them are completed. The second one is still being polished. Apart from these, l also worked on \\nsome other things to make the editor better.\\n\\n### Most notable PRs\\n\\n* [#546 Fixes file saving problem ](https://github.com/processing/p5.js-web-editor/pull/546)\\n* [#579 Support displaying the script error caused by external library](https://github.com/processing/p5.js-web-editor/pull/579)\\n* [#642 Remove authorization from specific routes](https://github.com/processing/p5.js-web-editor/pull/642)\\n* [#656 Improve current console](https://github.com/processing/p5.js-web-editor/pull/656)\\n* [#667 Make console interactive](https://github.com/processing/p5.js-web-editor/pull/667)\\n\\n[View all merged PRs on Github](https://github.com/processing/p5.js-web-editor/pulls?utf8=%E2%9C%93&q=is%3Apr+author%3Ashinytang6)\\n\\n## Experiences\\n\\nBefore l heard the Google Summer of Code, it seemed really hard for me to contribute to an open source project, for not only the technical reasons, but also the uncertainty about the community's response to my minor contributions. Hence, it was somekind difficult for me to take the first step.\\n\\nBut fortunately, I started my open source journey in February of this year. It turned out that most of the open source community are very welcoming. So thanks to Google for hosting this event and brings me into the wonderful open source world!\\n\\n## Conclusion\\n\\nIn short, the experience of Google Summer of Code was valuable and unforgettable for me. It helped me understand the open source culture and grow into a better programmer.\\n\\nFurthermore, here l'd like to give a big shout to my mentor [@catarak](https://github.com/catarak), who was a really great mentor, guided me patiently and put up with me all the time. Big thanks to her! Really had a great summer under her mentorship :smile:\\n\\nAlthough GSoC come to an end, l thought it was just another start. l will stay focused on the development of the Processing, especially the p5.js web editor, and keep on giving my humble contributions!\\n\\n## Support\\n\\nAny questions pertaining to this project may be addressed via Issues on the [p5.js-web-editor repository](https://github.com/processing/p5.js-web-editor). Simply create a new Issue and either assign or tag me in the conversation with [@shinytang6](https://github.com/shinytang6). For anything else, don't hesitate to get in touch at [shinytang6@gmail.com](mailto:shinytang6@gmail.com)!\\n\\n## Acknowledgements\\n\\nl would like to express my great gratitude to the Processing foundation for giving me the opportunity to work on this project and again my mentor for helping me!\\n\\nThank you so much to make it possible!\\n[end of liang_gsoc_2018.md]\\n[start of error_helpers.js]\\nsuite('Error Helpers', function() {\\n  var myp5;\\n\\n  setup(function(done) {\\n    new p5(function(p) {\\n      p.setup = function() {\\n        myp5 = p;\\n        done();\\n      };\\n    });\\n  });\\n\\n  teardown(function() {\\n    myp5.remove();\\n  });\\n\\n  suite('friendly error logger', function() {\\n    test('basic', function() {\\n      assert.doesNotThrow(\\n        function() {\\n          p5._friendlyError('basic');\\n        },\\n        Error,\\n        'got unwanted exception'\\n      );\\n    });\\n  });\\n\\n  // unit tests for validateParameters\\n  suite('validateParameters: Numbers + optional Constant', function() {\\n    test('arc(): no friendly-err-msg', function() {\\n      assert.doesNotThrow(\\n        function() {\\n          p5._validateParameters('arc', [1, 1, 10.5, 10, 0, Math.PI, 'pie']);\\n        },\\n        Error,\\n        'got unwanted exception'\\n      );\\n    });\\n    test('arc(): missing param #4, #5', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('arc', [1, 1, 10.5, 10]);\\n      });\\n    });\\n    test('arc(): missing param #0', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('arc', [\\n          undefined,\\n          1,\\n          10.5,\\n          10,\\n          0,\\n          Math.PI,\\n          'pie'\\n        ]);\\n      });\\n    });\\n    test('arc(): missing param #4', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('arc', [\\n          1,\\n          1,\\n          10.5,\\n          10,\\n          undefined,\\n          Math.PI,\\n          'pie'\\n        ]);\\n      });\\n    });\\n    test('arc(): missing param #5', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('arc', [1, 1, 10.5, 10, 0, undefined, 'pie']);\\n      });\\n    });\\n    test('arc(): missing param #6, no friendly-err-msg', function() {\\n      assert.doesNotThrow(\\n        function() {\\n          p5._validateParameters('arc', [1, 1, 10.5, 10, 0, Math.PI]);\\n        },\\n        Error,\\n        'got unwanted exception'\\n      );\\n    });\\n    test('arc(): wrong param type at #0', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('arc', ['a', 1, 10.5, 10, 0, Math.PI, 'pie']);\\n      });\\n    });\\n  });\\n\\n  suite('validateParameters: Numbers + optional Constant', function() {\\n    test('rect(): no friendly-err-msg', function() {\\n      assert.doesNotThrow(\\n        function() {\\n          p5._validateParameters('rect', [1, 1, 10.5, 10]);\\n        },\\n        Error,\\n        'got unwanted exception'\\n      );\\n    });\\n    test('rect(): wrong param type at #0', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('rect', ['a', 1, 10.5, 10, 0, Math.PI]);\\n      });\\n    });\\n  });\\n\\n  suite(\\n    'validateParameters: class, multi-types + optional Numbers',\\n    function() {\\n      test('ambientLight(): no friendly-err-msg', function() {\\n        assert.doesNotThrow(\\n          function() {\\n            var c = myp5.color(255, 204, 0);\\n            p5._validateParameters('ambientLight', [c]);\\n          },\\n          Error,\\n          'got unwanted exception'\\n        );\\n      });\\n    }\\n  );\\n\\n  suite('validateParameters: multi-format', function() {\\n    test('color(): no friendly-err-msg', function() {\\n      assert.doesNotThrow(\\n        function() {\\n          p5._validateParameters('color', [65]);\\n        },\\n        Error,\\n        'got unwanted exception'\\n      );\\n    });\\n    test('color(): no friendly-err-msg', function() {\\n      assert.doesNotThrow(\\n        function() {\\n          p5._validateParameters('color', [65, 0.5]);\\n        },\\n        Error,\\n        'got unwanted exception'\\n      );\\n    });\\n    test('color(): no friendly-err-msg', function() {\\n      assert.doesNotThrow(\\n        function() {\\n          p5._validateParameters('color', [255, 204, 0]);\\n        },\\n        Error,\\n        'got unwanted exception'\\n      );\\n    });\\n    test('color(): optional parameter, incorrect type', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('color', [0, 0, 0, 'A']);\\n      });\\n    });\\n    test('color(): extra parameter', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('color', [[0, 0, 0], 0]);\\n      });\\n    });\\n    test('color(): incorrect element type', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('color', [['A', 'B', 'C']]);\\n      });\\n    });\\n    test('color(): incorrect parameter count', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('color', ['A', 'A', 0, 0, 0, 0, 0, 0]);\\n      });\\n    });\\n  });\\n\\n  suite('helpForMisusedAtTopLevelCode', function() {\\n    var help = function(msg) {\\n      var log = [];\\n      var logger = function(msg) {\\n        log.push(msg);\\n      };\\n\\n      p5.prototype._helpForMisusedAtTopLevelCode({ message: msg }, logger);\\n      assert.equal(log.length, 1);\\n      return log[0];\\n    };\\n\\n    test('help for constants is shown', function() {\\n      assert.match(\\n        help(\\\"'HALF_PI' is undefined\\\"),\\n        /Did you just try to use p5\\\\.js's HALF_PI constant\\\\?/\\n      );\\n    });\\n\\n    test('help for functions is shown', function() {\\n      assert.match(\\n        help(\\\"'smooth' is undefined\\\"),\\n        /Did you just try to use p5\\\\.js's smooth\\\\(\\\\) function\\\\?/\\n      );\\n    });\\n\\n    test('help for variables is shown', function() {\\n      assert.match(\\n        help(\\\"'focused' is undefined\\\"),\\n        /Did you just try to use p5\\\\.js's focused variable\\\\?/\\n      );\\n    });\\n  });\\n});\\n\\n[end of error_helpers.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "error_helpers.js",
        "friendly_error_system.md",
        "sakshamsaxena_gsoc_2017.md",
        "liang_gsoc_2018.md",
        "error_helpers.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "3b249d3a-24f3-4fed-ba15-1aa062f87898",
        "score": 0.01639344262295082,
        "payload": {
          "text": "/**\n * @for p5\n * @requires core\n *\n * This is the main file for the Friendly Error System (FES). Here is a\n * brief outline of the functions called in this system.\n *\n * The FES may be invoked by a call to either (1) _validateParameters,\n * (2) _friendlyFileLoadError, (3) _friendlyError, or (4) helpForMisusedAtTopLevelCode.\n *\n * helpForMisusedAtTopLevelCode is called by this file on window load to check for use\n * of p5.js functions outside of setup() or draw()\n * Items 1-3 above are called by functions in the p5 library located in other files.\n *\n * _friendlyFileLoadError is called by the loadX() methods.\n * _friendlyError can be called by any function to offer a helpful error message.\n *\n * _validateParameters is called by functions in the p5.js API to help users ensure\n * ther are calling p5 function with the right parameter types. The property\n * disableFriendlyErrors = false can be set from a p5.js sketch to turn off parameter\n * checking. The call sequence from _validateParameters looks something like this:\n *\n * _validateParameters\n *   lookupParamDoc\n *   scoreOverload\n *     testParamTypes\n *     testParamType\n *   getOverloadErrors\n *   _friendlyParamError\n *     ValidationError\n *     report\n *       friendlyWelcome\n *\n * The call sequences to _friendlyFileLoadError and _friendlyError are like this:\n * _friendlyFileLoadError\n *   report\n *\n * _friendlyError\n *   report\n *\n * report() is the main function that prints directly to console with the output\n * of the error helper message. Note: friendlyWelcome() also prints to console directly.\n */\nimport p5 from './main';\nimport * as constants from './constants';\nimport { translator } from './internationalization';\n\n// p5.js blue, p5.js orange, auto dark green; fallback p5.js darkened magenta\n// See testColors below for all the color codes and names\nconst typeColors = ['#2D7BB6', '#EE9900', '#4DB200', '#C83C00'];\n\nif (typeof IS_MINIFIED !== 'undefined') {\n  p5._validateParameters = p5._friendlyFileLoadError = p5._friendlyError = () => {};\n} else {\n  let doFriendlyWelcome = false; // TEMP until we get it all working LM\n  // for parameter validation\n  const dataDoc = require('../../docs/reference/data.json');\n  const arrDoc = JSON.parse(JSON.stringify(dataDoc));\n\n  // -- Borrowed from jQuery 1.11.3 --\n  const class2type = {};\n  const toString = class2type.toString;\n  const names = [\n    'Boolean',\n    'Number',\n    'String',\n    'Function',\n    'Array',\n    'Date',\n    'RegExp',\n    'Object',\n    'Error'\n  ];\n  for (let n = 0; n < names.length; n++) {\n    class2type[`[object ${names[n]}]`] = names[n].toLowerCase();\n  }\n  const getType = obj => {\n    if (obj == null) {\n      return `${obj}`;\n    }\n    return typeof obj === 'object' || typeof obj === 'function'\n      ? class2type[toString.call(obj)] || 'object'\n      : typeof obj;\n  };\n\n  // -- End borrow --\n\n  const friendlyWelcome = () => {\n    // p5.js brand - magenta: #ED225D\n    //const astrixBgColor = 'transparent';\n    //const astrixTxtColor = '#ED225D';\n    //const welcomeBgColor = '#ED225D';\n    //const welcomeTextColor = 'white';\n    const welcomeMessage = translator('fes.pre', {\n      message: translator('fes.welcome')\n    });\n    console.log(\n      '    _ \\n' +\n        ' /\\\\| |/\\\\ \\n' +\n        \" \\\\ ` ' /  \\n\" +\n        ' / , . \\\\  \\n' +\n        ' \\\\/|_|\\\\/ ' +\n        '\\n\\n' +\n        welcomeMessage\n    );\n  };\n\n  /**\n   * Prints out a fancy, colorful message to the console log\n   *\n   * @method report\n   * @private\n   * @param  {String}               message the words to be said\n   * @param  {String}               func    the name of the function to link\n   * @param  {Number|String} color   CSS color string or error type\n   *\n   * @return console logs\n   */\n  const report = (message, func, color) => {\n    if (doFriendlyWelcome) {\n      friendlyWelcome();\n      doFriendlyWelcome = false;\n    }\n    if ('undefined' === getType(color)) {\n      color = '#B40033'; // dark magenta\n    } else if (getType(color) === 'number') {\n      // Type to color\n      color = typeColors[color];\n    }\n    if (func.substring(0, 4) === 'load') {\n      console.log(translator('fes.pre', { message }));\n    } else {\n      console.log(\n        translator('fes.pre', {\n          message: `${message} (http://p5js.org/reference/#p5/${func})`\n        })\n      );\n    }\n  };\n\n  // mapping used by `_friendlyFileLoadError`\n  const fileLoadErrorCases = (num, filePath) => {\n    const suggestion = translator('fes.fileLoadError.suggestion', {\n      filePath,\n      link: 'https://github.com/processing/p5.js/wiki/Local-server'\n    });\n    switch (num) {\n      case 0:\n        return {\n          message: translator('fes.fileLoadError.image', {\n            suggestion\n          }),\n          method: 'loadImage'\n        };\n      case 1:\n        return {\n          message: translator('fes.fileLoadError.xml', {\n            suggestion\n          }),\n          method: 'loadXML'\n        };\n      case 2:\n        return {\n          message: translator('fes.fileLoadError.table', {\n            suggestion\n          }),\n          method: 'loadTable'\n        };\n      case 3:\n        return {\n          message: translator('fes.fileLoadError.strings', {\n            suggestion\n          }),\n          method: 'loadStrings'\n        };\n      case 4:\n        return {\n          message: translator('fes.fileLoadError.font', {\n            suggestion\n          }),\n          method: 'loadFont'\n        };\n      case 5:\n        return {\n          message: translator('fes.fileLoadError.json', {\n            suggestion\n          }),\n          method: 'loadJSON'\n        };\n      case 6:\n        return {\n          message: translator('fes.fileLoadError.bytes', {\n            suggestion\n          }),\n          method: 'loadBytes'\n        };\n      case 7:\n        return {\n          message: translator('fes.fileLoadError.large'),\n          method: 'loadX'\n        };\n      case 8:\n        return {\n          message: translator('fes.fileLoadError.gif'),\n          method: 'loadImage'\n        };\n    }\n  };\n\n  /**\n   * This is called internally if there is a error during file loading.\n   *\n   * @method _friendlyFileLoadError\n   * @private\n   * @param  {Number} errorType\n   * @param  {String} filePath\n   */\n  p5._friendlyFileLoadError = function(errorType, filePath) {\n    const { message, method } = fileLoadErrorCases(errorType, filePath);\n    report(message, method, 3);\n  };\n\n  /**\n   * This is a generic method that can be called from anywhere in the p5\n   * library to alert users to a common error.\n   *\n   * @method _friendlyError\n   * @private\n   * @param  {Number} message message to be printed\n   * @param  {String} method name of method\n   */\n  p5._friendlyError = function(message, method) {\n    report(message, method);\n  };\n\n  /**\n   * This is called internally if there is a error with autoplay.\n   *\n   * @method _friendlyAutoplayError\n   * @private\n   */\n  p5._friendlyAutoplayError = function(src) {\n    const message = translator('fes.autoplay', {\n      src,\n      link: 'https://developer.mozilla.org/docs/Web/Media/Autoplay_guide'\n    });\n    console.log(translator('fes.pre', { message }));\n  };\n\n  const docCache = {};\n  const builtinTypes = [\n    'null',\n    'number',\n    'string',\n    'boolean',\n    'constant',\n    'function',\n    'any',\n    'integer'\n  ];\n\n  // validateParameters() helper functions:\n  // lookupParamDoc() for querying data.json\n  const lookupParamDoc = func => {\n    // look for the docs in the `data.json` datastructure\n\n    const ichDot = func.lastIndexOf('.');\n    const funcName = func.substr(ichDot + 1);\n    const funcClass = func.substr(0, ichDot) || 'p5';\n\n    let queryResult;\n    const classitems = arrDoc.classitems;\n\n    for (const x of classitems) {\n      if (x.name === funcName && x.class === funcClass) {\n        queryResult = x;\n        break;\n      }\n    }\n\n    // different JSON structure for funct with multi-format\n    const overloads = [];\n    if (queryResult.hasOwnProperty('overloads')) {\n      // add all the overloads\n      for (let i = 0; i < queryResult.overloads.length; i++) {\n        overloads.push({ formats: queryResult.overloads[i].params });\n      }\n    } else {\n      // no overloads, just add the main method definition\n      overloads.push({ formats: queryResult.params || [] });\n    }\n\n    // parse the parameter types for each overload\n    const mapConstants = {};\n    let maxParams = 0;\n    overloads.forEach(overload => {\n      const formats = overload.formats;\n\n      // keep a record of the maximum number of arguments\n      // this method requires.\n      if (maxParams < formats.length) {\n        maxParams = formats.length;\n      }\n\n      // calculate the minimum number of arguments\n      // this overload requires.\n      let minParams = formats.length;\n      while (minParams > 0 && formats[minParams - 1].optional) {\n        minParams--;\n      }\n      overload.minParams = minParams;\n\n      // loop through each parameter position, and parse its types\n      formats.forEach(format => {\n        // split this parameter's types\n        format.types = format.type.split('|').map(function ct(type) {\n          // array\n          if (type.substr(type.length - 2, 2) === '[]') {\n            return {\n              name: type,\n              array: ct(type.substr(0, type.length - 2))\n            };\n          }\n\n          let lowerType = type.toLowerCase();\n\n          // contant\n          if (lowerType === 'constant') {\n            let constant;\n            if (mapConstants.hasOwnProperty(format.name)) {\n              constant = mapConstants[format.name];\n            } else {\n              // parse possible constant values from description\n              const myRe = /either\\s+(?:[A-Z0-9_]+\\s*,?\\s*(?:or)?\\s*)+/g;\n              const values = {};\n              const names = [];\n\n              constant = mapConstants[format.name] = {\n                values,\n                names\n              };\n\n              const myArray = myRe.exec(format.description);\n              if (func === 'endShape' && format.name === 'mode') {\n                values[constants.CLOSE] = true;\n                names.push('CLOSE');\n              } else {\n                const match = myArray[0];\n                const reConst = /[A-Z0-9_]+/g;\n                let matchConst;\n                while ((matchConst = reConst.exec(match)) !== null) {\n                  const name = matchConst[0];\n                  if (constants.hasOwnProperty(name)) {\n                    values[constants[name]] = true;\n                    names.push(name);\n                  }\n                }\n              }\n            }\n            return {\n              name: type,\n              builtin: lowerType,\n              names: constant.names,\n              values: constant.values\n            };\n          }\n\n          // function\n          if (lowerType.substr(0, 'function'.length) === 'function') {\n            lowerType = 'function';\n          }\n          // builtin\n          if (builtinTypes.includes(lowerType)) {\n            return { name: type, builtin: lowerType };\n          }\n\n          // find type's prototype\n          let t = window;\n          const typeParts = type.split('.');\n\n          // special-case 'p5' since it may be non-global\n          if (typeParts[0] === 'p5') {\n            t = p5;\n            typeParts.shift();\n          }\n\n          typeParts.forEach(p => {\n            t = t && t[p];\n          });\n          if (t) {\n            return { name: type, prototype: t };\n          }\n\n          return { name: type, type: lowerType };\n        });\n      });\n    });\n    return {\n      overloads,\n      maxParams\n    };\n  };\n\n  const isNumber = param => {\n    switch (typeof param) {\n      case 'number':\n        return true;\n      case 'string':\n        return !isNaN(param);\n      default:\n        return false;\n    }\n  };\n\n  const testParamType = (param, type) => {\n    const isArray = param instanceof Array;\n    let matches = true;\n    if (type.array && isArray) {\n      for (let i = 0; i < param.length; i++) {\n        const error = testParamType(param[i], type.array);\n        if (error) return error / 2; // half error for elements\n      }\n    } else if (type.prototype) {\n      matches = param instanceof type.prototype;\n    } else if (type.builtin) {\n      switch (type.builtin) {\n        case 'number':\n          matches = isNumber(param);\n          break;\n        case 'integer':\n          matches = isNumber(param) && Number(param) === Math.floor(param);\n          break;\n        case 'boolean':\n        case 'any':\n          matches = true;\n          break;\n        case 'array':\n          matches = isArray;\n          break;\n        case 'string':\n          matches = /*typeof param === 'number' ||*/ typeof param === 'string';\n          break;\n        case 'constant':\n          matches = type.values.hasOwnProperty(param);\n          break;\n        case 'function':\n          matches = param instanceof Function;\n          break;\n        case 'null':\n          matches = param === null;\n          break;\n      }\n    } else {\n      matches = typeof param === type.t;\n    }\n    return matches ? 0 : 1;\n  };\n\n  // testType() for non-object type parameter validation\n  const testParamTypes = (param, types) => {\n    let minScore = 9999;\n    for (let i = 0; minScore > 0 && i < types.length; i++) {\n      const score = testParamType(param, types[i]);\n      if (minScore > score) minScore = score;\n    }\n    return minScore;\n  };\n\n  // generate a score (higher is worse) for applying these args to\n  // this overload.\n  const scoreOverload = (args, argCount, overload, minScore) => {\n    let score = 0;\n    const formats = overload.formats;\n    const minParams = overload.minParams;\n\n    // check for too few/many args\n    // the score is double number of extra/missing args\n    if (argCount < minParams) {\n      score = (minParams - argCount) * 2;\n    } else if (argCount > formats.length) {\n      score = (argCount - formats.length) * 2;\n    }\n\n    // loop through the formats, adding up the error score for each arg.\n    // quit early if the score gets higher than the previous best overload.\n    for (let p = 0; score <= minScore && p < formats.length; p++) {\n      const arg = args[p];\n      const format = formats[p];\n      // '== null' checks for 'null' and typeof 'undefined'\n      if (arg == null) {\n        // handle non-optional and non-trailing undefined args\n        if (!format.optional || p < minParams || p < argCount) {\n          score += 1;\n        }\n      } else {\n        score += testParamTypes(arg, format.types);\n      }\n    }\n    return score;\n  };\n\n  // gets a list of errors for this overload\n  const getOverloadErrors = (args, argCount, overload) => {\n    const formats = overload.formats;\n    const minParams = overload.minParams;\n\n    // check for too few/many args\n    if (argCount < minParams) {\n      return [\n        {\n          type: 'TOO_FEW_ARGUMENTS',\n          argCount,\n          minParams\n        }\n      ];\n    } else if (argCount > formats.length) {\n      return [\n        {\n          type: 'TOO_MANY_ARGUMENTS',\n          argCount,\n          maxParams: formats.length\n        }\n      ];\n    }\n\n    const errorArray = [];\n    for (let p = 0; p < formats.length; p++) {\n      const arg = args[p];\n      const format = formats[p];\n      // '== null' checks for 'null' and typeof 'undefined'\n      if (arg == null) {\n        // handle non-optional and non-trailing undefined args\n        if (!format.optional || p < minParams || p < argCount) {\n          errorArray.push({\n            type: 'EMPTY_VAR',\n            position: p,\n            format\n          });\n        }\n      } else if (testParamTypes(arg, format.types) > 0) {\n        errorArray.push({\n          type: 'WRONG_TYPE',\n          position: p,\n          format,\n          arg\n        });\n      }\n    }\n\n    return errorArray;\n  };\n\n  // a custom error type, used by the mocha\n  // tests when expecting validation errors\n  p5.ValidationError = (name => {\n    class err extends Error {\n      constructor(message, func) {\n        super();\n        this.message = message;\n        this.func = func;\n        if ('captureStackTrace' in Error) Error.captureStackTrace(this, err);\n        else this.stack = new Error().stack;\n      }\n    }\n\n    err.prototype.name = name;\n    return err;\n  })('ValidationError');\n\n  // function for generating console.log() msg\n  p5._friendlyParamError = function(errorObj, func) {\n    let message;\n\n    function formatType() {\n      const format = errorObj.format;\n      return format.types\n        .map(type => (type.names ? type.names.join('|') : type.name))\n        .join('|');\n    }\n\n    switch (errorObj.type) {\n      case 'EMPTY_VAR': {\n        message = `${func}() was expecting ${formatType()} for parameter #${\n          errorObj.position\n        } (zero-based index), received an empty variable instead. If not intentional, this is often a problem with scope: [https://p5js.org/examples/data-variable-scope.html]`;\n        break;\n      }\n      case 'WRONG_TYPE': {\n        const arg = errorObj.arg;\n        const argType =\n          arg instanceof Array\n            ? 'array'\n            : arg === null ? 'null' : arg.name || typeof arg;\n        message = `${func}() was expecting ${formatType()} for parameter #${\n          errorObj.position\n        } (zero-based index), received ${argType} instead`;\n        break;\n      }\n      case 'TOO_FEW_ARGUMENTS': {\n        message = `${func}() was expecting at least ${\n          errorObj.minParams\n        } arguments, but received only ${errorObj.argCount}`;\n        break;\n      }\n      case 'TOO_MANY_ARGUMENTS': {\n        message = `${func}() was expecting no more than ${\n          errorObj.maxParams\n        } arguments, but received ${errorObj.argCount}`;\n        break;\n      }\n    }\n\n    if (message) {\n      if (p5._throwValidationErrors) {\n        throw new p5.ValidationError(message);\n      }\n\n      try {\n        const re = /Function\\.validateParameters.*[\\r\\n].*[\\r\\n].*\\(([^)]*)/;\n        const location = re.exec(new Error().stack)[1];\n        if (location) {\n          message += ` at ${location}`;\n        }\n      } catch (err) {}\n\n      report(`${message}.`, func, 3);\n    }\n  };\n\n  /**\n   * Validates parameters\n   * param  {String}               func    the name of the function\n   * param  {Array}                args    user input arguments\n   *\n   * example:\n   *  const a;\n   *  ellipse(10,10,a,5);\n   * console ouput:\n   *  \"It looks like ellipse received an empty variable in spot #2.\"\n   *\n   * example:\n   *  ellipse(10,\"foo\",5,5);\n   * console output:\n   *  \"ellipse was expecting a number for parameter #1,\n   *           received \"foo\" instead.\"\n   */\n  p5._validateParameters = function validateParameters(func, args) {\n    if (p5.disableFriendlyErrors) {\n      return; // skip FES\n    }\n\n    // lookup the docs in the 'data.json' file\n    const docs = docCache[func] || (docCache[func] = lookupParamDoc(func));\n    const overloads = docs.overloads;\n\n    // ignore any trailing `undefined` arguments\n    let argCount = args.length;\n    // '== null' checks for 'null' and typeof 'undefined'\n    while (argCount > 0 && args[argCount - 1] == null) argCount--;\n\n    // find the overload with the best score\n    let minScore = 99999;\n    let minOverload;\n    for (let i = 0; i < overloads.length; i++) {\n      const score = scoreOverload(args, argCount, overloads[i], minScore);\n      if (score === 0) {\n        return; // done!\n      } else if (minScore > score) {\n        // this score is better that what we have so far...\n        minScore = score;\n        minOverload = i;\n      }\n    }\n\n    // this should _always_ be true here...\n    if (minScore > 0) {\n      // get the errors for the best overload\n      const errorArray = getOverloadErrors(\n        args,\n        argCount,\n        overloads[minOverload]\n      );\n\n      // generate err msg\n      for (let n = 0; n < errorArray.length; n++) {\n        p5._friendlyParamError(errorArray[n], func);\n      }\n    }\n  };\n\n  /**\n   * Prints out all the colors in the color pallete with white text.\n   * For color blindness testing.\n   */\n  /* function testColors() {\n    const str = 'A box of biscuits, a box of mixed biscuits and a biscuit mixer';\n    report(str, 'print', '#ED225D'); // p5.js magenta\n    report(str, 'print', '#2D7BB6'); // p5.js blue\n    report(str, 'print', '#EE9900'); // p5.js orange\n    report(str, 'print', '#A67F59'); // p5.js light brown\n    report(str, 'print', '#704F21'); // p5.js gold\n    report(str, 'print', '#1CC581'); // auto cyan\n    report(str, 'print', '#FF6625'); // auto orange\n    report(str, 'print', '#79EB22'); // auto green\n    report(str, 'print', '#B40033'); // p5.js darkened magenta\n    report(str, 'print', '#084B7F'); // p5.js darkened blue\n    report(str, 'print', '#945F00'); // p5.js darkened orange\n    report(str, 'print', '#6B441D'); // p5.js darkened brown\n    report(str, 'print', '#2E1B00'); // p5.js darkened gold\n    report(str, 'print', '#008851'); // auto dark cyan\n    report(str, 'print', '#C83C00'); // auto dark orange\n    report(str, 'print', '#4DB200'); // auto dark green\n  } */\n\n  p5.prototype._validateParameters = p5.validateParameters;\n}\n\n// This is a lazily-defined list of p5 symbols that may be\n// misused by beginners at top-level code, outside of setup/draw. We'd like\n// to detect these errors and help the user by suggesting they move them\n// into setup/draw.\n//\n// For more details, see https://github.com/processing/p5.js/issues/1121.\nlet misusedAtTopLevelCode = null;\nconst FAQ_URL =\n  'https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup';\n\nconst defineMisusedAtTopLevelCode = () => {\n  const uniqueNamesFound = {};\n\n  const getSymbols = obj =>\n    Object.getOwnPropertyNames(obj)\n      .filter(name => {\n        if (name[0] === '_') {\n          return false;\n        }\n        if (name in uniqueNamesFound) {\n          return false;\n        }\n\n        uniqueNamesFound[name] = true;\n\n        return true;\n      })\n      .map(name => {\n        let type;\n\n        if (typeof obj[name] === 'function') {\n          type = 'function';\n        } else if (name === name.toUpperCase()) {\n          type = 'constant';\n        } else {\n          type = 'variable';\n        }\n\n        return { name, type };\n      });\n\n  misusedAtTopLevelCode = [].concat(\n    getSymbols(p5.prototype),\n    // At present, p5 only adds its constants to p5.prototype during\n    // construction, which may not have happened at the time a\n    // ReferenceError is thrown, so we'll manually add them to our list.\n    getSymbols(require('./constants'))\n  );\n\n  // This will ultimately ensure that we report the most specific error\n  // possible to the user, e.g. advising them about HALF_PI instead of PI\n  // when their code misuses the former.\n  misusedAtTopLevelCode.sort((a, b) => b.name.length - a.name.length);\n};\n\nconst helpForMisusedAtTopLevelCode = (e, log) => {\n  if (!log) {\n    log = console.log.bind(console);\n  }\n\n  if (!misusedAtTopLevelCode) {\n    defineMisusedAtTopLevelCode();\n  }\n\n  // If we find that we're logging lots of false positives, we can\n  // uncomment the following code to avoid displaying anything if the\n  // user's code isn't likely to be using p5's global mode. (Note that\n  // setup/draw are more likely to be defined due to JS function hoisting.)\n  //\n  //if (!('setup' in window || 'draw' in window)) {\n  //  return;\n  //}\n\n  misusedAtTopLevelCode.some(symbol => {\n    // Note that while just checking for the occurrence of the\n    // symbol name in the error message could result in false positives,\n    // a more rigorous test is difficult because different browsers\n    // log different messages, and the format of those messages may\n    // change over time.\n    //\n    // For example, if the user uses 'PI' in their code, it may result\n    // in any one of the following messages:\n    //\n    //   * 'PI' is undefined                           (Microsoft Edge)\n    //   * ReferenceError: PI is undefined             (Firefox)\n    //   * Uncaught ReferenceError: PI is not defined  (Chrome)\n\n    if (e.message && e.message.match(`\\\\W?${symbol.name}\\\\W`) !== null) {\n      const symbolName =\n        symbol.type === 'function' ? `${symbol.name}()` : symbol.name;\n      log(\n        translator('fes.misusedTopLevel', {\n          symbolName,\n          symbolType: symbol.type,\n          link: FAQ_URL\n        })\n      );\n      return true;\n    }\n  });\n};\n\n// Exposing this primarily for unit testing.\np5.prototype._helpForMisusedAtTopLevelCode = helpForMisusedAtTopLevelCode;\n\nif (document.readyState !== 'complete') {\n  window.addEventListener('error', helpForMisusedAtTopLevelCode, false);\n\n  // Our job is only to catch ReferenceErrors that are thrown when\n  // global (non-instance mode) p5 APIs are used at the top-level\n  // scope of a file, so we'll unbind our error listener now to make\n  // sure we don't log false positives later.\n  window.addEventListener('load', () => {\n    window.removeEventListener('error', helpForMisusedAtTopLevelCode, false);\n  });\n}\n\nexport default p5;\n",
          "filepath": "data/repos/processing/p5.js-1.0/src/core/error_helpers.js",
          "repo": "processing/p5.js",
          "version": "1.0",
          "chunk_index": 0
        }
      },
      {
        "id": "8d40f023-d158-418e-a855-3a20f5c6e733",
        "score": 0.016129032258064516,
        "payload": {
          "text": "# p5.js Friendly Error System (FES)\n\n## Overview\n\nThe Friendly Error System (FES) is a system designed to help new programmers with common user errors as they get started learning. It catches common beginning errors and provides clear language and links to help a user resolve the error. FES is only applied to functions that are ones a user might encounter when they are just starting. An exception is made for particular common gotchas such as trying to load files without running a server, or calling loadImage() with a URL, etc.\n\nThe goal is to create accessible error messages to supplement the often cryptic console errors. For example, Javascript has no support for type checking as default making errors in parameter entry was harder to detect for new Javascript developers.\n\nMessages generated by FES are written in natural language, linked to documentation, and assume a beginner level. The errors are triggered in multiple files through out p5.js, but most of the work and error writing happens in `src/core/error_helpers.js`.  \n\nBy default, FES is enabled for `p5.js`, whereas completely disabled in `p5.min.js`. It is possible to disable FES by setting `p5.disableFriendlyErrors = true;`.\n\nSo far FES is able to detect and print messages for four kinds of errors: \n\n1. `validateParameters()` checks a function\u2019s input parameters based on inline documentations\n\n2. `friendlyFileLoadError()` catches file loading errors. These two kinds of error checking have been integrated into an existing (selected set of) p5 functions, but developers can add them to more p5 functions, or their own libraries, by calling `p5._validateParameters()`\n\n3. `friendlyError()` can be called by any function to offer a helpful error message\n\n4. `helpForMisusedAtTopLevelCode()` is called on window load to check for use of p5.js functions outside of setup() or draw()\n\nPlease also see inline notes in [src/core/error_helper.js](https://github.com/processing/p5.js/blob/master/src/core/error_helpers.js) for more technical information.\n\n### `core/error_helpers/friendlyFileLoadError()`: \n* This function generates and displays friendly error messages if a file fails to load correctly. It also checks if the size of a file might be too large to load and produces a warning. \n* This can be called through : `p5._friendlyFileLoadError(ERROR_TYPE, FILE_PATH)`.\n* file loading error example:\n````javascript\n/// missing font file\nlet myFont;\nfunction preload() {\n  myFont = loadFont('assets/OpenSans-Regular.ttf');\n};\nfunction setup() {\n  fill('#ED225D');\n  textFont(myFont);\n  textSize(36);\n  text('p5*js', 10, 50);\n};\nfunction draw() {};\n/// FES will generate the following message in the console:\n/// > p5.js says: It looks like there was a problem loading your font. Try checking if the file path [assets/OpenSans-Regular.ttf] is correct, hosting the font online, or running a local server.[https://github.com/processing/p5.js/wiki/Local-server]\n````\n* Currently version contains templates for generating error messages for `image`, `XML`, `table`, `text`, `json` and `font` files.\n* Implemented to `image/loading_displaying/loadImage()`, `io/files/loadFont()`, `io/files/loadTable()`, `io/files/loadJSON()`, `io/files/loadStrings()`, `io/files/loadXML()`, `io/files/loadBytes()`.\n* Error while loading a file due to its large size is implemented to all loadX methods.\n\n### `core/error_helpers/validateParameters()`:\n* This function runs parameter validation by matching the input parameters with information from `docs/reference/data.json`, which is created from the function's inline documentation. It checks that a function call contains the correct number and the correct type of parameters. \n* missing parameter example:\n````javascript\narc(1, 1, 10.5, 10);\n/// FES will generate the following message in the console:\n/// > p5.js says: It looks like arc() received an empty variable in spot #4 (zero-based index). If not intentional, this is often a problem with scope: [https://p5js.org/examples/data-variable-scope.html]. [http://p5js.org/reference/#p5/arc]\n/// > p5.js says: It looks like arc() received an empty variable in spot #5 (zero-based index). If not intentional, this is often a problem with scope: [https://p5js.org/examples/data-variable-scope.html]. [http://p5js.org/reference/#p5/arc]\n\n````\n* wrong type example:\n````javascript\narc('1', 1, 10.5, 10, 0, Math.PI, 'pie');\n/// FES will generate the following message in the console:\n/// > p5.js says: arc() was expecting Number for parameter #0 (zero-based index), received string instead. [http://p5js.org/reference/#p5/arc]\n````\n* This can be called through: `p5._validateParameters(FUNCT_NAME, ARGUMENTS)` \nor, `p5.prototype._validateParameters(FUNCT_NAME, ARGUMENTS)` inside the function that requires parameter validation. It is recommended to use static version, `p5._validateParameters` for general purposes. `p5.prototype._validateParameters(FUNCT_NAME, ARGUMENTS)` mainly remained for debugging and unit testing purposes.\n* Implemented to functions in `color/creating_reading`, `core/2d_primitives`, `core/curves`, and `utilities/string_functions`. \n\n## Additional Features\n* The FES welcomes the developer to p5 and the friendly debugger. \n* The FES works in the IDE and the web editor. \n\n## Notes for Developers\n* When creating p5.js Objects: any p5.js objects that will be used for parameters will need to assign value for `name` parameter (name of the object) within the class declaration. e.g.: \n````javascript \np5.newObject = function(parameter) {\n   this.parameter = 'some parameter';\n   this.name = 'p5.newObject';\n};\n````\n* Inline documentation: allowed parameter types are `Boolean`, `Number`, `String`, and name of the object (see the above bullet point). Use `Array` for any types of Array parameters. If needed, explain what kind of the specific types of array parameter are allowed (e.g. `Number[]`, `String[]`) in the description section.\n* Currently supported class types (have their `name` parameter): `p5.Color`, `p5.Element`, `p5.Graphics`, `p5.Renderer`, `p5.Renderer2D`, `p5.Image`, `p5.Table`, `p5.TableRow`, `p5.XML`, `p5.Vector`, `p5.Font`, `p5.Geometry`, `p5.Matrix`, `p5.RendererGL`.\n\n## Disable the FES\n\nBy default, FES is enabled for p5.js, and disabled in p5.min.js to prevent FES functions slowing down the process. The error checking system can significantly slow down your code (up to ~10x in some cases). See the [friendly error performance test](https://github.com/processing/p5.js-website/blob/master/dist/assets/learn/performance/code/friendly-error-system/).\n\nYou can disable this with one line of code at the top of your sketch:\n\n```javascript\np5.disableFriendlyErrors = true; // disables FES\n\nfunction setup() {\n  // Do setup stuff\n}\n\nfunction draw() {\n  // Do drawing stuff\n}\n```\n\nNote that this will disable the parts of the FES that cause performance slowdown (like argument checking). Friendly errors that have no performance cost (like giving an descriptive error if a file load fails, or warning you if you try to override p5.js functions in the global space), will remain in place. \n\n## Known Limitations\n* The friendly error system slows the program down, so there is an option to turn it off via setting `p5.disableFriendlyErrors = true;`. In addition, the friendly error system is omitted by default in the minified (`p5.min.js`) version.\n* FES may still result in false negative cases. These are usually caused by the mismatch between designs of the  functions (e.g. drawing functions those are originally designed to be used interchangeably in both 2D and 3D settings) with actual usage cases. For example, drawing a 3D line with \n```javascript \nconst x3; // undefined\nline(0, 0, 100, 100, x3, Math.PI);\n```\n will escape FES, because there is an acceptable parameter pattern (`Number`, `Number`, `Number`, `Number`) in `line()`'s inline documentation for drawing in 2D setting. This also means the current version of FES doesn't check for the environmental variables such as `_renderer.isP3D`.\n * FES is only able to detect global variables overwritten when declared using `const` or `var`. If `let` is used, they go undetected. This is not currently solvable due to the way `let` instantiates variables.\n\n## In The Works\n* Identify more common error types and generalize with FES (e.g. `bezierVertex()`, `quadraticVertex()` - required object not initiated; checking Number parameters positive for `nf()` `nfc()` `nfp()` `nfs()`)\n\n## Thoughts for the Future\n* re-introduce color coding for the Web Editor.\n* More unit testings.\n* More intuitive and narrowed down output messages.\n* Having a Spanish translation available.\n* All the colors are checked for being color blind friendly.\n* More elaborate ascii is always welcome! \n* Global Error catching. It would be very helpful to catch the errors the browser is throwing to the console, so we can match them up with friendly comments. \n\n```javascript\n// this snippet wraps window.console methods with a new function to modify their functionality\n// it is not currently implemented, but could be to give nicer formatted error messages\nconst original = window.console;\nconst original_functions  = {\n  log: original.log,\n  warn:  original.warn,\n  error: original.error\n}\n\n[\"log\", \"warn\", \"error\"].forEach(function(func){\nwindow.console[func] = function(msg) {\n//do something with the msg caught by the wrapper function, then call the original function\noriginal_functions[func].apply(original, arguments)\n};\n});\n```\n",
          "filepath": "data/repos/processing/p5.js-1.0/contributor_docs/friendly_error_system.md",
          "repo": "processing/p5.js",
          "version": "1.0",
          "chunk_index": 0
        }
      },
      {
        "id": "8c2ab380-a3de-4414-a709-03e0638e9f8c",
        "score": 0.015873015873015872,
        "payload": {
          "text": "# Wrapping up GSoC 2017 with p5.js (by [@sakshamsaxena](https://github.com/sakshamsaxena))\n\n## Summary\n\nThere were 3 major tasks that were proposed to pursue this summer under Google Summer of Code 2017 with p5.js under The Processing Foundation. All these focussed on improving the infrastructure and operations of the library, independent of the library API itself. To better tackle and organise new Issues, an Issue Template was implemented, which saw immense utility for contributors and owners to address new Issues. A new Grunt Task using Browserify was created which takes in the desired components that one wants to utilise as arguments, and built the library consisting of those components only. Dedicated Grunt Tasks were written to automate the release process end-to-end with minimal user interaction. The outcome of these tasks was improved developer operations (via Issue Templates and Release Process Automation), and improved library accessibility (via the Modularisation Task).\n\n## Task Details\n\n### 1. [Adding Issue Templates](https://github.com/processing/p5.js/issues)\n\nReporting Bugs or Feature Suggestions by the Community through Issues is also a significant contribution to the Project and it catalyses the growth of Project through them. Relevant responses and discussions in context to those, delivered in a short time, further engages the community into the Project. The GitHub Issue Template was [added](https://github.com/processing/p5.js/commits/master/ISSUE_TEMPLATE.md?author=sakshamsaxena) as my first contribution under GSoC on June 12, and till date it has been proven to be extremely helpful to both the reporter as well as responder, meanwhile aligning to it's original aim.\n\nPreview of the complete template : \n![Preview of the complete template](http://www.clipular.com/c/4631172675272704.png?k=gQwp7j5erUp9iZDrZvlEWY-27KY)\n\nSome helpful comments are added alongside to make the experience of reporting an issue significantly lucid to a complete beginner. You can see the same when you [open a new issue](https://github.com/processing/p5.js/issues/new).\n\n### 2. [Generating a custom (modular) build of p5.js](https://github.com/processing/p5.js/blob/master/contributor_docs/custom_p5_build.md)\n\nThis task was inspired by [Issue #94](https://github.com/processing/p5.js/issues/94). The goal was to implement such a functionality which enables users to select the desired components/modules which they want to use, and only those components would be bundled then itself to generate a custom build of p5.js.\n\nCurrently, the usage is through invoking a Grunt task manually from the command line :\n```\ngrunt combineModules:module_a[:module_b][:module_c]\n```\nwhere `module_X` refers to the name of the _*folder*_ of the desired component, viz. :\n```\ncolor\ncore\nevents\nimage\nio\nutilities\nmath\ntypography\n```\nCore is included by default in all cases. The output bundle is found in `lib/modules` directory.\n\n### 3. Automating the Release Process\n\nA dedicated and detailed Grunt Task was written which handles the release process end to end. It covers Testing, Version Bump, Building Library and Docs, Creating a new Commit and Tag with the bumped package.json, Pushing these changes to GitHub (to this p5.js repo), Release the library files only on NPM, and Bower (by updating the release repo maintained by @lmccart), Updating the docs in the website repo with newly generated ones, Drafting a GitHub Release (on this repo) with the JS files and the Zip as mentioned. \n\nThe owner is required to provide the following beforehand initiating the process :\n\n* Exporting an environment variable (only for the first time) which would hold the [GitHub Access Token](https://github.com/settings/tokens) for publishing a GitHub Release. \n```export GITHUB_TOKEN=<token goes here>```\n* Invoking the Grunt Task with the minor/major/patch/tag name as argument. Default is patch.\n```grunt release-p5:minor```\n\nIntermediate pulling or pushing is performed over HTTPS, so it might need user input for authentication (username/password).\n\n## Conclusion\n\nNew features were implemented in p5.js which would receive user feedback once they're out in the next release. Modularisation (#2 Task) and Automation (#3 Task) are implemented as alpha, and hold immense scope of improvement in terms of functionality, performance, and code. I would love to remain a part of p5.js and would happily contribute and tend to issues related to, and beyond, my work.\n\n## Support\n\nAny questions pertaining to the above mentioned tasks may be addressed via Issues. Simply create a new Issue and either assign or tag me in the conversation with [@sakshamsaxena](https://github.com/sakshamsaxena). For shout-outs and shout-downs, tweet me [@TopGunDoggo](https://twitter.com/TopGunDoggo), or if you're old school like me, email me at [saksham_saxena@outlook.com](mailto:saksham_saxena@outlook.com). \n\n## Acknowledgements\n\nThanks to Lauren McCarthy, my mentor, and Adam, Kenneth, dhowe and other contributors of p5.js for showing immense support and encouraging environment which helped me exceed my own expectations! Thank you so much :smile: ",
          "filepath": "data/repos/processing/p5.js-1.0/contributor_docs/project_wrapups/sakshamsaxena_gsoc_2017.md",
          "repo": "processing/p5.js",
          "version": "1.0",
          "chunk_index": 0
        }
      },
      {
        "id": "9f060c60-4bdc-4d2a-858a-786b0bc3fd82",
        "score": 0.015625,
        "payload": {
          "text": "# New JavaScript console in p5.js web editor\n\n#### by [@shinytang6](https://github.com/shinytang6)\n\n## Summary\n\nMy project for GSoC 2018 was to integrate a new console to p5.js web editor. There are two main tasks that l focused.\n\n1. Improve the current console in p5.js web editor. The  web editor has already included a console which displays console messages as plain text. l implemented the following features to the console:\n\n\t* Folding / unfolding of console logged objects.\n\t* Repeated console logs are not duplicated (but displayed with a number displaying times logged).\n\t* Support the presentation of different data formats.\n\t\n2. Make the console interactive. Like the browser developer tools, a user-friendly console should be interactive.\n\nAs of now, both of them are completed. The second one is still being polished. Apart from these, l also worked on \nsome other things to make the editor better.\n\n### Most notable PRs\n\n* [#546 Fixes file saving problem ](https://github.com/processing/p5.js-web-editor/pull/546)\n* [#579 Support displaying the script error caused by external library](https://github.com/processing/p5.js-web-editor/pull/579)\n* [#642 Remove authorization from specific routes](https://github.com/processing/p5.js-web-editor/pull/642)\n* [#656 Improve current console](https://github.com/processing/p5.js-web-editor/pull/656)\n* [#667 Make console interactive](https://github.com/processing/p5.js-web-editor/pull/667)\n\n[View all merged PRs on Github](https://github.com/processing/p5.js-web-editor/pulls?utf8=%E2%9C%93&q=is%3Apr+author%3Ashinytang6)\n\n## Experiences\n\nBefore l heard the Google Summer of Code, it seemed really hard for me to contribute to an open source project, for not only the technical reasons, but also the uncertainty about the community's response to my minor contributions. Hence, it was somekind difficult for me to take the first step.\n\nBut fortunately, I started my open source journey in February of this year. It turned out that most of the open source community are very welcoming. So thanks to Google for hosting this event and brings me into the wonderful open source world!\n\n## Conclusion\n\nIn short, the experience of Google Summer of Code was valuable and unforgettable for me. It helped me understand the open source culture and grow into a better programmer.\n\nFurthermore, here l'd like to give a big shout to my mentor [@catarak](https://github.com/catarak), who was a really great mentor, guided me patiently and put up with me all the time. Big thanks to her! Really had a great summer under her mentorship :smile:\n\nAlthough GSoC come to an end, l thought it was just another start. l will stay focused on the development of the Processing, especially the p5.js web editor, and keep on giving my humble contributions!\n\n## Support\n\nAny questions pertaining to this project may be addressed via Issues on the [p5.js-web-editor repository](https://github.com/processing/p5.js-web-editor). Simply create a new Issue and either assign or tag me in the conversation with [@shinytang6](https://github.com/shinytang6). For anything else, don't hesitate to get in touch at [shinytang6@gmail.com](mailto:shinytang6@gmail.com)!\n\n## Acknowledgements\n\nl would like to express my great gratitude to the Processing foundation for giving me the opportunity to work on this project and again my mentor for helping me!\n\nThank you so much to make it possible!",
          "filepath": "data/repos/processing/p5.js-1.0/contributor_docs/project_wrapups/liang_gsoc_2018.md",
          "repo": "processing/p5.js",
          "version": "1.0",
          "chunk_index": 0
        }
      },
      {
        "id": "992b4e28-26f2-43ce-ab4a-4a3673049781",
        "score": 0.015384615384615385,
        "payload": {
          "text": "suite('Error Helpers', function() {\n  var myp5;\n\n  setup(function(done) {\n    new p5(function(p) {\n      p.setup = function() {\n        myp5 = p;\n        done();\n      };\n    });\n  });\n\n  teardown(function() {\n    myp5.remove();\n  });\n\n  suite('friendly error logger', function() {\n    test('basic', function() {\n      assert.doesNotThrow(\n        function() {\n          p5._friendlyError('basic');\n        },\n        Error,\n        'got unwanted exception'\n      );\n    });\n  });\n\n  // unit tests for validateParameters\n  suite('validateParameters: Numbers + optional Constant', function() {\n    test('arc(): no friendly-err-msg', function() {\n      assert.doesNotThrow(\n        function() {\n          p5._validateParameters('arc', [1, 1, 10.5, 10, 0, Math.PI, 'pie']);\n        },\n        Error,\n        'got unwanted exception'\n      );\n    });\n    test('arc(): missing param #4, #5', function() {\n      assert.validationError(function() {\n        p5._validateParameters('arc', [1, 1, 10.5, 10]);\n      });\n    });\n    test('arc(): missing param #0', function() {\n      assert.validationError(function() {\n        p5._validateParameters('arc', [\n          undefined,\n          1,\n          10.5,\n          10,\n          0,\n          Math.PI,\n          'pie'\n        ]);\n      });\n    });\n    test('arc(): missing param #4', function() {\n      assert.validationError(function() {\n        p5._validateParameters('arc', [\n          1,\n          1,\n          10.5,\n          10,\n          undefined,\n          Math.PI,\n          'pie'\n        ]);\n      });\n    });\n    test('arc(): missing param #5', function() {\n      assert.validationError(function() {\n        p5._validateParameters('arc', [1, 1, 10.5, 10, 0, undefined, 'pie']);\n      });\n    });\n    test('arc(): missing param #6, no friendly-err-msg', function() {\n      assert.doesNotThrow(\n        function() {\n          p5._validateParameters('arc', [1, 1, 10.5, 10, 0, Math.PI]);\n        },\n        Error,\n        'got unwanted exception'\n      );\n    });\n    test('arc(): wrong param type at #0', function() {\n      assert.validationError(function() {\n        p5._validateParameters('arc', ['a', 1, 10.5, 10, 0, Math.PI, 'pie']);\n      });\n    });\n  });\n\n  suite('validateParameters: Numbers + optional Constant', function() {\n    test('rect(): no friendly-err-msg', function() {\n      assert.doesNotThrow(\n        function() {\n          p5._validateParameters('rect', [1, 1, 10.5, 10]);\n        },\n        Error,\n        'got unwanted exception'\n      );\n    });\n    test('rect(): wrong param type at #0', function() {\n      assert.validationError(function() {\n        p5._validateParameters('rect', ['a', 1, 10.5, 10, 0, Math.PI]);\n      });\n    });\n  });\n\n  suite(\n    'validateParameters: class, multi-types + optional Numbers',\n    function() {\n      test('ambientLight(): no friendly-err-msg', function() {\n        assert.doesNotThrow(\n          function() {\n            var c = myp5.color(255, 204, 0);\n            p5._validateParameters('ambientLight', [c]);\n          },\n          Error,\n          'got unwanted exception'\n        );\n      });\n    }\n  );\n\n  suite('validateParameters: multi-format', function() {\n    test('color(): no friendly-err-msg', function() {\n      assert.doesNotThrow(\n        function() {\n          p5._validateParameters('color', [65]);\n        },\n        Error,\n        'got unwanted exception'\n      );\n    });\n    test('color(): no friendly-err-msg', function() {\n      assert.doesNotThrow(\n        function() {\n          p5._validateParameters('color', [65, 0.5]);\n        },\n        Error,\n        'got unwanted exception'\n      );\n    });\n    test('color(): no friendly-err-msg', function() {\n      assert.doesNotThrow(\n        function() {\n          p5._validateParameters('color', [255, 204, 0]);\n        },\n        Error,\n        'got unwanted exception'\n      );\n    });\n    test('color(): optional parameter, incorrect type', function() {\n      assert.validationError(function() {\n        p5._validateParameters('color', [0, 0, 0, 'A']);\n      });\n    });\n    test('color(): extra parameter', function() {\n      assert.validationError(function() {\n        p5._validateParameters('color', [[0, 0, 0], 0]);\n      });\n    });\n    test('color(): incorrect element type', function() {\n      assert.validationError(function() {\n        p5._validateParameters('color', [['A', 'B', 'C']]);\n      });\n    });\n    test('color(): incorrect parameter count', function() {\n      assert.validationError(function() {\n        p5._validateParameters('color', ['A', 'A', 0, 0, 0, 0, 0, 0]);\n      });\n    });\n  });\n\n  suite('helpForMisusedAtTopLevelCode', function() {\n    var help = function(msg) {\n      var log = [];\n      var logger = function(msg) {\n        log.push(msg);\n      };\n\n      p5.prototype._helpForMisusedAtTopLevelCode({ message: msg }, logger);\n      assert.equal(log.length, 1);\n      return log[0];\n    };\n\n    test('help for constants is shown', function() {\n      assert.match(\n        help(\"'HALF_PI' is undefined\"),\n        /Did you just try to use p5\\.js's HALF_PI constant\\?/\n      );\n    });\n\n    test('help for functions is shown', function() {\n      assert.match(\n        help(\"'smooth' is undefined\"),\n        /Did you just try to use p5\\.js's smooth\\(\\) function\\?/\n      );\n    });\n\n    test('help for variables is shown', function() {\n      assert.match(\n        help(\"'focused' is undefined\"),\n        /Did you just try to use p5\\.js's focused variable\\?/\n      );\n    });\n  });\n});\n",
          "filepath": "data/repos/processing/p5.js-1.0/test/unit/core/error_helpers.js",
          "repo": "processing/p5.js",
          "version": "1.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-1178",
    "model_patch": "diff --git a/packages/render/src/utils/styles.js b/packages/render/src/utils/styles.js\nindex 1234567..89abcde 100644\n--- a/packages/render/src/utils/styles.js\n+++ b/packages/render/src/utils/styles.js\n@@ -1,6 +1,14 @@\n const applyStyles = (node, style) => {\n   // Existing style application logic\n+  \n+  // Fix for margin auto\n+  if (style.margin === 'auto') {\n+    node.style.marginLeft = 'auto';\n+    node.style.marginRight = 'auto';\n+  }\n+\n   return node;\n };\n \n module.exports = applyStyles;",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 98.38,
      "issue_embedding_time_ms": 98.38,
      "retrieval_time_ms_splade": 19.8,
      "retrieval_time_ms": 19.8,
      "total_retrieval_time_ms": 118.18,
      "generation_time_ms": 2347.2,
      "total_io_time_ms": 2465.38,
      "input_total_token_limit": null,
      "issue_text_tokens": 209,
      "vlm_tokens": 0,
      "retrieved_tokens": 3928,
      "prompt_template_tokens": 505,
      "total_input_prompt_tokens": 4642,
      "output_generated_tokens": 139,
      "total_io_tokens": 4781,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nmargin auto is broken in v2\\n**Describe the bug**\\r\\nRun a some snapshot tests with react-pdf examples for v1/v2 and seems like margin auto doesn't work\\r\\n\\r\\nhttps://github.com/diegomura/react-pdf/blob/master/packages/examples/src/knobs/index.js#L20\\r\\n\\r\\n![index-test-js-renders-correctly-1-diff](https://user-images.githubusercontent.com/6726016/113850039-b8736b00-97a2-11eb-857d-50470f1d52c2.png)\\r\\n> v1 on the left side v2 on the right\\r\\n\\r\\n**To Reproduce**\\r\\nSteps to reproduce the behavior including code snippet (if applies):\\r\\n1. run https://github.com/diegomura/react-pdf/blob/master/packages/examples/src/knobs/\\r\\n2. See error\\r\\n\\r\\n\\r\\n**Desktop (please complete the following information):**\\r\\n - MacOS\\r\\n - Node v14.7.0\\r\\n - React-pdf version v2.0.0\\r\\n\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of bug_report.md]\\n---\\nname: Bug report\\nabout: Create a report to help us improve\\ntitle: ''\\nlabels: ''\\nassignees: ''\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior including code snippet (if applies):\\n1. Go to '...'\\n2. Click on '....'\\n3. Scroll down to '....'\\n4. See error\\n\\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n**Screenshots**\\nIf applicable, add screenshots to help explain your problem.\\n\\n**Desktop (please complete the following information):**\\n - OS: [e.g. MacOS, Windows]\\n - Browser [e.g. chrome, safari]\\n - React-pdf version [e.g. v1.1.0]\\n\\n<!-- Love react-pdf? Please consider supporting our collective:\\n\\ud83d\\udc49  https://opencollective.com/react-pdf/donate -->\\n\\n[end of bug_report.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n  <p align=\\\"center\\\">React renderer for creating PDF files on the browser and server<p>\\n  <p align=\\\"center\\\">\\n    <a href=\\\"https://www.npmjs.com/package/@react-pdf/renderer\\\">\\n      <img src=\\\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\\\" />\\n    </a>\\n    <a href=\\\"https://travis-ci.org/diegomura/react-pdf\\\">\\n      <img src=\\\"https://img.shields.io/travis/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\\\">\\n      <img src=\\\"https://img.shields.io/github/license/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://spectrum.chat/react-pdf\\\">\\n      <img src=\\\"https://withspectrum.github.io/badge/badge.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/prettier/prettier\\\">\\n      <img src=\\\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\\\" />\\n    </a>\\n    <a href=\\\"https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_shield\\\" alt=\\\"FOSSA Status\\\"><img src=\\\"https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=shield\\\"/></a>\\n  </p>\\n</p>\\n\\n## How to install\\n```sh\\nyarn add @react-pdf/renderer\\n```\\n\\n## How it works\\n\\n```jsx\\nimport React from 'react';\\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\\n\\n// Create styles\\nconst styles = StyleSheet.create({\\n  page: {\\n    flexDirection: 'row',\\n    backgroundColor: '#E4E4E4'\\n  },\\n  section: {\\n    margin: 10,\\n    padding: 10,\\n    flexGrow: 1\\n  }\\n});\\n\\n// Create Document Component\\nconst MyDocument = () => (\\n  <Document>\\n    <Page size=\\\"A4\\\" style={styles.page}>\\n      <View style={styles.section}>\\n        <Text>Section #1</Text>\\n      </View>\\n      <View style={styles.section}>\\n        <Text>Section #2</Text>\\n      </View>\\n    </Page>\\n  </Document>\\n);\\n```\\n\\n### `Web.` Render in DOM\\n```jsx\\nimport React from 'react';\\nimport ReactDOM from 'react-dom';\\nimport { PDFViewer } from '@react-pdf/renderer';\\n\\nconst App = () => (\\n  <PDFViewer>\\n    <MyDocument />\\n  </PDFViewer>\\n);\\n\\nReactDOM.render(<App />, document.getElementById('root'));\\n```\\n\\n### `Node.` Save in a file\\n```jsx\\nimport React from 'react';\\nimport ReactPDF from '@react-pdf/renderer';\\n\\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\\n```\\n\\n## Examples\\nFor each example, try opening `output.pdf` to see the result.\\n\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/text/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/text/\\\">Text</a>\\n      </td>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/resume/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/resume/\\\">Resume</a>\\n\\t\\t\\t</td>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/fractals/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/fractals/\\\">Fractals</a>\\n\\t\\t\\t</td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/knobs/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/knobs/\\\">Knobs</a>\\n\\t\\t\\t</td>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/pageWrap/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/pageWrap/\\\">Page wrap</a>\\n      </td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n\\n## Contributors\\n\\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\\n<a href=\\\"https://github.com/diegomura/react-pdf/graphs/contributors\\\"><img src=\\\"https://opencollective.com/react-pdf/contributors.svg?width=890\\\" /></a>\\n\\n## Sponsors\\n\\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#sponsors\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/sponsors.svg?width=890\\\"></a>\\n\\n## Backers\\n\\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#backers\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/backers.svg?width=890\\\"></a>\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_large)\\n\\n---\\n![](https://img.shields.io/npm/dt/@react-pdf/renderer.svg?style=flat)\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/render\\n\\n> React-pdf render engine\\n\\n## How to install\\n```sh\\nyarn add @react-pdf/render\\n```\\n\\n## How it works\\n\\n```js\\nconst render = require('@react-pdf/render');\\nconst primitives = require('@react-pdf/primitives');\\n\\nconst view = {\\n  type: primitives.View,\\n  style: {\\n    backgroundColor: 'red',\\n    borderTopLeftRadius: 5,\\n    borderTopRightRadius: 10,\\n    borderBottomLeftRadius: 0,\\n    borderBottomRightRadius: 15,\\n    borderTopColor: 'yellow',\\n    borderLeftColor: 'green',\\n    borderBottomColor: 'black',\\n    borderRightColor: 'purple',\\n  },\\n  box: {\\n    left: 20,\\n    top: 20,\\n    width: 100,\\n    height: 80,\\n    borderTopWidth: 3,\\n    borderLeftWidth: 2,\\n    borderBottomWidth: 1,\\n    borderRightWidth: 4,\\n  },\\n};\\n\\nconst doc = {\\n  type: primitives.Document,\\n  children: [\\n    {\\n      type: primitives.Page,\\n      box: { width: 400, height: 600 },\\n      children: [view],\\n    },\\n  ],\\n};\\n\\n// Provide your own context\\nconst ctx = createContext();\\n\\nrender.default(ctx, doc);\\n```\\n\\nThis library exports a `render` function that takes two arguments:\\n\\n- *ctx*: This is the target context where the document is going to be rendered. React-pdf currently uses a [pdfkit](https://github.com/react-pdf/pdfkit) document as context, but it can target any other type of structure as long as it signature matches pdfkit API. In the future this will enable rendering documents into muliple formats in addition to PDF.\\n- *node*: Document root node. A node is a nested structure that defines a single element in a document. They are defined by it's `type` and arguments.\\n\\n## Node structure\\n\\nA node represents a single element inside a document. It's mainly defined by it's `type` (mandatory) field in addition to other values to define where that element is positioned inside the document (`box`), how it looks (`style`), how it should behave (`params`) and what sub-nodes it contains (`children`).\\n\\nThe root node must always be of type `DOCUMENT`, containing as many `PAGE` nodes as desired inside it's children field.\\n\\nBare in mind this package does not handle any type of node positioning, inheritance, style transformations or any other layout related logic. It's role is limited to render exactly the node it get's into the provided context. Take this into account when definig styles as `paddingTop`, `paddingLeft` and so on instead of the shortcut `padding`. For layout or styles transformation this project provides separate packages.\\n\\n### node.type\\n\\nMandatory field specifiying the type of the particular node. The full list of types can be found and imported from `@react-pdf/primitives`\\n\\n### node.box\\n\\nDefines bounding box where a particular node is located inside a document\\n\\n- left\\n- top\\n- width\\n- height\\n- paddingTop\\n- paddingLeft\\n- paddingBottom\\n- paddingRight\\n- marginTop\\n- marginLeft\\n- marginBottom\\n- marginRight\\n- borderTopWidth\\n- borderLeftWidth\\n- borderBottomWidth\\n- borderRightWidth\\n\\n### node.style\\n\\nDefines how the node looks like. There are some types of nodes that expect special style values, but generally all support:\\n\\n- color\\n- opacity\\n- overflow\\n- backgroundColor\\n- borderTopLeftRadius\\n- borderTopRightRadius\\n- borderBottomLeftRadius\\n- borderBottomRightRadius\\n- borderTopColor\\n- borderLeftColor\\n- borderBottomColor\\n- borderRightColor\\n- _others..._\\n\\n### node.props\\n\\nSpecific node params needed to render correctly ot behave like certain way. Specially needed for SVG nodes\\n\\n## PDF example\\n\\n```js\\nconst fs = require('fs');\\nconst render = require('@react-pdf/render');\\nconst pdfkit = require('@react-pdf/pdfkit');\\n\\nconst PDFDocument = pdfkit.default;\\n\\nconst ctx = new PDFDocument({ autoFirstPage: false });\\n\\nconst doc = {}; // See above\\n\\nrender.default(ctx, doc);\\n\\nconst stream = fs.createWriteStream('./test.pdf');\\n\\nctx.pipe(stream);\\n```\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n  <p align=\\\"center\\\">React renderer for creating PDF files on the browser and server<p>\\n  <p align=\\\"center\\\">\\n    <a href=\\\"https://www.npmjs.com/package/@react-pdf/renderer\\\">\\n      <img src=\\\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\\\" />\\n    </a>\\n    <a href=\\\"https://travis-ci.org/diegomura/react-pdf\\\">\\n      <img src=\\\"https://img.shields.io/travis/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\\\">\\n      <img src=\\\"https://img.shields.io/github/license/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/prettier/prettier\\\">\\n      <img src=\\\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\\\" />\\n    </a>\\n    <a href=\\\"https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_shield\\\" alt=\\\"FOSSA Status\\\"><img src=\\\"https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=shield\\\"/></a>\\n  </p>\\n</p>\\n\\n> New react-pdf 2.0 was relesed. [Read about the announcement](http://react-pdf.org/blog/announcing-react-pdf-v2)\\n\\n## Lost?\\n\\nThis package is used to _create_ PDFs using React. If you wish to _display_ existing PDFs, you may be looking for [react-pdf](https://github.com/wojtekmaj/react-pdf).\\n\\n## How to install\\n```sh\\nyarn add @react-pdf/renderer\\n```\\n\\n## How it works\\n\\n```jsx\\nimport React from 'react';\\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\\n\\n// Create styles\\nconst styles = StyleSheet.create({\\n  page: {\\n    flexDirection: 'row',\\n    backgroundColor: '#E4E4E4'\\n  },\\n  section: {\\n    margin: 10,\\n    padding: 10,\\n    flexGrow: 1\\n  }\\n});\\n\\n// Create Document Component\\nconst MyDocument = () => (\\n  <Document>\\n    <Page size=\\\"A4\\\" style={styles.page}>\\n      <View style={styles.section}>\\n        <Text>Section #1</Text>\\n      </View>\\n      <View style={styles.section}>\\n        <Text>Section #2</Text>\\n      </View>\\n    </Page>\\n  </Document>\\n);\\n```\\n\\n### `Web.` Render in DOM\\n```jsx\\nimport React from 'react';\\nimport ReactDOM from 'react-dom';\\nimport { PDFViewer } from '@react-pdf/renderer';\\n\\nconst App = () => (\\n  <PDFViewer>\\n    <MyDocument />\\n  </PDFViewer>\\n);\\n\\nReactDOM.render(<App />, document.getElementById('root'));\\n```\\n\\n### `Node.` Save in a file\\n```jsx\\nimport React from 'react';\\nimport ReactPDF from '@react-pdf/renderer';\\n\\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\\n```\\n\\n## Contributors\\n\\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\\n<a href=\\\"https://github.com/diegomura/react-pdf/graphs/contributors\\\"><img src=\\\"https://opencollective.com/react-pdf/contributors.svg?width=890\\\" /></a>\\n\\n## Sponsors\\n\\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#sponsors\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/sponsors.svg?width=890\\\"></a>\\n\\n## Backers\\n\\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#backers\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/backers.svg?width=890\\\"></a>\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_large)\\n\\n---\\n![](https://img.shields.io/npm/dt/@react-pdf/renderer.svg?style=flat)\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/types\\n\\n> React-pdf TypeScript definitions\\n\\n## How to install\\n\\n```sh\\nyarn add @react-pdf/types\\n```\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[end of README.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "bug_report.md",
        "README.md",
        "README.md",
        "README.md",
        "README.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "62ec4b36-1585-49a0-895a-0ef0f44bd44e",
        "score": 0.01639344262295082,
        "payload": {
          "text": "---\nname: Bug report\nabout: Create a report to help us improve\ntitle: ''\nlabels: ''\nassignees: ''\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior including code snippet (if applies):\n1. Go to '...'\n2. Click on '....'\n3. Scroll down to '....'\n4. See error\n\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n\n**Screenshots**\nIf applicable, add screenshots to help explain your problem.\n\n**Desktop (please complete the following information):**\n - OS: [e.g. MacOS, Windows]\n - Browser [e.g. chrome, safari]\n - React-pdf version [e.g. v1.1.0]\n\n<!-- Love react-pdf? Please consider supporting our collective:\n\ud83d\udc49  https://opencollective.com/react-pdf/donate -->\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/.github/ISSUE_TEMPLATE/bug_report.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "adceb749-ad96-47f9-b286-0f8d059de07f",
        "score": 0.016129032258064516,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n  <p align=\"center\">React renderer for creating PDF files on the browser and server<p>\n  <p align=\"center\">\n    <a href=\"https://www.npmjs.com/package/@react-pdf/renderer\">\n      <img src=\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\" />\n    </a>\n    <a href=\"https://travis-ci.org/diegomura/react-pdf\">\n      <img src=\"https://img.shields.io/travis/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\">\n      <img src=\"https://img.shields.io/github/license/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://spectrum.chat/react-pdf\">\n      <img src=\"https://withspectrum.github.io/badge/badge.svg\" />\n    </a>\n    <a href=\"https://github.com/prettier/prettier\">\n      <img src=\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\" />\n    </a>\n    <a href=\"https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_shield\" alt=\"FOSSA Status\"><img src=\"https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=shield\"/></a>\n  </p>\n</p>\n\n## How to install\n```sh\nyarn add @react-pdf/renderer\n```\n\n## How it works\n\n```jsx\nimport React from 'react';\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\n\n// Create styles\nconst styles = StyleSheet.create({\n  page: {\n    flexDirection: 'row',\n    backgroundColor: '#E4E4E4'\n  },\n  section: {\n    margin: 10,\n    padding: 10,\n    flexGrow: 1\n  }\n});\n\n// Create Document Component\nconst MyDocument = () => (\n  <Document>\n    <Page size=\"A4\" style={styles.page}>\n      <View style={styles.section}>\n        <Text>Section #1</Text>\n      </View>\n      <View style={styles.section}>\n        <Text>Section #2</Text>\n      </View>\n    </Page>\n  </Document>\n);\n```\n\n### `Web.` Render in DOM\n```jsx\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { PDFViewer } from '@react-pdf/renderer';\n\nconst App = () => (\n  <PDFViewer>\n    <MyDocument />\n  </PDFViewer>\n);\n\nReactDOM.render(<App />, document.getElementById('root'));\n```\n\n### `Node.` Save in a file\n```jsx\nimport React from 'react';\nimport ReactPDF from '@react-pdf/renderer';\n\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\n```\n\n## Examples\nFor each example, try opening `output.pdf` to see the result.\n\n<table>\n\t<tbody>\n\t\t<tr>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/text/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/text/\">Text</a>\n      </td>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/resume/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/resume/\">Resume</a>\n\t\t\t</td>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/fractals/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/fractals/\">Fractals</a>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n<table>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/knobs/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/knobs/\">Knobs</a>\n\t\t\t</td>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/pageWrap/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/pageWrap/\">Page wrap</a>\n      </td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n## Contributors\n\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\n<a href=\"https://github.com/diegomura/react-pdf/graphs/contributors\"><img src=\"https://opencollective.com/react-pdf/contributors.svg?width=890\" /></a>\n\n## Sponsors\n\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\n\n<a href=\"https://opencollective.com/react-pdf#sponsors\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/sponsors.svg?width=890\"></a>\n\n## Backers\n\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\n\n<a href=\"https://opencollective.com/react-pdf#backers\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/backers.svg?width=890\"></a>\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n\n[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_large)\n\n---\n![](https://img.shields.io/npm/dt/@react-pdf/renderer.svg?style=flat)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/renderer/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "905a84df-25ec-45dc-b5a6-103e701d6b9d",
        "score": 0.015873015873015872,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/render\n\n> React-pdf render engine\n\n## How to install\n```sh\nyarn add @react-pdf/render\n```\n\n## How it works\n\n```js\nconst render = require('@react-pdf/render');\nconst primitives = require('@react-pdf/primitives');\n\nconst view = {\n  type: primitives.View,\n  style: {\n    backgroundColor: 'red',\n    borderTopLeftRadius: 5,\n    borderTopRightRadius: 10,\n    borderBottomLeftRadius: 0,\n    borderBottomRightRadius: 15,\n    borderTopColor: 'yellow',\n    borderLeftColor: 'green',\n    borderBottomColor: 'black',\n    borderRightColor: 'purple',\n  },\n  box: {\n    left: 20,\n    top: 20,\n    width: 100,\n    height: 80,\n    borderTopWidth: 3,\n    borderLeftWidth: 2,\n    borderBottomWidth: 1,\n    borderRightWidth: 4,\n  },\n};\n\nconst doc = {\n  type: primitives.Document,\n  children: [\n    {\n      type: primitives.Page,\n      box: { width: 400, height: 600 },\n      children: [view],\n    },\n  ],\n};\n\n// Provide your own context\nconst ctx = createContext();\n\nrender.default(ctx, doc);\n```\n\nThis library exports a `render` function that takes two arguments:\n\n- *ctx*: This is the target context where the document is going to be rendered. React-pdf currently uses a [pdfkit](https://github.com/react-pdf/pdfkit) document as context, but it can target any other type of structure as long as it signature matches pdfkit API. In the future this will enable rendering documents into muliple formats in addition to PDF.\n- *node*: Document root node. A node is a nested structure that defines a single element in a document. They are defined by it's `type` and arguments.\n\n## Node structure\n\nA node represents a single element inside a document. It's mainly defined by it's `type` (mandatory) field in addition to other values to define where that element is positioned inside the document (`box`), how it looks (`style`), how it should behave (`params`) and what sub-nodes it contains (`children`).\n\nThe root node must always be of type `DOCUMENT`, containing as many `PAGE` nodes as desired inside it's children field.\n\nBare in mind this package does not handle any type of node positioning, inheritance, style transformations or any other layout related logic. It's role is limited to render exactly the node it get's into the provided context. Take this into account when definig styles as `paddingTop`, `paddingLeft` and so on instead of the shortcut `padding`. For layout or styles transformation this project provides separate packages.\n\n### node.type\n\nMandatory field specifiying the type of the particular node. The full list of types can be found and imported from `@react-pdf/primitives`\n\n### node.box\n\nDefines bounding box where a particular node is located inside a document\n\n- left\n- top\n- width\n- height\n- paddingTop\n- paddingLeft\n- paddingBottom\n- paddingRight\n- marginTop\n- marginLeft\n- marginBottom\n- marginRight\n- borderTopWidth\n- borderLeftWidth\n- borderBottomWidth\n- borderRightWidth\n\n### node.style\n\nDefines how the node looks like. There are some types of nodes that expect special style values, but generally all support:\n\n- color\n- opacity\n- overflow\n- backgroundColor\n- borderTopLeftRadius\n- borderTopRightRadius\n- borderBottomLeftRadius\n- borderBottomRightRadius\n- borderTopColor\n- borderLeftColor\n- borderBottomColor\n- borderRightColor\n- _others..._\n\n### node.props\n\nSpecific node params needed to render correctly ot behave like certain way. Specially needed for SVG nodes\n\n## PDF example\n\n```js\nconst fs = require('fs');\nconst render = require('@react-pdf/render');\nconst pdfkit = require('@react-pdf/pdfkit');\n\nconst PDFDocument = pdfkit.default;\n\nconst ctx = new PDFDocument({ autoFirstPage: false });\n\nconst doc = {}; // See above\n\nrender.default(ctx, doc);\n\nconst stream = fs.createWriteStream('./test.pdf');\n\nctx.pipe(stream);\n```\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/render/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "401ae391-ee3a-493b-bc3f-20e9e5aedd4b",
        "score": 0.015625,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n  <p align=\"center\">React renderer for creating PDF files on the browser and server<p>\n  <p align=\"center\">\n    <a href=\"https://www.npmjs.com/package/@react-pdf/renderer\">\n      <img src=\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\" />\n    </a>\n    <a href=\"https://travis-ci.org/diegomura/react-pdf\">\n      <img src=\"https://img.shields.io/travis/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\">\n      <img src=\"https://img.shields.io/github/license/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://github.com/prettier/prettier\">\n      <img src=\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\" />\n    </a>\n    <a href=\"https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_shield\" alt=\"FOSSA Status\"><img src=\"https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=shield\"/></a>\n  </p>\n</p>\n\n> New react-pdf 2.0 was relesed. [Read about the announcement](http://react-pdf.org/blog/announcing-react-pdf-v2)\n\n## Lost?\n\nThis package is used to _create_ PDFs using React. If you wish to _display_ existing PDFs, you may be looking for [react-pdf](https://github.com/wojtekmaj/react-pdf).\n\n## How to install\n```sh\nyarn add @react-pdf/renderer\n```\n\n## How it works\n\n```jsx\nimport React from 'react';\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\n\n// Create styles\nconst styles = StyleSheet.create({\n  page: {\n    flexDirection: 'row',\n    backgroundColor: '#E4E4E4'\n  },\n  section: {\n    margin: 10,\n    padding: 10,\n    flexGrow: 1\n  }\n});\n\n// Create Document Component\nconst MyDocument = () => (\n  <Document>\n    <Page size=\"A4\" style={styles.page}>\n      <View style={styles.section}>\n        <Text>Section #1</Text>\n      </View>\n      <View style={styles.section}>\n        <Text>Section #2</Text>\n      </View>\n    </Page>\n  </Document>\n);\n```\n\n### `Web.` Render in DOM\n```jsx\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { PDFViewer } from '@react-pdf/renderer';\n\nconst App = () => (\n  <PDFViewer>\n    <MyDocument />\n  </PDFViewer>\n);\n\nReactDOM.render(<App />, document.getElementById('root'));\n```\n\n### `Node.` Save in a file\n```jsx\nimport React from 'react';\nimport ReactPDF from '@react-pdf/renderer';\n\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\n```\n\n## Contributors\n\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\n<a href=\"https://github.com/diegomura/react-pdf/graphs/contributors\"><img src=\"https://opencollective.com/react-pdf/contributors.svg?width=890\" /></a>\n\n## Sponsors\n\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\n\n<a href=\"https://opencollective.com/react-pdf#sponsors\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/sponsors.svg?width=890\"></a>\n\n## Backers\n\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\n\n<a href=\"https://opencollective.com/react-pdf#backers\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/backers.svg?width=890\"></a>\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n\n[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_large)\n\n---\n![](https://img.shields.io/npm/dt/@react-pdf/renderer.svg?style=flat)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "73776f8b-8495-4aad-893b-b09769b53db3",
        "score": 0.015384615384615385,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/types\n\n> React-pdf TypeScript definitions\n\n## How to install\n\n```sh\nyarn add @react-pdf/types\n```\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/types/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-1280",
    "model_patch": "diff --git a/style.d.ts b/style.d.ts\nindex 7c9f4f2..b3e5c1a 100644\n--- a/style.d.ts\n+++ b/style.d.ts\n@@ -8,7 +8,7 @@ export interface Style {\n   alignSelf?: 'auto' | 'flex-start' | 'flex-end' | 'center' | 'baseline' | 'stretch';\n   flex?: number;\n   flexDirection?: 'row' | 'row-reverse' | 'column' | 'column-reverse';\n   flexWrap?: 'nowrap' | 'wrap' | 'wrap-reverse';\n-  flexFlow?: number;\n+  flexFlow?: string;\n   flexGrow?: number;\n   flexShrink?: number;\n   flexBasis?: number | string;",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 107.77,
      "issue_embedding_time_ms": 107.77,
      "retrieval_time_ms_splade": 13.83,
      "retrieval_time_ms": 13.83,
      "total_retrieval_time_ms": 121.61,
      "generation_time_ms": 1921.33,
      "total_io_time_ms": 2042.94,
      "input_total_token_limit": null,
      "issue_text_tokens": 218,
      "vlm_tokens": 0,
      "retrieved_tokens": 1276,
      "prompt_template_tokens": 505,
      "total_input_prompt_tokens": 1999,
      "output_generated_tokens": 171,
      "total_io_tokens": 2170,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nThe flexBasis rule does not work in v2.0.8.\\nThe flexBasis rule does not work since I upgraded to version 2.0.8 from 1.6.14.\\r\\nI have the following code:\\r\\n\\r\\n```\\r\\n<View\\r\\n  style={{\\r\\n    display: \\\"flex\\\",\\r\\n    flexDirection: \\\"row\\\",\\r\\n    alignItems: \\\"center\\\",\\r\\n  }}\\r\\n>\\r\\n  <Text style={{ flexBasis: \\\"50%\\\" }}>One</Text>\\r\\n  <Text style={{ flexBasis: \\\"25%\\\" }}>Two</Text>\\r\\n  <Text style={{ flexBasis: \\\"25%\\\" }}>Three</Text>\\r\\n</View>\\r\\n```\\r\\n\\r\\nBefore:\\r\\n![image](https://user-images.githubusercontent.com/21165322/116717903-ca19ee00-a9af-11eb-89bd-7633c37bd21f.png)\\r\\n\\r\\nAfter:\\r\\n![image](https://user-images.githubusercontent.com/21165322/116718099-01889a80-a9b0-11eb-9d12-a15756b0a819.png)\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/layout\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/image\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/primitives\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/font\\n\\n[end of README.md]\\n[start of style.d.ts]\\nexport interface Style {\\n  //Flexbox\\n\\n  alignContent?: 'flex-start' | 'flex-end' | 'center' | 'stretch' | 'space-between' | 'space-around';\\n  alignItems?: 'flex-start' | 'flex-end' | 'center' | 'stretch' | 'baseline';\\n  alignSelf?: 'auto' | 'flex-start' | 'flex-end' | 'center' | 'baseline' | 'stretch';\\n  flex?: number;\\n  flexDirection?: 'row' | 'row-reverse' | 'column' | 'column-reverse';\\n  flexWrap?: 'nowrap' | 'wrap' | 'wrap-reverse';\\n  flexFlow?: number;\\n  flexGrow?: number;\\n  flexShrink?: number;\\n  flexBasis?: number;\\n  justifyContent?: 'flex-start' | 'flex-end' | 'center' | 'space-around' | 'space-between' | 'space-evenly';\\n  order?: number;\\n\\n  // Layout\\n\\n  bottom?: number | string;\\n  display?: 'flex' | 'none';\\n  left?: number | string;\\n  position?: 'absolute' | 'relative';\\n  right?: number | string;\\n  top?: number | string;\\n  overflow?: 'hidden';\\n\\n  // Dimension\\n\\n  height?: number | string;\\n  maxHeight?: number | string;\\n  maxWidth?: number | string;\\n  minHeight?: number | string;\\n  minWidth?: number | string;\\n  width?: number | string;\\n\\n  // Color\\n\\n  backgroundColor?: string;\\n  color?: string;\\n  opacity?: number;\\n\\n  // Text\\n\\n  fontSize?: number | string;\\n  fontFamily?: string;\\n  fontStyle?: string | 'normal';\\n  fontWeight?: number | 'thin' | 'hairline' | 'ultralight' | 'extralight' | 'light' | 'normal' | 'medium' | 'semibold' | 'demibold' | 'bold' | 'ultrabold' | 'extrabold' | 'heavy' | 'black';\\n  letterSpacing?: number | string;\\n  lineHeight?: number | string;\\n  maxLines?: number; //?\\n  textAlign?: 'left' | 'right' | 'center' | 'justify'; //?\\n  textDecoration?: 'line-through' | 'underline' | 'none';\\n  textDecorationColor?: string;\\n  textDecorationStyle?: \\\"dashed\\\" | \\\"dotted\\\" | \\\"solid\\\" | string; //?\\n  textIndent?: any; //?\\n  textOverflow?: 'ellipsis';\\n  textTransform?: 'capitalize' | 'lowercase' | 'uppercase';\\n\\n  // Sizing/positioning\\n\\n  objectFit?: string;\\n  objectPosition?: number | string;\\n  objectPositionX?: number | string;\\n  objectPositionY?: number | string;\\n\\n  // Margin/padding\\n\\n  margin?: number | string;\\n  marginHorizontal?: number | string;\\n  marginVertical?: number | string;\\n  marginTop?: number | string;\\n  marginRight?: number | string;\\n  marginBottom?: number | string;\\n  marginLeft?: number | string;\\n  padding?: number | string;\\n  paddingHorizontal?: number | string;\\n  paddingVertical?: number | string;\\n  paddingTop?: number | string;\\n  paddingRight?: number | string;\\n  paddingBottom?: number | string;\\n  paddingLeft?: number | string;\\n\\n  // Transformations\\n\\n  transform?: string;\\n  transformOrigin?: number | string;\\n  transformOriginX?: number | string;\\n  transformOriginY?: number | string;\\n\\n  // Borders\\n\\n  border?: number | string;\\n  borderWidth?: number;\\n  borderColor?: string;\\n  borderStyle?: \\\"dashed\\\" | \\\"dotted\\\" | \\\"solid\\\";\\n  borderTop?: number | string;\\n  borderTopColor?: string;\\n  borderTopStyle?: \\\"dashed\\\" | \\\"dotted\\\" | \\\"solid\\\"; // ?\\n  borderTopWidth?: number | string;\\n  borderRight?: number | string;\\n  borderRightColor?: string;\\n  borderRightStyle?: \\\"dashed\\\" | \\\"dotted\\\" | \\\"solid\\\"; //?\\n  borderRightWidth?: number | string;\\n  borderBottom?: number | string;\\n  borderBottomColor?: string;\\n  borderBottomStyle?: \\\"dashed\\\" | \\\"dotted\\\" | \\\"solid\\\"; //?\\n  borderBottomWidth?: number | string;\\n  borderLeft?: number | string;\\n  borderLeftColor?: string;\\n  borderLeftStyle?: \\\"dashed\\\" | \\\"dotted\\\" | \\\"solid\\\"; //?\\n  borderLeftWidth?: number | string;\\n  borderTopLeftRadius?: number | string;\\n  borderTopRightRadius?: number | string;\\n  borderBottomRightRadius?: number | string;\\n  borderBottomLeftRadius?: number | string;\\n  borderRadius?: number | string\\n}\\n\\n[end of style.d.ts]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "README.md",
        "README.md",
        "README.md",
        "README.md",
        "style.d.ts"
      ]
    },
    "retrieved_documents": [
      {
        "id": "11da3cdb-0972-4d99-a5f4-61d31d301721",
        "score": 0.01639344262295082,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/layout\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "c5a7a567-d45e-42d7-8f2b-ea02a1c8c800",
        "score": 0.016129032258064516,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/image\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/image/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "45796c1e-6dac-4686-adda-fc23c13b75b8",
        "score": 0.015873015873015872,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/primitives\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/primitives/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "799dbb5c-a14c-42cb-947e-524fedfdae9e",
        "score": 0.015625,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/font\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/font/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "21fb0ecc-f058-4407-88c3-2a68665d9d47",
        "score": 0.015384615384615385,
        "payload": {
          "text": "export interface Style {\n  //Flexbox\n\n  alignContent?: 'flex-start' | 'flex-end' | 'center' | 'stretch' | 'space-between' | 'space-around';\n  alignItems?: 'flex-start' | 'flex-end' | 'center' | 'stretch' | 'baseline';\n  alignSelf?: 'auto' | 'flex-start' | 'flex-end' | 'center' | 'baseline' | 'stretch';\n  flex?: number;\n  flexDirection?: 'row' | 'row-reverse' | 'column' | 'column-reverse';\n  flexWrap?: 'nowrap' | 'wrap' | 'wrap-reverse';\n  flexFlow?: number;\n  flexGrow?: number;\n  flexShrink?: number;\n  flexBasis?: number;\n  justifyContent?: 'flex-start' | 'flex-end' | 'center' | 'space-around' | 'space-between' | 'space-evenly';\n  order?: number;\n\n  // Layout\n\n  bottom?: number | string;\n  display?: 'flex' | 'none';\n  left?: number | string;\n  position?: 'absolute' | 'relative';\n  right?: number | string;\n  top?: number | string;\n  overflow?: 'hidden';\n\n  // Dimension\n\n  height?: number | string;\n  maxHeight?: number | string;\n  maxWidth?: number | string;\n  minHeight?: number | string;\n  minWidth?: number | string;\n  width?: number | string;\n\n  // Color\n\n  backgroundColor?: string;\n  color?: string;\n  opacity?: number;\n\n  // Text\n\n  fontSize?: number | string;\n  fontFamily?: string;\n  fontStyle?: string | 'normal';\n  fontWeight?: number | 'thin' | 'hairline' | 'ultralight' | 'extralight' | 'light' | 'normal' | 'medium' | 'semibold' | 'demibold' | 'bold' | 'ultrabold' | 'extrabold' | 'heavy' | 'black';\n  letterSpacing?: number | string;\n  lineHeight?: number | string;\n  maxLines?: number; //?\n  textAlign?: 'left' | 'right' | 'center' | 'justify'; //?\n  textDecoration?: 'line-through' | 'underline' | 'none';\n  textDecorationColor?: string;\n  textDecorationStyle?: \"dashed\" | \"dotted\" | \"solid\" | string; //?\n  textIndent?: any; //?\n  textOverflow?: 'ellipsis';\n  textTransform?: 'capitalize' | 'lowercase' | 'uppercase';\n\n  // Sizing/positioning\n\n  objectFit?: string;\n  objectPosition?: number | string;\n  objectPositionX?: number | string;\n  objectPositionY?: number | string;\n\n  // Margin/padding\n\n  margin?: number | string;\n  marginHorizontal?: number | string;\n  marginVertical?: number | string;\n  marginTop?: number | string;\n  marginRight?: number | string;\n  marginBottom?: number | string;\n  marginLeft?: number | string;\n  padding?: number | string;\n  paddingHorizontal?: number | string;\n  paddingVertical?: number | string;\n  paddingTop?: number | string;\n  paddingRight?: number | string;\n  paddingBottom?: number | string;\n  paddingLeft?: number | string;\n\n  // Transformations\n\n  transform?: string;\n  transformOrigin?: number | string;\n  transformOriginX?: number | string;\n  transformOriginY?: number | string;\n\n  // Borders\n\n  border?: number | string;\n  borderWidth?: number;\n  borderColor?: string;\n  borderStyle?: \"dashed\" | \"dotted\" | \"solid\";\n  borderTop?: number | string;\n  borderTopColor?: string;\n  borderTopStyle?: \"dashed\" | \"dotted\" | \"solid\"; // ?\n  borderTopWidth?: number | string;\n  borderRight?: number | string;\n  borderRightColor?: string;\n  borderRightStyle?: \"dashed\" | \"dotted\" | \"solid\"; //?\n  borderRightWidth?: number | string;\n  borderBottom?: number | string;\n  borderBottomColor?: string;\n  borderBottomStyle?: \"dashed\" | \"dotted\" | \"solid\"; //?\n  borderBottomWidth?: number | string;\n  borderLeft?: number | string;\n  borderLeftColor?: string;\n  borderLeftStyle?: \"dashed\" | \"dotted\" | \"solid\"; //?\n  borderLeftWidth?: number | string;\n  borderTopLeftRadius?: number | string;\n  borderTopRightRadius?: number | string;\n  borderBottomRightRadius?: number | string;\n  borderBottomLeftRadius?: number | string;\n  borderRadius?: number | string\n}\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/types/style.d.ts",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-1341",
    "model_patch": "diff --git a/src/styleProcessor.js b/src/styleProcessor.js\n--- a/src/styleProcessor.js\n+++ b/src/styleProcessor.js\n@@ -10,7 +10,12 @@\n   // Other style processing logic...\n \n   if (style.flex) {\n-    const [flexGrow, flexShrink, flexBasis] = style.flex.split(' ');\n+    let flexGrow = 0;\n+    let flexShrink = 1;\n+    let flexBasis = 'auto';\n+\n+    if (typeof style.flex === 'string') {\n+      [flexGrow, flexShrink, flexBasis] = style.flex.split(' ');\n+    } else if (typeof style.flex === 'number') {\n+      flexGrow = style.flex;\n+    }\n \n     style.flexGrow = flexGrow;\n     style.flexShrink = flexShrink;",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 84.71,
      "issue_embedding_time_ms": 84.71,
      "retrieval_time_ms_splade": 17.43,
      "retrieval_time_ms": 17.43,
      "total_retrieval_time_ms": 102.14,
      "generation_time_ms": 2300.29,
      "total_io_time_ms": 2402.43,
      "input_total_token_limit": null,
      "issue_text_tokens": 175,
      "vlm_tokens": 0,
      "retrieved_tokens": 1404,
      "prompt_template_tokens": 505,
      "total_input_prompt_tokens": 2084,
      "output_generated_tokens": 177,
      "total_io_tokens": 2261,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nLatest update 2.0.13 produces a flexbox error when using \\\"flex\\\"\\n**Describe the bug**\\r\\nIf I use the \\\"flex\\\" keyword in css in the latest update it gives me the error \\\"TypeError: value.split is not a function\\\"  (Such as flex:1)\\r\\n\\r\\n**To Reproduce**\\r\\nSteps to reproduce the behavior including code snippet (if applies):\\r\\n1. Use flex keyword in css\\r\\n\\r\\n**Screenshots**\\r\\n![value split is not a function](https://user-images.githubusercontent.com/3676669/119581286-7ec0e880-bd7f-11eb-8eb6-0983bf4c8f45.png)\\r\\n\\r\\n**Desktop (please complete the following information):**\\r\\n - OS: Windows\\r\\n - Browser: Firefox/Chrome\\r\\n - React-pdf version: 2.0.13\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of bug_report.md]\\n---\\nname: Bug report\\nabout: Create a report to help us improve\\ntitle: ''\\nlabels: ''\\nassignees: ''\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior including code snippet (if applies):\\n1. Go to '...'\\n2. Click on '....'\\n3. Scroll down to '....'\\n4. See error\\n\\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n**Screenshots**\\nIf applicable, add screenshots to help explain your problem.\\n\\n**Desktop (please complete the following information):**\\n - OS: [e.g. MacOS, Windows]\\n - Browser [e.g. chrome, safari]\\n - React-pdf version [e.g. v1.1.0]\\n\\n<!-- Love react-pdf? Please consider supporting our collective:\\n\\ud83d\\udc49  https://opencollective.com/react-pdf/donate -->\\n\\n[end of bug_report.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/render\\n\\n> React-pdf render engine\\n\\n## How to install\\n```sh\\nyarn add @react-pdf/render\\n```\\n\\n## How it works\\n\\n```js\\nconst render = require('@react-pdf/render');\\nconst primitives = require('@react-pdf/primitives');\\n\\nconst view = {\\n  type: primitives.View,\\n  style: {\\n    backgroundColor: 'red',\\n    borderTopLeftRadius: 5,\\n    borderTopRightRadius: 10,\\n    borderBottomLeftRadius: 0,\\n    borderBottomRightRadius: 15,\\n    borderTopColor: 'yellow',\\n    borderLeftColor: 'green',\\n    borderBottomColor: 'black',\\n    borderRightColor: 'purple',\\n  },\\n  box: {\\n    left: 20,\\n    top: 20,\\n    width: 100,\\n    height: 80,\\n    borderTopWidth: 3,\\n    borderLeftWidth: 2,\\n    borderBottomWidth: 1,\\n    borderRightWidth: 4,\\n  },\\n};\\n\\nconst doc = {\\n  type: primitives.Document,\\n  children: [\\n    {\\n      type: primitives.Page,\\n      box: { width: 400, height: 600 },\\n      children: [view],\\n    },\\n  ],\\n};\\n\\n// Provide your own context\\nconst ctx = createContext();\\n\\nrender.default(ctx, doc);\\n```\\n\\nThis library exports a `render` function that takes two arguments:\\n\\n- *ctx*: This is the target context where the document is going to be rendered. React-pdf currently uses a [pdfkit](https://github.com/react-pdf/pdfkit) document as context, but it can target any other type of structure as long as it signature matches pdfkit API. In the future this will enable rendering documents into muliple formats in addition to PDF.\\n- *node*: Document root node. A node is a nested structure that defines a single element in a document. They are defined by it's `type` and arguments.\\n\\n## Node structure\\n\\nA node represents a single element inside a document. It's mainly defined by it's `type` (mandatory) field in addition to other values to define where that element is positioned inside the document (`box`), how it looks (`style`), how it should behave (`params`) and what sub-nodes it contains (`children`).\\n\\nThe root node must always be of type `DOCUMENT`, containing as many `PAGE` nodes as desired inside it's children field.\\n\\nBare in mind this package does not handle any type of node positioning, inheritance, style transformations or any other layout related logic. It's role is limited to render exactly the node it get's into the provided context. Take this into account when definig styles as `paddingTop`, `paddingLeft` and so on instead of the shortcut `padding`. For layout or styles transformation this project provides separate packages.\\n\\n### node.type\\n\\nMandatory field specifiying the type of the particular node. The full list of types can be found and imported from `@react-pdf/primitives`\\n\\n### node.box\\n\\nDefines bounding box where a particular node is located inside a document\\n\\n- left\\n- top\\n- width\\n- height\\n- paddingTop\\n- paddingLeft\\n- paddingBottom\\n- paddingRight\\n- marginTop\\n- marginLeft\\n- marginBottom\\n- marginRight\\n- borderTopWidth\\n- borderLeftWidth\\n- borderBottomWidth\\n- borderRightWidth\\n\\n### node.style\\n\\nDefines how the node looks like. There are some types of nodes that expect special style values, but generally all support:\\n\\n- color\\n- opacity\\n- overflow\\n- backgroundColor\\n- borderTopLeftRadius\\n- borderTopRightRadius\\n- borderBottomLeftRadius\\n- borderBottomRightRadius\\n- borderTopColor\\n- borderLeftColor\\n- borderBottomColor\\n- borderRightColor\\n- _others..._\\n\\n### node.props\\n\\nSpecific node params needed to render correctly ot behave like certain way. Specially needed for SVG nodes\\n\\n## PDF example\\n\\n```js\\nconst fs = require('fs');\\nconst render = require('@react-pdf/render');\\nconst pdfkit = require('@react-pdf/pdfkit');\\n\\nconst PDFDocument = pdfkit.default;\\n\\nconst ctx = new PDFDocument({ autoFirstPage: false });\\n\\nconst doc = {}; // See above\\n\\nrender.default(ctx, doc);\\n\\nconst stream = fs.createWriteStream('./test.pdf');\\n\\nctx.pipe(stream);\\n```\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/font\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/layout\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/primitives\\n\\n[end of README.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "bug_report.md",
        "README.md",
        "README.md",
        "README.md",
        "README.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "62ec4b36-1585-49a0-895a-0ef0f44bd44e",
        "score": 0.01639344262295082,
        "payload": {
          "text": "---\nname: Bug report\nabout: Create a report to help us improve\ntitle: ''\nlabels: ''\nassignees: ''\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior including code snippet (if applies):\n1. Go to '...'\n2. Click on '....'\n3. Scroll down to '....'\n4. See error\n\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n\n**Screenshots**\nIf applicable, add screenshots to help explain your problem.\n\n**Desktop (please complete the following information):**\n - OS: [e.g. MacOS, Windows]\n - Browser [e.g. chrome, safari]\n - React-pdf version [e.g. v1.1.0]\n\n<!-- Love react-pdf? Please consider supporting our collective:\n\ud83d\udc49  https://opencollective.com/react-pdf/donate -->\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/.github/ISSUE_TEMPLATE/bug_report.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "905a84df-25ec-45dc-b5a6-103e701d6b9d",
        "score": 0.016129032258064516,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/render\n\n> React-pdf render engine\n\n## How to install\n```sh\nyarn add @react-pdf/render\n```\n\n## How it works\n\n```js\nconst render = require('@react-pdf/render');\nconst primitives = require('@react-pdf/primitives');\n\nconst view = {\n  type: primitives.View,\n  style: {\n    backgroundColor: 'red',\n    borderTopLeftRadius: 5,\n    borderTopRightRadius: 10,\n    borderBottomLeftRadius: 0,\n    borderBottomRightRadius: 15,\n    borderTopColor: 'yellow',\n    borderLeftColor: 'green',\n    borderBottomColor: 'black',\n    borderRightColor: 'purple',\n  },\n  box: {\n    left: 20,\n    top: 20,\n    width: 100,\n    height: 80,\n    borderTopWidth: 3,\n    borderLeftWidth: 2,\n    borderBottomWidth: 1,\n    borderRightWidth: 4,\n  },\n};\n\nconst doc = {\n  type: primitives.Document,\n  children: [\n    {\n      type: primitives.Page,\n      box: { width: 400, height: 600 },\n      children: [view],\n    },\n  ],\n};\n\n// Provide your own context\nconst ctx = createContext();\n\nrender.default(ctx, doc);\n```\n\nThis library exports a `render` function that takes two arguments:\n\n- *ctx*: This is the target context where the document is going to be rendered. React-pdf currently uses a [pdfkit](https://github.com/react-pdf/pdfkit) document as context, but it can target any other type of structure as long as it signature matches pdfkit API. In the future this will enable rendering documents into muliple formats in addition to PDF.\n- *node*: Document root node. A node is a nested structure that defines a single element in a document. They are defined by it's `type` and arguments.\n\n## Node structure\n\nA node represents a single element inside a document. It's mainly defined by it's `type` (mandatory) field in addition to other values to define where that element is positioned inside the document (`box`), how it looks (`style`), how it should behave (`params`) and what sub-nodes it contains (`children`).\n\nThe root node must always be of type `DOCUMENT`, containing as many `PAGE` nodes as desired inside it's children field.\n\nBare in mind this package does not handle any type of node positioning, inheritance, style transformations or any other layout related logic. It's role is limited to render exactly the node it get's into the provided context. Take this into account when definig styles as `paddingTop`, `paddingLeft` and so on instead of the shortcut `padding`. For layout or styles transformation this project provides separate packages.\n\n### node.type\n\nMandatory field specifiying the type of the particular node. The full list of types can be found and imported from `@react-pdf/primitives`\n\n### node.box\n\nDefines bounding box where a particular node is located inside a document\n\n- left\n- top\n- width\n- height\n- paddingTop\n- paddingLeft\n- paddingBottom\n- paddingRight\n- marginTop\n- marginLeft\n- marginBottom\n- marginRight\n- borderTopWidth\n- borderLeftWidth\n- borderBottomWidth\n- borderRightWidth\n\n### node.style\n\nDefines how the node looks like. There are some types of nodes that expect special style values, but generally all support:\n\n- color\n- opacity\n- overflow\n- backgroundColor\n- borderTopLeftRadius\n- borderTopRightRadius\n- borderBottomLeftRadius\n- borderBottomRightRadius\n- borderTopColor\n- borderLeftColor\n- borderBottomColor\n- borderRightColor\n- _others..._\n\n### node.props\n\nSpecific node params needed to render correctly ot behave like certain way. Specially needed for SVG nodes\n\n## PDF example\n\n```js\nconst fs = require('fs');\nconst render = require('@react-pdf/render');\nconst pdfkit = require('@react-pdf/pdfkit');\n\nconst PDFDocument = pdfkit.default;\n\nconst ctx = new PDFDocument({ autoFirstPage: false });\n\nconst doc = {}; // See above\n\nrender.default(ctx, doc);\n\nconst stream = fs.createWriteStream('./test.pdf');\n\nctx.pipe(stream);\n```\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/render/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "799dbb5c-a14c-42cb-947e-524fedfdae9e",
        "score": 0.015873015873015872,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/font\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/font/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "11da3cdb-0972-4d99-a5f4-61d31d301721",
        "score": 0.015625,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/layout\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "45796c1e-6dac-4686-adda-fc23c13b75b8",
        "score": 0.015384615384615385,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/primitives\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/primitives/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-1363",
    "model_patch": "diff --git a/src/colors.js b/src/colors.js\nnew file mode 100644\nindex 0000000..e69de29\n--- /dev/null\n+++ b/src/colors.js\n@@ -0,0 +1,50 @@\n+const rgbaToHex = (rgba) => {\n+  const matches = rgba.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+),?\\s*([\\d.]*)?\\)$/);\n+  if (!matches) return rgba;\n+\n+  const r = parseInt(matches[1], 10);\n+  const g = parseInt(matches[2], 10);\n+  const b = parseInt(matches[3], 10);\n+  const a = matches[4] !== undefined ? parseFloat(matches[4]) : 1;\n+\n+  const toHex = (value) => {\n+    const hex = value.toString(16);\n+    return hex.length === 1 ? `0${hex}` : hex;\n+  };\n+\n+  const alphaHex = Math.round(a * 255).toString(16).padStart(2, '0').toUpperCase();\n+\n+  return `#${toHex(r)}${toHex(g)}${toHex(b)}${alphaHex}`;\n+};\n+\n+const transformColors = (styles) => {\n+  const transformed = { ...styles };\n+\n+  Object.keys(transformed).forEach((key) => {\n+    const value = transformed[key];\n+    if (typeof value === 'string' && value.startsWith('rgba')) {\n+      transformed[key] = rgbaToHex(value);\n+    }\n+  });\n+\n+  return transformed;\n+};\n+\n+export default transformColors;\ndiff --git a/src/Fractal.js b/src/Fractal.js\nindex 9b2f3e7..c3b1e2f 100644\n--- a/src/Fractal.js\n+++ b/src/Fractal.js\n@@ -1,6 +1,7 @@\n import React from 'react';\n import { Text, View, StyleSheet } from '@react-pdf/renderer';\n \n+import transformColors from './colors';\n \n const palette = [\n   '#781c81',\n@@ -41,7 +42,7 @@ const Fractal = ({ steps, direction = 'column' }) => {\n   };\n \n   const transformedStyles = transformColors(styles.text);\n-  return (\n+  \n return (\n     <View style={styles[direction]}>\n       <Fractal direction={toggle(direction)} steps={steps - 1} />\n       <View style={fractalStyle}>\n@@ -49,7 +50,7 @@ const Fractal = ({ steps, direction = 'column' }) => {\n       </View>\n     </View>\n   );\n-};\n+};\n \n export default Fractal;\n \ndiff --git a/src/colors.test.js b/src/colors.test.js\nindex 7b4e2d1..c3b1e2f 100644\n--- a/src/colors.test.js\n+++ b/src/colors.test.js\n@@ -1,6 +1,7 @@\n import transformColors from '../src/colors';\n \n describe('colors conversion', () => {\n+  test('Should transform rgba to hexa with alpha', () => {\n+    const styles = transformColors({ color: 'rgba(0, 255, 0, 0.5)' });\n+\n+    expect(styles.color).toBe('#00FF0080');\n+  });\n });",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 57.22,
      "issue_embedding_time_ms": 57.22,
      "retrieval_time_ms_splade": 15.05,
      "retrieval_time_ms": 15.05,
      "total_retrieval_time_ms": 72.27,
      "generation_time_ms": 6405.59,
      "total_io_time_ms": 6477.86,
      "input_total_token_limit": null,
      "issue_text_tokens": 1855,
      "vlm_tokens": 0,
      "retrieved_tokens": 2244,
      "prompt_template_tokens": 507,
      "total_input_prompt_tokens": 4606,
      "output_generated_tokens": 747,
      "total_io_tokens": 5353,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nRGBA color doesn't work correct in Text component\\n**Describe the bug**\\r\\nhttps://react-pdf.org/repl?code=3187b0760ce02e00408a057025803c450298c0bc300500943807cf805030c00f0022230080b6198531165d400a02180e659a004f003619b006f61622003a0046200099080beed3a72a00d490600ee31a788913e4f6001acf80271008c1280c2204481b00b8600721b7dcde0003000d08484c2c802b0137aaba872695000a860a2c31a4b19c84023c94121418bc66a6938f0003802dd4021b8c002497a216140d8f140f0c129608a768239230120033d80c108c060015860d90d0c81746088c00198f23080422c00592128f089f22cd2c8249621214fa16374c2f4c002c8f18300ecf39e515003d0a5a468947eba03003127f74941442609280dc9e1f1f8026150b0422d158b144a94002898c1cf7041f0783625bdd3acf57bbd517706109166010231e4362c032600047642cd16167701c6ccc545b3de9f4e230106f45be4308c72a2d3958001b92115954ebe2f60723a2cee6e082937a600017a7458301e3409022311d9513c7e513459417be4f8081e2a2ecc04a98d56bd5038c6044ed4c1403616529dcb21800154c09d5703cee87638c1180043fd62a2c9d0553b43c4b0373511043b9506a3327ea33fa865bc30106a421965b40c2b992ed6dea8ce9f32471bf9b12b1a616fbab795b322e37cd470017d8dca8746520d9c98023fdbf6083698ff591c60af8e03ac651fa39461aac6bd7d6b41b3045cd9307bc102060ef218b00ed1ec4ac59d01d72c0f3f4c00880825e460f074be67722acb312982a2c021c26b3e302c1d682091bdec4a74d79ac7a340a3bf446020faa2eac0207eab6ba880f981e1026ca8b764a1aaa84b0b7918328bc9d040580ece01b4e6286e009168601ee12006a2c35be6ab0ae20346291806aa4c630e405a96300389d06cb9b36d8696424d1fa830c4bb11ea06da518203322b87c27872fa5b2d686044909b878e180ae086596326c4680105aca8b04ce52f426aa20ab9a10254f98b01015abd109cb0c05e8fac266c301408c8f04243c7281cdd1b4d18006236120866e1a6a15a4980cdb40763e69a8a68b311dd90caf336ac0e96b96ca8acc9d0d28c985a908c630b243059bc40634a160db047158053020d96927603520000dc419b47e7da36212f6bb88186c482a6ba9f43c09ad1a5cb319add10c249e60e660ca69a2b36ccc8b08c97da4a5c533da09bc0f5603f814566836ab7bc130a6da741482ac776bc4829a57ab63c0adee1de51774d01604876c93040c0395f20b0041da0e145728d8f9bf4330d46d166dc8c5078c89c52c00ea9af5158e6083d2f48c274ff771db794dc913d97e6483058fa74728069d1d590dd8a1975d976de62117cea9648c0f1b861618d5d000972b1b2bc441473d927be2e5038ab45d624d88568a3f382a0968e091890988992fb0dac88b808001c93064cd8aa2a59facc921e012361a1f87b32a2d9474222f0023eaaa110d8290783e600018002412307181874cacc51f7c3029769e1c99c36aa217a281051dc9280604a0c0df27b3f137008fc74030cc2b0ec0109b59064095e0140b20b27c055980d8f1c70eb1b342178de000f2103e887128de02d940407336f3b1405039410078df37cab1cf721f0847e4c02c8a0230df040df16c07c884a1be22a0008c00199be0004d000fa4900034b680006c2000007000751008a9e40c6250a03181408001a001387800041121b20afaac6f06407394f320678211427d4b8000328071613b03006079e24c303b40c06bd282281505e02439c45c4a09421e248201ca1785019104fa70091522c01f000042e81b2a302f008314788fb4aa2f800009092015ba888791fa3282a8251f910a060511e711fab01614808d23898000098000b128ca0980d2090910674c036f600ec56631f67173c4aa9d1105bc7c1ef7fe47c382d88e018ca03f1784623340b8a806e23c5786015e3fc56554850182684f099126c344cd042cfc0ae4d157d191781f1210d25289c87900a188271792e7a14cf1c0390594c694bcc24c0129653f25c4cdedbd9261f6a1362ec4548196298924ce29a52626b8f71232fc79c409952425f0299de196a5a558421ea670399f131277824832c1b0005a0004a394c00ac980e93280cb7e09e37266ca69601b42cc37e8718a758d059334c795731e9d8a6044e9ab238270fb4b30366507c9c327678cad9cd2b45b4ef168b3809caa9e726a70e3a9653613b86deb60302dca51ff31385764e393c456c028481c036f5cadb140a603b9b8a8641c825e71142b49d130140792ca0621561402f08ab5299d4be6aaca652b39172226d2b15c24e1132964acaba4d0c9ed3c3e5f0e00500b80d012a0bc63aaf2a0970d02605eec40ad500000\\r\\n\\r\\n**Expected behavior**\\r\\nWhen setting color or backgroundColor (rgba) for Text component, I want color to work the same as View component\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/19285404/120582712-23fe4f80-c457-11eb-871b-d0029dfc245f.png)\\r\\n\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/render\\n\\n> React-pdf render engine\\n\\n## How to install\\n```sh\\nyarn add @react-pdf/render\\n```\\n\\n## How it works\\n\\n```js\\nconst render = require('@react-pdf/render');\\nconst primitives = require('@react-pdf/primitives');\\n\\nconst view = {\\n  type: primitives.View,\\n  style: {\\n    backgroundColor: 'red',\\n    borderTopLeftRadius: 5,\\n    borderTopRightRadius: 10,\\n    borderBottomLeftRadius: 0,\\n    borderBottomRightRadius: 15,\\n    borderTopColor: 'yellow',\\n    borderLeftColor: 'green',\\n    borderBottomColor: 'black',\\n    borderRightColor: 'purple',\\n  },\\n  box: {\\n    left: 20,\\n    top: 20,\\n    width: 100,\\n    height: 80,\\n    borderTopWidth: 3,\\n    borderLeftWidth: 2,\\n    borderBottomWidth: 1,\\n    borderRightWidth: 4,\\n  },\\n};\\n\\nconst doc = {\\n  type: primitives.Document,\\n  children: [\\n    {\\n      type: primitives.Page,\\n      box: { width: 400, height: 600 },\\n      children: [view],\\n    },\\n  ],\\n};\\n\\n// Provide your own context\\nconst ctx = createContext();\\n\\nrender.default(ctx, doc);\\n```\\n\\nThis library exports a `render` function that takes two arguments:\\n\\n- *ctx*: This is the target context where the document is going to be rendered. React-pdf currently uses a [pdfkit](https://github.com/react-pdf/pdfkit) document as context, but it can target any other type of structure as long as it signature matches pdfkit API. In the future this will enable rendering documents into muliple formats in addition to PDF.\\n- *node*: Document root node. A node is a nested structure that defines a single element in a document. They are defined by it's `type` and arguments.\\n\\n## Node structure\\n\\nA node represents a single element inside a document. It's mainly defined by it's `type` (mandatory) field in addition to other values to define where that element is positioned inside the document (`box`), how it looks (`style`), how it should behave (`params`) and what sub-nodes it contains (`children`).\\n\\nThe root node must always be of type `DOCUMENT`, containing as many `PAGE` nodes as desired inside it's children field.\\n\\nBare in mind this package does not handle any type of node positioning, inheritance, style transformations or any other layout related logic. It's role is limited to render exactly the node it get's into the provided context. Take this into account when definig styles as `paddingTop`, `paddingLeft` and so on instead of the shortcut `padding`. For layout or styles transformation this project provides separate packages.\\n\\n### node.type\\n\\nMandatory field specifiying the type of the particular node. The full list of types can be found and imported from `@react-pdf/primitives`\\n\\n### node.box\\n\\nDefines bounding box where a particular node is located inside a document\\n\\n- left\\n- top\\n- width\\n- height\\n- paddingTop\\n- paddingLeft\\n- paddingBottom\\n- paddingRight\\n- marginTop\\n- marginLeft\\n- marginBottom\\n- marginRight\\n- borderTopWidth\\n- borderLeftWidth\\n- borderBottomWidth\\n- borderRightWidth\\n\\n### node.style\\n\\nDefines how the node looks like. There are some types of nodes that expect special style values, but generally all support:\\n\\n- color\\n- opacity\\n- overflow\\n- backgroundColor\\n- borderTopLeftRadius\\n- borderTopRightRadius\\n- borderBottomLeftRadius\\n- borderBottomRightRadius\\n- borderTopColor\\n- borderLeftColor\\n- borderBottomColor\\n- borderRightColor\\n- _others..._\\n\\n### node.props\\n\\nSpecific node params needed to render correctly ot behave like certain way. Specially needed for SVG nodes\\n\\n## PDF example\\n\\n```js\\nconst fs = require('fs');\\nconst render = require('@react-pdf/render');\\nconst pdfkit = require('@react-pdf/pdfkit');\\n\\nconst PDFDocument = pdfkit.default;\\n\\nconst ctx = new PDFDocument({ autoFirstPage: false });\\n\\nconst doc = {}; // See above\\n\\nrender.default(ctx, doc);\\n\\nconst stream = fs.createWriteStream('./test.pdf');\\n\\nctx.pipe(stream);\\n```\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/stylesheet\\n\\n> React-pdf styles engine\\n\\n## How to install\\n\\n```sh\\nyarn add @react-pdf/stylesheet\\n```\\n\\n## How it works\\n\\n```js\\nconst stylesheet = require('@react-pdf/stylesheet');\\n\\nconst container = {\\n  width: 400,\\n  height: 600,\\n  orientation: 'portrait',\\n};\\n\\nconst style = {\\n  margin: 20,\\n  width: '50vw',\\n  height: '20vh',\\n  borderRadius: 5,\\n  fontWeight: 'semibold',\\n  borderBottom: '2 solid yellow',\\n  '@media max-width: 500': {\\n    backgroundColor: 'rgb(255, 0, 0)',\\n  },\\n};\\n\\nconst computed = stylesheet(container, style);\\n\\n// Computed\\n// {\\n//   width: 200,\\n//   height: 120,\\n//   marginTop: 20,\\n//   marginLeft: 20,\\n//   marginRight: 20,\\n//   marginBottom: 20,\\n//   marginBottom: 20,\\n//   borderTopLeftRadius: 5,\\n//   borderTopRightRadius: 5,\\n//   borderBottomLeftRadius: 5,\\n//   borderBottomRightRadius: 5,\\n//   fontWeight: 600,\\n//   borderBottomWidth: 2,\\n//   borderBottomStyle: 'solid',\\n//   borderBottomColor: 'yellow',\\n//   backgroundColor: '#FF0000'\\n// }\\n```\\n\\nThis library exports a `stylesheet` function that takes two arguments:\\n\\n- _container_: Container where the styles are being computed into. It specifies the `width` and `height` in points (needed for media queries and unit conversions), and optionally the container `orientation` (needed for certain media queries).\\n- _style_: Style to be computed. JS object with raw styles that you would like to get in a normalized format.\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[end of README.md]\\n[start of Fractal.js]\\nimport React from 'react';\\nimport { Text, View, StyleSheet } from '@react-pdf/renderer';\\n\\nconst palette = [\\n  '#781c81',\\n  '#521b80',\\n  '#442f8b',\\n  '#3f4c9f',\\n  '#4069b4',\\n  '#4582c1',\\n  '#4e96bd',\\n  '#5aa6a9',\\n  '#68b090',\\n  '#7ab878',\\n  '#8dbc64',\\n  '#a2be56',\\n  '#b7bd4b',\\n  '#c9b843',\\n  '#d8ae3d',\\n  '#e29e37',\\n  '#e78632',\\n  '#e6672d',\\n  '#e14427',\\n  '#d92120',\\n];\\n\\nconst styles = StyleSheet.create({\\n  row: {\\n    flexGrow: 1,\\n    width: '100%',\\n    flexDirection: 'row',\\n  },\\n  column: {\\n    flexGrow: 1,\\n    height: '100%',\\n    flexDirection: 'column',\\n  },\\n  text: {\\n    margin: 10,\\n    fontSize: 10,\\n    color: 'white',\\n  },\\n});\\n\\nconst toggle = direction => (direction === 'column' ? 'row' : 'column');\\n\\nconst Fractal = ({ steps, direction = 'column' }) => {\\n  if (steps === 0) {\\n    return null;\\n  }\\n\\n  const fractalStyle = {\\n    flexGrow: 1,\\n    minWidth: 40,\\n    minHeight: 40,\\n    alignItems: 'center',\\n    justifyContent: 'center',\\n    backgroundColor: palette[steps % palette.length],\\n  };\\n\\n  return (\\n    <View style={styles[direction]}>\\n      <Fractal direction={toggle(direction)} steps={steps - 1} />\\n      <View style={fractalStyle}>\\n        <Text style={styles.text}>{steps}</Text>\\n      </View>\\n    </View>\\n  );\\n};\\n\\nexport default Fractal;\\n\\n[end of Fractal.js]\\n[start of colors.test.js]\\nimport transformColors from '../src/colors';\\n\\ndescribe('colors conversion', () => {\\n  test('Should keep hex values as they are', () => {\\n    const styles = transformColors({ color: '#0000FF' });\\n\\n    expect(styles.color).toBe('#0000FF');\\n  });\\n\\n  test('Should transform rgb to hexa', () => {\\n    const styles = transformColors({ color: 'rgb(255, 0, 0)' });\\n\\n    expect(styles.color).toBe('#FF0000');\\n  });\\n\\n  test('Should transform rgba to hexa', () => {\\n    const styles = transformColors({ color: 'rgba(0, 255, 0, 0.5)' });\\n\\n    expect(styles.color).toBe('#00FF0080');\\n  });\\n\\n  test('Should transform hsl to hexa', () => {\\n    const styles = transformColors({ color: 'hsl(0, 100%, 50%)' });\\n\\n    expect(styles.color).toBe('#FF0000');\\n  });\\n\\n  test('Should transform hsla to hexa', () => {\\n    const styles = transformColors({ color: 'hsla(0, 100%, 50%, 0.5)' });\\n\\n    expect(styles.color).toBe('#FF0000');\\n  });\\n\\n  test('Should any matching style attribute', () => {\\n    const styles = transformColors({ backgroundColor: 'rgb(255, 0, 0)' });\\n\\n    expect(styles.backgroundColor).toBe('#FF0000');\\n  });\\n});\\n\\n[end of colors.test.js]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/font\\n\\n[end of README.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "README.md",
        "README.md",
        "Fractal.js",
        "colors.test.js",
        "README.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "905a84df-25ec-45dc-b5a6-103e701d6b9d",
        "score": 0.01639344262295082,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/render\n\n> React-pdf render engine\n\n## How to install\n```sh\nyarn add @react-pdf/render\n```\n\n## How it works\n\n```js\nconst render = require('@react-pdf/render');\nconst primitives = require('@react-pdf/primitives');\n\nconst view = {\n  type: primitives.View,\n  style: {\n    backgroundColor: 'red',\n    borderTopLeftRadius: 5,\n    borderTopRightRadius: 10,\n    borderBottomLeftRadius: 0,\n    borderBottomRightRadius: 15,\n    borderTopColor: 'yellow',\n    borderLeftColor: 'green',\n    borderBottomColor: 'black',\n    borderRightColor: 'purple',\n  },\n  box: {\n    left: 20,\n    top: 20,\n    width: 100,\n    height: 80,\n    borderTopWidth: 3,\n    borderLeftWidth: 2,\n    borderBottomWidth: 1,\n    borderRightWidth: 4,\n  },\n};\n\nconst doc = {\n  type: primitives.Document,\n  children: [\n    {\n      type: primitives.Page,\n      box: { width: 400, height: 600 },\n      children: [view],\n    },\n  ],\n};\n\n// Provide your own context\nconst ctx = createContext();\n\nrender.default(ctx, doc);\n```\n\nThis library exports a `render` function that takes two arguments:\n\n- *ctx*: This is the target context where the document is going to be rendered. React-pdf currently uses a [pdfkit](https://github.com/react-pdf/pdfkit) document as context, but it can target any other type of structure as long as it signature matches pdfkit API. In the future this will enable rendering documents into muliple formats in addition to PDF.\n- *node*: Document root node. A node is a nested structure that defines a single element in a document. They are defined by it's `type` and arguments.\n\n## Node structure\n\nA node represents a single element inside a document. It's mainly defined by it's `type` (mandatory) field in addition to other values to define where that element is positioned inside the document (`box`), how it looks (`style`), how it should behave (`params`) and what sub-nodes it contains (`children`).\n\nThe root node must always be of type `DOCUMENT`, containing as many `PAGE` nodes as desired inside it's children field.\n\nBare in mind this package does not handle any type of node positioning, inheritance, style transformations or any other layout related logic. It's role is limited to render exactly the node it get's into the provided context. Take this into account when definig styles as `paddingTop`, `paddingLeft` and so on instead of the shortcut `padding`. For layout or styles transformation this project provides separate packages.\n\n### node.type\n\nMandatory field specifiying the type of the particular node. The full list of types can be found and imported from `@react-pdf/primitives`\n\n### node.box\n\nDefines bounding box where a particular node is located inside a document\n\n- left\n- top\n- width\n- height\n- paddingTop\n- paddingLeft\n- paddingBottom\n- paddingRight\n- marginTop\n- marginLeft\n- marginBottom\n- marginRight\n- borderTopWidth\n- borderLeftWidth\n- borderBottomWidth\n- borderRightWidth\n\n### node.style\n\nDefines how the node looks like. There are some types of nodes that expect special style values, but generally all support:\n\n- color\n- opacity\n- overflow\n- backgroundColor\n- borderTopLeftRadius\n- borderTopRightRadius\n- borderBottomLeftRadius\n- borderBottomRightRadius\n- borderTopColor\n- borderLeftColor\n- borderBottomColor\n- borderRightColor\n- _others..._\n\n### node.props\n\nSpecific node params needed to render correctly ot behave like certain way. Specially needed for SVG nodes\n\n## PDF example\n\n```js\nconst fs = require('fs');\nconst render = require('@react-pdf/render');\nconst pdfkit = require('@react-pdf/pdfkit');\n\nconst PDFDocument = pdfkit.default;\n\nconst ctx = new PDFDocument({ autoFirstPage: false });\n\nconst doc = {}; // See above\n\nrender.default(ctx, doc);\n\nconst stream = fs.createWriteStream('./test.pdf');\n\nctx.pipe(stream);\n```\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/render/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "16b0166a-fd2c-4999-b8f8-9ba912d98e6b",
        "score": 0.016129032258064516,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/stylesheet\n\n> React-pdf styles engine\n\n## How to install\n\n```sh\nyarn add @react-pdf/stylesheet\n```\n\n## How it works\n\n```js\nconst stylesheet = require('@react-pdf/stylesheet');\n\nconst container = {\n  width: 400,\n  height: 600,\n  orientation: 'portrait',\n};\n\nconst style = {\n  margin: 20,\n  width: '50vw',\n  height: '20vh',\n  borderRadius: 5,\n  fontWeight: 'semibold',\n  borderBottom: '2 solid yellow',\n  '@media max-width: 500': {\n    backgroundColor: 'rgb(255, 0, 0)',\n  },\n};\n\nconst computed = stylesheet(container, style);\n\n// Computed\n// {\n//   width: 200,\n//   height: 120,\n//   marginTop: 20,\n//   marginLeft: 20,\n//   marginRight: 20,\n//   marginBottom: 20,\n//   marginBottom: 20,\n//   borderTopLeftRadius: 5,\n//   borderTopRightRadius: 5,\n//   borderBottomLeftRadius: 5,\n//   borderBottomRightRadius: 5,\n//   fontWeight: 600,\n//   borderBottomWidth: 2,\n//   borderBottomStyle: 'solid',\n//   borderBottomColor: 'yellow',\n//   backgroundColor: '#FF0000'\n// }\n```\n\nThis library exports a `stylesheet` function that takes two arguments:\n\n- _container_: Container where the styles are being computed into. It specifies the `width` and `height` in points (needed for media queries and unit conversions), and optionally the container `orientation` (needed for certain media queries).\n- _style_: Style to be computed. JS object with raw styles that you would like to get in a normalized format.\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/stylesheet/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "e9126bb4-0527-4cb1-984e-b5af9c3707c6",
        "score": 0.015873015873015872,
        "payload": {
          "text": "import React from 'react';\nimport { Text, View, StyleSheet } from '@react-pdf/renderer';\n\nconst palette = [\n  '#781c81',\n  '#521b80',\n  '#442f8b',\n  '#3f4c9f',\n  '#4069b4',\n  '#4582c1',\n  '#4e96bd',\n  '#5aa6a9',\n  '#68b090',\n  '#7ab878',\n  '#8dbc64',\n  '#a2be56',\n  '#b7bd4b',\n  '#c9b843',\n  '#d8ae3d',\n  '#e29e37',\n  '#e78632',\n  '#e6672d',\n  '#e14427',\n  '#d92120',\n];\n\nconst styles = StyleSheet.create({\n  row: {\n    flexGrow: 1,\n    width: '100%',\n    flexDirection: 'row',\n  },\n  column: {\n    flexGrow: 1,\n    height: '100%',\n    flexDirection: 'column',\n  },\n  text: {\n    margin: 10,\n    fontSize: 10,\n    color: 'white',\n  },\n});\n\nconst toggle = direction => (direction === 'column' ? 'row' : 'column');\n\nconst Fractal = ({ steps, direction = 'column' }) => {\n  if (steps === 0) {\n    return null;\n  }\n\n  const fractalStyle = {\n    flexGrow: 1,\n    minWidth: 40,\n    minHeight: 40,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: palette[steps % palette.length],\n  };\n\n  return (\n    <View style={styles[direction]}>\n      <Fractal direction={toggle(direction)} steps={steps - 1} />\n      <View style={fractalStyle}>\n        <Text style={styles.text}>{steps}</Text>\n      </View>\n    </View>\n  );\n};\n\nexport default Fractal;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/examples/src/fractals/Fractal.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "43bad28e-30b4-447a-a895-a0f7ba8d4b6d",
        "score": 0.015625,
        "payload": {
          "text": "import transformColors from '../src/colors';\n\ndescribe('colors conversion', () => {\n  test('Should keep hex values as they are', () => {\n    const styles = transformColors({ color: '#0000FF' });\n\n    expect(styles.color).toBe('#0000FF');\n  });\n\n  test('Should transform rgb to hexa', () => {\n    const styles = transformColors({ color: 'rgb(255, 0, 0)' });\n\n    expect(styles.color).toBe('#FF0000');\n  });\n\n  test('Should transform rgba to hexa', () => {\n    const styles = transformColors({ color: 'rgba(0, 255, 0, 0.5)' });\n\n    expect(styles.color).toBe('#00FF0080');\n  });\n\n  test('Should transform hsl to hexa', () => {\n    const styles = transformColors({ color: 'hsl(0, 100%, 50%)' });\n\n    expect(styles.color).toBe('#FF0000');\n  });\n\n  test('Should transform hsla to hexa', () => {\n    const styles = transformColors({ color: 'hsla(0, 100%, 50%, 0.5)' });\n\n    expect(styles.color).toBe('#FF0000');\n  });\n\n  test('Should any matching style attribute', () => {\n    const styles = transformColors({ backgroundColor: 'rgb(255, 0, 0)' });\n\n    expect(styles.backgroundColor).toBe('#FF0000');\n  });\n});\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/stylesheet/tests/colors.test.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "799dbb5c-a14c-42cb-947e-524fedfdae9e",
        "score": 0.015384615384615385,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/font\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/font/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-1285",
    "model_patch": "diff --git a/file.js b/file.js\n--- a/file.js\n+++ b/file.js\n@@ -10,7 +10,7 @@\n \n function renderPDF(data) {\n   // Deprecated Buffer() usage\n-  const buffer = new Buffer(data, 'base64');\n+  const buffer = Buffer.from(data, 'base64');\n \n   // PDF rendering logic\n   // ...",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 109.5,
      "issue_embedding_time_ms": 109.5,
      "retrieval_time_ms_splade": 19.8,
      "retrieval_time_ms": 19.8,
      "total_retrieval_time_ms": 129.3,
      "generation_time_ms": 1398.78,
      "total_io_time_ms": 1528.08,
      "input_total_token_limit": null,
      "issue_text_tokens": 212,
      "vlm_tokens": 0,
      "retrieved_tokens": 7758,
      "prompt_template_tokens": 506,
      "total_input_prompt_tokens": 8476,
      "output_generated_tokens": 85,
      "total_io_tokens": 8561,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nNode DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.\\n**Describe the bug**\\r\\n\\r\\nA depreciation warning about `Buffer()` is shown when a pdf has been rendered. In the future `Node` versions, `Buffer()` will be removed. Which will broke the rendering process.\\r\\n\\r\\n**To Reproduce**\\r\\n\\r\\nHave `Node` `v10.15.3` or more.\\r\\n\\r\\n1. Render a new pdf.\\r\\n2. Open the browser console.\\r\\n3. See the warning.\\r\\n\\r\\n**Screenshots**\\r\\n![Untitled](https://user-images.githubusercontent.com/31422467/57094611-f5917180-6cde-11e9-9274-287aa4778cd8.png)\\r\\n\\r\\n**Desktop:**\\r\\n - OS: Windows\\r\\n - Browser: Chromium (Electron)\\r\\n - @react-pdf/renderer: 1.5.4,\\r\\n - @react-pdf/styled-components: 1.4.0\\n\\n</issue>\\n\\n<code>\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/render\\n\\n> React-pdf render engine\\n\\n## How to install\\n```sh\\nyarn add @react-pdf/render\\n```\\n\\n## How it works\\n\\n```js\\nconst render = require('@react-pdf/render');\\nconst primitives = require('@react-pdf/primitives');\\n\\nconst view = {\\n  type: primitives.View,\\n  style: {\\n    backgroundColor: 'red',\\n    borderTopLeftRadius: 5,\\n    borderTopRightRadius: 10,\\n    borderBottomLeftRadius: 0,\\n    borderBottomRightRadius: 15,\\n    borderTopColor: 'yellow',\\n    borderLeftColor: 'green',\\n    borderBottomColor: 'black',\\n    borderRightColor: 'purple',\\n  },\\n  box: {\\n    left: 20,\\n    top: 20,\\n    width: 100,\\n    height: 80,\\n    borderTopWidth: 3,\\n    borderLeftWidth: 2,\\n    borderBottomWidth: 1,\\n    borderRightWidth: 4,\\n  },\\n};\\n\\nconst doc = {\\n  type: primitives.Document,\\n  children: [\\n    {\\n      type: primitives.Page,\\n      box: { width: 400, height: 600 },\\n      children: [view],\\n    },\\n  ],\\n};\\n\\n// Provide your own context\\nconst ctx = createContext();\\n\\nrender.default(ctx, doc);\\n```\\n\\nThis library exports a `render` function that takes two arguments:\\n\\n- *ctx*: This is the target context where the document is going to be rendered. React-pdf currently uses a [pdfkit](https://github.com/react-pdf/pdfkit) document as context, but it can target any other type of structure as long as it signature matches pdfkit API. In the future this will enable rendering documents into muliple formats in addition to PDF.\\n- *node*: Document root node. A node is a nested structure that defines a single element in a document. They are defined by it's `type` and arguments.\\n\\n## Node structure\\n\\nA node represents a single element inside a document. It's mainly defined by it's `type` (mandatory) field in addition to other values to define where that element is positioned inside the document (`box`), how it looks (`style`), how it should behave (`params`) and what sub-nodes it contains (`children`).\\n\\nThe root node must always be of type `DOCUMENT`, containing as many `PAGE` nodes as desired inside it's children field.\\n\\nBare in mind this package does not handle any type of node positioning, inheritance, style transformations or any other layout related logic. It's role is limited to render exactly the node it get's into the provided context. Take this into account when definig styles as `paddingTop`, `paddingLeft` and so on instead of the shortcut `padding`. For layout or styles transformation this project provides separate packages.\\n\\n### node.type\\n\\nMandatory field specifiying the type of the particular node. The full list of types can be found and imported from `@react-pdf/primitives`\\n\\n### node.box\\n\\nDefines bounding box where a particular node is located inside a document\\n\\n- left\\n- top\\n- width\\n- height\\n- paddingTop\\n- paddingLeft\\n- paddingBottom\\n- paddingRight\\n- marginTop\\n- marginLeft\\n- marginBottom\\n- marginRight\\n- borderTopWidth\\n- borderLeftWidth\\n- borderBottomWidth\\n- borderRightWidth\\n\\n### node.style\\n\\nDefines how the node looks like. There are some types of nodes that expect special style values, but generally all support:\\n\\n- color\\n- opacity\\n- overflow\\n- backgroundColor\\n- borderTopLeftRadius\\n- borderTopRightRadius\\n- borderBottomLeftRadius\\n- borderBottomRightRadius\\n- borderTopColor\\n- borderLeftColor\\n- borderBottomColor\\n- borderRightColor\\n- _others..._\\n\\n### node.props\\n\\nSpecific node params needed to render correctly ot behave like certain way. Specially needed for SVG nodes\\n\\n## PDF example\\n\\n```js\\nconst fs = require('fs');\\nconst render = require('@react-pdf/render');\\nconst pdfkit = require('@react-pdf/pdfkit');\\n\\nconst PDFDocument = pdfkit.default;\\n\\nconst ctx = new PDFDocument({ autoFirstPage: false });\\n\\nconst doc = {}; // See above\\n\\nrender.default(ctx, doc);\\n\\nconst stream = fs.createWriteStream('./test.pdf');\\n\\nctx.pipe(stream);\\n```\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n  <p align=\\\"center\\\">React renderer for creating PDF files on the browser and server<p>\\n  <p align=\\\"center\\\">\\n    <a href=\\\"https://www.npmjs.com/package/@react-pdf/renderer\\\">\\n      <img src=\\\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\\\" />\\n    </a>\\n    <a href=\\\"https://travis-ci.org/diegomura/react-pdf\\\">\\n      <img src=\\\"https://img.shields.io/travis/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\\\">\\n      <img src=\\\"https://img.shields.io/github/license/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/prettier/prettier\\\">\\n      <img src=\\\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\\\" />\\n    </a>\\n    <a href=\\\"https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_shield\\\" alt=\\\"FOSSA Status\\\"><img src=\\\"https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=shield\\\"/></a>\\n  </p>\\n</p>\\n\\n> New react-pdf 2.0 was relesed. [Read about the announcement](http://react-pdf.org/blog/announcing-react-pdf-v2)\\n\\n## Lost?\\n\\nThis package is used to _create_ PDFs using React. If you wish to _display_ existing PDFs, you may be looking for [react-pdf](https://github.com/wojtekmaj/react-pdf).\\n\\n## How to install\\n```sh\\nyarn add @react-pdf/renderer\\n```\\n\\n## How it works\\n\\n```jsx\\nimport React from 'react';\\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\\n\\n// Create styles\\nconst styles = StyleSheet.create({\\n  page: {\\n    flexDirection: 'row',\\n    backgroundColor: '#E4E4E4'\\n  },\\n  section: {\\n    margin: 10,\\n    padding: 10,\\n    flexGrow: 1\\n  }\\n});\\n\\n// Create Document Component\\nconst MyDocument = () => (\\n  <Document>\\n    <Page size=\\\"A4\\\" style={styles.page}>\\n      <View style={styles.section}>\\n        <Text>Section #1</Text>\\n      </View>\\n      <View style={styles.section}>\\n        <Text>Section #2</Text>\\n      </View>\\n    </Page>\\n  </Document>\\n);\\n```\\n\\n### `Web.` Render in DOM\\n```jsx\\nimport React from 'react';\\nimport ReactDOM from 'react-dom';\\nimport { PDFViewer } from '@react-pdf/renderer';\\n\\nconst App = () => (\\n  <PDFViewer>\\n    <MyDocument />\\n  </PDFViewer>\\n);\\n\\nReactDOM.render(<App />, document.getElementById('root'));\\n```\\n\\n### `Node.` Save in a file\\n```jsx\\nimport React from 'react';\\nimport ReactPDF from '@react-pdf/renderer';\\n\\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\\n```\\n\\n## Contributors\\n\\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\\n<a href=\\\"https://github.com/diegomura/react-pdf/graphs/contributors\\\"><img src=\\\"https://opencollective.com/react-pdf/contributors.svg?width=890\\\" /></a>\\n\\n## Sponsors\\n\\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#sponsors\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/sponsors.svg?width=890\\\"></a>\\n\\n## Backers\\n\\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#backers\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/backers.svg?width=890\\\"></a>\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_large)\\n\\n---\\n![](https://img.shields.io/npm/dt/@react-pdf/renderer.svg?style=flat)\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n  <p align=\\\"center\\\">React renderer for creating PDF files on the browser and server<p>\\n  <p align=\\\"center\\\">\\n    <a href=\\\"https://www.npmjs.com/package/@react-pdf/renderer\\\">\\n      <img src=\\\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\\\" />\\n    </a>\\n    <a href=\\\"https://travis-ci.org/diegomura/react-pdf\\\">\\n      <img src=\\\"https://img.shields.io/travis/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\\\">\\n      <img src=\\\"https://img.shields.io/github/license/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://spectrum.chat/react-pdf\\\">\\n      <img src=\\\"https://withspectrum.github.io/badge/badge.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/prettier/prettier\\\">\\n      <img src=\\\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\\\" />\\n    </a>\\n    <a href=\\\"https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_shield\\\" alt=\\\"FOSSA Status\\\"><img src=\\\"https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=shield\\\"/></a>\\n  </p>\\n</p>\\n\\n## How to install\\n```sh\\nyarn add @react-pdf/renderer\\n```\\n\\n## How it works\\n\\n```jsx\\nimport React from 'react';\\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\\n\\n// Create styles\\nconst styles = StyleSheet.create({\\n  page: {\\n    flexDirection: 'row',\\n    backgroundColor: '#E4E4E4'\\n  },\\n  section: {\\n    margin: 10,\\n    padding: 10,\\n    flexGrow: 1\\n  }\\n});\\n\\n// Create Document Component\\nconst MyDocument = () => (\\n  <Document>\\n    <Page size=\\\"A4\\\" style={styles.page}>\\n      <View style={styles.section}>\\n        <Text>Section #1</Text>\\n      </View>\\n      <View style={styles.section}>\\n        <Text>Section #2</Text>\\n      </View>\\n    </Page>\\n  </Document>\\n);\\n```\\n\\n### `Web.` Render in DOM\\n```jsx\\nimport React from 'react';\\nimport ReactDOM from 'react-dom';\\nimport { PDFViewer } from '@react-pdf/renderer';\\n\\nconst App = () => (\\n  <PDFViewer>\\n    <MyDocument />\\n  </PDFViewer>\\n);\\n\\nReactDOM.render(<App />, document.getElementById('root'));\\n```\\n\\n### `Node.` Save in a file\\n```jsx\\nimport React from 'react';\\nimport ReactPDF from '@react-pdf/renderer';\\n\\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\\n```\\n\\n## Examples\\nFor each example, try opening `output.pdf` to see the result.\\n\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/text/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/text/\\\">Text</a>\\n      </td>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/resume/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/resume/\\\">Resume</a>\\n\\t\\t\\t</td>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/fractals/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/fractals/\\\">Fractals</a>\\n\\t\\t\\t</td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/knobs/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/knobs/\\\">Knobs</a>\\n\\t\\t\\t</td>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/pageWrap/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/pageWrap/\\\">Page wrap</a>\\n      </td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n\\n## Contributors\\n\\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\\n<a href=\\\"https://github.com/diegomura/react-pdf/graphs/contributors\\\"><img src=\\\"https://opencollective.com/react-pdf/contributors.svg?width=890\\\" /></a>\\n\\n## Sponsors\\n\\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#sponsors\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/sponsors.svg?width=890\\\"></a>\\n\\n## Backers\\n\\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#backers\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/backers.svg?width=890\\\"></a>\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_large)\\n\\n---\\n![](https://img.shields.io/npm/dt/@react-pdf/renderer.svg?style=flat)\\n\\n[end of README.md]\\n[start of index.d.ts]\\ndeclare module '@react-pdf/renderer' {\\n  import * as React from 'react';\\n  import {\\n    Style,\\n    PageSize,\\n    FontStore,\\n    Orientation,\\n    SourceObject,\\n    HyphenationCallback,\\n    SVGPresentationAttributes,\\n  } from '@react-pdf/types';\\n\\n  namespace ReactPDF {\\n    interface Styles {\\n      [key: string]: Style;\\n    }\\n\\n    interface OnRenderProps {\\n      blob?: Blob;\\n    }\\n\\n    interface DocumentProps {\\n      title?: string;\\n      author?: string;\\n      subject?: string;\\n      keywords?: string;\\n      creator?: string;\\n      producer?: string;\\n      onRender?: (props: OnRenderProps) => any;\\n    }\\n\\n    /**\\n     * This component represent the PDF document itself. It must be the root\\n     * of your tree element structure, and under no circumstances should it be\\n     * used as children of another react-pdf component. In addition, it should\\n     * only have childs of type <Page />.\\n     */\\n    class Document extends React.Component<DocumentProps> {}\\n\\n    interface NodeProps {\\n      id?: string;\\n      style?: Style | Style[];\\n      /**\\n       * Render component in all wrapped pages.\\n       * @see https://react-pdf.org/advanced#fixed-components\\n       */\\n      fixed?: boolean;\\n      /**\\n       * Force the wrapping algorithm to start a new page when rendering the\\n       * element.\\n       * @see https://react-pdf.org/advanced#page-breaks\\n       */\\n      break?: boolean;\\n      /**\\n       * Hint that no page wrapping should occur between all sibling elements following the element within n points\\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\\n       */\\n      minPresenceAhead?: number;\\n    }\\n\\n    interface PageProps extends NodeProps {\\n      /**\\n       * Enable page wrapping for this page.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      size?: PageSize;\\n      orientation?: Orientation;\\n    }\\n\\n    /**\\n     * Represents single page inside the PDF document, or a subset of them if\\n     * using the wrapping feature. A <Document /> can contain as many pages as\\n     * you want, but ensure not rendering a page inside any component besides\\n     * Document.\\n     */\\n    class Page extends React.Component<PageProps> {}\\n\\n    interface ViewProps extends NodeProps {\\n      id?: string;\\n      /**\\n       * Enable/disable page wrapping for element.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      render?: (props: {\\n        pageNumber: number;\\n        subPageNumber: number;\\n      }) => React.ReactNode;\\n      children?: React.ReactNode;\\n      id?: string;\\n    }\\n\\n    /**\\n     * The most fundamental component for building a UI and is designed to be\\n     * nested inside other views and can have 0 to many children.\\n     */\\n    class View extends React.Component<ViewProps> {}\\n\\n    interface BaseImageProps extends NodeProps {\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      cache?: boolean;\\n    }\\n\\n    interface ImageWithSrcProp extends BaseImageProps {\\n      src: SourceObject;\\n    }\\n\\n    interface ImageWithSourceProp extends BaseImageProps {\\n      source: SourceObject;\\n    }\\n\\n    type ImageProps = ImageWithSrcProp | ImageWithSourceProp;\\n\\n    /**\\n     * A React component for displaying network or local (Node only) JPG or\\n     * PNG images, as well as base64 encoded image strings.\\n     */\\n    class Image extends React.Component<ImageProps> {}\\n\\n    interface TextProps extends NodeProps {\\n      id?: string;\\n      /**\\n       * Enable/disable page wrapping for element.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      render?: (props: {\\n        pageNumber: number;\\n        totalPages: number;\\n        subPageNumber: number;\\n        subPageTotalPages: number;\\n      }) => React.ReactNode;\\n      children?: React.ReactNode;\\n      id?: string;\\n      /**\\n       * Override the default hyphenation-callback\\n       * @see https://react-pdf.org/fonts#registerhyphenationcallback\\n       */\\n      hyphenationCallback?: HyphenationCallback;\\n      /**\\n       * Specifies the minimum number of lines in a text element that must be shown at the bottom of a page or its container.\\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\\n       */\\n      orphans?: number;\\n      /**\\n       * Specifies the minimum number of lines in a text element that must be shown at the top of a page or its container..\\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\\n       */\\n      widows?: number;\\n    }\\n\\n    interface SVGTextProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      x: string | number;\\n      y: string | number;\\n      /**\\n       * Override the default hyphenation-callback\\n       * @see https://react-pdf.org/fonts#registerhyphenationcallback\\n       */\\n      hyphenationCallback?: HyphenationCallback;\\n    }\\n\\n    /**\\n     * A React component for displaying text. Text supports nesting of other\\n     * Text or Link components to create inline styling.\\n     */\\n    class Text extends React.Component<TextProps | SVGTextProps> {}\\n\\n    interface LinkProps extends NodeProps {\\n      /**\\n       * Enable/disable page wrapping for element.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      src: string;\\n      children?: React.ReactNode;\\n    }\\n\\n    /**\\n     * A React component for displaying a hyperlink. Link\\u2019s can be nested\\n     * inside a Text component, or being inside any other valid primitive.\\n     */\\n    class Link extends React.Component<LinkProps> {}\\n\\n    interface NoteProps extends NodeProps {\\n      children: string;\\n    }\\n\\n    class Note extends React.Component<NoteProps> {}\\n\\n    interface CanvasProps extends NodeProps {\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      paint: (\\n        painter: any,\\n        availableWidth: number,\\n        availableHeight: number,\\n      ) => null;\\n    }\\n\\n    class Canvas extends React.Component<CanvasProps> {}\\n\\n    interface SVGProps extends NodeProps {\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      width?: string | number;\\n      height?: string | number;\\n      viewBox?: string;\\n      preserveAspectRatio?: string;\\n    }\\n\\n    /**\\n     * The <SVG /> element is a container that defines a new coordinate system and viewport. It is used as the outermost element of SVG documents.\\n     */\\n    class Svg extends React.Component<SVGProps> {}\\n\\n    interface LineProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      x1: string | number;\\n      x2: string | number;\\n      y1: string | number;\\n      y2: string | number;\\n    }\\n\\n    /**\\n     * The <Line /> element is used to create a line.\\n     */\\n    class Line extends React.Component<LineProps> {}\\n\\n    interface PolylineProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      points: string;\\n    }\\n\\n    /**\\n     * The <Polyline /> element is used to create any shape that consists of only straight lines (that is connected at several points).\\n     */\\n    class Polyline extends React.Component<PolylineProps> {}\\n\\n    interface PolygonProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      points: string;\\n    }\\n\\n    /**\\n     * The <Polygon /> element is used to create a graphic that contains at least three sides.\\n     * Polygons are made of straight lines, and the shape is \\\"closed\\\" (all the lines connect up).\\n     */\\n    class Polygon extends React.Component<PolygonProps> {}\\n\\n    interface PathProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      d: string;\\n    }\\n\\n    /**\\n     * The <Path /> element is the most powerful element in the SVG library of basic shapes. It can be used to create lines, curves, arcs, and more.\\n     */\\n    class Path extends React.Component<PathProps> {}\\n\\n    interface RectProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      x: string | number;\\n      y: string | number;\\n      width: string | number;\\n      height: string | number;\\n      rx?: string | number;\\n      ry?: string | number;\\n    }\\n\\n    /**\\n     * The <Rect /> element is used to create a rectangle and variations of a rectangle shape.\\n     */\\n    class Rect extends React.Component<RectProps> {}\\n\\n    interface CircleProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      cx: string | number;\\n      cy: string | number;\\n      r: string | number;\\n    }\\n\\n    /**\\n     * The <Circle /> element is used to create a circle.\\n     */\\n    class Circle extends React.Component<CircleProps> {}\\n\\n    interface EllipseProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      cx: string | number;\\n      cy: string | number;\\n      rx: string | number;\\n      ry: string | number;\\n    }\\n\\n    /**\\n     * The <Ellipse /> element is used to create an ellipse.\\n     * An ellipse is closely related to a circle. The difference is that an ellipse has an x and a y radius that differs from each other, while a circle has equal x and y radius.\\n     */\\n    class Ellipse extends React.Component<EllipseProps> {}\\n\\n    interface GProps extends SVGPresentationAttributes {}\\n\\n    /**\\n     * The <G /> SVG element is a container used to group other SVG elements.\\n     * Transformations applied to the <G /> element are performed on its child elements, and its attributes are inherited by its children.\\n     */\\n    class G extends React.Component<GProps> {}\\n\\n    interface StopProps {\\n      offset: string | number;\\n      stopColor: string;\\n      stopOpacity?: string | number;\\n    }\\n\\n    /**\\n     * The SVG <Stop /> element defines a color and its position to use on a gradient. This element is always a child of a <LinearGradient /> or <RadialGradient /> element\\n     */\\n    class Stop extends React.Component<StopProps> {}\\n\\n    interface DefsProps {}\\n\\n    /**\\n     * The <Defs /> element is used to store graphical objects that will be used at a later time. Objects created inside a <Defs /> element are not rendered directly. To display them you have to reference them\\n     */\\n    class Defs extends React.Component<DefsProps> {}\\n\\n    interface ClipPathProps {\\n      id?: string;\\n    }\\n\\n    /**\\n     * The <ClipPath /> SVG element defines a clipping path, to be used by the clipPath property.\\n     * A clipping path restricts the region to which paint can be applied. Conceptually, parts of the drawing that lie outside of the region bounded by the clipping path are not drawn.\\n     */\\n    class ClipPath extends React.Component<ClipPathProps> {}\\n\\n    interface LinearGradientProps {\\n      x1: string | number;\\n      x2: string | number;\\n      y1: string | number;\\n      y2: string | number;\\n    }\\n\\n    /**\\n     * The <LinearGradient /> element lets authors define linear gradients that can be applied to fill or stroke of graphical elements.\\n     */\\n    class LinearGradient extends React.Component<LinearGradientProps> {}\\n\\n    interface RadialGradientProps {\\n      cx: string | number;\\n      cy: string | number;\\n      fr: string | number;\\n      fx: string | number;\\n      fy: string | number;\\n    }\\n\\n    /**\\n     * The <RadialGradient /> element lets authors define radial gradients that can be applied to fill or stroke of graphical elements.\\n     */\\n    class RadialGradient extends React.Component<RadialGradientProps> {}\\n\\n    interface BlobProviderParams {\\n      blob: Blob | null;\\n      url: string | null;\\n      loading: boolean;\\n      error: Error | null;\\n    }\\n    interface BlobProviderProps {\\n      document: React.ReactElement<DocumentProps>;\\n      children: (params: BlobProviderParams) => React.ReactNode;\\n    }\\n\\n    /**\\n     * Easy and declarative way of getting document's blob data without\\n     * showing it on screen.\\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\\n     * @platform web\\n     */\\n    class BlobProvider extends React.Component<BlobProviderProps> {}\\n\\n    interface PDFViewerProps {\\n      width?: number | string;\\n      height?: number | string;\\n      style?: Style | Style[];\\n      className?: string;\\n      children?: React.ReactElement<DocumentProps>;\\n      innerRef?: React.Ref<HTMLIFrameElement>;\\n    }\\n\\n    /**\\n     * Iframe PDF viewer for client-side generated documents.\\n     * @platform web\\n     */\\n    class PDFViewer extends React.Component<PDFViewerProps> {}\\n\\n    interface PDFDownloadLinkProps {\\n      document: React.ReactElement<DocumentProps>;\\n      fileName?: string;\\n      style?: Style | Style[];\\n      className?: string;\\n      children?:\\n        | React.ReactNode\\n        | ((params: BlobProviderParams) => React.ReactNode);\\n    }\\n\\n    /**\\n     * Anchor tag to enable generate and download PDF documents on the fly.\\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\\n     * @platform web\\n     */\\n    class PDFDownloadLink extends React.Component<PDFDownloadLinkProps> {}\\n\\n    interface UsePDFInstance {\\n      loading: boolean;\\n      blob: Blob | null;\\n      url: string | null;\\n      error: string | null;\\n    }\\n\\n    /**\\n     * React hook for creating and updating a PDF document instance\\n     * @platform web\\n     */\\n    function usePDF(options: {\\n      document: React.ReactElement<DocumentProps>;\\n    }): [UsePDFInstance, () => void];\\n\\n    const Font: FontStore;\\n\\n    const StyleSheet: {\\n      hairlineWidth: number;\\n      create: <T extends Styles>(styles: T) => T;\\n      resolve: (\\n        style: Style,\\n        container: {\\n          width: number;\\n          height: number;\\n          orientation: Orientation;\\n        },\\n      ) => Style;\\n      flatten: (...styles: (Style[] | Style | undefined)[]) => Style;\\n      absoluteFillObject: {\\n        position: 'absolute';\\n        left: 0;\\n        right: 0;\\n        top: 0;\\n        bottom: 0;\\n      };\\n    };\\n\\n    const version: any;\\n\\n    const PDFRenderer: any;\\n\\n    const pdf: (\\n      initialValue?: React.ReactElement<DocumentProps>,\\n      onChange?: () => {},\\n    ) => {\\n      container: any;\\n      isDirty: () => boolean;\\n      updateContainer: (document: React.ReactElement<any>) => void;\\n      toBuffer: () => Promise<NodeJS.ReadableStream>;\\n      toBlob: () => Promise<Blob>;\\n      toString: () => string;\\n    };\\n\\n    const renderToStream: (\\n      document: React.ReactElement<DocumentProps>,\\n    ) => Promise<NodeJS.ReadableStream>;\\n\\n    const renderToString: (\\n      document: React.ReactElement<DocumentProps>,\\n    ) => string;\\n\\n    const renderToFile: (\\n      document: React.ReactElement<DocumentProps>,\\n      filePath: string,\\n      callback?: (output: NodeJS.ReadableStream, filePath: string) => any,\\n    ) => Promise<NodeJS.ReadableStream>;\\n\\n    const render: typeof renderToFile;\\n  }\\n\\n  const pdf: typeof ReactPDF.pdf;\\n  const Document: typeof ReactPDF.Document;\\n  const Page: typeof ReactPDF.Page;\\n  const View: typeof ReactPDF.View;\\n  const Image: typeof ReactPDF.Image;\\n  const Text: typeof ReactPDF.Text;\\n  const Canvas: typeof ReactPDF.Canvas;\\n  const Link: typeof ReactPDF.Link;\\n  const Note: typeof ReactPDF.Note;\\n  const Svg: typeof ReactPDF.Svg;\\n  const Line: typeof ReactPDF.Line;\\n  const Polyline: typeof ReactPDF.Polyline;\\n  const Polygon: typeof ReactPDF.Polygon;\\n  const Path: typeof ReactPDF.Path;\\n  const Rect: typeof ReactPDF.Rect;\\n  const Circle: typeof ReactPDF.Circle;\\n  const Ellipse: typeof ReactPDF.Ellipse;\\n  const G: typeof ReactPDF.G;\\n  const Stop: typeof ReactPDF.Stop;\\n  const Defs: typeof ReactPDF.Defs;\\n  const ClipPath: typeof ReactPDF.ClipPath;\\n  const LinearGradient: typeof ReactPDF.LinearGradient;\\n  const RadialGradient: typeof ReactPDF.RadialGradient;\\n  const Font: typeof ReactPDF.Font;\\n  const StyleSheet: typeof ReactPDF.StyleSheet;\\n  const PDFRenderer: typeof ReactPDF.PDFRenderer;\\n  const version: typeof ReactPDF.version;\\n  const renderToFile: typeof ReactPDF.renderToFile;\\n  const renderToString: typeof ReactPDF.renderToString;\\n  const renderToStream: typeof ReactPDF.renderToStream;\\n  const usePDF: typeof ReactPDF.usePDF;\\n  const PDFViewer: typeof ReactPDF.PDFViewer;\\n  const BlobProvider: typeof ReactPDF.BlobProvider;\\n  const PDFDownloadLink: typeof ReactPDF.PDFDownloadLink;\\n\\n  export default ReactPDF;\\n\\n  export {\\n    pdf,\\n    Document,\\n    Page,\\n    View,\\n    Image,\\n    Text,\\n    Canvas,\\n    Link,\\n    Note,\\n    Svg,\\n    Line,\\n    Polyline,\\n    Polygon,\\n    Path,\\n    Rect,\\n    Circle,\\n    Ellipse,\\n    G,\\n    Stop,\\n    Defs,\\n    ClipPath,\\n    LinearGradient,\\n    RadialGradient,\\n    Font,\\n    StyleSheet,\\n    PDFRenderer,\\n    version,\\n    renderToFile,\\n    renderToStream,\\n    renderToString,\\n    usePDF,\\n    PDFViewer,\\n    BlobProvider,\\n    PDFDownloadLink,\\n  };\\n}\\n\\n[end of index.d.ts]\\n[start of bug_report.md]\\n---\\nname: Bug report\\nabout: Create a report to help us improve\\ntitle: ''\\nlabels: ''\\nassignees: ''\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior including code snippet (if applies):\\n1. Go to '...'\\n2. Click on '....'\\n3. Scroll down to '....'\\n4. See error\\n\\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n**Screenshots**\\nIf applicable, add screenshots to help explain your problem.\\n\\n**Desktop (please complete the following information):**\\n - OS: [e.g. MacOS, Windows]\\n - Browser [e.g. chrome, safari]\\n - React-pdf version [e.g. v1.1.0]\\n\\n<!-- Love react-pdf? Please consider supporting our collective:\\n\\ud83d\\udc49  https://opencollective.com/react-pdf/donate -->\\n\\n[end of bug_report.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "README.md",
        "README.md",
        "README.md",
        "index.d.ts",
        "bug_report.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "905a84df-25ec-45dc-b5a6-103e701d6b9d",
        "score": 0.01639344262295082,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/render\n\n> React-pdf render engine\n\n## How to install\n```sh\nyarn add @react-pdf/render\n```\n\n## How it works\n\n```js\nconst render = require('@react-pdf/render');\nconst primitives = require('@react-pdf/primitives');\n\nconst view = {\n  type: primitives.View,\n  style: {\n    backgroundColor: 'red',\n    borderTopLeftRadius: 5,\n    borderTopRightRadius: 10,\n    borderBottomLeftRadius: 0,\n    borderBottomRightRadius: 15,\n    borderTopColor: 'yellow',\n    borderLeftColor: 'green',\n    borderBottomColor: 'black',\n    borderRightColor: 'purple',\n  },\n  box: {\n    left: 20,\n    top: 20,\n    width: 100,\n    height: 80,\n    borderTopWidth: 3,\n    borderLeftWidth: 2,\n    borderBottomWidth: 1,\n    borderRightWidth: 4,\n  },\n};\n\nconst doc = {\n  type: primitives.Document,\n  children: [\n    {\n      type: primitives.Page,\n      box: { width: 400, height: 600 },\n      children: [view],\n    },\n  ],\n};\n\n// Provide your own context\nconst ctx = createContext();\n\nrender.default(ctx, doc);\n```\n\nThis library exports a `render` function that takes two arguments:\n\n- *ctx*: This is the target context where the document is going to be rendered. React-pdf currently uses a [pdfkit](https://github.com/react-pdf/pdfkit) document as context, but it can target any other type of structure as long as it signature matches pdfkit API. In the future this will enable rendering documents into muliple formats in addition to PDF.\n- *node*: Document root node. A node is a nested structure that defines a single element in a document. They are defined by it's `type` and arguments.\n\n## Node structure\n\nA node represents a single element inside a document. It's mainly defined by it's `type` (mandatory) field in addition to other values to define where that element is positioned inside the document (`box`), how it looks (`style`), how it should behave (`params`) and what sub-nodes it contains (`children`).\n\nThe root node must always be of type `DOCUMENT`, containing as many `PAGE` nodes as desired inside it's children field.\n\nBare in mind this package does not handle any type of node positioning, inheritance, style transformations or any other layout related logic. It's role is limited to render exactly the node it get's into the provided context. Take this into account when definig styles as `paddingTop`, `paddingLeft` and so on instead of the shortcut `padding`. For layout or styles transformation this project provides separate packages.\n\n### node.type\n\nMandatory field specifiying the type of the particular node. The full list of types can be found and imported from `@react-pdf/primitives`\n\n### node.box\n\nDefines bounding box where a particular node is located inside a document\n\n- left\n- top\n- width\n- height\n- paddingTop\n- paddingLeft\n- paddingBottom\n- paddingRight\n- marginTop\n- marginLeft\n- marginBottom\n- marginRight\n- borderTopWidth\n- borderLeftWidth\n- borderBottomWidth\n- borderRightWidth\n\n### node.style\n\nDefines how the node looks like. There are some types of nodes that expect special style values, but generally all support:\n\n- color\n- opacity\n- overflow\n- backgroundColor\n- borderTopLeftRadius\n- borderTopRightRadius\n- borderBottomLeftRadius\n- borderBottomRightRadius\n- borderTopColor\n- borderLeftColor\n- borderBottomColor\n- borderRightColor\n- _others..._\n\n### node.props\n\nSpecific node params needed to render correctly ot behave like certain way. Specially needed for SVG nodes\n\n## PDF example\n\n```js\nconst fs = require('fs');\nconst render = require('@react-pdf/render');\nconst pdfkit = require('@react-pdf/pdfkit');\n\nconst PDFDocument = pdfkit.default;\n\nconst ctx = new PDFDocument({ autoFirstPage: false });\n\nconst doc = {}; // See above\n\nrender.default(ctx, doc);\n\nconst stream = fs.createWriteStream('./test.pdf');\n\nctx.pipe(stream);\n```\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/render/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "401ae391-ee3a-493b-bc3f-20e9e5aedd4b",
        "score": 0.016129032258064516,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n  <p align=\"center\">React renderer for creating PDF files on the browser and server<p>\n  <p align=\"center\">\n    <a href=\"https://www.npmjs.com/package/@react-pdf/renderer\">\n      <img src=\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\" />\n    </a>\n    <a href=\"https://travis-ci.org/diegomura/react-pdf\">\n      <img src=\"https://img.shields.io/travis/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\">\n      <img src=\"https://img.shields.io/github/license/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://github.com/prettier/prettier\">\n      <img src=\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\" />\n    </a>\n    <a href=\"https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_shield\" alt=\"FOSSA Status\"><img src=\"https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=shield\"/></a>\n  </p>\n</p>\n\n> New react-pdf 2.0 was relesed. [Read about the announcement](http://react-pdf.org/blog/announcing-react-pdf-v2)\n\n## Lost?\n\nThis package is used to _create_ PDFs using React. If you wish to _display_ existing PDFs, you may be looking for [react-pdf](https://github.com/wojtekmaj/react-pdf).\n\n## How to install\n```sh\nyarn add @react-pdf/renderer\n```\n\n## How it works\n\n```jsx\nimport React from 'react';\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\n\n// Create styles\nconst styles = StyleSheet.create({\n  page: {\n    flexDirection: 'row',\n    backgroundColor: '#E4E4E4'\n  },\n  section: {\n    margin: 10,\n    padding: 10,\n    flexGrow: 1\n  }\n});\n\n// Create Document Component\nconst MyDocument = () => (\n  <Document>\n    <Page size=\"A4\" style={styles.page}>\n      <View style={styles.section}>\n        <Text>Section #1</Text>\n      </View>\n      <View style={styles.section}>\n        <Text>Section #2</Text>\n      </View>\n    </Page>\n  </Document>\n);\n```\n\n### `Web.` Render in DOM\n```jsx\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { PDFViewer } from '@react-pdf/renderer';\n\nconst App = () => (\n  <PDFViewer>\n    <MyDocument />\n  </PDFViewer>\n);\n\nReactDOM.render(<App />, document.getElementById('root'));\n```\n\n### `Node.` Save in a file\n```jsx\nimport React from 'react';\nimport ReactPDF from '@react-pdf/renderer';\n\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\n```\n\n## Contributors\n\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\n<a href=\"https://github.com/diegomura/react-pdf/graphs/contributors\"><img src=\"https://opencollective.com/react-pdf/contributors.svg?width=890\" /></a>\n\n## Sponsors\n\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\n\n<a href=\"https://opencollective.com/react-pdf#sponsors\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/sponsors.svg?width=890\"></a>\n\n## Backers\n\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\n\n<a href=\"https://opencollective.com/react-pdf#backers\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/backers.svg?width=890\"></a>\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n\n[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_large)\n\n---\n![](https://img.shields.io/npm/dt/@react-pdf/renderer.svg?style=flat)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "adceb749-ad96-47f9-b286-0f8d059de07f",
        "score": 0.015873015873015872,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n  <p align=\"center\">React renderer for creating PDF files on the browser and server<p>\n  <p align=\"center\">\n    <a href=\"https://www.npmjs.com/package/@react-pdf/renderer\">\n      <img src=\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\" />\n    </a>\n    <a href=\"https://travis-ci.org/diegomura/react-pdf\">\n      <img src=\"https://img.shields.io/travis/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\">\n      <img src=\"https://img.shields.io/github/license/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://spectrum.chat/react-pdf\">\n      <img src=\"https://withspectrum.github.io/badge/badge.svg\" />\n    </a>\n    <a href=\"https://github.com/prettier/prettier\">\n      <img src=\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\" />\n    </a>\n    <a href=\"https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_shield\" alt=\"FOSSA Status\"><img src=\"https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=shield\"/></a>\n  </p>\n</p>\n\n## How to install\n```sh\nyarn add @react-pdf/renderer\n```\n\n## How it works\n\n```jsx\nimport React from 'react';\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\n\n// Create styles\nconst styles = StyleSheet.create({\n  page: {\n    flexDirection: 'row',\n    backgroundColor: '#E4E4E4'\n  },\n  section: {\n    margin: 10,\n    padding: 10,\n    flexGrow: 1\n  }\n});\n\n// Create Document Component\nconst MyDocument = () => (\n  <Document>\n    <Page size=\"A4\" style={styles.page}>\n      <View style={styles.section}>\n        <Text>Section #1</Text>\n      </View>\n      <View style={styles.section}>\n        <Text>Section #2</Text>\n      </View>\n    </Page>\n  </Document>\n);\n```\n\n### `Web.` Render in DOM\n```jsx\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { PDFViewer } from '@react-pdf/renderer';\n\nconst App = () => (\n  <PDFViewer>\n    <MyDocument />\n  </PDFViewer>\n);\n\nReactDOM.render(<App />, document.getElementById('root'));\n```\n\n### `Node.` Save in a file\n```jsx\nimport React from 'react';\nimport ReactPDF from '@react-pdf/renderer';\n\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\n```\n\n## Examples\nFor each example, try opening `output.pdf` to see the result.\n\n<table>\n\t<tbody>\n\t\t<tr>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/text/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/text/\">Text</a>\n      </td>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/resume/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/resume/\">Resume</a>\n\t\t\t</td>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/fractals/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/fractals/\">Fractals</a>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n<table>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/knobs/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/knobs/\">Knobs</a>\n\t\t\t</td>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/pageWrap/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/pageWrap/\">Page wrap</a>\n      </td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n## Contributors\n\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\n<a href=\"https://github.com/diegomura/react-pdf/graphs/contributors\"><img src=\"https://opencollective.com/react-pdf/contributors.svg?width=890\" /></a>\n\n## Sponsors\n\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\n\n<a href=\"https://opencollective.com/react-pdf#sponsors\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/sponsors.svg?width=890\"></a>\n\n## Backers\n\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\n\n<a href=\"https://opencollective.com/react-pdf#backers\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/backers.svg?width=890\"></a>\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n\n[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_large)\n\n---\n![](https://img.shields.io/npm/dt/@react-pdf/renderer.svg?style=flat)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/renderer/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "0337b7eb-280b-42d4-99bd-6b34d7a62963",
        "score": 0.015625,
        "payload": {
          "text": "declare module '@react-pdf/renderer' {\n  import * as React from 'react';\n  import {\n    Style,\n    PageSize,\n    FontStore,\n    Orientation,\n    SourceObject,\n    HyphenationCallback,\n    SVGPresentationAttributes,\n  } from '@react-pdf/types';\n\n  namespace ReactPDF {\n    interface Styles {\n      [key: string]: Style;\n    }\n\n    interface OnRenderProps {\n      blob?: Blob;\n    }\n\n    interface DocumentProps {\n      title?: string;\n      author?: string;\n      subject?: string;\n      keywords?: string;\n      creator?: string;\n      producer?: string;\n      onRender?: (props: OnRenderProps) => any;\n    }\n\n    /**\n     * This component represent the PDF document itself. It must be the root\n     * of your tree element structure, and under no circumstances should it be\n     * used as children of another react-pdf component. In addition, it should\n     * only have childs of type <Page />.\n     */\n    class Document extends React.Component<DocumentProps> {}\n\n    interface NodeProps {\n      id?: string;\n      style?: Style | Style[];\n      /**\n       * Render component in all wrapped pages.\n       * @see https://react-pdf.org/advanced#fixed-components\n       */\n      fixed?: boolean;\n      /**\n       * Force the wrapping algorithm to start a new page when rendering the\n       * element.\n       * @see https://react-pdf.org/advanced#page-breaks\n       */\n      break?: boolean;\n      /**\n       * Hint that no page wrapping should occur between all sibling elements following the element within n points\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\n       */\n      minPresenceAhead?: number;\n    }\n\n    interface PageProps extends NodeProps {\n      /**\n       * Enable page wrapping for this page.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      size?: PageSize;\n      orientation?: Orientation;\n    }\n\n    /**\n     * Represents single page inside the PDF document, or a subset of them if\n     * using the wrapping feature. A <Document /> can contain as many pages as\n     * you want, but ensure not rendering a page inside any component besides\n     * Document.\n     */\n    class Page extends React.Component<PageProps> {}\n\n    interface ViewProps extends NodeProps {\n      id?: string;\n      /**\n       * Enable/disable page wrapping for element.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      render?: (props: {\n        pageNumber: number;\n        subPageNumber: number;\n      }) => React.ReactNode;\n      children?: React.ReactNode;\n      id?: string;\n    }\n\n    /**\n     * The most fundamental component for building a UI and is designed to be\n     * nested inside other views and can have 0 to many children.\n     */\n    class View extends React.Component<ViewProps> {}\n\n    interface BaseImageProps extends NodeProps {\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      cache?: boolean;\n    }\n\n    interface ImageWithSrcProp extends BaseImageProps {\n      src: SourceObject;\n    }\n\n    interface ImageWithSourceProp extends BaseImageProps {\n      source: SourceObject;\n    }\n\n    type ImageProps = ImageWithSrcProp | ImageWithSourceProp;\n\n    /**\n     * A React component for displaying network or local (Node only) JPG or\n     * PNG images, as well as base64 encoded image strings.\n     */\n    class Image extends React.Component<ImageProps> {}\n\n    interface TextProps extends NodeProps {\n      id?: string;\n      /**\n       * Enable/disable page wrapping for element.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      render?: (props: {\n        pageNumber: number;\n        totalPages: number;\n        subPageNumber: number;\n        subPageTotalPages: number;\n      }) => React.ReactNode;\n      children?: React.ReactNode;\n      id?: string;\n      /**\n       * Override the default hyphenation-callback\n       * @see https://react-pdf.org/fonts#registerhyphenationcallback\n       */\n      hyphenationCallback?: HyphenationCallback;\n      /**\n       * Specifies the minimum number of lines in a text element that must be shown at the bottom of a page or its container.\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\n       */\n      orphans?: number;\n      /**\n       * Specifies the minimum number of lines in a text element that must be shown at the top of a page or its container..\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\n       */\n      widows?: number;\n    }\n\n    interface SVGTextProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      x: string | number;\n      y: string | number;\n      /**\n       * Override the default hyphenation-callback\n       * @see https://react-pdf.org/fonts#registerhyphenationcallback\n       */\n      hyphenationCallback?: HyphenationCallback;\n    }\n\n    /**\n     * A React component for displaying text. Text supports nesting of other\n     * Text or Link components to create inline styling.\n     */\n    class Text extends React.Component<TextProps | SVGTextProps> {}\n\n    interface LinkProps extends NodeProps {\n      /**\n       * Enable/disable page wrapping for element.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      src: string;\n      children?: React.ReactNode;\n    }\n\n    /**\n     * A React component for displaying a hyperlink. Link\u2019s can be nested\n     * inside a Text component, or being inside any other valid primitive.\n     */\n    class Link extends React.Component<LinkProps> {}\n\n    interface NoteProps extends NodeProps {\n      children: string;\n    }\n\n    class Note extends React.Component<NoteProps> {}\n\n    interface CanvasProps extends NodeProps {\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      paint: (\n        painter: any,\n        availableWidth: number,\n        availableHeight: number,\n      ) => null;\n    }\n\n    class Canvas extends React.Component<CanvasProps> {}\n\n    interface SVGProps extends NodeProps {\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      width?: string | number;\n      height?: string | number;\n      viewBox?: string;\n      preserveAspectRatio?: string;\n    }\n\n    /**\n     * The <SVG /> element is a container that defines a new coordinate system and viewport. It is used as the outermost element of SVG documents.\n     */\n    class Svg extends React.Component<SVGProps> {}\n\n    interface LineProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      x1: string | number;\n      x2: string | number;\n      y1: string | number;\n      y2: string | number;\n    }\n\n    /**\n     * The <Line /> element is used to create a line.\n     */\n    class Line extends React.Component<LineProps> {}\n\n    interface PolylineProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      points: string;\n    }\n\n    /**\n     * The <Polyline /> element is used to create any shape that consists of only straight lines (that is connected at several points).\n     */\n    class Polyline extends React.Component<PolylineProps> {}\n\n    interface PolygonProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      points: string;\n    }\n\n    /**\n     * The <Polygon /> element is used to create a graphic that contains at least three sides.\n     * Polygons are made of straight lines, and the shape is \"closed\" (all the lines connect up).\n     */\n    class Polygon extends React.Component<PolygonProps> {}\n\n    interface PathProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      d: string;\n    }\n\n    /**\n     * The <Path /> element is the most powerful element in the SVG library of basic shapes. It can be used to create lines, curves, arcs, and more.\n     */\n    class Path extends React.Component<PathProps> {}\n\n    interface RectProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      x: string | number;\n      y: string | number;\n      width: string | number;\n      height: string | number;\n      rx?: string | number;\n      ry?: string | number;\n    }\n\n    /**\n     * The <Rect /> element is used to create a rectangle and variations of a rectangle shape.\n     */\n    class Rect extends React.Component<RectProps> {}\n\n    interface CircleProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      cx: string | number;\n      cy: string | number;\n      r: string | number;\n    }\n\n    /**\n     * The <Circle /> element is used to create a circle.\n     */\n    class Circle extends React.Component<CircleProps> {}\n\n    interface EllipseProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      cx: string | number;\n      cy: string | number;\n      rx: string | number;\n      ry: string | number;\n    }\n\n    /**\n     * The <Ellipse /> element is used to create an ellipse.\n     * An ellipse is closely related to a circle. The difference is that an ellipse has an x and a y radius that differs from each other, while a circle has equal x and y radius.\n     */\n    class Ellipse extends React.Component<EllipseProps> {}\n\n    interface GProps extends SVGPresentationAttributes {}\n\n    /**\n     * The <G /> SVG element is a container used to group other SVG elements.\n     * Transformations applied to the <G /> element are performed on its child elements, and its attributes are inherited by its children.\n     */\n    class G extends React.Component<GProps> {}\n\n    interface StopProps {\n      offset: string | number;\n      stopColor: string;\n      stopOpacity?: string | number;\n    }\n\n    /**\n     * The SVG <Stop /> element defines a color and its position to use on a gradient. This element is always a child of a <LinearGradient /> or <RadialGradient /> element\n     */\n    class Stop extends React.Component<StopProps> {}\n\n    interface DefsProps {}\n\n    /**\n     * The <Defs /> element is used to store graphical objects that will be used at a later time. Objects created inside a <Defs /> element are not rendered directly. To display them you have to reference them\n     */\n    class Defs extends React.Component<DefsProps> {}\n\n    interface ClipPathProps {\n      id?: string;\n    }\n\n    /**\n     * The <ClipPath /> SVG element defines a clipping path, to be used by the clipPath property.\n     * A clipping path restricts the region to which paint can be applied. Conceptually, parts of the drawing that lie outside of the region bounded by the clipping path are not drawn.\n     */\n    class ClipPath extends React.Component<ClipPathProps> {}\n\n    interface LinearGradientProps {\n      x1: string | number;\n      x2: string | number;\n      y1: string | number;\n      y2: string | number;\n    }\n\n    /**\n     * The <LinearGradient /> element lets authors define linear gradients that can be applied to fill or stroke of graphical elements.\n     */\n    class LinearGradient extends React.Component<LinearGradientProps> {}\n\n    interface RadialGradientProps {\n      cx: string | number;\n      cy: string | number;\n      fr: string | number;\n      fx: string | number;\n      fy: string | number;\n    }\n\n    /**\n     * The <RadialGradient /> element lets authors define radial gradients that can be applied to fill or stroke of graphical elements.\n     */\n    class RadialGradient extends React.Component<RadialGradientProps> {}\n\n    interface BlobProviderParams {\n      blob: Blob | null;\n      url: string | null;\n      loading: boolean;\n      error: Error | null;\n    }\n    interface BlobProviderProps {\n      document: React.ReactElement<DocumentProps>;\n      children: (params: BlobProviderParams) => React.ReactNode;\n    }\n\n    /**\n     * Easy and declarative way of getting document's blob data without\n     * showing it on screen.\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\n     * @platform web\n     */\n    class BlobProvider extends React.Component<BlobProviderProps> {}\n\n    interface PDFViewerProps {\n      width?: number | string;\n      height?: number | string;\n      style?: Style | Style[];\n      className?: string;\n      children?: React.ReactElement<DocumentProps>;\n      innerRef?: React.Ref<HTMLIFrameElement>;\n    }\n\n    /**\n     * Iframe PDF viewer for client-side generated documents.\n     * @platform web\n     */\n    class PDFViewer extends React.Component<PDFViewerProps> {}\n\n    interface PDFDownloadLinkProps {\n      document: React.ReactElement<DocumentProps>;\n      fileName?: string;\n      style?: Style | Style[];\n      className?: string;\n      children?:\n        | React.ReactNode\n        | ((params: BlobProviderParams) => React.ReactNode);\n    }\n\n    /**\n     * Anchor tag to enable generate and download PDF documents on the fly.\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\n     * @platform web\n     */\n    class PDFDownloadLink extends React.Component<PDFDownloadLinkProps> {}\n\n    interface UsePDFInstance {\n      loading: boolean;\n      blob: Blob | null;\n      url: string | null;\n      error: string | null;\n    }\n\n    /**\n     * React hook for creating and updating a PDF document instance\n     * @platform web\n     */\n    function usePDF(options: {\n      document: React.ReactElement<DocumentProps>;\n    }): [UsePDFInstance, () => void];\n\n    const Font: FontStore;\n\n    const StyleSheet: {\n      hairlineWidth: number;\n      create: <T extends Styles>(styles: T) => T;\n      resolve: (\n        style: Style,\n        container: {\n          width: number;\n          height: number;\n          orientation: Orientation;\n        },\n      ) => Style;\n      flatten: (...styles: (Style[] | Style | undefined)[]) => Style;\n      absoluteFillObject: {\n        position: 'absolute';\n        left: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n      };\n    };\n\n    const version: any;\n\n    const PDFRenderer: any;\n\n    const pdf: (\n      initialValue?: React.ReactElement<DocumentProps>,\n      onChange?: () => {},\n    ) => {\n      container: any;\n      isDirty: () => boolean;\n      updateContainer: (document: React.ReactElement<any>) => void;\n      toBuffer: () => Promise<NodeJS.ReadableStream>;\n      toBlob: () => Promise<Blob>;\n      toString: () => string;\n    };\n\n    const renderToStream: (\n      document: React.ReactElement<DocumentProps>,\n    ) => Promise<NodeJS.ReadableStream>;\n\n    const renderToString: (\n      document: React.ReactElement<DocumentProps>,\n    ) => string;\n\n    const renderToFile: (\n      document: React.ReactElement<DocumentProps>,\n      filePath: string,\n      callback?: (output: NodeJS.ReadableStream, filePath: string) => any,\n    ) => Promise<NodeJS.ReadableStream>;\n\n    const render: typeof renderToFile;\n  }\n\n  const pdf: typeof ReactPDF.pdf;\n  const Document: typeof ReactPDF.Document;\n  const Page: typeof ReactPDF.Page;\n  const View: typeof ReactPDF.View;\n  const Image: typeof ReactPDF.Image;\n  const Text: typeof ReactPDF.Text;\n  const Canvas: typeof ReactPDF.Canvas;\n  const Link: typeof ReactPDF.Link;\n  const Note: typeof ReactPDF.Note;\n  const Svg: typeof ReactPDF.Svg;\n  const Line: typeof ReactPDF.Line;\n  const Polyline: typeof ReactPDF.Polyline;\n  const Polygon: typeof ReactPDF.Polygon;\n  const Path: typeof ReactPDF.Path;\n  const Rect: typeof ReactPDF.Rect;\n  const Circle: typeof ReactPDF.Circle;\n  const Ellipse: typeof ReactPDF.Ellipse;\n  const G: typeof ReactPDF.G;\n  const Stop: typeof ReactPDF.Stop;\n  const Defs: typeof ReactPDF.Defs;\n  const ClipPath: typeof ReactPDF.ClipPath;\n  const LinearGradient: typeof ReactPDF.LinearGradient;\n  const RadialGradient: typeof ReactPDF.RadialGradient;\n  const Font: typeof ReactPDF.Font;\n  const StyleSheet: typeof ReactPDF.StyleSheet;\n  const PDFRenderer: typeof ReactPDF.PDFRenderer;\n  const version: typeof ReactPDF.version;\n  const renderToFile: typeof ReactPDF.renderToFile;\n  const renderToString: typeof ReactPDF.renderToString;\n  const renderToStream: typeof ReactPDF.renderToStream;\n  const usePDF: typeof ReactPDF.usePDF;\n  const PDFViewer: typeof ReactPDF.PDFViewer;\n  const BlobProvider: typeof ReactPDF.BlobProvider;\n  const PDFDownloadLink: typeof ReactPDF.PDFDownloadLink;\n\n  export default ReactPDF;\n\n  export {\n    pdf,\n    Document,\n    Page,\n    View,\n    Image,\n    Text,\n    Canvas,\n    Link,\n    Note,\n    Svg,\n    Line,\n    Polyline,\n    Polygon,\n    Path,\n    Rect,\n    Circle,\n    Ellipse,\n    G,\n    Stop,\n    Defs,\n    ClipPath,\n    LinearGradient,\n    RadialGradient,\n    Font,\n    StyleSheet,\n    PDFRenderer,\n    version,\n    renderToFile,\n    renderToStream,\n    renderToString,\n    usePDF,\n    PDFViewer,\n    BlobProvider,\n    PDFDownloadLink,\n  };\n}\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/renderer/index.d.ts",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "62ec4b36-1585-49a0-895a-0ef0f44bd44e",
        "score": 0.015384615384615385,
        "payload": {
          "text": "---\nname: Bug report\nabout: Create a report to help us improve\ntitle: ''\nlabels: ''\nassignees: ''\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior including code snippet (if applies):\n1. Go to '...'\n2. Click on '....'\n3. Scroll down to '....'\n4. See error\n\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n\n**Screenshots**\nIf applicable, add screenshots to help explain your problem.\n\n**Desktop (please complete the following information):**\n - OS: [e.g. MacOS, Windows]\n - Browser [e.g. chrome, safari]\n - React-pdf version [e.g. v1.1.0]\n\n<!-- Love react-pdf? Please consider supporting our collective:\n\ud83d\udc49  https://opencollective.com/react-pdf/donate -->\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/.github/ISSUE_TEMPLATE/bug_report.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-2400",
    "model_patch": "diff --git a/src/render.js b/src/render.js\nindex 1234567..89abcde 100644\n--- a/src/render.js\n+++ b/src/render.js\n@@ -10,6 +10,7 @@ const renderNode = (ctx, node) => {\n   if (node.type === 'fixed') {\n     renderFixedNode(ctx, node);\n   } else {\n+    if (node.minPresenceAhead && !isNodeFullyVisible(ctx, node)) return;\n     renderRegularNode(ctx, node);\n   }\n };\n \n@@ -30,6 +31,15 @@ const renderFixedNode = (ctx, node) => {\n   // Logic to render fixed node\n };\n \n+const isNodeFullyVisible = (ctx, node) => {\n+  const { top, height } = node.box;\n+  const pageHeight = ctx.page.height;\n+  const minPresenceAhead = node.minPresenceAhead || 0;\n+\n+  return top + height + minPresenceAhead <= pageHeight;\n+};\n+\n const renderRegularNode = (ctx, node) => {\n   // Logic to render regular node\n };",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 162.67,
      "issue_embedding_time_ms": 162.67,
      "retrieval_time_ms_splade": 22.42,
      "retrieval_time_ms": 22.42,
      "total_retrieval_time_ms": 185.09,
      "generation_time_ms": 2731.02,
      "total_io_time_ms": 2916.12,
      "input_total_token_limit": null,
      "issue_text_tokens": 2374,
      "vlm_tokens": 0,
      "retrieved_tokens": 1531,
      "prompt_template_tokens": 505,
      "total_input_prompt_tokens": 4410,
      "output_generated_tokens": 238,
      "total_io_tokens": 4648,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\n`fixed` in conjunction with `minPresenceAhead` does not work as expected\\n**Describe the bug**\\r\\nUsing `minPresenceAhead` on a `fixed` component does not work as expected.\\r\\n\\r\\n**To Reproduce**\\r\\n1. Create a document with two components: \\r\\n  * Some view that takes up most of the first page, e.g. `<View style={{height: 600}}/>`\\r\\n  * A component that consists of a header, and a large block of text. \\r\\n1. Try and style the second component so that the header is fixed above each page as the large block of text, but make sure it does not appear by itself. So add both `fixed` and `minPresenceAhead` to the header.\\r\\n3. See that the `minPresenceAhead` rule is not obeyed. But it _is_ obeyed if `fixed` is removed. \\r\\n\\r\\n[Repl link](https://react-pdf.org/repl?code=3187b0760ce02e00403207901281440b2302f0c04471004e02980b6300960038402b990098800da1304e6c0218945400d0c50908b028bc681189de9572118393001cc611261c04422f462355e4684122075892955a28533e8d30b06ac269c011a122ab62316c46094e4a609c52ea008e349c0074300072223041649c6111645a64bc305084d992425ae19cb0e4f4d100823294720aca59047250e4e11ef5b41009f1006644344ae4451460d1709cc0866cda591255ed8d60d676c53ac94d3499ade3ddbdfdc56052f644d1008a347214d4746c8694446032105a30344c50f5c044ed4a049c006e25c1325125d3a8677b44000a000b4e3115ec11f9a8a60419824ecc05512978d1001ab3d288e22878209c2aadc3ae8e25f4a08d768ad0a647f1303e117a3045ce4172dd6c490218c607f282703c6a522dca074728f1606226131c6c06fad32ad5450a96ee40c8d09128a2263a09c76a51610624adc889c21ac4e44c2bbc9645c655db6aecce5dd2e1f070bcdee40fa0cc498c9384ce9c1a28908d1002481c08dc9805968445f0f948e75a03198ac76140711c2154943b95516a434a3593c9c22716d379346880184246d3f114697e6607a7d520a28d9ec1d822606375958a3ecd688a09ce452f389eb2ee2819189e6d3368d26091a408a183a93904102a3e6827001422d998000555a8d66a78311e834c083ed2a1a723e644cc932fe07b04e60b7b01ee8be24c1fc41010109a84c81c100ded0bb282801c6010ec9d40d2ac4499a40bb499180e2361b0232cc9aef5a36e338ac899cdfb12591582522cba29ce58c0841811e13258794e888661a4825996fe048c1af465ae1638c0281ea82bb4fe088b703e94342b0b7c479803f324ea21a20026be121ec8423923485aea99378ac2e9e4024e014835a443800050767e4b039e1e96030000140025160001f079764c0300003c0008880630f0f60f901605c178201112500009e4ca6000379a5943483232800170c000230000c45400bea5745b16c5417623e800ee6c325a94659091053a42503e5001b095e5400f495555c16d5441d58350dc37d530274e40001e930908a382c4168f3110652b5d23a500332f53038d137052e6cdb034029510e95a5a00f8f9400e4c43d0b74089d38050000cae40005e443e5bb408597d0395280010880d4880243e5000b1951540012e6bd0899057d71d5001d554a32358d3144d415a318d0d69620a81a0a56e3434a304c5398f53876c5c4f20e8393f4d534409d84d63f541d28fc598a0d28d851158ad167900370390e520e6a88e08850018a44c41dc89bb9f8eb90378b92d0000)\\r\\n\\r\\n<details><summary>Click to see REPL Link if above link doesn't work</summary>\\r\\n<pre>\\r\\nhttps://react-pdf.org/repl?code=3187b0760ce02e00403207901281440b2302f0c04471004e02980b6300960038402b990098800da1304e6c0218945400d0c50908b028bc681189de9572118393001cc611261c04422f462355e4684122075892955a28533e8d30b06ac269c011a122ab62316c46094e4a609c52ea008e349c0074300072223041649c6111645a64bc305084d992425ae19cb0e4f4d100823294720aca59047250e4e11ef5b41009f1006644344ae4451460d1709cc0866cda591255ed8d60d676c53ac94d3499ade3ddbdfdc56052f644d1008a347214d4746c8694446032105a30344c50f5c044ed4a049c006e25c1325125d3a8677b44000a000b4e3115ec11f9a8a60419824ecc05512978d1001ab3d288e22878209c2aadc3ae8e25f4a08d768ad0a647f1303e117a3045ce4172dd6c490218c607f282703c6a522dca074728f1606226131c6c06fad32ad5450a96ee40c8d09128a2263a09c76a51610624adc889c21ac4e44c2bbc9645c655db6aecce5dd2e1f070bcdee40fa0cc498c9384ce9c1a28908d1002481c08dc9805968445f0f948e75a03198ac76140711c2154943b95516a434a3593c9c22716d379346880184246d3f114697e6607a7d520a28d9ec1d822606375958a3ecd688a09ce452f389eb2ee2819189e6d3368d26091a408a183a93904102a3e6827001422d998000555a8d66a78311e834c083ed2a1a723e644cc932fe07b04e60b7b01ee8be24c1fc41010109a84c81c100ded0bb282801c6010ec9d40d2ac4499a40bb499180e2361b0232cc9aef5a36e338ac899cdfb12591582522cba29ce58c0841811e13258794e888661a4825996fe048c1af465ae1638c0281ea82bb4fe088b703e94342b0b7c479803f324ea21a20026be121ec8423923485aea99378ac2e9e4024e014835a443800050767e4b039e1e96030000140025160001f079764c0300003c0008880630f0f60f901605c178201112500009e4ca6000379a5943483232800170c000230000c45400bea5745b16c5417623e800ee6c325a94659091053a42503e5001b095e5400f495555c16d5441d58350dc37d530274e40001e930908a382c4168f3110652b5d23a500332f53038d137052e6cdb034029510e95a5a00f8f9400e4c43d0b74089d38050000cae40005e443e5bb408597d0395280010880d4880243e5000b1951540012e6bd0899057d71d5001d554a32358d3144d415a318d0d69620a81a0a56e3434a304c5398f53876c5c4f20e8393f4d534409d84d63f541d28fc598a0d28d851158ad167900370390e520e6a88e08850018a44c41dc89bb9f8eb90378b92d0000\\r\\n</pre>\\r\\n</details> \\r\\n\\r\\n\\r\\n**Expected behavior**\\r\\n\\r\\nI want to be able to have fixed headers that appear above multi-page content. But which also does not appear by itself.\\r\\n\\r\\n**Screenshots**\\r\\nActual:\\r\\n![image](https://user-images.githubusercontent.com/896684/224213720-70a980a3-f4cc-4dea-9b9a-ab7dce7a1a87.png)\\r\\n\\r\\nExpected:\\r\\n![image](https://user-images.githubusercontent.com/896684/224213733-db3f0076-17e8-4f2c-930b-6659508fd8f6.png)\\r\\n\\r\\n\\r\\n**Desktop (please complete the following information):**\\r\\n - OS: Mac OS Monterey\\r\\n - Browser: Safari\\r\\n - React-pdf: v3.1.3\\r\\n\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of bug_report.md]\\n---\\nname: Bug report\\nabout: Create a report to help us improve\\ntitle: ''\\nlabels: ''\\nassignees: ''\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior including code snippet (if applies):\\n1. Go to '...'\\n2. Click on '....'\\n3. Scroll down to '....'\\n4. See error\\n\\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n**Screenshots**\\nIf applicable, add screenshots to help explain your problem.\\n\\n**Desktop (please complete the following information):**\\n - OS: [e.g. MacOS, Windows]\\n - Browser [e.g. chrome, safari]\\n - React-pdf version [e.g. v1.1.0]\\n\\n<!-- Love react-pdf? Please consider supporting our collective:\\n\\ud83d\\udc49  https://opencollective.com/react-pdf/donate -->\\n\\n[end of bug_report.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/render\\n\\n> React-pdf render engine\\n\\n## How to install\\n```sh\\nyarn add @react-pdf/render\\n```\\n\\n## How it works\\n\\n```js\\nconst render = require('@react-pdf/render');\\nconst primitives = require('@react-pdf/primitives');\\n\\nconst view = {\\n  type: primitives.View,\\n  style: {\\n    backgroundColor: 'red',\\n    borderTopLeftRadius: 5,\\n    borderTopRightRadius: 10,\\n    borderBottomLeftRadius: 0,\\n    borderBottomRightRadius: 15,\\n    borderTopColor: 'yellow',\\n    borderLeftColor: 'green',\\n    borderBottomColor: 'black',\\n    borderRightColor: 'purple',\\n  },\\n  box: {\\n    left: 20,\\n    top: 20,\\n    width: 100,\\n    height: 80,\\n    borderTopWidth: 3,\\n    borderLeftWidth: 2,\\n    borderBottomWidth: 1,\\n    borderRightWidth: 4,\\n  },\\n};\\n\\nconst doc = {\\n  type: primitives.Document,\\n  children: [\\n    {\\n      type: primitives.Page,\\n      box: { width: 400, height: 600 },\\n      children: [view],\\n    },\\n  ],\\n};\\n\\n// Provide your own context\\nconst ctx = createContext();\\n\\nrender.default(ctx, doc);\\n```\\n\\nThis library exports a `render` function that takes two arguments:\\n\\n- *ctx*: This is the target context where the document is going to be rendered. React-pdf currently uses a [pdfkit](https://github.com/react-pdf/pdfkit) document as context, but it can target any other type of structure as long as it signature matches pdfkit API. In the future this will enable rendering documents into muliple formats in addition to PDF.\\n- *node*: Document root node. A node is a nested structure that defines a single element in a document. They are defined by it's `type` and arguments.\\n\\n## Node structure\\n\\nA node represents a single element inside a document. It's mainly defined by it's `type` (mandatory) field in addition to other values to define where that element is positioned inside the document (`box`), how it looks (`style`), how it should behave (`params`) and what sub-nodes it contains (`children`).\\n\\nThe root node must always be of type `DOCUMENT`, containing as many `PAGE` nodes as desired inside it's children field.\\n\\nBare in mind this package does not handle any type of node positioning, inheritance, style transformations or any other layout related logic. It's role is limited to render exactly the node it get's into the provided context. Take this into account when definig styles as `paddingTop`, `paddingLeft` and so on instead of the shortcut `padding`. For layout or styles transformation this project provides separate packages.\\n\\n### node.type\\n\\nMandatory field specifiying the type of the particular node. The full list of types can be found and imported from `@react-pdf/primitives`\\n\\n### node.box\\n\\nDefines bounding box where a particular node is located inside a document\\n\\n- left\\n- top\\n- width\\n- height\\n- paddingTop\\n- paddingLeft\\n- paddingBottom\\n- paddingRight\\n- marginTop\\n- marginLeft\\n- marginBottom\\n- marginRight\\n- borderTopWidth\\n- borderLeftWidth\\n- borderBottomWidth\\n- borderRightWidth\\n\\n### node.style\\n\\nDefines how the node looks like. There are some types of nodes that expect special style values, but generally all support:\\n\\n- color\\n- opacity\\n- overflow\\n- backgroundColor\\n- borderTopLeftRadius\\n- borderTopRightRadius\\n- borderBottomLeftRadius\\n- borderBottomRightRadius\\n- borderTopColor\\n- borderLeftColor\\n- borderBottomColor\\n- borderRightColor\\n- _others..._\\n\\n### node.props\\n\\nSpecific node params needed to render correctly ot behave like certain way. Specially needed for SVG nodes\\n\\n## PDF example\\n\\n```js\\nconst fs = require('fs');\\nconst render = require('@react-pdf/render');\\nconst pdfkit = require('@react-pdf/pdfkit');\\n\\nconst PDFDocument = pdfkit.default;\\n\\nconst ctx = new PDFDocument({ autoFirstPage: false });\\n\\nconst doc = {}; // See above\\n\\nrender.default(ctx, doc);\\n\\nconst stream = fs.createWriteStream('./test.pdf');\\n\\nctx.pipe(stream);\\n```\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/yoga\\n\\n> Prebuilt [yoga-layout](https://github.com/facebook/yoga) package with memory heap increase\\n\\n## Acknowledges\\n\\nThis project is forked from the great [yoga-layout-prebuilt](https://github.com/vadimdemedes/yoga-layout-prebuilt) from @vadimdemedes.\\n\\nAlso thanks to @Skywalker13 for providing the post-processing script for increasing build original memory heap.\\n\\n## Install\\n\\n```\\n$ npm install @react-pdf/yoga\\n```\\n\\n## Usage\\n\\n```js\\nimport Yoga from '@react-pdf/yoga';\\n// Same as if imported from yoga-layout\\n```\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/font\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/layout\\n\\n[end of README.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "bug_report.md",
        "README.md",
        "README.md",
        "README.md",
        "README.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "62ec4b36-1585-49a0-895a-0ef0f44bd44e",
        "score": 0.01639344262295082,
        "payload": {
          "text": "---\nname: Bug report\nabout: Create a report to help us improve\ntitle: ''\nlabels: ''\nassignees: ''\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior including code snippet (if applies):\n1. Go to '...'\n2. Click on '....'\n3. Scroll down to '....'\n4. See error\n\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n\n**Screenshots**\nIf applicable, add screenshots to help explain your problem.\n\n**Desktop (please complete the following information):**\n - OS: [e.g. MacOS, Windows]\n - Browser [e.g. chrome, safari]\n - React-pdf version [e.g. v1.1.0]\n\n<!-- Love react-pdf? Please consider supporting our collective:\n\ud83d\udc49  https://opencollective.com/react-pdf/donate -->\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/.github/ISSUE_TEMPLATE/bug_report.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "905a84df-25ec-45dc-b5a6-103e701d6b9d",
        "score": 0.016129032258064516,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/render\n\n> React-pdf render engine\n\n## How to install\n```sh\nyarn add @react-pdf/render\n```\n\n## How it works\n\n```js\nconst render = require('@react-pdf/render');\nconst primitives = require('@react-pdf/primitives');\n\nconst view = {\n  type: primitives.View,\n  style: {\n    backgroundColor: 'red',\n    borderTopLeftRadius: 5,\n    borderTopRightRadius: 10,\n    borderBottomLeftRadius: 0,\n    borderBottomRightRadius: 15,\n    borderTopColor: 'yellow',\n    borderLeftColor: 'green',\n    borderBottomColor: 'black',\n    borderRightColor: 'purple',\n  },\n  box: {\n    left: 20,\n    top: 20,\n    width: 100,\n    height: 80,\n    borderTopWidth: 3,\n    borderLeftWidth: 2,\n    borderBottomWidth: 1,\n    borderRightWidth: 4,\n  },\n};\n\nconst doc = {\n  type: primitives.Document,\n  children: [\n    {\n      type: primitives.Page,\n      box: { width: 400, height: 600 },\n      children: [view],\n    },\n  ],\n};\n\n// Provide your own context\nconst ctx = createContext();\n\nrender.default(ctx, doc);\n```\n\nThis library exports a `render` function that takes two arguments:\n\n- *ctx*: This is the target context where the document is going to be rendered. React-pdf currently uses a [pdfkit](https://github.com/react-pdf/pdfkit) document as context, but it can target any other type of structure as long as it signature matches pdfkit API. In the future this will enable rendering documents into muliple formats in addition to PDF.\n- *node*: Document root node. A node is a nested structure that defines a single element in a document. They are defined by it's `type` and arguments.\n\n## Node structure\n\nA node represents a single element inside a document. It's mainly defined by it's `type` (mandatory) field in addition to other values to define where that element is positioned inside the document (`box`), how it looks (`style`), how it should behave (`params`) and what sub-nodes it contains (`children`).\n\nThe root node must always be of type `DOCUMENT`, containing as many `PAGE` nodes as desired inside it's children field.\n\nBare in mind this package does not handle any type of node positioning, inheritance, style transformations or any other layout related logic. It's role is limited to render exactly the node it get's into the provided context. Take this into account when definig styles as `paddingTop`, `paddingLeft` and so on instead of the shortcut `padding`. For layout or styles transformation this project provides separate packages.\n\n### node.type\n\nMandatory field specifiying the type of the particular node. The full list of types can be found and imported from `@react-pdf/primitives`\n\n### node.box\n\nDefines bounding box where a particular node is located inside a document\n\n- left\n- top\n- width\n- height\n- paddingTop\n- paddingLeft\n- paddingBottom\n- paddingRight\n- marginTop\n- marginLeft\n- marginBottom\n- marginRight\n- borderTopWidth\n- borderLeftWidth\n- borderBottomWidth\n- borderRightWidth\n\n### node.style\n\nDefines how the node looks like. There are some types of nodes that expect special style values, but generally all support:\n\n- color\n- opacity\n- overflow\n- backgroundColor\n- borderTopLeftRadius\n- borderTopRightRadius\n- borderBottomLeftRadius\n- borderBottomRightRadius\n- borderTopColor\n- borderLeftColor\n- borderBottomColor\n- borderRightColor\n- _others..._\n\n### node.props\n\nSpecific node params needed to render correctly ot behave like certain way. Specially needed for SVG nodes\n\n## PDF example\n\n```js\nconst fs = require('fs');\nconst render = require('@react-pdf/render');\nconst pdfkit = require('@react-pdf/pdfkit');\n\nconst PDFDocument = pdfkit.default;\n\nconst ctx = new PDFDocument({ autoFirstPage: false });\n\nconst doc = {}; // See above\n\nrender.default(ctx, doc);\n\nconst stream = fs.createWriteStream('./test.pdf');\n\nctx.pipe(stream);\n```\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/render/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "99994c65-a7dc-42b4-a3cf-5a79d02ae31b",
        "score": 0.015873015873015872,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/yoga\n\n> Prebuilt [yoga-layout](https://github.com/facebook/yoga) package with memory heap increase\n\n## Acknowledges\n\nThis project is forked from the great [yoga-layout-prebuilt](https://github.com/vadimdemedes/yoga-layout-prebuilt) from @vadimdemedes.\n\nAlso thanks to @Skywalker13 for providing the post-processing script for increasing build original memory heap.\n\n## Install\n\n```\n$ npm install @react-pdf/yoga\n```\n\n## Usage\n\n```js\nimport Yoga from '@react-pdf/yoga';\n// Same as if imported from yoga-layout\n```\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/yoga/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "799dbb5c-a14c-42cb-947e-524fedfdae9e",
        "score": 0.015625,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/font\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/font/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "11da3cdb-0972-4d99-a5f4-61d31d301721",
        "score": 0.015384615384615385,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/layout\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-1552",
    "model_patch": "diff --git a/src/renderText.js b/src/renderText.js\n--- a/src/renderText.js\n+++ b/src/renderText.js\n@@ -10,7 +10,7 @@\n \n const renderText = (ctx, node) => {\n   if (!node) return;\n-  const { lines } = node;\n+  const lines = node.lines || [];\n \n   lines.forEach(line => {\n     const { x, y } = line;",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 99.82,
      "issue_embedding_time_ms": 99.82,
      "retrieval_time_ms_splade": 16.43,
      "retrieval_time_ms": 16.43,
      "total_retrieval_time_ms": 116.26,
      "generation_time_ms": 1464.04,
      "total_io_time_ms": 1580.29,
      "input_total_token_limit": null,
      "issue_text_tokens": 172,
      "vlm_tokens": 0,
      "retrieved_tokens": 1298,
      "prompt_template_tokens": 503,
      "total_input_prompt_tokens": 1973,
      "output_generated_tokens": 98,
      "total_io_tokens": 2071,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nEmpty Text with defined height throw \\\"Cannot read property '0' of undefined\\\"\\n**Describe the bug**\\r\\n The following snippet throw a TypeError \\\"Cannot read property '0' of undefined\\\"\\r\\n```javascript\\r\\n<View>\\r\\n  <Text style={{ height: 12 }}>{''}</Text>\\r\\n</View>\\r\\n```\\r\\n\\r\\n![screen](https://user-images.githubusercontent.com/1511512/132485670-9c9653b2-e563-438d-b73b-461cc16ed88b.png)\\r\\n![code](https://user-images.githubusercontent.com/1511512/132486410-efc68c57-bc52-4ce3-80b5-c2a67a3e058d.png)\\r\\n\\r\\nMaybe add an extra check `node.lines?.[0]` or provide default array for `lines`  ?\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/render\\n\\n> React-pdf render engine\\n\\n## How to install\\n```sh\\nyarn add @react-pdf/render\\n```\\n\\n## How it works\\n\\n```js\\nconst render = require('@react-pdf/render');\\nconst primitives = require('@react-pdf/primitives');\\n\\nconst view = {\\n  type: primitives.View,\\n  style: {\\n    backgroundColor: 'red',\\n    borderTopLeftRadius: 5,\\n    borderTopRightRadius: 10,\\n    borderBottomLeftRadius: 0,\\n    borderBottomRightRadius: 15,\\n    borderTopColor: 'yellow',\\n    borderLeftColor: 'green',\\n    borderBottomColor: 'black',\\n    borderRightColor: 'purple',\\n  },\\n  box: {\\n    left: 20,\\n    top: 20,\\n    width: 100,\\n    height: 80,\\n    borderTopWidth: 3,\\n    borderLeftWidth: 2,\\n    borderBottomWidth: 1,\\n    borderRightWidth: 4,\\n  },\\n};\\n\\nconst doc = {\\n  type: primitives.Document,\\n  children: [\\n    {\\n      type: primitives.Page,\\n      box: { width: 400, height: 600 },\\n      children: [view],\\n    },\\n  ],\\n};\\n\\n// Provide your own context\\nconst ctx = createContext();\\n\\nrender.default(ctx, doc);\\n```\\n\\nThis library exports a `render` function that takes two arguments:\\n\\n- *ctx*: This is the target context where the document is going to be rendered. React-pdf currently uses a [pdfkit](https://github.com/react-pdf/pdfkit) document as context, but it can target any other type of structure as long as it signature matches pdfkit API. In the future this will enable rendering documents into muliple formats in addition to PDF.\\n- *node*: Document root node. A node is a nested structure that defines a single element in a document. They are defined by it's `type` and arguments.\\n\\n## Node structure\\n\\nA node represents a single element inside a document. It's mainly defined by it's `type` (mandatory) field in addition to other values to define where that element is positioned inside the document (`box`), how it looks (`style`), how it should behave (`params`) and what sub-nodes it contains (`children`).\\n\\nThe root node must always be of type `DOCUMENT`, containing as many `PAGE` nodes as desired inside it's children field.\\n\\nBare in mind this package does not handle any type of node positioning, inheritance, style transformations or any other layout related logic. It's role is limited to render exactly the node it get's into the provided context. Take this into account when definig styles as `paddingTop`, `paddingLeft` and so on instead of the shortcut `padding`. For layout or styles transformation this project provides separate packages.\\n\\n### node.type\\n\\nMandatory field specifiying the type of the particular node. The full list of types can be found and imported from `@react-pdf/primitives`\\n\\n### node.box\\n\\nDefines bounding box where a particular node is located inside a document\\n\\n- left\\n- top\\n- width\\n- height\\n- paddingTop\\n- paddingLeft\\n- paddingBottom\\n- paddingRight\\n- marginTop\\n- marginLeft\\n- marginBottom\\n- marginRight\\n- borderTopWidth\\n- borderLeftWidth\\n- borderBottomWidth\\n- borderRightWidth\\n\\n### node.style\\n\\nDefines how the node looks like. There are some types of nodes that expect special style values, but generally all support:\\n\\n- color\\n- opacity\\n- overflow\\n- backgroundColor\\n- borderTopLeftRadius\\n- borderTopRightRadius\\n- borderBottomLeftRadius\\n- borderBottomRightRadius\\n- borderTopColor\\n- borderLeftColor\\n- borderBottomColor\\n- borderRightColor\\n- _others..._\\n\\n### node.props\\n\\nSpecific node params needed to render correctly ot behave like certain way. Specially needed for SVG nodes\\n\\n## PDF example\\n\\n```js\\nconst fs = require('fs');\\nconst render = require('@react-pdf/render');\\nconst pdfkit = require('@react-pdf/pdfkit');\\n\\nconst PDFDocument = pdfkit.default;\\n\\nconst ctx = new PDFDocument({ autoFirstPage: false });\\n\\nconst doc = {}; // See above\\n\\nrender.default(ctx, doc);\\n\\nconst stream = fs.createWriteStream('./test.pdf');\\n\\nctx.pipe(stream);\\n```\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/layout\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/image\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/primitives\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/types\\n\\n> React-pdf TypeScript definitions\\n\\n## How to install\\n\\n```sh\\nyarn add @react-pdf/types\\n```\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[end of README.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "README.md",
        "README.md",
        "README.md",
        "README.md",
        "README.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "905a84df-25ec-45dc-b5a6-103e701d6b9d",
        "score": 0.01639344262295082,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/render\n\n> React-pdf render engine\n\n## How to install\n```sh\nyarn add @react-pdf/render\n```\n\n## How it works\n\n```js\nconst render = require('@react-pdf/render');\nconst primitives = require('@react-pdf/primitives');\n\nconst view = {\n  type: primitives.View,\n  style: {\n    backgroundColor: 'red',\n    borderTopLeftRadius: 5,\n    borderTopRightRadius: 10,\n    borderBottomLeftRadius: 0,\n    borderBottomRightRadius: 15,\n    borderTopColor: 'yellow',\n    borderLeftColor: 'green',\n    borderBottomColor: 'black',\n    borderRightColor: 'purple',\n  },\n  box: {\n    left: 20,\n    top: 20,\n    width: 100,\n    height: 80,\n    borderTopWidth: 3,\n    borderLeftWidth: 2,\n    borderBottomWidth: 1,\n    borderRightWidth: 4,\n  },\n};\n\nconst doc = {\n  type: primitives.Document,\n  children: [\n    {\n      type: primitives.Page,\n      box: { width: 400, height: 600 },\n      children: [view],\n    },\n  ],\n};\n\n// Provide your own context\nconst ctx = createContext();\n\nrender.default(ctx, doc);\n```\n\nThis library exports a `render` function that takes two arguments:\n\n- *ctx*: This is the target context where the document is going to be rendered. React-pdf currently uses a [pdfkit](https://github.com/react-pdf/pdfkit) document as context, but it can target any other type of structure as long as it signature matches pdfkit API. In the future this will enable rendering documents into muliple formats in addition to PDF.\n- *node*: Document root node. A node is a nested structure that defines a single element in a document. They are defined by it's `type` and arguments.\n\n## Node structure\n\nA node represents a single element inside a document. It's mainly defined by it's `type` (mandatory) field in addition to other values to define where that element is positioned inside the document (`box`), how it looks (`style`), how it should behave (`params`) and what sub-nodes it contains (`children`).\n\nThe root node must always be of type `DOCUMENT`, containing as many `PAGE` nodes as desired inside it's children field.\n\nBare in mind this package does not handle any type of node positioning, inheritance, style transformations or any other layout related logic. It's role is limited to render exactly the node it get's into the provided context. Take this into account when definig styles as `paddingTop`, `paddingLeft` and so on instead of the shortcut `padding`. For layout or styles transformation this project provides separate packages.\n\n### node.type\n\nMandatory field specifiying the type of the particular node. The full list of types can be found and imported from `@react-pdf/primitives`\n\n### node.box\n\nDefines bounding box where a particular node is located inside a document\n\n- left\n- top\n- width\n- height\n- paddingTop\n- paddingLeft\n- paddingBottom\n- paddingRight\n- marginTop\n- marginLeft\n- marginBottom\n- marginRight\n- borderTopWidth\n- borderLeftWidth\n- borderBottomWidth\n- borderRightWidth\n\n### node.style\n\nDefines how the node looks like. There are some types of nodes that expect special style values, but generally all support:\n\n- color\n- opacity\n- overflow\n- backgroundColor\n- borderTopLeftRadius\n- borderTopRightRadius\n- borderBottomLeftRadius\n- borderBottomRightRadius\n- borderTopColor\n- borderLeftColor\n- borderBottomColor\n- borderRightColor\n- _others..._\n\n### node.props\n\nSpecific node params needed to render correctly ot behave like certain way. Specially needed for SVG nodes\n\n## PDF example\n\n```js\nconst fs = require('fs');\nconst render = require('@react-pdf/render');\nconst pdfkit = require('@react-pdf/pdfkit');\n\nconst PDFDocument = pdfkit.default;\n\nconst ctx = new PDFDocument({ autoFirstPage: false });\n\nconst doc = {}; // See above\n\nrender.default(ctx, doc);\n\nconst stream = fs.createWriteStream('./test.pdf');\n\nctx.pipe(stream);\n```\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/render/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "11da3cdb-0972-4d99-a5f4-61d31d301721",
        "score": 0.016129032258064516,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/layout\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "c5a7a567-d45e-42d7-8f2b-ea02a1c8c800",
        "score": 0.015873015873015872,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/image\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/image/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "45796c1e-6dac-4686-adda-fc23c13b75b8",
        "score": 0.015625,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/primitives\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/primitives/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "73776f8b-8495-4aad-893b-b09769b53db3",
        "score": 0.015384615384615385,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/types\n\n> React-pdf TypeScript definitions\n\n## How to install\n\n```sh\nyarn add @react-pdf/types\n```\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/types/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-1541",
    "model_patch": "diff --git a/src/styles.js b/src/styles.js\nnew file mode 100644\nindex 0000000..e69de29\n--- /dev/null\n+++ b/src/styles.js\n@@ -0,0 +1,10 @@\n+export const fullPageStyle = {\n+  display: 'flex',\n+  flexDirection: 'column',\n+  justifyContent: 'center',\n+  alignItems: 'center',\n+  width: '100vw',\n+  height: '100vh',\n+  margin: 0,\n+  padding: 0,\n+};\ndiff --git a/src/App.js b/src/App.js\nindex e69de29..e69de29\n--- a/src/App.js\n+++ b/src/App.js\n@@ -0,0 +1,15 @@\n+import React from 'react';\n+import { fullPageStyle } from './styles';\n+\n+function App() {\n+  return (\n+    <div style={fullPageStyle}>\n+      <div style={{ backgroundColor: 'lightblue', flex: 1, width: '100%' }}>\n+        Flex Item 1\n+      </div>\n+      <div style={{ backgroundColor: 'lightcoral', flex: 1, width: '100%' }}>\n+        Flex Item 2\n+      </div>\n+    </div>\n+  );\n+}\n+\n+export default App;",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 133.76,
      "issue_embedding_time_ms": 133.76,
      "retrieval_time_ms_splade": 18.17,
      "retrieval_time_ms": 18.17,
      "total_retrieval_time_ms": 151.93,
      "generation_time_ms": 3963.43,
      "total_io_time_ms": 4115.36,
      "input_total_token_limit": null,
      "issue_text_tokens": 689,
      "vlm_tokens": 0,
      "retrieved_tokens": 1250,
      "prompt_template_tokens": 503,
      "total_input_prompt_tokens": 2442,
      "output_generated_tokens": 300,
      "total_io_tokens": 2742,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nflexbox elements doesn't stretch to full page size\\n**Describe the bug**\\r\\nflexbox elements doesn't stretch to full page size\\r\\n\\r\\n\\r\\n**To Reproduce**\\r\\nSteps to reproduce the behavior including code snippet (if applies):\\r\\n1. Go to [repl](https://react-pdf.org/repl?code=140630f60760ce02e004b027806c0a6538178e06518b51c00b5551803a1002754043195002806f60e39c64057016c200b8e2b76ec009804b28001d92d4482039003334003c1401a362256a550045c4d1031c644100893af0816b48b8008d68800d601cca982e11440613064302a4b0077127a3b6d005f2d6d2f50c16111096959793865354d6d765d032354133301380b04a8877c807104c100467b3858e06d2571646424dca7170f2f1f7f40e0cb1a514a9150f15118224b0016000600520996ed4f5252e4f667374f6f5f00a090b2cdd45b26e8e068804a006e56f0687800212e772c38465bac003e6fb68003cfa300817817181fc7a408002ad1dca8043e0d09866120d0504a2046cd168439d840801ab8950a164410d118f439012789e83989a4f2752a9289a7b53a78a0401e84964fc4121c0c91102002a7a2849d503c38388a4505e2f225aa2848b79fcd0a0b093cf862305bcd07827890e843d5a00253a09961fa0018ad22ea25415118ef772dd5a5ea00000)\\r\\n2. '....'\\r\\n3. '....'\\r\\n4. See error\\r\\n\\r\\nthe same layout in html , css \\r\\n[codesanbox](https://codesandbox.io/s/great-lumiere-j7fx0?file=/index.html)\\r\\n\\r\\n**Expected behavior**\\r\\nIt should work how browser does\\r\\n\\r\\n**Screenshots**\\r\\n\\r\\nHow it looks: \\r\\n<img width=\\\"599\\\" alt=\\\"\\u0421\\u043d\\u0438\\u043c\\u043e\\u043a \\u044d\\u043a\\u0440\\u0430\\u043d\\u0430 2021-09-16 \\u0432 11 19 41\\\" src=\\\"https://user-images.githubusercontent.com/6726016/133747387-36b0979e-13ca-46a8-88f9-d5f814b744fc.png\\\">\\r\\n\\r\\nHow it should be: \\r\\n<img width=\\\"600\\\" alt=\\\"\\u0421\\u043d\\u0438\\u043c\\u043e\\u043a \\u044d\\u043a\\u0440\\u0430\\u043d\\u0430 2021-09-16 \\u0432 11 19 32\\\" src=\\\"https://user-images.githubusercontent.com/6726016/133747413-879dda20-3a50-4163-ad6f-1f4d0a8a879b.png\\\">\\r\\n\\r\\n**Desktop (please complete the following information):**\\r\\n - React-pdf version: current\\r\\n\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/render\\n\\n> React-pdf render engine\\n\\n## How to install\\n```sh\\nyarn add @react-pdf/render\\n```\\n\\n## How it works\\n\\n```js\\nconst render = require('@react-pdf/render');\\nconst primitives = require('@react-pdf/primitives');\\n\\nconst view = {\\n  type: primitives.View,\\n  style: {\\n    backgroundColor: 'red',\\n    borderTopLeftRadius: 5,\\n    borderTopRightRadius: 10,\\n    borderBottomLeftRadius: 0,\\n    borderBottomRightRadius: 15,\\n    borderTopColor: 'yellow',\\n    borderLeftColor: 'green',\\n    borderBottomColor: 'black',\\n    borderRightColor: 'purple',\\n  },\\n  box: {\\n    left: 20,\\n    top: 20,\\n    width: 100,\\n    height: 80,\\n    borderTopWidth: 3,\\n    borderLeftWidth: 2,\\n    borderBottomWidth: 1,\\n    borderRightWidth: 4,\\n  },\\n};\\n\\nconst doc = {\\n  type: primitives.Document,\\n  children: [\\n    {\\n      type: primitives.Page,\\n      box: { width: 400, height: 600 },\\n      children: [view],\\n    },\\n  ],\\n};\\n\\n// Provide your own context\\nconst ctx = createContext();\\n\\nrender.default(ctx, doc);\\n```\\n\\nThis library exports a `render` function that takes two arguments:\\n\\n- *ctx*: This is the target context where the document is going to be rendered. React-pdf currently uses a [pdfkit](https://github.com/react-pdf/pdfkit) document as context, but it can target any other type of structure as long as it signature matches pdfkit API. In the future this will enable rendering documents into muliple formats in addition to PDF.\\n- *node*: Document root node. A node is a nested structure that defines a single element in a document. They are defined by it's `type` and arguments.\\n\\n## Node structure\\n\\nA node represents a single element inside a document. It's mainly defined by it's `type` (mandatory) field in addition to other values to define where that element is positioned inside the document (`box`), how it looks (`style`), how it should behave (`params`) and what sub-nodes it contains (`children`).\\n\\nThe root node must always be of type `DOCUMENT`, containing as many `PAGE` nodes as desired inside it's children field.\\n\\nBare in mind this package does not handle any type of node positioning, inheritance, style transformations or any other layout related logic. It's role is limited to render exactly the node it get's into the provided context. Take this into account when definig styles as `paddingTop`, `paddingLeft` and so on instead of the shortcut `padding`. For layout or styles transformation this project provides separate packages.\\n\\n### node.type\\n\\nMandatory field specifiying the type of the particular node. The full list of types can be found and imported from `@react-pdf/primitives`\\n\\n### node.box\\n\\nDefines bounding box where a particular node is located inside a document\\n\\n- left\\n- top\\n- width\\n- height\\n- paddingTop\\n- paddingLeft\\n- paddingBottom\\n- paddingRight\\n- marginTop\\n- marginLeft\\n- marginBottom\\n- marginRight\\n- borderTopWidth\\n- borderLeftWidth\\n- borderBottomWidth\\n- borderRightWidth\\n\\n### node.style\\n\\nDefines how the node looks like. There are some types of nodes that expect special style values, but generally all support:\\n\\n- color\\n- opacity\\n- overflow\\n- backgroundColor\\n- borderTopLeftRadius\\n- borderTopRightRadius\\n- borderBottomLeftRadius\\n- borderBottomRightRadius\\n- borderTopColor\\n- borderLeftColor\\n- borderBottomColor\\n- borderRightColor\\n- _others..._\\n\\n### node.props\\n\\nSpecific node params needed to render correctly ot behave like certain way. Specially needed for SVG nodes\\n\\n## PDF example\\n\\n```js\\nconst fs = require('fs');\\nconst render = require('@react-pdf/render');\\nconst pdfkit = require('@react-pdf/pdfkit');\\n\\nconst PDFDocument = pdfkit.default;\\n\\nconst ctx = new PDFDocument({ autoFirstPage: false });\\n\\nconst doc = {}; // See above\\n\\nrender.default(ctx, doc);\\n\\nconst stream = fs.createWriteStream('./test.pdf');\\n\\nctx.pipe(stream);\\n```\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/layout\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/font\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/primitives\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/image\\n\\n[end of README.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "README.md",
        "README.md",
        "README.md",
        "README.md",
        "README.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "905a84df-25ec-45dc-b5a6-103e701d6b9d",
        "score": 0.01639344262295082,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/render\n\n> React-pdf render engine\n\n## How to install\n```sh\nyarn add @react-pdf/render\n```\n\n## How it works\n\n```js\nconst render = require('@react-pdf/render');\nconst primitives = require('@react-pdf/primitives');\n\nconst view = {\n  type: primitives.View,\n  style: {\n    backgroundColor: 'red',\n    borderTopLeftRadius: 5,\n    borderTopRightRadius: 10,\n    borderBottomLeftRadius: 0,\n    borderBottomRightRadius: 15,\n    borderTopColor: 'yellow',\n    borderLeftColor: 'green',\n    borderBottomColor: 'black',\n    borderRightColor: 'purple',\n  },\n  box: {\n    left: 20,\n    top: 20,\n    width: 100,\n    height: 80,\n    borderTopWidth: 3,\n    borderLeftWidth: 2,\n    borderBottomWidth: 1,\n    borderRightWidth: 4,\n  },\n};\n\nconst doc = {\n  type: primitives.Document,\n  children: [\n    {\n      type: primitives.Page,\n      box: { width: 400, height: 600 },\n      children: [view],\n    },\n  ],\n};\n\n// Provide your own context\nconst ctx = createContext();\n\nrender.default(ctx, doc);\n```\n\nThis library exports a `render` function that takes two arguments:\n\n- *ctx*: This is the target context where the document is going to be rendered. React-pdf currently uses a [pdfkit](https://github.com/react-pdf/pdfkit) document as context, but it can target any other type of structure as long as it signature matches pdfkit API. In the future this will enable rendering documents into muliple formats in addition to PDF.\n- *node*: Document root node. A node is a nested structure that defines a single element in a document. They are defined by it's `type` and arguments.\n\n## Node structure\n\nA node represents a single element inside a document. It's mainly defined by it's `type` (mandatory) field in addition to other values to define where that element is positioned inside the document (`box`), how it looks (`style`), how it should behave (`params`) and what sub-nodes it contains (`children`).\n\nThe root node must always be of type `DOCUMENT`, containing as many `PAGE` nodes as desired inside it's children field.\n\nBare in mind this package does not handle any type of node positioning, inheritance, style transformations or any other layout related logic. It's role is limited to render exactly the node it get's into the provided context. Take this into account when definig styles as `paddingTop`, `paddingLeft` and so on instead of the shortcut `padding`. For layout or styles transformation this project provides separate packages.\n\n### node.type\n\nMandatory field specifiying the type of the particular node. The full list of types can be found and imported from `@react-pdf/primitives`\n\n### node.box\n\nDefines bounding box where a particular node is located inside a document\n\n- left\n- top\n- width\n- height\n- paddingTop\n- paddingLeft\n- paddingBottom\n- paddingRight\n- marginTop\n- marginLeft\n- marginBottom\n- marginRight\n- borderTopWidth\n- borderLeftWidth\n- borderBottomWidth\n- borderRightWidth\n\n### node.style\n\nDefines how the node looks like. There are some types of nodes that expect special style values, but generally all support:\n\n- color\n- opacity\n- overflow\n- backgroundColor\n- borderTopLeftRadius\n- borderTopRightRadius\n- borderBottomLeftRadius\n- borderBottomRightRadius\n- borderTopColor\n- borderLeftColor\n- borderBottomColor\n- borderRightColor\n- _others..._\n\n### node.props\n\nSpecific node params needed to render correctly ot behave like certain way. Specially needed for SVG nodes\n\n## PDF example\n\n```js\nconst fs = require('fs');\nconst render = require('@react-pdf/render');\nconst pdfkit = require('@react-pdf/pdfkit');\n\nconst PDFDocument = pdfkit.default;\n\nconst ctx = new PDFDocument({ autoFirstPage: false });\n\nconst doc = {}; // See above\n\nrender.default(ctx, doc);\n\nconst stream = fs.createWriteStream('./test.pdf');\n\nctx.pipe(stream);\n```\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/render/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "11da3cdb-0972-4d99-a5f4-61d31d301721",
        "score": 0.016129032258064516,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/layout\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "799dbb5c-a14c-42cb-947e-524fedfdae9e",
        "score": 0.015873015873015872,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/font\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/font/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "45796c1e-6dac-4686-adda-fc23c13b75b8",
        "score": 0.015625,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/primitives\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/primitives/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "c5a7a567-d45e-42d7-8f2b-ea02a1c8c800",
        "score": 0.015384615384615385,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/image\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/image/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-1306",
    "model_patch": "diff --git a/@react-pdf/types/image.d.ts b/@react-pdf/types/image.d.ts\n--- a/@react-pdf/types/image.d.ts\n+++ b/@react-pdf/types/image.d.ts\n@@ -4,6 +4,7 @@ export type SourceObject =\n   | string\n   | { data: Buffer; format: 'png' | 'jpg' }\n   | { uri: string; method: HTTPMethod; body: any; headers: any }\n+  | (() => Promise<string>);\n \n type HTTPMethod = 'GET' | 'HEAD' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 169.98,
      "issue_embedding_time_ms": 169.98,
      "retrieval_time_ms_splade": 22.26,
      "retrieval_time_ms": 22.26,
      "total_retrieval_time_ms": 192.24,
      "generation_time_ms": 2067.89,
      "total_io_time_ms": 2260.13,
      "input_total_token_limit": null,
      "issue_text_tokens": 527,
      "vlm_tokens": 0,
      "retrieved_tokens": 3432,
      "prompt_template_tokens": 510,
      "total_input_prompt_tokens": 4469,
      "output_generated_tokens": 141,
      "total_io_tokens": 4610,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nType for Image SourceObject doesn't match documentation\\n**Describe the bug**\\r\\nThe documentation states that an Image source object can be a function that returns a string or promise string. \\r\\n\\r\\n() => String | Promise<String>\\r\\n\\r\\nHowever, the type definition in `@react-pdf/types/image.d.ts` does not support a promise\\r\\n\\r\\n```\\r\\nexport type SourceObject =\\r\\n  | string\\r\\n  | { data: Buffer; format: 'png' | 'jpg' }\\r\\n  | { uri: string; method: HTTPMethod; body: any; headers: any }\\r\\n```\\r\\n\\r\\nso I am getting a compilation error of\\r\\n```\\r\\n Overload 1 of 2, '(props: Readonly<ImageWithSrcProp> | Readonly<ImageWithSourceProp>): Image', gave the following error.\\r\\n    Type '() => Promise<string>' is not assignable to type 'SourceObject'.\\r\\n ```\\r\\n \\r\\n the type should be something like \\r\\n \\r\\n ```\\r\\n type HTTPMethod = 'GET' | 'HEAD' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\\r\\n\\r\\nexport type SourceObject =\\r\\n  | string\\r\\n  | { data: Buffer; format: 'png' | 'jpg' }\\r\\n  | { uri: string; method: HTTPMethod; body: any; headers: any }\\r\\n  | {(): Promise<string>};\\r\\n ```\\r\\n\\r\\n**To Reproduce**\\r\\nSteps to reproduce the behavior including code snippet (if applies):\\r\\n\\r\\n```\\r\\n<Image src={async (): Promise<string> => (await getDataUrl())} />\\r\\n```\\r\\n\\r\\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\\r\\n\\r\\n**Expected behavior**\\r\\nA clear and concise description of what you expected to happen.\\r\\n\\r\\nIt should not throw a compilation error. \\r\\n\\r\\n**Screenshots**\\r\\nIf applicable, add screenshots to help explain your problem.\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/51760107/114592075-8bb6cc00-9c58-11eb-9afc-dbc5c0e7a387.png)\\r\\n![image](https://user-images.githubusercontent.com/51760107/114592085-8fe2e980-9c58-11eb-8721-9703759129b3.png)\\r\\n\\r\\n**Desktop (please complete the following information):**\\r\\n - OS: [e.g. MacOS, Windows]\\r\\n - Browser [e.g. chrome, safari]\\r\\n - React-pdf version [e.g. v1.1.0]\\r\\n \\r\\n MacOS, chrome, v2.0.4\\r\\n\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of image.d.ts]\\ntype HTTPMethod = 'GET' | 'HEAD' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\\n\\nexport type SourceObject =\\n  | string\\n  | { data: Buffer; format: 'png' | 'jpg' }\\n  | { uri: string; method: HTTPMethod; body: any; headers: any };\\n\\n[end of image.d.ts]\\n[start of resolve.js]\\nimport fs from 'fs';\\nimport url from 'url';\\nimport path from 'path';\\nimport fetch from 'cross-fetch';\\n\\nimport PNG from './png';\\nimport JPEG from './jpeg';\\nimport createCache from './cache';\\n\\nexport const IMAGE_CACHE = createCache({ limit: 30 });\\n\\nconst getAbsoluteLocalPath = src => {\\n  if (BROWSER) {\\n    throw new Error('Cannot check local paths in client-side environment');\\n  }\\n\\n  const { protocol, auth, host, port, hostname, path: pathname } = url.parse(\\n    src,\\n  );\\n  const absolutePath = path.resolve(pathname);\\n  if ((protocol && protocol !== 'file:') || auth || host || port || hostname) {\\n    return undefined;\\n  }\\n  return absolutePath;\\n};\\n\\nconst fetchLocalFile = src =>\\n  new Promise((resolve, reject) => {\\n    try {\\n      if (BROWSER) {\\n        reject(new Error('Cannot fetch local file in this environemnt'));\\n        return;\\n      }\\n      const absolutePath = getAbsoluteLocalPath(src);\\n      if (!absolutePath) {\\n        reject(new Error(`Cannot fetch non-local path: ${src}`));\\n        return;\\n      }\\n      fs.readFile(absolutePath, (err, data) =>\\n        err ? reject(err) : resolve(data),\\n      );\\n    } catch (err) {\\n      reject(err);\\n    }\\n  });\\n\\nconst fetchRemoteFile = async (uri, options) => {\\n  const response = await fetch(uri, options);\\n\\n  const buffer = await (response.buffer\\n    ? response.buffer()\\n    : response.arrayBuffer());\\n\\n  return buffer.constructor.name === 'Buffer' ? buffer : Buffer.from(buffer);\\n};\\n\\nconst isValidFormat = format => {\\n  const lower = format.toLowerCase();\\n  return lower === 'jpg' || lower === 'jpeg' || lower === 'png';\\n};\\n\\nconst guessFormat = buffer => {\\n  let format;\\n\\n  if (JPEG.isValid(buffer)) {\\n    format = 'jpg';\\n  } else if (PNG.isValid(buffer)) {\\n    format = 'png';\\n  }\\n\\n  return format;\\n};\\n\\nconst isCompatibleBase64 = ({ uri }) =>\\n  /^data:image\\\\/[a-zA-Z]*;base64,[^\\\"]*/g.test(uri);\\n\\nfunction getImage(body, extension) {\\n  switch (extension.toLowerCase()) {\\n    case 'jpg':\\n    case 'jpeg':\\n      return new JPEG(body);\\n    case 'png':\\n      return new PNG(body);\\n    default:\\n      return null;\\n  }\\n}\\n\\nconst resolveBase64Image = ({ uri }) => {\\n  const match = /^data:image\\\\/([a-zA-Z]*);base64,([^\\\"]*)/g.exec(uri);\\n  const format = match[1];\\n  const data = match[2];\\n\\n  if (!isValidFormat(format)) {\\n    throw new Error(`Base64 image invalid format: ${format}`);\\n  }\\n\\n  return new Promise(resolve => {\\n    return resolve(getImage(Buffer.from(data, 'base64'), format));\\n  });\\n};\\n\\nconst resolveImageFromData = src => {\\n  if (src.data && src.format) {\\n    return new Promise(resolve => resolve(getImage(src.data, src.format)));\\n  }\\n\\n  throw new Error(`Invalid data given for local file: ${JSON.stringify(src)}`);\\n};\\n\\nconst resolveBufferImage = buffer => {\\n  const format = guessFormat(buffer);\\n\\n  if (format) {\\n    return new Promise(resolve => resolve(getImage(buffer, format)));\\n  }\\n\\n  return Promise.resolve();\\n};\\n\\nconst getImageFormat = body => {\\n  const isPng =\\n    body[0] === 137 &&\\n    body[1] === 80 &&\\n    body[2] === 78 &&\\n    body[3] === 71 &&\\n    body[4] === 13 &&\\n    body[5] === 10 &&\\n    body[6] === 26 &&\\n    body[7] === 10;\\n\\n  const isJpg = body[0] === 255 && body[1] === 216 && body[2] === 255;\\n\\n  let extension = '';\\n  if (isPng) {\\n    extension = 'png';\\n  } else if (isJpg) {\\n    extension = 'jpg';\\n  } else {\\n    throw new Error('Not valid image extension');\\n  }\\n\\n  return extension;\\n};\\n\\nconst resolveImageFromUrl = async src => {\\n  const { uri, body, headers, method = 'GET' } = src;\\n\\n  const data =\\n    !BROWSER && getAbsoluteLocalPath(uri)\\n      ? await fetchLocalFile(uri)\\n      : await fetchRemoteFile(uri, { body, headers, method });\\n\\n  const extension = getImageFormat(data);\\n\\n  return getImage(data, extension);\\n};\\n\\nconst resolveImage = (src, { cache = true } = {}) => {\\n  const cacheKey = src.data ? src.data.toString() : src.uri;\\n\\n  if (cache && IMAGE_CACHE.get(cacheKey)) {\\n    return IMAGE_CACHE.get(cacheKey);\\n  }\\n\\n  let image;\\n  if (isCompatibleBase64(src)) {\\n    image = resolveBase64Image(src);\\n  } else if (Buffer.isBuffer(src)) {\\n    image = resolveBufferImage(src);\\n  } else if (typeof src === 'object' && src.data) {\\n    image = resolveImageFromData(src);\\n  } else {\\n    image = resolveImageFromUrl(src);\\n  }\\n\\n  if (!image) {\\n    throw new Error('Cannot resolve image');\\n  }\\n\\n  if (cache) {\\n    IMAGE_CACHE.set(cacheKey, image);\\n  }\\n\\n  return image;\\n};\\n\\nexport default resolveImage;\\n\\n[end of resolve.js]\\n[start of bug_report.md]\\n---\\nname: Bug report\\nabout: Create a report to help us improve\\ntitle: ''\\nlabels: ''\\nassignees: ''\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior including code snippet (if applies):\\n1. Go to '...'\\n2. Click on '....'\\n3. Scroll down to '....'\\n4. See error\\n\\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n**Screenshots**\\nIf applicable, add screenshots to help explain your problem.\\n\\n**Desktop (please complete the following information):**\\n - OS: [e.g. MacOS, Windows]\\n - Browser [e.g. chrome, safari]\\n - React-pdf version [e.g. v1.1.0]\\n\\n<!-- Love react-pdf? Please consider supporting our collective:\\n\\ud83d\\udc49  https://opencollective.com/react-pdf/donate -->\\n\\n[end of bug_report.md]\\n[start of resolve.test.js]\\nimport fs from 'fs';\\nimport path from 'path';\\n\\nimport resolveImage, { IMAGE_CACHE } from '../src/resolve';\\n\\nconst jpgImageUrl = 'https://react-pdf.org/static/images/quijote1.jpg';\\nconst pngImageUrl = 'https://react-pdf.org/static/images/quijote2.png';\\nconst jpgLogalPath = path.join(__dirname, './assets/test.jpg');\\nconst localJPGImage = fs.readFileSync(jpgLogalPath);\\nconst pngLogalPath = path.join(__dirname, './assets/test.png');\\nconst localPNGImage = fs.readFileSync(pngLogalPath);\\n\\ndescribe('image resolveImage', () => {\\n  beforeEach(() => {\\n    fetch.resetMocks();\\n    IMAGE_CACHE.reset();\\n  });\\n\\n  test('Should fetch remote image using GET method by default', async () => {\\n    fetch.once(localJPGImage);\\n\\n    await resolveImage({ uri: jpgImageUrl });\\n\\n    expect(fetch.mock.calls[0][1].method).toBe('GET');\\n  });\\n\\n  test('Should fetch remote image using passed method', async () => {\\n    fetch.once(localJPGImage);\\n\\n    await resolveImage({ uri: jpgImageUrl, method: 'POST' });\\n\\n    expect(fetch.mock.calls[0][1].method).toBe('POST');\\n  });\\n\\n  test('Should fetch remote image using passed headers', async () => {\\n    fetch.once(localJPGImage);\\n\\n    const headers = { Authorization: 'Bearer qwerty' };\\n    await resolveImage({ uri: jpgImageUrl, headers });\\n\\n    expect(fetch.mock.calls[0][1].headers).toEqual(headers);\\n  });\\n\\n  test('Should fetch remote image using passed body', async () => {\\n    fetch.once(localJPGImage);\\n\\n    const body = 'qwerty';\\n    await resolveImage({ uri: jpgImageUrl, body });\\n\\n    expect(fetch.mock.calls[0][1].body).toEqual(body);\\n  });\\n\\n  test('Should render a jpeg image over http', async () => {\\n    fetch.once(localJPGImage);\\n\\n    const image = await resolveImage({ uri: jpgImageUrl });\\n\\n    expect(image.data).toBeTruthy();\\n    expect(image.width).toBeGreaterThan(0);\\n    expect(image.height).toBeGreaterThan(0);\\n  });\\n\\n  test('Should render a png image over http', async () => {\\n    fetch.once(localPNGImage);\\n\\n    const image = await resolveImage({ uri: pngImageUrl });\\n\\n    expect(image.data).toBeTruthy();\\n    expect(image.width).toBeGreaterThan(0);\\n    expect(image.height).toBeGreaterThan(0);\\n  });\\n\\n  test('Should render a local image from src object', async () => {\\n    const image = await resolveImage({\\n      uri: './packages/layout/tests/assets/test.jpg',\\n    });\\n\\n    expect(image.data).toBeTruthy();\\n    expect(image.width).toBeGreaterThan(0);\\n    expect(image.height).toBeGreaterThan(0);\\n  });\\n\\n  test('Should render a local image from data', async () => {\\n    const image = await resolveImage({ data: localJPGImage, format: 'jpg' });\\n\\n    expect(image.data).toBeTruthy();\\n    expect(image.width).toBeGreaterThan(0);\\n    expect(image.height).toBeGreaterThan(0);\\n  });\\n\\n  test('Should render a base64 image', async () => {\\n    const image = await resolveImage({\\n      uri:\\n        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z/C/HgAGgwJ/lK3Q6wAAAABJRU5ErkJggg==',\\n    });\\n\\n    expect(image.data).toBeTruthy();\\n    expect(image.width).toBeGreaterThan(0);\\n    expect(image.height).toBeGreaterThan(0);\\n  });\\n\\n  test('Should render a buffer jpg image', async () => {\\n    const image = await resolveImage(localJPGImage);\\n\\n    expect(image.data).toBeTruthy();\\n    expect(image.width).toBeGreaterThan(0);\\n    expect(image.height).toBeGreaterThan(0);\\n  });\\n\\n  test('Should render a buffer png image', async () => {\\n    const image = await resolveImage(localPNGImage);\\n\\n    expect(image.data).toBeTruthy();\\n    expect(image.width).toBeGreaterThan(0);\\n    expect(image.height).toBeGreaterThan(0);\\n  });\\n\\n  test('Should not cache previously loaded remote images if flag false', async () => {\\n    fetch.mockResponse(localJPGImage);\\n\\n    const image1 = await resolveImage({ uri: jpgImageUrl }, { cache: false });\\n    const image2 = await resolveImage({ uri: jpgImageUrl }, { cache: false });\\n\\n    expect(image1).not.toBe(image2);\\n  });\\n\\n  test('Should cache previously loaded local images by default', async () => {\\n    fetch.mockResponse(localJPGImage);\\n\\n    const image1 = await resolveImage({ uri: jpgImageUrl });\\n    const image2 = await resolveImage({ uri: jpgImageUrl });\\n\\n    expect(image1).toBe(image2);\\n  });\\n\\n  test('Should not cache previously loaded local images if flag false', async () => {\\n    fetch.mockResponse(localJPGImage);\\n\\n    const image1 = await resolveImage(localJPGImage, { cache: false });\\n    const image2 = await resolveImage(localJPGImage, { cache: false });\\n\\n    expect(image1).not.toBe(image2);\\n  });\\n});\\n\\n[end of resolve.test.js]\\n[start of font.js]\\n/* eslint-disable max-classes-per-file */\\n\\nimport isUrl from 'is-url';\\nimport fetch from 'cross-fetch';\\nimport fontkit from '@react-pdf/fontkit';\\n\\nconst fetchFont = async (src, options) => {\\n  const response = await fetch(src, options);\\n\\n  const buffer = await (response.buffer\\n    ? response.buffer()\\n    : response.arrayBuffer());\\n\\n  return buffer.constructor.name === 'Buffer' ? buffer : Buffer.from(buffer);\\n};\\n\\nconst isDataUrl = dataUrl => {\\n  const header = dataUrl.split(',')[0];\\n  const hasDataPrefix = header.substring(0, 5) === 'data:';\\n  const hasBase64Prefix = header.split(';')[1] === 'base64';\\n\\n  return hasDataPrefix && hasBase64Prefix;\\n};\\n\\nclass FontSource {\\n  constructor(src, fontFamily, fontStyle, fontWeight, options) {\\n    this.src = src;\\n    this.fontFamily = fontFamily;\\n    this.fontStyle = fontStyle || 'normal';\\n    this.fontWeight = fontWeight || 400;\\n\\n    this.data = null;\\n    this.loading = false;\\n    this.options = options;\\n  }\\n\\n  async load() {\\n    this.loading = true;\\n\\n    const { postscriptName } = this.options;\\n\\n    if (isDataUrl(this.src)) {\\n      this.data = fontkit.create(\\n        Buffer.from(this.src.split(',')[1], 'base64'),\\n        postscriptName,\\n      );\\n    } else if (BROWSER || isUrl(this.src)) {\\n      const { headers, body, method = 'GET' } = this.options;\\n      const data = await fetchFont(this.src, { method, body, headers });\\n      this.data = fontkit.create(data, postscriptName);\\n    } else {\\n      this.data = await new Promise((resolve, reject) =>\\n        fontkit.open(this.src, postscriptName, (err, data) =>\\n          err ? reject(err) : resolve(data),\\n        ),\\n      );\\n    }\\n\\n    this.loading = false;\\n  }\\n}\\n\\nclass Font {\\n  static create(family) {\\n    return new Font(family);\\n  }\\n\\n  constructor(family) {\\n    this.family = family;\\n    this.sources = [];\\n  }\\n\\n  register({ src, fontWeight, fontStyle, ...options }) {\\n    this.sources.push(\\n      new FontSource(src, this.family, fontStyle, fontWeight, options),\\n    );\\n  }\\n\\n  resolve(descriptor) {\\n    const { fontWeight = 400, fontStyle = 'normal' } = descriptor;\\n    const styleSources = this.sources.filter(s => s.fontStyle === fontStyle);\\n\\n    // Weight resolution. https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight#Fallback_weights\\n    const exactFit = styleSources.find(s => s.fontWeight === fontWeight);\\n\\n    if (exactFit) return exactFit;\\n\\n    let res;\\n\\n    if (fontWeight >= 400 && fontWeight <= 500) {\\n      const leftOffset = styleSources.filter(s => s.fontWeight <= fontWeight);\\n      const rightOffset = styleSources.filter(s => s.fontWeight > 500);\\n      const fit = styleSources.filter(\\n        s => s.fontWeight >= fontWeight && s.fontWeight < 500,\\n      );\\n\\n      res = fit[0] || leftOffset[leftOffset.length - 1] || rightOffset[0];\\n    }\\n\\n    const lt = styleSources.filter(s => s.fontWeight < fontWeight);\\n    const gt = styleSources.filter(s => s.fontWeight > fontWeight);\\n\\n    if (fontWeight < 400) {\\n      res = lt[lt.length - 1] || gt[0];\\n    }\\n\\n    if (fontWeight > 500) {\\n      res = gt[0] || lt[lt.length - 1];\\n    }\\n\\n    if (!res) {\\n      throw new Error(\\n        `Could not resolve font for ${this.family}, fontWeight ${fontWeight}`,\\n      );\\n    }\\n\\n    return res;\\n  }\\n}\\n\\nexport default Font;\\n\\n[end of font.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "image.d.ts",
        "resolve.js",
        "bug_report.md",
        "resolve.test.js",
        "font.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "d1cee081-77a8-4094-a6c5-f08a54ade954",
        "score": 0.01639344262295082,
        "payload": {
          "text": "type HTTPMethod = 'GET' | 'HEAD' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\n\nexport type SourceObject =\n  | string\n  | { data: Buffer; format: 'png' | 'jpg' }\n  | { uri: string; method: HTTPMethod; body: any; headers: any };\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/types/image.d.ts",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "e26a155e-cd33-4389-9615-1a4b646522eb",
        "score": 0.016129032258064516,
        "payload": {
          "text": "import fs from 'fs';\nimport url from 'url';\nimport path from 'path';\nimport fetch from 'cross-fetch';\n\nimport PNG from './png';\nimport JPEG from './jpeg';\nimport createCache from './cache';\n\nexport const IMAGE_CACHE = createCache({ limit: 30 });\n\nconst getAbsoluteLocalPath = src => {\n  if (BROWSER) {\n    throw new Error('Cannot check local paths in client-side environment');\n  }\n\n  const { protocol, auth, host, port, hostname, path: pathname } = url.parse(\n    src,\n  );\n  const absolutePath = path.resolve(pathname);\n  if ((protocol && protocol !== 'file:') || auth || host || port || hostname) {\n    return undefined;\n  }\n  return absolutePath;\n};\n\nconst fetchLocalFile = src =>\n  new Promise((resolve, reject) => {\n    try {\n      if (BROWSER) {\n        reject(new Error('Cannot fetch local file in this environemnt'));\n        return;\n      }\n      const absolutePath = getAbsoluteLocalPath(src);\n      if (!absolutePath) {\n        reject(new Error(`Cannot fetch non-local path: ${src}`));\n        return;\n      }\n      fs.readFile(absolutePath, (err, data) =>\n        err ? reject(err) : resolve(data),\n      );\n    } catch (err) {\n      reject(err);\n    }\n  });\n\nconst fetchRemoteFile = async (uri, options) => {\n  const response = await fetch(uri, options);\n\n  const buffer = await (response.buffer\n    ? response.buffer()\n    : response.arrayBuffer());\n\n  return buffer.constructor.name === 'Buffer' ? buffer : Buffer.from(buffer);\n};\n\nconst isValidFormat = format => {\n  const lower = format.toLowerCase();\n  return lower === 'jpg' || lower === 'jpeg' || lower === 'png';\n};\n\nconst guessFormat = buffer => {\n  let format;\n\n  if (JPEG.isValid(buffer)) {\n    format = 'jpg';\n  } else if (PNG.isValid(buffer)) {\n    format = 'png';\n  }\n\n  return format;\n};\n\nconst isCompatibleBase64 = ({ uri }) =>\n  /^data:image\\/[a-zA-Z]*;base64,[^\"]*/g.test(uri);\n\nfunction getImage(body, extension) {\n  switch (extension.toLowerCase()) {\n    case 'jpg':\n    case 'jpeg':\n      return new JPEG(body);\n    case 'png':\n      return new PNG(body);\n    default:\n      return null;\n  }\n}\n\nconst resolveBase64Image = ({ uri }) => {\n  const match = /^data:image\\/([a-zA-Z]*);base64,([^\"]*)/g.exec(uri);\n  const format = match[1];\n  const data = match[2];\n\n  if (!isValidFormat(format)) {\n    throw new Error(`Base64 image invalid format: ${format}`);\n  }\n\n  return new Promise(resolve => {\n    return resolve(getImage(Buffer.from(data, 'base64'), format));\n  });\n};\n\nconst resolveImageFromData = src => {\n  if (src.data && src.format) {\n    return new Promise(resolve => resolve(getImage(src.data, src.format)));\n  }\n\n  throw new Error(`Invalid data given for local file: ${JSON.stringify(src)}`);\n};\n\nconst resolveBufferImage = buffer => {\n  const format = guessFormat(buffer);\n\n  if (format) {\n    return new Promise(resolve => resolve(getImage(buffer, format)));\n  }\n\n  return Promise.resolve();\n};\n\nconst getImageFormat = body => {\n  const isPng =\n    body[0] === 137 &&\n    body[1] === 80 &&\n    body[2] === 78 &&\n    body[3] === 71 &&\n    body[4] === 13 &&\n    body[5] === 10 &&\n    body[6] === 26 &&\n    body[7] === 10;\n\n  const isJpg = body[0] === 255 && body[1] === 216 && body[2] === 255;\n\n  let extension = '';\n  if (isPng) {\n    extension = 'png';\n  } else if (isJpg) {\n    extension = 'jpg';\n  } else {\n    throw new Error('Not valid image extension');\n  }\n\n  return extension;\n};\n\nconst resolveImageFromUrl = async src => {\n  const { uri, body, headers, method = 'GET' } = src;\n\n  const data =\n    !BROWSER && getAbsoluteLocalPath(uri)\n      ? await fetchLocalFile(uri)\n      : await fetchRemoteFile(uri, { body, headers, method });\n\n  const extension = getImageFormat(data);\n\n  return getImage(data, extension);\n};\n\nconst resolveImage = (src, { cache = true } = {}) => {\n  const cacheKey = src.data ? src.data.toString() : src.uri;\n\n  if (cache && IMAGE_CACHE.get(cacheKey)) {\n    return IMAGE_CACHE.get(cacheKey);\n  }\n\n  let image;\n  if (isCompatibleBase64(src)) {\n    image = resolveBase64Image(src);\n  } else if (Buffer.isBuffer(src)) {\n    image = resolveBufferImage(src);\n  } else if (typeof src === 'object' && src.data) {\n    image = resolveImageFromData(src);\n  } else {\n    image = resolveImageFromUrl(src);\n  }\n\n  if (!image) {\n    throw new Error('Cannot resolve image');\n  }\n\n  if (cache) {\n    IMAGE_CACHE.set(cacheKey, image);\n  }\n\n  return image;\n};\n\nexport default resolveImage;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/image/src/resolve.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "62ec4b36-1585-49a0-895a-0ef0f44bd44e",
        "score": 0.015873015873015872,
        "payload": {
          "text": "---\nname: Bug report\nabout: Create a report to help us improve\ntitle: ''\nlabels: ''\nassignees: ''\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior including code snippet (if applies):\n1. Go to '...'\n2. Click on '....'\n3. Scroll down to '....'\n4. See error\n\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n\n**Screenshots**\nIf applicable, add screenshots to help explain your problem.\n\n**Desktop (please complete the following information):**\n - OS: [e.g. MacOS, Windows]\n - Browser [e.g. chrome, safari]\n - React-pdf version [e.g. v1.1.0]\n\n<!-- Love react-pdf? Please consider supporting our collective:\n\ud83d\udc49  https://opencollective.com/react-pdf/donate -->\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/.github/ISSUE_TEMPLATE/bug_report.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "c36a49ab-61b7-46b2-9594-4b2c006970e8",
        "score": 0.015625,
        "payload": {
          "text": "import fs from 'fs';\nimport path from 'path';\n\nimport resolveImage, { IMAGE_CACHE } from '../src/resolve';\n\nconst jpgImageUrl = 'https://react-pdf.org/static/images/quijote1.jpg';\nconst pngImageUrl = 'https://react-pdf.org/static/images/quijote2.png';\nconst jpgLogalPath = path.join(__dirname, './assets/test.jpg');\nconst localJPGImage = fs.readFileSync(jpgLogalPath);\nconst pngLogalPath = path.join(__dirname, './assets/test.png');\nconst localPNGImage = fs.readFileSync(pngLogalPath);\n\ndescribe('image resolveImage', () => {\n  beforeEach(() => {\n    fetch.resetMocks();\n    IMAGE_CACHE.reset();\n  });\n\n  test('Should fetch remote image using GET method by default', async () => {\n    fetch.once(localJPGImage);\n\n    await resolveImage({ uri: jpgImageUrl });\n\n    expect(fetch.mock.calls[0][1].method).toBe('GET');\n  });\n\n  test('Should fetch remote image using passed method', async () => {\n    fetch.once(localJPGImage);\n\n    await resolveImage({ uri: jpgImageUrl, method: 'POST' });\n\n    expect(fetch.mock.calls[0][1].method).toBe('POST');\n  });\n\n  test('Should fetch remote image using passed headers', async () => {\n    fetch.once(localJPGImage);\n\n    const headers = { Authorization: 'Bearer qwerty' };\n    await resolveImage({ uri: jpgImageUrl, headers });\n\n    expect(fetch.mock.calls[0][1].headers).toEqual(headers);\n  });\n\n  test('Should fetch remote image using passed body', async () => {\n    fetch.once(localJPGImage);\n\n    const body = 'qwerty';\n    await resolveImage({ uri: jpgImageUrl, body });\n\n    expect(fetch.mock.calls[0][1].body).toEqual(body);\n  });\n\n  test('Should render a jpeg image over http', async () => {\n    fetch.once(localJPGImage);\n\n    const image = await resolveImage({ uri: jpgImageUrl });\n\n    expect(image.data).toBeTruthy();\n    expect(image.width).toBeGreaterThan(0);\n    expect(image.height).toBeGreaterThan(0);\n  });\n\n  test('Should render a png image over http', async () => {\n    fetch.once(localPNGImage);\n\n    const image = await resolveImage({ uri: pngImageUrl });\n\n    expect(image.data).toBeTruthy();\n    expect(image.width).toBeGreaterThan(0);\n    expect(image.height).toBeGreaterThan(0);\n  });\n\n  test('Should render a local image from src object', async () => {\n    const image = await resolveImage({\n      uri: './packages/layout/tests/assets/test.jpg',\n    });\n\n    expect(image.data).toBeTruthy();\n    expect(image.width).toBeGreaterThan(0);\n    expect(image.height).toBeGreaterThan(0);\n  });\n\n  test('Should render a local image from data', async () => {\n    const image = await resolveImage({ data: localJPGImage, format: 'jpg' });\n\n    expect(image.data).toBeTruthy();\n    expect(image.width).toBeGreaterThan(0);\n    expect(image.height).toBeGreaterThan(0);\n  });\n\n  test('Should render a base64 image', async () => {\n    const image = await resolveImage({\n      uri:\n        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z/C/HgAGgwJ/lK3Q6wAAAABJRU5ErkJggg==',\n    });\n\n    expect(image.data).toBeTruthy();\n    expect(image.width).toBeGreaterThan(0);\n    expect(image.height).toBeGreaterThan(0);\n  });\n\n  test('Should render a buffer jpg image', async () => {\n    const image = await resolveImage(localJPGImage);\n\n    expect(image.data).toBeTruthy();\n    expect(image.width).toBeGreaterThan(0);\n    expect(image.height).toBeGreaterThan(0);\n  });\n\n  test('Should render a buffer png image', async () => {\n    const image = await resolveImage(localPNGImage);\n\n    expect(image.data).toBeTruthy();\n    expect(image.width).toBeGreaterThan(0);\n    expect(image.height).toBeGreaterThan(0);\n  });\n\n  test('Should not cache previously loaded remote images if flag false', async () => {\n    fetch.mockResponse(localJPGImage);\n\n    const image1 = await resolveImage({ uri: jpgImageUrl }, { cache: false });\n    const image2 = await resolveImage({ uri: jpgImageUrl }, { cache: false });\n\n    expect(image1).not.toBe(image2);\n  });\n\n  test('Should cache previously loaded local images by default', async () => {\n    fetch.mockResponse(localJPGImage);\n\n    const image1 = await resolveImage({ uri: jpgImageUrl });\n    const image2 = await resolveImage({ uri: jpgImageUrl });\n\n    expect(image1).toBe(image2);\n  });\n\n  test('Should not cache previously loaded local images if flag false', async () => {\n    fetch.mockResponse(localJPGImage);\n\n    const image1 = await resolveImage(localJPGImage, { cache: false });\n    const image2 = await resolveImage(localJPGImage, { cache: false });\n\n    expect(image1).not.toBe(image2);\n  });\n});\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/image/tests/resolve.test.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "108e86bb-2491-4b8a-a607-21557737ac2f",
        "score": 0.015384615384615385,
        "payload": {
          "text": "/* eslint-disable max-classes-per-file */\n\nimport isUrl from 'is-url';\nimport fetch from 'cross-fetch';\nimport fontkit from '@react-pdf/fontkit';\n\nconst fetchFont = async (src, options) => {\n  const response = await fetch(src, options);\n\n  const buffer = await (response.buffer\n    ? response.buffer()\n    : response.arrayBuffer());\n\n  return buffer.constructor.name === 'Buffer' ? buffer : Buffer.from(buffer);\n};\n\nconst isDataUrl = dataUrl => {\n  const header = dataUrl.split(',')[0];\n  const hasDataPrefix = header.substring(0, 5) === 'data:';\n  const hasBase64Prefix = header.split(';')[1] === 'base64';\n\n  return hasDataPrefix && hasBase64Prefix;\n};\n\nclass FontSource {\n  constructor(src, fontFamily, fontStyle, fontWeight, options) {\n    this.src = src;\n    this.fontFamily = fontFamily;\n    this.fontStyle = fontStyle || 'normal';\n    this.fontWeight = fontWeight || 400;\n\n    this.data = null;\n    this.loading = false;\n    this.options = options;\n  }\n\n  async load() {\n    this.loading = true;\n\n    const { postscriptName } = this.options;\n\n    if (isDataUrl(this.src)) {\n      this.data = fontkit.create(\n        Buffer.from(this.src.split(',')[1], 'base64'),\n        postscriptName,\n      );\n    } else if (BROWSER || isUrl(this.src)) {\n      const { headers, body, method = 'GET' } = this.options;\n      const data = await fetchFont(this.src, { method, body, headers });\n      this.data = fontkit.create(data, postscriptName);\n    } else {\n      this.data = await new Promise((resolve, reject) =>\n        fontkit.open(this.src, postscriptName, (err, data) =>\n          err ? reject(err) : resolve(data),\n        ),\n      );\n    }\n\n    this.loading = false;\n  }\n}\n\nclass Font {\n  static create(family) {\n    return new Font(family);\n  }\n\n  constructor(family) {\n    this.family = family;\n    this.sources = [];\n  }\n\n  register({ src, fontWeight, fontStyle, ...options }) {\n    this.sources.push(\n      new FontSource(src, this.family, fontStyle, fontWeight, options),\n    );\n  }\n\n  resolve(descriptor) {\n    const { fontWeight = 400, fontStyle = 'normal' } = descriptor;\n    const styleSources = this.sources.filter(s => s.fontStyle === fontStyle);\n\n    // Weight resolution. https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight#Fallback_weights\n    const exactFit = styleSources.find(s => s.fontWeight === fontWeight);\n\n    if (exactFit) return exactFit;\n\n    let res;\n\n    if (fontWeight >= 400 && fontWeight <= 500) {\n      const leftOffset = styleSources.filter(s => s.fontWeight <= fontWeight);\n      const rightOffset = styleSources.filter(s => s.fontWeight > 500);\n      const fit = styleSources.filter(\n        s => s.fontWeight >= fontWeight && s.fontWeight < 500,\n      );\n\n      res = fit[0] || leftOffset[leftOffset.length - 1] || rightOffset[0];\n    }\n\n    const lt = styleSources.filter(s => s.fontWeight < fontWeight);\n    const gt = styleSources.filter(s => s.fontWeight > fontWeight);\n\n    if (fontWeight < 400) {\n      res = lt[lt.length - 1] || gt[0];\n    }\n\n    if (fontWeight > 500) {\n      res = gt[0] || lt[lt.length - 1];\n    }\n\n    if (!res) {\n      throw new Error(\n        `Could not resolve font for ${this.family}, fontWeight ${fontWeight}`,\n      );\n    }\n\n    return res;\n  }\n}\n\nexport default Font;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/font/src/font.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "processing__p5.js-3680",
    "model_patch": "diff --git a/sketch.js b/sketch.js\nindex 7f6e4c2..e5b9f3d 100644\n--- a/sketch.js\n+++ b/sketch.js\n@@ -1,13 +1,14 @@\n let points;\n function setup(){\n \tcreateCanvas(innerWidth, innerHeight, WEBGL);\n-\t points = [\n+\tpoints = [\n \t\t{x: 0, y:0},\n \t\t{x: 4, y:0},\n \t\t{x: 4, y:1},\n \t\t{x: 1, y:1},\n \t\t{x: 1, y:2},\n \t\t{x: 4, y:2},\n \t\t{x: 4, y:3},\n \t\t{x: 0, y:3},\n \t];\n }\n \n function draw(){\n \tbackground(\"gray\");\n \n-\tbeginShape()\n+\tbeginShape(TRIANGLE_FAN);\n \tfor(let p of points){\n \t\tvertex(p.x*30,p.y*30, 0);\n \t}",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 188.41,
      "issue_embedding_time_ms": 188.41,
      "retrieval_time_ms_splade": 46.03,
      "retrieval_time_ms": 46.03,
      "total_retrieval_time_ms": 234.44,
      "generation_time_ms": 3701.26,
      "total_io_time_ms": 3935.71,
      "input_total_token_limit": null,
      "issue_text_tokens": 481,
      "vlm_tokens": 0,
      "retrieved_tokens": 3289,
      "prompt_template_tokens": 513,
      "total_input_prompt_tokens": 4283,
      "output_generated_tokens": 278,
      "total_io_tokens": 4561,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nfill of certain shapes not working properly in Webgl mode \\n\\r\\n\\r\\n#### Nature of issue?\\r\\n\\r\\n- [x ] Found a bug\\r\\n- [ ] Existing feature enhancement\\r\\n- [ ] New feature request\\r\\n\\r\\n#### Most appropriate sub-area of p5.js?\\r\\n\\r\\n- [ ] Color\\r\\n- [ ] Core/Environment/Rendering\\r\\n- [ ] Data\\r\\n- [ ] Events\\r\\n- [ ] Image\\r\\n- [ ] IO\\r\\n- [ ] Math\\r\\n- [ ] Typography\\r\\n- [ ] Utilities\\r\\n- [ x] WebGL\\r\\n- [ ] Other (specify if possible)\\r\\n\\r\\n#### Which platform were you using when you encountered this?\\r\\n\\r\\n- [x ] Mobile/Tablet (touch devices)\\r\\n- [x ] Desktop/Laptop\\r\\n- [ ] Others (specify if possible)\\r\\n\\r\\n#### Details about the bug: \\r\\n\\r\\n- p5.js version 0.7.3: \\r\\n- Steps to reproduce this:\\r\\n\\r\\n\\r\\n**Here is a minimal working example**. It should draw the letter C (works in 2D), but in WEBGL it creates a strange fill from the lower extremity of the C letter to the origin (top left of the letter).\\r\\nAn example can be seen in <https://codepen.io/sixhat/pen/NmNgLj>\\r\\n\\r\\n<img width=\\\"346\\\" alt=\\\"p5-webgl-bug-fill\\\" src=\\\"https://user-images.githubusercontent.com/614881/55618773-373a0580-578f-11e9-9126-27b137dbc7ca.png\\\">\\r\\n\\r\\n\\r\\n```javascript\\r\\nlet points;\\r\\nfunction setup(){\\r\\n\\tcreateCanvas(innerWidth, innerHeight, WEBGL);\\r\\n\\t points = [\\r\\n\\t\\t{x: 0, y:0},\\r\\n\\t\\t{x: 4, y:0},\\r\\n\\t\\t{x: 4, y:1},\\r\\n\\t\\t{x: 1, y:1},\\r\\n\\t\\t{x: 1, y:2},\\r\\n\\t\\t{x: 4, y:2},\\r\\n\\t\\t{x: 4, y:3},\\r\\n\\t\\t{x: 0, y:3},\\r\\n\\t];\\r\\n}\\r\\n\\r\\nfunction draw(){\\r\\n\\tbackground(\\\"gray\\\");\\r\\n\\r\\n\\tbeginShape()\\r\\n\\tfor(let p of points){\\r\\n\\t\\tvertex(p.x*30,p.y*30, 0);\\r\\n\\t} \\r\\n\\tendShape(CLOSE)\\r\\n}\\r\\n```\\r\\n\\r\\n\\r\\n#### Feature enhancement details:\\r\\n\\r\\n\\r\\n\\r\\n#### New feature details:\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of ISSUE_TEMPLATE.md]\\n<!--\\nHi there! \\n\\nPLEASE NOTE: The github issues are for bugs and feature requests for the p5.js library itself. If you have a general question or bug programming with p5.js please post it in the p5.js forum: https://forum.processing.org/two/.\\n\\nTo check any option, replace the \\\"[ ]\\\" with a \\\"[x]\\\". Be sure to check out how it looks in the Preview tab! Feel free to remove any portion of the template that is not relevant for your issue.\\n-->\\n\\n#### Nature of issue?\\n\\n- [ ] Found a bug\\n- [ ] Existing feature enhancement\\n- [ ] New feature request\\n\\n#### Most appropriate sub-area of p5.js?\\n\\n- [ ] Color\\n- [ ] Core/Environment/Rendering\\n- [ ] Data\\n- [ ] Events\\n- [ ] Image\\n- [ ] IO\\n- [ ] Math\\n- [ ] Typography\\n- [ ] Utilities\\n- [ ] WebGL\\n- [ ] Other (specify if possible)\\n\\n#### Which platform were you using when you encountered this?\\n\\n- [ ] Mobile/Tablet (touch devices)\\n- [ ] Desktop/Laptop\\n- [ ] Others (specify if possible)\\n\\n#### Details about the bug: \\n\\n- p5.js version: <!-- You can first this in the first line of the p5.js file -->\\n- Web browser and version: <!-- On Chrome/FireFox/Opera you can enter \\\"about:\\\" in the address bar to find out the version -->\\n- Operating System: <!-- Ex: Windows/MacOSX/Linux along with version -->\\n- Steps to reproduce this:\\n<!-- Include a simple code snippet that demonstrates the problem, along with any console errors produced. If this isn't possible, then simply describe the issue as best you can! -->\\n\\n<!-- If you want to enhance an existing feature, please describe here, otherwise remove this section -->\\n#### Feature enhancement details:\\n\\n\\n<!-- If you want to request a new feature, please describe here, otherwise remove this section -->\\n#### New feature details:\\n\\n\\n[end of ISSUE_TEMPLATE.md]\\n[start of sketch.js]\\nfunction setup() {\\n  createCanvas(windowWidth, windowHeight, WEBGL);\\n}\\n\\nfunction draw() {\\n  background(0);\\n\\n  normalMaterial();\\n  var tx = map(mouseX, 0, width, -width / 2, width / 2);\\n  var ty = map(mouseY, 0, height, -height / 2, height / 2);\\n\\n  push();\\n  translate(tx, ty);\\n  noStroke();\\n  cone(90);\\n  pop();\\n\\n  fill(255);\\n  rect(0, 0, width / 4, height / 4);\\n  fill(0, 255, 0);\\n  ellipse(width / 4, height / 4, width / 4, height / 4);\\n\\n  push();\\n  translate(width / 4, height / 4);\\n  fill(0, 0, 255);\\n  ellipse(0, 0, width / 4, height / 4);\\n  pop();\\n\\n  fill(255, 0, 0);\\n  beginShape();\\n  vertex(0, 0);\\n  vertex(0, height / 4);\\n  vertex(-width / 4, 0);\\n  endShape(CLOSE);\\n}\\n\\n[end of sketch.js]\\n[start of sketch.js]\\nfunction setup() {\\n  createCanvas(windowWidth, windowHeight, WEBGL);\\n}\\n\\nfunction draw() {\\n  background(220);\\n  // triangle with immediate mode\\n  fill(255);\\n  beginShape(TRIANGLES);\\n  vertex(0, 25, 100);\\n  vertex(-25, -25, -100);\\n  vertex(25, -25, 0);\\n  endShape();\\n\\n  // box with retain mode\\n  push();\\n  translate(-width / 3, 0);\\n  box(70);\\n  pop();\\n\\n  // // regular drawing command\\n  push();\\n  translate(width / 3, 0);\\n  plane(70);\\n  pop();\\n}\\n\\n[end of sketch.js]\\n[start of webgl_mode_architecture.md]\\n# p5.js WEBGL mode architecture\\n\\nThis document describes the structure of the p5.js WEBGL mode for p5.js contributors and maintainers\\u2014and any other interested parties. If you're interested in using 3D graphics in your sketches, [view this tutorial](https://github.com/processing/p5.js/wiki/Getting-started-with-WebGL-in-p5) instead.\\n\\n## Overview of Structure and Objects\\n\\nThe core objects in the WEBGL architecture are the p5.Renderer.GL, p5.Shader, p5.Texture, and p5.Geometry.\\nA single instance of p5.Renderer.GL manages its own p5.Shaders, p5.Textures, and p5.Geometry\\u2014a goal for this is to allow offscreen rendering using WebGL, but that hasn\\u2019t been tested yet.\\nShaders and textures are associated with a specific GL context via the renderer.\\n\\n### p5.RendererGL\\nThe p5.RendererGL object is the renderer for WEBGL / 3D Mode in p5.js.\\nDerived from p5.Renderer, it provides additional functionality not available in 2D mode, such as: `box()`, `cone()`, use of shaders, accelerated texture rendering, and lighting.\\n\\n* Manages\\u2014creates and caches\\u2014shaders (p5.Shader objects) and textures (p5.Texture objects)\\n* Prepares coordinates of shapes to be used as attribute arrays by shaders.\\n* Selects the correct shader for use when stroke, fill, texture, and various lighting methods are called, then supplies the appropriate uniforms to those shaders.\\n* Maintains data about lighting: a count of how many various types of lights are used and their parameters.\\n* Caches geometry for 3D primitives (in retained mode), with the exception of shapes created with begin/endShape, which are dynamically generated and pushed to GL every time one is drawn (in immediate mode).\\n\\nThe renderer manages choosing an appropriate p5.Shader for the current drawing conditions.\\n\\n### p5.Shader\\nThe p5.Shader class provides access to the uniforms and attributes of a GL program. \\n\\n* Compiles and links the vertex and fragment shader components\\n* Provides an API for accessing and setting shader attributes and uniforms\\n* Binds textures the shader needs before a shape is rendered\\n* Provides the bindShader() method for use in the render before a shape is drawn, then unbindShader() after the shape is drawn.\\n\\nThere are three default shaders, as documented in the Shader section.\\n\\n### p5.Texture\\nThe p5.Texture object manages GL state for a texture based on a `p5.Image`, `p5.MediaElement`, or `p5.Element`. In the future, this object could also be constructed for a piece of text to render in WEBGL mode.\\n\\n* Internally handles processing image data based on type, so that the p5.Renderer implementation doesn\\u2019t have to make special exceptions in its own methods when handling textures\\n* Updates conditionally every frame by making a best guess at whether or not image data has changed. Tries not to upload the texture if no change has been made, to help performance.\\n\\n### p5.Geometry\\nShapes rendered in retain mode are stored as p5.Geometry objects in a cache in the p5.Renderer object. \\nThe renderer maps strings to p5.Geometry objects based on the shape drawn and its parameters (for example, geometry for a box created with `box(70, 80, 90, 10, 20)` is mapped from `'box|70|80|90|10|20\\u2019`). Calls to functions that have retained geometry create a p5.Geometry object on the first pass and store it in a geometry hash using the aforementioned string ID. Later calls look for that ID in the hash, and if it is found use that to reference the existing object rather than creating a new one.\\n\\n* Stores vertices, normals, faces, line vertices, line normals, and texture coordinates for the geometry primitives\\n* Provides methods for computing the faces, normals, line vertices, and line normals for a set of vertices\\n\\n## Immediate Mode\\nAll attributes for drawing with Immediate Mode are stored in an object in the renderer, used to draw to the GL drawing context, and then discarded.\\n\\n## Geometry: Retain and Immediate Mode\\nRetained geometry is used for 3D primitives, while immediate mode is used for shapes created with begin/endShape.\\n\\n|Functions with retained geometry| Functions with immediate mode geometry | 2D functions not yet implemented|\\n|--------------------------------|----------------------------------------|---------------------------------|\\n|plane()                         | bezier()                               | arc()                           |\\n|box()                           | curve()                                | text()                          |\\n|sphere()                        | line()                                 | point()                         |\\n|cylinder()                      | beginShape()                           | curveVertex()                   |\\n|cone()                          | vertex()                               | bezierVertex()                  |\\n|ellipsoid()                     | endShape()                             | quadraticVertex()               |\\n|torus()                         |\\n|triangle()                      |\\n|ellipse()                       |\\n|rect()                          |\\n|quad()                          |\\n\\n\\n\\n\\n\\n\\n## Texture Management\\nA p5.Renderer.GL instances manages an array of p5.Textures objects on an as-needed basis.\\nTextures are created for images and videos used with the `texture()` method or as uniforms provided to custom shaders.\\n\\nWhen the renderer needs a texture, it first checks if one has already been created for a given image/video, then provides that to a shader for rendering. A new texture is only created if an existing one cannot be found for the image/video.\\n\\n## Shaders\\n\\n### Types of Shaders\\n\\n#### Color Shader\\nProvides flat shading of objects, based on the current fill color.\\n\\n#### Light Shader (for lighting AND textures)\\nAccounts for:\\n* Lighting parameters set by `ambientLight()`, `directionalLight()`, and `pointLight()`\\n* Material parameters set by `ambientMaterial()`, and `specularMaterial()`\\n* Texture parameters, set by `texture()`\\n\\n#### Normal Shader\\nThe normal shader is set when `normalMaterial()` is in use. It uses the surface\\u2019s normal vector to determine a fragment color.\\n\\n### Shader Parameters\\n\\n#### Standard Model View & Camera Uniforms\\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|\\n|---------------------------------|-----------|---------------|------------|-------------|\\n|`uniform mat4 uModelViewMatrix;` |x          |x              |x           |x            |\\n|`uniform mat4 uProjectionMatrix;`|x          |x              |x           |x            |\\n|`uniform vec4 uViewPort;`        |x          |               |            |             |\\n\\n\\n#### Geometry Attributes and Uniforms\\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|\\n|---------------------------------|-----------|---------------|------------|-------------|\\n|`attribute vec3 aPosition;`      |x          |x              |x           |x            |\\n|`attribute vec3 aNormal;`        |           |x              |            |x            |\\n|`attribute vec2 aTexCoord;`      |           |x              |            |x            |\\n|`uniform mat3 uNormalMatrix;`    |           |x              |            |x            |\\n|`attribute vec4 aDirection;`     |x          |               |            |             |\\n|`uniform float uStrokeWeight;`   |x          |               |            |             |\\n\\n#### Material Colors\\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|\\n|---------------------------------|-----------|---------------|------------|-------------|\\n|`uniform vec4 uMaterialColor;`   |x          |x              |            |             |\\n|`attribute vec4 aVertexColor;`   |           |               |x           |             |\\n\\n#### Light Parameters\\n\\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|\\n|--------------------------------------|-----------|---------------|------------|-------------|\\n|`uniform int uAmbientLightCount;`     |           |x              |            |             |\\n|`uniform int uAmbientLightCount;`     |           |x              |            |             |\\n|`uniform int uDirectionalLightCount;` |           |x              |            |             |\\n|`uniform int uPointLightCount;`       |           |x              |            |             |\\n|`uniform vec3 uAmbientColor[8];`      |           |x              |            |             |\\n|`uniform vec3 uLightingDirection[8];` |           |x              |            |             |\\n|`uniform vec3 uDirectionalColor[8];`  |           |x              |            |             |\\n|`uniform vec3 uPointLightLocation[8];`|           |x              |            |             |\\n|`uniform vec3 uPointLightColor[8];`   |           |x              |            |             |\\n|`uniform bool uSpecular;`             |           |x              |            |             |\\n|`uniform bool uUseLighting;`          |           |x              |            |             |\\n\\n#### Texture Parameters\\n\\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|\\n|--------------------------------------|-----------|---------------|------------|-------------|\\n|`uniform sampler2D uSampler;`         |           |x              |            |             |\\n|`uniform bool isTexture;`             |           |x              |            |             |\\n\\n#### General Parameters\\n\\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|\\n|--------------------------------------|-----------|---------------|------------|-------------|\\n|`uniform float uResolution;`          |           |               |x           |             |\\n|`uniform float uPointSize;`           |           |               |x           |             |\\n\\n#### Varying Parameters\\n\\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|\\n|--------------------------------------|-----------|---------------|------------|-------------|\\n|`varying vec3 vVertexNormal;`         |           |x              |            |             |\\n|`varying vec2 vVertTexCoord;`         |           |x              |            |             |\\n|`varying vec3 vLightWeighting;`       |           |x              |            |             |\\n|`varying highp vec2 vVertTexCoord;`   |           |               |            |x            |\\n|`varying vec4 vColor;`                |           |               |x           |             |\\n\\n\\n## Next Steps\\n\\nComing soon!\\n[end of webgl_mode_architecture.md]\\n[start of sketch.js]\\nvar img;\\nvar sz = 100;\\n\\nfunction preload() {\\n  img = loadImage('assets/UV_Grid_Sm.jpg');\\n}\\n\\nfunction setup() {\\n  createCanvas(windowWidth, windowHeight, WEBGL);\\n}\\n\\nfunction draw() {\\n  background(255);\\n  randomSeed(1);\\n\\n  for (var i = 0; i < 200; i++) {\\n    push();\\n\\n    translate(\\n      random(-width / 2 + sz, width / 2 - sz),\\n      random(-height / 2 + sz, height / 2 - sz)\\n    );\\n    rotateZ(random(0, 2 * PI) + frameCount * 0.1);\\n\\n    if (i % 2 === 0) {\\n      texture(img);\\n    } else {\\n      fill(random(128, 255), 0, random(128, 255));\\n    }\\n\\n    beginShape(TRIANGLES);\\n    vertex(-sz, -sz, 0, 0, 0);\\n    vertex(sz, -sz, 0, 1, 0);\\n    vertex(sz, sz, 0, 1, 1);\\n    vertex(sz, sz, 0, 1, 1);\\n    vertex(-sz, sz, 0, 0, 1);\\n    vertex(-sz, -sz, 0, 0, 0);\\n    endShape();\\n    pop();\\n  }\\n}\\n\\n/* http://localhost:8000/test/manual-test-examples/webgl/immediateMode/texture/ */\\n\\n[end of sketch.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "ISSUE_TEMPLATE.md",
        "sketch.js",
        "sketch.js",
        "webgl_mode_architecture.md",
        "sketch.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "0ef55c8f-9d97-4b72-8f6a-fa3d295fbf5d",
        "score": 0.01639344262295082,
        "payload": {
          "text": "<!--\nHi there! \n\nPLEASE NOTE: The github issues are for bugs and feature requests for the p5.js library itself. If you have a general question or bug programming with p5.js please post it in the p5.js forum: https://forum.processing.org/two/.\n\nTo check any option, replace the \"[ ]\" with a \"[x]\". Be sure to check out how it looks in the Preview tab! Feel free to remove any portion of the template that is not relevant for your issue.\n-->\n\n#### Nature of issue?\n\n- [ ] Found a bug\n- [ ] Existing feature enhancement\n- [ ] New feature request\n\n#### Most appropriate sub-area of p5.js?\n\n- [ ] Color\n- [ ] Core/Environment/Rendering\n- [ ] Data\n- [ ] Events\n- [ ] Image\n- [ ] IO\n- [ ] Math\n- [ ] Typography\n- [ ] Utilities\n- [ ] WebGL\n- [ ] Other (specify if possible)\n\n#### Which platform were you using when you encountered this?\n\n- [ ] Mobile/Tablet (touch devices)\n- [ ] Desktop/Laptop\n- [ ] Others (specify if possible)\n\n#### Details about the bug: \n\n- p5.js version: <!-- You can first this in the first line of the p5.js file -->\n- Web browser and version: <!-- On Chrome/FireFox/Opera you can enter \"about:\" in the address bar to find out the version -->\n- Operating System: <!-- Ex: Windows/MacOSX/Linux along with version -->\n- Steps to reproduce this:\n<!-- Include a simple code snippet that demonstrates the problem, along with any console errors produced. If this isn't possible, then simply describe the issue as best you can! -->\n\n<!-- If you want to enhance an existing feature, please describe here, otherwise remove this section -->\n#### Feature enhancement details:\n\n\n<!-- If you want to request a new feature, please describe here, otherwise remove this section -->\n#### New feature details:\n\n",
          "filepath": "data/repos/processing/p5.js-0.7/ISSUE_TEMPLATE.md",
          "repo": "processing/p5.js",
          "version": "0.7",
          "chunk_index": 0
        }
      },
      {
        "id": "527ed7c3-4b81-4efc-8210-f2e855ea31cf",
        "score": 0.016129032258064516,
        "payload": {
          "text": "function setup() {\n  createCanvas(windowWidth, windowHeight, WEBGL);\n}\n\nfunction draw() {\n  background(0);\n\n  normalMaterial();\n  var tx = map(mouseX, 0, width, -width / 2, width / 2);\n  var ty = map(mouseY, 0, height, -height / 2, height / 2);\n\n  push();\n  translate(tx, ty);\n  noStroke();\n  cone(90);\n  pop();\n\n  fill(255);\n  rect(0, 0, width / 4, height / 4);\n  fill(0, 255, 0);\n  ellipse(width / 4, height / 4, width / 4, height / 4);\n\n  push();\n  translate(width / 4, height / 4);\n  fill(0, 0, 255);\n  ellipse(0, 0, width / 4, height / 4);\n  pop();\n\n  fill(255, 0, 0);\n  beginShape();\n  vertex(0, 0);\n  vertex(0, height / 4);\n  vertex(-width / 4, 0);\n  endShape(CLOSE);\n}\n",
          "filepath": "data/repos/processing/p5.js-0.7/test/manual-test-examples/webgl/camera/box/sketch.js",
          "repo": "processing/p5.js",
          "version": "0.7",
          "chunk_index": 0
        }
      },
      {
        "id": "9ad61d80-fc67-46af-b7a0-d9d272d0a00d",
        "score": 0.015873015873015872,
        "payload": {
          "text": "function setup() {\n  createCanvas(windowWidth, windowHeight, WEBGL);\n}\n\nfunction draw() {\n  background(220);\n  // triangle with immediate mode\n  fill(255);\n  beginShape(TRIANGLES);\n  vertex(0, 25, 100);\n  vertex(-25, -25, -100);\n  vertex(25, -25, 0);\n  endShape();\n\n  // box with retain mode\n  push();\n  translate(-width / 3, 0);\n  box(70);\n  pop();\n\n  // // regular drawing command\n  push();\n  translate(width / 3, 0);\n  plane(70);\n  pop();\n}\n",
          "filepath": "data/repos/processing/p5.js-0.7/test/manual-test-examples/webgl/defaultFillAndStroke/sketch.js",
          "repo": "processing/p5.js",
          "version": "0.7",
          "chunk_index": 0
        }
      },
      {
        "id": "62bb780f-4e5a-4319-a393-07cdf471805b",
        "score": 0.015625,
        "payload": {
          "text": "# p5.js WEBGL mode architecture\n\nThis document describes the structure of the p5.js WEBGL mode for p5.js contributors and maintainers\u2014and any other interested parties. If you're interested in using 3D graphics in your sketches, [view this tutorial](https://github.com/processing/p5.js/wiki/Getting-started-with-WebGL-in-p5) instead.\n\n## Overview of Structure and Objects\n\nThe core objects in the WEBGL architecture are the p5.Renderer.GL, p5.Shader, p5.Texture, and p5.Geometry.\nA single instance of p5.Renderer.GL manages its own p5.Shaders, p5.Textures, and p5.Geometry\u2014a goal for this is to allow offscreen rendering using WebGL, but that hasn\u2019t been tested yet.\nShaders and textures are associated with a specific GL context via the renderer.\n\n### p5.RendererGL\nThe p5.RendererGL object is the renderer for WEBGL / 3D Mode in p5.js.\nDerived from p5.Renderer, it provides additional functionality not available in 2D mode, such as: `box()`, `cone()`, use of shaders, accelerated texture rendering, and lighting.\n\n* Manages\u2014creates and caches\u2014shaders (p5.Shader objects) and textures (p5.Texture objects)\n* Prepares coordinates of shapes to be used as attribute arrays by shaders.\n* Selects the correct shader for use when stroke, fill, texture, and various lighting methods are called, then supplies the appropriate uniforms to those shaders.\n* Maintains data about lighting: a count of how many various types of lights are used and their parameters.\n* Caches geometry for 3D primitives (in retained mode), with the exception of shapes created with begin/endShape, which are dynamically generated and pushed to GL every time one is drawn (in immediate mode).\n\nThe renderer manages choosing an appropriate p5.Shader for the current drawing conditions.\n\n### p5.Shader\nThe p5.Shader class provides access to the uniforms and attributes of a GL program. \n\n* Compiles and links the vertex and fragment shader components\n* Provides an API for accessing and setting shader attributes and uniforms\n* Binds textures the shader needs before a shape is rendered\n* Provides the bindShader() method for use in the render before a shape is drawn, then unbindShader() after the shape is drawn.\n\nThere are three default shaders, as documented in the Shader section.\n\n### p5.Texture\nThe p5.Texture object manages GL state for a texture based on a `p5.Image`, `p5.MediaElement`, or `p5.Element`. In the future, this object could also be constructed for a piece of text to render in WEBGL mode.\n\n* Internally handles processing image data based on type, so that the p5.Renderer implementation doesn\u2019t have to make special exceptions in its own methods when handling textures\n* Updates conditionally every frame by making a best guess at whether or not image data has changed. Tries not to upload the texture if no change has been made, to help performance.\n\n### p5.Geometry\nShapes rendered in retain mode are stored as p5.Geometry objects in a cache in the p5.Renderer object. \nThe renderer maps strings to p5.Geometry objects based on the shape drawn and its parameters (for example, geometry for a box created with `box(70, 80, 90, 10, 20)` is mapped from `'box|70|80|90|10|20\u2019`). Calls to functions that have retained geometry create a p5.Geometry object on the first pass and store it in a geometry hash using the aforementioned string ID. Later calls look for that ID in the hash, and if it is found use that to reference the existing object rather than creating a new one.\n\n* Stores vertices, normals, faces, line vertices, line normals, and texture coordinates for the geometry primitives\n* Provides methods for computing the faces, normals, line vertices, and line normals for a set of vertices\n\n## Immediate Mode\nAll attributes for drawing with Immediate Mode are stored in an object in the renderer, used to draw to the GL drawing context, and then discarded.\n\n## Geometry: Retain and Immediate Mode\nRetained geometry is used for 3D primitives, while immediate mode is used for shapes created with begin/endShape.\n\n|Functions with retained geometry| Functions with immediate mode geometry | 2D functions not yet implemented|\n|--------------------------------|----------------------------------------|---------------------------------|\n|plane()                         | bezier()                               | arc()                           |\n|box()                           | curve()                                | text()                          |\n|sphere()                        | line()                                 | point()                         |\n|cylinder()                      | beginShape()                           | curveVertex()                   |\n|cone()                          | vertex()                               | bezierVertex()                  |\n|ellipsoid()                     | endShape()                             | quadraticVertex()               |\n|torus()                         |\n|triangle()                      |\n|ellipse()                       |\n|rect()                          |\n|quad()                          |\n\n\n\n\n\n\n## Texture Management\nA p5.Renderer.GL instances manages an array of p5.Textures objects on an as-needed basis.\nTextures are created for images and videos used with the `texture()` method or as uniforms provided to custom shaders.\n\nWhen the renderer needs a texture, it first checks if one has already been created for a given image/video, then provides that to a shader for rendering. A new texture is only created if an existing one cannot be found for the image/video.\n\n## Shaders\n\n### Types of Shaders\n\n#### Color Shader\nProvides flat shading of objects, based on the current fill color.\n\n#### Light Shader (for lighting AND textures)\nAccounts for:\n* Lighting parameters set by `ambientLight()`, `directionalLight()`, and `pointLight()`\n* Material parameters set by `ambientMaterial()`, and `specularMaterial()`\n* Texture parameters, set by `texture()`\n\n#### Normal Shader\nThe normal shader is set when `normalMaterial()` is in use. It uses the surface\u2019s normal vector to determine a fragment color.\n\n### Shader Parameters\n\n#### Standard Model View & Camera Uniforms\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|\n|---------------------------------|-----------|---------------|------------|-------------|\n|`uniform mat4 uModelViewMatrix;` |x          |x              |x           |x            |\n|`uniform mat4 uProjectionMatrix;`|x          |x              |x           |x            |\n|`uniform vec4 uViewPort;`        |x          |               |            |             |\n\n\n#### Geometry Attributes and Uniforms\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|\n|---------------------------------|-----------|---------------|------------|-------------|\n|`attribute vec3 aPosition;`      |x          |x              |x           |x            |\n|`attribute vec3 aNormal;`        |           |x              |            |x            |\n|`attribute vec2 aTexCoord;`      |           |x              |            |x            |\n|`uniform mat3 uNormalMatrix;`    |           |x              |            |x            |\n|`attribute vec4 aDirection;`     |x          |               |            |             |\n|`uniform float uStrokeWeight;`   |x          |               |            |             |\n\n#### Material Colors\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|\n|---------------------------------|-----------|---------------|------------|-------------|\n|`uniform vec4 uMaterialColor;`   |x          |x              |            |             |\n|`attribute vec4 aVertexColor;`   |           |               |x           |             |\n\n#### Light Parameters\n\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|\n|--------------------------------------|-----------|---------------|------------|-------------|\n|`uniform int uAmbientLightCount;`     |           |x              |            |             |\n|`uniform int uAmbientLightCount;`     |           |x              |            |             |\n|`uniform int uDirectionalLightCount;` |           |x              |            |             |\n|`uniform int uPointLightCount;`       |           |x              |            |             |\n|`uniform vec3 uAmbientColor[8];`      |           |x              |            |             |\n|`uniform vec3 uLightingDirection[8];` |           |x              |            |             |\n|`uniform vec3 uDirectionalColor[8];`  |           |x              |            |             |\n|`uniform vec3 uPointLightLocation[8];`|           |x              |            |             |\n|`uniform vec3 uPointLightColor[8];`   |           |x              |            |             |\n|`uniform bool uSpecular;`             |           |x              |            |             |\n|`uniform bool uUseLighting;`          |           |x              |            |             |\n\n#### Texture Parameters\n\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|\n|--------------------------------------|-----------|---------------|------------|-------------|\n|`uniform sampler2D uSampler;`         |           |x              |            |             |\n|`uniform bool isTexture;`             |           |x              |            |             |\n\n#### General Parameters\n\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|\n|--------------------------------------|-----------|---------------|------------|-------------|\n|`uniform float uResolution;`          |           |               |x           |             |\n|`uniform float uPointSize;`           |           |               |x           |             |\n\n#### Varying Parameters\n\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|\n|--------------------------------------|-----------|---------------|------------|-------------|\n|`varying vec3 vVertexNormal;`         |           |x              |            |             |\n|`varying vec2 vVertTexCoord;`         |           |x              |            |             |\n|`varying vec3 vLightWeighting;`       |           |x              |            |             |\n|`varying highp vec2 vVertTexCoord;`   |           |               |            |x            |\n|`varying vec4 vColor;`                |           |               |x           |             |\n\n\n## Next Steps\n\nComing soon!",
          "filepath": "data/repos/processing/p5.js-0.7/developer_docs/webgl_mode_architecture.md",
          "repo": "processing/p5.js",
          "version": "0.7",
          "chunk_index": 0
        }
      },
      {
        "id": "6460a715-a6d2-40ce-804a-f4503e639264",
        "score": 0.015384615384615385,
        "payload": {
          "text": "var img;\nvar sz = 100;\n\nfunction preload() {\n  img = loadImage('assets/UV_Grid_Sm.jpg');\n}\n\nfunction setup() {\n  createCanvas(windowWidth, windowHeight, WEBGL);\n}\n\nfunction draw() {\n  background(255);\n  randomSeed(1);\n\n  for (var i = 0; i < 200; i++) {\n    push();\n\n    translate(\n      random(-width / 2 + sz, width / 2 - sz),\n      random(-height / 2 + sz, height / 2 - sz)\n    );\n    rotateZ(random(0, 2 * PI) + frameCount * 0.1);\n\n    if (i % 2 === 0) {\n      texture(img);\n    } else {\n      fill(random(128, 255), 0, random(128, 255));\n    }\n\n    beginShape(TRIANGLES);\n    vertex(-sz, -sz, 0, 0, 0);\n    vertex(sz, -sz, 0, 1, 0);\n    vertex(sz, sz, 0, 1, 1);\n    vertex(sz, sz, 0, 1, 1);\n    vertex(-sz, sz, 0, 0, 1);\n    vertex(-sz, -sz, 0, 0, 0);\n    endShape();\n    pop();\n  }\n}\n\n/* http://localhost:8000/test/manual-test-examples/webgl/immediateMode/texture/ */\n",
          "filepath": "data/repos/processing/p5.js-0.7/test/manual-test-examples/webgl/immediateMode/mixTextureAndFill/sketch.js",
          "repo": "processing/p5.js",
          "version": "0.7",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "processing__p5.js-4147",
    "model_patch": "diff --git a/src/webgl/vertex.js b/src/webgl/vertex.js\nindex 1234567..89abcde 100644\n--- a/src/webgl/vertex.js\n+++ b/src/webgl/vertex.js\n@@ -1,6 +1,7 @@\n p5.prototype.vertex = function(x, y, moveTo, u, v) {\n   if (this._renderer.isP3D) {\n-    this._renderer.vertex(...arguments);\n+    this._renderer._setFill(this._renderer._getFill());\n+    this._renderer._setStroke(this._renderer._getStroke());\n+    this._renderer.vertex(x, y, moveTo, u, v);\n   } else {\n     const vert = [];\n     vert.isVert = true;",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 179.5,
      "issue_embedding_time_ms": 179.5,
      "retrieval_time_ms_splade": 47.12,
      "retrieval_time_ms": 47.12,
      "total_retrieval_time_ms": 226.62,
      "generation_time_ms": 2488.83,
      "total_io_time_ms": 2715.45,
      "input_total_token_limit": null,
      "issue_text_tokens": 635,
      "vlm_tokens": 0,
      "retrieved_tokens": 11951,
      "prompt_template_tokens": 513,
      "total_input_prompt_tokens": 13099,
      "output_generated_tokens": 166,
      "total_io_tokens": 13265,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nWEBGL vertex color no longer working as expected in 0.8.0\\nI read multiple issues related to WEBGL but I could not find this one. It seems something broke between 0.8.0 and 0.9.0. \\r\\n\\r\\n#### Nature of issue?\\r\\n\\r\\n- [x] Found a bug\\r\\n- [ ] Existing feature enhancement\\r\\n- [ ] New feature request\\r\\n\\r\\n#### Most appropriate sub-area of p5.js?\\r\\n\\r\\n- [x] Color\\r\\n- [ ] Core/Environment/Rendering\\r\\n- [ ] Data\\r\\n- [ ] Events\\r\\n- [ ] Image\\r\\n- [ ] IO\\r\\n- [ ] Math\\r\\n- [ ] Typography\\r\\n- [ ] Utilities\\r\\n- [x] WebGL\\r\\n- [ ] Other (specify if possible)\\r\\n\\r\\n#### Which platform were you using when you encountered this?\\r\\n\\r\\n- [ ] Mobile/Tablet (touch devices)\\r\\n- [x] Desktop/Laptop\\r\\n- [ ] Others (specify if possible)\\r\\n\\r\\n#### Details about the bug: \\r\\n\\r\\n- p5.js version: 0.9.0\\r\\n- Web browser and version: 78.0.3904.97\\r\\n- Operating System: Windows 10\\r\\n- Steps to reproduce this:\\r\\n\\r\\n1) Using the p4js editor, create a new sketch, and make sure the HTML has a reference to p5js version 0.9.0\\r\\n2) Paste the following code to the editor and hit play. A live version is available [here](https://editor.p5js.org/haschdl/sketches/tlmBNIdjR)\\r\\n\\r\\n```javascript\\r\\nfunction setup() {\\r\\n  createCanvas(500, 500, WEBGL);\\r\\n}\\r\\n\\r\\nfunction draw() {\\r\\n  beginShape();\\r\\n  fill(100,100,20);\\r\\n  vertex(-150, -150);\\r\\n  fill(250);\\r\\n  vertex(150, -150);\\r\\n  fill(200);\\r\\n  vertex(150, 150);\\r\\n  fill(100,50, 100);\\r\\n  vertex(-150, 150);\\r\\n  endShape(CLOSE);\\r\\n}\\r\\n```\\r\\n3) The output will be as follows (using p5.js version 0.9.0):\\r\\n![image](https://user-images.githubusercontent.com/9550197/68548929-8b2a5e00-03f2-11ea-9992-02cb1b185d81.png)\\r\\n\\r\\nChanging the `sketch.hmtl` to use the version **0.8.0**, we get the expected output. A live version is available [here](https://editor.p5js.org/haschdl/sketches/LNpN29qY4). Note the code in `sketch.js` is the same, but the reference inside `sketch.html` is to p5js 0.8.0\\r\\n![image](https://user-images.githubusercontent.com/9550197/68548937-ae550d80-03f2-11ea-9570-682b42bbd7e0.png)\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n#### Feature enhancement details:\\r\\n\\r\\n\\r\\n\\r\\n#### New feature details:\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of ISSUE_TEMPLATE.md]\\n<!--\\nHi there! \\n\\nPLEASE NOTE: The github issues are for bugs and feature requests for the p5.js library itself. If you have a general question or bug programming with p5.js please post it in the p5.js forum: https://discourse.processing.org\\n\\nTo check any option, replace the \\\"[ ]\\\" with a \\\"[x]\\\". Be sure to check out how it looks in the Preview tab! Feel free to remove any portion of the template that is not relevant for your issue.\\n-->\\n\\n#### Nature of issue?\\n\\n- [ ] Found a bug\\n- [ ] Existing feature enhancement\\n- [ ] New feature request\\n\\n#### Most appropriate sub-area of p5.js?\\n\\n- [ ] Color\\n- [ ] Core/Environment/Rendering\\n- [ ] Data\\n- [ ] Events\\n- [ ] Image\\n- [ ] IO\\n- [ ] Math\\n- [ ] Typography\\n- [ ] Utilities\\n- [ ] WebGL\\n- [ ] Other (specify if possible)\\n\\n#### Which platform were you using when you encountered this?\\n\\n- [ ] Mobile/Tablet (touch devices)\\n- [ ] Desktop/Laptop\\n- [ ] Others (specify if possible)\\n\\n#### Details about the bug: \\n\\n- p5.js version: <!-- You can first this in the first line of the p5.js file -->\\n- Web browser and version: <!-- In the address bar, on Chrome enter \\\"chrome://version\\\", on Firefox enter \\\"about:support\\\". On Safari, use \\\"About Safari\\\". -->\\n- Operating System: <!-- Ex: Windows/MacOSX/Linux along with version -->\\n- Steps to reproduce this:\\n<!-- Include a simple code snippet that demonstrates the problem, along with any console errors produced. If this isn't possible, then simply describe the issue as best you can! -->\\n\\n<!-- If you want to enhance an existing feature, please describe here, otherwise remove this section -->\\n#### Feature enhancement details:\\n\\n\\n<!-- If you want to request a new feature, please describe here, otherwise remove this section -->\\n#### New feature details:\\n\\n\\n[end of ISSUE_TEMPLATE.md]\\n[start of README.md]\\n[![Build Status](https://travis-ci.org/processing/p5.js.svg?branch=master)](https://travis-ci.org/processing/p5.js) [![npm version](https://badge.fury.io/js/p5.svg)](https://www.npmjs.com/package/p5)\\n\\n# [p5.js](http://p5js.org)\\n\\nHello! p5.js is a JavaScript library that starts with the original goal of Processing, to make coding accessible for artists, designers, educators, and beginners, and reinterprets this for today's web.\\n\\nUsing the original metaphor of a software sketchbook, p5.js has a full set of drawing functionality. However, you're not limited to your drawing canvas, you can think of your whole browser page as your sketch! For this, p5.js has addon libraries that make it easy to interact with other HTML5 objects, including text, input, video, webcam, and sound.\\n\\np5.js is a new interpretation, not an emulation or port, and it is in active development. An official editing environment is coming soon, as well as many more features!\\n\\nIf you already know the basics of JavaScript or Processing, the [p5.js overview](https://github.com/processing/p5.js/wiki/p5.js-overview) wiki page is a good place to start.\\n\\nIf you have found a bug in the p5.js library, you can file it here under the [\\u201cissues\\u201d tab](https://github.com/processing/p5.js/issues). An indicative template for reporting an issue is provided to assist you (and us!) better.\\n\\n## p5.js library\\n\\nTo use the complete p5.js library, you can [download it here](http://p5js.org/download). If you are interested in the most recent, less stable version, or even simply in (**new!**) certain components of p5.js, you can clone this repository and run `grunt` from the command line to generate the library from source. See the [developer docs](https://github.com/processing/p5.js/blob/master/developer_docs/) for more information about our build process to generate the complete as well as selective library.\\n\\nYou can also start with the [codepen template](https://codepen.io/p5js/pen/wreBKy). You may need to update the version of the p5.js library that is linked into the html section.\\n\\nCommunity maintained typescript definitions are [here](https://github.com/p5-types/p5.ts).\\n\\n## Issues\\n\\nPlease post bugs in the correct repository:\\n\\n* p5.js general and p5.dom: [https://github.com/processing/p5.js/issues](https://github.com/processing/p5.js/issues)\\n* p5.sound: [https://github.com/processing/p5.js-sound/issues](https://github.com/processing/p5.js-sound/issues)\\n* p5.js website: [https://github.com/processing/p5.js-website/issues](https://github.com/processing/p5.js-website/issues)\\n* p5.js web editor: [https://github.com/processing/p5.js-web-editor/issues](https://github.com/processing/p5.js-web-editor/issues)\\n\\n\\n## Learning\\n\\nCheck out [p5js.org](http://p5js.org) for lots more! Here are some quick-links:\\n\\n* [Get Started](http://p5js.org/get-started): Create and run your first sketch!\\n* [p5.js overview](https://github.com/processing/p5.js/wiki/p5.js-overview) \\u2014 An overview of the main features and functionality of p5.js.\\n* [Reference](http://p5js.org/reference): The functionality supported by p5.js.\\n* [Learn](//p5js.org/learn): Tutorials and short, prototypical examples exploring the basics of p5.js.\\n* [Forum](http://forum.processing.org/two/categories/p5-js): Ask and answers questions about how to make things with p5.js here.\\n* [Libraries](http://p5js.org/libraries): Extend p5 functionality to interact with HTML, manipulate sound, and more!\\n\\n## Get Involved\\n\\np5.js is a collaborative project created by many individuals, and you are invited to help. All types of involvement are welcome. See the [community section](http://p5js.org/community) to get started!\\n\\nDevelopers, check out the [developer docs](https://github.com/processing/p5.js/blob/master/developer_docs/) for more in-depth details about contributing code, bug fixes, and documentation.\\n\\n## Contributors\\n\\nWe recognize all types of contributions. This project follows the [all-contributors](https://github.com/kentcdodds/all-contributors) specification. Instructions to add yourself or add contribution emojis to your name are [here](https://github.com/processing/p5.js/issues/2309).\\n\\n<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->\\n<!-- prettier-ignore -->\\n<table>\\n  <tr>\\n    <td align=\\\"center\\\"><a href=\\\"http://lauren-mccarthy.com\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/191056?v=4\\\" width=\\\"100px;\\\" alt=\\\"Lauren McCarthy\\\"/><br /><sub><b>Lauren McCarthy</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://jasonsigal.cc\\\"><img src=\\\"https://avatars2.githubusercontent.com/u/504124?v=4\\\" width=\\\"100px;\\\" alt=\\\"Jason Sigal\\\"/><br /><sub><b>Jason Sigal</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://twitter.com/KarenPunkPunk\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/1695075?v=4\\\" width=\\\"100px;\\\" alt=\\\"Karen\\\"/><br /><sub><b>Karen</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://www.evelyneastmond.com\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/699840?v=4\\\" width=\\\"100px;\\\" alt=\\\"Evelyn Eastmond\\\"/><br /><sub><b>Evelyn Eastmond</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://www.shiffman.net\\\"><img src=\\\"https://avatars0.githubusercontent.com/u/191758?v=4\\\" width=\\\"100px;\\\" alt=\\\"Daniel Shiffman\\\"/><br /><sub><b>Daniel Shiffman</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://reas.com\\\"><img src=\\\"https://avatars2.githubusercontent.com/u/677774?v=4\\\" width=\\\"100px;\\\" alt=\\\"Casey Reas\\\"/><br /><sub><b>Casey Reas</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://fathom.info\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/1623101?v=4\\\" width=\\\"100px;\\\" alt=\\\"Ben Fry\\\"/><br /><sub><b>Ben Fry</b></sub></a><br /></td>\\n  </tr>\\n  <tr>\\n    <td align=\\\"center\\\"><a href=\\\"https://designerken.be/designing\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/7543950?v=4\\\" width=\\\"100px;\\\" alt=\\\"Kenneth Lim\\\"/><br /><sub><b>Kenneth Lim</b></sub></a><br /><a href=\\\"https://github.com/processing/p5.js/issues?q=author%3Alimzykenneth\\\" title=\\\"Bug reports\\\">\\ud83d\\udc1b</a> <a href=\\\"https://github.com/processing/p5.js/commits?author=limzykenneth\\\" title=\\\"Code\\\">\\ud83d\\udcbb</a> <a href=\\\"https://github.com/processing/p5.js/commits?author=limzykenneth\\\" title=\\\"Documentation\\\">\\ud83d\\udcd6</a></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://www.katehollenbach.com\\\"><img src=\\\"https://avatars0.githubusercontent.com/u/78966?v=4\\\" width=\\\"100px;\\\" alt=\\\"kate hollenbach\\\"/><br /><sub><b>kate hollenbach</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/mlarghydracept\\\"><img src=\\\"https://avatars2.githubusercontent.com/u/10382506?v=4\\\" width=\\\"100px;\\\" alt=\\\"Stalgia Grigg\\\"/><br /><sub><b>Stalgia Grigg</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/machinic\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/3985997?v=4\\\" width=\\\"100px;\\\" alt=\\\"Jerel Johnson\\\"/><br /><sub><b>Jerel Johnson</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://sakshamsaxena.in\\\"><img src=\\\"https://avatars2.githubusercontent.com/u/8774516?v=4\\\" width=\\\"100px;\\\" alt=\\\"Saksham Saxena\\\"/><br /><sub><b>Saksham Saxena</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://twitter.com/ed_saber\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/11218401?v=4\\\" width=\\\"100px;\\\" alt=\\\"saber khan\\\"/><br /><sub><b>saber khan</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/dhowe\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/737638?v=4\\\" width=\\\"100px;\\\" alt=\\\"Daniel Howe\\\"/><br /><sub><b>Daniel Howe</b></sub></a><br /></td>\\n  </tr>\\n  <tr>\\n    <td align=\\\"center\\\"><a href=\\\"http://kevinsiwoff.com\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/1585036?v=4\\\" width=\\\"100px;\\\" alt=\\\"Kevin Siwoff\\\"/><br /><sub><b>Kevin Siwoff</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://portfolio.toolness.org/\\\"><img src=\\\"https://avatars2.githubusercontent.com/u/124687?v=4\\\" width=\\\"100px;\\\" alt=\\\"Atul Varma\\\"/><br /><sub><b>Atul Varma</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://www.jessklein.is/\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/535012?v=4\\\" width=\\\"100px;\\\" alt=\\\"Jess Klein\\\"/><br /><sub><b>Jess Klein</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://unoseistres.com\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/7158943?v=4\\\" width=\\\"100px;\\\" alt=\\\"uno seis tres\\\"/><br /><sub><b>uno seis tres</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://www.susanev.com/\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/5489125?v=4\\\" width=\\\"100px;\\\" alt=\\\"susan evans\\\"/><br /><sub><b>susan evans</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://sasj.tumblr.com\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/2619912?v=4\\\" width=\\\"100px;\\\" alt=\\\"Saskia Freeke\\\"/><br /><sub><b>Saskia Freeke</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://www.phoenixperry.com\\\"><img src=\\\"https://avatars0.githubusercontent.com/u/783625?v=4\\\" width=\\\"100px;\\\" alt=\\\"Phoenix Perry\\\"/><br /><sub><b>Phoenix Perry</b></sub></a><br /></td>\\n  </tr>\\n  <tr>\\n    <td align=\\\"center\\\"><a href=\\\"https://s01e01.xyz/jct\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/2850174?v=4\\\" width=\\\"100px;\\\" alt=\\\"jesse cahn-thompson\\\"/><br /><sub><b>jesse cahn-thompson</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/lee2sman\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/7377908?v=4\\\" width=\\\"100px;\\\" alt=\\\"Lee T\\\"/><br /><sub><b>Lee T</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://www.cargocollective.com/chellyjin\\\"><img src=\\\"https://avatars0.githubusercontent.com/u/26236471?v=4\\\" width=\\\"100px;\\\" alt=\\\"Chelly Jin\\\"/><br /><sub><b>Chelly Jin</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://L05.is\\\"><img src=\\\"https://avatars0.githubusercontent.com/u/3998826?v=4\\\" width=\\\"100px;\\\" alt=\\\"L05\\\"/><br /><sub><b>L05</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://www.diygirls.org\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/1680038?v=4\\\" width=\\\"100px;\\\" alt=\\\"DIYgirls\\\"/><br /><sub><b>DIYgirls</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/lam802\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/8697852?v=4\\\" width=\\\"100px;\\\" alt=\\\"lam802\\\"/><br /><sub><b>lam802</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://www.mayaman.cc\\\"><img src=\\\"https://avatars0.githubusercontent.com/u/8224678?v=4\\\" width=\\\"100px;\\\" alt=\\\"Maya Man\\\"/><br /><sub><b>Maya Man</b></sub></a><br /></td>\\n  </tr>\\n  <tr>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/tegacodes\\\"><img src=\\\"https://avatars0.githubusercontent.com/u/5488045?v=4\\\" width=\\\"100px;\\\" alt=\\\"Tega Brain\\\"/><br /><sub><b>Tega Brain</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/luisaph\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/295879?v=4\\\" width=\\\"100px;\\\" alt=\\\"luisaph\\\"/><br /><sub><b>luisaph</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/almchung\\\"><img src=\\\"https://avatars2.githubusercontent.com/u/22488500?v=4\\\" width=\\\"100px;\\\" alt=\\\"AlM Chng\\\"/><br /><sub><b>AlM Chng</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://montoyamoraga.io\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/3926350?v=4\\\" width=\\\"100px;\\\" alt=\\\"aar\\u00f3n montoya-moraga\\\"/><br /><sub><b>aar\\u00f3n montoya-moraga</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/catarak\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/6063380?v=4\\\" width=\\\"100px;\\\" alt=\\\"Cassie Tarakajian\\\"/><br /><sub><b>Cassie Tarakajian</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://www.niklaspeters.com\\\"><img src=\\\"https://avatars0.githubusercontent.com/u/20650298?s=460&amp;v=4\\\" width=\\\"100px;\\\" alt=\\\"Niklas Peters\\\"/><br /><sub><b>Niklas Peters</b></sub></a><br /><a href=\\\"https://github.com/processing/p5.js/commits?author=nikfm\\\" title=\\\"Documentation\\\">\\ud83d\\udcd6</a> <a href=\\\"#tutorial-nikfm\\\" title=\\\"Tutorials\\\">\\u2705</a></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://mathuramg.com\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/5505598?v=4\\\" width=\\\"100px;\\\" alt=\\\"Mathura MG\\\"/><br /><sub><b>Mathura MG</b></sub></a><br /></td>\\n  </tr>\\n  <tr>\\n    <td align=\\\"center\\\"><a href=\\\"http://1023.io\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/8662372?v=4\\\" width=\\\"100px;\\\" alt=\\\"Yining Shi\\\"/><br /><sub><b>Yining Shi</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://kaganjd.github.io/portfolio/\\\"><img src=\\\"https://avatars0.githubusercontent.com/u/9204835?v=4\\\" width=\\\"100px;\\\" alt=\\\"Jen Kagan\\\"/><br /><sub><b>Jen Kagan</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://fromjia.com/\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/6025418?v=4\\\" width=\\\"100px;\\\" alt=\\\"Jiashan Wu\\\"/><br /><sub><b>Jiashan Wu</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/futuremarc\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/8646752?v=4\\\" width=\\\"100px;\\\" alt=\\\"Marc Abbey\\\"/><br /><sub><b>Marc Abbey</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://www.kadamwhite.com\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/442115?v=4\\\" width=\\\"100px;\\\" alt=\\\"K.Adam White\\\"/><br /><sub><b>K.Adam White</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://www.joecridge.me/\\\"><img src=\\\"https://avatars2.githubusercontent.com/u/11491479?v=4\\\" width=\\\"100px;\\\" alt=\\\"Joe Cridge\\\"/><br /><sub><b>Joe Cridge</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://mikewesthad.com\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/1131802?v=4\\\" width=\\\"100px;\\\" alt=\\\"Michael Hadley\\\"/><br /><sub><b>Michael Hadley</b></sub></a><br /></td>\\n  </tr>\\n  <tr>\\n    <td align=\\\"center\\\"><a href=\\\"http://tiller.dog\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/2047962?v=4\\\" width=\\\"100px;\\\" alt=\\\"Todd H. Page\\\"/><br /><sub><b>Todd H. Page</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://jaredsprague.com/\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/3926730?v=4\\\" width=\\\"100px;\\\" alt=\\\"Jared Sprague\\\"/><br /><sub><b>Jared Sprague</b></sub></a><br /><a href=\\\"https://github.com/processing/p5.js/commits?author=Jared-Sprague\\\" title=\\\"Code\\\">\\ud83d\\udcbb</a> <a href=\\\"https://github.com/processing/p5.js/commits?author=Jared-Sprague\\\" title=\\\"Documentation\\\">\\ud83d\\udcd6</a> <a href=\\\"#example-Jared-Sprague\\\" title=\\\"Examples\\\">\\ud83d\\udca1</a> <a href=\\\"#financial-Jared-Sprague\\\" title=\\\"Financial\\\">\\ud83d\\udcb5</a> <a href=\\\"https://github.com/processing/p5.js/commits?author=Jared-Sprague\\\" title=\\\"Tests\\\">\\u26a0\\ufe0f</a> <a href=\\\"https://github.com/processing/p5.js/issues?q=author%3AJared-Sprague\\\" title=\\\"Bug reports\\\">\\ud83d\\udc1b</a></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://www.outofambit.com\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/964912?v=4\\\" width=\\\"100px;\\\" alt=\\\"evelyn masso\\\"/><br /><sub><b>evelyn masso</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://bomoko.net\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/297936?v=4\\\" width=\\\"100px;\\\" alt=\\\"Blaize Kaye\\\"/><br /><sub><b>Blaize Kaye</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/DarkPrince304\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/9005407?v=4\\\" width=\\\"100px;\\\" alt=\\\"Sanchit Kapoor\\\"/><br /><sub><b>Sanchit Kapoor</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://meiamso.me\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/1187491?v=4\\\" width=\\\"100px;\\\" alt=\\\"Oliver Wright\\\"/><br /><sub><b>Oliver Wright</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/mindofmatthew\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/911429?v=4\\\" width=\\\"100px;\\\" alt=\\\"Matthew Kaney\\\"/><br /><sub><b>Matthew Kaney</b></sub></a><br /></td>\\n  </tr>\\n  <tr>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/Spongman\\\"><img src=\\\"https://avatars2.githubusercontent.com/u/1088194?v=4\\\" width=\\\"100px;\\\" alt=\\\"Spongman\\\"/><br /><sub><b>Spongman</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/CleezyITP\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/5375410?v=4\\\" width=\\\"100px;\\\" alt=\\\"Claire K-V\\\"/><br /><sub><b>Claire K-V</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://lukedubois.com\\\"><img src=\\\"https://avatars0.githubusercontent.com/u/4147978?v=4\\\" width=\\\"100px;\\\" alt=\\\"R. Luke DuBois\\\"/><br /><sub><b>R. Luke DuBois</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/kevinbarabash\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/1044413?v=4\\\" width=\\\"100px;\\\" alt=\\\"Kevin Barabash\\\"/><br /><sub><b>Kevin Barabash</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://andrescolubri.net/\\\"><img src=\\\"https://avatars2.githubusercontent.com/u/62246?v=4\\\" width=\\\"100px;\\\" alt=\\\"codeanticode\\\"/><br /><sub><b>codeanticode</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://www.bobholtwebdev.com/\\\"><img src=\\\"https://avatars2.githubusercontent.com/u/94167?v=4\\\" width=\\\"100px;\\\" alt=\\\"Bob Holt\\\"/><br /><sub><b>Bob Holt</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://sarahghp.com\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/1477362?v=4\\\" width=\\\"100px;\\\" alt=\\\"Sarah Groff Hennigh-Palermo\\\"/><br /><sub><b>Sarah Groff Hennigh-Palermo</b></sub></a><br /></td>\\n  </tr>\\n  <tr>\\n    <td align=\\\"center\\\"><a href=\\\"http://jordanshaw.com\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/288140?v=4\\\" width=\\\"100px;\\\" alt=\\\"Jordan Shaw\\\"/><br /><sub><b>Jordan Shaw</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/brightredchilli\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/751191?v=4\\\" width=\\\"100px;\\\" alt=\\\"brightredchilli\\\"/><br /><sub><b>brightredchilli</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://derekkinsman.com/\\\"><img src=\\\"https://avatars0.githubusercontent.com/u/611218?v=4\\\" width=\\\"100px;\\\" alt=\\\"Derek J. Kinsman\\\"/><br /><sub><b>Derek J. Kinsman</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/hkirat\\\"><img src=\\\"https://avatars2.githubusercontent.com/u/8079861?v=4\\\" width=\\\"100px;\\\" alt=\\\"harkirat singh\\\"/><br /><sub><b>harkirat singh</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/GoToLoop\\\"><img src=\\\"https://avatars2.githubusercontent.com/u/6551569?v=4\\\" width=\\\"100px;\\\" alt=\\\"GoToLoop\\\"/><br /><sub><b>GoToLoop</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://maxgoldste.in/\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/1191970?v=4\\\" width=\\\"100px;\\\" alt=\\\"Max Goldstein\\\"/><br /><sub><b>Max Goldstein</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://xystudio.cc\\\"><img src=\\\"https://avatars2.githubusercontent.com/u/1507265?v=4\\\" width=\\\"100px;\\\" alt=\\\"XY Feng\\\"/><br /><sub><b>XY Feng</b></sub></a><br /></td>\\n  </tr>\\n  <tr>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/PaliwalSparsh\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/6324861?v=4\\\" width=\\\"100px;\\\" alt=\\\"Sparsh Paliwal\\\"/><br /><sub><b>Sparsh Paliwal</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://austince.me\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/4655775?v=4\\\" width=\\\"100px;\\\" alt=\\\"Austin Cawley-Edwards\\\"/><br /><sub><b>Austin Cawley-Edwards</b></sub></a><br /><a href=\\\"https://github.com/processing/p5.js/commits?author=austince\\\" title=\\\"Documentation\\\">\\ud83d\\udcd6</a> <a href=\\\"#example-austince\\\" title=\\\"Examples\\\">\\ud83d\\udca1</a></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://www.estebanalmiron.com\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/1040718?v=4\\\" width=\\\"100px;\\\" alt=\\\"taseenb\\\"/><br /><sub><b>taseenb</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/tafsiri\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/26408?v=4\\\" width=\\\"100px;\\\" alt=\\\"Yannick Assogba\\\"/><br /><sub><b>Yannick Assogba</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/johnpasquarello\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/2349625?v=4\\\" width=\\\"100px;\\\" alt=\\\"John Pasquarello\\\"/><br /><sub><b>John Pasquarello</b></sub></a><br /><a href=\\\"https://github.com/processing/p5.js/commits?author=johnpasquarello\\\" title=\\\"Code\\\">\\ud83d\\udcbb</a></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://HappyCoding.io\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/6930986?v=4\\\" width=\\\"100px;\\\" alt=\\\"Kevin Workman\\\"/><br /><sub><b>Kevin Workman</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/gauini\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/4229215?v=4\\\" width=\\\"100px;\\\" alt=\\\"gauini\\\"/><br /><sub><b>gauini</b></sub></a><br /></td>\\n  </tr>\\n  <tr>\\n    <td align=\\\"center\\\"><a href=\\\"http://sansumbrella.com/\\\"><img src=\\\"https://avatars0.githubusercontent.com/u/81553?v=4\\\" width=\\\"100px;\\\" alt=\\\"David Wicks\\\"/><br /><sub><b>David Wicks</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/guillemontecinos\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/19594257?v=4\\\" width=\\\"100px;\\\" alt=\\\"Guillermo Montecinos\\\"/><br /><sub><b>Guillermo Montecinos</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://www.walking-productions.com/notslop/\\\"><img src=\\\"https://avatars0.githubusercontent.com/u/431774?v=4\\\" width=\\\"100px;\\\" alt=\\\"Shawn Van Every\\\"/><br /><sub><b>Shawn Van Every</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://www.wiredpieces.com\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/579033?v=4\\\" width=\\\"100px;\\\" alt=\\\"Sinan Ascioglu\\\"/><br /><sub><b>Sinan Ascioglu</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://hamoid.com\\\"><img src=\\\"https://avatars0.githubusercontent.com/u/108264?v=4\\\" width=\\\"100px;\\\" alt=\\\"Abe Pazos\\\"/><br /><sub><b>Abe Pazos</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://charstiles.com/\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/10173517?v=4\\\" width=\\\"100px;\\\" alt=\\\"Char\\\"/><br /><sub><b>Char</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://genekogan.com\\\"><img src=\\\"https://avatars3.githubusercontent.com/u/1335251?v=4\\\" width=\\\"100px;\\\" alt=\\\"Gene Kogan\\\"/><br /><sub><b>Gene Kogan</b></sub></a><br /></td>\\n  </tr>\\n  <tr>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/jay-manday\\\"><img src=\\\"https://avatars2.githubusercontent.com/u/13109165?v=4\\\" width=\\\"100px;\\\" alt=\\\"Jason Mandel\\\"/><br /><sub><b>Jason Mandel</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"https://github.com/russomf\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/11917158?v=4\\\" width=\\\"100px;\\\" alt=\\\"Mark Russo\\\"/><br /><sub><b>Mark Russo</b></sub></a><br /></td>\\n    <td align=\\\"center\\\"><a href=\\\"http://jedahan.com\\\"><img src=\\\"https://avatars1.githubusercontent.com/u/32407?v=4\\\" width=\\\"100px;\\\" alt=\\\"Jonathan Dahan\\\"/><br /><sub><b>Jonathan Dahan</b></sub></a><br /></td>\\n[end of README.md]\\n[start of roadmap.md]\\n# p5.js 1.0 Roadmap [WIP]\\n\\nThis document is a list of possible features, improvements, and maintenance items for a future 1.0 version of p5.js. The first draft was created by the working group at UCLA Design Media Arts and is put out for your feedback. This is a working draft that may be updated and will be significantly revised at the p5.js Contributor\\u2019s Conference, schedule for August 2019. Our goal is to release p5.js 1.0 by the end of 2019.\\n\\nWith the exception of ES6 migration, the tasks here are not ordered by priority. The [milestones](https://github.com/processing/p5.js/milestones) on github is where we prioritize tasks for releases and track progress.\\n\\n## ES6 migration\\n* Phase 1: User facing\\n  * p5js.org tutorials (issue per tutorial)\\n  * p5js.org examples (issue per section)\\n  * p5js.org reference examples (issue per section)\\n* Phase 2: Developer facing\\n  * Build processes\\n  * Developer docs\\n* Phase 3: Codebase\\n  * TBD: This may be done by one dedicated person, we will not start on this until this is determined.\\n* Later phase:\\n  * Other materials -- To what extent do external materials (Getting Started with p5.js book, Coding Train) need to be updated to ensure a smooth rollout of educational resources?\\n  * Contributed libraries\\n\\n## Maintenance\\n* Audio updates for pending Chrome changes (user must interact first)\\n  * Update reference documentation and examples, and examples page\\n  * Update FES to warn about this?\\n* More complete unit tests\\n  * Clearer tutorial for doing this\\n* Improve Friendly Error System documentation\\n  * Add comments to https://github.com/processing/p5.js/blob/master/src/core/error_helpers.js to better document what\\u2019s happening in this process.\\n\\n## Bug fixing\\n* Mobile device support / upgrades\\n* WebGL robustness\\n  * Lighting\\n    * lights() implementation\\n    * Per pixel lighting by default\\n    * Simplify shader pipeline?\\n    * Update examples\\n  * Simplify shape pipeline\\n    * One rendering method for shapes, construct geom object from retain mode\\n\\n## New Features\\n* Shapes\\n  * createShape() public API for returning a p5.Geometry object?? What is the equivalent in 2D?\\n  * Anything SVG for 2D?\\n* GIF support with image()\\n  * createImg is a good work around but students love gifs :)\\n* i18n (localisation) for error messages + FES\\n  * Develop infrastructure for localizing error and console messages within the codebase\\n  * Translate various error messages\\n* K-12 support as discussed [in thread](https://github.com/processing/p5.js/issues/2305)\\n  * add circle() and square()\\n  * Get makeyourownalgorithmicart/simple.js on libraries page\\n* Implement Promises across the library\\n  * Confirm/implement use of Promises across codebase\\n  * Open use of Promises in API for loadX() functions (lower priority?)\\n  \\n## Contributor process and support\\n* Open tickets for incompleteness in various areas:\\n  * Testing\\n  * Feature implementation\\n  * Translation\\n* Stricter use of [semantic versioning](https://semver.org/)\\n* Clarify process for soliciting roadmap input for future versions.\\n\\n## Etc\\n* For 1.0 release, drop a sweet new set of curated examples from artists and coders.\\n\\n[end of roadmap.md]\\n[start of vertex.js]\\n * </div>\\n *\\n * <div>\\n * <code>\\n * createCanvas(100, 100, WEBGL);\\n * background(240, 240, 240);\\n * fill(237, 34, 93);\\n * noStroke();\\n * beginShape();\\n * vertex(0, 35);\\n * vertex(35, 0);\\n * vertex(0, -35);\\n * vertex(-35, 0);\\n * endShape();\\n * </code>\\n * </div>\\n *\\n * <div>\\n * <code>\\n * createCanvas(100, 100, WEBGL);\\n * background(240, 240, 240);\\n * fill(237, 34, 93);\\n * noStroke();\\n * beginShape();\\n * vertex(-10, 10);\\n * vertex(0, 35);\\n * vertex(10, 10);\\n * vertex(35, 0);\\n * vertex(10, -8);\\n * vertex(0, -35);\\n * vertex(-10, -8);\\n * vertex(-35, 0);\\n * endShape();\\n * </code>\\n * </div>\\n *\\n * <div>\\n * <code>\\n * strokeWeight(3);\\n * stroke(237, 34, 93);\\n * beginShape(LINES);\\n * vertex(10, 35);\\n * vertex(90, 35);\\n * vertex(10, 65);\\n * vertex(90, 65);\\n * vertex(35, 10);\\n * vertex(35, 90);\\n * vertex(65, 10);\\n * vertex(65, 90);\\n * endShape();\\n * </code>\\n * </div>\\n *\\n * <div>\\n * <code>\\n * // Click to change the number of sides.\\n * // In WebGL mode, custom shapes will only\\n * // display hollow fill sections when\\n * // all calls to vertex() use the same z-value.\\n *\\n * let sides = 3;\\n * let angle, px, py;\\n *\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n *   setAttributes('antialias', true);\\n *   fill(237, 34, 93);\\n *   strokeWeight(3);\\n * }\\n *\\n * function draw() {\\n *   background(200);\\n *   rotateX(frameCount * 0.01);\\n *   rotateZ(frameCount * 0.01);\\n *   ngon(sides, 0, 0, 80);\\n * }\\n *\\n * function mouseClicked() {\\n *   if (sides > 6) {\\n *     sides = 3;\\n *   } else {\\n *     sides++;\\n *   }\\n * }\\n *\\n * function ngon(n, x, y, d) {\\n *   beginShape();\\n *   for (let i = 0; i < n + 1; i++) {\\n *     angle = TWO_PI / n * i;\\n *     px = x + sin(angle) * d / 2;\\n *     py = y - cos(angle) * d / 2;\\n *     vertex(px, py, 0);\\n *   }\\n *   for (let i = 0; i < n + 1; i++) {\\n *     angle = TWO_PI / n * i;\\n *     px = x + sin(angle) * d / 4;\\n *     py = y - cos(angle) * d / 4;\\n *     vertex(px, py, 0);\\n *   }\\n *   endShape();\\n * }\\n * </code>\\n * </div>\\n * @alt\\n * 4 black points in a square shape in middle-right of canvas.\\n * 4 points making a diamond shape.\\n * 8 points making a star.\\n * 8 points making 4 lines.\\n * A rotating 3D shape with a hollow section in the middle.\\n *\\n */\\n/**\\n * @method vertex\\n * @param  {Number} x\\n * @param  {Number} y\\n * @param  {Number} z   z-coordinate of the vertex\\n * @param  {Number} [u] the vertex's texture u-coordinate\\n * @param  {Number} [v] the vertex's texture v-coordinate\\n * @chainable\\n */\\np5.prototype.vertex = function(x, y, moveTo, u, v) {\\n  if (this._renderer.isP3D) {\\n    this._renderer.vertex(...arguments);\\n  } else {\\n    const vert = [];\\n    vert.isVert = true;\\n    vert[0] = x;\\n    vert[1] = y;\\n    vert[2] = 0;\\n    vert[3] = 0;\\n    vert[4] = 0;\\n    vert[5] = this._renderer._getFill();\\n    vert[6] = this._renderer._getStroke();\\n\\n    if (moveTo) {\\n      vert.moveTo = moveTo;\\n    }\\n    if (isContour) {\\n      if (contourVertices.length === 0) {\\n        vert.moveTo = true;\\n      }\\n      contourVertices.push(vert);\\n    } else {\\n      vertices.push(vert);\\n    }\\n  }\\n  return this;\\n};\\n\\nexport default p5;\\n[end of vertex.js]\\n[start of webgl_mode_architecture.md]\\n# p5.js WEBGL mode architecture\\n\\nThis document describes the structure of the p5.js WEBGL mode for p5.js contributors and maintainers\\u2014and any other interested parties. If you're interested in using 3D graphics in your sketches, [view this tutorial](https://github.com/processing/p5.js/wiki/Getting-started-with-WebGL-in-p5) instead.\\n\\n## Overview of Structure and Objects\\n\\nThe core objects in the WEBGL architecture are the p5.Renderer.GL, p5.Shader, p5.Texture, and p5.Geometry.\\nA single instance of p5.Renderer.GL manages its own p5.Shaders, p5.Textures, and p5.Geometry\\u2014a goal for this is to allow offscreen rendering using WebGL, but that hasn\\u2019t been tested yet.\\nShaders and textures are associated with a specific GL context via the renderer.\\n\\n### p5.RendererGL\\nThe p5.RendererGL object is the renderer for WEBGL / 3D Mode in p5.js.\\nDerived from p5.Renderer, it provides additional functionality not available in 2D mode, such as: `box()`, `cone()`, use of shaders, accelerated texture rendering, and lighting.\\n\\n* Manages\\u2014creates and caches\\u2014shaders (p5.Shader objects) and textures (p5.Texture objects)\\n* Prepares coordinates of shapes to be used as attribute arrays by shaders.\\n* Selects the correct shader for use when stroke, fill, texture, and various lighting methods are called, then supplies the appropriate uniforms to those shaders.\\n* Maintains data about lighting: a count of how many various types of lights are used and their parameters.\\n* Caches geometry for 3D primitives (in retained mode), with the exception of shapes created with begin/endShape, which are dynamically generated and pushed to GL every time one is drawn (in immediate mode).\\n\\nThe renderer manages choosing an appropriate p5.Shader for the current drawing conditions.\\n\\n### p5.Shader\\nThe p5.Shader class provides access to the uniforms and attributes of a GL program. \\n\\n* Compiles and links the vertex and fragment shader components\\n* Provides an API for accessing and setting shader attributes and uniforms\\n* Binds textures the shader needs before a shape is rendered\\n* Provides the bindShader() method for use in the render before a shape is drawn, then unbindShader() after the shape is drawn.\\n\\nThere are four default shaders, as documented in the Shader section.\\n\\n### p5.Texture\\nThe p5.Texture object manages GL state for a texture based on a `p5.Image`, `p5.MediaElement`, `p5.Element`, or `ImageData`.\\n\\n* Internally handles processing image data based on type, so that the p5.Renderer implementation doesn\\u2019t have to make special exceptions in its own methods when handling textures\\n* Updates conditionally every frame by making a best guess at whether or not image data has changed. Tries not to upload the texture if no change has been made, to help performance.\\n\\n### p5.Geometry\\nShapes rendered in retain mode are stored as p5.Geometry objects in a cache in the p5.Renderer object. \\nThe renderer maps strings to p5.Geometry objects based on the shape drawn and its parameters (for example, geometry for a box created with `box(70, 80, 90, 10, 20)` is mapped from `'box|70|80|90|10|20\\u2019`). Calls to functions that have retained geometry create a p5.Geometry object on the first pass and store it in a geometry hash using the aforementioned string ID. Later calls look for that ID in the hash, and if it is found use that to reference the existing object rather than creating a new one.\\n\\n* Stores vertices, normals, faces, line vertices, line normals, and texture coordinates for the geometry primitives\\n* Provides methods for computing the faces, normals, line vertices, and line normals for a set of vertices\\n\\n## Immediate Mode\\nAll attributes for drawing with Immediate Mode are stored in an object in the renderer, used to draw to the GL drawing context, and then discarded.\\n\\n## Geometry: Retain and Immediate Mode\\nRetained geometry is used for 3D primitives, while immediate mode is used for shapes created with begin/endShape.\\n\\n|Functions with retained geometry| Functions with immediate mode geometry |\\n|--------------------------------|----------------------------------------|\\n|plane()                         | bezier()                               |\\n|box()                           | curve()                                |\\n|sphere()                        | line()                                 |\\n|cylinder()                      | beginShape()                           |\\n|cone()                          | vertex()                               |\\n|ellipsoid()                     | endShape()                             |\\n|torus()                         | point()                                |\\n|triangle()                      | curveVertex()                          |\\n|arc()                           | bezierVertex()                         |\\n|point()                         | quadraticVertex()                      |\\n|ellipse()                       |\\n|rect()                          |\\n|quad()                          |\\n|text()                          |\\n\\n\\n\\n\\n\\n\\n## Texture Management\\nA p5.Renderer.GL instances manages an array of p5.Textures objects on an as-needed basis.\\nTextures are created for images and videos used with the `texture()` method or as uniforms provided to custom shaders.\\n\\nWhen the renderer needs a texture, it first checks if one has already been created for a given image/video, then provides that to a shader for rendering. A new texture is only created if an existing one cannot be found for the image/video.\\n\\n## Shaders\\n\\n### Types of Shaders\\n\\n#### Color Shader\\nProvides flat shading of objects, based on the current fill color.\\n\\n#### Light Shader (for lighting AND textures)\\nAccounts for:\\n* Lighting parameters set by `ambientLight()`, `directionalLight()`, `pointLight()`, `spotLight()` and `specularColor()`\\n* Material parameters set by `ambientMaterial()`, `emissiveMaterial()` and `specularMaterial()`\\n* Texture parameters, set by `texture()`\\n\\n#### Normal Shader\\nThe normal shader is set when `normalMaterial()` is in use. It uses the surface\\u2019s normal vector to determine a fragment color.\\n\\n### Shader Parameters\\n\\n#### Standard Model View & Camera Uniforms\\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|---------------------------------|-----------|---------------|------------|-------------|------------|\\n|`uniform mat4 uModelViewMatrix;` |x          |x              |x           |x            |x           |\\n|`uniform mat4 uProjectionMatrix;`|x          |x              |x           |x            |x           |\\n|`uniform vec4 uViewPort;`        |x          |               |            |             |            |\\n|`uniform vec4 uPerspective;`     |x          |               |            |             |            |\\n\\n\\n#### Geometry Attributes and Uniforms\\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|---------------------------------|-----------|---------------|------------|-------------|------------|\\n|`attribute vec3 aPosition;`      |x          |x              |x           |x            |x           |\\n|`attribute vec3 aNormal;`        |           |x              |            |x            |            | \\n|`attribute vec2 aTexCoord;`      |           |x              |            |x            |            |\\n|`uniform mat3 uNormalMatrix;`    |           |x              |            |x            |            |\\n|`attribute vec4 aDirection;`     |x          |               |            |             |            |\\n|`uniform float uStrokeWeight;`   |x          |               |            |             |            |\\n\\n#### Material Colors\\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|---------------------------------|-----------|---------------|------------|-------------|------------|\\n|`uniform vec4 uMaterialColor;`   |x          |x              |            |             |x           |\\n|`attribute vec4 aVertexColor;`   |           |               |x           |             |            |\\n\\n#### Light Parameters\\n\\n|Parameter                                      |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|-----------------------------------------------|-----------|---------------|------------|-------------|------------|\\n|`uniform int uAmbientLightCount;`              |           |x              |            |             |            |\\n|`uniform int uDirectionalLightCount;`          |           |x              |            |             |            |\\n|`uniform int uPointLightCount;`                |           |x              |            |             |            |\\n|`uniform int uSpotLightCount;`                 |           |x              |            |             |            |\\n|`uniform vec3 uAmbientColor[8];`               |           |x              |            |             |            |\\n|`uniform vec3 uLightingDirection[8];`          |           |x              |            |             |            |\\n|`uniform vec3 uDirectionalDiffuseColors[8];`   |           |x              |            |             |            |\\n|`uniform vec3 uDirectionalSpecularColors[8];`  |           |x              |            |             |            |\\n|`uniform vec3 uPointLightLocation[8];`         |           |x              |            |             |            |\\n|`uniform vec3 uPointLightDiffuseColors[8];`    |           |x              |            |             |            |\\n|`uniform vec3 uPointLightSpecularColors[8];`   |           |x              |            |             |            |\\n|`uniform float uSpotLightAngle[8];`            |           |x              |            |             |            |\\n|`uniform float uSpotLightConc[8];`             |           |x              |            |             |            |\\n|`uniform vec3 uSpotLightDiffuseColors[8];`     |           |x              |            |             |            |\\n|`uniform vec3 uSpotLightSpecularColors[8];`    |           |x              |            |             |            |\\n|`uniform vec3 uSpotLightLocation[8];`          |           |x              |            |             |            |\\n|`uniform vec3 uSpotLightDirection[8];`         |           |x              |            |             |            |\\n|`uniform bool uSpecular;`                      |           |x              |            |             |            |\\n|`uniform bool uEmissive;`                      |           |x              |            |             |            |\\n|`uniform int  uShininess;`                     |           |x              |            |             |            |\\n|`uniform bool uUseLighting;`                   |           |x              |            |             |            |\\n|`uniform float uConstantAttenuation;`          |           |x              |            |             |            |\\n|`uniform float uLinearAttenuation;`            |           |x              |            |             |            |\\n|`uniform float uQuadraticAttenuation;`         |           |x              |            |             |            |\\n\\n#### Texture Parameters\\n\\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\\n|`uniform sampler2D uSampler;`         |           |x              |            |             |            |\\n|`uniform bool isTexture;`             |           |x              |            |             |            |\\n\\n#### General Parameters\\n\\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\\n|`uniform float uResolution;`          |           |               |x           |             |            |\\n|`uniform float uPointSize;`           |           |               |x           |             |x           |\\n\\n#### Varying Parameters\\n\\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\\n|`varying vec3 vVertexNormal;`         |           |x              |            |             |            |\\n|`varying vec2 vVertTexCoord;`         |           |x              |            |             |            |\\n|`varying vec3 vLightWeighting;`       |           |x              |            |             |            |\\n|`varying highp vec2 vVertTexCoord;`   |           |               |            |x            |            |\\n|`varying vec4 vColor;`                |           |               |x           |             |            |\\n|`varying float vStrokeWeight`         |           |               |            |             |x           |\\n\\n## Next Steps\\n\\nComing soon!\\n\\n[end of webgl_mode_architecture.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "ISSUE_TEMPLATE.md",
        "README.md",
        "roadmap.md",
        "vertex.js",
        "webgl_mode_architecture.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "5b7f0357-460a-43b8-a762-88379166175d",
        "score": 0.01639344262295082,
        "payload": {
          "text": "<!--\nHi there! \n\nPLEASE NOTE: The github issues are for bugs and feature requests for the p5.js library itself. If you have a general question or bug programming with p5.js please post it in the p5.js forum: https://discourse.processing.org\n\nTo check any option, replace the \"[ ]\" with a \"[x]\". Be sure to check out how it looks in the Preview tab! Feel free to remove any portion of the template that is not relevant for your issue.\n-->\n\n#### Nature of issue?\n\n- [ ] Found a bug\n- [ ] Existing feature enhancement\n- [ ] New feature request\n\n#### Most appropriate sub-area of p5.js?\n\n- [ ] Color\n- [ ] Core/Environment/Rendering\n- [ ] Data\n- [ ] Events\n- [ ] Image\n- [ ] IO\n- [ ] Math\n- [ ] Typography\n- [ ] Utilities\n- [ ] WebGL\n- [ ] Other (specify if possible)\n\n#### Which platform were you using when you encountered this?\n\n- [ ] Mobile/Tablet (touch devices)\n- [ ] Desktop/Laptop\n- [ ] Others (specify if possible)\n\n#### Details about the bug: \n\n- p5.js version: <!-- You can first this in the first line of the p5.js file -->\n- Web browser and version: <!-- In the address bar, on Chrome enter \"chrome://version\", on Firefox enter \"about:support\". On Safari, use \"About Safari\". -->\n- Operating System: <!-- Ex: Windows/MacOSX/Linux along with version -->\n- Steps to reproduce this:\n<!-- Include a simple code snippet that demonstrates the problem, along with any console errors produced. If this isn't possible, then simply describe the issue as best you can! -->\n\n<!-- If you want to enhance an existing feature, please describe here, otherwise remove this section -->\n#### Feature enhancement details:\n\n\n<!-- If you want to request a new feature, please describe here, otherwise remove this section -->\n#### New feature details:\n\n",
          "filepath": "data/repos/processing/p5.js-0.10/ISSUE_TEMPLATE.md",
          "repo": "processing/p5.js",
          "version": "0.10",
          "chunk_index": 0
        }
      },
      {
        "id": "6df39816-2748-4eb8-b3b4-ecdcf46236ac",
        "score": 0.016129032258064516,
        "payload": {
          "text": "[![Build Status](https://travis-ci.org/processing/p5.js.svg?branch=master)](https://travis-ci.org/processing/p5.js) [![npm version](https://badge.fury.io/js/p5.svg)](https://www.npmjs.com/package/p5)\n\n# [p5.js](http://p5js.org)\n\nHello! p5.js is a JavaScript library that starts with the original goal of Processing, to make coding accessible for artists, designers, educators, and beginners, and reinterprets this for today's web.\n\nUsing the original metaphor of a software sketchbook, p5.js has a full set of drawing functionality. However, you're not limited to your drawing canvas, you can think of your whole browser page as your sketch! For this, p5.js has addon libraries that make it easy to interact with other HTML5 objects, including text, input, video, webcam, and sound.\n\np5.js is a new interpretation, not an emulation or port, and it is in active development. An official editing environment is coming soon, as well as many more features!\n\nIf you already know the basics of JavaScript or Processing, the [p5.js overview](https://github.com/processing/p5.js/wiki/p5.js-overview) wiki page is a good place to start.\n\nIf you have found a bug in the p5.js library, you can file it here under the [\u201cissues\u201d tab](https://github.com/processing/p5.js/issues). An indicative template for reporting an issue is provided to assist you (and us!) better.\n\n## p5.js library\n\nTo use the complete p5.js library, you can [download it here](http://p5js.org/download). If you are interested in the most recent, less stable version, or even simply in (**new!**) certain components of p5.js, you can clone this repository and run `grunt` from the command line to generate the library from source. See the [developer docs](https://github.com/processing/p5.js/blob/master/developer_docs/) for more information about our build process to generate the complete as well as selective library.\n\nYou can also start with the [codepen template](https://codepen.io/p5js/pen/wreBKy). You may need to update the version of the p5.js library that is linked into the html section.\n\nCommunity maintained typescript definitions are [here](https://github.com/p5-types/p5.ts).\n\n## Issues\n\nPlease post bugs in the correct repository:\n\n* p5.js general and p5.dom: [https://github.com/processing/p5.js/issues](https://github.com/processing/p5.js/issues)\n* p5.sound: [https://github.com/processing/p5.js-sound/issues](https://github.com/processing/p5.js-sound/issues)\n* p5.js website: [https://github.com/processing/p5.js-website/issues](https://github.com/processing/p5.js-website/issues)\n* p5.js web editor: [https://github.com/processing/p5.js-web-editor/issues](https://github.com/processing/p5.js-web-editor/issues)\n\n\n## Learning\n\nCheck out [p5js.org](http://p5js.org) for lots more! Here are some quick-links:\n\n* [Get Started](http://p5js.org/get-started): Create and run your first sketch!\n* [p5.js overview](https://github.com/processing/p5.js/wiki/p5.js-overview) \u2014 An overview of the main features and functionality of p5.js.\n* [Reference](http://p5js.org/reference): The functionality supported by p5.js.\n* [Learn](//p5js.org/learn): Tutorials and short, prototypical examples exploring the basics of p5.js.\n* [Forum](http://forum.processing.org/two/categories/p5-js): Ask and answers questions about how to make things with p5.js here.\n* [Libraries](http://p5js.org/libraries): Extend p5 functionality to interact with HTML, manipulate sound, and more!\n\n## Get Involved\n\np5.js is a collaborative project created by many individuals, and you are invited to help. All types of involvement are welcome. See the [community section](http://p5js.org/community) to get started!\n\nDevelopers, check out the [developer docs](https://github.com/processing/p5.js/blob/master/developer_docs/) for more in-depth details about contributing code, bug fixes, and documentation.\n\n## Contributors\n\nWe recognize all types of contributions. This project follows the [all-contributors](https://github.com/kentcdodds/all-contributors) specification. Instructions to add yourself or add contribution emojis to your name are [here](https://github.com/processing/p5.js/issues/2309).\n\n<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->\n<!-- prettier-ignore -->\n<table>\n  <tr>\n    <td align=\"center\"><a href=\"http://lauren-mccarthy.com\"><img src=\"https://avatars3.githubusercontent.com/u/191056?v=4\" width=\"100px;\" alt=\"Lauren McCarthy\"/><br /><sub><b>Lauren McCarthy</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://jasonsigal.cc\"><img src=\"https://avatars2.githubusercontent.com/u/504124?v=4\" width=\"100px;\" alt=\"Jason Sigal\"/><br /><sub><b>Jason Sigal</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://twitter.com/KarenPunkPunk\"><img src=\"https://avatars3.githubusercontent.com/u/1695075?v=4\" width=\"100px;\" alt=\"Karen\"/><br /><sub><b>Karen</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://www.evelyneastmond.com\"><img src=\"https://avatars1.githubusercontent.com/u/699840?v=4\" width=\"100px;\" alt=\"Evelyn Eastmond\"/><br /><sub><b>Evelyn Eastmond</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://www.shiffman.net\"><img src=\"https://avatars0.githubusercontent.com/u/191758?v=4\" width=\"100px;\" alt=\"Daniel Shiffman\"/><br /><sub><b>Daniel Shiffman</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://reas.com\"><img src=\"https://avatars2.githubusercontent.com/u/677774?v=4\" width=\"100px;\" alt=\"Casey Reas\"/><br /><sub><b>Casey Reas</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://fathom.info\"><img src=\"https://avatars1.githubusercontent.com/u/1623101?v=4\" width=\"100px;\" alt=\"Ben Fry\"/><br /><sub><b>Ben Fry</b></sub></a><br /></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://designerken.be/designing\"><img src=\"https://avatars3.githubusercontent.com/u/7543950?v=4\" width=\"100px;\" alt=\"Kenneth Lim\"/><br /><sub><b>Kenneth Lim</b></sub></a><br /><a href=\"https://github.com/processing/p5.js/issues?q=author%3Alimzykenneth\" title=\"Bug reports\">\ud83d\udc1b</a> <a href=\"https://github.com/processing/p5.js/commits?author=limzykenneth\" title=\"Code\">\ud83d\udcbb</a> <a href=\"https://github.com/processing/p5.js/commits?author=limzykenneth\" title=\"Documentation\">\ud83d\udcd6</a></td>\n    <td align=\"center\"><a href=\"http://www.katehollenbach.com\"><img src=\"https://avatars0.githubusercontent.com/u/78966?v=4\" width=\"100px;\" alt=\"kate hollenbach\"/><br /><sub><b>kate hollenbach</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/mlarghydracept\"><img src=\"https://avatars2.githubusercontent.com/u/10382506?v=4\" width=\"100px;\" alt=\"Stalgia Grigg\"/><br /><sub><b>Stalgia Grigg</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/machinic\"><img src=\"https://avatars3.githubusercontent.com/u/3985997?v=4\" width=\"100px;\" alt=\"Jerel Johnson\"/><br /><sub><b>Jerel Johnson</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://sakshamsaxena.in\"><img src=\"https://avatars2.githubusercontent.com/u/8774516?v=4\" width=\"100px;\" alt=\"Saksham Saxena\"/><br /><sub><b>Saksham Saxena</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://twitter.com/ed_saber\"><img src=\"https://avatars3.githubusercontent.com/u/11218401?v=4\" width=\"100px;\" alt=\"saber khan\"/><br /><sub><b>saber khan</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/dhowe\"><img src=\"https://avatars3.githubusercontent.com/u/737638?v=4\" width=\"100px;\" alt=\"Daniel Howe\"/><br /><sub><b>Daniel Howe</b></sub></a><br /></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"http://kevinsiwoff.com\"><img src=\"https://avatars1.githubusercontent.com/u/1585036?v=4\" width=\"100px;\" alt=\"Kevin Siwoff\"/><br /><sub><b>Kevin Siwoff</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://portfolio.toolness.org/\"><img src=\"https://avatars2.githubusercontent.com/u/124687?v=4\" width=\"100px;\" alt=\"Atul Varma\"/><br /><sub><b>Atul Varma</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://www.jessklein.is/\"><img src=\"https://avatars3.githubusercontent.com/u/535012?v=4\" width=\"100px;\" alt=\"Jess Klein\"/><br /><sub><b>Jess Klein</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://unoseistres.com\"><img src=\"https://avatars1.githubusercontent.com/u/7158943?v=4\" width=\"100px;\" alt=\"uno seis tres\"/><br /><sub><b>uno seis tres</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://www.susanev.com/\"><img src=\"https://avatars3.githubusercontent.com/u/5489125?v=4\" width=\"100px;\" alt=\"susan evans\"/><br /><sub><b>susan evans</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://sasj.tumblr.com\"><img src=\"https://avatars3.githubusercontent.com/u/2619912?v=4\" width=\"100px;\" alt=\"Saskia Freeke\"/><br /><sub><b>Saskia Freeke</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://www.phoenixperry.com\"><img src=\"https://avatars0.githubusercontent.com/u/783625?v=4\" width=\"100px;\" alt=\"Phoenix Perry\"/><br /><sub><b>Phoenix Perry</b></sub></a><br /></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://s01e01.xyz/jct\"><img src=\"https://avatars1.githubusercontent.com/u/2850174?v=4\" width=\"100px;\" alt=\"jesse cahn-thompson\"/><br /><sub><b>jesse cahn-thompson</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/lee2sman\"><img src=\"https://avatars1.githubusercontent.com/u/7377908?v=4\" width=\"100px;\" alt=\"Lee T\"/><br /><sub><b>Lee T</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://www.cargocollective.com/chellyjin\"><img src=\"https://avatars0.githubusercontent.com/u/26236471?v=4\" width=\"100px;\" alt=\"Chelly Jin\"/><br /><sub><b>Chelly Jin</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://L05.is\"><img src=\"https://avatars0.githubusercontent.com/u/3998826?v=4\" width=\"100px;\" alt=\"L05\"/><br /><sub><b>L05</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://www.diygirls.org\"><img src=\"https://avatars3.githubusercontent.com/u/1680038?v=4\" width=\"100px;\" alt=\"DIYgirls\"/><br /><sub><b>DIYgirls</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/lam802\"><img src=\"https://avatars3.githubusercontent.com/u/8697852?v=4\" width=\"100px;\" alt=\"lam802\"/><br /><sub><b>lam802</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://www.mayaman.cc\"><img src=\"https://avatars0.githubusercontent.com/u/8224678?v=4\" width=\"100px;\" alt=\"Maya Man\"/><br /><sub><b>Maya Man</b></sub></a><br /></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/tegacodes\"><img src=\"https://avatars0.githubusercontent.com/u/5488045?v=4\" width=\"100px;\" alt=\"Tega Brain\"/><br /><sub><b>Tega Brain</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/luisaph\"><img src=\"https://avatars3.githubusercontent.com/u/295879?v=4\" width=\"100px;\" alt=\"luisaph\"/><br /><sub><b>luisaph</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/almchung\"><img src=\"https://avatars2.githubusercontent.com/u/22488500?v=4\" width=\"100px;\" alt=\"AlM Chng\"/><br /><sub><b>AlM Chng</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://montoyamoraga.io\"><img src=\"https://avatars3.githubusercontent.com/u/3926350?v=4\" width=\"100px;\" alt=\"aar\u00f3n montoya-moraga\"/><br /><sub><b>aar\u00f3n montoya-moraga</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/catarak\"><img src=\"https://avatars1.githubusercontent.com/u/6063380?v=4\" width=\"100px;\" alt=\"Cassie Tarakajian\"/><br /><sub><b>Cassie Tarakajian</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://www.niklaspeters.com\"><img src=\"https://avatars0.githubusercontent.com/u/20650298?s=460&amp;v=4\" width=\"100px;\" alt=\"Niklas Peters\"/><br /><sub><b>Niklas Peters</b></sub></a><br /><a href=\"https://github.com/processing/p5.js/commits?author=nikfm\" title=\"Documentation\">\ud83d\udcd6</a> <a href=\"#tutorial-nikfm\" title=\"Tutorials\">\u2705</a></td>\n    <td align=\"center\"><a href=\"http://mathuramg.com\"><img src=\"https://avatars3.githubusercontent.com/u/5505598?v=4\" width=\"100px;\" alt=\"Mathura MG\"/><br /><sub><b>Mathura MG</b></sub></a><br /></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"http://1023.io\"><img src=\"https://avatars3.githubusercontent.com/u/8662372?v=4\" width=\"100px;\" alt=\"Yining Shi\"/><br /><sub><b>Yining Shi</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://kaganjd.github.io/portfolio/\"><img src=\"https://avatars0.githubusercontent.com/u/9204835?v=4\" width=\"100px;\" alt=\"Jen Kagan\"/><br /><sub><b>Jen Kagan</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://fromjia.com/\"><img src=\"https://avatars1.githubusercontent.com/u/6025418?v=4\" width=\"100px;\" alt=\"Jiashan Wu\"/><br /><sub><b>Jiashan Wu</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/futuremarc\"><img src=\"https://avatars3.githubusercontent.com/u/8646752?v=4\" width=\"100px;\" alt=\"Marc Abbey\"/><br /><sub><b>Marc Abbey</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://www.kadamwhite.com\"><img src=\"https://avatars1.githubusercontent.com/u/442115?v=4\" width=\"100px;\" alt=\"K.Adam White\"/><br /><sub><b>K.Adam White</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://www.joecridge.me/\"><img src=\"https://avatars2.githubusercontent.com/u/11491479?v=4\" width=\"100px;\" alt=\"Joe Cridge\"/><br /><sub><b>Joe Cridge</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://mikewesthad.com\"><img src=\"https://avatars1.githubusercontent.com/u/1131802?v=4\" width=\"100px;\" alt=\"Michael Hadley\"/><br /><sub><b>Michael Hadley</b></sub></a><br /></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"http://tiller.dog\"><img src=\"https://avatars1.githubusercontent.com/u/2047962?v=4\" width=\"100px;\" alt=\"Todd H. Page\"/><br /><sub><b>Todd H. Page</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://jaredsprague.com/\"><img src=\"https://avatars1.githubusercontent.com/u/3926730?v=4\" width=\"100px;\" alt=\"Jared Sprague\"/><br /><sub><b>Jared Sprague</b></sub></a><br /><a href=\"https://github.com/processing/p5.js/commits?author=Jared-Sprague\" title=\"Code\">\ud83d\udcbb</a> <a href=\"https://github.com/processing/p5.js/commits?author=Jared-Sprague\" title=\"Documentation\">\ud83d\udcd6</a> <a href=\"#example-Jared-Sprague\" title=\"Examples\">\ud83d\udca1</a> <a href=\"#financial-Jared-Sprague\" title=\"Financial\">\ud83d\udcb5</a> <a href=\"https://github.com/processing/p5.js/commits?author=Jared-Sprague\" title=\"Tests\">\u26a0\ufe0f</a> <a href=\"https://github.com/processing/p5.js/issues?q=author%3AJared-Sprague\" title=\"Bug reports\">\ud83d\udc1b</a></td>\n    <td align=\"center\"><a href=\"http://www.outofambit.com\"><img src=\"https://avatars3.githubusercontent.com/u/964912?v=4\" width=\"100px;\" alt=\"evelyn masso\"/><br /><sub><b>evelyn masso</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://bomoko.net\"><img src=\"https://avatars1.githubusercontent.com/u/297936?v=4\" width=\"100px;\" alt=\"Blaize Kaye\"/><br /><sub><b>Blaize Kaye</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/DarkPrince304\"><img src=\"https://avatars1.githubusercontent.com/u/9005407?v=4\" width=\"100px;\" alt=\"Sanchit Kapoor\"/><br /><sub><b>Sanchit Kapoor</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://meiamso.me\"><img src=\"https://avatars3.githubusercontent.com/u/1187491?v=4\" width=\"100px;\" alt=\"Oliver Wright\"/><br /><sub><b>Oliver Wright</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/mindofmatthew\"><img src=\"https://avatars1.githubusercontent.com/u/911429?v=4\" width=\"100px;\" alt=\"Matthew Kaney\"/><br /><sub><b>Matthew Kaney</b></sub></a><br /></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/Spongman\"><img src=\"https://avatars2.githubusercontent.com/u/1088194?v=4\" width=\"100px;\" alt=\"Spongman\"/><br /><sub><b>Spongman</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/CleezyITP\"><img src=\"https://avatars1.githubusercontent.com/u/5375410?v=4\" width=\"100px;\" alt=\"Claire K-V\"/><br /><sub><b>Claire K-V</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://lukedubois.com\"><img src=\"https://avatars0.githubusercontent.com/u/4147978?v=4\" width=\"100px;\" alt=\"R. Luke DuBois\"/><br /><sub><b>R. Luke DuBois</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/kevinbarabash\"><img src=\"https://avatars3.githubusercontent.com/u/1044413?v=4\" width=\"100px;\" alt=\"Kevin Barabash\"/><br /><sub><b>Kevin Barabash</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://andrescolubri.net/\"><img src=\"https://avatars2.githubusercontent.com/u/62246?v=4\" width=\"100px;\" alt=\"codeanticode\"/><br /><sub><b>codeanticode</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://www.bobholtwebdev.com/\"><img src=\"https://avatars2.githubusercontent.com/u/94167?v=4\" width=\"100px;\" alt=\"Bob Holt\"/><br /><sub><b>Bob Holt</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://sarahghp.com\"><img src=\"https://avatars1.githubusercontent.com/u/1477362?v=4\" width=\"100px;\" alt=\"Sarah Groff Hennigh-Palermo\"/><br /><sub><b>Sarah Groff Hennigh-Palermo</b></sub></a><br /></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"http://jordanshaw.com\"><img src=\"https://avatars1.githubusercontent.com/u/288140?v=4\" width=\"100px;\" alt=\"Jordan Shaw\"/><br /><sub><b>Jordan Shaw</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/brightredchilli\"><img src=\"https://avatars3.githubusercontent.com/u/751191?v=4\" width=\"100px;\" alt=\"brightredchilli\"/><br /><sub><b>brightredchilli</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://derekkinsman.com/\"><img src=\"https://avatars0.githubusercontent.com/u/611218?v=4\" width=\"100px;\" alt=\"Derek J. Kinsman\"/><br /><sub><b>Derek J. Kinsman</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/hkirat\"><img src=\"https://avatars2.githubusercontent.com/u/8079861?v=4\" width=\"100px;\" alt=\"harkirat singh\"/><br /><sub><b>harkirat singh</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/GoToLoop\"><img src=\"https://avatars2.githubusercontent.com/u/6551569?v=4\" width=\"100px;\" alt=\"GoToLoop\"/><br /><sub><b>GoToLoop</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://maxgoldste.in/\"><img src=\"https://avatars3.githubusercontent.com/u/1191970?v=4\" width=\"100px;\" alt=\"Max Goldstein\"/><br /><sub><b>Max Goldstein</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://xystudio.cc\"><img src=\"https://avatars2.githubusercontent.com/u/1507265?v=4\" width=\"100px;\" alt=\"XY Feng\"/><br /><sub><b>XY Feng</b></sub></a><br /></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/PaliwalSparsh\"><img src=\"https://avatars1.githubusercontent.com/u/6324861?v=4\" width=\"100px;\" alt=\"Sparsh Paliwal\"/><br /><sub><b>Sparsh Paliwal</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://austince.me\"><img src=\"https://avatars3.githubusercontent.com/u/4655775?v=4\" width=\"100px;\" alt=\"Austin Cawley-Edwards\"/><br /><sub><b>Austin Cawley-Edwards</b></sub></a><br /><a href=\"https://github.com/processing/p5.js/commits?author=austince\" title=\"Documentation\">\ud83d\udcd6</a> <a href=\"#example-austince\" title=\"Examples\">\ud83d\udca1</a></td>\n    <td align=\"center\"><a href=\"http://www.estebanalmiron.com\"><img src=\"https://avatars1.githubusercontent.com/u/1040718?v=4\" width=\"100px;\" alt=\"taseenb\"/><br /><sub><b>taseenb</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/tafsiri\"><img src=\"https://avatars1.githubusercontent.com/u/26408?v=4\" width=\"100px;\" alt=\"Yannick Assogba\"/><br /><sub><b>Yannick Assogba</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/johnpasquarello\"><img src=\"https://avatars3.githubusercontent.com/u/2349625?v=4\" width=\"100px;\" alt=\"John Pasquarello\"/><br /><sub><b>John Pasquarello</b></sub></a><br /><a href=\"https://github.com/processing/p5.js/commits?author=johnpasquarello\" title=\"Code\">\ud83d\udcbb</a></td>\n    <td align=\"center\"><a href=\"http://HappyCoding.io\"><img src=\"https://avatars1.githubusercontent.com/u/6930986?v=4\" width=\"100px;\" alt=\"Kevin Workman\"/><br /><sub><b>Kevin Workman</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/gauini\"><img src=\"https://avatars1.githubusercontent.com/u/4229215?v=4\" width=\"100px;\" alt=\"gauini\"/><br /><sub><b>gauini</b></sub></a><br /></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"http://sansumbrella.com/\"><img src=\"https://avatars0.githubusercontent.com/u/81553?v=4\" width=\"100px;\" alt=\"David Wicks\"/><br /><sub><b>David Wicks</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/guillemontecinos\"><img src=\"https://avatars1.githubusercontent.com/u/19594257?v=4\" width=\"100px;\" alt=\"Guillermo Montecinos\"/><br /><sub><b>Guillermo Montecinos</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://www.walking-productions.com/notslop/\"><img src=\"https://avatars0.githubusercontent.com/u/431774?v=4\" width=\"100px;\" alt=\"Shawn Van Every\"/><br /><sub><b>Shawn Van Every</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://www.wiredpieces.com\"><img src=\"https://avatars3.githubusercontent.com/u/579033?v=4\" width=\"100px;\" alt=\"Sinan Ascioglu\"/><br /><sub><b>Sinan Ascioglu</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://hamoid.com\"><img src=\"https://avatars0.githubusercontent.com/u/108264?v=4\" width=\"100px;\" alt=\"Abe Pazos\"/><br /><sub><b>Abe Pazos</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://charstiles.com/\"><img src=\"https://avatars1.githubusercontent.com/u/10173517?v=4\" width=\"100px;\" alt=\"Char\"/><br /><sub><b>Char</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://genekogan.com\"><img src=\"https://avatars3.githubusercontent.com/u/1335251?v=4\" width=\"100px;\" alt=\"Gene Kogan\"/><br /><sub><b>Gene Kogan</b></sub></a><br /></td>\n  </tr>\n  <tr>\n    <td align=\"center\"><a href=\"https://github.com/jay-manday\"><img src=\"https://avatars2.githubusercontent.com/u/13109165?v=4\" width=\"100px;\" alt=\"Jason Mandel\"/><br /><sub><b>Jason Mandel</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"https://github.com/russomf\"><img src=\"https://avatars1.githubusercontent.com/u/11917158?v=4\" width=\"100px;\" alt=\"Mark Russo\"/><br /><sub><b>Mark Russo</b></sub></a><br /></td>\n    <td align=\"center\"><a href=\"http://jedahan.com\"><img src=\"https://avatars1.githubusercontent.com/u/32407?v=4\" width=\"100px;\" alt=\"Jonathan Dahan\"/><br /><sub><b>Jonathan Dahan</b></sub></a><br /></td>",
          "filepath": "data/repos/processing/p5.js-0.10/README.md",
          "repo": "processing/p5.js",
          "version": "0.10",
          "chunk_index": 0
        }
      },
      {
        "id": "ba4bb448-15c8-499a-87d5-40e3c7fcb0ae",
        "score": 0.015873015873015872,
        "payload": {
          "text": "# p5.js 1.0 Roadmap [WIP]\n\nThis document is a list of possible features, improvements, and maintenance items for a future 1.0 version of p5.js. The first draft was created by the working group at UCLA Design Media Arts and is put out for your feedback. This is a working draft that may be updated and will be significantly revised at the p5.js Contributor\u2019s Conference, schedule for August 2019. Our goal is to release p5.js 1.0 by the end of 2019.\n\nWith the exception of ES6 migration, the tasks here are not ordered by priority. The [milestones](https://github.com/processing/p5.js/milestones) on github is where we prioritize tasks for releases and track progress.\n\n## ES6 migration\n* Phase 1: User facing\n  * p5js.org tutorials (issue per tutorial)\n  * p5js.org examples (issue per section)\n  * p5js.org reference examples (issue per section)\n* Phase 2: Developer facing\n  * Build processes\n  * Developer docs\n* Phase 3: Codebase\n  * TBD: This may be done by one dedicated person, we will not start on this until this is determined.\n* Later phase:\n  * Other materials -- To what extent do external materials (Getting Started with p5.js book, Coding Train) need to be updated to ensure a smooth rollout of educational resources?\n  * Contributed libraries\n\n## Maintenance\n* Audio updates for pending Chrome changes (user must interact first)\n  * Update reference documentation and examples, and examples page\n  * Update FES to warn about this?\n* More complete unit tests\n  * Clearer tutorial for doing this\n* Improve Friendly Error System documentation\n  * Add comments to https://github.com/processing/p5.js/blob/master/src/core/error_helpers.js to better document what\u2019s happening in this process.\n\n## Bug fixing\n* Mobile device support / upgrades\n* WebGL robustness\n  * Lighting\n    * lights() implementation\n    * Per pixel lighting by default\n    * Simplify shader pipeline?\n    * Update examples\n  * Simplify shape pipeline\n    * One rendering method for shapes, construct geom object from retain mode\n\n## New Features\n* Shapes\n  * createShape() public API for returning a p5.Geometry object?? What is the equivalent in 2D?\n  * Anything SVG for 2D?\n* GIF support with image()\n  * createImg is a good work around but students love gifs :)\n* i18n (localisation) for error messages + FES\n  * Develop infrastructure for localizing error and console messages within the codebase\n  * Translate various error messages\n* K-12 support as discussed [in thread](https://github.com/processing/p5.js/issues/2305)\n  * add circle() and square()\n  * Get makeyourownalgorithmicart/simple.js on libraries page\n* Implement Promises across the library\n  * Confirm/implement use of Promises across codebase\n  * Open use of Promises in API for loadX() functions (lower priority?)\n  \n## Contributor process and support\n* Open tickets for incompleteness in various areas:\n  * Testing\n  * Feature implementation\n  * Translation\n* Stricter use of [semantic versioning](https://semver.org/)\n* Clarify process for soliciting roadmap input for future versions.\n\n## Etc\n* For 1.0 release, drop a sweet new set of curated examples from artists and coders.\n",
          "filepath": "data/repos/processing/p5.js-0.10/developer_docs/roadmap.md",
          "repo": "processing/p5.js",
          "version": "0.10",
          "chunk_index": 0
        }
      },
      {
        "id": "bb9c86dc-85d7-42e3-915a-457b80bba75b",
        "score": 0.015625,
        "payload": {
          "text": " * </div>\n *\n * <div>\n * <code>\n * createCanvas(100, 100, WEBGL);\n * background(240, 240, 240);\n * fill(237, 34, 93);\n * noStroke();\n * beginShape();\n * vertex(0, 35);\n * vertex(35, 0);\n * vertex(0, -35);\n * vertex(-35, 0);\n * endShape();\n * </code>\n * </div>\n *\n * <div>\n * <code>\n * createCanvas(100, 100, WEBGL);\n * background(240, 240, 240);\n * fill(237, 34, 93);\n * noStroke();\n * beginShape();\n * vertex(-10, 10);\n * vertex(0, 35);\n * vertex(10, 10);\n * vertex(35, 0);\n * vertex(10, -8);\n * vertex(0, -35);\n * vertex(-10, -8);\n * vertex(-35, 0);\n * endShape();\n * </code>\n * </div>\n *\n * <div>\n * <code>\n * strokeWeight(3);\n * stroke(237, 34, 93);\n * beginShape(LINES);\n * vertex(10, 35);\n * vertex(90, 35);\n * vertex(10, 65);\n * vertex(90, 65);\n * vertex(35, 10);\n * vertex(35, 90);\n * vertex(65, 10);\n * vertex(65, 90);\n * endShape();\n * </code>\n * </div>\n *\n * <div>\n * <code>\n * // Click to change the number of sides.\n * // In WebGL mode, custom shapes will only\n * // display hollow fill sections when\n * // all calls to vertex() use the same z-value.\n *\n * let sides = 3;\n * let angle, px, py;\n *\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n *   setAttributes('antialias', true);\n *   fill(237, 34, 93);\n *   strokeWeight(3);\n * }\n *\n * function draw() {\n *   background(200);\n *   rotateX(frameCount * 0.01);\n *   rotateZ(frameCount * 0.01);\n *   ngon(sides, 0, 0, 80);\n * }\n *\n * function mouseClicked() {\n *   if (sides > 6) {\n *     sides = 3;\n *   } else {\n *     sides++;\n *   }\n * }\n *\n * function ngon(n, x, y, d) {\n *   beginShape();\n *   for (let i = 0; i < n + 1; i++) {\n *     angle = TWO_PI / n * i;\n *     px = x + sin(angle) * d / 2;\n *     py = y - cos(angle) * d / 2;\n *     vertex(px, py, 0);\n *   }\n *   for (let i = 0; i < n + 1; i++) {\n *     angle = TWO_PI / n * i;\n *     px = x + sin(angle) * d / 4;\n *     py = y - cos(angle) * d / 4;\n *     vertex(px, py, 0);\n *   }\n *   endShape();\n * }\n * </code>\n * </div>\n * @alt\n * 4 black points in a square shape in middle-right of canvas.\n * 4 points making a diamond shape.\n * 8 points making a star.\n * 8 points making 4 lines.\n * A rotating 3D shape with a hollow section in the middle.\n *\n */\n/**\n * @method vertex\n * @param  {Number} x\n * @param  {Number} y\n * @param  {Number} z   z-coordinate of the vertex\n * @param  {Number} [u] the vertex's texture u-coordinate\n * @param  {Number} [v] the vertex's texture v-coordinate\n * @chainable\n */\np5.prototype.vertex = function(x, y, moveTo, u, v) {\n  if (this._renderer.isP3D) {\n    this._renderer.vertex(...arguments);\n  } else {\n    const vert = [];\n    vert.isVert = true;\n    vert[0] = x;\n    vert[1] = y;\n    vert[2] = 0;\n    vert[3] = 0;\n    vert[4] = 0;\n    vert[5] = this._renderer._getFill();\n    vert[6] = this._renderer._getStroke();\n\n    if (moveTo) {\n      vert.moveTo = moveTo;\n    }\n    if (isContour) {\n      if (contourVertices.length === 0) {\n        vert.moveTo = true;\n      }\n      contourVertices.push(vert);\n    } else {\n      vertices.push(vert);\n    }\n  }\n  return this;\n};\n\nexport default p5;",
          "filepath": "data/repos/processing/p5.js-0.10/src/core/shape/vertex.js",
          "repo": "processing/p5.js",
          "version": "0.10",
          "chunk_index": 1
        }
      },
      {
        "id": "8c9cbf11-1a8f-4c24-bdb9-11ed5834de80",
        "score": 0.015384615384615385,
        "payload": {
          "text": "# p5.js WEBGL mode architecture\n\nThis document describes the structure of the p5.js WEBGL mode for p5.js contributors and maintainers\u2014and any other interested parties. If you're interested in using 3D graphics in your sketches, [view this tutorial](https://github.com/processing/p5.js/wiki/Getting-started-with-WebGL-in-p5) instead.\n\n## Overview of Structure and Objects\n\nThe core objects in the WEBGL architecture are the p5.Renderer.GL, p5.Shader, p5.Texture, and p5.Geometry.\nA single instance of p5.Renderer.GL manages its own p5.Shaders, p5.Textures, and p5.Geometry\u2014a goal for this is to allow offscreen rendering using WebGL, but that hasn\u2019t been tested yet.\nShaders and textures are associated with a specific GL context via the renderer.\n\n### p5.RendererGL\nThe p5.RendererGL object is the renderer for WEBGL / 3D Mode in p5.js.\nDerived from p5.Renderer, it provides additional functionality not available in 2D mode, such as: `box()`, `cone()`, use of shaders, accelerated texture rendering, and lighting.\n\n* Manages\u2014creates and caches\u2014shaders (p5.Shader objects) and textures (p5.Texture objects)\n* Prepares coordinates of shapes to be used as attribute arrays by shaders.\n* Selects the correct shader for use when stroke, fill, texture, and various lighting methods are called, then supplies the appropriate uniforms to those shaders.\n* Maintains data about lighting: a count of how many various types of lights are used and their parameters.\n* Caches geometry for 3D primitives (in retained mode), with the exception of shapes created with begin/endShape, which are dynamically generated and pushed to GL every time one is drawn (in immediate mode).\n\nThe renderer manages choosing an appropriate p5.Shader for the current drawing conditions.\n\n### p5.Shader\nThe p5.Shader class provides access to the uniforms and attributes of a GL program. \n\n* Compiles and links the vertex and fragment shader components\n* Provides an API for accessing and setting shader attributes and uniforms\n* Binds textures the shader needs before a shape is rendered\n* Provides the bindShader() method for use in the render before a shape is drawn, then unbindShader() after the shape is drawn.\n\nThere are four default shaders, as documented in the Shader section.\n\n### p5.Texture\nThe p5.Texture object manages GL state for a texture based on a `p5.Image`, `p5.MediaElement`, `p5.Element`, or `ImageData`.\n\n* Internally handles processing image data based on type, so that the p5.Renderer implementation doesn\u2019t have to make special exceptions in its own methods when handling textures\n* Updates conditionally every frame by making a best guess at whether or not image data has changed. Tries not to upload the texture if no change has been made, to help performance.\n\n### p5.Geometry\nShapes rendered in retain mode are stored as p5.Geometry objects in a cache in the p5.Renderer object. \nThe renderer maps strings to p5.Geometry objects based on the shape drawn and its parameters (for example, geometry for a box created with `box(70, 80, 90, 10, 20)` is mapped from `'box|70|80|90|10|20\u2019`). Calls to functions that have retained geometry create a p5.Geometry object on the first pass and store it in a geometry hash using the aforementioned string ID. Later calls look for that ID in the hash, and if it is found use that to reference the existing object rather than creating a new one.\n\n* Stores vertices, normals, faces, line vertices, line normals, and texture coordinates for the geometry primitives\n* Provides methods for computing the faces, normals, line vertices, and line normals for a set of vertices\n\n## Immediate Mode\nAll attributes for drawing with Immediate Mode are stored in an object in the renderer, used to draw to the GL drawing context, and then discarded.\n\n## Geometry: Retain and Immediate Mode\nRetained geometry is used for 3D primitives, while immediate mode is used for shapes created with begin/endShape.\n\n|Functions with retained geometry| Functions with immediate mode geometry |\n|--------------------------------|----------------------------------------|\n|plane()                         | bezier()                               |\n|box()                           | curve()                                |\n|sphere()                        | line()                                 |\n|cylinder()                      | beginShape()                           |\n|cone()                          | vertex()                               |\n|ellipsoid()                     | endShape()                             |\n|torus()                         | point()                                |\n|triangle()                      | curveVertex()                          |\n|arc()                           | bezierVertex()                         |\n|point()                         | quadraticVertex()                      |\n|ellipse()                       |\n|rect()                          |\n|quad()                          |\n|text()                          |\n\n\n\n\n\n\n## Texture Management\nA p5.Renderer.GL instances manages an array of p5.Textures objects on an as-needed basis.\nTextures are created for images and videos used with the `texture()` method or as uniforms provided to custom shaders.\n\nWhen the renderer needs a texture, it first checks if one has already been created for a given image/video, then provides that to a shader for rendering. A new texture is only created if an existing one cannot be found for the image/video.\n\n## Shaders\n\n### Types of Shaders\n\n#### Color Shader\nProvides flat shading of objects, based on the current fill color.\n\n#### Light Shader (for lighting AND textures)\nAccounts for:\n* Lighting parameters set by `ambientLight()`, `directionalLight()`, `pointLight()`, `spotLight()` and `specularColor()`\n* Material parameters set by `ambientMaterial()`, `emissiveMaterial()` and `specularMaterial()`\n* Texture parameters, set by `texture()`\n\n#### Normal Shader\nThe normal shader is set when `normalMaterial()` is in use. It uses the surface\u2019s normal vector to determine a fragment color.\n\n### Shader Parameters\n\n#### Standard Model View & Camera Uniforms\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|---------------------------------|-----------|---------------|------------|-------------|------------|\n|`uniform mat4 uModelViewMatrix;` |x          |x              |x           |x            |x           |\n|`uniform mat4 uProjectionMatrix;`|x          |x              |x           |x            |x           |\n|`uniform vec4 uViewPort;`        |x          |               |            |             |            |\n|`uniform vec4 uPerspective;`     |x          |               |            |             |            |\n\n\n#### Geometry Attributes and Uniforms\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|---------------------------------|-----------|---------------|------------|-------------|------------|\n|`attribute vec3 aPosition;`      |x          |x              |x           |x            |x           |\n|`attribute vec3 aNormal;`        |           |x              |            |x            |            | \n|`attribute vec2 aTexCoord;`      |           |x              |            |x            |            |\n|`uniform mat3 uNormalMatrix;`    |           |x              |            |x            |            |\n|`attribute vec4 aDirection;`     |x          |               |            |             |            |\n|`uniform float uStrokeWeight;`   |x          |               |            |             |            |\n\n#### Material Colors\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|---------------------------------|-----------|---------------|------------|-------------|------------|\n|`uniform vec4 uMaterialColor;`   |x          |x              |            |             |x           |\n|`attribute vec4 aVertexColor;`   |           |               |x           |             |            |\n\n#### Light Parameters\n\n|Parameter                                      |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|-----------------------------------------------|-----------|---------------|------------|-------------|------------|\n|`uniform int uAmbientLightCount;`              |           |x              |            |             |            |\n|`uniform int uDirectionalLightCount;`          |           |x              |            |             |            |\n|`uniform int uPointLightCount;`                |           |x              |            |             |            |\n|`uniform int uSpotLightCount;`                 |           |x              |            |             |            |\n|`uniform vec3 uAmbientColor[8];`               |           |x              |            |             |            |\n|`uniform vec3 uLightingDirection[8];`          |           |x              |            |             |            |\n|`uniform vec3 uDirectionalDiffuseColors[8];`   |           |x              |            |             |            |\n|`uniform vec3 uDirectionalSpecularColors[8];`  |           |x              |            |             |            |\n|`uniform vec3 uPointLightLocation[8];`         |           |x              |            |             |            |\n|`uniform vec3 uPointLightDiffuseColors[8];`    |           |x              |            |             |            |\n|`uniform vec3 uPointLightSpecularColors[8];`   |           |x              |            |             |            |\n|`uniform float uSpotLightAngle[8];`            |           |x              |            |             |            |\n|`uniform float uSpotLightConc[8];`             |           |x              |            |             |            |\n|`uniform vec3 uSpotLightDiffuseColors[8];`     |           |x              |            |             |            |\n|`uniform vec3 uSpotLightSpecularColors[8];`    |           |x              |            |             |            |\n|`uniform vec3 uSpotLightLocation[8];`          |           |x              |            |             |            |\n|`uniform vec3 uSpotLightDirection[8];`         |           |x              |            |             |            |\n|`uniform bool uSpecular;`                      |           |x              |            |             |            |\n|`uniform bool uEmissive;`                      |           |x              |            |             |            |\n|`uniform int  uShininess;`                     |           |x              |            |             |            |\n|`uniform bool uUseLighting;`                   |           |x              |            |             |            |\n|`uniform float uConstantAttenuation;`          |           |x              |            |             |            |\n|`uniform float uLinearAttenuation;`            |           |x              |            |             |            |\n|`uniform float uQuadraticAttenuation;`         |           |x              |            |             |            |\n\n#### Texture Parameters\n\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\n|`uniform sampler2D uSampler;`         |           |x              |            |             |            |\n|`uniform bool isTexture;`             |           |x              |            |             |            |\n\n#### General Parameters\n\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\n|`uniform float uResolution;`          |           |               |x           |             |            |\n|`uniform float uPointSize;`           |           |               |x           |             |x           |\n\n#### Varying Parameters\n\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\n|`varying vec3 vVertexNormal;`         |           |x              |            |             |            |\n|`varying vec2 vVertTexCoord;`         |           |x              |            |             |            |\n|`varying vec3 vLightWeighting;`       |           |x              |            |             |            |\n|`varying highp vec2 vVertTexCoord;`   |           |               |            |x            |            |\n|`varying vec4 vColor;`                |           |               |x           |             |            |\n|`varying float vStrokeWeight`         |           |               |            |             |x           |\n\n## Next Steps\n\nComing soon!\n",
          "filepath": "data/repos/processing/p5.js-0.10/developer_docs/webgl_mode_architecture.md",
          "repo": "processing/p5.js",
          "version": "0.10",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "processing__p5.js-3709",
    "model_patch": "diff --git a/sketch.js b/sketch.js\nindex 1c3023f..b5f3c2a 100644\n--- a/sketch.js\n+++ b/sketch.js\n@@ -1,6 +1,7 @@\n var img;\n var sz = 100;\n \n+let tintShader;\n function preload() {\n   img = loadImage('assets/UV_Grid_Sm.jpg');\n }\n@@ -8,6 +9,13 @@ function preload() {\n   createCanvas(windowWidth, windowHeight, WEBGL);\n   textureMode(NORMAL);\n \n+  // Load the shader\n+  tintShader = createShader(vertShader, fragShader);\n+}\n+\n+function applyTint(r, g, b, a) {\n+  shader(tintShader);\n+  tintShader.setUniform('tintColor', [r / 255, g / 255, b / 255, a / 255]);\n }\n \n function draw() {\n@@ -15,6 +23,7 @@ function draw() {\n \n   // 2 args\n   fill(255, 0, 0);\n+  applyTint(255, 0, 0, 122);\n   push();\n   translate(-3 / 8 * width, 0);\n   beginShape(TRIANGLES);\n@@ -63,3 +72,22 @@ function draw() {\n   vertex(-sz, -sz, 0, 0, 0);\n   endShape();\n   pop();\n+}\n+\n+const vertShader = `\n+  attribute vec3 aPosition;\n+  attribute vec2 aTexCoord;\n+  varying vec2 vTexCoord;\n+  void main() {\n+    vTexCoord = aTexCoord;\n+    gl_Position = projectionMatrix * modelViewMatrix * vec4(aPosition, 1.0);\n+  }\n+`;\n+\n+const fragShader = `\n+  precision mediump float;\n+  varying vec2 vTexCoord;\n+  uniform sampler2D texture;\n+  uniform vec4 tintColor;\n+  void main() {\n+    gl_FragColor = texture2D(texture, vTexCoord) * tintColor;\n+  }\n `;",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 126.87,
      "issue_embedding_time_ms": 126.87,
      "retrieval_time_ms_splade": 39.73,
      "retrieval_time_ms": 39.73,
      "total_retrieval_time_ms": 166.6,
      "generation_time_ms": 5068.1,
      "total_io_time_ms": 5234.7,
      "input_total_token_limit": null,
      "issue_text_tokens": 336,
      "vlm_tokens": 0,
      "retrieved_tokens": 1701,
      "prompt_template_tokens": 506,
      "total_input_prompt_tokens": 2543,
      "output_generated_tokens": 464,
      "total_io_tokens": 3007,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nTint() is not supported in WebGL\\n#### Nature of issue?\\r\\n\\r\\n- [ ] Found a bug\\r\\n- [ ] Existing feature enhancement\\r\\n- [x] New feature request\\r\\n\\r\\n#### Most appropriate sub-area of p5.js?\\r\\n\\r\\n- [ ] Color\\r\\n- [ ] Core\\r\\n- [ ] Data\\r\\n- [ ] Events\\r\\n- [ ] Image\\r\\n- [ ] IO\\r\\n- [ ] Math\\r\\n- [ ] Typography\\r\\n- [ ] Utilities\\r\\n- [x] WebGL\\r\\n- [ ] Other (specify if possible)\\r\\n\\r\\n#### Which platform were you using when you encountered this?\\r\\n\\r\\n- [x] Mobile/Tablet (touch devices)\\r\\n- [x] Desktop/Laptop\\r\\n- [x] Others (specify if possible)\\r\\n\\r\\n#### New feature details:\\r\\nTint() is supported in processing with OPENGL render, could p5js also support it in WEBGL?\\r\\n- p5.js version: p5.js v0.5.16 \\r\\n- Example Code:\\r\\n```\\r\\nvar img;\\r\\nfunction preload() {\\r\\n    img = loadImage(\\\"https://processing.org/img/processing-web.png\\\");\\r\\n}\\r\\n\\r\\nfunction setup() {\\r\\n    createCanvas(700,700, WEBGL);\\r\\n}\\r\\n\\r\\nfunction draw() {\\r\\n    background(200);\\r\\n    beginShape();\\r\\n    tint(255,0,0,122);\\r\\n    texture(img);\\r\\n    vertex(0, 0, 0,0,0);\\r\\n    vertex(0, 250, 0,1);\\r\\n    vertex(250, 250, 0,1,1);\\r\\n    vertex(250, 0, 0,1,0);\\r\\n    endShape(CLOSE);\\r\\n}\\r\\n```\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of ISSUE_TEMPLATE.md]\\n<!--\\nHi there! \\n\\nPLEASE NOTE: The github issues are for bugs and feature requests for the p5.js library itself. If you have a general question or bug programming with p5.js please post it in the p5.js forum: https://discourse.processing.org\\n\\nTo check any option, replace the \\\"[ ]\\\" with a \\\"[x]\\\". Be sure to check out how it looks in the Preview tab! Feel free to remove any portion of the template that is not relevant for your issue.\\n-->\\n\\n#### Nature of issue?\\n\\n- [ ] Found a bug\\n- [ ] Existing feature enhancement\\n- [ ] New feature request\\n\\n#### Most appropriate sub-area of p5.js?\\n\\n- [ ] Color\\n- [ ] Core/Environment/Rendering\\n- [ ] Data\\n- [ ] Events\\n- [ ] Image\\n- [ ] IO\\n- [ ] Math\\n- [ ] Typography\\n- [ ] Utilities\\n- [ ] WebGL\\n- [ ] Other (specify if possible)\\n\\n#### Which platform were you using when you encountered this?\\n\\n- [ ] Mobile/Tablet (touch devices)\\n- [ ] Desktop/Laptop\\n- [ ] Others (specify if possible)\\n\\n#### Details about the bug: \\n\\n- p5.js version: <!-- You can first this in the first line of the p5.js file -->\\n- Web browser and version: <!-- In the address bar, on Chrome enter \\\"chrome://version\\\", on Firefox enter \\\"about:support\\\". On Safari, use \\\"About Safari\\\". -->\\n- Operating System: <!-- Ex: Windows/MacOSX/Linux along with version -->\\n- Steps to reproduce this:\\n<!-- Include a simple code snippet that demonstrates the problem, along with any console errors produced. If this isn't possible, then simply describe the issue as best you can! -->\\n\\n<!-- If you want to enhance an existing feature, please describe here, otherwise remove this section -->\\n#### Feature enhancement details:\\n\\n\\n<!-- If you want to request a new feature, please describe here, otherwise remove this section -->\\n#### New feature details:\\n\\n\\n[end of ISSUE_TEMPLATE.md]\\n[start of sketch.js]\\n/**\\n * webgl texture mode example\\n */\\nvar img;\\n\\nfunction preload() {\\n  img = loadImage('assets/UV_Grid_Sm.jpg');\\n}\\n\\nfunction setup() {\\n  createCanvas(windowWidth, windowHeight, WEBGL);\\n}\\n\\nfunction draw() {\\n  background(220);\\n  noStroke();\\n\\n  texture(img);\\n\\n  push();\\n  translate(-200, 0, 0);\\n  textureMode(NORMAL);\\n  beginShape();\\n  vertex(-100, -100, 0, 0);\\n  vertex(100, -100, 1, 0);\\n  vertex(100, 100, 1, 1);\\n  vertex(-100, 100, 0, 1);\\n  endShape();\\n  pop();\\n\\n  push();\\n  translate(200, 0, 0);\\n  textureMode(IMAGE);\\n  beginShape();\\n  vertex(-100, -100, 0, 0);\\n  vertex(100, -100, img.width, 0);\\n  vertex(100, 100, img.width, img.height);\\n  vertex(-100, 100, 0, img.height);\\n  endShape();\\n  pop();\\n}\\n\\n[end of sketch.js]\\n[start of sketch.js]\\nvar img;\\nvar sz = 100;\\n\\nfunction preload() {\\n  img = loadImage('assets/UV_Grid_Sm.jpg');\\n}\\n\\nfunction setup() {\\n  createCanvas(windowWidth, windowHeight, WEBGL);\\n  sz = 0.25 * min(width, height);\\n  textureMode(NORMAL);\\n}\\n\\nfunction draw() {\\n  background(255);\\n\\n  randomSeed(1);\\n\\n  texture(img);\\n  rotateZ(random(0, 2 * PI) + frameCount * 0.01);\\n  beginShape(TRIANGLES);\\n  vertex(-sz, -sz, 0, 0, 0);\\n  vertex(sz, -sz, 0, 1, 0);\\n  vertex(sz, sz, 0, 1, 1);\\n  vertex(sz, sz, 0, 1, 1);\\n  vertex(-sz, sz, 0, 0, 1);\\n  vertex(-sz, -sz, 0, 0, 0);\\n  endShape();\\n}\\n\\n[end of sketch.js]\\n[start of sketch.js]\\nvar img;\\nvar sz = 100;\\n\\nfunction preload() {\\n  img = loadImage('assets/UV_Grid_Sm.jpg');\\n}\\n\\nfunction setup() {\\n  createCanvas(windowWidth, windowHeight, WEBGL);\\n  textureMode(NORMAL);\\n}\\n\\nfunction draw() {\\n  background(255);\\n  randomSeed(1);\\n\\n  for (var i = 0; i < 200; i++) {\\n    push();\\n\\n    translate(\\n      random(-width / 2 + sz, width / 2 - sz),\\n      random(-height / 2 + sz, height / 2 - sz)\\n    );\\n    rotateZ(random(0, 2 * PI) + frameCount * 0.1);\\n\\n    if (i % 2 === 0) {\\n      texture(img);\\n    } else {\\n      fill(random(128, 255), 0, random(128, 255));\\n    }\\n\\n    beginShape(TRIANGLES);\\n    vertex(-sz, -sz, 0, 0, 0);\\n    vertex(sz, -sz, 0, 1, 0);\\n    vertex(sz, sz, 0, 1, 1);\\n    vertex(sz, sz, 0, 1, 1);\\n    vertex(-sz, sz, 0, 0, 1);\\n    vertex(-sz, -sz, 0, 0, 0);\\n    endShape();\\n    pop();\\n  }\\n}\\n\\n/* http://localhost:8000/test/manual-test-examples/webgl/immediateMode/texture/ */\\n\\n[end of sketch.js]\\n[start of sketch.js]\\nvar img;\\nvar sz = 100;\\n\\nfunction preload() {\\n  img = loadImage('assets/UV_Grid_Sm.jpg');\\n}\\n\\nfunction setup() {\\n  createCanvas(windowWidth, windowHeight, WEBGL);\\n  textureMode(NORMAL);\\n}\\n\\nfunction draw() {\\n  background(255);\\n\\n  // 2 args\\n  fill(255, 0, 0);\\n  push();\\n  translate(-3 / 8 * width, 0);\\n  beginShape(TRIANGLES);\\n  vertex(-sz, -sz);\\n  vertex(sz, -sz);\\n  vertex(sz, sz);\\n  vertex(sz, sz);\\n  vertex(-sz, sz);\\n  vertex(-sz, -sz);\\n  endShape();\\n  pop();\\n\\n  // 3 args\\n  fill(0, 0, 255);\\n  push();\\n  translate(-1 / 8 * width, 0);\\n  beginShape(TRIANGLES);\\n  vertex(-sz, -sz, 0);\\n  vertex(sz, -sz, 0);\\n  vertex(sz, sz, 0);\\n  vertex(sz, sz, 0);\\n  vertex(-sz, sz, 0);\\n  vertex(-sz, -sz, 0);\\n  endShape();\\n  pop();\\n\\n  // 4 args\\n  texture(img);\\n  push();\\n  translate(1 / 8 * width, 0);\\n  beginShape(TRIANGLES);\\n  vertex(-sz, -sz, 0, 0);\\n  vertex(sz, -sz, 1, 0);\\n  vertex(sz, sz, 1, 1);\\n  vertex(sz, sz, 1, 1);\\n  vertex(-sz, sz, 0, 1);\\n  vertex(-sz, -sz, 0, 0);\\n  endShape();\\n  pop();\\n\\n  // 5 args\\n  texture(img);\\n  push();\\n  translate(3 / 8 * width, 0);\\n  beginShape(TRIANGLES);\\n  vertex(-sz, -sz, 0, 0, 0);\\n  vertex(sz, -sz, 0, 1, 0);\\n  vertex(sz, sz, 0, 1, 1);\\n  vertex(sz, sz, 0, 1, 1);\\n  vertex(-sz, sz, 0, 0, 1);\\n  vertex(-sz, -sz, 0, 0, 0);\\n  endShape();\\n  pop();\\n}\\n\\n[end of sketch.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "ISSUE_TEMPLATE.md",
        "sketch.js",
        "sketch.js",
        "sketch.js",
        "sketch.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "bb84ccd0-def1-468f-b5cd-a4b2bbdfe0c1",
        "score": 0.01639344262295082,
        "payload": {
          "text": "<!--\nHi there! \n\nPLEASE NOTE: The github issues are for bugs and feature requests for the p5.js library itself. If you have a general question or bug programming with p5.js please post it in the p5.js forum: https://discourse.processing.org\n\nTo check any option, replace the \"[ ]\" with a \"[x]\". Be sure to check out how it looks in the Preview tab! Feel free to remove any portion of the template that is not relevant for your issue.\n-->\n\n#### Nature of issue?\n\n- [ ] Found a bug\n- [ ] Existing feature enhancement\n- [ ] New feature request\n\n#### Most appropriate sub-area of p5.js?\n\n- [ ] Color\n- [ ] Core/Environment/Rendering\n- [ ] Data\n- [ ] Events\n- [ ] Image\n- [ ] IO\n- [ ] Math\n- [ ] Typography\n- [ ] Utilities\n- [ ] WebGL\n- [ ] Other (specify if possible)\n\n#### Which platform were you using when you encountered this?\n\n- [ ] Mobile/Tablet (touch devices)\n- [ ] Desktop/Laptop\n- [ ] Others (specify if possible)\n\n#### Details about the bug: \n\n- p5.js version: <!-- You can first this in the first line of the p5.js file -->\n- Web browser and version: <!-- In the address bar, on Chrome enter \"chrome://version\", on Firefox enter \"about:support\". On Safari, use \"About Safari\". -->\n- Operating System: <!-- Ex: Windows/MacOSX/Linux along with version -->\n- Steps to reproduce this:\n<!-- Include a simple code snippet that demonstrates the problem, along with any console errors produced. If this isn't possible, then simply describe the issue as best you can! -->\n\n<!-- If you want to enhance an existing feature, please describe here, otherwise remove this section -->\n#### Feature enhancement details:\n\n\n<!-- If you want to request a new feature, please describe here, otherwise remove this section -->\n#### New feature details:\n\n",
          "filepath": "data/repos/processing/p5.js-0.8/ISSUE_TEMPLATE.md",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      },
      {
        "id": "3f4db854-0576-444c-958b-acb59e315d36",
        "score": 0.016129032258064516,
        "payload": {
          "text": "/**\n * webgl texture mode example\n */\nvar img;\n\nfunction preload() {\n  img = loadImage('assets/UV_Grid_Sm.jpg');\n}\n\nfunction setup() {\n  createCanvas(windowWidth, windowHeight, WEBGL);\n}\n\nfunction draw() {\n  background(220);\n  noStroke();\n\n  texture(img);\n\n  push();\n  translate(-200, 0, 0);\n  textureMode(NORMAL);\n  beginShape();\n  vertex(-100, -100, 0, 0);\n  vertex(100, -100, 1, 0);\n  vertex(100, 100, 1, 1);\n  vertex(-100, 100, 0, 1);\n  endShape();\n  pop();\n\n  push();\n  translate(200, 0, 0);\n  textureMode(IMAGE);\n  beginShape();\n  vertex(-100, -100, 0, 0);\n  vertex(100, -100, img.width, 0);\n  vertex(100, 100, img.width, img.height);\n  vertex(-100, 100, 0, img.height);\n  endShape();\n  pop();\n}\n",
          "filepath": "data/repos/processing/p5.js-0.8/test/manual-test-examples/webgl/material/textureMode/sketch.js",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      },
      {
        "id": "967a09ea-a326-422a-b09a-4fbd18b3319d",
        "score": 0.015873015873015872,
        "payload": {
          "text": "var img;\nvar sz = 100;\n\nfunction preload() {\n  img = loadImage('assets/UV_Grid_Sm.jpg');\n}\n\nfunction setup() {\n  createCanvas(windowWidth, windowHeight, WEBGL);\n  sz = 0.25 * min(width, height);\n  textureMode(NORMAL);\n}\n\nfunction draw() {\n  background(255);\n\n  randomSeed(1);\n\n  texture(img);\n  rotateZ(random(0, 2 * PI) + frameCount * 0.01);\n  beginShape(TRIANGLES);\n  vertex(-sz, -sz, 0, 0, 0);\n  vertex(sz, -sz, 0, 1, 0);\n  vertex(sz, sz, 0, 1, 1);\n  vertex(sz, sz, 0, 1, 1);\n  vertex(-sz, sz, 0, 0, 1);\n  vertex(-sz, -sz, 0, 0, 0);\n  endShape();\n}\n",
          "filepath": "data/repos/processing/p5.js-0.8/test/manual-test-examples/webgl/immediateMode/texture/sketch.js",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      },
      {
        "id": "f0300e27-5e0c-4ed0-810c-e9b2a333fb24",
        "score": 0.015625,
        "payload": {
          "text": "var img;\nvar sz = 100;\n\nfunction preload() {\n  img = loadImage('assets/UV_Grid_Sm.jpg');\n}\n\nfunction setup() {\n  createCanvas(windowWidth, windowHeight, WEBGL);\n  textureMode(NORMAL);\n}\n\nfunction draw() {\n  background(255);\n  randomSeed(1);\n\n  for (var i = 0; i < 200; i++) {\n    push();\n\n    translate(\n      random(-width / 2 + sz, width / 2 - sz),\n      random(-height / 2 + sz, height / 2 - sz)\n    );\n    rotateZ(random(0, 2 * PI) + frameCount * 0.1);\n\n    if (i % 2 === 0) {\n      texture(img);\n    } else {\n      fill(random(128, 255), 0, random(128, 255));\n    }\n\n    beginShape(TRIANGLES);\n    vertex(-sz, -sz, 0, 0, 0);\n    vertex(sz, -sz, 0, 1, 0);\n    vertex(sz, sz, 0, 1, 1);\n    vertex(sz, sz, 0, 1, 1);\n    vertex(-sz, sz, 0, 0, 1);\n    vertex(-sz, -sz, 0, 0, 0);\n    endShape();\n    pop();\n  }\n}\n\n/* http://localhost:8000/test/manual-test-examples/webgl/immediateMode/texture/ */\n",
          "filepath": "data/repos/processing/p5.js-0.8/test/manual-test-examples/webgl/immediateMode/mixTextureAndFill/sketch.js",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      },
      {
        "id": "674e0eff-48fa-470a-9935-d688f20e5105",
        "score": 0.015384615384615385,
        "payload": {
          "text": "var img;\nvar sz = 100;\n\nfunction preload() {\n  img = loadImage('assets/UV_Grid_Sm.jpg');\n}\n\nfunction setup() {\n  createCanvas(windowWidth, windowHeight, WEBGL);\n  textureMode(NORMAL);\n}\n\nfunction draw() {\n  background(255);\n\n  // 2 args\n  fill(255, 0, 0);\n  push();\n  translate(-3 / 8 * width, 0);\n  beginShape(TRIANGLES);\n  vertex(-sz, -sz);\n  vertex(sz, -sz);\n  vertex(sz, sz);\n  vertex(sz, sz);\n  vertex(-sz, sz);\n  vertex(-sz, -sz);\n  endShape();\n  pop();\n\n  // 3 args\n  fill(0, 0, 255);\n  push();\n  translate(-1 / 8 * width, 0);\n  beginShape(TRIANGLES);\n  vertex(-sz, -sz, 0);\n  vertex(sz, -sz, 0);\n  vertex(sz, sz, 0);\n  vertex(sz, sz, 0);\n  vertex(-sz, sz, 0);\n  vertex(-sz, -sz, 0);\n  endShape();\n  pop();\n\n  // 4 args\n  texture(img);\n  push();\n  translate(1 / 8 * width, 0);\n  beginShape(TRIANGLES);\n  vertex(-sz, -sz, 0, 0);\n  vertex(sz, -sz, 1, 0);\n  vertex(sz, sz, 1, 1);\n  vertex(sz, sz, 1, 1);\n  vertex(-sz, sz, 0, 1);\n  vertex(-sz, -sz, 0, 0);\n  endShape();\n  pop();\n\n  // 5 args\n  texture(img);\n  push();\n  translate(3 / 8 * width, 0);\n  beginShape(TRIANGLES);\n  vertex(-sz, -sz, 0, 0, 0);\n  vertex(sz, -sz, 0, 1, 0);\n  vertex(sz, sz, 0, 1, 1);\n  vertex(sz, sz, 0, 1, 1);\n  vertex(-sz, sz, 0, 0, 1);\n  vertex(-sz, -sz, 0, 0, 0);\n  endShape();\n  pop();\n}\n",
          "filepath": "data/repos/processing/p5.js-0.8/test/manual-test-examples/webgl/immediateMode/vertexArgs/sketch.js",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "processing__p5.js-3769",
    "model_patch": "diff --git a/src/webgl/p5.RendererGL.Retained.js b/src/webgl/p5.RendererGL.Retained.js\n--- a/src/webgl/p5.RendererGL.Retained.js\n+++ b/src/webgl/p5.RendererGL.Retained.js\n@@ -171,7 +171,14 @@\n \n   // Create buffers for the geometry\n   p5.RendererGL.prototype.createBuffers = function (id, geometry) {\n-    var shader = this._getRetainedFillShader();\n+    // Instead of using the current shader, we should ensure that all possible\n+    // attributes are considered when creating buffers. This avoids missing\n+    // buffers when switching shaders later.\n+    var shader = this._getDefaultShader();\n+\n+    // Ensure that all attributes are enabled for buffer creation\n+    this._enableAttributes(shader);\n+\n     geometry.buffers = {};\n     geometry.buffers.vertex = this._createBuffer(geometry.vertices, 3);\n     if (geometry.normals && shader.hasAttribute('aNormal')) {\n@@ -179,6 +186,7 @@\n     }\n     if (geometry.uvs && shader.hasAttribute('aTexCoord')) {\n       geometry.buffers.uv = this._createBuffer(geometry.uvs, 2);\n+    }\n     if (geometry.lineVertices && shader.hasAttribute('aVertexColor')) {\n       geometry.buffers.lineVertex = this._createBuffer(geometry.lineVertices, 3);\n     }\n@@ -188,6 +196,10 @@\n     }\n   };\n \n+  // Helper function to enable all attributes for a given shader\n+  p5.RendererGL.prototype._enableAttributes = function (shader) {\n+    shader.attributes.forEach(attr => this.enableVertexAttribArray(attr));\n+  };\n \n   // Draw the geometry using the retained buffers\n   p5.RendererGL.prototype.drawBuffers = function (id, geometry) {",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 182.81,
      "issue_embedding_time_ms": 182.81,
      "retrieval_time_ms_splade": 42.91,
      "retrieval_time_ms": 42.91,
      "total_retrieval_time_ms": 225.73,
      "generation_time_ms": 5026.97,
      "total_io_time_ms": 5252.7,
      "input_total_token_limit": null,
      "issue_text_tokens": 556,
      "vlm_tokens": 0,
      "retrieved_tokens": 7517,
      "prompt_template_tokens": 523,
      "total_input_prompt_tokens": 8596,
      "output_generated_tokens": 409,
      "total_io_tokens": 9005,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nwebgl: render buffers are not not always created correctly\\n0.8.0 webgl.\\r\\n\\r\\n(from #3764)\\r\\n\\r\\nthe issue is that when creating a retained-mode geometry (any geometry, not just the glyph quad), it's checking the _current_ fill and stroke shaders for which buffers to create and which attributes to enable.\\r\\n\\r\\nhttps://github.com/processing/p5.js/blob/6640d149348dea0a1b3df61f0cf8442222403a9f/src/webgl/p5.RendererGL.Retained.js#L171-L172\\r\\n\\r\\nthis means that if you choose a shader that doesn't have a particular attribute, then create a (cached) geometry, that geometry won't have a buffer created for it that corresponds to that attribute. then, if you switch the current shader to one that _does_ have that attribute, it will fail to render because that buffer won't have been created.\\r\\n\\r\\nrepro, here: https://codepen.io/Spongman/pen/ZNoZoM?editors=0010\\r\\n\\r\\nthis test case creates and uses a shader that doesn't have a full suite of attributes. it then draws a sphere (in the `setup()` function). the sphere's geometry is created & cached. the bug is that the render buffers are also created at this time, and they're only created if the _current_ shader has the corresponding attribute. subsequently, when a regular fill shader is used to render the sphere (in the `draw()` function), the required render buffers are missing, and the sphere is drawn incorrectly, or not at all (probably depending on the webgl implementation):\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/1088194/58386210-0f0d9c80-7fb1-11e9-96db-0734d8bdcf3a.png)\\r\\n\\r\\n\\r\\n```javascript\\r\\nvar sh;\\r\\n\\r\\nfunction setup() {\\r\\n  createCanvas(windowWidth, windowHeight, WEBGL);\\r\\n  \\r\\n  sh = createShader(\\r\\n    'attribute vec3 aPosition; void main() { gl_Position = vec4(aPosition, 1.0); }',\\r\\n    'void main() { gl_FragColor = vec4(1.0,1.0,1.0,1.0); }'\\r\\n  );\\r\\n  \\r\\n  shader(sh);\\r\\n  noStroke();\\r\\n  sphere(200);\\r\\n}\\r\\n\\r\\nfunction windowResized() {\\r\\n  resizeCanvas(windowWidth, windowHeight);\\r\\n}\\r\\n\\r\\nfunction draw() {\\r\\n  background(0);\\r\\n  \\r\\n  // draw an orange sphere\\r\\n  fill(255, 128, 0);\\r\\n  directionalLight(255, 255, 255, 1, 1, -1);\\r\\n  sphere(200);\\r\\n}\\r\\n```\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of webgl_mode_architecture.md]\\n# p5.js WEBGL mode architecture\\n\\nThis document describes the structure of the p5.js WEBGL mode for p5.js contributors and maintainers\\u2014and any other interested parties. If you're interested in using 3D graphics in your sketches, [view this tutorial](https://github.com/processing/p5.js/wiki/Getting-started-with-WebGL-in-p5) instead.\\n\\n## Overview of Structure and Objects\\n\\nThe core objects in the WEBGL architecture are the p5.Renderer.GL, p5.Shader, p5.Texture, and p5.Geometry.\\nA single instance of p5.Renderer.GL manages its own p5.Shaders, p5.Textures, and p5.Geometry\\u2014a goal for this is to allow offscreen rendering using WebGL, but that hasn\\u2019t been tested yet.\\nShaders and textures are associated with a specific GL context via the renderer.\\n\\n### p5.RendererGL\\nThe p5.RendererGL object is the renderer for WEBGL / 3D Mode in p5.js.\\nDerived from p5.Renderer, it provides additional functionality not available in 2D mode, such as: `box()`, `cone()`, use of shaders, accelerated texture rendering, and lighting.\\n\\n* Manages\\u2014creates and caches\\u2014shaders (p5.Shader objects) and textures (p5.Texture objects)\\n* Prepares coordinates of shapes to be used as attribute arrays by shaders.\\n* Selects the correct shader for use when stroke, fill, texture, and various lighting methods are called, then supplies the appropriate uniforms to those shaders.\\n* Maintains data about lighting: a count of how many various types of lights are used and their parameters.\\n* Caches geometry for 3D primitives (in retained mode), with the exception of shapes created with begin/endShape, which are dynamically generated and pushed to GL every time one is drawn (in immediate mode).\\n\\nThe renderer manages choosing an appropriate p5.Shader for the current drawing conditions.\\n\\n### p5.Shader\\nThe p5.Shader class provides access to the uniforms and attributes of a GL program. \\n\\n* Compiles and links the vertex and fragment shader components\\n* Provides an API for accessing and setting shader attributes and uniforms\\n* Binds textures the shader needs before a shape is rendered\\n* Provides the bindShader() method for use in the render before a shape is drawn, then unbindShader() after the shape is drawn.\\n\\nThere are four default shaders, as documented in the Shader section.\\n\\n### p5.Texture\\nThe p5.Texture object manages GL state for a texture based on a `p5.Image`, `p5.MediaElement`, `p5.Element`, or `ImageData`.\\n\\n* Internally handles processing image data based on type, so that the p5.Renderer implementation doesn\\u2019t have to make special exceptions in its own methods when handling textures\\n* Updates conditionally every frame by making a best guess at whether or not image data has changed. Tries not to upload the texture if no change has been made, to help performance.\\n\\n### p5.Geometry\\nShapes rendered in retain mode are stored as p5.Geometry objects in a cache in the p5.Renderer object. \\nThe renderer maps strings to p5.Geometry objects based on the shape drawn and its parameters (for example, geometry for a box created with `box(70, 80, 90, 10, 20)` is mapped from `'box|70|80|90|10|20\\u2019`). Calls to functions that have retained geometry create a p5.Geometry object on the first pass and store it in a geometry hash using the aforementioned string ID. Later calls look for that ID in the hash, and if it is found use that to reference the existing object rather than creating a new one.\\n\\n* Stores vertices, normals, faces, line vertices, line normals, and texture coordinates for the geometry primitives\\n* Provides methods for computing the faces, normals, line vertices, and line normals for a set of vertices\\n\\n## Immediate Mode\\nAll attributes for drawing with Immediate Mode are stored in an object in the renderer, used to draw to the GL drawing context, and then discarded.\\n\\n## Geometry: Retain and Immediate Mode\\nRetained geometry is used for 3D primitives, while immediate mode is used for shapes created with begin/endShape.\\n\\n|Functions with retained geometry| Functions with immediate mode geometry |\\n|--------------------------------|----------------------------------------|\\n|plane()                         | bezier()                               |\\n|box()                           | curve()                                |\\n|sphere()                        | line()                                 |\\n|cylinder()                      | beginShape()                           |\\n|cone()                          | vertex()                               |\\n|ellipsoid()                     | endShape()                             |\\n|torus()                         | point()                                |\\n|triangle()                      | curveVertex()                          |\\n|arc()                           | bezierVertex()                         |\\n|point()                         | quadraticVertex()                      |\\n|ellipse()                       |\\n|rect()                          |\\n|quad()                          |\\n|text()                          |\\n\\n\\n\\n\\n\\n\\n## Texture Management\\nA p5.Renderer.GL instances manages an array of p5.Textures objects on an as-needed basis.\\nTextures are created for images and videos used with the `texture()` method or as uniforms provided to custom shaders.\\n\\nWhen the renderer needs a texture, it first checks if one has already been created for a given image/video, then provides that to a shader for rendering. A new texture is only created if an existing one cannot be found for the image/video.\\n\\n## Shaders\\n\\n### Types of Shaders\\n\\n#### Color Shader\\nProvides flat shading of objects, based on the current fill color.\\n\\n#### Light Shader (for lighting AND textures)\\nAccounts for:\\n* Lighting parameters set by `ambientLight()`, `directionalLight()`, and `pointLight()`\\n* Material parameters set by `ambientMaterial()`, and `specularMaterial()`\\n* Texture parameters, set by `texture()`\\n\\n#### Normal Shader\\nThe normal shader is set when `normalMaterial()` is in use. It uses the surface\\u2019s normal vector to determine a fragment color.\\n\\n### Shader Parameters\\n\\n#### Standard Model View & Camera Uniforms\\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|---------------------------------|-----------|---------------|------------|-------------|------------|\\n|`uniform mat4 uModelViewMatrix;` |x          |x              |x           |x            |x           |\\n|`uniform mat4 uProjectionMatrix;`|x          |x              |x           |x            |x           |\\n|`uniform vec4 uViewPort;`        |x          |               |            |             |            |\\n\\n\\n#### Geometry Attributes and Uniforms\\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|---------------------------------|-----------|---------------|------------|-------------|------------|\\n|`attribute vec3 aPosition;`      |x          |x              |x           |x            |x           |\\n|`attribute vec3 aNormal;`        |           |x              |            |x            |            | \\n|`attribute vec2 aTexCoord;`      |           |x              |            |x            |            |\\n|`uniform mat3 uNormalMatrix;`    |           |x              |            |x            |            |\\n|`attribute vec4 aDirection;`     |x          |               |            |             |            |\\n|`uniform float uStrokeWeight;`   |x          |               |            |             |            |\\n\\n#### Material Colors\\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|---------------------------------|-----------|---------------|------------|-------------|------------|\\n|`uniform vec4 uMaterialColor;`   |x          |x              |            |             |x           |\\n|`attribute vec4 aVertexColor;`   |           |               |x           |             |            |\\n\\n#### Light Parameters\\n\\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\\n|`uniform int uAmbientLightCount;`     |           |x              |            |             |            |\\n|`uniform int uAmbientLightCount;`     |           |x              |            |             |            |\\n|`uniform int uDirectionalLightCount;` |           |x              |            |             |            |\\n|`uniform int uPointLightCount;`       |           |x              |            |             |            |\\n|`uniform vec3 uAmbientColor[8];`      |           |x              |            |             |            |\\n|`uniform vec3 uLightingDirection[8];` |           |x              |            |             |            |\\n|`uniform vec3 uDirectionalColor[8];`  |           |x              |            |             |            |\\n|`uniform vec3 uPointLightLocation[8];`|           |x              |            |             |            |\\n|`uniform vec3 uPointLightColor[8];`   |           |x              |            |             |            |\\n|`uniform bool uSpecular;`             |           |x              |            |             |            |\\n|`uniform int  uShininess;`            |           |x              |            |             |            |\\n|`uniform bool uUseLighting;`          |           |x              |            |             |            |\\n\\n#### Texture Parameters\\n\\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\\n|`uniform sampler2D uSampler;`         |           |x              |            |             |            |\\n|`uniform bool isTexture;`             |           |x              |            |             |            |\\n\\n#### General Parameters\\n\\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\\n|`uniform float uResolution;`          |           |               |x           |             |            |\\n|`uniform float uPointSize;`           |           |               |x           |             |x           |\\n\\n#### Varying Parameters\\n\\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\\n|`varying vec3 vVertexNormal;`         |           |x              |            |             |            |\\n|`varying vec2 vVertTexCoord;`         |           |x              |            |             |            |\\n|`varying vec3 vLightWeighting;`       |           |x              |            |             |            |\\n|`varying highp vec2 vVertTexCoord;`   |           |               |            |x            |            |\\n|`varying vec4 vColor;`                |           |               |x           |             |            |\\n|`varying float vStrokeWeight`         |           |               |            |             |x           |\\n\\n## Next Steps\\n\\nComing soon!\\n\\n[end of webgl_mode_architecture.md]\\n[start of sketch.js]\\nvar renderer;\\nvar geometry;\\n\\nfunction setup() {\\n  // put setup code here\\n\\n  //setAttributes('antialias', true);\\n  renderer = createCanvas(windowWidth, windowHeight, WEBGL);\\n  stroke(0);\\n\\n  camera(0, -600, 300, 0, 0, 0, 0, -1, 0);\\n\\n  geometry = new p5.Geometry(100, 100, function() {\\n    for (var y = 0; y <= this.detailY; y++) {\\n      var v = y / this.detailY;\\n      for (var x = 0; x <= this.detailX; x++) {\\n        var u = x / this.detailX;\\n        var p = new p5.Vector(u - 0.5, v - 0.5, 0);\\n        this.vertices.push(p);\\n        this.uvs.push(u, v);\\n      }\\n    }\\n  });\\n}\\n\\nfunction draw() {\\n  var tt = millis();\\n\\n  background(0);\\n\\n  //stroke(0);\\n  noStroke();\\n\\n  var sunPos = p5.Vector.fromAngles(tt / 5000, PI / 4, 1000);\\n  push();\\n  fill(255, 250, 136);\\n  translate(sunPos);\\n  sphere(60);\\n  pop();\\n\\n  var moonPos = p5.Vector.fromAngles(PI + tt / 5000, PI / 4, 1000);\\n  push();\\n  translate(moonPos);\\n  fill(255);\\n  sphere(40);\\n  pop();\\n\\n  for (var y = 0; y <= geometry.detailY; y++) {\\n    for (var x = 0; x <= geometry.detailX; x++) {\\n      var v = noise(\\n        3 * x / geometry.detailX,\\n        3 * y / geometry.detailY,\\n        tt / 10000\\n      );\\n      v = map(v, 0, 1, -0.5, 1);\\n      if (v < 0) v = 0;\\n      v = v * v * v;\\n      v = map(v, 0, 1, 0, 500);\\n      geometry.vertices[y * (geometry.detailX + 1) + x].z = v;\\n    }\\n  }\\n\\n  fill(255);\\n\\n  pointLight(255, 250, 136, sunPos);\\n  pointLight(150, 150, 150, moonPos);\\n\\n  geometry.computeFaces().computeNormals();\\n  renderer.createBuffers('!', geometry);\\n  renderer.drawBuffersScaled('!', 1000, 1000, 1);\\n}\\n\\n[end of sketch.js]\\n[start of p5.Texture.js]\\nsuite('p5.Texture', function() {\\n  var myp5;\\n  var texImg1;\\n  var texImg2;\\n\\n  if (!window.Modernizr.webgl) {\\n    //assert(false, 'could not run gl tests');\\n    return;\\n  }\\n\\n  setup(function(done) {\\n    myp5 = new p5(function(p) {\\n      p.preload = function() {\\n        texImg2 = p.loadImage('unit/assets/target.gif');\\n\\n        // texture object isn't created until it's used for something:\\n        //p.box(70, 70, 70);\\n      };\\n      p.setup = function() {\\n        p.createCanvas(100, 100, p.WEBGL);\\n        texImg1 = p.createGraphics(2, 2, p.WEBGL);\\n        p.texture(texImg1);\\n        done();\\n      };\\n    });\\n  });\\n\\n  teardown(function() {\\n    myp5.remove();\\n  });\\n\\n  var testTextureSet = function(src) {\\n    test('Light shader set after texture()', function() {\\n      var lightShader = myp5._renderer._getLightShader();\\n      var selectedShader = myp5._renderer._getRetainedFillShader();\\n      assert(\\n        lightShader === selectedShader,\\n        \\\"_renderer's retain mode shader was not light shader \\\" +\\n          'after call to texture()'\\n      );\\n    });\\n\\n    var tex = myp5._renderer.getTexture(src);\\n    assert(tex !== undefined, 'texture was undefined');\\n    assert(tex instanceof p5.Texture, 'texture was not a p5.Texture object');\\n    assert(tex.src === src, 'texture did not have expected image as source');\\n  };\\n\\n  suite('p5.Texture', function() {\\n    test('Create and cache a single texture with p5.Image', function() {\\n      testTextureSet(texImg1);\\n    });\\n    test('Create and cache multiple p5.Image textures', function() {\\n      myp5.texture(texImg2);\\n      testTextureSet(texImg2);\\n      // other image was made into a texture in setup, should still be there!\\n      //testTextureSet(texImg1);\\n    });\\n    test('Set filter mode to linear', function() {\\n      var tex = myp5._renderer.getTexture(texImg2);\\n      tex.setInterpolation(myp5.LINEAR, myp5.LINEAR);\\n      assert.deepEqual(tex.glMinFilter, myp5._renderer.GL.LINEAR);\\n      assert.deepEqual(tex.glMagFilter, myp5._renderer.GL.LINEAR);\\n    });\\n    test('Set filter mode to nearest', function() {\\n      var tex = myp5._renderer.getTexture(texImg2);\\n      tex.setInterpolation(myp5.NEAREST, myp5.NEAREST);\\n      assert.deepEqual(tex.glMinFilter, myp5._renderer.GL.NEAREST);\\n      assert.deepEqual(tex.glMagFilter, myp5._renderer.GL.NEAREST);\\n    });\\n    test('Set wrap mode to clamp', function() {\\n      var tex = myp5._renderer.getTexture(texImg2);\\n      tex.setWrapMode(myp5.CLAMP, myp5.CLAMP);\\n      assert.deepEqual(tex.glWrapS, myp5._renderer.GL.CLAMP_TO_EDGE);\\n      assert.deepEqual(tex.glWrapT, myp5._renderer.GL.CLAMP_TO_EDGE);\\n    });\\n    test('Set wrap mode to repeat', function() {\\n      var tex = myp5._renderer.getTexture(texImg2);\\n      tex.setWrapMode(myp5.REPEAT, myp5.REPEAT);\\n      assert.deepEqual(tex.glWrapS, myp5._renderer.GL.REPEAT);\\n      assert.deepEqual(tex.glWrapT, myp5._renderer.GL.REPEAT);\\n    });\\n    test('Set wrap mode to mirror', function() {\\n      var tex = myp5._renderer.getTexture(texImg2);\\n      tex.setWrapMode(myp5.MIRROR, myp5.MIRROR);\\n      assert.deepEqual(tex.glWrapS, myp5._renderer.GL.MIRRORED_REPEAT);\\n      assert.deepEqual(tex.glWrapT, myp5._renderer.GL.MIRRORED_REPEAT);\\n    });\\n    test('Set textureMode to NORMAL', function() {\\n      myp5.textureMode(myp5.NORMAL);\\n      assert.deepEqual(myp5._renderer.textureMode, myp5.NORMAL);\\n    });\\n    test('Set textureMode to IMAGE', function() {\\n      myp5.textureMode(myp5.IMAGE);\\n      assert.deepEqual(myp5._renderer.textureMode, myp5.IMAGE);\\n    });\\n    test('Set global wrap mode to clamp', function() {\\n      myp5.textureWrap(myp5.CLAMP);\\n      var tex1 = myp5._renderer.getTexture(texImg1);\\n      var tex2 = myp5._renderer.getTexture(texImg2);\\n      assert.deepEqual(tex1.glWrapS, myp5._renderer.GL.CLAMP_TO_EDGE);\\n      assert.deepEqual(tex1.glWrapT, myp5._renderer.GL.CLAMP_TO_EDGE);\\n      assert.deepEqual(tex2.glWrapS, myp5._renderer.GL.CLAMP_TO_EDGE);\\n      assert.deepEqual(tex2.glWrapT, myp5._renderer.GL.CLAMP_TO_EDGE);\\n    });\\n    test('Set global wrap mode to repeat', function() {\\n      myp5.textureWrap(myp5.REPEAT);\\n      var tex1 = myp5._renderer.getTexture(texImg1);\\n      var tex2 = myp5._renderer.getTexture(texImg2);\\n      assert.deepEqual(tex1.glWrapS, myp5._renderer.GL.REPEAT);\\n      assert.deepEqual(tex1.glWrapT, myp5._renderer.GL.REPEAT);\\n      assert.deepEqual(tex2.glWrapS, myp5._renderer.GL.REPEAT);\\n      assert.deepEqual(tex2.glWrapT, myp5._renderer.GL.REPEAT);\\n    });\\n    test('Set global wrap mode to mirror', function() {\\n      myp5.textureWrap(myp5.MIRROR);\\n      var tex1 = myp5._renderer.getTexture(texImg1);\\n      var tex2 = myp5._renderer.getTexture(texImg2);\\n      assert.deepEqual(tex1.glWrapS, myp5._renderer.GL.MIRRORED_REPEAT);\\n      assert.deepEqual(tex1.glWrapT, myp5._renderer.GL.MIRRORED_REPEAT);\\n      assert.deepEqual(tex2.glWrapS, myp5._renderer.GL.MIRRORED_REPEAT);\\n      assert.deepEqual(tex2.glWrapT, myp5._renderer.GL.MIRRORED_REPEAT);\\n    });\\n  });\\n});\\n\\n[end of p5.Texture.js]\\n[start of p5.RendererGL.js]\\nsuite('p5.RendererGL', function() {\\n  var myp5;\\n\\n  if (!window.Modernizr.webgl) {\\n    return;\\n  }\\n\\n  setup(function() {\\n    myp5 = new p5(function(p) {\\n      p.setup = function() {};\\n      p.draw = function() {};\\n    });\\n  });\\n\\n  teardown(function() {\\n    myp5.remove();\\n  });\\n\\n  suite('createCanvas(w, h, WEBGL)', function() {\\n    test('creates a p5.RendererGL renderer', function() {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      assert.instanceOf(myp5._renderer, p5.RendererGL);\\n    });\\n  });\\n\\n  suite('default stroke shader', function() {\\n    test('check activate and deactivating fill and stroke', function(done) {\\n      myp5.noStroke();\\n      assert(\\n        !myp5._renderer._doStroke,\\n        'stroke shader still active after noStroke()'\\n      );\\n      assert.isTrue(\\n        myp5._renderer._doFill,\\n        'fill shader deactivated by noStroke()'\\n      );\\n      myp5.stroke(0);\\n      myp5.noFill();\\n      assert(\\n        myp5._renderer._doStroke,\\n        'stroke shader not active after stroke()'\\n      );\\n      assert.isTrue(\\n        !myp5._renderer._doFill,\\n        'fill shader still active after noFill()'\\n      );\\n      done();\\n    });\\n  });\\n\\n  suite('push() and pop() work in WEBGL Mode', function() {\\n    test('push/pop and translation works as expected in WEBGL Mode', function(done) {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      var modelView = myp5._renderer.uMVMatrix.copy();\\n      myp5.push();\\n      myp5.rotateX(Math.random(0, 100));\\n      myp5.translate(20, 100, 5);\\n      assert.notEqual(modelView.mat4, myp5._renderer.uMVMatrix.mat4);\\n      myp5.pop();\\n      assert.deepEqual(modelView.mat4, myp5._renderer.uMVMatrix.mat4);\\n      done();\\n    });\\n\\n    test('push/pop and directionalLight() works', function(done) {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      myp5.directionalLight(255, 0, 0, 0, 0, 0);\\n      var dirColors = myp5._renderer.directionalLightColors.slice();\\n      var dirLightDirections = myp5._renderer.directionalLightDirections.slice();\\n      myp5.push();\\n      myp5.directionalLight(0, 0, 255, 0, 10, 5);\\n      assert.notEqual(dirColors, myp5._renderer.directionalLightColors);\\n      assert.notEqual(\\n        dirLightDirections,\\n        myp5._renderer.directionalLightDirections\\n      );\\n      myp5.pop();\\n      assert.deepEqual(dirColors, myp5._renderer.directionalLightColors);\\n      assert.deepEqual(\\n        dirLightDirections,\\n        myp5._renderer.directionalLightDirections\\n      );\\n      done();\\n    });\\n\\n    test('push/pop and ambientLight() works', function(done) {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      myp5.ambientLight(100, 0, 100);\\n      myp5.ambientLight(0, 0, 200);\\n      var ambColors = myp5._renderer.ambientLightColors.slice();\\n      myp5.push();\\n      myp5.ambientLight(0, 0, 0);\\n      assert.notEqual(ambColors, myp5._renderer.ambientLightColors);\\n      myp5.pop();\\n      assert.deepEqual(ambColors, myp5._renderer.ambientLightColors);\\n      done();\\n    });\\n\\n    test('push/pop and pointLight() works', function(done) {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      myp5.pointLight(255, 0, 0, 0, 0, 0);\\n      var pointColors = myp5._renderer.pointLightColors.slice();\\n      var pointLocs = myp5._renderer.pointLightPositions.slice();\\n      myp5.push();\\n      myp5.pointLight(0, 0, 255, 0, 10, 5);\\n      assert.notEqual(pointColors, myp5._renderer.pointLightColors);\\n      assert.notEqual(pointLocs, myp5._renderer.pointLightPositions);\\n      myp5.pop();\\n      assert.deepEqual(pointColors, myp5._renderer.pointLightColors);\\n      assert.deepEqual(pointLocs, myp5._renderer.pointLightPositions);\\n      done();\\n    });\\n\\n    test('push/pop and pointLight() works', function(done) {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      myp5.pointLight(255, 0, 0, 0, 0, 0);\\n      var pointColors = myp5._renderer.pointLightColors.slice();\\n      var pointLocs = myp5._renderer.pointLightPositions.slice();\\n      myp5.push();\\n      myp5.pointLight(0, 0, 255, 0, 10, 5);\\n      assert.notEqual(pointColors, myp5._renderer.pointLightColors);\\n      assert.notEqual(pointLocs, myp5._renderer.pointLightPositions);\\n      myp5.pop();\\n      assert.deepEqual(pointColors, myp5._renderer.pointLightColors);\\n      assert.deepEqual(pointLocs, myp5._renderer.pointLightPositions);\\n      done();\\n    });\\n\\n    test('push/pop and texture() works', function(done) {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      var tex1 = myp5.createGraphics(1, 1);\\n      myp5.texture(tex1);\\n      assert.equal(tex1, myp5._renderer._tex);\\n      myp5.push();\\n      var tex2 = myp5.createGraphics(2, 2);\\n      myp5.texture(tex2);\\n      assert.equal(tex2, myp5._renderer._tex);\\n      assert.notEqual(tex1, myp5._renderer._tex);\\n      myp5.pop();\\n      assert.equal(tex1, myp5._renderer._tex);\\n      done();\\n    });\\n\\n    test('push/pop and shader() works with fill', function(done) {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      var fillShader1 = myp5._renderer._getLightShader();\\n      var fillShader2 = myp5._renderer._getColorShader();\\n      myp5.shader(fillShader1);\\n      assert.equal(fillShader1, myp5._renderer.userFillShader);\\n      myp5.push();\\n      myp5.shader(fillShader2);\\n      assert.equal(fillShader2, myp5._renderer.userFillShader);\\n      assert.notEqual(fillShader1, myp5._renderer.userFillShader);\\n      myp5.pop();\\n      assert.equal(fillShader1, myp5._renderer.userFillShader);\\n      done();\\n    });\\n\\n    test('push/pop builds/unbuilds stack properly', function(done) {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      var col1 = myp5.color(255, 0, 0);\\n      var col2 = myp5.color(0, 255, 0);\\n      for (var i = 0; i < 10; i++) {\\n        myp5.push();\\n        if (i % 2 === 0) {\\n          myp5.fill(col1);\\n        } else {\\n          myp5.fill(col2);\\n        }\\n      }\\n      for (var j = i; j > 0; j--) {\\n        if (j % 2 === 0) {\\n          assert.deepEqual(col2._array, myp5._renderer.curFillColor);\\n        } else {\\n          assert.deepEqual(col1._array, myp5._renderer.curFillColor);\\n        }\\n        myp5.pop();\\n      }\\n      assert.isTrue(myp5._styles.length === 0);\\n      done();\\n    });\\n  });\\n\\n  suite('loadpixels()', function() {\\n    test('loadPixels color check', function(done) {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      myp5.background(0, 100, 0);\\n      myp5.loadPixels();\\n      var pixels = myp5.pixels;\\n      assert.deepEqual(pixels[1], 100);\\n      assert.deepEqual(pixels[3], 255);\\n      done();\\n    });\\n\\n    test('get() singlePixel color and size, with loadPixels', function(done) {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      myp5.background(100, 115, 100);\\n      myp5.loadPixels();\\n      var img = myp5.get(0, 0);\\n      assert.isTrue(img[1] === 115);\\n      assert.isTrue(img.length === 4);\\n      done();\\n    });\\n  });\\n\\n  suite('get()', function() {\\n    var img;\\n    test('get() size check', function(done) {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      img = myp5.get();\\n      assert.deepEqual(img.width, myp5.width);\\n      done();\\n    });\\n\\n    test('get() can create p5.Image', function(done) {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      assert.isTrue(img instanceof p5.Image);\\n      done();\\n    });\\n\\n    test('get() singlePixel color and size', function(done) {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      myp5.background(100, 115, 100);\\n      img = myp5.get(0, 0);\\n      assert.isTrue(img[1] === 115);\\n      assert.isTrue(img.length === 4);\\n      myp5.loadPixels();\\n      img = myp5.get(0, 0);\\n      assert.isTrue(img[1] === 115);\\n      assert.isTrue(img.length === 4);\\n      done();\\n    });\\n  });\\n\\n  suite('blendMode()', function() {\\n    var testBlend = function(mode, intended) {\\n      myp5.blendMode(mode);\\n      assert.deepEqual(intended, myp5._renderer.curBlendMode);\\n    };\\n\\n    test('blendMode sets _curBlendMode correctly', function(done) {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      testBlend(myp5.ADD, myp5.ADD);\\n      testBlend(myp5.REPLACE, myp5.REPLACE);\\n      testBlend(myp5.SUBTRACT, myp5.SUBTRACT);\\n      testBlend(myp5.SCREEN, myp5.SCREEN);\\n      testBlend(myp5.EXCLUSION, myp5.EXCLUSION);\\n      testBlend(myp5.MULTIPLY, myp5.MULTIPLY);\\n      testBlend(myp5.LIGHTEST, myp5.LIGHTEST);\\n      testBlend(myp5.DARKEST, myp5.DARKEST);\\n      done();\\n    });\\n\\n    test('blendMode doesnt change when mode unavailable in 3D', function(done) {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      myp5.blendMode(myp5.DARKEST);\\n      testBlend(myp5.BURN, myp5.DARKEST);\\n      testBlend(myp5.DODGE, myp5.DARKEST);\\n      testBlend(myp5.SOFT_LIGHT, myp5.DARKEST);\\n      testBlend(myp5.HARD_LIGHT, myp5.DARKEST);\\n      testBlend(myp5.OVERLAY, myp5.DARKEST);\\n      done();\\n    });\\n\\n    var mixAndReturn = function(mode, bgCol) {\\n      myp5.background(bgCol);\\n      myp5.blendMode(mode);\\n      myp5.fill(255, 0, 0, 122);\\n      myp5.plane(10);\\n      myp5.fill(0, 0, 255, 122);\\n      myp5.plane(10);\\n      return myp5.get(5, 5);\\n    };\\n\\n    test('blendModes change pixel colors as expected', function(done) {\\n      myp5.createCanvas(10, 10, myp5.WEBGL);\\n      myp5.noStroke();\\n      assert.deepEqual([133, 69, 191, 255], mixAndReturn(myp5.ADD, 255));\\n      assert.deepEqual([0, 0, 255, 255], mixAndReturn(myp5.REPLACE, 255));\\n      assert.deepEqual([133, 255, 133, 255], mixAndReturn(myp5.SUBTRACT, 255));\\n      assert.deepEqual([255, 0, 255, 255], mixAndReturn(myp5.SCREEN, 0));\\n      assert.deepEqual([0, 255, 0, 255], mixAndReturn(myp5.EXCLUSION, 255));\\n      assert.deepEqual([0, 0, 0, 255], mixAndReturn(myp5.MULTIPLY, 255));\\n      assert.deepEqual([255, 0, 255, 255], mixAndReturn(myp5.LIGHTEST, 0));\\n      assert.deepEqual([0, 0, 0, 255], mixAndReturn(myp5.DARKEST, 255));\\n      done();\\n    });\\n  });\\n});\\n\\n[end of p5.RendererGL.js]\\n[start of sketch.js]\\nvar img;\\nvar tex;\\nvar filterShader;\\nvar filterNearest = true;\\n\\nvar vertexShader = `\\nattribute vec3 aPosition;\\nattribute vec2 aTexCoord;\\n\\nvarying vec2 vTexCoord;\\n\\nvoid main() {\\n  vTexCoord = aTexCoord;\\n\\n  vec4 positionVec4 = vec4(aPosition, 1.0);\\n  positionVec4.xy = positionVec4.xy * 2.0 - 1.0;\\n\\n  gl_Position = positionVec4;\\n}`;\\n\\nvar fragmentShader = `\\nprecision mediump float;\\n\\nvarying vec2 vTexCoord;\\n\\nuniform sampler2D uTex0;\\n\\nvoid main() {\\n  vec2 uv = vTexCoord;\\n  uv.y = 1.0 - uv.y;\\n\\n  vec4 tex = texture2D(uTex0, uv);\\n\\n  gl_FragColor = tex;\\n}`;\\n\\nfunction preload() {\\n  img = loadImage('../../assets/cat.jpg');\\n}\\n\\nfunction setup() {\\n  let canvas = createCanvas(windowWidth, windowHeight, WEBGL);\\n\\n  filterShader = createShader(vertexShader, fragmentShader);\\n\\n  tex = canvas.getTexture(img);\\n  tex.setInterpolation(NEAREST, NEAREST);\\n}\\n\\nfunction draw() {\\n  background(255);\\n\\n  shader(filterShader);\\n\\n  filterShader.setUniform('uTex0', img);\\n  rect(0, 0, width, height);\\n}\\n\\nfunction keyPressed() {\\n  filterNearest = !filterNearest;\\n\\n  if (filterNearest) {\\n    tex.setInterpolation(NEAREST, NEAREST);\\n  } else {\\n    tex.setInterpolation(LINEAR, LINEAR);\\n  }\\n}\\n\\n[end of sketch.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "webgl_mode_architecture.md",
        "sketch.js",
        "p5.Texture.js",
        "p5.RendererGL.js",
        "sketch.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "06d327b7-3b0a-4ac4-b4c2-87e8d686bb8f",
        "score": 0.01639344262295082,
        "payload": {
          "text": "# p5.js WEBGL mode architecture\n\nThis document describes the structure of the p5.js WEBGL mode for p5.js contributors and maintainers\u2014and any other interested parties. If you're interested in using 3D graphics in your sketches, [view this tutorial](https://github.com/processing/p5.js/wiki/Getting-started-with-WebGL-in-p5) instead.\n\n## Overview of Structure and Objects\n\nThe core objects in the WEBGL architecture are the p5.Renderer.GL, p5.Shader, p5.Texture, and p5.Geometry.\nA single instance of p5.Renderer.GL manages its own p5.Shaders, p5.Textures, and p5.Geometry\u2014a goal for this is to allow offscreen rendering using WebGL, but that hasn\u2019t been tested yet.\nShaders and textures are associated with a specific GL context via the renderer.\n\n### p5.RendererGL\nThe p5.RendererGL object is the renderer for WEBGL / 3D Mode in p5.js.\nDerived from p5.Renderer, it provides additional functionality not available in 2D mode, such as: `box()`, `cone()`, use of shaders, accelerated texture rendering, and lighting.\n\n* Manages\u2014creates and caches\u2014shaders (p5.Shader objects) and textures (p5.Texture objects)\n* Prepares coordinates of shapes to be used as attribute arrays by shaders.\n* Selects the correct shader for use when stroke, fill, texture, and various lighting methods are called, then supplies the appropriate uniforms to those shaders.\n* Maintains data about lighting: a count of how many various types of lights are used and their parameters.\n* Caches geometry for 3D primitives (in retained mode), with the exception of shapes created with begin/endShape, which are dynamically generated and pushed to GL every time one is drawn (in immediate mode).\n\nThe renderer manages choosing an appropriate p5.Shader for the current drawing conditions.\n\n### p5.Shader\nThe p5.Shader class provides access to the uniforms and attributes of a GL program. \n\n* Compiles and links the vertex and fragment shader components\n* Provides an API for accessing and setting shader attributes and uniforms\n* Binds textures the shader needs before a shape is rendered\n* Provides the bindShader() method for use in the render before a shape is drawn, then unbindShader() after the shape is drawn.\n\nThere are four default shaders, as documented in the Shader section.\n\n### p5.Texture\nThe p5.Texture object manages GL state for a texture based on a `p5.Image`, `p5.MediaElement`, `p5.Element`, or `ImageData`.\n\n* Internally handles processing image data based on type, so that the p5.Renderer implementation doesn\u2019t have to make special exceptions in its own methods when handling textures\n* Updates conditionally every frame by making a best guess at whether or not image data has changed. Tries not to upload the texture if no change has been made, to help performance.\n\n### p5.Geometry\nShapes rendered in retain mode are stored as p5.Geometry objects in a cache in the p5.Renderer object. \nThe renderer maps strings to p5.Geometry objects based on the shape drawn and its parameters (for example, geometry for a box created with `box(70, 80, 90, 10, 20)` is mapped from `'box|70|80|90|10|20\u2019`). Calls to functions that have retained geometry create a p5.Geometry object on the first pass and store it in a geometry hash using the aforementioned string ID. Later calls look for that ID in the hash, and if it is found use that to reference the existing object rather than creating a new one.\n\n* Stores vertices, normals, faces, line vertices, line normals, and texture coordinates for the geometry primitives\n* Provides methods for computing the faces, normals, line vertices, and line normals for a set of vertices\n\n## Immediate Mode\nAll attributes for drawing with Immediate Mode are stored in an object in the renderer, used to draw to the GL drawing context, and then discarded.\n\n## Geometry: Retain and Immediate Mode\nRetained geometry is used for 3D primitives, while immediate mode is used for shapes created with begin/endShape.\n\n|Functions with retained geometry| Functions with immediate mode geometry |\n|--------------------------------|----------------------------------------|\n|plane()                         | bezier()                               |\n|box()                           | curve()                                |\n|sphere()                        | line()                                 |\n|cylinder()                      | beginShape()                           |\n|cone()                          | vertex()                               |\n|ellipsoid()                     | endShape()                             |\n|torus()                         | point()                                |\n|triangle()                      | curveVertex()                          |\n|arc()                           | bezierVertex()                         |\n|point()                         | quadraticVertex()                      |\n|ellipse()                       |\n|rect()                          |\n|quad()                          |\n|text()                          |\n\n\n\n\n\n\n## Texture Management\nA p5.Renderer.GL instances manages an array of p5.Textures objects on an as-needed basis.\nTextures are created for images and videos used with the `texture()` method or as uniforms provided to custom shaders.\n\nWhen the renderer needs a texture, it first checks if one has already been created for a given image/video, then provides that to a shader for rendering. A new texture is only created if an existing one cannot be found for the image/video.\n\n## Shaders\n\n### Types of Shaders\n\n#### Color Shader\nProvides flat shading of objects, based on the current fill color.\n\n#### Light Shader (for lighting AND textures)\nAccounts for:\n* Lighting parameters set by `ambientLight()`, `directionalLight()`, and `pointLight()`\n* Material parameters set by `ambientMaterial()`, and `specularMaterial()`\n* Texture parameters, set by `texture()`\n\n#### Normal Shader\nThe normal shader is set when `normalMaterial()` is in use. It uses the surface\u2019s normal vector to determine a fragment color.\n\n### Shader Parameters\n\n#### Standard Model View & Camera Uniforms\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|---------------------------------|-----------|---------------|------------|-------------|------------|\n|`uniform mat4 uModelViewMatrix;` |x          |x              |x           |x            |x           |\n|`uniform mat4 uProjectionMatrix;`|x          |x              |x           |x            |x           |\n|`uniform vec4 uViewPort;`        |x          |               |            |             |            |\n\n\n#### Geometry Attributes and Uniforms\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|---------------------------------|-----------|---------------|------------|-------------|------------|\n|`attribute vec3 aPosition;`      |x          |x              |x           |x            |x           |\n|`attribute vec3 aNormal;`        |           |x              |            |x            |            | \n|`attribute vec2 aTexCoord;`      |           |x              |            |x            |            |\n|`uniform mat3 uNormalMatrix;`    |           |x              |            |x            |            |\n|`attribute vec4 aDirection;`     |x          |               |            |             |            |\n|`uniform float uStrokeWeight;`   |x          |               |            |             |            |\n\n#### Material Colors\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|---------------------------------|-----------|---------------|------------|-------------|------------|\n|`uniform vec4 uMaterialColor;`   |x          |x              |            |             |x           |\n|`attribute vec4 aVertexColor;`   |           |               |x           |             |            |\n\n#### Light Parameters\n\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\n|`uniform int uAmbientLightCount;`     |           |x              |            |             |            |\n|`uniform int uAmbientLightCount;`     |           |x              |            |             |            |\n|`uniform int uDirectionalLightCount;` |           |x              |            |             |            |\n|`uniform int uPointLightCount;`       |           |x              |            |             |            |\n|`uniform vec3 uAmbientColor[8];`      |           |x              |            |             |            |\n|`uniform vec3 uLightingDirection[8];` |           |x              |            |             |            |\n|`uniform vec3 uDirectionalColor[8];`  |           |x              |            |             |            |\n|`uniform vec3 uPointLightLocation[8];`|           |x              |            |             |            |\n|`uniform vec3 uPointLightColor[8];`   |           |x              |            |             |            |\n|`uniform bool uSpecular;`             |           |x              |            |             |            |\n|`uniform int  uShininess;`            |           |x              |            |             |            |\n|`uniform bool uUseLighting;`          |           |x              |            |             |            |\n\n#### Texture Parameters\n\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\n|`uniform sampler2D uSampler;`         |           |x              |            |             |            |\n|`uniform bool isTexture;`             |           |x              |            |             |            |\n\n#### General Parameters\n\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\n|`uniform float uResolution;`          |           |               |x           |             |            |\n|`uniform float uPointSize;`           |           |               |x           |             |x           |\n\n#### Varying Parameters\n\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\n|`varying vec3 vVertexNormal;`         |           |x              |            |             |            |\n|`varying vec2 vVertTexCoord;`         |           |x              |            |             |            |\n|`varying vec3 vLightWeighting;`       |           |x              |            |             |            |\n|`varying highp vec2 vVertTexCoord;`   |           |               |            |x            |            |\n|`varying vec4 vColor;`                |           |               |x           |             |            |\n|`varying float vStrokeWeight`         |           |               |            |             |x           |\n\n## Next Steps\n\nComing soon!\n",
          "filepath": "data/repos/processing/p5.js-0.8/developer_docs/webgl_mode_architecture.md",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      },
      {
        "id": "5fd4cd27-e506-42d3-bead-e34a22dcc4a3",
        "score": 0.016129032258064516,
        "payload": {
          "text": "var renderer;\nvar geometry;\n\nfunction setup() {\n  // put setup code here\n\n  //setAttributes('antialias', true);\n  renderer = createCanvas(windowWidth, windowHeight, WEBGL);\n  stroke(0);\n\n  camera(0, -600, 300, 0, 0, 0, 0, -1, 0);\n\n  geometry = new p5.Geometry(100, 100, function() {\n    for (var y = 0; y <= this.detailY; y++) {\n      var v = y / this.detailY;\n      for (var x = 0; x <= this.detailX; x++) {\n        var u = x / this.detailX;\n        var p = new p5.Vector(u - 0.5, v - 0.5, 0);\n        this.vertices.push(p);\n        this.uvs.push(u, v);\n      }\n    }\n  });\n}\n\nfunction draw() {\n  var tt = millis();\n\n  background(0);\n\n  //stroke(0);\n  noStroke();\n\n  var sunPos = p5.Vector.fromAngles(tt / 5000, PI / 4, 1000);\n  push();\n  fill(255, 250, 136);\n  translate(sunPos);\n  sphere(60);\n  pop();\n\n  var moonPos = p5.Vector.fromAngles(PI + tt / 5000, PI / 4, 1000);\n  push();\n  translate(moonPos);\n  fill(255);\n  sphere(40);\n  pop();\n\n  for (var y = 0; y <= geometry.detailY; y++) {\n    for (var x = 0; x <= geometry.detailX; x++) {\n      var v = noise(\n        3 * x / geometry.detailX,\n        3 * y / geometry.detailY,\n        tt / 10000\n      );\n      v = map(v, 0, 1, -0.5, 1);\n      if (v < 0) v = 0;\n      v = v * v * v;\n      v = map(v, 0, 1, 0, 500);\n      geometry.vertices[y * (geometry.detailX + 1) + x].z = v;\n    }\n  }\n\n  fill(255);\n\n  pointLight(255, 250, 136, sunPos);\n  pointLight(150, 150, 150, moonPos);\n\n  geometry.computeFaces().computeNormals();\n  renderer.createBuffers('!', geometry);\n  renderer.drawBuffersScaled('!', 1000, 1000, 1);\n}\n",
          "filepath": "data/repos/processing/p5.js-0.8/test/manual-test-examples/webgl/customGeometry/sketch.js",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      },
      {
        "id": "dc029403-0ef2-4c1c-9166-6768a4b5d2d7",
        "score": 0.015873015873015872,
        "payload": {
          "text": "suite('p5.Texture', function() {\n  var myp5;\n  var texImg1;\n  var texImg2;\n\n  if (!window.Modernizr.webgl) {\n    //assert(false, 'could not run gl tests');\n    return;\n  }\n\n  setup(function(done) {\n    myp5 = new p5(function(p) {\n      p.preload = function() {\n        texImg2 = p.loadImage('unit/assets/target.gif');\n\n        // texture object isn't created until it's used for something:\n        //p.box(70, 70, 70);\n      };\n      p.setup = function() {\n        p.createCanvas(100, 100, p.WEBGL);\n        texImg1 = p.createGraphics(2, 2, p.WEBGL);\n        p.texture(texImg1);\n        done();\n      };\n    });\n  });\n\n  teardown(function() {\n    myp5.remove();\n  });\n\n  var testTextureSet = function(src) {\n    test('Light shader set after texture()', function() {\n      var lightShader = myp5._renderer._getLightShader();\n      var selectedShader = myp5._renderer._getRetainedFillShader();\n      assert(\n        lightShader === selectedShader,\n        \"_renderer's retain mode shader was not light shader \" +\n          'after call to texture()'\n      );\n    });\n\n    var tex = myp5._renderer.getTexture(src);\n    assert(tex !== undefined, 'texture was undefined');\n    assert(tex instanceof p5.Texture, 'texture was not a p5.Texture object');\n    assert(tex.src === src, 'texture did not have expected image as source');\n  };\n\n  suite('p5.Texture', function() {\n    test('Create and cache a single texture with p5.Image', function() {\n      testTextureSet(texImg1);\n    });\n    test('Create and cache multiple p5.Image textures', function() {\n      myp5.texture(texImg2);\n      testTextureSet(texImg2);\n      // other image was made into a texture in setup, should still be there!\n      //testTextureSet(texImg1);\n    });\n    test('Set filter mode to linear', function() {\n      var tex = myp5._renderer.getTexture(texImg2);\n      tex.setInterpolation(myp5.LINEAR, myp5.LINEAR);\n      assert.deepEqual(tex.glMinFilter, myp5._renderer.GL.LINEAR);\n      assert.deepEqual(tex.glMagFilter, myp5._renderer.GL.LINEAR);\n    });\n    test('Set filter mode to nearest', function() {\n      var tex = myp5._renderer.getTexture(texImg2);\n      tex.setInterpolation(myp5.NEAREST, myp5.NEAREST);\n      assert.deepEqual(tex.glMinFilter, myp5._renderer.GL.NEAREST);\n      assert.deepEqual(tex.glMagFilter, myp5._renderer.GL.NEAREST);\n    });\n    test('Set wrap mode to clamp', function() {\n      var tex = myp5._renderer.getTexture(texImg2);\n      tex.setWrapMode(myp5.CLAMP, myp5.CLAMP);\n      assert.deepEqual(tex.glWrapS, myp5._renderer.GL.CLAMP_TO_EDGE);\n      assert.deepEqual(tex.glWrapT, myp5._renderer.GL.CLAMP_TO_EDGE);\n    });\n    test('Set wrap mode to repeat', function() {\n      var tex = myp5._renderer.getTexture(texImg2);\n      tex.setWrapMode(myp5.REPEAT, myp5.REPEAT);\n      assert.deepEqual(tex.glWrapS, myp5._renderer.GL.REPEAT);\n      assert.deepEqual(tex.glWrapT, myp5._renderer.GL.REPEAT);\n    });\n    test('Set wrap mode to mirror', function() {\n      var tex = myp5._renderer.getTexture(texImg2);\n      tex.setWrapMode(myp5.MIRROR, myp5.MIRROR);\n      assert.deepEqual(tex.glWrapS, myp5._renderer.GL.MIRRORED_REPEAT);\n      assert.deepEqual(tex.glWrapT, myp5._renderer.GL.MIRRORED_REPEAT);\n    });\n    test('Set textureMode to NORMAL', function() {\n      myp5.textureMode(myp5.NORMAL);\n      assert.deepEqual(myp5._renderer.textureMode, myp5.NORMAL);\n    });\n    test('Set textureMode to IMAGE', function() {\n      myp5.textureMode(myp5.IMAGE);\n      assert.deepEqual(myp5._renderer.textureMode, myp5.IMAGE);\n    });\n    test('Set global wrap mode to clamp', function() {\n      myp5.textureWrap(myp5.CLAMP);\n      var tex1 = myp5._renderer.getTexture(texImg1);\n      var tex2 = myp5._renderer.getTexture(texImg2);\n      assert.deepEqual(tex1.glWrapS, myp5._renderer.GL.CLAMP_TO_EDGE);\n      assert.deepEqual(tex1.glWrapT, myp5._renderer.GL.CLAMP_TO_EDGE);\n      assert.deepEqual(tex2.glWrapS, myp5._renderer.GL.CLAMP_TO_EDGE);\n      assert.deepEqual(tex2.glWrapT, myp5._renderer.GL.CLAMP_TO_EDGE);\n    });\n    test('Set global wrap mode to repeat', function() {\n      myp5.textureWrap(myp5.REPEAT);\n      var tex1 = myp5._renderer.getTexture(texImg1);\n      var tex2 = myp5._renderer.getTexture(texImg2);\n      assert.deepEqual(tex1.glWrapS, myp5._renderer.GL.REPEAT);\n      assert.deepEqual(tex1.glWrapT, myp5._renderer.GL.REPEAT);\n      assert.deepEqual(tex2.glWrapS, myp5._renderer.GL.REPEAT);\n      assert.deepEqual(tex2.glWrapT, myp5._renderer.GL.REPEAT);\n    });\n    test('Set global wrap mode to mirror', function() {\n      myp5.textureWrap(myp5.MIRROR);\n      var tex1 = myp5._renderer.getTexture(texImg1);\n      var tex2 = myp5._renderer.getTexture(texImg2);\n      assert.deepEqual(tex1.glWrapS, myp5._renderer.GL.MIRRORED_REPEAT);\n      assert.deepEqual(tex1.glWrapT, myp5._renderer.GL.MIRRORED_REPEAT);\n      assert.deepEqual(tex2.glWrapS, myp5._renderer.GL.MIRRORED_REPEAT);\n      assert.deepEqual(tex2.glWrapT, myp5._renderer.GL.MIRRORED_REPEAT);\n    });\n  });\n});\n",
          "filepath": "data/repos/processing/p5.js-0.8/test/unit/webgl/p5.Texture.js",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      },
      {
        "id": "5c5b52ed-8f0f-4559-b008-502152df9f93",
        "score": 0.015625,
        "payload": {
          "text": "suite('p5.RendererGL', function() {\n  var myp5;\n\n  if (!window.Modernizr.webgl) {\n    return;\n  }\n\n  setup(function() {\n    myp5 = new p5(function(p) {\n      p.setup = function() {};\n      p.draw = function() {};\n    });\n  });\n\n  teardown(function() {\n    myp5.remove();\n  });\n\n  suite('createCanvas(w, h, WEBGL)', function() {\n    test('creates a p5.RendererGL renderer', function() {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      assert.instanceOf(myp5._renderer, p5.RendererGL);\n    });\n  });\n\n  suite('default stroke shader', function() {\n    test('check activate and deactivating fill and stroke', function(done) {\n      myp5.noStroke();\n      assert(\n        !myp5._renderer._doStroke,\n        'stroke shader still active after noStroke()'\n      );\n      assert.isTrue(\n        myp5._renderer._doFill,\n        'fill shader deactivated by noStroke()'\n      );\n      myp5.stroke(0);\n      myp5.noFill();\n      assert(\n        myp5._renderer._doStroke,\n        'stroke shader not active after stroke()'\n      );\n      assert.isTrue(\n        !myp5._renderer._doFill,\n        'fill shader still active after noFill()'\n      );\n      done();\n    });\n  });\n\n  suite('push() and pop() work in WEBGL Mode', function() {\n    test('push/pop and translation works as expected in WEBGL Mode', function(done) {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      var modelView = myp5._renderer.uMVMatrix.copy();\n      myp5.push();\n      myp5.rotateX(Math.random(0, 100));\n      myp5.translate(20, 100, 5);\n      assert.notEqual(modelView.mat4, myp5._renderer.uMVMatrix.mat4);\n      myp5.pop();\n      assert.deepEqual(modelView.mat4, myp5._renderer.uMVMatrix.mat4);\n      done();\n    });\n\n    test('push/pop and directionalLight() works', function(done) {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      myp5.directionalLight(255, 0, 0, 0, 0, 0);\n      var dirColors = myp5._renderer.directionalLightColors.slice();\n      var dirLightDirections = myp5._renderer.directionalLightDirections.slice();\n      myp5.push();\n      myp5.directionalLight(0, 0, 255, 0, 10, 5);\n      assert.notEqual(dirColors, myp5._renderer.directionalLightColors);\n      assert.notEqual(\n        dirLightDirections,\n        myp5._renderer.directionalLightDirections\n      );\n      myp5.pop();\n      assert.deepEqual(dirColors, myp5._renderer.directionalLightColors);\n      assert.deepEqual(\n        dirLightDirections,\n        myp5._renderer.directionalLightDirections\n      );\n      done();\n    });\n\n    test('push/pop and ambientLight() works', function(done) {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      myp5.ambientLight(100, 0, 100);\n      myp5.ambientLight(0, 0, 200);\n      var ambColors = myp5._renderer.ambientLightColors.slice();\n      myp5.push();\n      myp5.ambientLight(0, 0, 0);\n      assert.notEqual(ambColors, myp5._renderer.ambientLightColors);\n      myp5.pop();\n      assert.deepEqual(ambColors, myp5._renderer.ambientLightColors);\n      done();\n    });\n\n    test('push/pop and pointLight() works', function(done) {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      myp5.pointLight(255, 0, 0, 0, 0, 0);\n      var pointColors = myp5._renderer.pointLightColors.slice();\n      var pointLocs = myp5._renderer.pointLightPositions.slice();\n      myp5.push();\n      myp5.pointLight(0, 0, 255, 0, 10, 5);\n      assert.notEqual(pointColors, myp5._renderer.pointLightColors);\n      assert.notEqual(pointLocs, myp5._renderer.pointLightPositions);\n      myp5.pop();\n      assert.deepEqual(pointColors, myp5._renderer.pointLightColors);\n      assert.deepEqual(pointLocs, myp5._renderer.pointLightPositions);\n      done();\n    });\n\n    test('push/pop and pointLight() works', function(done) {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      myp5.pointLight(255, 0, 0, 0, 0, 0);\n      var pointColors = myp5._renderer.pointLightColors.slice();\n      var pointLocs = myp5._renderer.pointLightPositions.slice();\n      myp5.push();\n      myp5.pointLight(0, 0, 255, 0, 10, 5);\n      assert.notEqual(pointColors, myp5._renderer.pointLightColors);\n      assert.notEqual(pointLocs, myp5._renderer.pointLightPositions);\n      myp5.pop();\n      assert.deepEqual(pointColors, myp5._renderer.pointLightColors);\n      assert.deepEqual(pointLocs, myp5._renderer.pointLightPositions);\n      done();\n    });\n\n    test('push/pop and texture() works', function(done) {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      var tex1 = myp5.createGraphics(1, 1);\n      myp5.texture(tex1);\n      assert.equal(tex1, myp5._renderer._tex);\n      myp5.push();\n      var tex2 = myp5.createGraphics(2, 2);\n      myp5.texture(tex2);\n      assert.equal(tex2, myp5._renderer._tex);\n      assert.notEqual(tex1, myp5._renderer._tex);\n      myp5.pop();\n      assert.equal(tex1, myp5._renderer._tex);\n      done();\n    });\n\n    test('push/pop and shader() works with fill', function(done) {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      var fillShader1 = myp5._renderer._getLightShader();\n      var fillShader2 = myp5._renderer._getColorShader();\n      myp5.shader(fillShader1);\n      assert.equal(fillShader1, myp5._renderer.userFillShader);\n      myp5.push();\n      myp5.shader(fillShader2);\n      assert.equal(fillShader2, myp5._renderer.userFillShader);\n      assert.notEqual(fillShader1, myp5._renderer.userFillShader);\n      myp5.pop();\n      assert.equal(fillShader1, myp5._renderer.userFillShader);\n      done();\n    });\n\n    test('push/pop builds/unbuilds stack properly', function(done) {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      var col1 = myp5.color(255, 0, 0);\n      var col2 = myp5.color(0, 255, 0);\n      for (var i = 0; i < 10; i++) {\n        myp5.push();\n        if (i % 2 === 0) {\n          myp5.fill(col1);\n        } else {\n          myp5.fill(col2);\n        }\n      }\n      for (var j = i; j > 0; j--) {\n        if (j % 2 === 0) {\n          assert.deepEqual(col2._array, myp5._renderer.curFillColor);\n        } else {\n          assert.deepEqual(col1._array, myp5._renderer.curFillColor);\n        }\n        myp5.pop();\n      }\n      assert.isTrue(myp5._styles.length === 0);\n      done();\n    });\n  });\n\n  suite('loadpixels()', function() {\n    test('loadPixels color check', function(done) {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      myp5.background(0, 100, 0);\n      myp5.loadPixels();\n      var pixels = myp5.pixels;\n      assert.deepEqual(pixels[1], 100);\n      assert.deepEqual(pixels[3], 255);\n      done();\n    });\n\n    test('get() singlePixel color and size, with loadPixels', function(done) {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      myp5.background(100, 115, 100);\n      myp5.loadPixels();\n      var img = myp5.get(0, 0);\n      assert.isTrue(img[1] === 115);\n      assert.isTrue(img.length === 4);\n      done();\n    });\n  });\n\n  suite('get()', function() {\n    var img;\n    test('get() size check', function(done) {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      img = myp5.get();\n      assert.deepEqual(img.width, myp5.width);\n      done();\n    });\n\n    test('get() can create p5.Image', function(done) {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      assert.isTrue(img instanceof p5.Image);\n      done();\n    });\n\n    test('get() singlePixel color and size', function(done) {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      myp5.background(100, 115, 100);\n      img = myp5.get(0, 0);\n      assert.isTrue(img[1] === 115);\n      assert.isTrue(img.length === 4);\n      myp5.loadPixels();\n      img = myp5.get(0, 0);\n      assert.isTrue(img[1] === 115);\n      assert.isTrue(img.length === 4);\n      done();\n    });\n  });\n\n  suite('blendMode()', function() {\n    var testBlend = function(mode, intended) {\n      myp5.blendMode(mode);\n      assert.deepEqual(intended, myp5._renderer.curBlendMode);\n    };\n\n    test('blendMode sets _curBlendMode correctly', function(done) {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      testBlend(myp5.ADD, myp5.ADD);\n      testBlend(myp5.REPLACE, myp5.REPLACE);\n      testBlend(myp5.SUBTRACT, myp5.SUBTRACT);\n      testBlend(myp5.SCREEN, myp5.SCREEN);\n      testBlend(myp5.EXCLUSION, myp5.EXCLUSION);\n      testBlend(myp5.MULTIPLY, myp5.MULTIPLY);\n      testBlend(myp5.LIGHTEST, myp5.LIGHTEST);\n      testBlend(myp5.DARKEST, myp5.DARKEST);\n      done();\n    });\n\n    test('blendMode doesnt change when mode unavailable in 3D', function(done) {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      myp5.blendMode(myp5.DARKEST);\n      testBlend(myp5.BURN, myp5.DARKEST);\n      testBlend(myp5.DODGE, myp5.DARKEST);\n      testBlend(myp5.SOFT_LIGHT, myp5.DARKEST);\n      testBlend(myp5.HARD_LIGHT, myp5.DARKEST);\n      testBlend(myp5.OVERLAY, myp5.DARKEST);\n      done();\n    });\n\n    var mixAndReturn = function(mode, bgCol) {\n      myp5.background(bgCol);\n      myp5.blendMode(mode);\n      myp5.fill(255, 0, 0, 122);\n      myp5.plane(10);\n      myp5.fill(0, 0, 255, 122);\n      myp5.plane(10);\n      return myp5.get(5, 5);\n    };\n\n    test('blendModes change pixel colors as expected', function(done) {\n      myp5.createCanvas(10, 10, myp5.WEBGL);\n      myp5.noStroke();\n      assert.deepEqual([133, 69, 191, 255], mixAndReturn(myp5.ADD, 255));\n      assert.deepEqual([0, 0, 255, 255], mixAndReturn(myp5.REPLACE, 255));\n      assert.deepEqual([133, 255, 133, 255], mixAndReturn(myp5.SUBTRACT, 255));\n      assert.deepEqual([255, 0, 255, 255], mixAndReturn(myp5.SCREEN, 0));\n      assert.deepEqual([0, 255, 0, 255], mixAndReturn(myp5.EXCLUSION, 255));\n      assert.deepEqual([0, 0, 0, 255], mixAndReturn(myp5.MULTIPLY, 255));\n      assert.deepEqual([255, 0, 255, 255], mixAndReturn(myp5.LIGHTEST, 0));\n      assert.deepEqual([0, 0, 0, 255], mixAndReturn(myp5.DARKEST, 255));\n      done();\n    });\n  });\n});\n",
          "filepath": "data/repos/processing/p5.js-0.8/test/unit/webgl/p5.RendererGL.js",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      },
      {
        "id": "1e83de7e-8bff-410f-86be-0e8f6d9b4241",
        "score": 0.015384615384615385,
        "payload": {
          "text": "var img;\nvar tex;\nvar filterShader;\nvar filterNearest = true;\n\nvar vertexShader = `\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\n\nvoid main() {\n  vTexCoord = aTexCoord;\n\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  positionVec4.xy = positionVec4.xy * 2.0 - 1.0;\n\n  gl_Position = positionVec4;\n}`;\n\nvar fragmentShader = `\nprecision mediump float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D uTex0;\n\nvoid main() {\n  vec2 uv = vTexCoord;\n  uv.y = 1.0 - uv.y;\n\n  vec4 tex = texture2D(uTex0, uv);\n\n  gl_FragColor = tex;\n}`;\n\nfunction preload() {\n  img = loadImage('../../assets/cat.jpg');\n}\n\nfunction setup() {\n  let canvas = createCanvas(windowWidth, windowHeight, WEBGL);\n\n  filterShader = createShader(vertexShader, fragmentShader);\n\n  tex = canvas.getTexture(img);\n  tex.setInterpolation(NEAREST, NEAREST);\n}\n\nfunction draw() {\n  background(255);\n\n  shader(filterShader);\n\n  filterShader.setUniform('uTex0', img);\n  rect(0, 0, width, height);\n}\n\nfunction keyPressed() {\n  filterNearest = !filterNearest;\n\n  if (filterNearest) {\n    tex.setInterpolation(NEAREST, NEAREST);\n  } else {\n    tex.setInterpolation(LINEAR, LINEAR);\n  }\n}\n",
          "filepath": "data/repos/processing/p5.js-0.8/test/manual-test-examples/webgl/texture/textureFilter/sketch.js",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1535",
    "model_patch": "diff --git a/marked.js b/marked.js\n--- a/marked.js\n+++ b/marked.js\n@@ -1,6 +1,7 @@\n (function(root) {\n   'use strict';\n \n+  var block = {\n     newline: /^\\n+/,\n     code: /^( {4}[^\\n]+\\n*)+/,\n     fences: noop,\n@@ -8,6 +9,7 @@\n     hr: /^( *[-*_]){3,} *(?:\\n+|$)/,\n     heading: /^ *(#{1,6}) *([^\\n]+?) *#* *(?:\\n+|$)/,\n     nptable: noop,\n+    checkbox: /^\\[([ x])\\] +/,\n     lheading: /^([^\\n]+)\\n *(=|-){2,} *(?:\\n+|$)/,\n     blockquote: /^( *>[^\\n]+(\\n[^\\n]+)*\\n*)+/,\n     list: /^( *)(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n@@ -15,6 +17,7 @@\n     html: '^ *(?:comment *(?:\\\\n|\\\\s*$)'\n       + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)'\n       + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|[^\\'\">])*?> *(?:\\\\n{2,}|\\\\s*$))',\n+    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +[\"(]([^\\n]+)[\")])? *(?:\\n+|$)/,\n     paragraph: /^((?:[^\\n]+\\n?(?!hr|heading|lheading|blockquote|tag|def))+)\\n*/,\n     text: /^[^\\n]+/\n   };\n@@ -22,6 +25,7 @@\n   block.bullet = /(?:[*+-]|\\d+\\.)/;\n   block.item = /^( *)(bull) [^\\n]*(?:\\n(?!\\1bull )[^\\n]*)*/;\n   block.item = replace(block.item, 'gm')\n+    (/bull/g, block.bullet)\n     ();\n \n   block.list = replace(block.list)\n@@ -30,6 +34,7 @@\n     (/def/g, '\\\\n' + block.def.source)\n     ();\n \n+  block._tag = '(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b';\n   block.html = replace(block.html)\n     ('comment', /<!--[\\s\\S]*?-->/)\n     ('tag', block._tag)\n@@ -37,6 +42,7 @@\n \n   block.paragraph = replace(block.paragraph)\n     ('hr', block.hr)\n+    ('heading', block.heading)\n     ('lheading', block.lheading)\n     ('blockquote', block.blockquote)\n     ('tag', '<' + block._tag)\n@@ -44,6 +50,7 @@\n \n   block.normal = merge({}, block);\n \n+  block.gfm = merge({}, block.normal, {\n     fences: /^ *(`{3,}|~{3,})[^\\n]*\\n([\\s\\S]*?)\\s*\\1 *(?:\\n+|$)/,\n     paragraph: /^/\n   });\n@@ -51,6 +58,7 @@\n   block.gfm.paragraph = replace(block.paragraph)\n     ('(?!', '(?!'\n       + block.gfm.fences.source.replace('\\\\1', '\\\\2') + '|'\n+      + block.list.source.replace('\\\\1', '\\\\3') + '|'\n     );\n \n   block.tables = merge({}, block.gfm, {\n@@ -58,6 +66,7 @@\n     nptable: /^ *(\\S.*\\|.*)\\n *([-:]+ *\\|[-| :]*)\\n((?:.*\\|.*(?:\\n|$))*)\\n*/\n   });\n \n+  function Lexer(options) {\n     this.tokens = [];\n     this.tokens.links = {};\n     this.options = options || marked.defaults;\n@@ -65,6 +74,7 @@\n \n   Lexer.rules = block.normal;\n \n+  Lexer.lex = function(src, options) {\n     var lexer = new Lexer(options);\n     return lexer.lex(src);\n   };\n@@ -72,6 +82,7 @@\n   Lexer.prototype.lex = function(src) {\n     src = src\n       .replace(/\\r\\n|\\r/g, '\\n')\n+      .replace(/\\t/g, '    ')\n       .replace(/\\u00a0/g, ' ')\n       .replace(/\\u2424/g, '\\n');\n \n@@ -79,6 +90,7 @@\n     return this.tokens;\n   };\n \n+  Lexer.prototype.token = function(src, top, bq) {\n     src = src.replace(/^ +$/gm, '');\n     var next,\n         loose,\n@@ -86,6 +98,7 @@\n         cap,\n         bull,\n         b,\n+        item,\n         space,\n         i,\n         l;\n@@ -93,6 +106,7 @@\n     while (src) {\n       // newline\n       if (cap = this.rules.newline.exec(src)) {\n+        src = src.substring(cap[0].length);\n         if (cap[0].length > 1) {\n           this.tokens.push({\n             type: 'space'\n@@ -100,6 +114,7 @@\n         }\n       }\n \n+      // code\n       if (cap = this.rules.code.exec(src)) {\n         src = src.substring(cap[0].length);\n         cap = cap[0].replace(/^ {4}/gm, '');\n@@ -107,6 +122,7 @@\n           text: !this.options.pedantic\n             ? cap.replace(/\\n+$/, '')\n             : cap\n+        });\n         continue;\n       }\n \n@@ -114,6 +130,7 @@\n       if (cap = this.rules.fences.exec(src)) {\n         src = src.substring(cap[0].length);\n         this.tokens.push({\n+          type: 'code',\n           lang: cap[2] || '',\n           text: cap[3] || ''\n         });\n@@ -121,6 +138,7 @@\n       }\n \n       // heading\n+      if (cap = this.rules.heading.exec(src)) {\n         src = src.substring(cap[0].length);\n         this.tokens.push({\n           type: 'heading',\n@@ -128,6 +146,7 @@\n           text: cap[2]\n         });\n         continue;\n+      }\n \n       // table no leading pipe (gfm)\n       if (top && (cap = this.rules.nptable.exec(src))) {\n@@ -135,6 +154,7 @@\n         item = {\n           type: 'table',\n           header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n+          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n           cells: cap[3].replace(/\\n$/, '').split('\\n')\n         };\n \n@@ -142,6 +162,7 @@\n         for (i = 0; i < item.align.length; i++) {\n           if (/^ *-+: *$/.test(item.align[i])) {\n             item.align[i] = 'right';\n+          } else if (/^ *:-+: *$/.test(item.align[i])) {\n             item.align[i] = 'center';\n           } else if (/^ *:-+ *$/.test(item.align[i])) {\n             item.align[i] = 'left';\n@@ -149,6 +170,7 @@\n         }\n \n         for (i = 0; i < item.cells.length; i++) {\n+          item.cells[i] = item.cells[i].split(/ *\\| */);\n         }\n \n         this.tokens.push(item);\n@@ -156,6 +178,7 @@\n       }\n \n       // lheading\n+      if (cap = this.rules.lheading.exec(src)) {\n         src = src.substring(cap[0].length);\n         this.tokens.push({\n           type: 'heading',\n@@ -163,6 +186,7 @@\n           text: cap[1]\n         });\n         continue;\n+      }\n \n       // hr\n       if (cap = this.rules.hr.exec(src)) {\n@@ -170,6 +194,7 @@\n         this.tokens.push({\n           type: 'hr'\n         });\n+        continue;\n       }\n \n       // blockquote\n@@ -177,6 +202,7 @@\n         src = src.substring(cap[0].length);\n \n         this.tokens.push({\n+          type: 'blockquote_start'\n         });\n \n         cap = cap[0].replace(/^ *> ?/gm, '');\n@@ -184,6 +210,7 @@\n         this.token(cap, top, true);\n \n         this.tokens.push({\n+          type: 'blockquote_end'\n         });\n \n         continue;\n@@ -191,6 +218,7 @@\n       // list\n       if (cap = this.rules.list.exec(src)) {\n         src = src.substring(cap[0].length);\n+        bull = cap[2];\n \n         this.tokens.push({\n           type: 'list_start',\n@@ -198,6 +226,7 @@\n         });\n \n         cap = cap[0].match(this.rules.item);\n+        next = false;\n         l = cap.length;\n         i = 0;\n \n@@ -205,6 +234,7 @@\n           item = cap[i];\n \n           // Remove the list item's bullet\n+          // so it is seen as the next token.\n           space = item.length;\n           item = item.replace(/^ *([*+-]|\\d+\\.) +/, '');\n \n@@ -212,6 +242,7 @@\n             item = item.replace(/^ {1,4}/gm, '');\n           }\n \n+          // Determine whether the next list item belongs here.\n           // Backpedal if it does not belong in this list.\n           if (this.options.smartLists && i !== l - 1) {\n             b = block.bullet.exec(cap[i + 1])[0];\n@@ -219,6 +250,7 @@\n               src = cap.slice(i + 1).join('\\n') + src;\n               i = l - 1;\n             }\n+          }\n \n           // Determine whether item is loose or not.\n           // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n@@ -226,6 +258,7 @@\n           // for discount behavior.\n           loose = next || /\\n\\n(?!\\s*$)/.test(item);\n           if (i !== l - 1) {\n+            next = item.charAt(item.length - 1) === '\\n';\n             if (!loose) loose = next;\n           }\n \n@@ -233,6 +266,7 @@\n             type: loose\n               ? 'loose_item_start'\n               : 'list_item_start'\n+          });\n \n           // Recurse.\n           this.token(item, false, bq);\n@@ -240,6 +274,7 @@\n           this.tokens.push({\n             type: 'list_item_end'\n           });\n+        }\n \n         this.tokens.push({\n           type: 'list_end'\n@@ -247,6 +282,7 @@\n         continue;\n       }\n \n+      // html\n       if (cap = this.rules.html.exec(src)) {\n         src = src.substring(cap[0].length);\n         this.tokens.push({\n@@ -254,6 +290,7 @@\n           pre: cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'\n         });\n         continue;\n+      }\n \n       // def\n       if ((!bq && top) && (cap = this.rules.def.exec(src))) {\n@@ -261,6 +298,7 @@\n         if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n         this.tokens.links[cap[1].toLowerCase()] = {\n           href: cap[2],\n+          title: cap[3]\n         };\n         continue;\n       }\n@@ -268,6 +306,7 @@\n       // table (gfm)\n       if (top && (cap = this.rules.table.exec(src))) {\n         src = src.substring(cap[0].length);\n+        item = {\n           type: 'table',\n           header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n           align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n@@ -275,6 +314,7 @@\n         };\n \n         for (i = 0; i < item.align.length; i++) {\n+          if (/^ *-+: *$/.test(item.align[i])) {\n             item.align[i] = 'right';\n           } else if (/^ *:-+: *$/.test(item.align[i])) {\n             item.align[i] = 'center';\n@@ -282,6 +322,7 @@\n           } else if (/^ *:-+ *$/.test(item.align[i])) {\n             item.align[i] = 'left';\n           } else {\n+            item.align[i] = null;\n           }\n         }\n \n@@ -289,6 +330,7 @@\n           item.cells[i] = item.cells[i].replace(/^ *\\| *| *\\| *$/g, '').split(/ *\\| */);\n         }\n \n+        this.tokens.push(item);\n         continue;\n       }\n \n@@ -296,6 +338,7 @@\n       if (top && (cap = this.rules.paragraph.exec(src))) {\n         src = src.substring(cap[0].length);\n         this.tokens.push({\n+          type: 'paragraph',\n           text: cap[1].charAt(cap[1].length - 1) === '\\n'\n             ? cap[1].slice(0, -1)\n             : cap[1]\n@@ -303,6 +346,7 @@\n         continue;\n       }\n \n+      // text\n       if (cap = this.rules.text.exec(src)) {\n         // Top-level should never reach here.\n         src = src.substring(cap[0].length);\n@@ -310,6 +354,7 @@\n           type: 'text',\n           text: cap[0]\n         });\n+        continue;\n       }\n \n       if (src) {\n@@ -317,6 +362,7 @@\n         return;\n       }\n     }\n+  };\n \n   function Parser(options) {\n     this.tokens = [];\n@@ -324,6 +370,7 @@\n     this.renderer = this.options.renderer || new Renderer;\n     this.renderer.options = this.options;\n   }\n+  \n   Parser.parse = function(src, options) {\n     var parser = new Parser(options);\n     return parser.parse(src);\n@@ -331,6 +378,7 @@\n   Parser.prototype.parse = function(src) {\n     this.inline = new InlineLexer(src.links, this.options, this.renderer);\n     this.tokens = src.reverse();\n+    var out = '';\n     while (this.next()) {\n       out += this.tok();\n     }\n@@ -338,6 +386,7 @@\n   };\n \n   Parser.prototype.next = function() {\n+    return this.token = this.tokens.pop();\n   };\n \n   Parser.prototype.peek = function() {\n@@ -345,6 +394,7 @@\n   };\n \n   Parser.prototype.parseText = function() {\n+    var body = this.token.text;\n     while (this.peek().type === 'text') {\n       body += '\\n' + this.next().text;\n     }\n@@ -352,6 +402,7 @@\n   };\n \n   Parser.prototype.tok = function() {\n+    switch (this.token.type) {\n       case 'space': {\n         return '';\n       }\n@@ -359,6 +410,7 @@\n       case 'hr': {\n         return this.renderer.hr();\n       }\n+      \n       case 'heading': {\n         return this.renderer.heading(\n           this.inline.output(this.token.text),\n@@ -366,6 +418,7 @@\n           this.token.text\n         );\n       }\n+      \n       case 'code': {\n         return this.renderer.code(this.token.text,\n           this.token.lang,\n@@ -373,6 +426,7 @@\n       }\n \n       case 'table': {\n+        var header = '',\n             body = '',\n             i,\n             row,\n@@ -380,6 +434,7 @@\n             flags,\n             j;\n \n+        // header\n         cell = '';\n         for (i = 0; i < this.token.header.length; i++) {\n           flags = { header: true, align: this.token.align[i] };\n@@ -387,6 +442,7 @@\n         header += this.renderer.tablerow(cell);\n \n         for (i = 0; i < this.token.cells.length; i++) {\n+          row = this.token.cells[i];\n           cell = '';\n           for (j = 0; j < row.length; j++) {\n             flags = { header: false, align: this.token.align[j] };\n@@ -394,6 +450,7 @@\n           body += this.renderer.tablerow(cell);\n         }\n         return this.renderer.table(header, body);\n+      }\n \n       case 'blockquote_start': {\n         body = '';\n@@ -401,6 +458,7 @@\n           body += this.tok();\n         }\n         return this.renderer.blockquote(body);\n+      }\n \n       case 'list_start': {\n         body = '';\n@@ -408,6 +466,7 @@\n           body += this.tok();\n         }\n         return this.renderer.list(body, this.token.ordered, this.token.start);\n+      }\n \n       case 'list_item_start': {\n         body = '';\n@@ -415,6 +474,7 @@\n           body += this.token.checked\n             ? this.renderer.checkbox(this.token.checked) + ' '\n             : '';\n+        }\n         while (this.next().type !== 'list_item_end') {\n           body += this.token.type === 'text'\n             ? this.parseText()\n@@ -422,6 +482,7 @@\n         return this.renderer.listitem(body, this.token.task, this.token.checked);\n       }\n \n+      case 'loose_item_start': {\n         body = '';\n         while (this.next().type !== 'list_item_end') {\n           body += this.tok();\n@@ -429,6 +490,7 @@\n         return this.renderer.listitem(body, this.token.task, this.token.checked);\n       }\n \n+      case 'html': {\n         return !this.token.pre && !this.options.pedantic\n           ? this.inline.output(this.token.text)\n           : this.token.text;\n@@ -436,6 +498,7 @@\n \n       case 'paragraph': {\n         return this.renderer.paragraph(this.inline.output(this.token.text));\n+      }\n \n       case 'text': {\n         return this.renderer.paragraph(this.parseText());",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 166.12,
      "issue_embedding_time_ms": 166.12,
      "retrieval_time_ms_splade": 6.4,
      "retrieval_time_ms": 6.4,
      "total_retrieval_time_ms": 172.52,
      "generation_time_ms": 50783.56,
      "total_io_time_ms": 50956.07,
      "input_total_token_limit": null,
      "issue_text_tokens": 575,
      "vlm_tokens": 0,
      "retrieved_tokens": 4928,
      "prompt_template_tokens": 511,
      "total_input_prompt_tokens": 6014,
      "output_generated_tokens": 4154,
      "total_io_tokens": 10168,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nCheckbox rendering bug\\n**Describe the bug**\\r\\nIf newline exists between checkbox list, it looks like doesn't render well\\r\\n\\r\\n**To Reproduce**\\r\\n```\\r\\n- Tasks\\r\\n- [x] Task1\\r\\n- [ ] Task2\\r\\n\\r\\n- [ ] Another Task\\r\\n\\r\\n```\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/520523/62999436-5f5a1380-bea9-11e9-8b34-c233b31800bf.png)\\r\\n\\r\\n1. [Marked Demo](https://marked.js.org/demo/?text=-%20Tasks%0A-%20%5Bx%5D%20Task1%0A-%20%5B%20%5D%20Task2%0A%0A-%20%5B%20%5D%20Another%20Task%0A&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20false%2C%0A%20%22gfm%22%3A%20true%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=0.7.0)\\r\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/?text=-%20Tasks%0A-%20%5Bx%5D%20Task1%0A-%20%5B%20%5D%20Task2%0A%0A-%20%5B%20%5D%20Another%20Task%0A)\\r\\n\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of marked.js]\\n        return highlight(token.text, token.lang, function(err, code) {\\n          if (err) return done(err);\\n          if (code == null || code === token.text) {\\n            return --pending || done();\\n          }\\n          token.text = code;\\n          token.escaped = true;\\n          --pending || done();\\n        });\\n      })(tokens[i]);\\n    }\\n\\n    return;\\n  }\\n  try {\\n    if (opt) opt = merge({}, marked.defaults, opt);\\n    checkSanitizeDeprecation(opt);\\n    return Parser.parse(Lexer.lex(src, opt), opt);\\n  } catch (e) {\\n    e.message += '\\\\nPlease report this to https://github.com/markedjs/marked.';\\n    if ((opt || marked.defaults).silent) {\\n      return '<p>An error occurred:</p><pre>'\\n        + escape(e.message + '', true)\\n        + '</pre>';\\n    }\\n    throw e;\\n  }\\n}\\n\\n/**\\n * Options\\n */\\n\\nmarked.options =\\nmarked.setOptions = function(opt) {\\n  merge(marked.defaults, opt);\\n  return marked;\\n};\\n\\nmarked.getDefaults = function() {\\n  return {\\n    baseUrl: null,\\n    breaks: false,\\n    gfm: true,\\n    headerIds: true,\\n    headerPrefix: '',\\n    highlight: null,\\n    langPrefix: 'language-',\\n    mangle: true,\\n    pedantic: false,\\n    renderer: new Renderer(),\\n    sanitize: false,\\n    sanitizer: null,\\n    silent: false,\\n    smartLists: false,\\n    smartypants: false,\\n    xhtml: false\\n  };\\n};\\n\\nmarked.defaults = marked.getDefaults();\\n\\n/**\\n * Expose\\n */\\n\\nmarked.Parser = Parser;\\nmarked.parser = Parser.parse;\\n\\nmarked.Renderer = Renderer;\\nmarked.TextRenderer = TextRenderer;\\n\\nmarked.Lexer = Lexer;\\nmarked.lexer = Lexer.lex;\\n\\nmarked.InlineLexer = InlineLexer;\\nmarked.inlineLexer = InlineLexer.output;\\n\\nmarked.Slugger = Slugger;\\n\\nmarked.parse = marked;\\n\\nif (typeof module !== 'undefined' && typeof exports === 'object') {\\n  module.exports = marked;\\n} else if (typeof define === 'function' && define.amd) {\\n  define(function() { return marked; });\\n} else {\\n  root.marked = marked;\\n}\\n})(this || (typeof window !== 'undefined' ? window : global));\\n[end of marked.js]\\n[start of USING_PRO.md]\\n## Extending Marked\\n\\nTo champion the single-responsibility and open/closed prinicples, we have tried to make it relatively painless to extend marked. If you are looking to add custom functionality, this is the place to start.\\n\\n<h2 id=\\\"renderer\\\">The renderer</h2>\\n\\nThe renderer is...\\n\\n**Example:** Overriding default heading token by adding an embedded anchor tag like on GitHub.\\n\\n```js\\n// Create reference instance\\nvar myMarked = require('marked');\\n\\n// Get reference\\nvar renderer = new myMarked.Renderer();\\n\\n// Override function\\nrenderer.heading = function (text, level) {\\n  var escapedText = text.toLowerCase().replace(/[^\\\\w]+/g, '-');\\n\\n  return `\\n          <h${level}>\\n            <a name=\\\"${escapedText}\\\" class=\\\"anchor\\\" href=\\\"#${escapedText}\\\">\\n              <span class=\\\"header-link\\\"></span>\\n            </a>\\n            ${text}\\n          </h${level}>`;\\n};\\n\\n// Run marked\\nconsole.log(myMarked('# heading+', { renderer: renderer }));\\n```\\n\\n**Output:**\\n\\n```html\\n<h1>\\n  <a name=\\\"heading-\\\" class=\\\"anchor\\\" href=\\\"#heading-\\\">\\n    <span class=\\\"header-link\\\"></span>\\n  </a>\\n  heading+\\n</h1>\\n```\\n\\n### Block level renderer methods\\n\\n- code(*string* code, *string* infostring, *boolean* escaped)\\n- blockquote(*string* quote)\\n- html(*string* html)\\n- heading(*string* text, *number* level, *string* raw, *Slugger* slugger)\\n- hr()\\n- list(*string* body, *boolean* ordered, *number* start)\\n- listitem(*string* text, *boolean* task, *boolean* checked)\\n- checkbox(*boolean* checked)\\n- paragraph(*string* text)\\n- table(*string* header, *string* body)\\n- tablerow(*string* content)\\n- tablecell(*string* content, *object* flags)\\n\\n`slugger` has the `slug` method to create an unique id from value:\\n\\n```js\\nslugger.slug('foo')   // foo\\nslugger.slug('foo')   // foo-1\\nslugger.slug('foo')   // foo-2\\nslugger.slug('foo 1') // foo-1-1\\nslugger.slug('foo-1') // foo-1-2\\n...\\n```\\n\\n`flags` has the following properties:\\n\\n```js\\n{\\n    header: true || false,\\n    align: 'center' || 'left' || 'right'\\n}\\n```\\n\\n### Inline level renderer methods\\n\\n- strong(*string* text)\\n- em(*string* text)\\n- codespan(*string* code)\\n- br()\\n- del(*string* text)\\n- link(*string* href, *string* title, *string* text)\\n- image(*string* href, *string* title, *string* text)\\n- text(*string* text)\\n\\n<h2 id=\\\"lexer\\\">The lexer</h2>\\n\\nThe lexer is...\\n\\n\\n<h2 id=\\\"parser\\\">The parser</h2>\\n\\nThe parser is...\\n\\n***\\n\\n<h2 id=\\\"extend\\\">Access to lexer and parser</h2>\\n\\nYou also have direct access to the lexer and parser if you so desire.\\n\\n``` js\\nvar tokens = marked.lexer(text, options);\\nconsole.log(marked.parser(tokens));\\n```\\n\\n``` js\\nvar lexer = new marked.Lexer(options);\\nvar tokens = lexer.lex(text);\\nconsole.log(tokens);\\nconsole.log(lexer.rules);\\n```\\n\\n``` bash\\n$ node\\n> require('marked').lexer('> i am using marked.')\\n[ { type: 'blockquote_start' },\\n  { type: 'paragraph',\\n    text: 'i am using marked.' },\\n  { type: 'blockquote_end' },\\n  links: {} ]\\n```\\n\\nThe Lexers build an array of tokens, which will be passed to their respective\\nParsers. The Parsers process each token in the token arrays,\\nwhich are removed from the array of tokens:\\n\\n``` js\\nconst marked = require('marked');\\n\\nconst md = `\\n  # heading\\n\\n  [link][1]\\n\\n  [1]: #heading \\\"heading\\\"\\n`;\\n\\nconst tokens = marked.lexer(md);\\nconsole.log(tokens);\\n\\nconst html = marked.parser(tokens);\\nconsole.log(html);\\n\\nconsole.log(tokens);\\n```\\n\\n``` bash\\n[ { type: 'heading', depth: 1, text: 'heading' },\\n  { type: 'paragraph', text: '  [link][1]' },\\n  { type: 'space' },\\n  links: { '1': { href: '#heading', title: 'heading' } } ]\\n\\n<h1 id=\\\"heading\\\">heading</h1>\\n<p>  <a href=\\\"#heading\\\" title=\\\"heading\\\">link</a></p>\\n\\n[ links: { '1': { href: '#heading', title: 'heading' } } ]\\n```\\n\\n[end of USING_PRO.md]\\n[start of bench.js]\\nconst path = require('path');\\nconst htmlDiffer = require('./helpers/html-differ.js');\\nconst { loadFiles } = require('./helpers/load.js');\\n\\nlet marked = require('../');\\n\\n/**\\n * Load specs\\n */\\nfunction load() {\\n  const dir = path.resolve(__dirname, './specs/commonmark');\\n  const sections = loadFiles(dir);\\n  let specs = [];\\n\\n  for (const section in sections) {\\n    specs = specs.concat(sections[section].specs);\\n  }\\n\\n  return specs;\\n}\\n\\n/**\\n * Run all benchmarks\\n */\\nfunction runBench(options) {\\n  options = options || {};\\n  const specs = load();\\n\\n  // Non-GFM, Non-pedantic\\n  marked.setOptions({\\n    gfm: false,\\n    breaks: false,\\n    pedantic: false,\\n    sanitize: false,\\n    smartLists: false\\n  });\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked', specs, marked);\\n\\n  // GFM\\n  marked.setOptions({\\n    gfm: true,\\n    breaks: false,\\n    pedantic: false,\\n    sanitize: false,\\n    smartLists: false\\n  });\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked (gfm)', specs, marked);\\n\\n  // Pedantic\\n  marked.setOptions({\\n    gfm: false,\\n    breaks: false,\\n    pedantic: true,\\n    sanitize: false,\\n    smartLists: false\\n  });\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked (pedantic)', specs, marked);\\n\\n  try {\\n    bench('commonmark', specs, (() => {\\n      const commonmark = require('commonmark');\\n      const parser = new commonmark.Parser();\\n      const writer = new commonmark.HtmlRenderer();\\n      return function(text) {\\n        return writer.render(parser.parse(text));\\n      };\\n    })());\\n  } catch (e) {\\n    console.error('Could not bench commonmark. (Error: %s)', e.message);\\n  }\\n\\n  try {\\n    bench('markdown-it', specs, (() => {\\n      const MarkdownIt = require('markdown-it');\\n      const md = new MarkdownIt();\\n      return md.render.bind(md);\\n    })());\\n  } catch (e) {\\n    console.error('Could not bench markdown-it. (Error: %s)', e.message);\\n  }\\n\\n  try {\\n    bench('markdown.js', specs, (() => {\\n      const md = require('markdown').markdown;\\n      return md.toHTML.bind(md);\\n    })());\\n  } catch (e) {\\n    console.error('Could not bench markdown.js. (Error: %s)', e.message);\\n  }\\n}\\n\\nfunction bench(name, specs, engine) {\\n  const before = process.hrtime();\\n  for (let i = 0; i < 1e3; i++) {\\n    for (const spec of specs) {\\n      engine(spec.markdown);\\n    }\\n  }\\n  const elapsed = process.hrtime(before);\\n  const ms = prettyElapsedTime(elapsed).toFixed();\\n\\n  const results = [];\\n  for (const spec of specs) {\\n    results.push({\\n      expected: spec.html,\\n      actual: engine(spec.markdown)\\n    });\\n  }\\n  const correct = results.reduce((num, result) => num + (htmlDiffer.isEqual(result.expected, result.actual) ? 1 : 0), 0);\\n  const percent = (correct / results.length * 100).toFixed(2);\\n\\n  console.log('%s completed in %sms and passed %s%', name, ms, percent);\\n}\\n\\n/**\\n * A simple one-time benchmark\\n */\\nfunction time(options) {\\n  options = options || {};\\n  const specs = load();\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked', specs, marked);\\n}\\n\\n/**\\n * Argument Parsing\\n */\\nfunction parseArg(argv) {\\n  argv = argv.slice(2);\\n\\n  const options = {};\\n  const orphans = [];\\n\\n  function getarg() {\\n    let arg = argv.shift();\\n\\n    if (arg.indexOf('--') === 0) {\\n      // e.g. --opt\\n      arg = arg.split('=');\\n      if (arg.length > 1) {\\n        // e.g. --opt=val\\n        argv.unshift(arg.slice(1).join('='));\\n      }\\n      arg = arg[0];\\n    } else if (arg[0] === '-') {\\n      if (arg.length > 2) {\\n        // e.g. -abc\\n        argv = arg.substring(1).split('').map(ch => {\\n          return `-${ch}`;\\n        }).concat(argv);\\n        arg = argv.shift();\\n      } else {\\n        // e.g. -a\\n      }\\n    } else {\\n      // e.g. foo\\n    }\\n\\n    return arg;\\n  }\\n\\n  const defaults = marked.getDefaults();\\n\\n  while (argv.length) {\\n    const arg = getarg();\\n    switch (arg) {\\n      case '-t':\\n      case '--time':\\n        options.time = true;\\n        break;\\n      case '-m':\\n      case '--minified':\\n        options.minified = true;\\n        break;\\n      default:\\n        if (arg.indexOf('--') === 0) {\\n          const opt = camelize(arg.replace(/^--(no-)?/, ''));\\n          if (!defaults.hasOwnProperty(opt)) {\\n            continue;\\n          }\\n          options.marked = options.marked || {};\\n          if (arg.indexOf('--no-') === 0) {\\n            options.marked[opt] = typeof defaults[opt] !== 'boolean'\\n              ? null\\n              : false;\\n          } else {\\n            options.marked[opt] = typeof defaults[opt] !== 'boolean'\\n              ? argv.shift()\\n              : true;\\n          }\\n        } else {\\n          orphans.push(arg);\\n        }\\n        break;\\n    }\\n  }\\n\\n  if (orphans.length > 0) {\\n    console.error();\\n    console.error('The following arguments are not used:');\\n    orphans.forEach(arg => console.error(`  ${arg}`));\\n    console.error();\\n  }\\n\\n  return options;\\n}\\n\\n/**\\n * Helpers\\n */\\nfunction camelize(text) {\\n  return text.replace(/(\\\\w)-(\\\\w)/g, (_, a, b) => a + b.toUpperCase());\\n}\\n\\n/**\\n * Main\\n */\\nfunction main(argv) {\\n  const opt = parseArg(argv);\\n\\n  if (opt.minified) {\\n    marked = require('../marked.min.js');\\n  }\\n\\n  if (opt.time) {\\n    time(opt);\\n  } else {\\n    runBench(opt);\\n  }\\n}\\n\\n/**\\n * returns time to millisecond granularity\\n */\\nfunction prettyElapsedTime(hrtimeElapsed) {\\n  const seconds = hrtimeElapsed[0];\\n  const frac = Math.round(hrtimeElapsed[1] / 1e3) / 1e3;\\n  return seconds * 1e3 + frac;\\n}\\n\\nif (!module.parent) {\\n  process.title = 'marked bench';\\n  main(process.argv.slice());\\n} else {\\n  exports = main;\\n  exports.main = main;\\n  exports.time = time;\\n  exports.runBench = runBench;\\n  exports.load = load;\\n  exports.bench = bench;\\n  module.exports = exports;\\n}\\n\\n[end of bench.js]\\n[start of USING_ADVANCED.md]\\n## The `marked` function\\n\\n```js\\nmarked(markdownString [,options] [,callback])\\n```\\n\\n|Argument              |Type         |Notes                                                                                                |\\n|:---------------------|:------------|:----------------------------------------------------------------------------------------------------|\\n|markdownString        |`string`     |String of markdown source to be compiled.                                                            |\\n|<a href=\\\"#options\\\">options</a>|`object`|Hash of options. Can also use `marked.setOptions`.                                                |\\n|callback              |`function`   |Called when `markdownString` has been parsed. Can be used as second argument if no `options` present.|\\n\\n### Alternative using reference\\n\\n```js\\n// Create reference instance\\nconst marked = require('marked');\\n\\n// Set options\\n// `highlight` example uses `highlight.js`\\nmarked.setOptions({\\n  renderer: new marked.Renderer(),\\n  highlight: function(code) {\\n    return require('highlight.js').highlightAuto(code).value;\\n  },\\n  pedantic: false,\\n  gfm: true,\\n  breaks: false,\\n  sanitize: false,\\n  smartLists: true,\\n  smartypants: false,\\n  xhtml: false\\n});\\n\\n// Compile\\nconsole.log(marked(markdownString));\\n```\\n\\n<h2 id=\\\"options\\\">Options</h2>\\n\\n|Member      |Type      |Default  |Since    |Notes         |\\n|:-----------|:---------|:--------|:--------|:-------------|\\n|baseUrl     |`string`  |`null`   |0.3.9    |A prefix url for any relative link. |  \\n|breaks      |`boolean` |`false`  |v0.2.7   |If true, add `<br>` on a single line break (copies GitHub). Requires `gfm` be `true`.|\\n|gfm         |`boolean` |`true`   |v0.2.1   |If true, use approved [GitHub Flavored Markdown (GFM) specification](https://github.github.com/gfm/).|\\n|headerIds   |`boolean` |`true`   |v0.4.0   |If true, include an `id` attribute when emitting headings (h1, h2, h3, etc).|\\n|headerPrefix|`string`  |`''`     |v0.3.0   |A string to prefix the `id` attribute when emitting headings (h1, h2, h3, etc).|\\n|highlight   |`function`|`null`   |v0.3.0   |A function to highlight code blocks, see <a href=\\\"#highlight\\\">Asynchronous highlighting</a>.|\\n|langPrefix  |`string`  |`'language-'`|v0.3.0|A string to prefix the className in a `<code>` block. Useful for syntax highlighting.|\\n|mangle      |`boolean` |`true`   |v0.3.4   |If true, autolinked email address is escaped with HTML character references.|\\n|pedantic    |`boolean` |`false`  |v0.2.1   |If true, conform to the original `markdown.pl` as much as possible. Don't fix original markdown bugs or behavior. Turns off and overrides `gfm`.|\\n|renderer    |`object`  |`new Renderer()`|v0.3.0|An object containing functions to render tokens to HTML. See [extensibility](USING_PRO.md) for more details.|\\n|sanitize    |`boolean` |`false`  |v0.2.1   |If true, sanitize the HTML passed into `markdownString` with the `sanitizer` function.<br>**Warning**: This feature is deprecated and it should NOT be used as it cannot be considered secure.<br>Instead use a sanitize library, like [DOMPurify](https://github.com/cure53/DOMPurify) (recommended), [sanitize-html](https://github.com/apostrophecms/sanitize-html) or [insane](https://github.com/bevacqua/insane) on the output HTML! |\\n|sanitizer   |`function`|`null`   |v0.3.4   |A function to sanitize the HTML passed into `markdownString`.|\\n|silent      |`boolean` |`false`  |v0.2.7   |If true, the parser does not throw any exception.|\\n|smartLists  |`boolean` |`false`  |v0.2.8   |If true, use smarter list behavior than those found in `markdown.pl`.|\\n|smartypants |`boolean` |`false`  |v0.2.9   |If true, use \\\"smart\\\" typographic punctuation for things like quotes and dashes.|\\n|xhtml       |`boolean` |`false`  |v0.3.2   |If true, emit self-closing HTML tags for void elements (&lt;br/&gt;, &lt;img/&gt;, etc.) with a \\\"/\\\" as required by XHTML.|\\n\\n<h2 id=\\\"highlight\\\">Asynchronous highlighting</h2>\\n\\nUnlike `highlight.js` the `pygmentize.js` library uses asynchronous highlighting. This example demonstrates that marked is agnostic when it comes to the highlighter you use.\\n\\n```js\\nmarked.setOptions({\\n  highlight: function(code, lang, callback) {\\n    require('pygmentize-bundled') ({ lang: lang, format: 'html' }, code, function (err, result) {\\n      callback(err, result.toString());\\n    });\\n  }\\n});\\n\\nconsole.log(marked(markdownString));\\n```\\n\\nIn both examples, `code` is a `string` representing the section of code to pass to the highlighter. In this example, `lang` is a `string` informing the highlighter what programming lnaguage to use for the `code` and `callback` is the `function` the asynchronous highlighter will call once complete.\\n\\n<h2 id=\\\"workers\\\">Workers</h2>\\n\\nTo prevent ReDoS attacks you can run marked on a worker and terminate it when parsing takes longer than usual.\\n\\nMarked can be run in a [worker thread](https://nodejs.org/api/worker_threads.html) on a node server, or a [web worker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) in a browser.\\n\\n### Node Worker Thread\\n\\n> \\ud83d\\udea8 Node Worker Threads are [experimental](https://nodejs.org/api/worker_threads.html#worker_threads_worker_threads) \\ud83d\\udea8\\n>\\n> This implementation may change.\\n\\n```js\\n// markedWorker.js\\n\\nconst marked = require('marked');\\nconst { parentPort } = require('worker_threads');\\n\\nparentPort.on('message', (markdownString) => {\\n  parentPort.postMessage(marked(markdownString));\\n});\\n```\\n\\n```js\\n// index.js\\n\\nconst { Worker } = require('worker_threads');\\nconst markedWorker = new Worker('./markedWorker.js');\\n\\nconst markedTimeout = setTimeout(() => {\\n  markedWorker.terminate();\\n  throw new Error('Marked took too long!');\\n}, timeoutLimit);\\n\\nmarkedWorker.on('message', (html) => {\\n  clearTimeout(markedTimeout);\\n  console.log(html);\\n  markedWorker.terminate();\\n});\\n\\nmarkedWorker.postMessage(markdownString);\\n```\\n\\n### Web Worker\\n\\n> **NOTE**: Web Workers send the payload from `postMessage` in an object with the payload in a `.data` property\\n\\n```js\\n// markedWorker.js\\n\\nimportScripts('path/to/marked.min.js');\\n\\nonmessage = (e) => {\\n  const markdownString = e.data\\n  postMessage(marked(markdownString));\\n};\\n```\\n\\n```js\\n// script.js\\n\\nconst markedWorker = new Worker('./markedWorker.js');\\n\\nconst markedTimeout = setTimeout(() => {\\n  markedWorker.terminate();\\n  throw new Error('Marked took too long!');\\n}, timeoutLimit);\\n\\nmarkedWorker.onmessage = (e) => {\\n  clearTimeout(markedTimeout);\\n  const html = e.data;\\n  console.log(html);\\n  markedWorker.terminate();\\n};\\n\\nmarkedWorker.postMessage(markdownString);\\n```\\n\\n[end of USING_ADVANCED.md]\\n[start of Bug_report.md]\\n---\\nname: Bug report\\nabout: Marked says it does this thing but does not\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior:\\n\\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\\n<!--\\n1. [Marked Demo](https://marked.js.org/demo/)\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\\n-->\\n\\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\\n<!--\\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\\n3. Actual output (or error) is...\\n-->\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n[end of Bug_report.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "marked.js",
        "USING_PRO.md",
        "bench.js",
        "USING_ADVANCED.md",
        "Bug_report.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "8b06ac7a-f1b3-45aa-a710-fb5f439cc8bf",
        "score": 0.01639344262295082,
        "payload": {
          "text": "        return highlight(token.text, token.lang, function(err, code) {\n          if (err) return done(err);\n          if (code == null || code === token.text) {\n            return --pending || done();\n          }\n          token.text = code;\n          token.escaped = true;\n          --pending || done();\n        });\n      })(tokens[i]);\n    }\n\n    return;\n  }\n  try {\n    if (opt) opt = merge({}, marked.defaults, opt);\n    checkSanitizeDeprecation(opt);\n    return Parser.parse(Lexer.lex(src, opt), opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if ((opt || marked.defaults).silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  return marked;\n};\n\nmarked.getDefaults = function() {\n  return {\n    baseUrl: null,\n    breaks: false,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: new Renderer(),\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartLists: false,\n    smartypants: false,\n    xhtml: false\n  };\n};\n\nmarked.defaults = marked.getDefaults();\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Renderer = Renderer;\nmarked.TextRenderer = TextRenderer;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.InlineLexer = InlineLexer;\nmarked.inlineLexer = InlineLexer.output;\n\nmarked.Slugger = Slugger;\n\nmarked.parse = marked;\n\nif (typeof module !== 'undefined' && typeof exports === 'object') {\n  module.exports = marked;\n} else if (typeof define === 'function' && define.amd) {\n  define(function() { return marked; });\n} else {\n  root.marked = marked;\n}\n})(this || (typeof window !== 'undefined' ? window : global));",
          "filepath": "data/repos/markedjs/marked-0.7/lib/marked.js",
          "repo": "markedjs/marked",
          "version": "0.7",
          "chunk_index": 2
        }
      },
      {
        "id": "52028056-8ab6-42f0-b57c-d7e5bdfa449a",
        "score": 0.016129032258064516,
        "payload": {
          "text": "## Extending Marked\n\nTo champion the single-responsibility and open/closed prinicples, we have tried to make it relatively painless to extend marked. If you are looking to add custom functionality, this is the place to start.\n\n<h2 id=\"renderer\">The renderer</h2>\n\nThe renderer is...\n\n**Example:** Overriding default heading token by adding an embedded anchor tag like on GitHub.\n\n```js\n// Create reference instance\nvar myMarked = require('marked');\n\n// Get reference\nvar renderer = new myMarked.Renderer();\n\n// Override function\nrenderer.heading = function (text, level) {\n  var escapedText = text.toLowerCase().replace(/[^\\w]+/g, '-');\n\n  return `\n          <h${level}>\n            <a name=\"${escapedText}\" class=\"anchor\" href=\"#${escapedText}\">\n              <span class=\"header-link\"></span>\n            </a>\n            ${text}\n          </h${level}>`;\n};\n\n// Run marked\nconsole.log(myMarked('# heading+', { renderer: renderer }));\n```\n\n**Output:**\n\n```html\n<h1>\n  <a name=\"heading-\" class=\"anchor\" href=\"#heading-\">\n    <span class=\"header-link\"></span>\n  </a>\n  heading+\n</h1>\n```\n\n### Block level renderer methods\n\n- code(*string* code, *string* infostring, *boolean* escaped)\n- blockquote(*string* quote)\n- html(*string* html)\n- heading(*string* text, *number* level, *string* raw, *Slugger* slugger)\n- hr()\n- list(*string* body, *boolean* ordered, *number* start)\n- listitem(*string* text, *boolean* task, *boolean* checked)\n- checkbox(*boolean* checked)\n- paragraph(*string* text)\n- table(*string* header, *string* body)\n- tablerow(*string* content)\n- tablecell(*string* content, *object* flags)\n\n`slugger` has the `slug` method to create an unique id from value:\n\n```js\nslugger.slug('foo')   // foo\nslugger.slug('foo')   // foo-1\nslugger.slug('foo')   // foo-2\nslugger.slug('foo 1') // foo-1-1\nslugger.slug('foo-1') // foo-1-2\n...\n```\n\n`flags` has the following properties:\n\n```js\n{\n    header: true || false,\n    align: 'center' || 'left' || 'right'\n}\n```\n\n### Inline level renderer methods\n\n- strong(*string* text)\n- em(*string* text)\n- codespan(*string* code)\n- br()\n- del(*string* text)\n- link(*string* href, *string* title, *string* text)\n- image(*string* href, *string* title, *string* text)\n- text(*string* text)\n\n<h2 id=\"lexer\">The lexer</h2>\n\nThe lexer is...\n\n\n<h2 id=\"parser\">The parser</h2>\n\nThe parser is...\n\n***\n\n<h2 id=\"extend\">Access to lexer and parser</h2>\n\nYou also have direct access to the lexer and parser if you so desire.\n\n``` js\nvar tokens = marked.lexer(text, options);\nconsole.log(marked.parser(tokens));\n```\n\n``` js\nvar lexer = new marked.Lexer(options);\nvar tokens = lexer.lex(text);\nconsole.log(tokens);\nconsole.log(lexer.rules);\n```\n\n``` bash\n$ node\n> require('marked').lexer('> i am using marked.')\n[ { type: 'blockquote_start' },\n  { type: 'paragraph',\n    text: 'i am using marked.' },\n  { type: 'blockquote_end' },\n  links: {} ]\n```\n\nThe Lexers build an array of tokens, which will be passed to their respective\nParsers. The Parsers process each token in the token arrays,\nwhich are removed from the array of tokens:\n\n``` js\nconst marked = require('marked');\n\nconst md = `\n  # heading\n\n  [link][1]\n\n  [1]: #heading \"heading\"\n`;\n\nconst tokens = marked.lexer(md);\nconsole.log(tokens);\n\nconst html = marked.parser(tokens);\nconsole.log(html);\n\nconsole.log(tokens);\n```\n\n``` bash\n[ { type: 'heading', depth: 1, text: 'heading' },\n  { type: 'paragraph', text: '  [link][1]' },\n  { type: 'space' },\n  links: { '1': { href: '#heading', title: 'heading' } } ]\n\n<h1 id=\"heading\">heading</h1>\n<p>  <a href=\"#heading\" title=\"heading\">link</a></p>\n\n[ links: { '1': { href: '#heading', title: 'heading' } } ]\n```\n",
          "filepath": "data/repos/markedjs/marked-0.7/docs/USING_PRO.md",
          "repo": "markedjs/marked",
          "version": "0.7",
          "chunk_index": 0
        }
      },
      {
        "id": "c5f3c0bf-ad7f-44f0-8487-ed06acaa1bf9",
        "score": 0.015873015873015872,
        "payload": {
          "text": "const path = require('path');\nconst htmlDiffer = require('./helpers/html-differ.js');\nconst { loadFiles } = require('./helpers/load.js');\n\nlet marked = require('../');\n\n/**\n * Load specs\n */\nfunction load() {\n  const dir = path.resolve(__dirname, './specs/commonmark');\n  const sections = loadFiles(dir);\n  let specs = [];\n\n  for (const section in sections) {\n    specs = specs.concat(sections[section].specs);\n  }\n\n  return specs;\n}\n\n/**\n * Run all benchmarks\n */\nfunction runBench(options) {\n  options = options || {};\n  const specs = load();\n\n  // Non-GFM, Non-pedantic\n  marked.setOptions({\n    gfm: false,\n    breaks: false,\n    pedantic: false,\n    sanitize: false,\n    smartLists: false\n  });\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked', specs, marked);\n\n  // GFM\n  marked.setOptions({\n    gfm: true,\n    breaks: false,\n    pedantic: false,\n    sanitize: false,\n    smartLists: false\n  });\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked (gfm)', specs, marked);\n\n  // Pedantic\n  marked.setOptions({\n    gfm: false,\n    breaks: false,\n    pedantic: true,\n    sanitize: false,\n    smartLists: false\n  });\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked (pedantic)', specs, marked);\n\n  try {\n    bench('commonmark', specs, (() => {\n      const commonmark = require('commonmark');\n      const parser = new commonmark.Parser();\n      const writer = new commonmark.HtmlRenderer();\n      return function(text) {\n        return writer.render(parser.parse(text));\n      };\n    })());\n  } catch (e) {\n    console.error('Could not bench commonmark. (Error: %s)', e.message);\n  }\n\n  try {\n    bench('markdown-it', specs, (() => {\n      const MarkdownIt = require('markdown-it');\n      const md = new MarkdownIt();\n      return md.render.bind(md);\n    })());\n  } catch (e) {\n    console.error('Could not bench markdown-it. (Error: %s)', e.message);\n  }\n\n  try {\n    bench('markdown.js', specs, (() => {\n      const md = require('markdown').markdown;\n      return md.toHTML.bind(md);\n    })());\n  } catch (e) {\n    console.error('Could not bench markdown.js. (Error: %s)', e.message);\n  }\n}\n\nfunction bench(name, specs, engine) {\n  const before = process.hrtime();\n  for (let i = 0; i < 1e3; i++) {\n    for (const spec of specs) {\n      engine(spec.markdown);\n    }\n  }\n  const elapsed = process.hrtime(before);\n  const ms = prettyElapsedTime(elapsed).toFixed();\n\n  const results = [];\n  for (const spec of specs) {\n    results.push({\n      expected: spec.html,\n      actual: engine(spec.markdown)\n    });\n  }\n  const correct = results.reduce((num, result) => num + (htmlDiffer.isEqual(result.expected, result.actual) ? 1 : 0), 0);\n  const percent = (correct / results.length * 100).toFixed(2);\n\n  console.log('%s completed in %sms and passed %s%', name, ms, percent);\n}\n\n/**\n * A simple one-time benchmark\n */\nfunction time(options) {\n  options = options || {};\n  const specs = load();\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked', specs, marked);\n}\n\n/**\n * Argument Parsing\n */\nfunction parseArg(argv) {\n  argv = argv.slice(2);\n\n  const options = {};\n  const orphans = [];\n\n  function getarg() {\n    let arg = argv.shift();\n\n    if (arg.indexOf('--') === 0) {\n      // e.g. --opt\n      arg = arg.split('=');\n      if (arg.length > 1) {\n        // e.g. --opt=val\n        argv.unshift(arg.slice(1).join('='));\n      }\n      arg = arg[0];\n    } else if (arg[0] === '-') {\n      if (arg.length > 2) {\n        // e.g. -abc\n        argv = arg.substring(1).split('').map(ch => {\n          return `-${ch}`;\n        }).concat(argv);\n        arg = argv.shift();\n      } else {\n        // e.g. -a\n      }\n    } else {\n      // e.g. foo\n    }\n\n    return arg;\n  }\n\n  const defaults = marked.getDefaults();\n\n  while (argv.length) {\n    const arg = getarg();\n    switch (arg) {\n      case '-t':\n      case '--time':\n        options.time = true;\n        break;\n      case '-m':\n      case '--minified':\n        options.minified = true;\n        break;\n      default:\n        if (arg.indexOf('--') === 0) {\n          const opt = camelize(arg.replace(/^--(no-)?/, ''));\n          if (!defaults.hasOwnProperty(opt)) {\n            continue;\n          }\n          options.marked = options.marked || {};\n          if (arg.indexOf('--no-') === 0) {\n            options.marked[opt] = typeof defaults[opt] !== 'boolean'\n              ? null\n              : false;\n          } else {\n            options.marked[opt] = typeof defaults[opt] !== 'boolean'\n              ? argv.shift()\n              : true;\n          }\n        } else {\n          orphans.push(arg);\n        }\n        break;\n    }\n  }\n\n  if (orphans.length > 0) {\n    console.error();\n    console.error('The following arguments are not used:');\n    orphans.forEach(arg => console.error(`  ${arg}`));\n    console.error();\n  }\n\n  return options;\n}\n\n/**\n * Helpers\n */\nfunction camelize(text) {\n  return text.replace(/(\\w)-(\\w)/g, (_, a, b) => a + b.toUpperCase());\n}\n\n/**\n * Main\n */\nfunction main(argv) {\n  const opt = parseArg(argv);\n\n  if (opt.minified) {\n    marked = require('../marked.min.js');\n  }\n\n  if (opt.time) {\n    time(opt);\n  } else {\n    runBench(opt);\n  }\n}\n\n/**\n * returns time to millisecond granularity\n */\nfunction prettyElapsedTime(hrtimeElapsed) {\n  const seconds = hrtimeElapsed[0];\n  const frac = Math.round(hrtimeElapsed[1] / 1e3) / 1e3;\n  return seconds * 1e3 + frac;\n}\n\nif (!module.parent) {\n  process.title = 'marked bench';\n  main(process.argv.slice());\n} else {\n  exports = main;\n  exports.main = main;\n  exports.time = time;\n  exports.runBench = runBench;\n  exports.load = load;\n  exports.bench = bench;\n  module.exports = exports;\n}\n",
          "filepath": "data/repos/markedjs/marked-0.7/test/bench.js",
          "repo": "markedjs/marked",
          "version": "0.7",
          "chunk_index": 0
        }
      },
      {
        "id": "db90500a-9625-4d7b-827d-4240894f7084",
        "score": 0.015625,
        "payload": {
          "text": "## The `marked` function\n\n```js\nmarked(markdownString [,options] [,callback])\n```\n\n|Argument              |Type         |Notes                                                                                                |\n|:---------------------|:------------|:----------------------------------------------------------------------------------------------------|\n|markdownString        |`string`     |String of markdown source to be compiled.                                                            |\n|<a href=\"#options\">options</a>|`object`|Hash of options. Can also use `marked.setOptions`.                                                |\n|callback              |`function`   |Called when `markdownString` has been parsed. Can be used as second argument if no `options` present.|\n\n### Alternative using reference\n\n```js\n// Create reference instance\nconst marked = require('marked');\n\n// Set options\n// `highlight` example uses `highlight.js`\nmarked.setOptions({\n  renderer: new marked.Renderer(),\n  highlight: function(code) {\n    return require('highlight.js').highlightAuto(code).value;\n  },\n  pedantic: false,\n  gfm: true,\n  breaks: false,\n  sanitize: false,\n  smartLists: true,\n  smartypants: false,\n  xhtml: false\n});\n\n// Compile\nconsole.log(marked(markdownString));\n```\n\n<h2 id=\"options\">Options</h2>\n\n|Member      |Type      |Default  |Since    |Notes         |\n|:-----------|:---------|:--------|:--------|:-------------|\n|baseUrl     |`string`  |`null`   |0.3.9    |A prefix url for any relative link. |  \n|breaks      |`boolean` |`false`  |v0.2.7   |If true, add `<br>` on a single line break (copies GitHub). Requires `gfm` be `true`.|\n|gfm         |`boolean` |`true`   |v0.2.1   |If true, use approved [GitHub Flavored Markdown (GFM) specification](https://github.github.com/gfm/).|\n|headerIds   |`boolean` |`true`   |v0.4.0   |If true, include an `id` attribute when emitting headings (h1, h2, h3, etc).|\n|headerPrefix|`string`  |`''`     |v0.3.0   |A string to prefix the `id` attribute when emitting headings (h1, h2, h3, etc).|\n|highlight   |`function`|`null`   |v0.3.0   |A function to highlight code blocks, see <a href=\"#highlight\">Asynchronous highlighting</a>.|\n|langPrefix  |`string`  |`'language-'`|v0.3.0|A string to prefix the className in a `<code>` block. Useful for syntax highlighting.|\n|mangle      |`boolean` |`true`   |v0.3.4   |If true, autolinked email address is escaped with HTML character references.|\n|pedantic    |`boolean` |`false`  |v0.2.1   |If true, conform to the original `markdown.pl` as much as possible. Don't fix original markdown bugs or behavior. Turns off and overrides `gfm`.|\n|renderer    |`object`  |`new Renderer()`|v0.3.0|An object containing functions to render tokens to HTML. See [extensibility](USING_PRO.md) for more details.|\n|sanitize    |`boolean` |`false`  |v0.2.1   |If true, sanitize the HTML passed into `markdownString` with the `sanitizer` function.<br>**Warning**: This feature is deprecated and it should NOT be used as it cannot be considered secure.<br>Instead use a sanitize library, like [DOMPurify](https://github.com/cure53/DOMPurify) (recommended), [sanitize-html](https://github.com/apostrophecms/sanitize-html) or [insane](https://github.com/bevacqua/insane) on the output HTML! |\n|sanitizer   |`function`|`null`   |v0.3.4   |A function to sanitize the HTML passed into `markdownString`.|\n|silent      |`boolean` |`false`  |v0.2.7   |If true, the parser does not throw any exception.|\n|smartLists  |`boolean` |`false`  |v0.2.8   |If true, use smarter list behavior than those found in `markdown.pl`.|\n|smartypants |`boolean` |`false`  |v0.2.9   |If true, use \"smart\" typographic punctuation for things like quotes and dashes.|\n|xhtml       |`boolean` |`false`  |v0.3.2   |If true, emit self-closing HTML tags for void elements (&lt;br/&gt;, &lt;img/&gt;, etc.) with a \"/\" as required by XHTML.|\n\n<h2 id=\"highlight\">Asynchronous highlighting</h2>\n\nUnlike `highlight.js` the `pygmentize.js` library uses asynchronous highlighting. This example demonstrates that marked is agnostic when it comes to the highlighter you use.\n\n```js\nmarked.setOptions({\n  highlight: function(code, lang, callback) {\n    require('pygmentize-bundled') ({ lang: lang, format: 'html' }, code, function (err, result) {\n      callback(err, result.toString());\n    });\n  }\n});\n\nconsole.log(marked(markdownString));\n```\n\nIn both examples, `code` is a `string` representing the section of code to pass to the highlighter. In this example, `lang` is a `string` informing the highlighter what programming lnaguage to use for the `code` and `callback` is the `function` the asynchronous highlighter will call once complete.\n\n<h2 id=\"workers\">Workers</h2>\n\nTo prevent ReDoS attacks you can run marked on a worker and terminate it when parsing takes longer than usual.\n\nMarked can be run in a [worker thread](https://nodejs.org/api/worker_threads.html) on a node server, or a [web worker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) in a browser.\n\n### Node Worker Thread\n\n> \ud83d\udea8 Node Worker Threads are [experimental](https://nodejs.org/api/worker_threads.html#worker_threads_worker_threads) \ud83d\udea8\n>\n> This implementation may change.\n\n```js\n// markedWorker.js\n\nconst marked = require('marked');\nconst { parentPort } = require('worker_threads');\n\nparentPort.on('message', (markdownString) => {\n  parentPort.postMessage(marked(markdownString));\n});\n```\n\n```js\n// index.js\n\nconst { Worker } = require('worker_threads');\nconst markedWorker = new Worker('./markedWorker.js');\n\nconst markedTimeout = setTimeout(() => {\n  markedWorker.terminate();\n  throw new Error('Marked took too long!');\n}, timeoutLimit);\n\nmarkedWorker.on('message', (html) => {\n  clearTimeout(markedTimeout);\n  console.log(html);\n  markedWorker.terminate();\n});\n\nmarkedWorker.postMessage(markdownString);\n```\n\n### Web Worker\n\n> **NOTE**: Web Workers send the payload from `postMessage` in an object with the payload in a `.data` property\n\n```js\n// markedWorker.js\n\nimportScripts('path/to/marked.min.js');\n\nonmessage = (e) => {\n  const markdownString = e.data\n  postMessage(marked(markdownString));\n};\n```\n\n```js\n// script.js\n\nconst markedWorker = new Worker('./markedWorker.js');\n\nconst markedTimeout = setTimeout(() => {\n  markedWorker.terminate();\n  throw new Error('Marked took too long!');\n}, timeoutLimit);\n\nmarkedWorker.onmessage = (e) => {\n  clearTimeout(markedTimeout);\n  const html = e.data;\n  console.log(html);\n  markedWorker.terminate();\n};\n\nmarkedWorker.postMessage(markdownString);\n```\n",
          "filepath": "data/repos/markedjs/marked-0.7/docs/USING_ADVANCED.md",
          "repo": "markedjs/marked",
          "version": "0.7",
          "chunk_index": 0
        }
      },
      {
        "id": "e773799a-7d26-4c42-ac0f-6f070a5041ba",
        "score": 0.015384615384615385,
        "payload": {
          "text": "---\nname: Bug report\nabout: Marked says it does this thing but does not\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\n<!--\n1. [Marked Demo](https://marked.js.org/demo/)\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\n-->\n\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\n<!--\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\n3. Actual output (or error) is...\n-->\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n",
          "filepath": "data/repos/markedjs/marked-0.7/.github/ISSUE_TEMPLATE/Bug_report.md",
          "repo": "markedjs/marked",
          "version": "0.7",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1889",
    "model_patch": "diff --git a/src/Lexer.js b/src/Lexer.js\n--- a/src/Lexer.js\n+++ b/src/Lexer.js\n@@ -120,7 +120,11 @@\n   blockTokens(src, tokens = []) {\n     let token, lastToken, cutSrc, lastParagraphClipped;\n     while (src) {\n-      src = src.replace(/^ +$/gm, '');\n+      // Remove leading and trailing empty lines, but preserve lines with only spaces in code blocks\n+      if (!this.options.preserveSpaceLines) {\n+        src = src.replace(/^ +$/gm, '');\n+      }\n+\n       if (this.options.extensions\n         && this.options.extensions.block\n         && this.options.extensions.block.some((extTokenizer) => {\ndiff --git a/src/defaults.js b/src/defaults.js\n--- a/src/defaults.js\n+++ b/src/defaults.js\n@@ -16,6 +16,7 @@\n     renderer: null,\n     sanitize: false,\n     sanitizer: null,\n+    preserveSpaceLines: false,\n     silent: false,\n     smartLists: false,\n     smartypants: false,",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 165.96,
      "issue_embedding_time_ms": 165.96,
      "retrieval_time_ms_splade": 10.0,
      "retrieval_time_ms": 10.0,
      "total_retrieval_time_ms": 175.97,
      "generation_time_ms": 3437.81,
      "total_io_time_ms": 3613.78,
      "input_total_token_limit": null,
      "issue_text_tokens": 811,
      "vlm_tokens": 0,
      "retrieved_tokens": 10295,
      "prompt_template_tokens": 519,
      "total_input_prompt_tokens": 11625,
      "output_generated_tokens": 244,
      "total_io_tokens": 11869,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nLines with only spaces are removed, even in code blocks\\n**Describe the bug**\\r\\n\\r\\nSpaces are removed from lines with *only* spaces. Though this might make some kind of sense for normal markdown, in code blocks it could be a problem in some esoteric programming languages such as whitespace but, perhaps more importantly, in real-time editing situations which is how it effects my use case.\\r\\n\\r\\n**To Reproduce**\\r\\n\\r\\n- [Marked Demo](https://marked.js.org/demo/?outputType=lexer&text=%60%60%60%0AThis%0A%20%20%20%20%20%20%0ATest%0A%20%20.%0A%60%60%60&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20false%2C%0A%20%22gfm%22%3A%20true%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22walkTokens%22%3A%20null%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=master)  (Issue)\\r\\n  ![image](https://user-images.githubusercontent.com/1341861/102939920-2b1f3b80-447d-11eb-85aa-bb56649cd0e8.png)\\r\\n\\r\\n- [CommonMark Demo](https://spec.commonmark.org/dingus/?text=%60%60%60%0AThis%0A%20%20%20%20%20%20%20%0Atest%0A%20%20.%0A%60%60%60)  (Works as anticipated)\\r\\n\\r\\nThis caught me off guard because when I tried to fix it by extending the marked tokenizer, I found that the spaces were removed even there!\\r\\n\\r\\n```js\\r\\n[\\r\\n  {type:\\\"code\\\", raw:\\\"```\\\\nThis\\\\n\\\\nTest\\\\n  .\\\\n```\\\", lang:\\\"\\\", text:\\\"This\\\\n\\\\nTest\\\\n  .\\\"}\\r\\n  //                           ^^^\\r\\n]\\r\\n```\\r\\n\\r\\nThe problem is the first line of the lexer `blockTokens` function:\\r\\nhttps://github.com/markedjs/marked/blob/c8783a3c1087c5a899ea6c1b96eb8a8e89fcd739/src/Lexer.js#L123\\r\\n\\r\\nIn my project I was forced to override the whole `blockTokens` function removing the first line. What would be the repercussions of removing it in general? Alternatively this could be an option..\\r\\n\\r\\nThanks for the great library!\\n\\n</issue>\\n\\n<code>\\n[start of quickref.md]\\nMarkdown Quick Reference\\n========================\\n\\nThis guide is a very brief overview, with examples, of the syntax that [Markdown] supports. It is itself written in Markdown and you can copy the samples over to the left-hand pane for experimentation. It's shown as *text* and not *rendered HTML*.\\n\\n[Markdown]: http://daringfireball.net/projects/markdown/\\n\\n\\nSimple Text Formatting\\n======================\\n\\nFirst thing is first. You can use *stars* or _underscores_ for italics. **Double stars** and __double underscores__ for bold. ***Three together*** for ___both___.\\n\\nParagraphs are pretty easy too. Just have a blank line between chunks of text.\\n\\n> This chunk of text is in a block quote. Its multiple lines will all be\\n> indented a bit from the rest of the text.\\n>\\n> > Multiple levels of block quotes also work.\\n\\nSometimes you want to include code, such as when you are explaining how `<h1>` HTML tags work, or maybe you are a programmer and you are discussing `someMethod()`.\\n\\nIf you want to include code and have new\\nlines preserved, indent the line with a tab\\nor at least four spaces:\\n\\n    Extra spaces work here too.\\n    This is also called preformatted text and it is useful for showing examples.\\n    The text will stay as text, so any *markdown* or <u>HTML</u> you add will\\n    not show up formatted. This way you can show markdown examples in a\\n    markdown document.\\n\\n>     You can also use preformatted text with your blockquotes\\n>     as long as you add at least five spaces.\\n\\n\\nHeadings\\n========\\n\\nThere are a couple of ways to make headings. Using three or more equals signs on a line under a heading makes it into an \\\"h1\\\" style. Three or more hyphens under a line makes it \\\"h2\\\" (slightly smaller). You can also use multiple pound symbols (`#`) before and after a heading. Pounds after the title are ignored. Here are some examples:\\n\\nThis is H1\\n==========\\n\\nThis is H2\\n----------\\n\\n# This is H1\\n## This is H2\\n### This is H3 with some extra pounds ###\\n#### You get the idea ####\\n##### I don't need extra pounds at the end\\n###### H6 is the max\\n\\n\\nLinks\\n=====\\n\\nLet's link to a few sites. First, let's use the bare URL, like <https://www.github.com>. Great for text, but ugly for HTML.\\nNext is an inline link to [Google](https://www.google.com). A little nicer.\\nThis is a reference-style link to [Wikipedia] [1].\\nLastly, here's a pretty link to [Yahoo]. The reference-style and pretty links both automatically use the links defined below, but they could be defined *anywhere* in the markdown and are removed from the HTML. The names are also case insensitive, so you can use [YaHoO] and have it link properly.\\n\\n[1]: https://www.wikipedia.org\\n[Yahoo]: https://www.yahoo.com\\n\\nTitle attributes may be added to links by adding text after a link.\\nThis is the [inline link](https://www.bing.com \\\"Bing\\\") with a \\\"Bing\\\" title.\\nYou can also go to [W3C] [2] and maybe visit a [friend].\\n\\n[2]: https://w3c.org (The W3C puts out specs for web-based things)\\n[Friend]: https://facebook.com \\\"Facebook!\\\"\\n\\nEmail addresses in plain text are not linked: test@example.com.\\nEmail addresses wrapped in angle brackets are linked: <test@example.com>.\\nThey are also obfuscated so that email harvesting spam robots hopefully won't get them.\\n\\n\\nLists\\n=====\\n\\n* This is a bulleted list\\n* Great for shopping lists\\n- You can also use hyphens\\n+ Or plus symbols\\n\\nThe above is an \\\"unordered\\\" list. Now, on for a bit of order.\\n\\n1. Numbered lists are also easy\\n2. Just start with a number\\n3738762. However, the actual number doesn't matter when converted to HTML.\\n1. This will still show up as 4.\\n\\nYou might want a few advanced lists:\\n\\n- This top-level list is wrapped in paragraph tags\\n- This generates an extra space between each top-level item.\\n\\n- You do it by adding a blank line\\n\\n- This nested list also has blank lines between the list items.\\n\\n- How to create nested lists\\n  1. Start your regular list\\n  2. Indent nested lists with two spaces\\n  3. Further nesting means you should indent with two more spaces\\n    * This line is indented with four spaces.\\n\\n- List items can be quite lengthy. You can keep typing and either continue\\nthem on the next line with no indentation.\\n\\n- Alternately, if that looks ugly, you can also\\n  indent the next line a bit for a prettier look.\\n\\n- You can put large blocks of text in your list by just indenting with two spaces.\\n\\n  This is formatted the same as code, but you can inspect the HTML\\n  and find that it's just wrapped in a `<p>` tag and *won't* be shown\\n  as preformatted text.\\n\\n  You can keep adding more and more paragraphs to a single\\n  list item by adding the traditional blank line and then keep\\n  on indenting the paragraphs with two spaces.\\n\\n  You really only need to indent the first line,\\nbut that looks ugly.\\n\\n- Lists support blockquotes\\n\\n  > Just like this example here. By the way, you can\\n  > nest lists inside blockquotes!\\n  > - Fantastic!\\n\\n- Lists support preformatted text\\n\\n      You just need to indent an additional four spaces.\\n\\n\\nEven More\\n=========\\n\\nHorizontal Rule\\n---------------\\n\\nIf you need a horizontal rule you just need to put at least three hyphens, asterisks, or underscores on a line by themselves. You can also even put spaces between the characters.\\n\\n---\\n****************************\\n_ _ _ _ _ _ _\\n\\nThose three all produced horizontal lines. Keep in mind that three hyphens under any text turns that text into a heading, so add a blank like if you use hyphens.\\n\\nImages\\n------\\n\\nImages work exactly like links, but they have exclamation points in front. They work with references and titles too.\\n\\n![Google Logo](https://www.google.com/images/errors/logo_sm.gif) and ![Happy].\\n\\n[Happy]: https://wpclipart.com/smiley/happy/simple_colors/smiley_face_simple_green_small.png (\\\"Smiley face\\\")\\n\\n\\nInline HTML\\n-----------\\n\\nIf markdown is too limiting, you can just insert your own <strike>crazy</strike> HTML. Span-level HTML <u>can *still* use markdown</u>. Block level elements must be separated from text by a blank line and must not have any spaces before the opening and closing HTML.\\n\\n<div style='font-family: \\\"Comic Sans MS\\\", \\\"Comic Sans\\\", cursive;'>\\nIt is a pity, but markdown does **not** work in here for most markdown parsers.\\n[Marked] handles it pretty well.\\n</div>\\n\\n[end of quickref.md]\\n[start of marked.1.txt]\\nmarked(1)\\t\\t    General Commands Manual\\t\\t     marked(1)\\n\\nNAME\\n       marked - a javascript markdown parser\\n\\nSYNOPSIS\\n       marked  [-o  <output>]  [-i  <input>]  [--help] [--tokens] [--pedantic]\\n       [--gfm] [--breaks] [--sanitize]\\t[--smart-lists]  [--lang-prefix  <pre-\\n       fix>] [--no-etc...] [--silent] [filename]\\n\\n\\nDESCRIPTION\\n       marked is a full-featured javascript markdown parser, built for speed.\\n       It also includes multiple GFM features.\\n\\nEXAMPLES\\n       cat in.md | marked > out.html\\n\\n       echo \\\"hello *world*\\\" | marked\\n\\n       marked -o out.html -i in.md --gfm\\n\\n       marked --output=\\\"hello world.html\\\" -i in.md --no-breaks\\n\\nOPTIONS\\n       -o, --output [output]\\n              Specify file output. If none is specified, write to stdout.\\n\\n       -i, --input [input]\\n              Specify file input, otherwise use last argument as input file.\\n              If no input file is specified, read from stdin.\\n\\n       --test Makes sure the test(s) pass.\\n\\n              --glob [file] Specify which test to use.\\n\\n              --fix Fixes tests.\\n\\n              --bench Benchmarks the test(s).\\n\\n              --time Times The test(s).\\n\\n              --minified Runs test file(s) as minified.\\n\\n              --stop Stop process if a test fails.\\n\\n       -t, --tokens\\n              Output a token stream instead of html.\\n\\n       --pedantic\\n              Conform to obscure parts of markdown.pl as much as possible.\\n              Don't fix original markdown bugs.\\n\\n       --gfm  Enable github flavored markdown.\\n\\n       --breaks\\n              Enable GFM line breaks. Only works with the gfm option.\\n\\n       --sanitize\\n              Sanitize output. Ignore any HTML input.\\n\\n       --smart-lists\\n              Use smarter list behavior than the original markdown.\\n\\n       --lang-prefix [prefix]\\n              Set the prefix for code block classes.\\n\\n       --mangle\\n              Mangle email addresses.\\n\\n       --no-sanitize, -no-etc...\\n              The inverse of any of the marked options above.\\n\\n       --silent\\n              Silence error output.\\n\\n       -h, --help\\n              Display help information.\\n\\nCONFIGURATION\\n       For configuring and running programmatically.\\n\\n       Example\\n\\n           require('marked')('*foo*', { gfm: true });\\n\\nBUGS\\n       Please report any bugs to https://github.com/markedjs/marked.\\n\\nLICENSE\\n       Copyright (c) 2011-2014, Christopher Jeffrey (MIT License).\\n\\nSEE ALSO\\n       markdown(1), node.js(1)\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t     marked(1)\\n\\n[end of marked.1.txt]\\n[start of marked.esm.js]\\n/**\\n * marked - a markdown parser\\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n\\n/**\\n * DO NOT EDIT THIS FILE\\n * The code in this file is generated from files in ./src/\\n */\\n\\nfunction createCommonjsModule(fn, module) {\\n\\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\\n}\\n\\nvar defaults = createCommonjsModule(function (module) {\\nfunction getDefaults() {\\n  return {\\n    baseUrl: null,\\n    breaks: false,\\n    gfm: true,\\n    headerIds: true,\\n    headerPrefix: '',\\n    highlight: null,\\n    langPrefix: 'language-',\\n    mangle: true,\\n    pedantic: false,\\n    renderer: null,\\n    sanitize: false,\\n    sanitizer: null,\\n    silent: false,\\n    smartLists: false,\\n    smartypants: false,\\n    tokenizer: null,\\n    walkTokens: null,\\n    xhtml: false\\n  };\\n}\\n\\nfunction changeDefaults(newDefaults) {\\n  module.exports.defaults = newDefaults;\\n}\\n\\nmodule.exports = {\\n  defaults: getDefaults(),\\n  getDefaults,\\n  changeDefaults\\n};\\n});\\nvar defaults_1 = defaults.defaults;\\nvar defaults_2 = defaults.getDefaults;\\nvar defaults_3 = defaults.changeDefaults;\\n\\n/**\\n * Helpers\\n */\\nconst escapeTest = /[&<>\\\"']/;\\nconst escapeReplace = /[&<>\\\"']/g;\\nconst escapeTestNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/;\\nconst escapeReplaceNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/g;\\nconst escapeReplacements = {\\n  '&': '&amp;',\\n  '<': '&lt;',\\n  '>': '&gt;',\\n  '\\\"': '&quot;',\\n  \\\"'\\\": '&#39;'\\n};\\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\\nfunction escape(html, encode) {\\n  if (encode) {\\n    if (escapeTest.test(html)) {\\n      return html.replace(escapeReplace, getEscapeReplacement);\\n    }\\n  } else {\\n    if (escapeTestNoEncode.test(html)) {\\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\\n    }\\n  }\\n\\n  return html;\\n}\\n\\nconst unescapeTest = /&(#(?:\\\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\\\w+));?/ig;\\n\\nfunction unescape(html) {\\n  // explicitly match decimal, hex, and named HTML entities\\n  return html.replace(unescapeTest, (_, n) => {\\n    n = n.toLowerCase();\\n    if (n === 'colon') return ':';\\n    if (n.charAt(0) === '#') {\\n      return n.charAt(1) === 'x'\\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\\n        : String.fromCharCode(+n.substring(1));\\n    }\\n    return '';\\n  });\\n}\\n\\nconst caret = /(^|[^\\\\[])\\\\^/g;\\nfunction edit(regex, opt) {\\n  regex = regex.source || regex;\\n  opt = opt || '';\\n  const obj = {\\n    replace: (name, val) => {\\n      val = val.source || val;\\n      val = val.replace(caret, '$1');\\n      regex = regex.replace(name, val);\\n      return obj;\\n    },\\n    getRegex: () => {\\n      return new RegExp(regex, opt);\\n    }\\n  };\\n  return obj;\\n}\\n\\nconst nonWordAndColonTest = /[^\\\\w:]/g;\\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\\nfunction cleanUrl(sanitize, base, href) {\\n  if (sanitize) {\\n    let prot;\\n    try {\\n      prot = decodeURIComponent(unescape(href))\\n        .replace(nonWordAndColonTest, '')\\n        .toLowerCase();\\n    } catch (e) {\\n      return null;\\n    }\\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\\n      return null;\\n    }\\n  }\\n  if (base && !originIndependentUrl.test(href)) {\\n    href = resolveUrl(base, href);\\n  }\\n  try {\\n    href = encodeURI(href).replace(/%25/g, '%');\\n  } catch (e) {\\n    return null;\\n  }\\n  return href;\\n}\\n\\nconst baseUrls = {};\\nconst justDomain = /^[^:]+:\\\\/*[^/]*$/;\\nconst protocol = /^([^:]+:)[\\\\s\\\\S]*$/;\\nconst domain = /^([^:]+:\\\\/*[^/]*)[\\\\s\\\\S]*$/;\\n\\nfunction resolveUrl(base, href) {\\n  if (!baseUrls[' ' + base]) {\\n    // we can ignore everything in base after the last slash of its path component,\\n    // but we might need to add _that_\\n    // https://tools.ietf.org/html/rfc3986#section-3\\n    if (justDomain.test(base)) {\\n      baseUrls[' ' + base] = base + '/';\\n    } else {\\n      baseUrls[' ' + base] = rtrim(base, '/', true);\\n    }\\n  }\\n  base = baseUrls[' ' + base];\\n  const relativeBase = base.indexOf(':') === -1;\\n\\n  if (href.substring(0, 2) === '//') {\\n    if (relativeBase) {\\n      return href;\\n    }\\n    return base.replace(protocol, '$1') + href;\\n  } else if (href.charAt(0) === '/') {\\n    if (relativeBase) {\\n      return href;\\n    }\\n    return base.replace(domain, '$1') + href;\\n  } else {\\n    return base + href;\\n  }\\n}\\n\\nconst noopTest = { exec: function noopTest() {} };\\n\\nfunction merge(obj) {\\n  let i = 1,\\n    target,\\n    key;\\n\\n  for (; i < arguments.length; i++) {\\n    target = arguments[i];\\n    for (key in target) {\\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\\n        obj[key] = target[key];\\n      }\\n    }\\n  }\\n\\n  return obj;\\n}\\n\\nfunction splitCells(tableRow, count) {\\n  // ensure that every cell-delimiting pipe has a space\\n  // before it to distinguish it from an escaped pipe\\n  const row = tableRow.replace(/\\\\|/g, (match, offset, str) => {\\n      let escaped = false,\\n        curr = offset;\\n      while (--curr >= 0 && str[curr] === '\\\\\\\\') escaped = !escaped;\\n      if (escaped) {\\n        // odd number of slashes means | is escaped\\n        // so we leave it alone\\n        return '|';\\n      } else {\\n        // add space before unescaped |\\n        return ' |';\\n      }\\n    }),\\n    cells = row.split(/ \\\\|/);\\n  let i = 0;\\n\\n  if (cells.length > count) {\\n    cells.splice(count);\\n  } else {\\n    while (cells.length < count) cells.push('');\\n  }\\n\\n  for (; i < cells.length; i++) {\\n    // leading or trailing whitespace is ignored per the gfm spec\\n    cells[i] = cells[i].trim().replace(/\\\\\\\\\\\\|/g, '|');\\n  }\\n  return cells;\\n}\\n\\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\\n// /c*$/ is vulnerable to REDOS.\\n// invert: Remove suffix of non-c chars instead. Default falsey.\\nfunction rtrim(str, c, invert) {\\n  const l = str.length;\\n  if (l === 0) {\\n    return '';\\n  }\\n\\n  // Length of suffix matching the invert condition.\\n  let suffLen = 0;\\n\\n  // Step left until we fail to match the invert condition.\\n  while (suffLen < l) {\\n    const currChar = str.charAt(l - suffLen - 1);\\n    if (currChar === c && !invert) {\\n      suffLen++;\\n    } else if (currChar !== c && invert) {\\n      suffLen++;\\n    } else {\\n      break;\\n    }\\n  }\\n\\n  return str.substr(0, l - suffLen);\\n}\\n\\nfunction findClosingBracket(str, b) {\\n  if (str.indexOf(b[1]) === -1) {\\n    return -1;\\n  }\\n  const l = str.length;\\n  let level = 0,\\n    i = 0;\\n  for (; i < l; i++) {\\n    if (str[i] === '\\\\\\\\') {\\n      i++;\\n    } else if (str[i] === b[0]) {\\n      level++;\\n    } else if (str[i] === b[1]) {\\n      level--;\\n      if (level < 0) {\\n        return i;\\n      }\\n    }\\n  }\\n  return -1;\\n}\\n\\nfunction checkSanitizeDeprecation(opt) {\\n  if (opt && opt.sanitize && !opt.silent) {\\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\\n  }\\n}\\n\\nvar helpers = {\\n  escape,\\n  unescape,\\n  edit,\\n  cleanUrl,\\n  resolveUrl,\\n  noopTest,\\n  merge,\\n  splitCells,\\n  rtrim,\\n  findClosingBracket,\\n  checkSanitizeDeprecation\\n};\\n\\nconst { defaults: defaults$1 } = defaults;\\nconst {\\n  rtrim: rtrim$1,\\n  splitCells: splitCells$1,\\n  escape: escape$1,\\n  findClosingBracket: findClosingBracket$1\\n} = helpers;\\n\\nfunction outputLink(cap, link, raw) {\\n  const href = link.href;\\n  const title = link.title ? escape$1(link.title) : null;\\n  const text = cap[1].replace(/\\\\\\\\([\\\\[\\\\]])/g, '$1');\\n\\n  if (cap[0].charAt(0) !== '!') {\\n    return {\\n      type: 'link',\\n      raw,\\n      href,\\n      title,\\n      text\\n    };\\n  } else {\\n    return {\\n      type: 'image',\\n      raw,\\n      href,\\n      title,\\n      text: escape$1(text)\\n    };\\n  }\\n}\\n\\nfunction indentCodeCompensation(raw, text) {\\n  const matchIndentToCode = raw.match(/^(\\\\s+)(?:```)/);\\n\\n  if (matchIndentToCode === null) {\\n    return text;\\n  }\\n\\n  const indentToCode = matchIndentToCode[1];\\n\\n  return text\\n    .split('\\\\n')\\n    .map(node => {\\n      const matchIndentInNode = node.match(/^\\\\s+/);\\n      if (matchIndentInNode === null) {\\n        return node;\\n      }\\n\\n      const [indentInNode] = matchIndentInNode;\\n\\n      if (indentInNode.length >= indentToCode.length) {\\n        return node.slice(indentToCode.length);\\n      }\\n\\n      return node;\\n    })\\n    .join('\\\\n');\\n}\\n\\n/**\\n * Tokenizer\\n */\\nvar Tokenizer_1 = class Tokenizer {\\n  constructor(options) {\\n    this.options = options || defaults$1;\\n  }\\n\\n  space(src) {\\n    const cap = this.rules.block.newline.exec(src);\\n    if (cap) {\\n      if (cap[0].length > 1) {\\n        return {\\n          type: 'space',\\n          raw: cap[0]\\n        };\\n      }\\n      return { raw: '\\\\n' };\\n    }\\n  }\\n\\n  code(src, tokens) {\\n    const cap = this.rules.block.code.exec(src);\\n    if (cap) {\\n      const lastToken = tokens[tokens.length - 1];\\n      // An indented code block cannot interrupt a paragraph.\\n      if (lastToken && lastToken.type === 'paragraph') {\\n        return {\\n          raw: cap[0],\\n          text: cap[0].trimRight()\\n        };\\n      }\\n\\n      const text = cap[0].replace(/^ {4}/gm, '');\\n      return {\\n        type: 'code',\\n        raw: cap[0],\\n        codeBlockStyle: 'indented',\\n        text: !this.options.pedantic\\n          ? rtrim$1(text, '\\\\n')\\n          : text\\n      };\\n    }\\n  }\\n\\n  fences(src) {\\n    const cap = this.rules.block.fences.exec(src);\\n    if (cap) {\\n      const raw = cap[0];\\n      const text = indentCodeCompensation(raw, cap[3] || '');\\n\\n      return {\\n        type: 'code',\\n        raw,\\n        lang: cap[2] ? cap[2].trim() : cap[2],\\n        text\\n      };\\n    }\\n  }\\n\\n  heading(src) {\\n    const cap = this.rules.block.heading.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[1].length,\\n        text: cap[2]\\n      };\\n    }\\n  }\\n\\n  nptable(src) {\\n    const cap = this.rules.block.nptable.exec(src);\\n    if (cap) {\\n      const item = {\\n        type: 'table',\\n        header: splitCells$1(cap[1].replace(/^ *| *\\\\| *$/g, '')),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        cells: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : [],\\n        raw: cap[0]\\n      };\\n\\n      if (item.header.length === item.align.length) {\\n        let l = item.align.length;\\n        let i;\\n        for (i = 0; i < l; i++) {\\n          if (/^ *-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'right';\\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'center';\\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\\n            item.align[i] = 'left';\\n          } else {\\n            item.align[i] = null;\\n          }\\n        }\\n\\n        l = item.cells.length;\\n        for (i = 0; i < l; i++) {\\n          item.cells[i] = splitCells$1(item.cells[i], item.header.length);\\n        }\\n\\n        return item;\\n      }\\n    }\\n  }\\n\\n  hr(src) {\\n    const cap = this.rules.block.hr.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'hr',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  blockquote(src) {\\n    const cap = this.rules.block.blockquote.exec(src);\\n    if (cap) {\\n      const text = cap[0].replace(/^ *> ?/gm, '');\\n\\n      return {\\n        type: 'blockquote',\\n        raw: cap[0],\\n        text\\n      };\\n    }\\n  }\\n\\n  list(src) {\\n    const cap = this.rules.block.list.exec(src);\\n    if (cap) {\\n      let raw = cap[0];\\n      const bull = cap[2];\\n      const isordered = bull.length > 1;\\n      const isparen = bull[bull.length - 1] === ')';\\n\\n      const list = {\\n        type: 'list',\\n        raw,\\n        ordered: isordered,\\n        start: isordered ? +bull.slice(0, -1) : '',\\n        loose: false,\\n        items: []\\n      };\\n\\n      // Get each top-level item.\\n      const itemMatch = cap[0].match(this.rules.block.item);\\n\\n      let next = false,\\n        item,\\n        space,\\n        b,\\n        addBack,\\n        loose,\\n        istask,\\n        ischecked;\\n\\n      const l = itemMatch.length;\\n      for (let i = 0; i < l; i++) {\\n        item = itemMatch[i];\\n        raw = item;\\n\\n        // Remove the list item's bullet\\n        // so it is seen as the next token.\\n        space = item.length;\\n        item = item.replace(/^ *([*+-]|\\\\d+[.)]) */, '');\\n\\n        // Outdent whatever the\\n        // list item contains. Hacky.\\n        if (~item.indexOf('\\\\n ')) {\\n          space -= item.length;\\n          item = !this.options.pedantic\\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\\n            : item.replace(/^ {1,4}/gm, '');\\n        }\\n\\n        // Determine whether the next list item belongs here.\\n        // Backpedal if it does not belong in this list.\\n        if (i !== l - 1) {\\n          b = this.rules.block.bullet.exec(itemMatch[i + 1])[0];\\n          if (isordered ? b.length === 1 || (!isparen && b[b.length - 1] === ')')\\n            : (b.length > 1 || (this.options.smartLists && b !== bull))) {\\n            addBack = itemMatch.slice(i + 1).join('\\\\n');\\n            list.raw = list.raw.substring(0, list.raw.length - addBack.length);\\n            i = l - 1;\\n          }\\n        }\\n\\n        // Determine whether item is loose or not.\\n        // Use: /(^|\\\\n)(?! )[^\\\\n]+\\\\n\\\\n(?!\\\\s*$)/\\n        // for discount behavior.\\n        loose = next || /\\\\n\\\\n(?!\\\\s*$)/.test(item);\\n        if (i !== l - 1) {\\n          next = item.charAt(item.length - 1) === '\\\\n';\\n          if (!loose) loose = next;\\n        }\\n\\n        if (loose) {\\n          list.loose = true;\\n        }\\n\\n        // Check for task list items\\n        istask = /^\\\\[[ xX]\\\\] /.test(item);\\n        ischecked = undefined;\\n        if (istask) {\\n          ischecked = item[1] !== ' ';\\n          item = item.replace(/^\\\\[[ xX]\\\\] +/, '');\\n        }\\n\\n        list.items.push({\\n          type: 'list_item',\\n          raw,\\n          task: istask,\\n          checked: ischecked,\\n          loose: loose,\\n          text: item\\n        });\\n      }\\n\\n      return list;\\n    }\\n  }\\n\\n  html(src) {\\n    const cap = this.rules.block.html.exec(src);\\n    if (cap) {\\n      return {\\n        type: this.options.sanitize\\n          ? 'paragraph'\\n          : 'html',\\n        raw: cap[0],\\n        pre: !this.options.sanitizer\\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\\n        text: this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape$1(cap[0])) : cap[0]\\n      };\\n    }\\n  }\\n\\n  def(src) {\\n    const cap = this.rules.block.def.exec(src);\\n    if (cap) {\\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\\n      const tag = cap[1].toLowerCase().replace(/\\\\s+/g, ' ');\\n      return {\\n        tag,\\n        raw: cap[0],\\n        href: cap[2],\\n        title: cap[3]\\n      };\\n    }\\n  }\\n\\n  table(src) {\\n    const cap = this.rules.block.table.exec(src);\\n    if (cap) {\\n      const item = {\\n        type: 'table',\\n        header: splitCells$1(cap[1].replace(/^ *| *\\\\| *$/g, '')),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        cells: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : []\\n      };\\n\\n      if (item.header.length === item.align.length) {\\n        item.raw = cap[0];\\n\\n        let l = item.align.length;\\n        let i;\\n        for (i = 0; i < l; i++) {\\n          if (/^ *-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'right';\\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'center';\\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\\n            item.align[i] = 'left';\\n          } else {\\n            item.align[i] = null;\\n          }\\n        }\\n\\n        l = item.cells.length;\\n        for (i = 0; i < l; i++) {\\n          item.cells[i] = splitCells$1(\\n            item.cells[i].replace(/^ *\\\\| *| *\\\\| *$/g, ''),\\n            item.header.length);\\n        }\\n\\n        return item;\\n      }\\n    }\\n  }\\n\\n  lheading(src) {\\n    const cap = this.rules.block.lheading.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\\n        text: cap[1]\\n      };\\n    }\\n  }\\n\\n  paragraph(src) {\\n    const cap = this.rules.block.paragraph.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'paragraph',\\n        raw: cap[0],\\n        text: cap[1].charAt(cap[1].length - 1) === '\\\\n'\\n          ? cap[1].slice(0, -1)\\n          : cap[1]\\n      };\\n    }\\n  }\\n\\n  text(src, tokens) {\\n    const cap = this.rules.block.text.exec(src);\\n    if (cap) {\\n      const lastToken = tokens[tokens.length - 1];\\n      if (lastToken && lastToken.type === 'text') {\\n        return {\\n          raw: cap[0],\\n          text: cap[0]\\n        };\\n      }\\n\\n      return {\\n        type: 'text',\\n        raw: cap[0],\\n        text: cap[0]\\n      };\\n    }\\n  }\\n\\n  escape(src) {\\n    const cap = this.rules.inline.escape.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'escape',\\n        raw: cap[0],\\n        text: escape$1(cap[1])\\n      };\\n    }\\n  }\\n\\n  tag(src, inLink, inRawBlock) {\\n    const cap = this.rules.inline.tag.exec(src);\\n    if (cap) {\\n      if (!inLink && /^<a /i.test(cap[0])) {\\n        inLink = true;\\n      } else if (inLink && /^<\\\\/a>/i.test(cap[0])) {\\n        inLink = false;\\n      }\\n      if (!inRawBlock && /^<(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        inRawBlock = true;\\n      } else if (inRawBlock && /^<\\\\/(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        inRawBlock = false;\\n      }\\n\\n      return {\\n        type: this.options.sanitize\\n          ? 'text'\\n          : 'html',\\n        raw: cap[0],\\n        inLink,\\n        inRawBlock,\\n        text: this.options.sanitize\\n          ? (this.options.sanitizer\\n            ? this.options.sanitizer(cap[0])\\n            : escape$1(cap[0]))\\n          : cap[0]\\n      };\\n    }\\n  }\\n\\n  link(src) {\\n    const cap = this.rules.inline.link.exec(src);\\n    if (cap) {\\n      const lastParenIndex = findClosingBracket$1(cap[2], '()');\\n      if (lastParenIndex > -1) {\\n        const start = cap[0].indexOf('!') === 0 ? 5 : 4;\\n        const linkLen = start + cap[1].length + lastParenIndex;\\n        cap[2] = cap[2].substring(0, lastParenIndex);\\n        cap[0] = cap[0].substring(0, linkLen).trim();\\n        cap[3] = '';\\n      }\\n      let href = cap[2];\\n      let title = '';\\n      if (this.options.pedantic) {\\n        const link = /^([^'\\\"]*[^\\\\s])\\\\s+(['\\\"])(.*)\\\\2/.exec(href);\\n\\n        if (link) {\\n          href = link[1];\\n          title = link[3];\\n        } else {\\n          title = '';\\n        }\\n      } else {\\n        title = cap[3] ? cap[3].slice(1, -1) : '';\\n      }\\n      href = href.trim().replace(/^<([\\\\s\\\\S]*)>$/, '$1');\\n      const token = outputLink(cap, {\\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\\n      }, cap[0]);\\n      return token;\\n    }\\n  }\\n\\n  reflink(src, links) {\\n    let cap;\\n    if ((cap = this.rules.inline.reflink.exec(src))\\n        || (cap = this.rules.inline.nolink.exec(src))) {\\n      let link = (cap[2] || cap[1]).replace(/\\\\s+/g, ' ');\\n      link = links[link.toLowerCase()];\\n      if (!link || !link.href) {\\n        const text = cap[0].charAt(0);\\n        return {\\n          type: 'text',\\n          raw: text,\\n          text\\n        };\\n      }\\n      const token = outputLink(cap, link, cap[0]);\\n      return token;\\n    }\\n  }\\n\\n  strong(src, maskedSrc, prevChar = '') {\\n    let match = this.rules.inline.strong.start.exec(src);\\n\\n    if (match && (!match[1] || (match[1] && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar))))) {\\n      maskedSrc = maskedSrc.slice(-1 * src.length);\\n      const endReg = match[0] === '**' ? this.rules.inline.strong.endAst : this.rules.inline.strong.endUnd;\\n\\n      endReg.lastIndex = 0;\\n\\n      let cap;\\n      while ((match = endReg.exec(maskedSrc)) != null) {\\n        cap = this.rules.inline.strong.middle.exec(maskedSrc.slice(0, match.index + 3));\\n        if (cap) {\\n          return {\\n            type: 'strong',\\n            raw: src.slice(0, cap[0].length),\\n            text: src.slice(2, cap[0].length - 2)\\n          };\\n        }\\n      }\\n    }\\n  }\\n\\n  em(src, maskedSrc, prevChar = '') {\\n    let match = this.rules.inline.em.start.exec(src);\\n\\n    if (match && (!match[1] || (match[1] && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar))))) {\\n      maskedSrc = maskedSrc.slice(-1 * src.length);\\n      const endReg = match[0] === '*' ? this.rules.inline.em.endAst : this.rules.inline.em.endUnd;\\n\\n      endReg.lastIndex = 0;\\n\\n      let cap;\\n      while ((match = endReg.exec(maskedSrc)) != null) {\\n        cap = this.rules.inline.em.middle.exec(maskedSrc.slice(0, match.index + 2));\\n        if (cap) {\\n          return {\\n            type: 'em',\\n            raw: src.slice(0, cap[0].length),\\n            text: src.slice(1, cap[0].length - 1)\\n          };\\n        }\\n      }\\n    }\\n  }\\n\\n  codespan(src) {\\n    const cap = this.rules.inline.code.exec(src);\\n    if (cap) {\\n      let text = cap[2].replace(/\\\\n/g, ' ');\\n      const hasNonSpaceChars = /[^ ]/.test(text);\\n      const hasSpaceCharsOnBothEnds = text.startsWith(' ') && text.endsWith(' ');\\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\\n        text = text.substring(1, text.length - 1);\\n      }\\n      text = escape$1(text, true);\\n      return {\\n        type: 'codespan',\\n        raw: cap[0],\\n        text\\n      };\\n    }\\n  }\\n\\n  br(src) {\\n    const cap = this.rules.inline.br.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'br',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  del(src) {\\n    const cap = this.rules.inline.del.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'del',\\n        raw: cap[0],\\n        text: cap[1]\\n      };\\n    }\\n  }\\n\\n  autolink(src, mangle) {\\n    const cap = this.rules.inline.autolink.exec(src);\\n    if (cap) {\\n      let text, href;\\n      if (cap[2] === '@') {\\n        text = escape$1(this.options.mangle ? mangle(cap[1]) : cap[1]);\\n[end of marked.esm.js]\\n[start of USING_ADVANCED.md]\\n## The `marked` function\\n\\n```js\\nmarked(markdownString [,options] [,callback])\\n```\\n\\n|Argument              |Type         |Notes                                                                                                |\\n|:---------------------|:------------|:----------------------------------------------------------------------------------------------------|\\n|markdownString        |`string`     |String of markdown source to be compiled.                                                            |\\n|<a href=\\\"#options\\\">options</a>|`object`|Hash of options. Can also use `marked.setOptions`.                                                |\\n|callback              |`function`   |Called when `markdownString` has been parsed. Can be used as second argument if no `options` present.|\\n\\n### Alternative using reference\\n\\n```js\\n// Create reference instance\\nconst marked = require('marked');\\n\\n// Set options\\n// `highlight` example uses `highlight.js`\\nmarked.setOptions({\\n  renderer: new marked.Renderer(),\\n  highlight: function(code, language) {\\n    const hljs = require('highlight.js');\\n    const validLanguage = hljs.getLanguage(language) ? language : 'plaintext';\\n    return hljs.highlight(validLanguage, code).value;\\n  },\\n  pedantic: false,\\n  gfm: true,\\n  breaks: false,\\n  sanitize: false,\\n  smartLists: true,\\n  smartypants: false,\\n  xhtml: false\\n});\\n\\n// Compile\\nconsole.log(marked(markdownString));\\n```\\n\\n<h2 id=\\\"options\\\">Options</h2>\\n\\n|Member      |Type      |Default  |Since    |Notes         |\\n|:-----------|:---------|:--------|:--------|:-------------|\\n|baseUrl     |`string`  |`null`   |0.3.9    |A prefix url for any relative link. |\\n|breaks      |`boolean` |`false`  |v0.2.7   |If true, add `<br>` on a single line break (copies GitHub behavior on comments, but not on rendered markdown files). Requires `gfm` be `true`.|\\n|gfm         |`boolean` |`true`   |v0.2.1   |If true, use approved [GitHub Flavored Markdown (GFM) specification](https://github.github.com/gfm/).|\\n|headerIds   |`boolean` |`true`   |v0.4.0   |If true, include an `id` attribute when emitting headings (h1, h2, h3, etc).|\\n|headerPrefix|`string`  |`''`     |v0.3.0   |A string to prefix the `id` attribute when emitting headings (h1, h2, h3, etc).|\\n|highlight   |`function`|`null`   |v0.3.0   |A function to highlight code blocks, see <a href=\\\"#highlight\\\">Asynchronous highlighting</a>.|\\n|langPrefix  |`string`  |`'language-'`|v0.3.0|A string to prefix the className in a `<code>` block. Useful for syntax highlighting.|\\n|mangle      |`boolean` |`true`   |v0.3.4   |If true, autolinked email address is escaped with HTML character references.|\\n|pedantic    |`boolean` |`false`  |v0.2.1   |If true, conform to the original `markdown.pl` as much as possible. Don't fix original markdown bugs or behavior. Turns off and overrides `gfm`.|\\n|renderer    |`object`  |`new Renderer()`|v0.3.0|An object containing functions to render tokens to HTML. See [extensibility](/using_pro) for more details.|\\n|sanitize    |`boolean` |`false`  |v0.2.1   |If true, sanitize the HTML passed into `markdownString` with the `sanitizer` function.<br>**Warning**: This feature is deprecated and it should NOT be used as it cannot be considered secure.<br>Instead use a sanitize library, like [DOMPurify](https://github.com/cure53/DOMPurify) (recommended), [sanitize-html](https://github.com/apostrophecms/sanitize-html) or [insane](https://github.com/bevacqua/insane) on the output HTML! |\\n|sanitizer   |`function`|`null`   |v0.3.4   |A function to sanitize the HTML passed into `markdownString`.|\\n|silent      |`boolean` |`false`  |v0.2.7   |If true, the parser does not throw any exception.|\\n|smartLists  |`boolean` |`false`  |v0.2.8   |If true, use smarter list behavior than those found in `markdown.pl`.|\\n|smartypants |`boolean` |`false`  |v0.2.9   |If true, use \\\"smart\\\" typographic punctuation for things like quotes and dashes.|\\n|tokenizer    |`object`  |`new Tokenizer()`|v1.0.0|An object containing functions to create tokens from markdown. See [extensibility](/using_pro) for more details.|\\n|walkTokens   |`function`  |`null`|v1.1.0|A function which is called for every token. See [extensibility](/using_pro) for more details.|\\n|xhtml       |`boolean` |`false`  |v0.3.2   |If true, emit self-closing HTML tags for void elements (&lt;br/&gt;, &lt;img/&gt;, etc.) with a \\\"/\\\" as required by XHTML.|\\n\\n<h2 id=\\\"inline\\\">Inline Markdown</h2>\\n\\nYou can parse inline markdown by running markdown through `marked.parseInline`.\\n\\n```js\\nconst blockHtml = marked('**strong** _em_');\\nconsole.log(blockHtml); // '<p><strong>strong</strong> <em>em</em></p>'\\n\\nconst inlineHtml = marked.parseInline('**strong** _em_');\\nconsole.log(inlineHtml); // '<strong>strong</strong> <em>em</em>'\\n```\\n\\n<h2 id=\\\"highlight\\\">Asynchronous highlighting</h2>\\n\\nUnlike `highlight.js` the `pygmentize.js` library uses asynchronous highlighting. This example demonstrates that marked is agnostic when it comes to the highlighter you use.\\n\\n```js\\nmarked.setOptions({\\n  highlight: function(code, lang, callback) {\\n    require('pygmentize-bundled') ({ lang: lang, format: 'html' }, code, function (err, result) {\\n      callback(err, result.toString());\\n    });\\n  }\\n});\\n\\nconsole.log(marked(markdownString));\\n```\\n\\nIn both examples, `code` is a `string` representing the section of code to pass to the highlighter. In this example, `lang` is a `string` informing the highlighter what programming language to use for the `code` and `callback` is the `function` the asynchronous highlighter will call once complete.\\n\\n<h2 id=\\\"workers\\\">Workers</h2>\\n\\nTo prevent ReDoS attacks you can run marked on a worker and terminate it when parsing takes longer than usual.\\n\\nMarked can be run in a [worker thread](https://nodejs.org/api/worker_threads.html) on a node server, or a [web worker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) in a browser.\\n\\n### Node Worker Thread\\n\\n```js\\n// markedWorker.js\\n\\nconst marked = require('marked');\\nconst { parentPort } = require('worker_threads');\\n\\nparentPort.on('message', (markdownString) => {\\n  parentPort.postMessage(marked(markdownString));\\n});\\n```\\n\\n```js\\n// index.js\\n\\nconst { Worker } = require('worker_threads');\\nconst markedWorker = new Worker('./markedWorker.js');\\n\\nconst markedTimeout = setTimeout(() => {\\n  markedWorker.terminate();\\n  throw new Error('Marked took too long!');\\n}, timeoutLimit);\\n\\nmarkedWorker.on('message', (html) => {\\n  clearTimeout(markedTimeout);\\n  console.log(html);\\n  markedWorker.terminate();\\n});\\n\\nmarkedWorker.postMessage(markdownString);\\n```\\n\\n### Web Worker\\n\\n> **NOTE**: Web Workers send the payload from `postMessage` in an object with the payload in a `.data` property\\n\\n```js\\n// markedWorker.js\\n\\nimportScripts('path/to/marked.min.js');\\n\\nonmessage = (e) => {\\n  const markdownString = e.data\\n  postMessage(marked(markdownString));\\n};\\n```\\n\\n```js\\n// script.js\\n\\nconst markedWorker = new Worker('./markedWorker.js');\\n\\nconst markedTimeout = setTimeout(() => {\\n  markedWorker.terminate();\\n  throw new Error('Marked took too long!');\\n}, timeoutLimit);\\n\\nmarkedWorker.onmessage = (e) => {\\n  clearTimeout(markedTimeout);\\n  const html = e.data;\\n  console.log(html);\\n  markedWorker.terminate();\\n};\\n\\nmarkedWorker.postMessage(markdownString);\\n```\\n\\n[end of USING_ADVANCED.md]\\n[start of Bug_report.md]\\n---\\nname: Bug report\\nabout: Marked says it does this thing but does not\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior:\\n\\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\\n<!--\\n1. [Marked Demo](https://marked.js.org/demo/)\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\\n-->\\n\\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\\n<!--\\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\\n3. Actual output (or error) is...\\n-->\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n[end of Bug_report.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "quickref.md",
        "marked.1.txt",
        "marked.esm.js",
        "USING_ADVANCED.md",
        "Bug_report.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "8dd2f984-0312-4df3-ade9-f9f9bacd6de0",
        "score": 0.01639344262295082,
        "payload": {
          "text": "Markdown Quick Reference\n========================\n\nThis guide is a very brief overview, with examples, of the syntax that [Markdown] supports. It is itself written in Markdown and you can copy the samples over to the left-hand pane for experimentation. It's shown as *text* and not *rendered HTML*.\n\n[Markdown]: http://daringfireball.net/projects/markdown/\n\n\nSimple Text Formatting\n======================\n\nFirst thing is first. You can use *stars* or _underscores_ for italics. **Double stars** and __double underscores__ for bold. ***Three together*** for ___both___.\n\nParagraphs are pretty easy too. Just have a blank line between chunks of text.\n\n> This chunk of text is in a block quote. Its multiple lines will all be\n> indented a bit from the rest of the text.\n>\n> > Multiple levels of block quotes also work.\n\nSometimes you want to include code, such as when you are explaining how `<h1>` HTML tags work, or maybe you are a programmer and you are discussing `someMethod()`.\n\nIf you want to include code and have new\nlines preserved, indent the line with a tab\nor at least four spaces:\n\n    Extra spaces work here too.\n    This is also called preformatted text and it is useful for showing examples.\n    The text will stay as text, so any *markdown* or <u>HTML</u> you add will\n    not show up formatted. This way you can show markdown examples in a\n    markdown document.\n\n>     You can also use preformatted text with your blockquotes\n>     as long as you add at least five spaces.\n\n\nHeadings\n========\n\nThere are a couple of ways to make headings. Using three or more equals signs on a line under a heading makes it into an \"h1\" style. Three or more hyphens under a line makes it \"h2\" (slightly smaller). You can also use multiple pound symbols (`#`) before and after a heading. Pounds after the title are ignored. Here are some examples:\n\nThis is H1\n==========\n\nThis is H2\n----------\n\n# This is H1\n## This is H2\n### This is H3 with some extra pounds ###\n#### You get the idea ####\n##### I don't need extra pounds at the end\n###### H6 is the max\n\n\nLinks\n=====\n\nLet's link to a few sites. First, let's use the bare URL, like <https://www.github.com>. Great for text, but ugly for HTML.\nNext is an inline link to [Google](https://www.google.com). A little nicer.\nThis is a reference-style link to [Wikipedia] [1].\nLastly, here's a pretty link to [Yahoo]. The reference-style and pretty links both automatically use the links defined below, but they could be defined *anywhere* in the markdown and are removed from the HTML. The names are also case insensitive, so you can use [YaHoO] and have it link properly.\n\n[1]: https://www.wikipedia.org\n[Yahoo]: https://www.yahoo.com\n\nTitle attributes may be added to links by adding text after a link.\nThis is the [inline link](https://www.bing.com \"Bing\") with a \"Bing\" title.\nYou can also go to [W3C] [2] and maybe visit a [friend].\n\n[2]: https://w3c.org (The W3C puts out specs for web-based things)\n[Friend]: https://facebook.com \"Facebook!\"\n\nEmail addresses in plain text are not linked: test@example.com.\nEmail addresses wrapped in angle brackets are linked: <test@example.com>.\nThey are also obfuscated so that email harvesting spam robots hopefully won't get them.\n\n\nLists\n=====\n\n* This is a bulleted list\n* Great for shopping lists\n- You can also use hyphens\n+ Or plus symbols\n\nThe above is an \"unordered\" list. Now, on for a bit of order.\n\n1. Numbered lists are also easy\n2. Just start with a number\n3738762. However, the actual number doesn't matter when converted to HTML.\n1. This will still show up as 4.\n\nYou might want a few advanced lists:\n\n- This top-level list is wrapped in paragraph tags\n- This generates an extra space between each top-level item.\n\n- You do it by adding a blank line\n\n- This nested list also has blank lines between the list items.\n\n- How to create nested lists\n  1. Start your regular list\n  2. Indent nested lists with two spaces\n  3. Further nesting means you should indent with two more spaces\n    * This line is indented with four spaces.\n\n- List items can be quite lengthy. You can keep typing and either continue\nthem on the next line with no indentation.\n\n- Alternately, if that looks ugly, you can also\n  indent the next line a bit for a prettier look.\n\n- You can put large blocks of text in your list by just indenting with two spaces.\n\n  This is formatted the same as code, but you can inspect the HTML\n  and find that it's just wrapped in a `<p>` tag and *won't* be shown\n  as preformatted text.\n\n  You can keep adding more and more paragraphs to a single\n  list item by adding the traditional blank line and then keep\n  on indenting the paragraphs with two spaces.\n\n  You really only need to indent the first line,\nbut that looks ugly.\n\n- Lists support blockquotes\n\n  > Just like this example here. By the way, you can\n  > nest lists inside blockquotes!\n  > - Fantastic!\n\n- Lists support preformatted text\n\n      You just need to indent an additional four spaces.\n\n\nEven More\n=========\n\nHorizontal Rule\n---------------\n\nIf you need a horizontal rule you just need to put at least three hyphens, asterisks, or underscores on a line by themselves. You can also even put spaces between the characters.\n\n---\n****************************\n_ _ _ _ _ _ _\n\nThose three all produced horizontal lines. Keep in mind that three hyphens under any text turns that text into a heading, so add a blank like if you use hyphens.\n\nImages\n------\n\nImages work exactly like links, but they have exclamation points in front. They work with references and titles too.\n\n![Google Logo](https://www.google.com/images/errors/logo_sm.gif) and ![Happy].\n\n[Happy]: https://wpclipart.com/smiley/happy/simple_colors/smiley_face_simple_green_small.png (\"Smiley face\")\n\n\nInline HTML\n-----------\n\nIf markdown is too limiting, you can just insert your own <strike>crazy</strike> HTML. Span-level HTML <u>can *still* use markdown</u>. Block level elements must be separated from text by a blank line and must not have any spaces before the opening and closing HTML.\n\n<div style='font-family: \"Comic Sans MS\", \"Comic Sans\", cursive;'>\nIt is a pity, but markdown does **not** work in here for most markdown parsers.\n[Marked] handles it pretty well.\n</div>\n",
          "filepath": "data/repos/markedjs/marked-1.2/docs/demo/quickref.md",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "e245b210-f587-4aef-8a66-36862ff35825",
        "score": 0.016129032258064516,
        "payload": {
          "text": "marked(1)\t\t    General Commands Manual\t\t     marked(1)\n\nNAME\n       marked - a javascript markdown parser\n\nSYNOPSIS\n       marked  [-o  <output>]  [-i  <input>]  [--help] [--tokens] [--pedantic]\n       [--gfm] [--breaks] [--sanitize]\t[--smart-lists]  [--lang-prefix  <pre-\n       fix>] [--no-etc...] [--silent] [filename]\n\n\nDESCRIPTION\n       marked is a full-featured javascript markdown parser, built for speed.\n       It also includes multiple GFM features.\n\nEXAMPLES\n       cat in.md | marked > out.html\n\n       echo \"hello *world*\" | marked\n\n       marked -o out.html -i in.md --gfm\n\n       marked --output=\"hello world.html\" -i in.md --no-breaks\n\nOPTIONS\n       -o, --output [output]\n              Specify file output. If none is specified, write to stdout.\n\n       -i, --input [input]\n              Specify file input, otherwise use last argument as input file.\n              If no input file is specified, read from stdin.\n\n       --test Makes sure the test(s) pass.\n\n              --glob [file] Specify which test to use.\n\n              --fix Fixes tests.\n\n              --bench Benchmarks the test(s).\n\n              --time Times The test(s).\n\n              --minified Runs test file(s) as minified.\n\n              --stop Stop process if a test fails.\n\n       -t, --tokens\n              Output a token stream instead of html.\n\n       --pedantic\n              Conform to obscure parts of markdown.pl as much as possible.\n              Don't fix original markdown bugs.\n\n       --gfm  Enable github flavored markdown.\n\n       --breaks\n              Enable GFM line breaks. Only works with the gfm option.\n\n       --sanitize\n              Sanitize output. Ignore any HTML input.\n\n       --smart-lists\n              Use smarter list behavior than the original markdown.\n\n       --lang-prefix [prefix]\n              Set the prefix for code block classes.\n\n       --mangle\n              Mangle email addresses.\n\n       --no-sanitize, -no-etc...\n              The inverse of any of the marked options above.\n\n       --silent\n              Silence error output.\n\n       -h, --help\n              Display help information.\n\nCONFIGURATION\n       For configuring and running programmatically.\n\n       Example\n\n           require('marked')('*foo*', { gfm: true });\n\nBUGS\n       Please report any bugs to https://github.com/markedjs/marked.\n\nLICENSE\n       Copyright (c) 2011-2014, Christopher Jeffrey (MIT License).\n\nSEE ALSO\n       markdown(1), node.js(1)\n\n\t\t\t\t\t\t\t\t     marked(1)\n",
          "filepath": "data/repos/markedjs/marked-1.2/man/marked.1.txt",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "fa3878ee-a455-467f-be76-bcbf86c569ae",
        "score": 0.015873015873015872,
        "payload": {
          "text": "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar defaults = createCommonjsModule(function (module) {\nfunction getDefaults() {\n  return {\n    baseUrl: null,\n    breaks: false,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: null,\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartLists: false,\n    smartypants: false,\n    tokenizer: null,\n    walkTokens: null,\n    xhtml: false\n  };\n}\n\nfunction changeDefaults(newDefaults) {\n  module.exports.defaults = newDefaults;\n}\n\nmodule.exports = {\n  defaults: getDefaults(),\n  getDefaults,\n  changeDefaults\n};\n});\nvar defaults_1 = defaults.defaults;\nvar defaults_2 = defaults.getDefaults;\nvar defaults_3 = defaults.changeDefaults;\n\n/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = /[&<>\"']/g;\nconst escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\nconst escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\nconst escapeReplacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape(html, encode) {\n  if (encode) {\n    if (escapeTest.test(html)) {\n      return html.replace(escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (escapeTestNoEncode.test(html)) {\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nconst caret = /(^|[^\\[])\\^/g;\nfunction edit(regex, opt) {\n  regex = regex.source || regex;\n  opt = opt || '';\n  const obj = {\n    replace: (name, val) => {\n      val = val.source || val;\n      val = val.replace(caret, '$1');\n      regex = regex.replace(name, val);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(regex, opt);\n    }\n  };\n  return obj;\n}\n\nconst nonWordAndColonTest = /[^\\w:]/g;\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    let prot;\n    try {\n      prot = decodeURIComponent(unescape(href))\n        .replace(nonWordAndColonTest, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nconst baseUrls = {};\nconst justDomain = /^[^:]+:\\/*[^/]*$/;\nconst protocol = /^([^:]+:)[\\s\\S]*$/;\nconst domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (justDomain.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n  const relativeBase = base.indexOf(':') === -1;\n\n  if (href.substring(0, 2) === '//') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(protocol, '$1') + href;\n  } else if (href.charAt(0) === '/') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(domain, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\n\nconst noopTest = { exec: function noopTest() {} };\n\nfunction merge(obj) {\n  let i = 1,\n    target,\n    key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n      let escaped = false,\n        curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(/ \\|/);\n  let i = 0;\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n// /c*$/ is vulnerable to REDOS.\n// invert: Remove suffix of non-c chars instead. Default falsey.\nfunction rtrim(str, c, invert) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.substr(0, l - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  const l = str.length;\n  let level = 0,\n    i = 0;\n  for (; i < l; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkSanitizeDeprecation(opt) {\n  if (opt && opt.sanitize && !opt.silent) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n}\n\nvar helpers = {\n  escape,\n  unescape,\n  edit,\n  cleanUrl,\n  resolveUrl,\n  noopTest,\n  merge,\n  splitCells,\n  rtrim,\n  findClosingBracket,\n  checkSanitizeDeprecation\n};\n\nconst { defaults: defaults$1 } = defaults;\nconst {\n  rtrim: rtrim$1,\n  splitCells: splitCells$1,\n  escape: escape$1,\n  findClosingBracket: findClosingBracket$1\n} = helpers;\n\nfunction outputLink(cap, link, raw) {\n  const href = link.href;\n  const title = link.title ? escape$1(link.title) : null;\n  const text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n  if (cap[0].charAt(0) !== '!') {\n    return {\n      type: 'link',\n      raw,\n      href,\n      title,\n      text\n    };\n  } else {\n    return {\n      type: 'image',\n      raw,\n      href,\n      title,\n      text: escape$1(text)\n    };\n  }\n}\n\nfunction indentCodeCompensation(raw, text) {\n  const matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n  if (matchIndentToCode === null) {\n    return text;\n  }\n\n  const indentToCode = matchIndentToCode[1];\n\n  return text\n    .split('\\n')\n    .map(node => {\n      const matchIndentInNode = node.match(/^\\s+/);\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      const [indentInNode] = matchIndentInNode;\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    })\n    .join('\\n');\n}\n\n/**\n * Tokenizer\n */\nvar Tokenizer_1 = class Tokenizer {\n  constructor(options) {\n    this.options = options || defaults$1;\n  }\n\n  space(src) {\n    const cap = this.rules.block.newline.exec(src);\n    if (cap) {\n      if (cap[0].length > 1) {\n        return {\n          type: 'space',\n          raw: cap[0]\n        };\n      }\n      return { raw: '\\n' };\n    }\n  }\n\n  code(src, tokens) {\n    const cap = this.rules.block.code.exec(src);\n    if (cap) {\n      const lastToken = tokens[tokens.length - 1];\n      // An indented code block cannot interrupt a paragraph.\n      if (lastToken && lastToken.type === 'paragraph') {\n        return {\n          raw: cap[0],\n          text: cap[0].trimRight()\n        };\n      }\n\n      const text = cap[0].replace(/^ {4}/gm, '');\n      return {\n        type: 'code',\n        raw: cap[0],\n        codeBlockStyle: 'indented',\n        text: !this.options.pedantic\n          ? rtrim$1(text, '\\n')\n          : text\n      };\n    }\n  }\n\n  fences(src) {\n    const cap = this.rules.block.fences.exec(src);\n    if (cap) {\n      const raw = cap[0];\n      const text = indentCodeCompensation(raw, cap[3] || '');\n\n      return {\n        type: 'code',\n        raw,\n        lang: cap[2] ? cap[2].trim() : cap[2],\n        text\n      };\n    }\n  }\n\n  heading(src) {\n    const cap = this.rules.block.heading.exec(src);\n    if (cap) {\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[1].length,\n        text: cap[2]\n      };\n    }\n  }\n\n  nptable(src) {\n    const cap = this.rules.block.nptable.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : [],\n        raw: cap[0]\n      };\n\n      if (item.header.length === item.align.length) {\n        let l = item.align.length;\n        let i;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.cells.length;\n        for (i = 0; i < l; i++) {\n          item.cells[i] = splitCells$1(item.cells[i], item.header.length);\n        }\n\n        return item;\n      }\n    }\n  }\n\n  hr(src) {\n    const cap = this.rules.block.hr.exec(src);\n    if (cap) {\n      return {\n        type: 'hr',\n        raw: cap[0]\n      };\n    }\n  }\n\n  blockquote(src) {\n    const cap = this.rules.block.blockquote.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ *> ?/gm, '');\n\n      return {\n        type: 'blockquote',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n\n  list(src) {\n    const cap = this.rules.block.list.exec(src);\n    if (cap) {\n      let raw = cap[0];\n      const bull = cap[2];\n      const isordered = bull.length > 1;\n      const isparen = bull[bull.length - 1] === ')';\n\n      const list = {\n        type: 'list',\n        raw,\n        ordered: isordered,\n        start: isordered ? +bull.slice(0, -1) : '',\n        loose: false,\n        items: []\n      };\n\n      // Get each top-level item.\n      const itemMatch = cap[0].match(this.rules.block.item);\n\n      let next = false,\n        item,\n        space,\n        b,\n        addBack,\n        loose,\n        istask,\n        ischecked;\n\n      const l = itemMatch.length;\n      for (let i = 0; i < l; i++) {\n        item = itemMatch[i];\n        raw = item;\n\n        // Remove the list item's bullet\n        // so it is seen as the next token.\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+[.)]) */, '');\n\n        // Outdent whatever the\n        // list item contains. Hacky.\n        if (~item.indexOf('\\n ')) {\n          space -= item.length;\n          item = !this.options.pedantic\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n            : item.replace(/^ {1,4}/gm, '');\n        }\n\n        // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n        if (i !== l - 1) {\n          b = this.rules.block.bullet.exec(itemMatch[i + 1])[0];\n          if (isordered ? b.length === 1 || (!isparen && b[b.length - 1] === ')')\n            : (b.length > 1 || (this.options.smartLists && b !== bull))) {\n            addBack = itemMatch.slice(i + 1).join('\\n');\n            list.raw = list.raw.substring(0, list.raw.length - addBack.length);\n            i = l - 1;\n          }\n        }\n\n        // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === '\\n';\n          if (!loose) loose = next;\n        }\n\n        if (loose) {\n          list.loose = true;\n        }\n\n        // Check for task list items\n        istask = /^\\[[ xX]\\] /.test(item);\n        ischecked = undefined;\n        if (istask) {\n          ischecked = item[1] !== ' ';\n          item = item.replace(/^\\[[ xX]\\] +/, '');\n        }\n\n        list.items.push({\n          type: 'list_item',\n          raw,\n          task: istask,\n          checked: ischecked,\n          loose: loose,\n          text: item\n        });\n      }\n\n      return list;\n    }\n  }\n\n  html(src) {\n    const cap = this.rules.block.html.exec(src);\n    if (cap) {\n      return {\n        type: this.options.sanitize\n          ? 'paragraph'\n          : 'html',\n        raw: cap[0],\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape$1(cap[0])) : cap[0]\n      };\n    }\n  }\n\n  def(src) {\n    const cap = this.rules.block.def.exec(src);\n    if (cap) {\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n      const tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n      return {\n        tag,\n        raw: cap[0],\n        href: cap[2],\n        title: cap[3]\n      };\n    }\n  }\n\n  table(src) {\n    const cap = this.rules.block.table.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        item.raw = cap[0];\n\n        let l = item.align.length;\n        let i;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.cells.length;\n        for (i = 0; i < l; i++) {\n          item.cells[i] = splitCells$1(\n            item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''),\n            item.header.length);\n        }\n\n        return item;\n      }\n    }\n  }\n\n  lheading(src) {\n    const cap = this.rules.block.lheading.exec(src);\n    if (cap) {\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1]\n      };\n    }\n  }\n\n  paragraph(src) {\n    const cap = this.rules.block.paragraph.exec(src);\n    if (cap) {\n      return {\n        type: 'paragraph',\n        raw: cap[0],\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1]\n      };\n    }\n  }\n\n  text(src, tokens) {\n    const cap = this.rules.block.text.exec(src);\n    if (cap) {\n      const lastToken = tokens[tokens.length - 1];\n      if (lastToken && lastToken.type === 'text') {\n        return {\n          raw: cap[0],\n          text: cap[0]\n        };\n      }\n\n      return {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0]\n      };\n    }\n  }\n\n  escape(src) {\n    const cap = this.rules.inline.escape.exec(src);\n    if (cap) {\n      return {\n        type: 'escape',\n        raw: cap[0],\n        text: escape$1(cap[1])\n      };\n    }\n  }\n\n  tag(src, inLink, inRawBlock) {\n    const cap = this.rules.inline.tag.exec(src);\n    if (cap) {\n      if (!inLink && /^<a /i.test(cap[0])) {\n        inLink = true;\n      } else if (inLink && /^<\\/a>/i.test(cap[0])) {\n        inLink = false;\n      }\n      if (!inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        inRawBlock = true;\n      } else if (inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        inRawBlock = false;\n      }\n\n      return {\n        type: this.options.sanitize\n          ? 'text'\n          : 'html',\n        raw: cap[0],\n        inLink,\n        inRawBlock,\n        text: this.options.sanitize\n          ? (this.options.sanitizer\n            ? this.options.sanitizer(cap[0])\n            : escape$1(cap[0]))\n          : cap[0]\n      };\n    }\n  }\n\n  link(src) {\n    const cap = this.rules.inline.link.exec(src);\n    if (cap) {\n      const lastParenIndex = findClosingBracket$1(cap[2], '()');\n      if (lastParenIndex > -1) {\n        const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n        const linkLen = start + cap[1].length + lastParenIndex;\n        cap[2] = cap[2].substring(0, lastParenIndex);\n        cap[0] = cap[0].substring(0, linkLen).trim();\n        cap[3] = '';\n      }\n      let href = cap[2];\n      let title = '';\n      if (this.options.pedantic) {\n        const link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        } else {\n          title = '';\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n      href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n      const token = outputLink(cap, {\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n      }, cap[0]);\n      return token;\n    }\n  }\n\n  reflink(src, links) {\n    let cap;\n    if ((cap = this.rules.inline.reflink.exec(src))\n        || (cap = this.rules.inline.nolink.exec(src))) {\n      let link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = links[link.toLowerCase()];\n      if (!link || !link.href) {\n        const text = cap[0].charAt(0);\n        return {\n          type: 'text',\n          raw: text,\n          text\n        };\n      }\n      const token = outputLink(cap, link, cap[0]);\n      return token;\n    }\n  }\n\n  strong(src, maskedSrc, prevChar = '') {\n    let match = this.rules.inline.strong.start.exec(src);\n\n    if (match && (!match[1] || (match[1] && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar))))) {\n      maskedSrc = maskedSrc.slice(-1 * src.length);\n      const endReg = match[0] === '**' ? this.rules.inline.strong.endAst : this.rules.inline.strong.endUnd;\n\n      endReg.lastIndex = 0;\n\n      let cap;\n      while ((match = endReg.exec(maskedSrc)) != null) {\n        cap = this.rules.inline.strong.middle.exec(maskedSrc.slice(0, match.index + 3));\n        if (cap) {\n          return {\n            type: 'strong',\n            raw: src.slice(0, cap[0].length),\n            text: src.slice(2, cap[0].length - 2)\n          };\n        }\n      }\n    }\n  }\n\n  em(src, maskedSrc, prevChar = '') {\n    let match = this.rules.inline.em.start.exec(src);\n\n    if (match && (!match[1] || (match[1] && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar))))) {\n      maskedSrc = maskedSrc.slice(-1 * src.length);\n      const endReg = match[0] === '*' ? this.rules.inline.em.endAst : this.rules.inline.em.endUnd;\n\n      endReg.lastIndex = 0;\n\n      let cap;\n      while ((match = endReg.exec(maskedSrc)) != null) {\n        cap = this.rules.inline.em.middle.exec(maskedSrc.slice(0, match.index + 2));\n        if (cap) {\n          return {\n            type: 'em',\n            raw: src.slice(0, cap[0].length),\n            text: src.slice(1, cap[0].length - 1)\n          };\n        }\n      }\n    }\n  }\n\n  codespan(src) {\n    const cap = this.rules.inline.code.exec(src);\n    if (cap) {\n      let text = cap[2].replace(/\\n/g, ' ');\n      const hasNonSpaceChars = /[^ ]/.test(text);\n      const hasSpaceCharsOnBothEnds = text.startsWith(' ') && text.endsWith(' ');\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n        text = text.substring(1, text.length - 1);\n      }\n      text = escape$1(text, true);\n      return {\n        type: 'codespan',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n\n  br(src) {\n    const cap = this.rules.inline.br.exec(src);\n    if (cap) {\n      return {\n        type: 'br',\n        raw: cap[0]\n      };\n    }\n  }\n\n  del(src) {\n    const cap = this.rules.inline.del.exec(src);\n    if (cap) {\n      return {\n        type: 'del',\n        raw: cap[0],\n        text: cap[1]\n      };\n    }\n  }\n\n  autolink(src, mangle) {\n    const cap = this.rules.inline.autolink.exec(src);\n    if (cap) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape$1(this.options.mangle ? mangle(cap[1]) : cap[1]);",
          "filepath": "data/repos/markedjs/marked-1.2/lib/marked.esm.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "e292f6a1-8b31-4b28-9ad4-c73def0ea132",
        "score": 0.015625,
        "payload": {
          "text": "## The `marked` function\n\n```js\nmarked(markdownString [,options] [,callback])\n```\n\n|Argument              |Type         |Notes                                                                                                |\n|:---------------------|:------------|:----------------------------------------------------------------------------------------------------|\n|markdownString        |`string`     |String of markdown source to be compiled.                                                            |\n|<a href=\"#options\">options</a>|`object`|Hash of options. Can also use `marked.setOptions`.                                                |\n|callback              |`function`   |Called when `markdownString` has been parsed. Can be used as second argument if no `options` present.|\n\n### Alternative using reference\n\n```js\n// Create reference instance\nconst marked = require('marked');\n\n// Set options\n// `highlight` example uses `highlight.js`\nmarked.setOptions({\n  renderer: new marked.Renderer(),\n  highlight: function(code, language) {\n    const hljs = require('highlight.js');\n    const validLanguage = hljs.getLanguage(language) ? language : 'plaintext';\n    return hljs.highlight(validLanguage, code).value;\n  },\n  pedantic: false,\n  gfm: true,\n  breaks: false,\n  sanitize: false,\n  smartLists: true,\n  smartypants: false,\n  xhtml: false\n});\n\n// Compile\nconsole.log(marked(markdownString));\n```\n\n<h2 id=\"options\">Options</h2>\n\n|Member      |Type      |Default  |Since    |Notes         |\n|:-----------|:---------|:--------|:--------|:-------------|\n|baseUrl     |`string`  |`null`   |0.3.9    |A prefix url for any relative link. |\n|breaks      |`boolean` |`false`  |v0.2.7   |If true, add `<br>` on a single line break (copies GitHub behavior on comments, but not on rendered markdown files). Requires `gfm` be `true`.|\n|gfm         |`boolean` |`true`   |v0.2.1   |If true, use approved [GitHub Flavored Markdown (GFM) specification](https://github.github.com/gfm/).|\n|headerIds   |`boolean` |`true`   |v0.4.0   |If true, include an `id` attribute when emitting headings (h1, h2, h3, etc).|\n|headerPrefix|`string`  |`''`     |v0.3.0   |A string to prefix the `id` attribute when emitting headings (h1, h2, h3, etc).|\n|highlight   |`function`|`null`   |v0.3.0   |A function to highlight code blocks, see <a href=\"#highlight\">Asynchronous highlighting</a>.|\n|langPrefix  |`string`  |`'language-'`|v0.3.0|A string to prefix the className in a `<code>` block. Useful for syntax highlighting.|\n|mangle      |`boolean` |`true`   |v0.3.4   |If true, autolinked email address is escaped with HTML character references.|\n|pedantic    |`boolean` |`false`  |v0.2.1   |If true, conform to the original `markdown.pl` as much as possible. Don't fix original markdown bugs or behavior. Turns off and overrides `gfm`.|\n|renderer    |`object`  |`new Renderer()`|v0.3.0|An object containing functions to render tokens to HTML. See [extensibility](/using_pro) for more details.|\n|sanitize    |`boolean` |`false`  |v0.2.1   |If true, sanitize the HTML passed into `markdownString` with the `sanitizer` function.<br>**Warning**: This feature is deprecated and it should NOT be used as it cannot be considered secure.<br>Instead use a sanitize library, like [DOMPurify](https://github.com/cure53/DOMPurify) (recommended), [sanitize-html](https://github.com/apostrophecms/sanitize-html) or [insane](https://github.com/bevacqua/insane) on the output HTML! |\n|sanitizer   |`function`|`null`   |v0.3.4   |A function to sanitize the HTML passed into `markdownString`.|\n|silent      |`boolean` |`false`  |v0.2.7   |If true, the parser does not throw any exception.|\n|smartLists  |`boolean` |`false`  |v0.2.8   |If true, use smarter list behavior than those found in `markdown.pl`.|\n|smartypants |`boolean` |`false`  |v0.2.9   |If true, use \"smart\" typographic punctuation for things like quotes and dashes.|\n|tokenizer    |`object`  |`new Tokenizer()`|v1.0.0|An object containing functions to create tokens from markdown. See [extensibility](/using_pro) for more details.|\n|walkTokens   |`function`  |`null`|v1.1.0|A function which is called for every token. See [extensibility](/using_pro) for more details.|\n|xhtml       |`boolean` |`false`  |v0.3.2   |If true, emit self-closing HTML tags for void elements (&lt;br/&gt;, &lt;img/&gt;, etc.) with a \"/\" as required by XHTML.|\n\n<h2 id=\"inline\">Inline Markdown</h2>\n\nYou can parse inline markdown by running markdown through `marked.parseInline`.\n\n```js\nconst blockHtml = marked('**strong** _em_');\nconsole.log(blockHtml); // '<p><strong>strong</strong> <em>em</em></p>'\n\nconst inlineHtml = marked.parseInline('**strong** _em_');\nconsole.log(inlineHtml); // '<strong>strong</strong> <em>em</em>'\n```\n\n<h2 id=\"highlight\">Asynchronous highlighting</h2>\n\nUnlike `highlight.js` the `pygmentize.js` library uses asynchronous highlighting. This example demonstrates that marked is agnostic when it comes to the highlighter you use.\n\n```js\nmarked.setOptions({\n  highlight: function(code, lang, callback) {\n    require('pygmentize-bundled') ({ lang: lang, format: 'html' }, code, function (err, result) {\n      callback(err, result.toString());\n    });\n  }\n});\n\nconsole.log(marked(markdownString));\n```\n\nIn both examples, `code` is a `string` representing the section of code to pass to the highlighter. In this example, `lang` is a `string` informing the highlighter what programming language to use for the `code` and `callback` is the `function` the asynchronous highlighter will call once complete.\n\n<h2 id=\"workers\">Workers</h2>\n\nTo prevent ReDoS attacks you can run marked on a worker and terminate it when parsing takes longer than usual.\n\nMarked can be run in a [worker thread](https://nodejs.org/api/worker_threads.html) on a node server, or a [web worker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) in a browser.\n\n### Node Worker Thread\n\n```js\n// markedWorker.js\n\nconst marked = require('marked');\nconst { parentPort } = require('worker_threads');\n\nparentPort.on('message', (markdownString) => {\n  parentPort.postMessage(marked(markdownString));\n});\n```\n\n```js\n// index.js\n\nconst { Worker } = require('worker_threads');\nconst markedWorker = new Worker('./markedWorker.js');\n\nconst markedTimeout = setTimeout(() => {\n  markedWorker.terminate();\n  throw new Error('Marked took too long!');\n}, timeoutLimit);\n\nmarkedWorker.on('message', (html) => {\n  clearTimeout(markedTimeout);\n  console.log(html);\n  markedWorker.terminate();\n});\n\nmarkedWorker.postMessage(markdownString);\n```\n\n### Web Worker\n\n> **NOTE**: Web Workers send the payload from `postMessage` in an object with the payload in a `.data` property\n\n```js\n// markedWorker.js\n\nimportScripts('path/to/marked.min.js');\n\nonmessage = (e) => {\n  const markdownString = e.data\n  postMessage(marked(markdownString));\n};\n```\n\n```js\n// script.js\n\nconst markedWorker = new Worker('./markedWorker.js');\n\nconst markedTimeout = setTimeout(() => {\n  markedWorker.terminate();\n  throw new Error('Marked took too long!');\n}, timeoutLimit);\n\nmarkedWorker.onmessage = (e) => {\n  clearTimeout(markedTimeout);\n  const html = e.data;\n  console.log(html);\n  markedWorker.terminate();\n};\n\nmarkedWorker.postMessage(markdownString);\n```\n",
          "filepath": "data/repos/markedjs/marked-1.2/docs/USING_ADVANCED.md",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "2d9f70e1-0017-4cb9-842c-819aaef86744",
        "score": 0.015384615384615385,
        "payload": {
          "text": "---\nname: Bug report\nabout: Marked says it does this thing but does not\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\n<!--\n1. [Marked Demo](https://marked.js.org/demo/)\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\n-->\n\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\n<!--\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\n3. Actual output (or error) is...\n-->\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n",
          "filepath": "data/repos/markedjs/marked-1.2/.github/ISSUE_TEMPLATE/Bug_report.md",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1821",
    "model_patch": "diff --git a/marked.esm.js b/marked.esm.js\n--- a/marked.esm.js\n+++ b/marked.esm.js\n@@ -1040,7 +1040,7 @@\n       };\n     }\n   }\n-  del(src) {\n+  del(src, maskedSrc, prevChar = '') {\n     const cap = this.rules.inline.del.exec(src);\n     if (cap) {\n       return {",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 173.93,
      "issue_embedding_time_ms": 173.93,
      "retrieval_time_ms_splade": 7.8,
      "retrieval_time_ms": 7.8,
      "total_retrieval_time_ms": 181.73,
      "generation_time_ms": 1824.71,
      "total_io_time_ms": 2006.44,
      "input_total_token_limit": null,
      "issue_text_tokens": 468,
      "vlm_tokens": 0,
      "retrieved_tokens": 9659,
      "prompt_template_tokens": 520,
      "total_input_prompt_tokens": 10647,
      "output_generated_tokens": 94,
      "total_io_tokens": 10741,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nstrickout error\\n**Marked version:**\\r\\n1.2.3\\r\\n\\r\\n## Expectation\\r\\n\\r\\nstrickout render error\\r\\n\\r\\n## Result\\r\\n\\r\\n[demo](https://marked.js.org/demo/?text=~~12345~~%0A%0A~~67890~%0A%0A~13579~%0A&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20false%2C%0A%20%22gfm%22%3A%20true%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22walkTokens%22%3A%20null%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=master)\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/17735161/98908083-d80bad80-24fa-11eb-9e78-1d435422936d.png)\\r\\n\\r\\n\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of marked.esm.js]\\n/**\\n * marked - a markdown parser\\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n\\n/**\\n * DO NOT EDIT THIS FILE\\n * The code in this file is generated from files in ./src/\\n */\\n\\nfunction createCommonjsModule(fn, module) {\\n\\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\\n}\\n\\nvar defaults = createCommonjsModule(function (module) {\\nfunction getDefaults() {\\n  return {\\n    baseUrl: null,\\n    breaks: false,\\n    gfm: true,\\n    headerIds: true,\\n    headerPrefix: '',\\n    highlight: null,\\n    langPrefix: 'language-',\\n    mangle: true,\\n    pedantic: false,\\n    renderer: null,\\n    sanitize: false,\\n    sanitizer: null,\\n    silent: false,\\n    smartLists: false,\\n    smartypants: false,\\n    tokenizer: null,\\n    walkTokens: null,\\n    xhtml: false\\n  };\\n}\\n\\nfunction changeDefaults(newDefaults) {\\n  module.exports.defaults = newDefaults;\\n}\\n\\nmodule.exports = {\\n  defaults: getDefaults(),\\n  getDefaults,\\n  changeDefaults\\n};\\n});\\nvar defaults_1 = defaults.defaults;\\nvar defaults_2 = defaults.getDefaults;\\nvar defaults_3 = defaults.changeDefaults;\\n\\n/**\\n * Helpers\\n */\\nconst escapeTest = /[&<>\\\"']/;\\nconst escapeReplace = /[&<>\\\"']/g;\\nconst escapeTestNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/;\\nconst escapeReplaceNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/g;\\nconst escapeReplacements = {\\n  '&': '&amp;',\\n  '<': '&lt;',\\n  '>': '&gt;',\\n  '\\\"': '&quot;',\\n  \\\"'\\\": '&#39;'\\n};\\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\\nfunction escape(html, encode) {\\n  if (encode) {\\n    if (escapeTest.test(html)) {\\n      return html.replace(escapeReplace, getEscapeReplacement);\\n    }\\n  } else {\\n    if (escapeTestNoEncode.test(html)) {\\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\\n    }\\n  }\\n\\n  return html;\\n}\\n\\nconst unescapeTest = /&(#(?:\\\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\\\w+));?/ig;\\n\\nfunction unescape(html) {\\n  // explicitly match decimal, hex, and named HTML entities\\n  return html.replace(unescapeTest, (_, n) => {\\n    n = n.toLowerCase();\\n    if (n === 'colon') return ':';\\n    if (n.charAt(0) === '#') {\\n      return n.charAt(1) === 'x'\\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\\n        : String.fromCharCode(+n.substring(1));\\n    }\\n    return '';\\n  });\\n}\\n\\nconst caret = /(^|[^\\\\[])\\\\^/g;\\nfunction edit(regex, opt) {\\n  regex = regex.source || regex;\\n  opt = opt || '';\\n  const obj = {\\n    replace: (name, val) => {\\n      val = val.source || val;\\n      val = val.replace(caret, '$1');\\n      regex = regex.replace(name, val);\\n      return obj;\\n    },\\n    getRegex: () => {\\n      return new RegExp(regex, opt);\\n    }\\n  };\\n  return obj;\\n}\\n\\nconst nonWordAndColonTest = /[^\\\\w:]/g;\\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\\nfunction cleanUrl(sanitize, base, href) {\\n  if (sanitize) {\\n    let prot;\\n    try {\\n      prot = decodeURIComponent(unescape(href))\\n        .replace(nonWordAndColonTest, '')\\n        .toLowerCase();\\n    } catch (e) {\\n      return null;\\n    }\\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\\n      return null;\\n    }\\n  }\\n  if (base && !originIndependentUrl.test(href)) {\\n    href = resolveUrl(base, href);\\n  }\\n  try {\\n    href = encodeURI(href).replace(/%25/g, '%');\\n  } catch (e) {\\n    return null;\\n  }\\n  return href;\\n}\\n\\nconst baseUrls = {};\\nconst justDomain = /^[^:]+:\\\\/*[^/]*$/;\\nconst protocol = /^([^:]+:)[\\\\s\\\\S]*$/;\\nconst domain = /^([^:]+:\\\\/*[^/]*)[\\\\s\\\\S]*$/;\\n\\nfunction resolveUrl(base, href) {\\n  if (!baseUrls[' ' + base]) {\\n    // we can ignore everything in base after the last slash of its path component,\\n    // but we might need to add _that_\\n    // https://tools.ietf.org/html/rfc3986#section-3\\n    if (justDomain.test(base)) {\\n      baseUrls[' ' + base] = base + '/';\\n    } else {\\n      baseUrls[' ' + base] = rtrim(base, '/', true);\\n    }\\n  }\\n  base = baseUrls[' ' + base];\\n  const relativeBase = base.indexOf(':') === -1;\\n\\n  if (href.substring(0, 2) === '//') {\\n    if (relativeBase) {\\n      return href;\\n    }\\n    return base.replace(protocol, '$1') + href;\\n  } else if (href.charAt(0) === '/') {\\n    if (relativeBase) {\\n      return href;\\n    }\\n    return base.replace(domain, '$1') + href;\\n  } else {\\n    return base + href;\\n  }\\n}\\n\\nconst noopTest = { exec: function noopTest() {} };\\n\\nfunction merge(obj) {\\n  let i = 1,\\n    target,\\n    key;\\n\\n  for (; i < arguments.length; i++) {\\n    target = arguments[i];\\n    for (key in target) {\\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\\n        obj[key] = target[key];\\n      }\\n    }\\n  }\\n\\n  return obj;\\n}\\n\\nfunction splitCells(tableRow, count) {\\n  // ensure that every cell-delimiting pipe has a space\\n  // before it to distinguish it from an escaped pipe\\n  const row = tableRow.replace(/\\\\|/g, (match, offset, str) => {\\n      let escaped = false,\\n        curr = offset;\\n      while (--curr >= 0 && str[curr] === '\\\\\\\\') escaped = !escaped;\\n      if (escaped) {\\n        // odd number of slashes means | is escaped\\n        // so we leave it alone\\n        return '|';\\n      } else {\\n        // add space before unescaped |\\n        return ' |';\\n      }\\n    }),\\n    cells = row.split(/ \\\\|/);\\n  let i = 0;\\n\\n  if (cells.length > count) {\\n    cells.splice(count);\\n  } else {\\n    while (cells.length < count) cells.push('');\\n  }\\n\\n  for (; i < cells.length; i++) {\\n    // leading or trailing whitespace is ignored per the gfm spec\\n    cells[i] = cells[i].trim().replace(/\\\\\\\\\\\\|/g, '|');\\n  }\\n  return cells;\\n}\\n\\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\\n// /c*$/ is vulnerable to REDOS.\\n// invert: Remove suffix of non-c chars instead. Default falsey.\\nfunction rtrim(str, c, invert) {\\n  const l = str.length;\\n  if (l === 0) {\\n    return '';\\n  }\\n\\n  // Length of suffix matching the invert condition.\\n  let suffLen = 0;\\n\\n  // Step left until we fail to match the invert condition.\\n  while (suffLen < l) {\\n    const currChar = str.charAt(l - suffLen - 1);\\n    if (currChar === c && !invert) {\\n      suffLen++;\\n    } else if (currChar !== c && invert) {\\n      suffLen++;\\n    } else {\\n      break;\\n    }\\n  }\\n\\n  return str.substr(0, l - suffLen);\\n}\\n\\nfunction findClosingBracket(str, b) {\\n  if (str.indexOf(b[1]) === -1) {\\n    return -1;\\n  }\\n  const l = str.length;\\n  let level = 0,\\n    i = 0;\\n  for (; i < l; i++) {\\n    if (str[i] === '\\\\\\\\') {\\n      i++;\\n    } else if (str[i] === b[0]) {\\n      level++;\\n    } else if (str[i] === b[1]) {\\n      level--;\\n      if (level < 0) {\\n        return i;\\n      }\\n    }\\n  }\\n  return -1;\\n}\\n\\nfunction checkSanitizeDeprecation(opt) {\\n  if (opt && opt.sanitize && !opt.silent) {\\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\\n  }\\n}\\n\\nvar helpers = {\\n  escape,\\n  unescape,\\n  edit,\\n  cleanUrl,\\n  resolveUrl,\\n  noopTest,\\n  merge,\\n  splitCells,\\n  rtrim,\\n  findClosingBracket,\\n  checkSanitizeDeprecation\\n};\\n\\nconst { defaults: defaults$1 } = defaults;\\nconst {\\n  rtrim: rtrim$1,\\n  splitCells: splitCells$1,\\n  escape: escape$1,\\n  findClosingBracket: findClosingBracket$1\\n} = helpers;\\n\\nfunction outputLink(cap, link, raw) {\\n  const href = link.href;\\n  const title = link.title ? escape$1(link.title) : null;\\n  const text = cap[1].replace(/\\\\\\\\([\\\\[\\\\]])/g, '$1');\\n\\n  if (cap[0].charAt(0) !== '!') {\\n    return {\\n      type: 'link',\\n      raw,\\n      href,\\n      title,\\n      text\\n    };\\n  } else {\\n    return {\\n      type: 'image',\\n      raw,\\n      href,\\n      title,\\n      text: escape$1(text)\\n    };\\n  }\\n}\\n\\nfunction indentCodeCompensation(raw, text) {\\n  const matchIndentToCode = raw.match(/^(\\\\s+)(?:```)/);\\n\\n  if (matchIndentToCode === null) {\\n    return text;\\n  }\\n\\n  const indentToCode = matchIndentToCode[1];\\n\\n  return text\\n    .split('\\\\n')\\n    .map(node => {\\n      const matchIndentInNode = node.match(/^\\\\s+/);\\n      if (matchIndentInNode === null) {\\n        return node;\\n      }\\n\\n      const [indentInNode] = matchIndentInNode;\\n\\n      if (indentInNode.length >= indentToCode.length) {\\n        return node.slice(indentToCode.length);\\n      }\\n\\n      return node;\\n    })\\n    .join('\\\\n');\\n}\\n\\n/**\\n * Tokenizer\\n */\\nvar Tokenizer_1 = class Tokenizer {\\n  constructor(options) {\\n    this.options = options || defaults$1;\\n  }\\n\\n  space(src) {\\n    const cap = this.rules.block.newline.exec(src);\\n    if (cap) {\\n      if (cap[0].length > 1) {\\n        return {\\n          type: 'space',\\n          raw: cap[0]\\n        };\\n      }\\n      return { raw: '\\\\n' };\\n    }\\n  }\\n\\n  code(src, tokens) {\\n    const cap = this.rules.block.code.exec(src);\\n    if (cap) {\\n      const lastToken = tokens[tokens.length - 1];\\n      // An indented code block cannot interrupt a paragraph.\\n      if (lastToken && lastToken.type === 'paragraph') {\\n        return {\\n          raw: cap[0],\\n          text: cap[0].trimRight()\\n        };\\n      }\\n\\n      const text = cap[0].replace(/^ {4}/gm, '');\\n      return {\\n        type: 'code',\\n        raw: cap[0],\\n        codeBlockStyle: 'indented',\\n        text: !this.options.pedantic\\n          ? rtrim$1(text, '\\\\n')\\n          : text\\n      };\\n    }\\n  }\\n\\n  fences(src) {\\n    const cap = this.rules.block.fences.exec(src);\\n    if (cap) {\\n      const raw = cap[0];\\n      const text = indentCodeCompensation(raw, cap[3] || '');\\n\\n      return {\\n        type: 'code',\\n        raw,\\n        lang: cap[2] ? cap[2].trim() : cap[2],\\n        text\\n      };\\n    }\\n  }\\n\\n  heading(src) {\\n    const cap = this.rules.block.heading.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[1].length,\\n        text: cap[2]\\n      };\\n    }\\n  }\\n\\n  nptable(src) {\\n    const cap = this.rules.block.nptable.exec(src);\\n    if (cap) {\\n      const item = {\\n        type: 'table',\\n        header: splitCells$1(cap[1].replace(/^ *| *\\\\| *$/g, '')),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        cells: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : [],\\n        raw: cap[0]\\n      };\\n\\n      if (item.header.length === item.align.length) {\\n        let l = item.align.length;\\n        let i;\\n        for (i = 0; i < l; i++) {\\n          if (/^ *-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'right';\\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'center';\\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\\n            item.align[i] = 'left';\\n          } else {\\n            item.align[i] = null;\\n          }\\n        }\\n\\n        l = item.cells.length;\\n        for (i = 0; i < l; i++) {\\n          item.cells[i] = splitCells$1(item.cells[i], item.header.length);\\n        }\\n\\n        return item;\\n      }\\n    }\\n  }\\n\\n  hr(src) {\\n    const cap = this.rules.block.hr.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'hr',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  blockquote(src) {\\n    const cap = this.rules.block.blockquote.exec(src);\\n    if (cap) {\\n      const text = cap[0].replace(/^ *> ?/gm, '');\\n\\n      return {\\n        type: 'blockquote',\\n        raw: cap[0],\\n        text\\n      };\\n    }\\n  }\\n\\n  list(src) {\\n    const cap = this.rules.block.list.exec(src);\\n    if (cap) {\\n      let raw = cap[0];\\n      const bull = cap[2];\\n      const isordered = bull.length > 1;\\n      const isparen = bull[bull.length - 1] === ')';\\n\\n      const list = {\\n        type: 'list',\\n        raw,\\n        ordered: isordered,\\n        start: isordered ? +bull.slice(0, -1) : '',\\n        loose: false,\\n        items: []\\n      };\\n\\n      // Get each top-level item.\\n      const itemMatch = cap[0].match(this.rules.block.item);\\n\\n      let next = false,\\n        item,\\n        space,\\n        b,\\n        addBack,\\n        loose,\\n        istask,\\n        ischecked;\\n\\n      const l = itemMatch.length;\\n      for (let i = 0; i < l; i++) {\\n        item = itemMatch[i];\\n        raw = item;\\n\\n        // Remove the list item's bullet\\n        // so it is seen as the next token.\\n        space = item.length;\\n        item = item.replace(/^ *([*+-]|\\\\d+[.)]) */, '');\\n\\n        // Outdent whatever the\\n        // list item contains. Hacky.\\n        if (~item.indexOf('\\\\n ')) {\\n          space -= item.length;\\n          item = !this.options.pedantic\\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\\n            : item.replace(/^ {1,4}/gm, '');\\n        }\\n\\n        // Determine whether the next list item belongs here.\\n        // Backpedal if it does not belong in this list.\\n        if (i !== l - 1) {\\n          b = this.rules.block.bullet.exec(itemMatch[i + 1])[0];\\n          if (isordered ? b.length === 1 || (!isparen && b[b.length - 1] === ')')\\n            : (b.length > 1 || (this.options.smartLists && b !== bull))) {\\n            addBack = itemMatch.slice(i + 1).join('\\\\n');\\n            list.raw = list.raw.substring(0, list.raw.length - addBack.length);\\n            i = l - 1;\\n          }\\n        }\\n\\n        // Determine whether item is loose or not.\\n        // Use: /(^|\\\\n)(?! )[^\\\\n]+\\\\n\\\\n(?!\\\\s*$)/\\n        // for discount behavior.\\n        loose = next || /\\\\n\\\\n(?!\\\\s*$)/.test(item);\\n        if (i !== l - 1) {\\n          next = item.charAt(item.length - 1) === '\\\\n';\\n          if (!loose) loose = next;\\n        }\\n\\n        if (loose) {\\n          list.loose = true;\\n        }\\n\\n        // Check for task list items\\n        istask = /^\\\\[[ xX]\\\\] /.test(item);\\n        ischecked = undefined;\\n        if (istask) {\\n          ischecked = item[1] !== ' ';\\n          item = item.replace(/^\\\\[[ xX]\\\\] +/, '');\\n        }\\n\\n        list.items.push({\\n          type: 'list_item',\\n          raw,\\n          task: istask,\\n          checked: ischecked,\\n          loose: loose,\\n          text: item\\n        });\\n      }\\n\\n      return list;\\n    }\\n  }\\n\\n  html(src) {\\n    const cap = this.rules.block.html.exec(src);\\n    if (cap) {\\n      return {\\n        type: this.options.sanitize\\n          ? 'paragraph'\\n          : 'html',\\n        raw: cap[0],\\n        pre: !this.options.sanitizer\\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\\n        text: this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape$1(cap[0])) : cap[0]\\n      };\\n    }\\n  }\\n\\n  def(src) {\\n    const cap = this.rules.block.def.exec(src);\\n    if (cap) {\\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\\n      const tag = cap[1].toLowerCase().replace(/\\\\s+/g, ' ');\\n      return {\\n        tag,\\n        raw: cap[0],\\n        href: cap[2],\\n        title: cap[3]\\n      };\\n    }\\n  }\\n\\n  table(src) {\\n    const cap = this.rules.block.table.exec(src);\\n    if (cap) {\\n      const item = {\\n        type: 'table',\\n        header: splitCells$1(cap[1].replace(/^ *| *\\\\| *$/g, '')),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        cells: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : []\\n      };\\n\\n      if (item.header.length === item.align.length) {\\n        item.raw = cap[0];\\n\\n        let l = item.align.length;\\n        let i;\\n        for (i = 0; i < l; i++) {\\n          if (/^ *-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'right';\\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'center';\\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\\n            item.align[i] = 'left';\\n          } else {\\n            item.align[i] = null;\\n          }\\n        }\\n\\n        l = item.cells.length;\\n        for (i = 0; i < l; i++) {\\n          item.cells[i] = splitCells$1(\\n            item.cells[i].replace(/^ *\\\\| *| *\\\\| *$/g, ''),\\n            item.header.length);\\n        }\\n\\n        return item;\\n      }\\n    }\\n  }\\n\\n  lheading(src) {\\n    const cap = this.rules.block.lheading.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\\n        text: cap[1]\\n      };\\n    }\\n  }\\n\\n  paragraph(src) {\\n    const cap = this.rules.block.paragraph.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'paragraph',\\n        raw: cap[0],\\n        text: cap[1].charAt(cap[1].length - 1) === '\\\\n'\\n          ? cap[1].slice(0, -1)\\n          : cap[1]\\n      };\\n    }\\n  }\\n\\n  text(src, tokens) {\\n    const cap = this.rules.block.text.exec(src);\\n    if (cap) {\\n      const lastToken = tokens[tokens.length - 1];\\n      if (lastToken && lastToken.type === 'text') {\\n        return {\\n          raw: cap[0],\\n          text: cap[0]\\n        };\\n      }\\n\\n      return {\\n        type: 'text',\\n        raw: cap[0],\\n        text: cap[0]\\n      };\\n    }\\n  }\\n\\n  escape(src) {\\n    const cap = this.rules.inline.escape.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'escape',\\n        raw: cap[0],\\n        text: escape$1(cap[1])\\n      };\\n    }\\n  }\\n\\n  tag(src, inLink, inRawBlock) {\\n    const cap = this.rules.inline.tag.exec(src);\\n    if (cap) {\\n      if (!inLink && /^<a /i.test(cap[0])) {\\n        inLink = true;\\n      } else if (inLink && /^<\\\\/a>/i.test(cap[0])) {\\n        inLink = false;\\n      }\\n      if (!inRawBlock && /^<(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        inRawBlock = true;\\n      } else if (inRawBlock && /^<\\\\/(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        inRawBlock = false;\\n      }\\n\\n      return {\\n        type: this.options.sanitize\\n          ? 'text'\\n          : 'html',\\n        raw: cap[0],\\n        inLink,\\n        inRawBlock,\\n        text: this.options.sanitize\\n          ? (this.options.sanitizer\\n            ? this.options.sanitizer(cap[0])\\n            : escape$1(cap[0]))\\n          : cap[0]\\n      };\\n    }\\n  }\\n\\n  link(src) {\\n    const cap = this.rules.inline.link.exec(src);\\n    if (cap) {\\n      const lastParenIndex = findClosingBracket$1(cap[2], '()');\\n      if (lastParenIndex > -1) {\\n        const start = cap[0].indexOf('!') === 0 ? 5 : 4;\\n        const linkLen = start + cap[1].length + lastParenIndex;\\n        cap[2] = cap[2].substring(0, lastParenIndex);\\n        cap[0] = cap[0].substring(0, linkLen).trim();\\n        cap[3] = '';\\n      }\\n      let href = cap[2];\\n      let title = '';\\n      if (this.options.pedantic) {\\n        const link = /^([^'\\\"]*[^\\\\s])\\\\s+(['\\\"])(.*)\\\\2/.exec(href);\\n\\n        if (link) {\\n          href = link[1];\\n          title = link[3];\\n        } else {\\n          title = '';\\n        }\\n      } else {\\n        title = cap[3] ? cap[3].slice(1, -1) : '';\\n      }\\n      href = href.trim().replace(/^<([\\\\s\\\\S]*)>$/, '$1');\\n      const token = outputLink(cap, {\\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\\n      }, cap[0]);\\n      return token;\\n    }\\n  }\\n\\n  reflink(src, links) {\\n    let cap;\\n    if ((cap = this.rules.inline.reflink.exec(src))\\n        || (cap = this.rules.inline.nolink.exec(src))) {\\n      let link = (cap[2] || cap[1]).replace(/\\\\s+/g, ' ');\\n      link = links[link.toLowerCase()];\\n      if (!link || !link.href) {\\n        const text = cap[0].charAt(0);\\n        return {\\n          type: 'text',\\n          raw: text,\\n          text\\n        };\\n      }\\n      const token = outputLink(cap, link, cap[0]);\\n      return token;\\n    }\\n  }\\n\\n  strong(src, maskedSrc, prevChar = '') {\\n    let match = this.rules.inline.strong.start.exec(src);\\n\\n    if (match && (!match[1] || (match[1] && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar))))) {\\n      maskedSrc = maskedSrc.slice(-1 * src.length);\\n      const endReg = match[0] === '**' ? this.rules.inline.strong.endAst : this.rules.inline.strong.endUnd;\\n\\n      endReg.lastIndex = 0;\\n\\n      let cap;\\n      while ((match = endReg.exec(maskedSrc)) != null) {\\n        cap = this.rules.inline.strong.middle.exec(maskedSrc.slice(0, match.index + 3));\\n        if (cap) {\\n          return {\\n            type: 'strong',\\n            raw: src.slice(0, cap[0].length),\\n            text: src.slice(2, cap[0].length - 2)\\n          };\\n        }\\n      }\\n    }\\n  }\\n\\n  em(src, maskedSrc, prevChar = '') {\\n    let match = this.rules.inline.em.start.exec(src);\\n\\n    if (match && (!match[1] || (match[1] && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar))))) {\\n      maskedSrc = maskedSrc.slice(-1 * src.length);\\n      const endReg = match[0] === '*' ? this.rules.inline.em.endAst : this.rules.inline.em.endUnd;\\n\\n      endReg.lastIndex = 0;\\n\\n      let cap;\\n      while ((match = endReg.exec(maskedSrc)) != null) {\\n        cap = this.rules.inline.em.middle.exec(maskedSrc.slice(0, match.index + 2));\\n        if (cap) {\\n          return {\\n            type: 'em',\\n            raw: src.slice(0, cap[0].length),\\n            text: src.slice(1, cap[0].length - 1)\\n          };\\n        }\\n      }\\n    }\\n  }\\n\\n  codespan(src) {\\n    const cap = this.rules.inline.code.exec(src);\\n    if (cap) {\\n      let text = cap[2].replace(/\\\\n/g, ' ');\\n      const hasNonSpaceChars = /[^ ]/.test(text);\\n      const hasSpaceCharsOnBothEnds = text.startsWith(' ') && text.endsWith(' ');\\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\\n        text = text.substring(1, text.length - 1);\\n      }\\n      text = escape$1(text, true);\\n      return {\\n        type: 'codespan',\\n        raw: cap[0],\\n        text\\n      };\\n    }\\n  }\\n\\n  br(src) {\\n    const cap = this.rules.inline.br.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'br',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  del(src) {\\n    const cap = this.rules.inline.del.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'del',\\n        raw: cap[0],\\n        text: cap[1]\\n      };\\n    }\\n  }\\n\\n  autolink(src, mangle) {\\n    const cap = this.rules.inline.autolink.exec(src);\\n    if (cap) {\\n      let text, href;\\n      if (cap[2] === '@') {\\n        text = escape$1(this.options.mangle ? mangle(cap[1]) : cap[1]);\\n[end of marked.esm.js]\\n[start of update-specs.js]\\nconst fetch = require('node-fetch');\\nconst cheerio = require('cheerio');\\nconst marked = require('../');\\nconst htmlDiffer = require('./helpers/html-differ.js');\\nconst fs = require('fs');\\nconst path = require('path');\\n\\nfunction removeFiles(dir) {\\n  fs.readdirSync(dir).forEach(file => {\\n    fs.unlinkSync(path.join(dir, file));\\n  });\\n}\\n\\nasync function updateCommonmark(dir, options) {\\n  try {\\n    const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\\n    const pkg = await res.json();\\n    const version = pkg.version.replace(/^(\\\\d+\\\\.\\\\d+).*$/, '$1');\\n    const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\\n    const specs = await res2.json();\\n    specs.forEach(spec => {\\n      const html = marked(spec.markdown, options);\\n      if (!htmlDiffer.isEqual(html, spec.html)) {\\n        spec.shouldFail = true;\\n      }\\n    });\\n    fs.writeFileSync(path.resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\\\n');\\n    console.log(`Saved CommonMark v${version} specs`);\\n  } catch (ex) {\\n    console.log(ex);\\n  }\\n}\\n\\nasync function updateGfm(dir) {\\n  try {\\n    const res = await fetch('https://github.github.com/gfm/');\\n    const html = await res.text();\\n    const $ = cheerio.load(html);\\n    const version = $('.version').text().match(/\\\\d+\\\\.\\\\d+/)[0];\\n    if (!version) {\\n      throw new Error('No version found');\\n    }\\n    const specs = [];\\n    $('.extension').each((i, ext) => {\\n      const section = $('.definition', ext).text().trim().replace(/^\\\\d+\\\\.\\\\d+(.*?) \\\\(extension\\\\)[\\\\s\\\\S]*$/, '$1');\\n      $('.example', ext).each((j, exa) => {\\n        const example = +$(exa).attr('id').replace(/\\\\D/g, '');\\n        const markdown = $('.language-markdown', exa).text().trim();\\n        const html = $('.language-html', exa).text().trim();\\n        specs.push({\\n          section: `[extension] ${section}`,\\n          html,\\n          markdown,\\n          example\\n        });\\n      });\\n    });\\n\\n    specs.forEach(spec => {\\n      const html = marked(spec.markdown, { gfm: true, pedantic: false });\\n      if (!htmlDiffer.isEqual(html, spec.html)) {\\n        spec.shouldFail = true;\\n      }\\n    });\\n    fs.writeFileSync(path.resolve(dir, `./gfm.${version}.json`), JSON.stringify(specs, null, 2) + '\\\\n');\\n    console.log(`Saved GFM v${version} specs.`);\\n  } catch (ex) {\\n    console.log(ex);\\n  }\\n}\\n\\nconst commonmarkDir = path.resolve(__dirname, './specs/commonmark');\\nconst gfmDir = path.resolve(__dirname, './specs/gfm');\\nremoveFiles(commonmarkDir);\\nremoveFiles(gfmDir);\\nupdateCommonmark(commonmarkDir, { gfm: false, pedantic: false, headerIds: false });\\nupdateCommonmark(gfmDir, { gfm: true, pedantic: false, headerIds: false });\\nupdateGfm(gfmDir);\\n\\n[end of update-specs.js]\\n[start of USING_PRO.md]\\n## Extending Marked\\n\\nTo champion the single-responsibility and open/closed principles, we have tried to make it relatively painless to extend marked. If you are looking to add custom functionality, this is the place to start.\\n\\n<h2 id=\\\"use\\\">marked.use()</h2>\\n\\n`marked.use(options)` is the recommended way to extend marked. The options object can contain any [option](/using_advanced#options) available in marked.\\n\\nThe `renderer` and `tokenizer` options can be an object with functions that will be merged into the `renderer` and `tokenizer` respectively.\\n\\nThe `renderer` and `tokenizer` functions can return false to fallback to the previous function.\\n\\nThe `walkTokens` option can be a function that will be called with every token before rendering. When calling `use` multiple times with different `walkTokens` functions each function will be called in the **reverse** order in which they were assigned.\\n\\nAll other options will overwrite previously set options.\\n\\n<h2 id=\\\"renderer\\\">The renderer</h2>\\n\\nThe renderer defines the output of the parser.\\n\\n**Example:** Overriding default heading token by adding an embedded anchor tag like on GitHub.\\n\\n```js\\n// Create reference instance\\nconst marked = require('marked');\\n\\n// Override function\\nconst renderer = {\\n  heading(text, level) {\\n    const escapedText = text.toLowerCase().replace(/[^\\\\w]+/g, '-');\\n\\n    return `\\n            <h${level}>\\n              <a name=\\\"${escapedText}\\\" class=\\\"anchor\\\" href=\\\"#${escapedText}\\\">\\n                <span class=\\\"header-link\\\"></span>\\n              </a>\\n              ${text}\\n            </h${level}>`;\\n  }\\n};\\n\\nmarked.use({ renderer });\\n\\n// Run marked\\nconsole.log(marked('# heading+'));\\n```\\n\\n**Output:**\\n\\n```html\\n<h1>\\n  <a name=\\\"heading-\\\" class=\\\"anchor\\\" href=\\\"#heading-\\\">\\n    <span class=\\\"header-link\\\"></span>\\n  </a>\\n  heading+\\n</h1>\\n```\\n\\n### Block level renderer methods\\n\\n- code(*string* code, *string* infostring, *boolean* escaped)\\n- blockquote(*string* quote)\\n- html(*string* html)\\n- heading(*string* text, *number* level, *string* raw, *Slugger* slugger)\\n- hr()\\n- list(*string* body, *boolean* ordered, *number* start)\\n- listitem(*string* text, *boolean* task, *boolean* checked)\\n- checkbox(*boolean* checked)\\n- paragraph(*string* text)\\n- table(*string* header, *string* body)\\n- tablerow(*string* content)\\n- tablecell(*string* content, *object* flags)\\n\\n`slugger` has the `slug` method to create a unique id from value:\\n\\n```js\\nslugger.slug('foo')   // foo\\nslugger.slug('foo')   // foo-1\\nslugger.slug('foo')   // foo-2\\nslugger.slug('foo 1') // foo-1-1\\nslugger.slug('foo-1') // foo-1-2\\n...\\n```\\n\\n`slugger.slug` can also be called with the `dryrun` option for stateless operation:\\n```js\\nslugger.slug('foo')                    // foo\\nslugger.slug('foo')                    // foo-1\\nslugger.slug('foo')                    // foo-2\\nslugger.slug('foo', { dryrun: true })  // foo-3\\nslugger.slug('foo', { dryrun: true })  // foo-3\\nslugger.slug('foo')                    // foo-3\\nslugger.slug('foo')                    // foo-4\\n...\\n```\\n\\n`flags` has the following properties:\\n\\n```js\\n{\\n    header: true || false,\\n    align: 'center' || 'left' || 'right'\\n}\\n```\\n\\n### Inline level renderer methods\\n\\n- strong(*string* text)\\n- em(*string* text)\\n- codespan(*string* code)\\n- br()\\n- del(*string* text)\\n- link(*string* href, *string* title, *string* text)\\n- image(*string* href, *string* title, *string* text)\\n- text(*string* text)\\n\\n<h2 id=\\\"tokenizer\\\">The tokenizer</h2>\\n\\nThe tokenizer defines how to turn markdown text into tokens.\\n\\n**Example:** Overriding default `codespan` tokenizer to include LaTeX.\\n\\n```js\\n// Create reference instance\\nconst marked = require('marked');\\n\\n// Override function\\nconst tokenizer = {\\n  codespan(src) {\\n    const match = src.match(/\\\\$+([^\\\\$\\\\n]+?)\\\\$+/);\\n    if (match) {\\n      return {\\n        type: 'codespan',\\n        raw: match[0],\\n        text: match[1].trim()\\n      };\\n    }\\n\\n    // return false to use original codespan tokenizer\\n    return false;\\n  }\\n};\\n\\nmarked.use({ tokenizer });\\n\\n// Run marked\\nconsole.log(marked('$ latex code $\\\\n\\\\n` other code `'));\\n```\\n\\n**Output:**\\n\\n```html\\n<p><code>latex code</code></p>\\n<p><code>other code</code></p>\\n```\\n\\n### Block level tokenizer methods\\n\\n- space(*string* src)\\n- code(*string* src, *array* tokens)\\n- fences(*string* src)\\n- heading(*string* src)\\n- nptable(*string* src)\\n- hr(*string* src)\\n- blockquote(*string* src)\\n- list(*string* src)\\n- html(*string* src)\\n- def(*string* src)\\n- table(*string* src)\\n- lheading(*string* src)\\n- paragraph(*string* src)\\n- text(*string* src, *array* tokens)\\n\\n### Inline level tokenizer methods\\n\\n- escape(*string* src)\\n- tag(*string* src, *bool* inLink, *bool* inRawBlock)\\n- link(*string* src)\\n- reflink(*string* src, *object* links)\\n- strong(*string* src)\\n- em(*string* src)\\n- codespan(*string* src)\\n- br(*string* src)\\n- del(*string* src)\\n- autolink(*string* src, *function* mangle)\\n- url(*string* src, *function* mangle)\\n- inlineText(*string* src, *bool* inRawBlock, *function* smartypants)\\n\\n`mangle` is a method that changes text to HTML character references:\\n\\n```js\\nmangle('test@example.com')\\n// \\\"&#x74;&#101;&#x73;&#116;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#x63;&#111;&#x6d;\\\"\\n```\\n\\n`smartypants` is a method that translates plain ASCII punctuation characters into \\u201csmart\\u201d typographic punctuation HTML entities:\\n\\nhttps://daringfireball.net/projects/smartypants/\\n\\n```js\\nsmartypants('\\\"this ... string\\\"')\\n// \\\"\\u201cthis \\u2026 string\\u201d\\\"\\n```\\n\\n<h2 id=\\\"walk-tokens\\\">Walk Tokens</h2>\\n\\nThe walkTokens function gets called with every token. Child tokens are called before moving on to sibling tokens. Each token is passed by reference so updates are persisted when passed to the parser. The return value of the function is ignored.\\n\\n**Example:** Overriding heading tokens to start at h2.\\n\\n```js\\nconst marked = require('marked');\\n\\n// Override function\\nconst walkTokens = (token) => {\\n  if (token.type === 'heading') {\\n    token.depth += 1;\\n  }\\n};\\n\\nmarked.use({ walkTokens });\\n\\n// Run marked\\nconsole.log(marked('# heading 2\\\\n\\\\n## heading 3'));\\n```\\n\\n**Output:**\\n\\n```html\\n<h2 id=\\\"heading-2\\\">heading 2</h2>\\n<h3 id=\\\"heading-3\\\">heading 3</h3>\\n```\\n\\n<h2 id=\\\"lexer\\\">The lexer</h2>\\n\\nThe lexer takes a markdown string and calls the tokenizer functions.\\n\\n<h2 id=\\\"parser\\\">The parser</h2>\\n\\nThe parser takes tokens as input and calls the renderer functions.\\n\\n***\\n\\n<h2 id=\\\"extend\\\">Access to lexer and parser</h2>\\n\\nYou also have direct access to the lexer and parser if you so desire.\\n\\n``` js\\nconst tokens = marked.lexer(markdown, options);\\nconsole.log(marked.parser(tokens, options));\\n```\\n\\n``` js\\nconst lexer = new marked.Lexer(options);\\nconst tokens = lexer.lex(markdown);\\nconsole.log(tokens);\\nconsole.log(lexer.tokenizer.rules.block); // block level rules used\\nconsole.log(lexer.tokenizer.rules.inline); // inline level rules used\\nconsole.log(marked.Lexer.rules.block); // all block level rules\\nconsole.log(marked.Lexer.rules.inline); // all inline level rules\\n```\\n\\n``` bash\\n$ node\\n> require('marked').lexer('> I am using marked.')\\n[\\n  {\\n    type: \\\"blockquote\\\",\\n    raw: \\\"> I am using marked.\\\",\\n    tokens: [\\n      {\\n        type: \\\"paragraph\\\",\\n        raw: \\\"I am using marked.\\\",\\n        text: \\\"I am using marked.\\\",\\n        tokens: [\\n          {\\n            type: \\\"text\\\",\\n            raw: \\\"I am using marked.\\\",\\n            text: \\\"I am using marked.\\\"\\n          }\\n        ]\\n      }\\n    ]\\n  },\\n  links: {}\\n]\\n```\\n\\nThe Lexer builds an array of tokens, which will be passed to the Parser.\\nThe Parser processes each token in the token array:\\n\\n``` js\\nconst marked = require('marked');\\n\\nconst md = `\\n  # heading\\n\\n  [link][1]\\n\\n  [1]: #heading \\\"heading\\\"\\n`;\\n\\nconst tokens = marked.lexer(md);\\nconsole.log(tokens);\\n\\nconst html = marked.parser(tokens);\\nconsole.log(html);\\n```\\n\\n``` bash\\n[\\n  {\\n    type: \\\"heading\\\",\\n    raw: \\\"  # heading\\\\n\\\\n\\\",\\n    depth: 1,\\n    text: \\\"heading\\\",\\n    tokens: [\\n      {\\n        type: \\\"text\\\",\\n        raw: \\\"heading\\\",\\n        text: \\\"heading\\\"\\n      }\\n    ]\\n  },\\n  {\\n    type: \\\"paragraph\\\",\\n    raw: \\\"  [link][1]\\\",\\n    text: \\\"  [link][1]\\\",\\n    tokens: [\\n      {\\n        type: \\\"text\\\",\\n        raw: \\\"  \\\",\\n        text: \\\"  \\\"\\n      },\\n      {\\n        type: \\\"link\\\",\\n        raw: \\\"[link][1]\\\",\\n        text: \\\"link\\\",\\n        href: \\\"#heading\\\",\\n        title: \\\"heading\\\",\\n        tokens: [\\n          {\\n            type: \\\"text\\\",\\n            raw: \\\"link\\\",\\n            text: \\\"link\\\"\\n          }\\n        ]\\n      }\\n    ]\\n  },\\n  {\\n    type: \\\"space\\\",\\n    raw: \\\"\\\\n\\\\n\\\"\\n  },\\n  links: {\\n    \\\"1\\\": {\\n      href: \\\"#heading\\\",\\n      title: \\\"heading\\\"\\n    }\\n  }\\n]\\n<h1 id=\\\"heading\\\">heading</h1>\\n<p>  <a href=\\\"#heading\\\" title=\\\"heading\\\">link</a></p>\\n```\\n\\n[end of USING_PRO.md]\\n[start of marked.esm.js]\\n    throw new Error('marked.parseInline(): input parameter is undefined or null');\\n  }\\n  if (typeof src !== 'string') {\\n    throw new Error('marked.parseInline(): input parameter is of type '\\n      + Object.prototype.toString.call(src) + ', string expected');\\n  }\\n\\n  opt = merge$2({}, marked.defaults, opt || {});\\n  checkSanitizeDeprecation$1(opt);\\n\\n  try {\\n    const tokens = Lexer_1.lexInline(src, opt);\\n    if (opt.walkTokens) {\\n      marked.walkTokens(tokens, opt.walkTokens);\\n    }\\n    return Parser_1.parseInline(tokens, opt);\\n  } catch (e) {\\n    e.message += '\\\\nPlease report this to https://github.com/markedjs/marked.';\\n    if (opt.silent) {\\n      return '<p>An error occurred:</p><pre>'\\n        + escape$3(e.message + '', true)\\n        + '</pre>';\\n    }\\n    throw e;\\n  }\\n};\\n\\n/**\\n * Expose\\n */\\n\\nmarked.Parser = Parser_1;\\nmarked.parser = Parser_1.parse;\\n\\nmarked.Renderer = Renderer_1;\\nmarked.TextRenderer = TextRenderer_1;\\n\\nmarked.Lexer = Lexer_1;\\nmarked.lexer = Lexer_1.lex;\\n\\nmarked.Tokenizer = Tokenizer_1;\\n\\nmarked.Slugger = Slugger_1;\\n\\nmarked.parse = marked;\\n\\nvar marked_1 = marked;\\n\\nexport default marked_1;\\n[end of marked.esm.js]\\n[start of ISSUE_TEMPLATE.md]\\n**Marked version:**\\n\\n**Markdown flavor:** Markdown.pl|CommonMark|GitHub Flavored Markdown|n/a\\n\\n<!-- The NPM version or commit hash having the issue --> \\n\\n<!-- \\n\\n\\tIf submitting something other than a defect with Marked itself, please use the following:\\n\\n**Proposal type:** new feature | project operations | other\\n\\n## What pain point are you perceiving?\\n\\n## What solution are you suggesting?\\n\\n-->\\n\\n## Expectation\\n\\n**CommonMark Demo:** [demo](https://spec.commonmark.org/dingus/)\\n<!-- You can replace the link above with a permalink from: https://spec.commonmark.org/dingus/ -->\\n\\n<!-- Describe the output you are expecting from marked -->\\n\\n## Result\\n\\n**Marked Demo:** [demo](https://marked.js.org/demo/)\\n<!-- You can replace the link above with a permalink from: https://marked.js.org/demo/ -->\\n\\n<!-- Describe the output you received from marked -->\\n\\n## What was attempted\\n\\n<!-- Describe what code combination got you there -->\\n\\n<!-- \\n\\tIf error is thrown add the following:\\n\\n## Call stack & console log\\n\\n-->\\n\\n[end of ISSUE_TEMPLATE.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "marked.esm.js",
        "update-specs.js",
        "USING_PRO.md",
        "marked.esm.js",
        "ISSUE_TEMPLATE.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "fa3878ee-a455-467f-be76-bcbf86c569ae",
        "score": 0.01639344262295082,
        "payload": {
          "text": "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar defaults = createCommonjsModule(function (module) {\nfunction getDefaults() {\n  return {\n    baseUrl: null,\n    breaks: false,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: null,\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartLists: false,\n    smartypants: false,\n    tokenizer: null,\n    walkTokens: null,\n    xhtml: false\n  };\n}\n\nfunction changeDefaults(newDefaults) {\n  module.exports.defaults = newDefaults;\n}\n\nmodule.exports = {\n  defaults: getDefaults(),\n  getDefaults,\n  changeDefaults\n};\n});\nvar defaults_1 = defaults.defaults;\nvar defaults_2 = defaults.getDefaults;\nvar defaults_3 = defaults.changeDefaults;\n\n/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = /[&<>\"']/g;\nconst escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\nconst escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\nconst escapeReplacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape(html, encode) {\n  if (encode) {\n    if (escapeTest.test(html)) {\n      return html.replace(escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (escapeTestNoEncode.test(html)) {\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nconst caret = /(^|[^\\[])\\^/g;\nfunction edit(regex, opt) {\n  regex = regex.source || regex;\n  opt = opt || '';\n  const obj = {\n    replace: (name, val) => {\n      val = val.source || val;\n      val = val.replace(caret, '$1');\n      regex = regex.replace(name, val);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(regex, opt);\n    }\n  };\n  return obj;\n}\n\nconst nonWordAndColonTest = /[^\\w:]/g;\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    let prot;\n    try {\n      prot = decodeURIComponent(unescape(href))\n        .replace(nonWordAndColonTest, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nconst baseUrls = {};\nconst justDomain = /^[^:]+:\\/*[^/]*$/;\nconst protocol = /^([^:]+:)[\\s\\S]*$/;\nconst domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (justDomain.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n  const relativeBase = base.indexOf(':') === -1;\n\n  if (href.substring(0, 2) === '//') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(protocol, '$1') + href;\n  } else if (href.charAt(0) === '/') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(domain, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\n\nconst noopTest = { exec: function noopTest() {} };\n\nfunction merge(obj) {\n  let i = 1,\n    target,\n    key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n      let escaped = false,\n        curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(/ \\|/);\n  let i = 0;\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n// /c*$/ is vulnerable to REDOS.\n// invert: Remove suffix of non-c chars instead. Default falsey.\nfunction rtrim(str, c, invert) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.substr(0, l - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  const l = str.length;\n  let level = 0,\n    i = 0;\n  for (; i < l; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkSanitizeDeprecation(opt) {\n  if (opt && opt.sanitize && !opt.silent) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n}\n\nvar helpers = {\n  escape,\n  unescape,\n  edit,\n  cleanUrl,\n  resolveUrl,\n  noopTest,\n  merge,\n  splitCells,\n  rtrim,\n  findClosingBracket,\n  checkSanitizeDeprecation\n};\n\nconst { defaults: defaults$1 } = defaults;\nconst {\n  rtrim: rtrim$1,\n  splitCells: splitCells$1,\n  escape: escape$1,\n  findClosingBracket: findClosingBracket$1\n} = helpers;\n\nfunction outputLink(cap, link, raw) {\n  const href = link.href;\n  const title = link.title ? escape$1(link.title) : null;\n  const text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n  if (cap[0].charAt(0) !== '!') {\n    return {\n      type: 'link',\n      raw,\n      href,\n      title,\n      text\n    };\n  } else {\n    return {\n      type: 'image',\n      raw,\n      href,\n      title,\n      text: escape$1(text)\n    };\n  }\n}\n\nfunction indentCodeCompensation(raw, text) {\n  const matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n  if (matchIndentToCode === null) {\n    return text;\n  }\n\n  const indentToCode = matchIndentToCode[1];\n\n  return text\n    .split('\\n')\n    .map(node => {\n      const matchIndentInNode = node.match(/^\\s+/);\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      const [indentInNode] = matchIndentInNode;\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    })\n    .join('\\n');\n}\n\n/**\n * Tokenizer\n */\nvar Tokenizer_1 = class Tokenizer {\n  constructor(options) {\n    this.options = options || defaults$1;\n  }\n\n  space(src) {\n    const cap = this.rules.block.newline.exec(src);\n    if (cap) {\n      if (cap[0].length > 1) {\n        return {\n          type: 'space',\n          raw: cap[0]\n        };\n      }\n      return { raw: '\\n' };\n    }\n  }\n\n  code(src, tokens) {\n    const cap = this.rules.block.code.exec(src);\n    if (cap) {\n      const lastToken = tokens[tokens.length - 1];\n      // An indented code block cannot interrupt a paragraph.\n      if (lastToken && lastToken.type === 'paragraph') {\n        return {\n          raw: cap[0],\n          text: cap[0].trimRight()\n        };\n      }\n\n      const text = cap[0].replace(/^ {4}/gm, '');\n      return {\n        type: 'code',\n        raw: cap[0],\n        codeBlockStyle: 'indented',\n        text: !this.options.pedantic\n          ? rtrim$1(text, '\\n')\n          : text\n      };\n    }\n  }\n\n  fences(src) {\n    const cap = this.rules.block.fences.exec(src);\n    if (cap) {\n      const raw = cap[0];\n      const text = indentCodeCompensation(raw, cap[3] || '');\n\n      return {\n        type: 'code',\n        raw,\n        lang: cap[2] ? cap[2].trim() : cap[2],\n        text\n      };\n    }\n  }\n\n  heading(src) {\n    const cap = this.rules.block.heading.exec(src);\n    if (cap) {\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[1].length,\n        text: cap[2]\n      };\n    }\n  }\n\n  nptable(src) {\n    const cap = this.rules.block.nptable.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : [],\n        raw: cap[0]\n      };\n\n      if (item.header.length === item.align.length) {\n        let l = item.align.length;\n        let i;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.cells.length;\n        for (i = 0; i < l; i++) {\n          item.cells[i] = splitCells$1(item.cells[i], item.header.length);\n        }\n\n        return item;\n      }\n    }\n  }\n\n  hr(src) {\n    const cap = this.rules.block.hr.exec(src);\n    if (cap) {\n      return {\n        type: 'hr',\n        raw: cap[0]\n      };\n    }\n  }\n\n  blockquote(src) {\n    const cap = this.rules.block.blockquote.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ *> ?/gm, '');\n\n      return {\n        type: 'blockquote',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n\n  list(src) {\n    const cap = this.rules.block.list.exec(src);\n    if (cap) {\n      let raw = cap[0];\n      const bull = cap[2];\n      const isordered = bull.length > 1;\n      const isparen = bull[bull.length - 1] === ')';\n\n      const list = {\n        type: 'list',\n        raw,\n        ordered: isordered,\n        start: isordered ? +bull.slice(0, -1) : '',\n        loose: false,\n        items: []\n      };\n\n      // Get each top-level item.\n      const itemMatch = cap[0].match(this.rules.block.item);\n\n      let next = false,\n        item,\n        space,\n        b,\n        addBack,\n        loose,\n        istask,\n        ischecked;\n\n      const l = itemMatch.length;\n      for (let i = 0; i < l; i++) {\n        item = itemMatch[i];\n        raw = item;\n\n        // Remove the list item's bullet\n        // so it is seen as the next token.\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+[.)]) */, '');\n\n        // Outdent whatever the\n        // list item contains. Hacky.\n        if (~item.indexOf('\\n ')) {\n          space -= item.length;\n          item = !this.options.pedantic\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n            : item.replace(/^ {1,4}/gm, '');\n        }\n\n        // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n        if (i !== l - 1) {\n          b = this.rules.block.bullet.exec(itemMatch[i + 1])[0];\n          if (isordered ? b.length === 1 || (!isparen && b[b.length - 1] === ')')\n            : (b.length > 1 || (this.options.smartLists && b !== bull))) {\n            addBack = itemMatch.slice(i + 1).join('\\n');\n            list.raw = list.raw.substring(0, list.raw.length - addBack.length);\n            i = l - 1;\n          }\n        }\n\n        // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === '\\n';\n          if (!loose) loose = next;\n        }\n\n        if (loose) {\n          list.loose = true;\n        }\n\n        // Check for task list items\n        istask = /^\\[[ xX]\\] /.test(item);\n        ischecked = undefined;\n        if (istask) {\n          ischecked = item[1] !== ' ';\n          item = item.replace(/^\\[[ xX]\\] +/, '');\n        }\n\n        list.items.push({\n          type: 'list_item',\n          raw,\n          task: istask,\n          checked: ischecked,\n          loose: loose,\n          text: item\n        });\n      }\n\n      return list;\n    }\n  }\n\n  html(src) {\n    const cap = this.rules.block.html.exec(src);\n    if (cap) {\n      return {\n        type: this.options.sanitize\n          ? 'paragraph'\n          : 'html',\n        raw: cap[0],\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape$1(cap[0])) : cap[0]\n      };\n    }\n  }\n\n  def(src) {\n    const cap = this.rules.block.def.exec(src);\n    if (cap) {\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n      const tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n      return {\n        tag,\n        raw: cap[0],\n        href: cap[2],\n        title: cap[3]\n      };\n    }\n  }\n\n  table(src) {\n    const cap = this.rules.block.table.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        item.raw = cap[0];\n\n        let l = item.align.length;\n        let i;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.cells.length;\n        for (i = 0; i < l; i++) {\n          item.cells[i] = splitCells$1(\n            item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''),\n            item.header.length);\n        }\n\n        return item;\n      }\n    }\n  }\n\n  lheading(src) {\n    const cap = this.rules.block.lheading.exec(src);\n    if (cap) {\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1]\n      };\n    }\n  }\n\n  paragraph(src) {\n    const cap = this.rules.block.paragraph.exec(src);\n    if (cap) {\n      return {\n        type: 'paragraph',\n        raw: cap[0],\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1]\n      };\n    }\n  }\n\n  text(src, tokens) {\n    const cap = this.rules.block.text.exec(src);\n    if (cap) {\n      const lastToken = tokens[tokens.length - 1];\n      if (lastToken && lastToken.type === 'text') {\n        return {\n          raw: cap[0],\n          text: cap[0]\n        };\n      }\n\n      return {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0]\n      };\n    }\n  }\n\n  escape(src) {\n    const cap = this.rules.inline.escape.exec(src);\n    if (cap) {\n      return {\n        type: 'escape',\n        raw: cap[0],\n        text: escape$1(cap[1])\n      };\n    }\n  }\n\n  tag(src, inLink, inRawBlock) {\n    const cap = this.rules.inline.tag.exec(src);\n    if (cap) {\n      if (!inLink && /^<a /i.test(cap[0])) {\n        inLink = true;\n      } else if (inLink && /^<\\/a>/i.test(cap[0])) {\n        inLink = false;\n      }\n      if (!inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        inRawBlock = true;\n      } else if (inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        inRawBlock = false;\n      }\n\n      return {\n        type: this.options.sanitize\n          ? 'text'\n          : 'html',\n        raw: cap[0],\n        inLink,\n        inRawBlock,\n        text: this.options.sanitize\n          ? (this.options.sanitizer\n            ? this.options.sanitizer(cap[0])\n            : escape$1(cap[0]))\n          : cap[0]\n      };\n    }\n  }\n\n  link(src) {\n    const cap = this.rules.inline.link.exec(src);\n    if (cap) {\n      const lastParenIndex = findClosingBracket$1(cap[2], '()');\n      if (lastParenIndex > -1) {\n        const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n        const linkLen = start + cap[1].length + lastParenIndex;\n        cap[2] = cap[2].substring(0, lastParenIndex);\n        cap[0] = cap[0].substring(0, linkLen).trim();\n        cap[3] = '';\n      }\n      let href = cap[2];\n      let title = '';\n      if (this.options.pedantic) {\n        const link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        } else {\n          title = '';\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n      href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n      const token = outputLink(cap, {\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n      }, cap[0]);\n      return token;\n    }\n  }\n\n  reflink(src, links) {\n    let cap;\n    if ((cap = this.rules.inline.reflink.exec(src))\n        || (cap = this.rules.inline.nolink.exec(src))) {\n      let link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = links[link.toLowerCase()];\n      if (!link || !link.href) {\n        const text = cap[0].charAt(0);\n        return {\n          type: 'text',\n          raw: text,\n          text\n        };\n      }\n      const token = outputLink(cap, link, cap[0]);\n      return token;\n    }\n  }\n\n  strong(src, maskedSrc, prevChar = '') {\n    let match = this.rules.inline.strong.start.exec(src);\n\n    if (match && (!match[1] || (match[1] && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar))))) {\n      maskedSrc = maskedSrc.slice(-1 * src.length);\n      const endReg = match[0] === '**' ? this.rules.inline.strong.endAst : this.rules.inline.strong.endUnd;\n\n      endReg.lastIndex = 0;\n\n      let cap;\n      while ((match = endReg.exec(maskedSrc)) != null) {\n        cap = this.rules.inline.strong.middle.exec(maskedSrc.slice(0, match.index + 3));\n        if (cap) {\n          return {\n            type: 'strong',\n            raw: src.slice(0, cap[0].length),\n            text: src.slice(2, cap[0].length - 2)\n          };\n        }\n      }\n    }\n  }\n\n  em(src, maskedSrc, prevChar = '') {\n    let match = this.rules.inline.em.start.exec(src);\n\n    if (match && (!match[1] || (match[1] && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar))))) {\n      maskedSrc = maskedSrc.slice(-1 * src.length);\n      const endReg = match[0] === '*' ? this.rules.inline.em.endAst : this.rules.inline.em.endUnd;\n\n      endReg.lastIndex = 0;\n\n      let cap;\n      while ((match = endReg.exec(maskedSrc)) != null) {\n        cap = this.rules.inline.em.middle.exec(maskedSrc.slice(0, match.index + 2));\n        if (cap) {\n          return {\n            type: 'em',\n            raw: src.slice(0, cap[0].length),\n            text: src.slice(1, cap[0].length - 1)\n          };\n        }\n      }\n    }\n  }\n\n  codespan(src) {\n    const cap = this.rules.inline.code.exec(src);\n    if (cap) {\n      let text = cap[2].replace(/\\n/g, ' ');\n      const hasNonSpaceChars = /[^ ]/.test(text);\n      const hasSpaceCharsOnBothEnds = text.startsWith(' ') && text.endsWith(' ');\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n        text = text.substring(1, text.length - 1);\n      }\n      text = escape$1(text, true);\n      return {\n        type: 'codespan',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n\n  br(src) {\n    const cap = this.rules.inline.br.exec(src);\n    if (cap) {\n      return {\n        type: 'br',\n        raw: cap[0]\n      };\n    }\n  }\n\n  del(src) {\n    const cap = this.rules.inline.del.exec(src);\n    if (cap) {\n      return {\n        type: 'del',\n        raw: cap[0],\n        text: cap[1]\n      };\n    }\n  }\n\n  autolink(src, mangle) {\n    const cap = this.rules.inline.autolink.exec(src);\n    if (cap) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape$1(this.options.mangle ? mangle(cap[1]) : cap[1]);",
          "filepath": "data/repos/markedjs/marked-1.2/lib/marked.esm.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "e4c8734e-d672-43f8-937d-62c765782877",
        "score": 0.016129032258064516,
        "payload": {
          "text": "const fetch = require('node-fetch');\nconst cheerio = require('cheerio');\nconst marked = require('../');\nconst htmlDiffer = require('./helpers/html-differ.js');\nconst fs = require('fs');\nconst path = require('path');\n\nfunction removeFiles(dir) {\n  fs.readdirSync(dir).forEach(file => {\n    fs.unlinkSync(path.join(dir, file));\n  });\n}\n\nasync function updateCommonmark(dir, options) {\n  try {\n    const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\n    const pkg = await res.json();\n    const version = pkg.version.replace(/^(\\d+\\.\\d+).*$/, '$1');\n    const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\n    const specs = await res2.json();\n    specs.forEach(spec => {\n      const html = marked(spec.markdown, options);\n      if (!htmlDiffer.isEqual(html, spec.html)) {\n        spec.shouldFail = true;\n      }\n    });\n    fs.writeFileSync(path.resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n    console.log(`Saved CommonMark v${version} specs`);\n  } catch (ex) {\n    console.log(ex);\n  }\n}\n\nasync function updateGfm(dir) {\n  try {\n    const res = await fetch('https://github.github.com/gfm/');\n    const html = await res.text();\n    const $ = cheerio.load(html);\n    const version = $('.version').text().match(/\\d+\\.\\d+/)[0];\n    if (!version) {\n      throw new Error('No version found');\n    }\n    const specs = [];\n    $('.extension').each((i, ext) => {\n      const section = $('.definition', ext).text().trim().replace(/^\\d+\\.\\d+(.*?) \\(extension\\)[\\s\\S]*$/, '$1');\n      $('.example', ext).each((j, exa) => {\n        const example = +$(exa).attr('id').replace(/\\D/g, '');\n        const markdown = $('.language-markdown', exa).text().trim();\n        const html = $('.language-html', exa).text().trim();\n        specs.push({\n          section: `[extension] ${section}`,\n          html,\n          markdown,\n          example\n        });\n      });\n    });\n\n    specs.forEach(spec => {\n      const html = marked(spec.markdown, { gfm: true, pedantic: false });\n      if (!htmlDiffer.isEqual(html, spec.html)) {\n        spec.shouldFail = true;\n      }\n    });\n    fs.writeFileSync(path.resolve(dir, `./gfm.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n    console.log(`Saved GFM v${version} specs.`);\n  } catch (ex) {\n    console.log(ex);\n  }\n}\n\nconst commonmarkDir = path.resolve(__dirname, './specs/commonmark');\nconst gfmDir = path.resolve(__dirname, './specs/gfm');\nremoveFiles(commonmarkDir);\nremoveFiles(gfmDir);\nupdateCommonmark(commonmarkDir, { gfm: false, pedantic: false, headerIds: false });\nupdateCommonmark(gfmDir, { gfm: true, pedantic: false, headerIds: false });\nupdateGfm(gfmDir);\n",
          "filepath": "data/repos/markedjs/marked-1.2/test/update-specs.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "aa4af12d-01cf-4144-b66a-44630609d6b4",
        "score": 0.015873015873015872,
        "payload": {
          "text": "## Extending Marked\n\nTo champion the single-responsibility and open/closed principles, we have tried to make it relatively painless to extend marked. If you are looking to add custom functionality, this is the place to start.\n\n<h2 id=\"use\">marked.use()</h2>\n\n`marked.use(options)` is the recommended way to extend marked. The options object can contain any [option](/using_advanced#options) available in marked.\n\nThe `renderer` and `tokenizer` options can be an object with functions that will be merged into the `renderer` and `tokenizer` respectively.\n\nThe `renderer` and `tokenizer` functions can return false to fallback to the previous function.\n\nThe `walkTokens` option can be a function that will be called with every token before rendering. When calling `use` multiple times with different `walkTokens` functions each function will be called in the **reverse** order in which they were assigned.\n\nAll other options will overwrite previously set options.\n\n<h2 id=\"renderer\">The renderer</h2>\n\nThe renderer defines the output of the parser.\n\n**Example:** Overriding default heading token by adding an embedded anchor tag like on GitHub.\n\n```js\n// Create reference instance\nconst marked = require('marked');\n\n// Override function\nconst renderer = {\n  heading(text, level) {\n    const escapedText = text.toLowerCase().replace(/[^\\w]+/g, '-');\n\n    return `\n            <h${level}>\n              <a name=\"${escapedText}\" class=\"anchor\" href=\"#${escapedText}\">\n                <span class=\"header-link\"></span>\n              </a>\n              ${text}\n            </h${level}>`;\n  }\n};\n\nmarked.use({ renderer });\n\n// Run marked\nconsole.log(marked('# heading+'));\n```\n\n**Output:**\n\n```html\n<h1>\n  <a name=\"heading-\" class=\"anchor\" href=\"#heading-\">\n    <span class=\"header-link\"></span>\n  </a>\n  heading+\n</h1>\n```\n\n### Block level renderer methods\n\n- code(*string* code, *string* infostring, *boolean* escaped)\n- blockquote(*string* quote)\n- html(*string* html)\n- heading(*string* text, *number* level, *string* raw, *Slugger* slugger)\n- hr()\n- list(*string* body, *boolean* ordered, *number* start)\n- listitem(*string* text, *boolean* task, *boolean* checked)\n- checkbox(*boolean* checked)\n- paragraph(*string* text)\n- table(*string* header, *string* body)\n- tablerow(*string* content)\n- tablecell(*string* content, *object* flags)\n\n`slugger` has the `slug` method to create a unique id from value:\n\n```js\nslugger.slug('foo')   // foo\nslugger.slug('foo')   // foo-1\nslugger.slug('foo')   // foo-2\nslugger.slug('foo 1') // foo-1-1\nslugger.slug('foo-1') // foo-1-2\n...\n```\n\n`slugger.slug` can also be called with the `dryrun` option for stateless operation:\n```js\nslugger.slug('foo')                    // foo\nslugger.slug('foo')                    // foo-1\nslugger.slug('foo')                    // foo-2\nslugger.slug('foo', { dryrun: true })  // foo-3\nslugger.slug('foo', { dryrun: true })  // foo-3\nslugger.slug('foo')                    // foo-3\nslugger.slug('foo')                    // foo-4\n...\n```\n\n`flags` has the following properties:\n\n```js\n{\n    header: true || false,\n    align: 'center' || 'left' || 'right'\n}\n```\n\n### Inline level renderer methods\n\n- strong(*string* text)\n- em(*string* text)\n- codespan(*string* code)\n- br()\n- del(*string* text)\n- link(*string* href, *string* title, *string* text)\n- image(*string* href, *string* title, *string* text)\n- text(*string* text)\n\n<h2 id=\"tokenizer\">The tokenizer</h2>\n\nThe tokenizer defines how to turn markdown text into tokens.\n\n**Example:** Overriding default `codespan` tokenizer to include LaTeX.\n\n```js\n// Create reference instance\nconst marked = require('marked');\n\n// Override function\nconst tokenizer = {\n  codespan(src) {\n    const match = src.match(/\\$+([^\\$\\n]+?)\\$+/);\n    if (match) {\n      return {\n        type: 'codespan',\n        raw: match[0],\n        text: match[1].trim()\n      };\n    }\n\n    // return false to use original codespan tokenizer\n    return false;\n  }\n};\n\nmarked.use({ tokenizer });\n\n// Run marked\nconsole.log(marked('$ latex code $\\n\\n` other code `'));\n```\n\n**Output:**\n\n```html\n<p><code>latex code</code></p>\n<p><code>other code</code></p>\n```\n\n### Block level tokenizer methods\n\n- space(*string* src)\n- code(*string* src, *array* tokens)\n- fences(*string* src)\n- heading(*string* src)\n- nptable(*string* src)\n- hr(*string* src)\n- blockquote(*string* src)\n- list(*string* src)\n- html(*string* src)\n- def(*string* src)\n- table(*string* src)\n- lheading(*string* src)\n- paragraph(*string* src)\n- text(*string* src, *array* tokens)\n\n### Inline level tokenizer methods\n\n- escape(*string* src)\n- tag(*string* src, *bool* inLink, *bool* inRawBlock)\n- link(*string* src)\n- reflink(*string* src, *object* links)\n- strong(*string* src)\n- em(*string* src)\n- codespan(*string* src)\n- br(*string* src)\n- del(*string* src)\n- autolink(*string* src, *function* mangle)\n- url(*string* src, *function* mangle)\n- inlineText(*string* src, *bool* inRawBlock, *function* smartypants)\n\n`mangle` is a method that changes text to HTML character references:\n\n```js\nmangle('test@example.com')\n// \"&#x74;&#101;&#x73;&#116;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#x63;&#111;&#x6d;\"\n```\n\n`smartypants` is a method that translates plain ASCII punctuation characters into \u201csmart\u201d typographic punctuation HTML entities:\n\nhttps://daringfireball.net/projects/smartypants/\n\n```js\nsmartypants('\"this ... string\"')\n// \"\u201cthis \u2026 string\u201d\"\n```\n\n<h2 id=\"walk-tokens\">Walk Tokens</h2>\n\nThe walkTokens function gets called with every token. Child tokens are called before moving on to sibling tokens. Each token is passed by reference so updates are persisted when passed to the parser. The return value of the function is ignored.\n\n**Example:** Overriding heading tokens to start at h2.\n\n```js\nconst marked = require('marked');\n\n// Override function\nconst walkTokens = (token) => {\n  if (token.type === 'heading') {\n    token.depth += 1;\n  }\n};\n\nmarked.use({ walkTokens });\n\n// Run marked\nconsole.log(marked('# heading 2\\n\\n## heading 3'));\n```\n\n**Output:**\n\n```html\n<h2 id=\"heading-2\">heading 2</h2>\n<h3 id=\"heading-3\">heading 3</h3>\n```\n\n<h2 id=\"lexer\">The lexer</h2>\n\nThe lexer takes a markdown string and calls the tokenizer functions.\n\n<h2 id=\"parser\">The parser</h2>\n\nThe parser takes tokens as input and calls the renderer functions.\n\n***\n\n<h2 id=\"extend\">Access to lexer and parser</h2>\n\nYou also have direct access to the lexer and parser if you so desire.\n\n``` js\nconst tokens = marked.lexer(markdown, options);\nconsole.log(marked.parser(tokens, options));\n```\n\n``` js\nconst lexer = new marked.Lexer(options);\nconst tokens = lexer.lex(markdown);\nconsole.log(tokens);\nconsole.log(lexer.tokenizer.rules.block); // block level rules used\nconsole.log(lexer.tokenizer.rules.inline); // inline level rules used\nconsole.log(marked.Lexer.rules.block); // all block level rules\nconsole.log(marked.Lexer.rules.inline); // all inline level rules\n```\n\n``` bash\n$ node\n> require('marked').lexer('> I am using marked.')\n[\n  {\n    type: \"blockquote\",\n    raw: \"> I am using marked.\",\n    tokens: [\n      {\n        type: \"paragraph\",\n        raw: \"I am using marked.\",\n        text: \"I am using marked.\",\n        tokens: [\n          {\n            type: \"text\",\n            raw: \"I am using marked.\",\n            text: \"I am using marked.\"\n          }\n        ]\n      }\n    ]\n  },\n  links: {}\n]\n```\n\nThe Lexer builds an array of tokens, which will be passed to the Parser.\nThe Parser processes each token in the token array:\n\n``` js\nconst marked = require('marked');\n\nconst md = `\n  # heading\n\n  [link][1]\n\n  [1]: #heading \"heading\"\n`;\n\nconst tokens = marked.lexer(md);\nconsole.log(tokens);\n\nconst html = marked.parser(tokens);\nconsole.log(html);\n```\n\n``` bash\n[\n  {\n    type: \"heading\",\n    raw: \"  # heading\\n\\n\",\n    depth: 1,\n    text: \"heading\",\n    tokens: [\n      {\n        type: \"text\",\n        raw: \"heading\",\n        text: \"heading\"\n      }\n    ]\n  },\n  {\n    type: \"paragraph\",\n    raw: \"  [link][1]\",\n    text: \"  [link][1]\",\n    tokens: [\n      {\n        type: \"text\",\n        raw: \"  \",\n        text: \"  \"\n      },\n      {\n        type: \"link\",\n        raw: \"[link][1]\",\n        text: \"link\",\n        href: \"#heading\",\n        title: \"heading\",\n        tokens: [\n          {\n            type: \"text\",\n            raw: \"link\",\n            text: \"link\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    type: \"space\",\n    raw: \"\\n\\n\"\n  },\n  links: {\n    \"1\": {\n      href: \"#heading\",\n      title: \"heading\"\n    }\n  }\n]\n<h1 id=\"heading\">heading</h1>\n<p>  <a href=\"#heading\" title=\"heading\">link</a></p>\n```\n",
          "filepath": "data/repos/markedjs/marked-1.2/docs/USING_PRO.md",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "87e60679-1fe0-4cd3-b7a4-a41afbe322c1",
        "score": 0.015625,
        "payload": {
          "text": "    throw new Error('marked.parseInline(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked.parseInline(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  opt = merge$2({}, marked.defaults, opt || {});\n  checkSanitizeDeprecation$1(opt);\n\n  try {\n    const tokens = Lexer_1.lexInline(src, opt);\n    if (opt.walkTokens) {\n      marked.walkTokens(tokens, opt.walkTokens);\n    }\n    return Parser_1.parseInline(tokens, opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if (opt.silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape$3(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n};\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser_1;\nmarked.parser = Parser_1.parse;\n\nmarked.Renderer = Renderer_1;\nmarked.TextRenderer = TextRenderer_1;\n\nmarked.Lexer = Lexer_1;\nmarked.lexer = Lexer_1.lex;\n\nmarked.Tokenizer = Tokenizer_1;\n\nmarked.Slugger = Slugger_1;\n\nmarked.parse = marked;\n\nvar marked_1 = marked;\n\nexport default marked_1;",
          "filepath": "data/repos/markedjs/marked-1.2/lib/marked.esm.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 3
        }
      },
      {
        "id": "6719e784-a881-4239-824a-0f9c3171100c",
        "score": 0.015384615384615385,
        "payload": {
          "text": "**Marked version:**\n\n**Markdown flavor:** Markdown.pl|CommonMark|GitHub Flavored Markdown|n/a\n\n<!-- The NPM version or commit hash having the issue --> \n\n<!-- \n\n\tIf submitting something other than a defect with Marked itself, please use the following:\n\n**Proposal type:** new feature | project operations | other\n\n## What pain point are you perceiving?\n\n## What solution are you suggesting?\n\n-->\n\n## Expectation\n\n**CommonMark Demo:** [demo](https://spec.commonmark.org/dingus/)\n<!-- You can replace the link above with a permalink from: https://spec.commonmark.org/dingus/ -->\n\n<!-- Describe the output you are expecting from marked -->\n\n## Result\n\n**Marked Demo:** [demo](https://marked.js.org/demo/)\n<!-- You can replace the link above with a permalink from: https://marked.js.org/demo/ -->\n\n<!-- Describe the output you received from marked -->\n\n## What was attempted\n\n<!-- Describe what code combination got you there -->\n\n<!-- \n\tIf error is thrown add the following:\n\n## Call stack & console log\n\n-->\n",
          "filepath": "data/repos/markedjs/marked-1.2/.github/ISSUE_TEMPLATE.md",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1825",
    "model_patch": "diff --git a/lib/marked.js b/lib/marked.js\nindex 1234567..89abcde 100644\n--- a/lib/marked.js\n+++ b/lib/marked.js\n@@ -100,7 +100,11 @@ function parse(src, options) {\n   // other parsing logic...\n \n   // Check for GFM task lists\n-  if (options.gfm) {\n+  if (options.gfm && options.taskLists) {\n     // logic to parse task lists\n   }\n \n   // other parsing logic...\n@@ -200,6 +204,7 @@ function Lexer(options) {\n   this.tokens = [];\n   this.tokens.links = Object.create(null);\n   this.options = options || defaults;\n+  this.options.taskLists = this.options.gfm; // Enable task lists only if GFM is enabled\n   this.rules = block.normal;\n \n   if (this.options.gfm) {\n@@ -300,7 +305,7 @@ Lexer.prototype.token = function(src, top) {\n \n   while (src) {\n     // newline\n-    if (cap = this.rules.newline.exec(src)) {\n+    if (cap = this.rules.newline.exec(src)) {\n       src = src.substring(cap[0].length);\n       if (cap[0].length > 1) {\n         this.tokens.push({\n@@ -400,7 +405,7 @@ Lexer.prototype.token = function(src, top) {\n \n     // list item\n     if (cap = this.rules.item.exec(src)) {\n-      if (this.options.gfm) {\n+      if (this.options.gfm && this.options.taskLists) {\n         // logic to handle task list items\n       }\n       src = src.substring(cap[0].length);",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 174.59,
      "issue_embedding_time_ms": 174.59,
      "retrieval_time_ms_splade": 9.1,
      "retrieval_time_ms": 9.1,
      "total_retrieval_time_ms": 183.68,
      "generation_time_ms": 5226.52,
      "total_io_time_ms": 5410.2,
      "input_total_token_limit": null,
      "issue_text_tokens": 2094,
      "vlm_tokens": 0,
      "retrieved_tokens": 5691,
      "prompt_template_tokens": 519,
      "total_input_prompt_tokens": 8304,
      "output_generated_tokens": 367,
      "total_io_tokens": 8671,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nTask lists are rendered even when GFM is disabled\\n**Marked version:**\\r\\n\\r\\n1.2.3\\r\\n\\r\\n**Describe the bug**\\r\\n\\r\\nEven when `gfm: false`, task lists are rendered.\\r\\n\\r\\n**To Reproduce**\\r\\n\\r\\nSteps to reproduce the behavior:\\r\\n\\r\\n1. Setup options with `gfm: false`.\\r\\n2. Render the following:\\r\\n\\r\\n```\\r\\nUnordered:\\r\\n\\r\\n- [ ] A\\r\\n- [ ] B\\r\\n- [ ] C\\r\\n\\r\\nOrdered:\\r\\n\\r\\n1. [ ] A\\r\\n2. [ ] B\\r\\n3. [ ] C\\r\\n\\r\\nA | B\\r\\n--|--\\r\\n1 | 2\\r\\n3 | 4\\r\\n5 | 6\\r\\n```\\r\\n\\r\\n3. Confirm that the table is *not* rendered, but the **task list is rendered**:\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/613788/99151858-00ff8000-266c-11eb-942f-f9596eb92482.png)\\r\\n\\r\\nHere's some demos:\\r\\n\\r\\n- [Marked demo showing incorrect behavior](https://marked.js.org/demo/?text=Unordered%3A%0A%0A-%20%5B%20%5D%20A%0A-%20%5B%20%5D%20B%0A-%20%5B%20%5D%20C%0A%0AOrdered%3A%0A%0A1.%20%5B%20%5D%20A%0A2.%20%5B%20%5D%20B%0A3.%20%5B%20%5D%20C%0A%0AA%20%7C%20B%0A--%7C--%0A1%20%7C%202%0A3%20%7C%204%0A5%20%7C%206&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20false%2C%0A%20%22gfm%22%3A%20false%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22walkTokens%22%3A%20null%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=1.2.3)\\r\\n- [CommonMark demo showing expected behavior](https://spec.commonmark.org/dingus/?text=Unordered%3A%0A%0A-%20%5B%20%5D%20A%0A-%20%5B%20%5D%20B%0A-%20%5B%20%5D%20C%0A%0AOrdered%3A%0A%0A1.%20%5B%20%5D%20A%0A2.%20%5B%20%5D%20B%0A3.%20%5B%20%5D%20C%0A%0AA%20%7C%20B%0A--%7C--%0A1%20%7C%202%0A3%20%7C%204%0A5%20%7C%206)\\r\\n\\r\\n**Expected behavior**\\r\\n\\r\\nTask lists are [only an extension of GFM](https://github.github.com/gfm/#task-list-items-extension-), so I would expect the output to match CommonMark by using the `[ ]` as part of the rendered text:\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/613788/99151912-618ebd00-266c-11eb-9c5c-331921f3c2ef.png)\\r\\n\\nTask lists are rendered even when GFM is disabled\\n**Marked version:**\\r\\n\\r\\n1.2.3\\r\\n\\r\\n**Describe the bug**\\r\\n\\r\\nEven when `gfm: false`, task lists are rendered.\\r\\n\\r\\n**To Reproduce**\\r\\n\\r\\nSteps to reproduce the behavior:\\r\\n\\r\\n1. Setup options with `gfm: false`.\\r\\n2. Render the following:\\r\\n\\r\\n```\\r\\nUnordered:\\r\\n\\r\\n- [ ] A\\r\\n- [ ] B\\r\\n- [ ] C\\r\\n\\r\\nOrdered:\\r\\n\\r\\n1. [ ] A\\r\\n2. [ ] B\\r\\n3. [ ] C\\r\\n\\r\\nA | B\\r\\n--|--\\r\\n1 | 2\\r\\n3 | 4\\r\\n5 | 6\\r\\n```\\r\\n\\r\\n3. Confirm that the table is *not* rendered, but the **task list is rendered**:\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/613788/99151858-00ff8000-266c-11eb-942f-f9596eb92482.png)\\r\\n\\r\\nHere's some demos:\\r\\n\\r\\n- [Marked demo showing incorrect behavior](https://marked.js.org/demo/?text=Unordered%3A%0A%0A-%20%5B%20%5D%20A%0A-%20%5B%20%5D%20B%0A-%20%5B%20%5D%20C%0A%0AOrdered%3A%0A%0A1.%20%5B%20%5D%20A%0A2.%20%5B%20%5D%20B%0A3.%20%5B%20%5D%20C%0A%0AA%20%7C%20B%0A--%7C--%0A1%20%7C%202%0A3%20%7C%204%0A5%20%7C%206&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20false%2C%0A%20%22gfm%22%3A%20false%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22walkTokens%22%3A%20null%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=1.2.3)\\r\\n- [CommonMark demo showing expected behavior](https://spec.commonmark.org/dingus/?text=Unordered%3A%0A%0A-%20%5B%20%5D%20A%0A-%20%5B%20%5D%20B%0A-%20%5B%20%5D%20C%0A%0AOrdered%3A%0A%0A1.%20%5B%20%5D%20A%0A2.%20%5B%20%5D%20B%0A3.%20%5B%20%5D%20C%0A%0AA%20%7C%20B%0A--%7C--%0A1%20%7C%202%0A3%20%7C%204%0A5%20%7C%206)\\r\\n\\r\\n**Expected behavior**\\r\\n\\r\\nTask lists are [only an extension of GFM](https://github.github.com/gfm/#task-list-items-extension-), so I would expect the output to match CommonMark by using the `[ ]` as part of the rendered text:\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/613788/99151912-618ebd00-266c-11eb-9c5c-331921f3c2ef.png)\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of Bug_report.md]\\n---\\nname: Bug report\\nabout: Marked says it does this thing but does not\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior:\\n\\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\\n<!--\\n1. [Marked Demo](https://marked.js.org/demo/)\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\\n-->\\n\\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\\n<!--\\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\\n3. Actual output (or error) is...\\n-->\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n[end of Bug_report.md]\\n[start of update-specs.js]\\nconst fetch = require('node-fetch');\\nconst cheerio = require('cheerio');\\nconst marked = require('../');\\nconst htmlDiffer = require('./helpers/html-differ.js');\\nconst fs = require('fs');\\nconst path = require('path');\\n\\nfunction removeFiles(dir) {\\n  fs.readdirSync(dir).forEach(file => {\\n    fs.unlinkSync(path.join(dir, file));\\n  });\\n}\\n\\nasync function updateCommonmark(dir, options) {\\n  try {\\n    const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\\n    const pkg = await res.json();\\n    const version = pkg.version.replace(/^(\\\\d+\\\\.\\\\d+).*$/, '$1');\\n    const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\\n    const specs = await res2.json();\\n    specs.forEach(spec => {\\n      const html = marked(spec.markdown, options);\\n      if (!htmlDiffer.isEqual(html, spec.html)) {\\n        spec.shouldFail = true;\\n      }\\n    });\\n    fs.writeFileSync(path.resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\\\n');\\n    console.log(`Saved CommonMark v${version} specs`);\\n  } catch (ex) {\\n    console.log(ex);\\n  }\\n}\\n\\nasync function updateGfm(dir) {\\n  try {\\n    const res = await fetch('https://github.github.com/gfm/');\\n    const html = await res.text();\\n    const $ = cheerio.load(html);\\n    const version = $('.version').text().match(/\\\\d+\\\\.\\\\d+/)[0];\\n    if (!version) {\\n      throw new Error('No version found');\\n    }\\n    const specs = [];\\n    $('.extension').each((i, ext) => {\\n      const section = $('.definition', ext).text().trim().replace(/^\\\\d+\\\\.\\\\d+(.*?) \\\\(extension\\\\)[\\\\s\\\\S]*$/, '$1');\\n      $('.example', ext).each((j, exa) => {\\n        const example = +$(exa).attr('id').replace(/\\\\D/g, '');\\n        const markdown = $('.language-markdown', exa).text().trim();\\n        const html = $('.language-html', exa).text().trim();\\n        specs.push({\\n          section: `[extension] ${section}`,\\n          html,\\n          markdown,\\n          example\\n        });\\n      });\\n    });\\n\\n    specs.forEach(spec => {\\n      const html = marked(spec.markdown, { gfm: true, pedantic: false });\\n      if (!htmlDiffer.isEqual(html, spec.html)) {\\n        spec.shouldFail = true;\\n      }\\n    });\\n    fs.writeFileSync(path.resolve(dir, `./gfm.${version}.json`), JSON.stringify(specs, null, 2) + '\\\\n');\\n    console.log(`Saved GFM v${version} specs.`);\\n  } catch (ex) {\\n    console.log(ex);\\n  }\\n}\\n\\nconst commonmarkDir = path.resolve(__dirname, './specs/commonmark');\\nconst gfmDir = path.resolve(__dirname, './specs/gfm');\\nremoveFiles(commonmarkDir);\\nremoveFiles(gfmDir);\\nupdateCommonmark(commonmarkDir, { gfm: false, pedantic: false, headerIds: false });\\nupdateCommonmark(gfmDir, { gfm: true, pedantic: false, headerIds: false });\\nupdateGfm(gfmDir);\\n\\n[end of update-specs.js]\\n[start of marked.1.txt]\\nmarked(1)\\t\\t    General Commands Manual\\t\\t     marked(1)\\n\\nNAME\\n       marked - a javascript markdown parser\\n\\nSYNOPSIS\\n       marked  [-o  <output>]  [-i  <input>]  [--help] [--tokens] [--pedantic]\\n       [--gfm] [--breaks] [--sanitize]\\t[--smart-lists]  [--lang-prefix  <pre-\\n       fix>] [--no-etc...] [--silent] [filename]\\n\\n\\nDESCRIPTION\\n       marked is a full-featured javascript markdown parser, built for speed.\\n       It also includes multiple GFM features.\\n\\nEXAMPLES\\n       cat in.md | marked > out.html\\n\\n       echo \\\"hello *world*\\\" | marked\\n\\n       marked -o out.html -i in.md --gfm\\n\\n       marked --output=\\\"hello world.html\\\" -i in.md --no-breaks\\n\\nOPTIONS\\n       -o, --output [output]\\n              Specify file output. If none is specified, write to stdout.\\n\\n       -i, --input [input]\\n              Specify file input, otherwise use last argument as input file.\\n              If no input file is specified, read from stdin.\\n\\n       --test Makes sure the test(s) pass.\\n\\n              --glob [file] Specify which test to use.\\n\\n              --fix Fixes tests.\\n\\n              --bench Benchmarks the test(s).\\n\\n              --time Times The test(s).\\n\\n              --minified Runs test file(s) as minified.\\n\\n              --stop Stop process if a test fails.\\n\\n       -t, --tokens\\n              Output a token stream instead of html.\\n\\n       --pedantic\\n              Conform to obscure parts of markdown.pl as much as possible.\\n              Don't fix original markdown bugs.\\n\\n       --gfm  Enable github flavored markdown.\\n\\n       --breaks\\n              Enable GFM line breaks. Only works with the gfm option.\\n\\n       --sanitize\\n              Sanitize output. Ignore any HTML input.\\n\\n       --smart-lists\\n              Use smarter list behavior than the original markdown.\\n\\n       --lang-prefix [prefix]\\n              Set the prefix for code block classes.\\n\\n       --mangle\\n              Mangle email addresses.\\n\\n       --no-sanitize, -no-etc...\\n              The inverse of any of the marked options above.\\n\\n       --silent\\n              Silence error output.\\n\\n       -h, --help\\n              Display help information.\\n\\nCONFIGURATION\\n       For configuring and running programmatically.\\n\\n       Example\\n\\n           require('marked')('*foo*', { gfm: true });\\n\\nBUGS\\n       Please report any bugs to https://github.com/markedjs/marked.\\n\\nLICENSE\\n       Copyright (c) 2011-2014, Christopher Jeffrey (MIT License).\\n\\nSEE ALSO\\n       markdown(1), node.js(1)\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t     marked(1)\\n\\n[end of marked.1.txt]\\n[start of USING_ADVANCED.md]\\n## The `marked` function\\n\\n```js\\nmarked(markdownString [,options] [,callback])\\n```\\n\\n|Argument              |Type         |Notes                                                                                                |\\n|:---------------------|:------------|:----------------------------------------------------------------------------------------------------|\\n|markdownString        |`string`     |String of markdown source to be compiled.                                                            |\\n|<a href=\\\"#options\\\">options</a>|`object`|Hash of options. Can also use `marked.setOptions`.                                                |\\n|callback              |`function`   |Called when `markdownString` has been parsed. Can be used as second argument if no `options` present.|\\n\\n### Alternative using reference\\n\\n```js\\n// Create reference instance\\nconst marked = require('marked');\\n\\n// Set options\\n// `highlight` example uses `highlight.js`\\nmarked.setOptions({\\n  renderer: new marked.Renderer(),\\n  highlight: function(code, language) {\\n    const hljs = require('highlight.js');\\n    const validLanguage = hljs.getLanguage(language) ? language : 'plaintext';\\n    return hljs.highlight(validLanguage, code).value;\\n  },\\n  pedantic: false,\\n  gfm: true,\\n  breaks: false,\\n  sanitize: false,\\n  smartLists: true,\\n  smartypants: false,\\n  xhtml: false\\n});\\n\\n// Compile\\nconsole.log(marked(markdownString));\\n```\\n\\n<h2 id=\\\"options\\\">Options</h2>\\n\\n|Member      |Type      |Default  |Since    |Notes         |\\n|:-----------|:---------|:--------|:--------|:-------------|\\n|baseUrl     |`string`  |`null`   |0.3.9    |A prefix url for any relative link. |\\n|breaks      |`boolean` |`false`  |v0.2.7   |If true, add `<br>` on a single line break (copies GitHub behavior on comments, but not on rendered markdown files). Requires `gfm` be `true`.|\\n|gfm         |`boolean` |`true`   |v0.2.1   |If true, use approved [GitHub Flavored Markdown (GFM) specification](https://github.github.com/gfm/).|\\n|headerIds   |`boolean` |`true`   |v0.4.0   |If true, include an `id` attribute when emitting headings (h1, h2, h3, etc).|\\n|headerPrefix|`string`  |`''`     |v0.3.0   |A string to prefix the `id` attribute when emitting headings (h1, h2, h3, etc).|\\n|highlight   |`function`|`null`   |v0.3.0   |A function to highlight code blocks, see <a href=\\\"#highlight\\\">Asynchronous highlighting</a>.|\\n|langPrefix  |`string`  |`'language-'`|v0.3.0|A string to prefix the className in a `<code>` block. Useful for syntax highlighting.|\\n|mangle      |`boolean` |`true`   |v0.3.4   |If true, autolinked email address is escaped with HTML character references.|\\n|pedantic    |`boolean` |`false`  |v0.2.1   |If true, conform to the original `markdown.pl` as much as possible. Don't fix original markdown bugs or behavior. Turns off and overrides `gfm`.|\\n|renderer    |`object`  |`new Renderer()`|v0.3.0|An object containing functions to render tokens to HTML. See [extensibility](/using_pro) for more details.|\\n|sanitize    |`boolean` |`false`  |v0.2.1   |If true, sanitize the HTML passed into `markdownString` with the `sanitizer` function.<br>**Warning**: This feature is deprecated and it should NOT be used as it cannot be considered secure.<br>Instead use a sanitize library, like [DOMPurify](https://github.com/cure53/DOMPurify) (recommended), [sanitize-html](https://github.com/apostrophecms/sanitize-html) or [insane](https://github.com/bevacqua/insane) on the output HTML! |\\n|sanitizer   |`function`|`null`   |v0.3.4   |A function to sanitize the HTML passed into `markdownString`.|\\n|silent      |`boolean` |`false`  |v0.2.7   |If true, the parser does not throw any exception.|\\n|smartLists  |`boolean` |`false`  |v0.2.8   |If true, use smarter list behavior than those found in `markdown.pl`.|\\n|smartypants |`boolean` |`false`  |v0.2.9   |If true, use \\\"smart\\\" typographic punctuation for things like quotes and dashes.|\\n|tokenizer    |`object`  |`new Tokenizer()`|v1.0.0|An object containing functions to create tokens from markdown. See [extensibility](/using_pro) for more details.|\\n|walkTokens   |`function`  |`null`|v1.1.0|A function which is called for every token. See [extensibility](/using_pro) for more details.|\\n|xhtml       |`boolean` |`false`  |v0.3.2   |If true, emit self-closing HTML tags for void elements (&lt;br/&gt;, &lt;img/&gt;, etc.) with a \\\"/\\\" as required by XHTML.|\\n\\n<h2 id=\\\"inline\\\">Inline Markdown</h2>\\n\\nYou can parse inline markdown by running markdown through `marked.parseInline`.\\n\\n```js\\nconst blockHtml = marked('**strong** _em_');\\nconsole.log(blockHtml); // '<p><strong>strong</strong> <em>em</em></p>'\\n\\nconst inlineHtml = marked.parseInline('**strong** _em_');\\nconsole.log(inlineHtml); // '<strong>strong</strong> <em>em</em>'\\n```\\n\\n<h2 id=\\\"highlight\\\">Asynchronous highlighting</h2>\\n\\nUnlike `highlight.js` the `pygmentize.js` library uses asynchronous highlighting. This example demonstrates that marked is agnostic when it comes to the highlighter you use.\\n\\n```js\\nmarked.setOptions({\\n  highlight: function(code, lang, callback) {\\n    require('pygmentize-bundled') ({ lang: lang, format: 'html' }, code, function (err, result) {\\n      callback(err, result.toString());\\n    });\\n  }\\n});\\n\\nconsole.log(marked(markdownString));\\n```\\n\\nIn both examples, `code` is a `string` representing the section of code to pass to the highlighter. In this example, `lang` is a `string` informing the highlighter what programming language to use for the `code` and `callback` is the `function` the asynchronous highlighter will call once complete.\\n\\n<h2 id=\\\"workers\\\">Workers</h2>\\n\\nTo prevent ReDoS attacks you can run marked on a worker and terminate it when parsing takes longer than usual.\\n\\nMarked can be run in a [worker thread](https://nodejs.org/api/worker_threads.html) on a node server, or a [web worker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) in a browser.\\n\\n### Node Worker Thread\\n\\n```js\\n// markedWorker.js\\n\\nconst marked = require('marked');\\nconst { parentPort } = require('worker_threads');\\n\\nparentPort.on('message', (markdownString) => {\\n  parentPort.postMessage(marked(markdownString));\\n});\\n```\\n\\n```js\\n// index.js\\n\\nconst { Worker } = require('worker_threads');\\nconst markedWorker = new Worker('./markedWorker.js');\\n\\nconst markedTimeout = setTimeout(() => {\\n  markedWorker.terminate();\\n  throw new Error('Marked took too long!');\\n}, timeoutLimit);\\n\\nmarkedWorker.on('message', (html) => {\\n  clearTimeout(markedTimeout);\\n  console.log(html);\\n  markedWorker.terminate();\\n});\\n\\nmarkedWorker.postMessage(markdownString);\\n```\\n\\n### Web Worker\\n\\n> **NOTE**: Web Workers send the payload from `postMessage` in an object with the payload in a `.data` property\\n\\n```js\\n// markedWorker.js\\n\\nimportScripts('path/to/marked.min.js');\\n\\nonmessage = (e) => {\\n  const markdownString = e.data\\n  postMessage(marked(markdownString));\\n};\\n```\\n\\n```js\\n// script.js\\n\\nconst markedWorker = new Worker('./markedWorker.js');\\n\\nconst markedTimeout = setTimeout(() => {\\n  markedWorker.terminate();\\n  throw new Error('Marked took too long!');\\n}, timeoutLimit);\\n\\nmarkedWorker.onmessage = (e) => {\\n  clearTimeout(markedTimeout);\\n  const html = e.data;\\n  console.log(html);\\n  markedWorker.terminate();\\n};\\n\\nmarkedWorker.postMessage(markdownString);\\n```\\n\\n[end of USING_ADVANCED.md]\\n[start of USING_PRO.md]\\n## Extending Marked\\n\\nTo champion the single-responsibility and open/closed principles, we have tried to make it relatively painless to extend marked. If you are looking to add custom functionality, this is the place to start.\\n\\n<h2 id=\\\"use\\\">marked.use()</h2>\\n\\n`marked.use(options)` is the recommended way to extend marked. The options object can contain any [option](/using_advanced#options) available in marked.\\n\\nThe `renderer` and `tokenizer` options can be an object with functions that will be merged into the `renderer` and `tokenizer` respectively.\\n\\nThe `renderer` and `tokenizer` functions can return false to fallback to the previous function.\\n\\nThe `walkTokens` option can be a function that will be called with every token before rendering. When calling `use` multiple times with different `walkTokens` functions each function will be called in the **reverse** order in which they were assigned.\\n\\nAll other options will overwrite previously set options.\\n\\n<h2 id=\\\"renderer\\\">The renderer</h2>\\n\\nThe renderer defines the output of the parser.\\n\\n**Example:** Overriding default heading token by adding an embedded anchor tag like on GitHub.\\n\\n```js\\n// Create reference instance\\nconst marked = require('marked');\\n\\n// Override function\\nconst renderer = {\\n  heading(text, level) {\\n    const escapedText = text.toLowerCase().replace(/[^\\\\w]+/g, '-');\\n\\n    return `\\n            <h${level}>\\n              <a name=\\\"${escapedText}\\\" class=\\\"anchor\\\" href=\\\"#${escapedText}\\\">\\n                <span class=\\\"header-link\\\"></span>\\n              </a>\\n              ${text}\\n            </h${level}>`;\\n  }\\n};\\n\\nmarked.use({ renderer });\\n\\n// Run marked\\nconsole.log(marked('# heading+'));\\n```\\n\\n**Output:**\\n\\n```html\\n<h1>\\n  <a name=\\\"heading-\\\" class=\\\"anchor\\\" href=\\\"#heading-\\\">\\n    <span class=\\\"header-link\\\"></span>\\n  </a>\\n  heading+\\n</h1>\\n```\\n\\n### Block level renderer methods\\n\\n- code(*string* code, *string* infostring, *boolean* escaped)\\n- blockquote(*string* quote)\\n- html(*string* html)\\n- heading(*string* text, *number* level, *string* raw, *Slugger* slugger)\\n- hr()\\n- list(*string* body, *boolean* ordered, *number* start)\\n- listitem(*string* text, *boolean* task, *boolean* checked)\\n- checkbox(*boolean* checked)\\n- paragraph(*string* text)\\n- table(*string* header, *string* body)\\n- tablerow(*string* content)\\n- tablecell(*string* content, *object* flags)\\n\\n`slugger` has the `slug` method to create a unique id from value:\\n\\n```js\\nslugger.slug('foo')   // foo\\nslugger.slug('foo')   // foo-1\\nslugger.slug('foo')   // foo-2\\nslugger.slug('foo 1') // foo-1-1\\nslugger.slug('foo-1') // foo-1-2\\n...\\n```\\n\\n`slugger.slug` can also be called with the `dryrun` option for stateless operation:\\n```js\\nslugger.slug('foo')                    // foo\\nslugger.slug('foo')                    // foo-1\\nslugger.slug('foo')                    // foo-2\\nslugger.slug('foo', { dryrun: true })  // foo-3\\nslugger.slug('foo', { dryrun: true })  // foo-3\\nslugger.slug('foo')                    // foo-3\\nslugger.slug('foo')                    // foo-4\\n...\\n```\\n\\n`flags` has the following properties:\\n\\n```js\\n{\\n    header: true || false,\\n    align: 'center' || 'left' || 'right'\\n}\\n```\\n\\n### Inline level renderer methods\\n\\n- strong(*string* text)\\n- em(*string* text)\\n- codespan(*string* code)\\n- br()\\n- del(*string* text)\\n- link(*string* href, *string* title, *string* text)\\n- image(*string* href, *string* title, *string* text)\\n- text(*string* text)\\n\\n<h2 id=\\\"tokenizer\\\">The tokenizer</h2>\\n\\nThe tokenizer defines how to turn markdown text into tokens.\\n\\n**Example:** Overriding default `codespan` tokenizer to include LaTeX.\\n\\n```js\\n// Create reference instance\\nconst marked = require('marked');\\n\\n// Override function\\nconst tokenizer = {\\n  codespan(src) {\\n    const match = src.match(/\\\\$+([^\\\\$\\\\n]+?)\\\\$+/);\\n    if (match) {\\n      return {\\n        type: 'codespan',\\n        raw: match[0],\\n        text: match[1].trim()\\n      };\\n    }\\n\\n    // return false to use original codespan tokenizer\\n    return false;\\n  }\\n};\\n\\nmarked.use({ tokenizer });\\n\\n// Run marked\\nconsole.log(marked('$ latex code $\\\\n\\\\n` other code `'));\\n```\\n\\n**Output:**\\n\\n```html\\n<p><code>latex code</code></p>\\n<p><code>other code</code></p>\\n```\\n\\n### Block level tokenizer methods\\n\\n- space(*string* src)\\n- code(*string* src, *array* tokens)\\n- fences(*string* src)\\n- heading(*string* src)\\n- nptable(*string* src)\\n- hr(*string* src)\\n- blockquote(*string* src)\\n- list(*string* src)\\n- html(*string* src)\\n- def(*string* src)\\n- table(*string* src)\\n- lheading(*string* src)\\n- paragraph(*string* src)\\n- text(*string* src, *array* tokens)\\n\\n### Inline level tokenizer methods\\n\\n- escape(*string* src)\\n- tag(*string* src, *bool* inLink, *bool* inRawBlock)\\n- link(*string* src)\\n- reflink(*string* src, *object* links)\\n- strong(*string* src)\\n- em(*string* src)\\n- codespan(*string* src)\\n- br(*string* src)\\n- del(*string* src)\\n- autolink(*string* src, *function* mangle)\\n- url(*string* src, *function* mangle)\\n- inlineText(*string* src, *bool* inRawBlock, *function* smartypants)\\n\\n`mangle` is a method that changes text to HTML character references:\\n\\n```js\\nmangle('test@example.com')\\n// \\\"&#x74;&#101;&#x73;&#116;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#x63;&#111;&#x6d;\\\"\\n```\\n\\n`smartypants` is a method that translates plain ASCII punctuation characters into \\u201csmart\\u201d typographic punctuation HTML entities:\\n\\nhttps://daringfireball.net/projects/smartypants/\\n\\n```js\\nsmartypants('\\\"this ... string\\\"')\\n// \\\"\\u201cthis \\u2026 string\\u201d\\\"\\n```\\n\\n<h2 id=\\\"walk-tokens\\\">Walk Tokens</h2>\\n\\nThe walkTokens function gets called with every token. Child tokens are called before moving on to sibling tokens. Each token is passed by reference so updates are persisted when passed to the parser. The return value of the function is ignored.\\n\\n**Example:** Overriding heading tokens to start at h2.\\n\\n```js\\nconst marked = require('marked');\\n\\n// Override function\\nconst walkTokens = (token) => {\\n  if (token.type === 'heading') {\\n    token.depth += 1;\\n  }\\n};\\n\\nmarked.use({ walkTokens });\\n\\n// Run marked\\nconsole.log(marked('# heading 2\\\\n\\\\n## heading 3'));\\n```\\n\\n**Output:**\\n\\n```html\\n<h2 id=\\\"heading-2\\\">heading 2</h2>\\n<h3 id=\\\"heading-3\\\">heading 3</h3>\\n```\\n\\n<h2 id=\\\"lexer\\\">The lexer</h2>\\n\\nThe lexer takes a markdown string and calls the tokenizer functions.\\n\\n<h2 id=\\\"parser\\\">The parser</h2>\\n\\nThe parser takes tokens as input and calls the renderer functions.\\n\\n***\\n\\n<h2 id=\\\"extend\\\">Access to lexer and parser</h2>\\n\\nYou also have direct access to the lexer and parser if you so desire.\\n\\n``` js\\nconst tokens = marked.lexer(markdown, options);\\nconsole.log(marked.parser(tokens, options));\\n```\\n\\n``` js\\nconst lexer = new marked.Lexer(options);\\nconst tokens = lexer.lex(markdown);\\nconsole.log(tokens);\\nconsole.log(lexer.tokenizer.rules.block); // block level rules used\\nconsole.log(lexer.tokenizer.rules.inline); // inline level rules used\\nconsole.log(marked.Lexer.rules.block); // all block level rules\\nconsole.log(marked.Lexer.rules.inline); // all inline level rules\\n```\\n\\n``` bash\\n$ node\\n> require('marked').lexer('> I am using marked.')\\n[\\n  {\\n    type: \\\"blockquote\\\",\\n    raw: \\\"> I am using marked.\\\",\\n    tokens: [\\n      {\\n        type: \\\"paragraph\\\",\\n        raw: \\\"I am using marked.\\\",\\n        text: \\\"I am using marked.\\\",\\n        tokens: [\\n          {\\n            type: \\\"text\\\",\\n            raw: \\\"I am using marked.\\\",\\n            text: \\\"I am using marked.\\\"\\n          }\\n        ]\\n      }\\n    ]\\n  },\\n  links: {}\\n]\\n```\\n\\nThe Lexer builds an array of tokens, which will be passed to the Parser.\\nThe Parser processes each token in the token array:\\n\\n``` js\\nconst marked = require('marked');\\n\\nconst md = `\\n  # heading\\n\\n  [link][1]\\n\\n  [1]: #heading \\\"heading\\\"\\n`;\\n\\nconst tokens = marked.lexer(md);\\nconsole.log(tokens);\\n\\nconst html = marked.parser(tokens);\\nconsole.log(html);\\n```\\n\\n``` bash\\n[\\n  {\\n    type: \\\"heading\\\",\\n    raw: \\\"  # heading\\\\n\\\\n\\\",\\n    depth: 1,\\n    text: \\\"heading\\\",\\n    tokens: [\\n      {\\n        type: \\\"text\\\",\\n        raw: \\\"heading\\\",\\n        text: \\\"heading\\\"\\n      }\\n    ]\\n  },\\n  {\\n    type: \\\"paragraph\\\",\\n    raw: \\\"  [link][1]\\\",\\n    text: \\\"  [link][1]\\\",\\n    tokens: [\\n      {\\n        type: \\\"text\\\",\\n        raw: \\\"  \\\",\\n        text: \\\"  \\\"\\n      },\\n      {\\n        type: \\\"link\\\",\\n        raw: \\\"[link][1]\\\",\\n        text: \\\"link\\\",\\n        href: \\\"#heading\\\",\\n        title: \\\"heading\\\",\\n        tokens: [\\n          {\\n            type: \\\"text\\\",\\n            raw: \\\"link\\\",\\n            text: \\\"link\\\"\\n          }\\n        ]\\n      }\\n    ]\\n  },\\n  {\\n    type: \\\"space\\\",\\n    raw: \\\"\\\\n\\\\n\\\"\\n  },\\n  links: {\\n    \\\"1\\\": {\\n      href: \\\"#heading\\\",\\n      title: \\\"heading\\\"\\n    }\\n  }\\n]\\n<h1 id=\\\"heading\\\">heading</h1>\\n<p>  <a href=\\\"#heading\\\" title=\\\"heading\\\">link</a></p>\\n```\\n\\n[end of USING_PRO.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "Bug_report.md",
        "update-specs.js",
        "marked.1.txt",
        "USING_ADVANCED.md",
        "USING_PRO.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "2d9f70e1-0017-4cb9-842c-819aaef86744",
        "score": 0.01639344262295082,
        "payload": {
          "text": "---\nname: Bug report\nabout: Marked says it does this thing but does not\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\n<!--\n1. [Marked Demo](https://marked.js.org/demo/)\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\n-->\n\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\n<!--\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\n3. Actual output (or error) is...\n-->\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n",
          "filepath": "data/repos/markedjs/marked-1.2/.github/ISSUE_TEMPLATE/Bug_report.md",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "e4c8734e-d672-43f8-937d-62c765782877",
        "score": 0.016129032258064516,
        "payload": {
          "text": "const fetch = require('node-fetch');\nconst cheerio = require('cheerio');\nconst marked = require('../');\nconst htmlDiffer = require('./helpers/html-differ.js');\nconst fs = require('fs');\nconst path = require('path');\n\nfunction removeFiles(dir) {\n  fs.readdirSync(dir).forEach(file => {\n    fs.unlinkSync(path.join(dir, file));\n  });\n}\n\nasync function updateCommonmark(dir, options) {\n  try {\n    const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\n    const pkg = await res.json();\n    const version = pkg.version.replace(/^(\\d+\\.\\d+).*$/, '$1');\n    const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\n    const specs = await res2.json();\n    specs.forEach(spec => {\n      const html = marked(spec.markdown, options);\n      if (!htmlDiffer.isEqual(html, spec.html)) {\n        spec.shouldFail = true;\n      }\n    });\n    fs.writeFileSync(path.resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n    console.log(`Saved CommonMark v${version} specs`);\n  } catch (ex) {\n    console.log(ex);\n  }\n}\n\nasync function updateGfm(dir) {\n  try {\n    const res = await fetch('https://github.github.com/gfm/');\n    const html = await res.text();\n    const $ = cheerio.load(html);\n    const version = $('.version').text().match(/\\d+\\.\\d+/)[0];\n    if (!version) {\n      throw new Error('No version found');\n    }\n    const specs = [];\n    $('.extension').each((i, ext) => {\n      const section = $('.definition', ext).text().trim().replace(/^\\d+\\.\\d+(.*?) \\(extension\\)[\\s\\S]*$/, '$1');\n      $('.example', ext).each((j, exa) => {\n        const example = +$(exa).attr('id').replace(/\\D/g, '');\n        const markdown = $('.language-markdown', exa).text().trim();\n        const html = $('.language-html', exa).text().trim();\n        specs.push({\n          section: `[extension] ${section}`,\n          html,\n          markdown,\n          example\n        });\n      });\n    });\n\n    specs.forEach(spec => {\n      const html = marked(spec.markdown, { gfm: true, pedantic: false });\n      if (!htmlDiffer.isEqual(html, spec.html)) {\n        spec.shouldFail = true;\n      }\n    });\n    fs.writeFileSync(path.resolve(dir, `./gfm.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n    console.log(`Saved GFM v${version} specs.`);\n  } catch (ex) {\n    console.log(ex);\n  }\n}\n\nconst commonmarkDir = path.resolve(__dirname, './specs/commonmark');\nconst gfmDir = path.resolve(__dirname, './specs/gfm');\nremoveFiles(commonmarkDir);\nremoveFiles(gfmDir);\nupdateCommonmark(commonmarkDir, { gfm: false, pedantic: false, headerIds: false });\nupdateCommonmark(gfmDir, { gfm: true, pedantic: false, headerIds: false });\nupdateGfm(gfmDir);\n",
          "filepath": "data/repos/markedjs/marked-1.2/test/update-specs.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "e245b210-f587-4aef-8a66-36862ff35825",
        "score": 0.015873015873015872,
        "payload": {
          "text": "marked(1)\t\t    General Commands Manual\t\t     marked(1)\n\nNAME\n       marked - a javascript markdown parser\n\nSYNOPSIS\n       marked  [-o  <output>]  [-i  <input>]  [--help] [--tokens] [--pedantic]\n       [--gfm] [--breaks] [--sanitize]\t[--smart-lists]  [--lang-prefix  <pre-\n       fix>] [--no-etc...] [--silent] [filename]\n\n\nDESCRIPTION\n       marked is a full-featured javascript markdown parser, built for speed.\n       It also includes multiple GFM features.\n\nEXAMPLES\n       cat in.md | marked > out.html\n\n       echo \"hello *world*\" | marked\n\n       marked -o out.html -i in.md --gfm\n\n       marked --output=\"hello world.html\" -i in.md --no-breaks\n\nOPTIONS\n       -o, --output [output]\n              Specify file output. If none is specified, write to stdout.\n\n       -i, --input [input]\n              Specify file input, otherwise use last argument as input file.\n              If no input file is specified, read from stdin.\n\n       --test Makes sure the test(s) pass.\n\n              --glob [file] Specify which test to use.\n\n              --fix Fixes tests.\n\n              --bench Benchmarks the test(s).\n\n              --time Times The test(s).\n\n              --minified Runs test file(s) as minified.\n\n              --stop Stop process if a test fails.\n\n       -t, --tokens\n              Output a token stream instead of html.\n\n       --pedantic\n              Conform to obscure parts of markdown.pl as much as possible.\n              Don't fix original markdown bugs.\n\n       --gfm  Enable github flavored markdown.\n\n       --breaks\n              Enable GFM line breaks. Only works with the gfm option.\n\n       --sanitize\n              Sanitize output. Ignore any HTML input.\n\n       --smart-lists\n              Use smarter list behavior than the original markdown.\n\n       --lang-prefix [prefix]\n              Set the prefix for code block classes.\n\n       --mangle\n              Mangle email addresses.\n\n       --no-sanitize, -no-etc...\n              The inverse of any of the marked options above.\n\n       --silent\n              Silence error output.\n\n       -h, --help\n              Display help information.\n\nCONFIGURATION\n       For configuring and running programmatically.\n\n       Example\n\n           require('marked')('*foo*', { gfm: true });\n\nBUGS\n       Please report any bugs to https://github.com/markedjs/marked.\n\nLICENSE\n       Copyright (c) 2011-2014, Christopher Jeffrey (MIT License).\n\nSEE ALSO\n       markdown(1), node.js(1)\n\n\t\t\t\t\t\t\t\t     marked(1)\n",
          "filepath": "data/repos/markedjs/marked-1.2/man/marked.1.txt",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "e292f6a1-8b31-4b28-9ad4-c73def0ea132",
        "score": 0.015625,
        "payload": {
          "text": "## The `marked` function\n\n```js\nmarked(markdownString [,options] [,callback])\n```\n\n|Argument              |Type         |Notes                                                                                                |\n|:---------------------|:------------|:----------------------------------------------------------------------------------------------------|\n|markdownString        |`string`     |String of markdown source to be compiled.                                                            |\n|<a href=\"#options\">options</a>|`object`|Hash of options. Can also use `marked.setOptions`.                                                |\n|callback              |`function`   |Called when `markdownString` has been parsed. Can be used as second argument if no `options` present.|\n\n### Alternative using reference\n\n```js\n// Create reference instance\nconst marked = require('marked');\n\n// Set options\n// `highlight` example uses `highlight.js`\nmarked.setOptions({\n  renderer: new marked.Renderer(),\n  highlight: function(code, language) {\n    const hljs = require('highlight.js');\n    const validLanguage = hljs.getLanguage(language) ? language : 'plaintext';\n    return hljs.highlight(validLanguage, code).value;\n  },\n  pedantic: false,\n  gfm: true,\n  breaks: false,\n  sanitize: false,\n  smartLists: true,\n  smartypants: false,\n  xhtml: false\n});\n\n// Compile\nconsole.log(marked(markdownString));\n```\n\n<h2 id=\"options\">Options</h2>\n\n|Member      |Type      |Default  |Since    |Notes         |\n|:-----------|:---------|:--------|:--------|:-------------|\n|baseUrl     |`string`  |`null`   |0.3.9    |A prefix url for any relative link. |\n|breaks      |`boolean` |`false`  |v0.2.7   |If true, add `<br>` on a single line break (copies GitHub behavior on comments, but not on rendered markdown files). Requires `gfm` be `true`.|\n|gfm         |`boolean` |`true`   |v0.2.1   |If true, use approved [GitHub Flavored Markdown (GFM) specification](https://github.github.com/gfm/).|\n|headerIds   |`boolean` |`true`   |v0.4.0   |If true, include an `id` attribute when emitting headings (h1, h2, h3, etc).|\n|headerPrefix|`string`  |`''`     |v0.3.0   |A string to prefix the `id` attribute when emitting headings (h1, h2, h3, etc).|\n|highlight   |`function`|`null`   |v0.3.0   |A function to highlight code blocks, see <a href=\"#highlight\">Asynchronous highlighting</a>.|\n|langPrefix  |`string`  |`'language-'`|v0.3.0|A string to prefix the className in a `<code>` block. Useful for syntax highlighting.|\n|mangle      |`boolean` |`true`   |v0.3.4   |If true, autolinked email address is escaped with HTML character references.|\n|pedantic    |`boolean` |`false`  |v0.2.1   |If true, conform to the original `markdown.pl` as much as possible. Don't fix original markdown bugs or behavior. Turns off and overrides `gfm`.|\n|renderer    |`object`  |`new Renderer()`|v0.3.0|An object containing functions to render tokens to HTML. See [extensibility](/using_pro) for more details.|\n|sanitize    |`boolean` |`false`  |v0.2.1   |If true, sanitize the HTML passed into `markdownString` with the `sanitizer` function.<br>**Warning**: This feature is deprecated and it should NOT be used as it cannot be considered secure.<br>Instead use a sanitize library, like [DOMPurify](https://github.com/cure53/DOMPurify) (recommended), [sanitize-html](https://github.com/apostrophecms/sanitize-html) or [insane](https://github.com/bevacqua/insane) on the output HTML! |\n|sanitizer   |`function`|`null`   |v0.3.4   |A function to sanitize the HTML passed into `markdownString`.|\n|silent      |`boolean` |`false`  |v0.2.7   |If true, the parser does not throw any exception.|\n|smartLists  |`boolean` |`false`  |v0.2.8   |If true, use smarter list behavior than those found in `markdown.pl`.|\n|smartypants |`boolean` |`false`  |v0.2.9   |If true, use \"smart\" typographic punctuation for things like quotes and dashes.|\n|tokenizer    |`object`  |`new Tokenizer()`|v1.0.0|An object containing functions to create tokens from markdown. See [extensibility](/using_pro) for more details.|\n|walkTokens   |`function`  |`null`|v1.1.0|A function which is called for every token. See [extensibility](/using_pro) for more details.|\n|xhtml       |`boolean` |`false`  |v0.3.2   |If true, emit self-closing HTML tags for void elements (&lt;br/&gt;, &lt;img/&gt;, etc.) with a \"/\" as required by XHTML.|\n\n<h2 id=\"inline\">Inline Markdown</h2>\n\nYou can parse inline markdown by running markdown through `marked.parseInline`.\n\n```js\nconst blockHtml = marked('**strong** _em_');\nconsole.log(blockHtml); // '<p><strong>strong</strong> <em>em</em></p>'\n\nconst inlineHtml = marked.parseInline('**strong** _em_');\nconsole.log(inlineHtml); // '<strong>strong</strong> <em>em</em>'\n```\n\n<h2 id=\"highlight\">Asynchronous highlighting</h2>\n\nUnlike `highlight.js` the `pygmentize.js` library uses asynchronous highlighting. This example demonstrates that marked is agnostic when it comes to the highlighter you use.\n\n```js\nmarked.setOptions({\n  highlight: function(code, lang, callback) {\n    require('pygmentize-bundled') ({ lang: lang, format: 'html' }, code, function (err, result) {\n      callback(err, result.toString());\n    });\n  }\n});\n\nconsole.log(marked(markdownString));\n```\n\nIn both examples, `code` is a `string` representing the section of code to pass to the highlighter. In this example, `lang` is a `string` informing the highlighter what programming language to use for the `code` and `callback` is the `function` the asynchronous highlighter will call once complete.\n\n<h2 id=\"workers\">Workers</h2>\n\nTo prevent ReDoS attacks you can run marked on a worker and terminate it when parsing takes longer than usual.\n\nMarked can be run in a [worker thread](https://nodejs.org/api/worker_threads.html) on a node server, or a [web worker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) in a browser.\n\n### Node Worker Thread\n\n```js\n// markedWorker.js\n\nconst marked = require('marked');\nconst { parentPort } = require('worker_threads');\n\nparentPort.on('message', (markdownString) => {\n  parentPort.postMessage(marked(markdownString));\n});\n```\n\n```js\n// index.js\n\nconst { Worker } = require('worker_threads');\nconst markedWorker = new Worker('./markedWorker.js');\n\nconst markedTimeout = setTimeout(() => {\n  markedWorker.terminate();\n  throw new Error('Marked took too long!');\n}, timeoutLimit);\n\nmarkedWorker.on('message', (html) => {\n  clearTimeout(markedTimeout);\n  console.log(html);\n  markedWorker.terminate();\n});\n\nmarkedWorker.postMessage(markdownString);\n```\n\n### Web Worker\n\n> **NOTE**: Web Workers send the payload from `postMessage` in an object with the payload in a `.data` property\n\n```js\n// markedWorker.js\n\nimportScripts('path/to/marked.min.js');\n\nonmessage = (e) => {\n  const markdownString = e.data\n  postMessage(marked(markdownString));\n};\n```\n\n```js\n// script.js\n\nconst markedWorker = new Worker('./markedWorker.js');\n\nconst markedTimeout = setTimeout(() => {\n  markedWorker.terminate();\n  throw new Error('Marked took too long!');\n}, timeoutLimit);\n\nmarkedWorker.onmessage = (e) => {\n  clearTimeout(markedTimeout);\n  const html = e.data;\n  console.log(html);\n  markedWorker.terminate();\n};\n\nmarkedWorker.postMessage(markdownString);\n```\n",
          "filepath": "data/repos/markedjs/marked-1.2/docs/USING_ADVANCED.md",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "aa4af12d-01cf-4144-b66a-44630609d6b4",
        "score": 0.015384615384615385,
        "payload": {
          "text": "## Extending Marked\n\nTo champion the single-responsibility and open/closed principles, we have tried to make it relatively painless to extend marked. If you are looking to add custom functionality, this is the place to start.\n\n<h2 id=\"use\">marked.use()</h2>\n\n`marked.use(options)` is the recommended way to extend marked. The options object can contain any [option](/using_advanced#options) available in marked.\n\nThe `renderer` and `tokenizer` options can be an object with functions that will be merged into the `renderer` and `tokenizer` respectively.\n\nThe `renderer` and `tokenizer` functions can return false to fallback to the previous function.\n\nThe `walkTokens` option can be a function that will be called with every token before rendering. When calling `use` multiple times with different `walkTokens` functions each function will be called in the **reverse** order in which they were assigned.\n\nAll other options will overwrite previously set options.\n\n<h2 id=\"renderer\">The renderer</h2>\n\nThe renderer defines the output of the parser.\n\n**Example:** Overriding default heading token by adding an embedded anchor tag like on GitHub.\n\n```js\n// Create reference instance\nconst marked = require('marked');\n\n// Override function\nconst renderer = {\n  heading(text, level) {\n    const escapedText = text.toLowerCase().replace(/[^\\w]+/g, '-');\n\n    return `\n            <h${level}>\n              <a name=\"${escapedText}\" class=\"anchor\" href=\"#${escapedText}\">\n                <span class=\"header-link\"></span>\n              </a>\n              ${text}\n            </h${level}>`;\n  }\n};\n\nmarked.use({ renderer });\n\n// Run marked\nconsole.log(marked('# heading+'));\n```\n\n**Output:**\n\n```html\n<h1>\n  <a name=\"heading-\" class=\"anchor\" href=\"#heading-\">\n    <span class=\"header-link\"></span>\n  </a>\n  heading+\n</h1>\n```\n\n### Block level renderer methods\n\n- code(*string* code, *string* infostring, *boolean* escaped)\n- blockquote(*string* quote)\n- html(*string* html)\n- heading(*string* text, *number* level, *string* raw, *Slugger* slugger)\n- hr()\n- list(*string* body, *boolean* ordered, *number* start)\n- listitem(*string* text, *boolean* task, *boolean* checked)\n- checkbox(*boolean* checked)\n- paragraph(*string* text)\n- table(*string* header, *string* body)\n- tablerow(*string* content)\n- tablecell(*string* content, *object* flags)\n\n`slugger` has the `slug` method to create a unique id from value:\n\n```js\nslugger.slug('foo')   // foo\nslugger.slug('foo')   // foo-1\nslugger.slug('foo')   // foo-2\nslugger.slug('foo 1') // foo-1-1\nslugger.slug('foo-1') // foo-1-2\n...\n```\n\n`slugger.slug` can also be called with the `dryrun` option for stateless operation:\n```js\nslugger.slug('foo')                    // foo\nslugger.slug('foo')                    // foo-1\nslugger.slug('foo')                    // foo-2\nslugger.slug('foo', { dryrun: true })  // foo-3\nslugger.slug('foo', { dryrun: true })  // foo-3\nslugger.slug('foo')                    // foo-3\nslugger.slug('foo')                    // foo-4\n...\n```\n\n`flags` has the following properties:\n\n```js\n{\n    header: true || false,\n    align: 'center' || 'left' || 'right'\n}\n```\n\n### Inline level renderer methods\n\n- strong(*string* text)\n- em(*string* text)\n- codespan(*string* code)\n- br()\n- del(*string* text)\n- link(*string* href, *string* title, *string* text)\n- image(*string* href, *string* title, *string* text)\n- text(*string* text)\n\n<h2 id=\"tokenizer\">The tokenizer</h2>\n\nThe tokenizer defines how to turn markdown text into tokens.\n\n**Example:** Overriding default `codespan` tokenizer to include LaTeX.\n\n```js\n// Create reference instance\nconst marked = require('marked');\n\n// Override function\nconst tokenizer = {\n  codespan(src) {\n    const match = src.match(/\\$+([^\\$\\n]+?)\\$+/);\n    if (match) {\n      return {\n        type: 'codespan',\n        raw: match[0],\n        text: match[1].trim()\n      };\n    }\n\n    // return false to use original codespan tokenizer\n    return false;\n  }\n};\n\nmarked.use({ tokenizer });\n\n// Run marked\nconsole.log(marked('$ latex code $\\n\\n` other code `'));\n```\n\n**Output:**\n\n```html\n<p><code>latex code</code></p>\n<p><code>other code</code></p>\n```\n\n### Block level tokenizer methods\n\n- space(*string* src)\n- code(*string* src, *array* tokens)\n- fences(*string* src)\n- heading(*string* src)\n- nptable(*string* src)\n- hr(*string* src)\n- blockquote(*string* src)\n- list(*string* src)\n- html(*string* src)\n- def(*string* src)\n- table(*string* src)\n- lheading(*string* src)\n- paragraph(*string* src)\n- text(*string* src, *array* tokens)\n\n### Inline level tokenizer methods\n\n- escape(*string* src)\n- tag(*string* src, *bool* inLink, *bool* inRawBlock)\n- link(*string* src)\n- reflink(*string* src, *object* links)\n- strong(*string* src)\n- em(*string* src)\n- codespan(*string* src)\n- br(*string* src)\n- del(*string* src)\n- autolink(*string* src, *function* mangle)\n- url(*string* src, *function* mangle)\n- inlineText(*string* src, *bool* inRawBlock, *function* smartypants)\n\n`mangle` is a method that changes text to HTML character references:\n\n```js\nmangle('test@example.com')\n// \"&#x74;&#101;&#x73;&#116;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#x63;&#111;&#x6d;\"\n```\n\n`smartypants` is a method that translates plain ASCII punctuation characters into \u201csmart\u201d typographic punctuation HTML entities:\n\nhttps://daringfireball.net/projects/smartypants/\n\n```js\nsmartypants('\"this ... string\"')\n// \"\u201cthis \u2026 string\u201d\"\n```\n\n<h2 id=\"walk-tokens\">Walk Tokens</h2>\n\nThe walkTokens function gets called with every token. Child tokens are called before moving on to sibling tokens. Each token is passed by reference so updates are persisted when passed to the parser. The return value of the function is ignored.\n\n**Example:** Overriding heading tokens to start at h2.\n\n```js\nconst marked = require('marked');\n\n// Override function\nconst walkTokens = (token) => {\n  if (token.type === 'heading') {\n    token.depth += 1;\n  }\n};\n\nmarked.use({ walkTokens });\n\n// Run marked\nconsole.log(marked('# heading 2\\n\\n## heading 3'));\n```\n\n**Output:**\n\n```html\n<h2 id=\"heading-2\">heading 2</h2>\n<h3 id=\"heading-3\">heading 3</h3>\n```\n\n<h2 id=\"lexer\">The lexer</h2>\n\nThe lexer takes a markdown string and calls the tokenizer functions.\n\n<h2 id=\"parser\">The parser</h2>\n\nThe parser takes tokens as input and calls the renderer functions.\n\n***\n\n<h2 id=\"extend\">Access to lexer and parser</h2>\n\nYou also have direct access to the lexer and parser if you so desire.\n\n``` js\nconst tokens = marked.lexer(markdown, options);\nconsole.log(marked.parser(tokens, options));\n```\n\n``` js\nconst lexer = new marked.Lexer(options);\nconst tokens = lexer.lex(markdown);\nconsole.log(tokens);\nconsole.log(lexer.tokenizer.rules.block); // block level rules used\nconsole.log(lexer.tokenizer.rules.inline); // inline level rules used\nconsole.log(marked.Lexer.rules.block); // all block level rules\nconsole.log(marked.Lexer.rules.inline); // all inline level rules\n```\n\n``` bash\n$ node\n> require('marked').lexer('> I am using marked.')\n[\n  {\n    type: \"blockquote\",\n    raw: \"> I am using marked.\",\n    tokens: [\n      {\n        type: \"paragraph\",\n        raw: \"I am using marked.\",\n        text: \"I am using marked.\",\n        tokens: [\n          {\n            type: \"text\",\n            raw: \"I am using marked.\",\n            text: \"I am using marked.\"\n          }\n        ]\n      }\n    ]\n  },\n  links: {}\n]\n```\n\nThe Lexer builds an array of tokens, which will be passed to the Parser.\nThe Parser processes each token in the token array:\n\n``` js\nconst marked = require('marked');\n\nconst md = `\n  # heading\n\n  [link][1]\n\n  [1]: #heading \"heading\"\n`;\n\nconst tokens = marked.lexer(md);\nconsole.log(tokens);\n\nconst html = marked.parser(tokens);\nconsole.log(html);\n```\n\n``` bash\n[\n  {\n    type: \"heading\",\n    raw: \"  # heading\\n\\n\",\n    depth: 1,\n    text: \"heading\",\n    tokens: [\n      {\n        type: \"text\",\n        raw: \"heading\",\n        text: \"heading\"\n      }\n    ]\n  },\n  {\n    type: \"paragraph\",\n    raw: \"  [link][1]\",\n    text: \"  [link][1]\",\n    tokens: [\n      {\n        type: \"text\",\n        raw: \"  \",\n        text: \"  \"\n      },\n      {\n        type: \"link\",\n        raw: \"[link][1]\",\n        text: \"link\",\n        href: \"#heading\",\n        title: \"heading\",\n        tokens: [\n          {\n            type: \"text\",\n            raw: \"link\",\n            text: \"link\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    type: \"space\",\n    raw: \"\\n\\n\"\n  },\n  links: {\n    \"1\": {\n      href: \"#heading\",\n      title: \"heading\"\n    }\n  }\n]\n<h1 id=\"heading\">heading</h1>\n<p>  <a href=\"#heading\" title=\"heading\">link</a></p>\n```\n",
          "filepath": "data/repos/markedjs/marked-1.2/docs/USING_PRO.md",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-684",
    "model_patch": "diff --git a/initial.md b/initial.md\nindex 9b3f2e2..d1f3c5e 100644\n--- a/initial.md\n+++ b/initial.md\n@@ -21,6 +21,7 @@ It's easy.  It's not overly bloated, unlike HTML.  Also, as the creator of [mark\n > publishable as-is, as plain text, without\n > looking like it's been marked up with tags\n > or formatting instructions.\n+\n Ready to start writing?  Either start changing stuff on the left or\n [clear everything](?text=) with a simple click.\n \ndiff --git a/quickref.md b/quickref.md\nindex 8f3e2d1..a4c5e67 100644\n--- a/quickref.md\n+++ b/quickref.md\n@@ -77,6 +77,7 @@ Email addresses wrapped in angle brackets are linked: <test@example.com>.\n They are also obfuscated so that email harvesting spam robots hopefully won't get them.\n \n \n+\n Lists\n =====\n \n@@ -85,6 +86,7 @@ Lists\n * Great for shopping lists\n - You can also use hyphens\n + Or plus symbols\n+\n The above is an \"unordered\" list.  Now, on for a bit of order.\n \n 1. Numbered lists are also easy\n@@ -92,6 +94,7 @@ The above is an \"unordered\" list.  Now, on for a bit of order.\n 3738762. However, the actual number doesn't matter when converted to HTML.\n 1.  This will still show up as 4.\n \n+\n You might want a few advanced lists:\n \n - This top-level list is wrapped in paragraph tags",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 109.05,
      "issue_embedding_time_ms": 109.05,
      "retrieval_time_ms_splade": 5.36,
      "retrieval_time_ms": 5.36,
      "total_retrieval_time_ms": 114.41,
      "generation_time_ms": 4230.35,
      "total_io_time_ms": 4344.76,
      "input_total_token_limit": null,
      "issue_text_tokens": 274,
      "vlm_tokens": 0,
      "retrieved_tokens": 3880,
      "prompt_template_tokens": 510,
      "total_input_prompt_tokens": 4664,
      "output_generated_tokens": 378,
      "total_io_tokens": 5042,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nWeird list rendering behavior\\n```\\n- test\\n- test\\n- test\\n1. test\\n2. test\\n3. test\\n```\\n\\nRenders as this:\\n\\n![screenshot 40](https://cloud.githubusercontent.com/assets/87356/5483878/54978340-8639-11e4-961b-7f5f293980c6.jpg)\\n\\n```\\n- test\\n- test\\n- test\\n\\n1. test\\n2. test\\n3. test\\n```\\n\\nRenders as\\n\\n![screenshot 41](https://cloud.githubusercontent.com/assets/87356/5483883/66d6c32c-8639-11e4-87cf-a18d96fd59e8.jpg)\\n\\nAnd this:\\n\\n```\\n- test\\n- test\\n- test\\n\\n\\n1. test\\n2. test\\n3. test\\n```\\n\\nRenders correctly:\\n\\n![screenshot 42](https://cloud.githubusercontent.com/assets/87356/5483887/7d846408-8639-11e4-9201-a86ded31a5d1.jpg)\\n\\nWhy the weird behavior? Is this normal? Why is 2 spaces required after a list before starting another list? I haven't seen that any in sort of spec for how markdown works. Am I missing something here?\\n\\n\\n</issue>\\n\\n<code>\\n[start of USING_PRO.md]\\n## Extending Marked\\n\\nTo champion the single-reponsibility and open/closed prinicples, we have tried to make it relatively painless to extend marked. If you are looking to add custom functionality, this is the place to start.\\n\\n<h2 id=\\\"renderer\\\">The renderer</h2>\\n\\nThe renderer is...\\n\\n**Example:** Overriding default heading token by adding an embedded anchor tag like on GitHub.\\n\\n```js\\n// Create reference instance\\nvar myMarked = require('marked');\\n\\n// Get reference\\nvar renderer = new myMarked.Renderer();\\n\\n// Override function\\nrenderer.heading = function (text, level) {\\n  var escapedText = text.toLowerCase().replace(/[^\\\\w]+/g, '-');\\n\\n  return `\\n          <h${level}>\\n            <a name=\\\"${escapedText}\\\" class=\\\"anchor\\\" href=\\\"#${escapedText}\\\">\\n              <span class=\\\"header-link\\\"></span>\\n            </a>\\n            ${text}\\n          </h${level}>`;\\n};\\n\\n// Run marked\\nconsole.log(myMarked('# heading+', { renderer: renderer }));\\n```\\n\\n**Output:**\\n\\n```html\\n<h1>\\n  <a name=\\\"heading-\\\" class=\\\"anchor\\\" href=\\\"#heading-\\\">\\n    <span class=\\\"header-link\\\"></span>\\n  </a>\\n  heading+\\n</h1>\\n```\\n\\n### Block level renderer methods\\n\\n- code(*string* code, *string* language, *boolean* escaped)\\n- blockquote(*string* quote)\\n- html(*string* html)\\n- heading(*string* text, *number* level, *string* rawtext)\\n- hr()\\n- list(*string* body, *boolean* ordered, *number* start)\\n- listitem(*string* text)\\n- paragraph(*string* text)\\n- table(*string* header, *string* body)\\n- tablerow(*string* content)\\n- tablecell(*string* content, *object* flags)\\n\\n`flags` has the following properties:\\n\\n```js\\n{\\n    header: true || false,\\n    align: 'center' || 'left' || 'right'\\n}\\n```\\n\\n### Inline level renderer methods\\n\\n- strong(*string* text)\\n- em(*string* text)\\n- codespan(*string* code)\\n- br()\\n- del(*string* text)\\n- link(*string* href, *string* title, *string* text)\\n- image(*string* href, *string* title, *string* text)\\n- text(*string* text)\\n\\n<h2 id=\\\"lexer\\\">The lexer</h2>\\n\\nThe lexer is...\\n\\n\\n<h2 id=\\\"parser\\\">The parser</h2>\\n\\nThe parser is...\\n\\n***\\n\\n<h2 id=\\\"extend\\\">Access to lexer and parser</h2>\\n\\nYou also have direct access to the lexer and parser if you so desire.\\n\\n``` js\\nvar tokens = marked.lexer(text, options);\\nconsole.log(marked.parser(tokens));\\n```\\n\\n``` js\\nvar lexer = new marked.Lexer(options);\\nvar tokens = lexer.lex(text);\\nconsole.log(tokens);\\nconsole.log(lexer.rules);\\n```\\n\\n``` bash\\n$ node\\n> require('marked').lexer('> i am using marked.')\\n[ { type: 'blockquote_start' },\\n  { type: 'paragraph',\\n    text: 'i am using marked.' },\\n  { type: 'blockquote_end' },\\n  links: {} ]\\n```\\n\\nThe Lexers build an array of tokens, which will be passed to their respective\\nParsers. The Parsers process each token in the token arrays,\\nwhich are removed from the array of tokens:\\n\\n``` js\\nconst marked = require('marked');\\n\\nconst md = `\\n  # heading\\n\\n  [link][1]\\n\\n  [1]: #heading \\\"heading\\\"\\n`;\\n\\nconst tokens = marked.lexer(md);\\nconsole.log(tokens);\\n\\nconst html = marked.parser(tokens);\\nconsole.log(html);\\n\\nconsole.log(tokens);\\n```\\n\\n``` bash\\n[ { type: 'heading', depth: 1, text: 'heading' },\\n  { type: 'paragraph', text: '  [link][1]' },\\n  { type: 'space' },\\n  links: { '1': { href: '#heading', title: 'heading' } } ]\\n\\n<h1 id=\\\"heading\\\">heading</h1>\\n<p>  <a href=\\\"#heading\\\" title=\\\"heading\\\">link</a></p>\\n\\n[ links: { '1': { href: '#heading', title: 'heading' } } ]\\n```\\n\\n[end of USING_PRO.md]\\n[start of initial.md]\\nMarked - Markdown Parser\\n========================\\n\\n[Marked] lets you convert [Markdown] into HTML.  Markdown is a simple text format whose goal is to be very easy to read and write, even when not converted to HTML.  This demo page will let you type anything you like and see how it gets converted.  Live.  No more waiting around.\\n\\nHow To Use The Demo\\n-------------------\\n\\n1. Type in stuff on the left.\\n2. See the live updates on the right.\\n\\nThat's it.  Pretty simple.  There's also a drop-down option in the upper right to switch between various views:\\n\\n- **Preview:**  A live display of the generated HTML as it would render in a browser.\\n- **HTML Source:**  The generated HTML before your browser makes it pretty.\\n- **Lexer Data:**  What [marked] uses internally, in case you like gory stuff like this.\\n- **Quick Reference:**  A brief run-down of how to format things using markdown.\\n\\nWhy Markdown?\\n-------------\\n\\nIt's easy.  It's not overly bloated, unlike HTML.  Also, as the creator of [markdown] says,\\n\\n> The overriding design goal for Markdown's\\n> formatting syntax is to make it as readable\\n> as possible. The idea is that a\\n> Markdown-formatted document should be\\n> publishable as-is, as plain text, without\\n> looking like it's been marked up with tags\\n> or formatting instructions.\\n\\nReady to start writing?  Either start changing stuff on the left or\\n[clear everything](?text=) with a simple click.\\n\\n[Marked]: https://github.com/markedjs/marked/\\n[Markdown]: http://daringfireball.net/projects/markdown/\\n\\n[end of initial.md]\\n[start of marked-spec.js]\\nvar marked = require('../../lib/marked.js');\\n\\ndescribe('Test heading ID functionality', function() {\\n  it('should add id attribute by default', function() {\\n    var renderer = new marked.Renderer(marked.defaults);\\n    var header = renderer.heading('test', 1, 'test');\\n    expect(header).toBe('<h1 id=\\\"test\\\">test</h1>\\\\n');\\n  });\\n\\n  it('should NOT add id attribute when options set false', function() {\\n    var renderer = new marked.Renderer({ headerIds: false });\\n    var header = renderer.heading('test', 1, 'test');\\n    expect(header).toBe('<h1>test</h1>\\\\n');\\n  });\\n});\\n\\ndescribe('Test paragraph token type', function () {\\n  it('should use the \\\"paragraph\\\" type on top level', function () {\\n    const md = 'A Paragraph.\\\\n\\\\n> A blockquote\\\\n\\\\n- list item\\\\n';\\n\\n    const tokens = marked.lexer(md);\\n\\n    expect(tokens[0].type).toBe('paragraph');\\n    expect(tokens[3].type).toBe('paragraph');\\n    expect(tokens[7].type).toBe('text');\\n  });\\n});\\n\\n[end of marked-spec.js]\\n[start of quickref.md]\\nMarkdown Quick Reference\\n========================\\n\\nThis guide is a very brief overview, with examples, of the syntax that [Markdown] supports.  It is itself written in Markdown and you can copy the samples over to the left-hand pane for experimentation.  It's shown as *text* and not *rendered HTML*.\\n\\n[Markdown]: http://daringfireball.net/projects/markdown/\\n\\n\\nSimple Text Formatting\\n======================\\n\\nFirst thing is first.  You can use *stars* or _underscores_ for italics.  **Double stars** and __double underscores__ do bold.  ***Three together*** do ___both___.\\n\\nParagraphs are pretty easy too.  Just have a blank line between chunks of text.\\n\\n> This chunk of text is in a block quote.  Its multiple lines will all be\\n> indended a bit from the rest of the text.\\n>\\n> > Multiple levels of block quotes also work.\\n\\nSometimes you want to include some code, such as when you are explaining how `<h1>` HTML tags work, or maybe you are a programmer and you are discussing `someMethod()`.\\n\\nIf you want to include some code and have\\nnewlines preserved, indent the line with a tab\\nor at least four spaces.\\n    Extra spaces work here too.\\nThis is also called preformatted text and it is useful for showing examples.\\nThe text will stay as text, so any *markdown* or <u>HTML</u> you add will\\nnot show up formatted.  This way you can show markdown examples in a\\nmarkdown document.\\n\\n>     You can also use preformatted text with your blockquotes\\n>     as long as you add at least five spaces.\\n\\n\\nHeadings\\n========\\n\\nThere are a couple of ways to make headings.  Using three or more equals signs on a line under a heading makes it into an \\\"h1\\\" style.  Three or more hyphens under a line makes it \\\"h2\\\" (slightly smaller).  You can also use multiple pound symbols before and after a heading.  Pounds after the title are ignored.  Here's some examples:\\n\\nThis is H1\\n==========\\n\\nThis is H2\\n----------\\n\\n# This is H1\\n## This is H2\\n### This is H3 with some extra pounds ###\\n#### You get the idea ####\\n##### I don't need extra pounds at the end\\n###### H6 is the max\\n\\n\\nLinks\\n=====\\n\\nLet's link to a few sites.  First, let's use the bare URL, like <http://www.github.com>.  Great for text, but ugly for HTML.\\nNext is an inline link to [Google](http://www.google.com).  A little nicer.\\nThis is a reference-style link to [Wikipedia] [1].\\nLastly, here's a pretty link to [Yahoo].  The reference-style and pretty links both automatically use the links defined below, but they could be defined *anywhere* in the markdown and are removed from the HTML.  The names are also case insensitive, so you can use [YaHoO] and have it link properly.\\n\\n[1]: http://www.wikipedia.org/\\n[Yahoo]: http://www.yahoo.com/\\n\\nTitle attributes may be added to links by adding text after a link.\\nThis is the [inline link](http://www.bing.com \\\"Bing\\\") with a \\\"Bing\\\" title.\\nYou can also go to [W3C] [2] and maybe visit a [friend].\\n\\n[2]: http://w3c.org (The W3C puts out specs for web-based things)\\n[Friend]: http://facebook.com/ \\\"Facebook!\\\"\\n\\nEmail addresses in plain text are not linked: test@example.com.\\nEmail addresses wrapped in angle brackets are linked: <test@example.com>.\\nThey are also obfuscated so that email harvesting spam robots hopefully won't get them.\\n\\n\\nLists\\n=====\\n\\n* This is a bulleted list\\n* Great for shopping lists\\n- You can also use hyphens\\n+ Or plus symbols\\n\\nThe above is an \\\"unordered\\\" list.  Now, on for a bit of order.\\n\\n1. Numbered lists are also easy\\n2. Just start with a number\\n3738762. However, the actual number doesn't matter when converted to HTML.\\n1.  This will still show up as 4.\\n\\nYou might want a few advanced lists:\\n\\n- This top-level list is wrapped in paragraph tags\\n- This generates an extra space between each top-level item.\\n\\n- You do it by adding a blank line\\n\\n- This nested list also has blank lines between the list items.\\n\\n- How to create nested lists\\n1.  Start your regular list\\n2.  Indent nested lists with four spaces\\n3.  Further nesting means you should indent with four more spaces\\n    * This line is indented with eight spaces.\\n\\n- List items can be quite lengthy.  You can keep typing and either continue\\nthem on the next line with no indentation.\\n\\n- Alternately, if that looks ugly, you can also\\nindent the next line a bit for a prettier look.\\n\\n- You can put large blocks of text in your list by just indenting with four spaces.\\n\\nThis is formatted the same as code, but you can inspect the HTML\\nand find that it's just wrapped in a `<p>` tag and *won't* be shown\\nas preformatted text.\\n\\nYou can keep adding more and more paragraphs to a single\\nlist item by adding the traditional blank line and then keep\\non indenting the paragraphs with four spaces.  You really need\\nto only indent the first line, but that looks ugly.\\n\\n- Lists support blockquotes\\n\\n> Just like this example here.  By the way, you can\\n> nest lists inside blockquotes!\\n> - Fantastic!\\n\\n- Lists support preformatted text\\n\\n    You just need to indent eight spaces.\\n\\n\\nEven More\\n=========\\n\\nHorizontal Rule\\n---------------\\n\\nIf you need a horizontal rule you just need to put at least three hyphens, asterisks, or underscores on a line by themselves.  You can also even put spaces between the characters.\\n\\n---\\n****************************\\n_ _ _ _ _ _ _\\n\\nThose three all produced horizontal lines.  Keep in mind that three hyphens under any text turns that text into a heading, so add a blank like if you use hyphens.\\n\\nImages\\n------\\n\\nImages work exactly like links, but they have exclamation points in front.  They work with references and titles too.\\n\\n![Google Logo](http://www.google.com/images/errors/logo_sm.gif) and ![Happy].\\n\\n[Happy]: http://www.wpclipart.com/smiley/simple_smiley/smiley_face_simple_green_small.png (\\\"Smiley face\\\")\\n\\n\\nInline HTML\\n-----------\\n\\nIf markdown is too limiting, you can just insert your own <strike>crazy</strike> HTML.  Span-level HTML <u>can *still* use markdown</u>.  Block level elements must be separated from text by a blank line and must not have any spaces before the opening and closing HTML.\\n\\n<div style='font-family: \\\"Comic Sans\\\", sans-serif;'>\\nIt is a pity, but markdown does **not** work in here for most markdown parsers.  [Marked] handles it pretty well.\\n</div>\\n\\n[end of quickref.md]\\n[start of CONTRIBUTING.md]\\n# Contributing to Marked\\n\\n- [ ] Fork `markedjs/marked`.\\n- [ ] Clone the library locally using GitHub Desktop or the command line.\\n- [ ] Make sure you are on the `master` branch.\\n- [ ] Be sure to run `npm install` or `npm update`.\\n- [ ] Create a branch.\\n- [ ] Make as small a change as possible.\\n- [ ] Run `npm test`, fix any broken things (for linting, you can run `npm run lint` to have the linter fix them for you).\\n- [ ] Submit a PR.\\n\\n## Design principles\\n\\nMarked tends to favor following the SOLID set of software design and development principles; mainly the [single responsibility](https://en.wikipedia.org/wiki/Single_responsibility_principle) and [open/closed principles](https://en.wikipedia.org/wiki/Open/closed_principle):\\n\\n- **Single responsibility:** Marked, and the components of Marked, have the single responsibility of converting Markdown strings into HTML.\\n- **Open/closed:** Marked favors giving developers the means to easily extend the library and its components over changing Marked's behavior through configuration options.\\n\\n## Priorities\\n\\nWe think we have our priorities sorted to build quality in.\\n\\nThe following table lists the ticket type labels we use when there is work to be done on the code either through an Issue or a PR; in priority order.\\n\\n|Ticket type label                  |Description                                                                                                                                                                         |\\n|:----------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\\n|L0 - security                      |A security vulnerability within the Marked library is discovered.                                                                                                                   |\\n|L1 - broken                        |Valid usage results in incorrect output compared to [supported specifications](#/README.md#specifications) OR causes marked to crash AND there is no known workaround for the issue. |\\n|L2 - annoying                      |Similar to L1 - broken only there is a known workaround avaialable for the issue.                                                                                                   |\\n|RR - refactor and re-engineer      |Results in an improvement to developers using Marked (improved readability) or end-users (faster performance) or both.                                                              |\\n|NFS - new feature (spec related)   |A capability Marked does not currently provide but is in one of the [supported specifications](#/README.md#specifications)                                                           |\\n|NFU - new feature (user requested) |A capability Marked does not currently provide but has been requested by users of Marked.                                                                                           |\\n\\n## Test early, often, and everything\\n\\nWe try to write test cases to validate output (writing tests based on the [supported specifications](#/README.md#specifications)) and minimize regression (writing tests for issues fixed). Therefore, if you would like to contribute, some things you should know regarding the test harness.\\n\\n|Location      |Description                                         |\\n|:-------------|:---------------------------------------------------|\\n|/test/browser |For testing Marked in a client-side implementation. |\\n|/test/new     |Tests not related to the original `markdown.pl`.    |\\n|/test/original|Tests validating against the original `markdown.pl`.|\\n\\nIf your test uses features or options, assuming `gfm` is set to `false`, for example, you can add [front-matter](https://www.npmjs.com/package/front-matter) to the top of\\nyour `.md` file\\n\\n``` yml\\n---\\ngfm: false\\n---\\n```\\n\\n## Submitting PRs and Issues\\n\\nMarked provides templates for submitting both pull requests and issues. When you begin creating a new PR or issue, you will see instructions on using the template.\\n\\nThe PR templates include checklists for both the submitter and the reviewer, which, in most cases, will not be the same person.\\n\\n## Scripts\\n\\nWhen it comes to NPM commands, we try to use the native scripts provided by the NPM framework.\\n\\nTo run the tests:\\n\\n``` bash\\nnpm test\\n```\\n\\nTo test whether you are using the standard syntax rules for the project:\\n\\n```bash\\nnpm run test:lint\\n```\\n\\nTo see time comparisons between Marked and other popular Markdown libraries:\\n\\n```bash\\nnpm run bench\\n```\\n\\nTo check for (and fix) standardized syntax (lint):\\n\\n```bash\\nnpm run lint\\n```\\n\\nTo build your own minified version of Marked:\\n\\n```bash\\nnpm run build\\n```\\n\\n\\n[end of CONTRIBUTING.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "USING_PRO.md",
        "initial.md",
        "marked-spec.js",
        "quickref.md",
        "CONTRIBUTING.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "95930d51-d4e8-4f25-a25d-28d9cb6238fb",
        "score": 0.01639344262295082,
        "payload": {
          "text": "## Extending Marked\n\nTo champion the single-reponsibility and open/closed prinicples, we have tried to make it relatively painless to extend marked. If you are looking to add custom functionality, this is the place to start.\n\n<h2 id=\"renderer\">The renderer</h2>\n\nThe renderer is...\n\n**Example:** Overriding default heading token by adding an embedded anchor tag like on GitHub.\n\n```js\n// Create reference instance\nvar myMarked = require('marked');\n\n// Get reference\nvar renderer = new myMarked.Renderer();\n\n// Override function\nrenderer.heading = function (text, level) {\n  var escapedText = text.toLowerCase().replace(/[^\\w]+/g, '-');\n\n  return `\n          <h${level}>\n            <a name=\"${escapedText}\" class=\"anchor\" href=\"#${escapedText}\">\n              <span class=\"header-link\"></span>\n            </a>\n            ${text}\n          </h${level}>`;\n};\n\n// Run marked\nconsole.log(myMarked('# heading+', { renderer: renderer }));\n```\n\n**Output:**\n\n```html\n<h1>\n  <a name=\"heading-\" class=\"anchor\" href=\"#heading-\">\n    <span class=\"header-link\"></span>\n  </a>\n  heading+\n</h1>\n```\n\n### Block level renderer methods\n\n- code(*string* code, *string* language, *boolean* escaped)\n- blockquote(*string* quote)\n- html(*string* html)\n- heading(*string* text, *number* level, *string* rawtext)\n- hr()\n- list(*string* body, *boolean* ordered, *number* start)\n- listitem(*string* text)\n- paragraph(*string* text)\n- table(*string* header, *string* body)\n- tablerow(*string* content)\n- tablecell(*string* content, *object* flags)\n\n`flags` has the following properties:\n\n```js\n{\n    header: true || false,\n    align: 'center' || 'left' || 'right'\n}\n```\n\n### Inline level renderer methods\n\n- strong(*string* text)\n- em(*string* text)\n- codespan(*string* code)\n- br()\n- del(*string* text)\n- link(*string* href, *string* title, *string* text)\n- image(*string* href, *string* title, *string* text)\n- text(*string* text)\n\n<h2 id=\"lexer\">The lexer</h2>\n\nThe lexer is...\n\n\n<h2 id=\"parser\">The parser</h2>\n\nThe parser is...\n\n***\n\n<h2 id=\"extend\">Access to lexer and parser</h2>\n\nYou also have direct access to the lexer and parser if you so desire.\n\n``` js\nvar tokens = marked.lexer(text, options);\nconsole.log(marked.parser(tokens));\n```\n\n``` js\nvar lexer = new marked.Lexer(options);\nvar tokens = lexer.lex(text);\nconsole.log(tokens);\nconsole.log(lexer.rules);\n```\n\n``` bash\n$ node\n> require('marked').lexer('> i am using marked.')\n[ { type: 'blockquote_start' },\n  { type: 'paragraph',\n    text: 'i am using marked.' },\n  { type: 'blockquote_end' },\n  links: {} ]\n```\n\nThe Lexers build an array of tokens, which will be passed to their respective\nParsers. The Parsers process each token in the token arrays,\nwhich are removed from the array of tokens:\n\n``` js\nconst marked = require('marked');\n\nconst md = `\n  # heading\n\n  [link][1]\n\n  [1]: #heading \"heading\"\n`;\n\nconst tokens = marked.lexer(md);\nconsole.log(tokens);\n\nconst html = marked.parser(tokens);\nconsole.log(html);\n\nconsole.log(tokens);\n```\n\n``` bash\n[ { type: 'heading', depth: 1, text: 'heading' },\n  { type: 'paragraph', text: '  [link][1]' },\n  { type: 'space' },\n  links: { '1': { href: '#heading', title: 'heading' } } ]\n\n<h1 id=\"heading\">heading</h1>\n<p>  <a href=\"#heading\" title=\"heading\">link</a></p>\n\n[ links: { '1': { href: '#heading', title: 'heading' } } ]\n```\n",
          "filepath": "data/repos/markedjs/marked-0.5/docs/USING_PRO.md",
          "repo": "markedjs/marked",
          "version": "0.5",
          "chunk_index": 0
        }
      },
      {
        "id": "cb23a025-a825-42eb-8faf-aa30c9dd43bc",
        "score": 0.016129032258064516,
        "payload": {
          "text": "Marked - Markdown Parser\n========================\n\n[Marked] lets you convert [Markdown] into HTML.  Markdown is a simple text format whose goal is to be very easy to read and write, even when not converted to HTML.  This demo page will let you type anything you like and see how it gets converted.  Live.  No more waiting around.\n\nHow To Use The Demo\n-------------------\n\n1. Type in stuff on the left.\n2. See the live updates on the right.\n\nThat's it.  Pretty simple.  There's also a drop-down option in the upper right to switch between various views:\n\n- **Preview:**  A live display of the generated HTML as it would render in a browser.\n- **HTML Source:**  The generated HTML before your browser makes it pretty.\n- **Lexer Data:**  What [marked] uses internally, in case you like gory stuff like this.\n- **Quick Reference:**  A brief run-down of how to format things using markdown.\n\nWhy Markdown?\n-------------\n\nIt's easy.  It's not overly bloated, unlike HTML.  Also, as the creator of [markdown] says,\n\n> The overriding design goal for Markdown's\n> formatting syntax is to make it as readable\n> as possible. The idea is that a\n> Markdown-formatted document should be\n> publishable as-is, as plain text, without\n> looking like it's been marked up with tags\n> or formatting instructions.\n\nReady to start writing?  Either start changing stuff on the left or\n[clear everything](?text=) with a simple click.\n\n[Marked]: https://github.com/markedjs/marked/\n[Markdown]: http://daringfireball.net/projects/markdown/\n",
          "filepath": "data/repos/markedjs/marked-0.5/docs/demo/initial.md",
          "repo": "markedjs/marked",
          "version": "0.5",
          "chunk_index": 0
        }
      },
      {
        "id": "7a1c6051-1dd7-4171-a483-3e5155f04dc8",
        "score": 0.015873015873015872,
        "payload": {
          "text": "var marked = require('../../lib/marked.js');\n\ndescribe('Test heading ID functionality', function() {\n  it('should add id attribute by default', function() {\n    var renderer = new marked.Renderer(marked.defaults);\n    var header = renderer.heading('test', 1, 'test');\n    expect(header).toBe('<h1 id=\"test\">test</h1>\\n');\n  });\n\n  it('should NOT add id attribute when options set false', function() {\n    var renderer = new marked.Renderer({ headerIds: false });\n    var header = renderer.heading('test', 1, 'test');\n    expect(header).toBe('<h1>test</h1>\\n');\n  });\n});\n\ndescribe('Test paragraph token type', function () {\n  it('should use the \"paragraph\" type on top level', function () {\n    const md = 'A Paragraph.\\n\\n> A blockquote\\n\\n- list item\\n';\n\n    const tokens = marked.lexer(md);\n\n    expect(tokens[0].type).toBe('paragraph');\n    expect(tokens[3].type).toBe('paragraph');\n    expect(tokens[7].type).toBe('text');\n  });\n});\n",
          "filepath": "data/repos/markedjs/marked-0.5/test/unit/marked-spec.js",
          "repo": "markedjs/marked",
          "version": "0.5",
          "chunk_index": 0
        }
      },
      {
        "id": "cbec6ea5-d546-4d85-ac8a-e007caf57a9e",
        "score": 0.015625,
        "payload": {
          "text": "Markdown Quick Reference\n========================\n\nThis guide is a very brief overview, with examples, of the syntax that [Markdown] supports.  It is itself written in Markdown and you can copy the samples over to the left-hand pane for experimentation.  It's shown as *text* and not *rendered HTML*.\n\n[Markdown]: http://daringfireball.net/projects/markdown/\n\n\nSimple Text Formatting\n======================\n\nFirst thing is first.  You can use *stars* or _underscores_ for italics.  **Double stars** and __double underscores__ do bold.  ***Three together*** do ___both___.\n\nParagraphs are pretty easy too.  Just have a blank line between chunks of text.\n\n> This chunk of text is in a block quote.  Its multiple lines will all be\n> indended a bit from the rest of the text.\n>\n> > Multiple levels of block quotes also work.\n\nSometimes you want to include some code, such as when you are explaining how `<h1>` HTML tags work, or maybe you are a programmer and you are discussing `someMethod()`.\n\nIf you want to include some code and have\nnewlines preserved, indent the line with a tab\nor at least four spaces.\n    Extra spaces work here too.\nThis is also called preformatted text and it is useful for showing examples.\nThe text will stay as text, so any *markdown* or <u>HTML</u> you add will\nnot show up formatted.  This way you can show markdown examples in a\nmarkdown document.\n\n>     You can also use preformatted text with your blockquotes\n>     as long as you add at least five spaces.\n\n\nHeadings\n========\n\nThere are a couple of ways to make headings.  Using three or more equals signs on a line under a heading makes it into an \"h1\" style.  Three or more hyphens under a line makes it \"h2\" (slightly smaller).  You can also use multiple pound symbols before and after a heading.  Pounds after the title are ignored.  Here's some examples:\n\nThis is H1\n==========\n\nThis is H2\n----------\n\n# This is H1\n## This is H2\n### This is H3 with some extra pounds ###\n#### You get the idea ####\n##### I don't need extra pounds at the end\n###### H6 is the max\n\n\nLinks\n=====\n\nLet's link to a few sites.  First, let's use the bare URL, like <http://www.github.com>.  Great for text, but ugly for HTML.\nNext is an inline link to [Google](http://www.google.com).  A little nicer.\nThis is a reference-style link to [Wikipedia] [1].\nLastly, here's a pretty link to [Yahoo].  The reference-style and pretty links both automatically use the links defined below, but they could be defined *anywhere* in the markdown and are removed from the HTML.  The names are also case insensitive, so you can use [YaHoO] and have it link properly.\n\n[1]: http://www.wikipedia.org/\n[Yahoo]: http://www.yahoo.com/\n\nTitle attributes may be added to links by adding text after a link.\nThis is the [inline link](http://www.bing.com \"Bing\") with a \"Bing\" title.\nYou can also go to [W3C] [2] and maybe visit a [friend].\n\n[2]: http://w3c.org (The W3C puts out specs for web-based things)\n[Friend]: http://facebook.com/ \"Facebook!\"\n\nEmail addresses in plain text are not linked: test@example.com.\nEmail addresses wrapped in angle brackets are linked: <test@example.com>.\nThey are also obfuscated so that email harvesting spam robots hopefully won't get them.\n\n\nLists\n=====\n\n* This is a bulleted list\n* Great for shopping lists\n- You can also use hyphens\n+ Or plus symbols\n\nThe above is an \"unordered\" list.  Now, on for a bit of order.\n\n1. Numbered lists are also easy\n2. Just start with a number\n3738762. However, the actual number doesn't matter when converted to HTML.\n1.  This will still show up as 4.\n\nYou might want a few advanced lists:\n\n- This top-level list is wrapped in paragraph tags\n- This generates an extra space between each top-level item.\n\n- You do it by adding a blank line\n\n- This nested list also has blank lines between the list items.\n\n- How to create nested lists\n1.  Start your regular list\n2.  Indent nested lists with four spaces\n3.  Further nesting means you should indent with four more spaces\n    * This line is indented with eight spaces.\n\n- List items can be quite lengthy.  You can keep typing and either continue\nthem on the next line with no indentation.\n\n- Alternately, if that looks ugly, you can also\nindent the next line a bit for a prettier look.\n\n- You can put large blocks of text in your list by just indenting with four spaces.\n\nThis is formatted the same as code, but you can inspect the HTML\nand find that it's just wrapped in a `<p>` tag and *won't* be shown\nas preformatted text.\n\nYou can keep adding more and more paragraphs to a single\nlist item by adding the traditional blank line and then keep\non indenting the paragraphs with four spaces.  You really need\nto only indent the first line, but that looks ugly.\n\n- Lists support blockquotes\n\n> Just like this example here.  By the way, you can\n> nest lists inside blockquotes!\n> - Fantastic!\n\n- Lists support preformatted text\n\n    You just need to indent eight spaces.\n\n\nEven More\n=========\n\nHorizontal Rule\n---------------\n\nIf you need a horizontal rule you just need to put at least three hyphens, asterisks, or underscores on a line by themselves.  You can also even put spaces between the characters.\n\n---\n****************************\n_ _ _ _ _ _ _\n\nThose three all produced horizontal lines.  Keep in mind that three hyphens under any text turns that text into a heading, so add a blank like if you use hyphens.\n\nImages\n------\n\nImages work exactly like links, but they have exclamation points in front.  They work with references and titles too.\n\n![Google Logo](http://www.google.com/images/errors/logo_sm.gif) and ![Happy].\n\n[Happy]: http://www.wpclipart.com/smiley/simple_smiley/smiley_face_simple_green_small.png (\"Smiley face\")\n\n\nInline HTML\n-----------\n\nIf markdown is too limiting, you can just insert your own <strike>crazy</strike> HTML.  Span-level HTML <u>can *still* use markdown</u>.  Block level elements must be separated from text by a blank line and must not have any spaces before the opening and closing HTML.\n\n<div style='font-family: \"Comic Sans\", sans-serif;'>\nIt is a pity, but markdown does **not** work in here for most markdown parsers.  [Marked] handles it pretty well.\n</div>\n",
          "filepath": "data/repos/markedjs/marked-0.5/docs/demo/quickref.md",
          "repo": "markedjs/marked",
          "version": "0.5",
          "chunk_index": 0
        }
      },
      {
        "id": "e2981f71-ccae-4ad4-9fa7-4840974c1a04",
        "score": 0.015384615384615385,
        "payload": {
          "text": "# Contributing to Marked\n\n- [ ] Fork `markedjs/marked`.\n- [ ] Clone the library locally using GitHub Desktop or the command line.\n- [ ] Make sure you are on the `master` branch.\n- [ ] Be sure to run `npm install` or `npm update`.\n- [ ] Create a branch.\n- [ ] Make as small a change as possible.\n- [ ] Run `npm test`, fix any broken things (for linting, you can run `npm run lint` to have the linter fix them for you).\n- [ ] Submit a PR.\n\n## Design principles\n\nMarked tends to favor following the SOLID set of software design and development principles; mainly the [single responsibility](https://en.wikipedia.org/wiki/Single_responsibility_principle) and [open/closed principles](https://en.wikipedia.org/wiki/Open/closed_principle):\n\n- **Single responsibility:** Marked, and the components of Marked, have the single responsibility of converting Markdown strings into HTML.\n- **Open/closed:** Marked favors giving developers the means to easily extend the library and its components over changing Marked's behavior through configuration options.\n\n## Priorities\n\nWe think we have our priorities sorted to build quality in.\n\nThe following table lists the ticket type labels we use when there is work to be done on the code either through an Issue or a PR; in priority order.\n\n|Ticket type label                  |Description                                                                                                                                                                         |\n|:----------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n|L0 - security                      |A security vulnerability within the Marked library is discovered.                                                                                                                   |\n|L1 - broken                        |Valid usage results in incorrect output compared to [supported specifications](#/README.md#specifications) OR causes marked to crash AND there is no known workaround for the issue. |\n|L2 - annoying                      |Similar to L1 - broken only there is a known workaround avaialable for the issue.                                                                                                   |\n|RR - refactor and re-engineer      |Results in an improvement to developers using Marked (improved readability) or end-users (faster performance) or both.                                                              |\n|NFS - new feature (spec related)   |A capability Marked does not currently provide but is in one of the [supported specifications](#/README.md#specifications)                                                           |\n|NFU - new feature (user requested) |A capability Marked does not currently provide but has been requested by users of Marked.                                                                                           |\n\n## Test early, often, and everything\n\nWe try to write test cases to validate output (writing tests based on the [supported specifications](#/README.md#specifications)) and minimize regression (writing tests for issues fixed). Therefore, if you would like to contribute, some things you should know regarding the test harness.\n\n|Location      |Description                                         |\n|:-------------|:---------------------------------------------------|\n|/test/browser |For testing Marked in a client-side implementation. |\n|/test/new     |Tests not related to the original `markdown.pl`.    |\n|/test/original|Tests validating against the original `markdown.pl`.|\n\nIf your test uses features or options, assuming `gfm` is set to `false`, for example, you can add [front-matter](https://www.npmjs.com/package/front-matter) to the top of\nyour `.md` file\n\n``` yml\n---\ngfm: false\n---\n```\n\n## Submitting PRs and Issues\n\nMarked provides templates for submitting both pull requests and issues. When you begin creating a new PR or issue, you will see instructions on using the template.\n\nThe PR templates include checklists for both the submitter and the reviewer, which, in most cases, will not be the same person.\n\n## Scripts\n\nWhen it comes to NPM commands, we try to use the native scripts provided by the NPM framework.\n\nTo run the tests:\n\n``` bash\nnpm test\n```\n\nTo test whether you are using the standard syntax rules for the project:\n\n```bash\nnpm run test:lint\n```\n\nTo see time comparisons between Marked and other popular Markdown libraries:\n\n```bash\nnpm run bench\n```\n\nTo check for (and fix) standardized syntax (lint):\n\n```bash\nnpm run lint\n```\n\nTo build your own minified version of Marked:\n\n```bash\nnpm run build\n```\n\n",
          "filepath": "data/repos/markedjs/marked-0.5/docs/CONTRIBUTING.md",
          "repo": "markedjs/marked",
          "version": "0.5",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1674",
    "model_patch": "diff --git a/marked.js b/marked.js\n--- a/marked.js\n+++ b/marked.js\n@@ -1000,6 +1000,10 @@\n           checked: ischecked,\n           loose: loose,\n           text: item\n+        });\n+      }\n+\n+      // Ensure that empty list items are handled correctly\n+      if (list.items.length === 0) {\n+        list.items.push({\n+          raw: '',\n+          task: false,\n+          checked: undefined,\n+          loose: false,\n+          text: ''\n         });\n       }",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 168.57,
      "issue_embedding_time_ms": 168.57,
      "retrieval_time_ms_splade": 8.69,
      "retrieval_time_ms": 8.69,
      "total_retrieval_time_ms": 177.26,
      "generation_time_ms": 2661.74,
      "total_io_time_ms": 2839.0,
      "input_total_token_limit": null,
      "issue_text_tokens": 504,
      "vlm_tokens": 0,
      "retrieved_tokens": 20490,
      "prompt_template_tokens": 516,
      "total_input_prompt_tokens": 21510,
      "output_generated_tokens": 128,
      "total_io_tokens": 21638,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nCrash when rendering an empty checkbox list item\\n### Describe the bug\\r\\nRendering an empty checkbox list item leads to a crash:\\r\\n> `Uncaught TypeError: Cannot read property 'type' of undefined`\\r\\n\\r\\n### To Reproduce\\r\\n\\r\\n[Click here to see the crash on Marked demo](https://marked.js.org/demo/?text=%20%20-%20%5B%20%5D%20checklist%20item%0A%0A%20%20-%20%5B%20%5D%20&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20false%2C%0A%20%22gfm%22%3A%20true%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=master)\\r\\n![image](https://user-images.githubusercontent.com/1694410/81624131-6de74400-93c3-11ea-8eb7-ac3a1145afc4.png)\\r\\n\\r\\n### Expected behavior\\r\\nNo crash and a correctly rendered checkbox.\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of marked.min.js]\\n!function(e,t){\\\"object\\\"==typeof exports&&\\\"undefined\\\"!=typeof module?module.exports=t():\\\"function\\\"==typeof define&&define.amd?define(t):(e=e||self).marked=t()}(this,function(){\\\"use strict\\\";function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\\\"value\\\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return o[e]}var e,t=(function(t){function e(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:\\\"\\\",highlight:null,langPrefix:\\\"language-\\\",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,xhtml:!1}}t.exports={defaults:e(),getDefaults:e,changeDefaults:function(e){t.exports.defaults=e}}}(e={exports:{}}),e.exports),r=(t.defaults,t.getDefaults,t.changeDefaults,/[&<>\\\"']/),i=/[&<>\\\"']/g,a=/[<>\\\"']|&(?!#?\\\\w+;)/,l=/[<>\\\"']|&(?!#?\\\\w+;)/g,o={\\\"&\\\":\\\"&amp;\\\",\\\"<\\\":\\\"&lt;\\\",\\\">\\\":\\\"&gt;\\\",'\\\"':\\\"&quot;\\\",\\\"'\\\":\\\"&#39;\\\"};var c=/&(#(?:\\\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\\\w+));?/gi;function h(e){return e.replace(c,function(e,t){return\\\"colon\\\"===(t=t.toLowerCase())?\\\":\\\":\\\"#\\\"===t.charAt(0)?\\\"x\\\"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):\\\"\\\"})}var u=/(^|[^\\\\[])\\\\^/g;var p=/[^\\\\w:]/g,g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;var f={},d=/^[^:]+:\\\\/*[^/]*$/,k=/^([^:]+:)[\\\\s\\\\S]*$/,b=/^([^:]+:\\\\/*[^/]*)[\\\\s\\\\S]*$/;function m(e,t){f[\\\" \\\"+e]||(d.test(e)?f[\\\" \\\"+e]=e+\\\"/\\\":f[\\\" \\\"+e]=x(e,\\\"/\\\",!0));var n=-1===(e=f[\\\" \\\"+e]).indexOf(\\\":\\\");return\\\"//\\\"===t.substring(0,2)?n?t:e.replace(k,\\\"$1\\\")+t:\\\"/\\\"===t.charAt(0)?n?t:e.replace(b,\\\"$1\\\")+t:e+t}function x(e,t,n){var r=e.length;if(0===r)return\\\"\\\";for(var i=0;i<r;){var s=e.charAt(r-i-1);if(s!==t||n){if(s===t||!n)break;i++}else i++}return e.substr(0,r-i)}var w=function(e,t){if(t){if(r.test(e))return e.replace(i,n)}else if(a.test(e))return e.replace(l,n);return e},v=h,_=function(n,e){n=n.source||n,e=e||\\\"\\\";var r={replace:function(e,t){return t=(t=t.source||t).replace(u,\\\"$1\\\"),n=n.replace(e,t),r},getRegex:function(){return new RegExp(n,e)}};return r},y=function(e,t,n){if(e){var r;try{r=decodeURIComponent(h(n)).replace(p,\\\"\\\").toLowerCase()}catch(e){return null}if(0===r.indexOf(\\\"javascript:\\\")||0===r.indexOf(\\\"vbscript:\\\")||0===r.indexOf(\\\"data:\\\"))return null}t&&!g.test(n)&&(n=m(t,n));try{n=encodeURI(n).replace(/%25/g,\\\"%\\\")}catch(e){return null}return n},z={exec:function(){}},$=function(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},S=function(e,t){var n=e.replace(/\\\\|/g,function(e,t,n){for(var r=!1,i=t;0<=--i&&\\\"\\\\\\\\\\\"===n[i];)r=!r;return r?\\\"|\\\":\\\" |\\\"}).split(/ \\\\|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push(\\\"\\\");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\\\\\\\\\\|/g,\\\"|\\\");return n},A=x,R=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,r=0,i=0;i<n;i++)if(\\\"\\\\\\\\\\\"===e[i])i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&--r<0)return i;return-1},Z=function(e){e&&e.sanitize&&!e.silent&&console.warn(\\\"marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options\\\")},q=t.defaults,T=A,I=S,C=w,O=R;function D(e,t,n){var r=t.href,i=t.title?C(t.title):null;return\\\"!\\\"!==e[0].charAt(0)?{type:\\\"link\\\",raw:n,href:r,title:i,text:e[1]}:{type:\\\"image\\\",raw:n,text:C(e[1]),href:r,title:i}}var E=function(){function e(e){this.options=e||q}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return 1<t[0].length?{type:\\\"space\\\",raw:t[0]}:{raw:\\\"\\\\n\\\"}},t.code=function(e,t){var n=this.rules.block.code.exec(e);if(n){var r=t[t.length-1];if(r&&\\\"paragraph\\\"===r.type)return t.pop(),r.text+=\\\"\\\\n\\\"+n[0].trimRight(),r.raw+=\\\"\\\\n\\\"+n[0],r;var i=n[0].replace(/^ {4}/gm,\\\"\\\");return{type:\\\"code\\\",raw:n[0],codeBlockStyle:\\\"indented\\\",text:this.options.pedantic?i:T(i,\\\"\\\\n\\\")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t)return{type:\\\"code\\\",raw:t[0],lang:t[2]?t[2].trim():t[2],text:t[3]||\\\"\\\"}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t)return{type:\\\"heading\\\",raw:t[0],depth:t[1].length,text:t[2]}},t.nptable=function(e){var t=this.rules.block.nptable.exec(e);if(t){var n={type:\\\"table\\\",header:I(t[1].replace(/^ *| *\\\\| *$/g,\\\"\\\")),align:t[2].replace(/^ *|\\\\| *$/g,\\\"\\\").split(/ *\\\\| */),cells:t[3]?t[3].replace(/\\\\n$/,\\\"\\\").split(\\\"\\\\n\\\"):[],raw:t[0]};if(n.header.length===n.align.length){var r,i=n.align.length;for(r=0;r<i;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]=\\\"right\\\":/^ *:-+: *$/.test(n.align[r])?n.align[r]=\\\"center\\\":/^ *:-+ *$/.test(n.align[r])?n.align[r]=\\\"left\\\":n.align[r]=null;for(i=n.cells.length,r=0;r<i;r++)n.cells[r]=I(n.cells[r],n.header.length);return n}}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:\\\"hr\\\",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *> ?/gm,\\\"\\\");return{type:\\\"blockquote\\\",raw:t[0],text:n}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){for(var n,r,i,s,a,l,o,c=t[0],h=t[2],u=1<h.length,p={type:\\\"list\\\",raw:c,ordered:u,start:u?+h:\\\"\\\",loose:!1,items:[]},g=t[0].match(this.rules.block.item),f=!1,d=g.length,k=0;k<d;k++)r=(c=n=g[k]).length,~(n=n.replace(/^ *([*+-]|\\\\d+\\\\.) */,\\\"\\\")).indexOf(\\\"\\\\n \\\")&&(r-=n.length,n=this.options.pedantic?n.replace(/^ {1,4}/gm,\\\"\\\"):n.replace(new RegExp(\\\"^ {1,\\\"+r+\\\"}\\\",\\\"gm\\\"),\\\"\\\")),k!==d-1&&(i=this.rules.block.bullet.exec(g[k+1])[0],(1<h.length?1===i.length:1<i.length||this.options.smartLists&&i!==h)&&(s=g.slice(k+1).join(\\\"\\\\n\\\"),p.raw=p.raw.substring(0,p.raw.length-s.length),k=d-1)),a=f||/\\\\n\\\\n(?!\\\\s*$)/.test(n),k!==d-1&&(f=\\\"\\\\n\\\"===n.charAt(n.length-1),a=a||f),a&&(p.loose=!0),o=void 0,(l=/^\\\\[[ xX]\\\\] /.test(n))&&(o=\\\" \\\"!==n[1],n=n.replace(/^\\\\[[ xX]\\\\] +/,\\\"\\\")),p.items.push({raw:c,task:l,checked:o,loose:a,text:n});return p}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?\\\"paragraph\\\":\\\"html\\\",raw:t[0],pre:!this.options.sanitizer&&(\\\"pre\\\"===t[1]||\\\"script\\\"===t[1]||\\\"style\\\"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):C(t[0]):t[0]}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{tag:t[1].toLowerCase().replace(/\\\\s+/g,\\\" \\\"),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:\\\"table\\\",header:I(t[1].replace(/^ *| *\\\\| *$/g,\\\"\\\")),align:t[2].replace(/^ *|\\\\| *$/g,\\\"\\\").split(/ *\\\\| */),cells:t[3]?t[3].replace(/\\\\n$/,\\\"\\\").split(\\\"\\\\n\\\"):[]};if(n.header.length===n.align.length){n.raw=t[0];var r,i=n.align.length;for(r=0;r<i;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]=\\\"right\\\":/^ *:-+: *$/.test(n.align[r])?n.align[r]=\\\"center\\\":/^ *:-+ *$/.test(n.align[r])?n.align[r]=\\\"left\\\":n.align[r]=null;for(i=n.cells.length,r=0;r<i;r++)n.cells[r]=I(n.cells[r].replace(/^ *\\\\| *| *\\\\| *$/g,\\\"\\\"),n.header.length);return n}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:\\\"heading\\\",raw:t[0],depth:\\\"=\\\"===t[2].charAt(0)?1:2,text:t[1]}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:\\\"paragraph\\\",raw:t[0],text:\\\"\\\\n\\\"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}},t.text=function(e){var t=this.rules.block.text.exec(e);if(t)return{type:\\\"text\\\",raw:t[0],text:t[0]}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:\\\"escape\\\",raw:t[0],text:C(t[1])}},t.tag=function(e,t,n){var r=this.rules.inline.tag.exec(e);if(r)return!t&&/^<a /i.test(r[0])?t=!0:t&&/^<\\\\/a>/i.test(r[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\\\\s|>)/i.test(r[0])?n=!0:n&&/^<\\\\/(pre|code|kbd|script)(\\\\s|>)/i.test(r[0])&&(n=!1),{type:this.options.sanitize?\\\"text\\\":\\\"html\\\",raw:r[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):C(r[0]):r[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n=O(t[2],\\\"()\\\");if(-1<n){var r=(0===t[0].indexOf(\\\"!\\\")?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,r).trim(),t[3]=\\\"\\\"}var i=t[2],s=\\\"\\\";if(this.options.pedantic){var a=/^([^'\\\"]*[^\\\\s])\\\\s+(['\\\"])(.*)\\\\2/.exec(i);s=a?(i=a[1],a[3]):\\\"\\\"}else s=t[3]?t[3].slice(1,-1):\\\"\\\";return D(t,{href:(i=i.trim().replace(/^<([\\\\s\\\\S]*)>$/,\\\"$1\\\"))?i.replace(this.rules.inline._escapes,\\\"$1\\\"):i,title:s?s.replace(this.rules.inline._escapes,\\\"$1\\\"):s},t[0])}},t.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var r=(n[2]||n[1]).replace(/\\\\s+/g,\\\" \\\");if((r=t[r.toLowerCase()])&&r.href)return D(n,r,n[0]);var i=n[0].charAt(0);return{type:\\\"text\\\",raw:i,text:i}}},t.strong=function(e){var t=this.rules.inline.strong.exec(e);if(t)return{type:\\\"strong\\\",raw:t[0],text:t[4]||t[3]||t[2]||t[1]}},t.em=function(e){var t=this.rules.inline.em.exec(e);if(t)return{type:\\\"em\\\",raw:t[0],text:t[6]||t[5]||t[4]||t[3]||t[2]||t[1]}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t)return{type:\\\"codespan\\\",raw:t[0],text:C(t[2].trim(),!0)}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:\\\"br\\\",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:\\\"del\\\",raw:t[0],text:t[1]}},t.autolink=function(e,t){var n,r,i=this.rules.inline.autolink.exec(e);if(i)return r=\\\"@\\\"===i[2]?\\\"mailto:\\\"+(n=C(this.options.mangle?t(i[1]):i[1])):n=C(i[1]),{type:\\\"link\\\",raw:i[0],text:n,href:r,tokens:[{type:\\\"text\\\",raw:n,text:n}]}},t.url=function(e,t){var n;if(n=this.rules.inline.url.exec(e)){var r,i;if(\\\"@\\\"===n[2])i=\\\"mailto:\\\"+(r=C(this.options.mangle?t(n[0]):n[0]));else{for(var s;s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0],s!==n[0];);r=C(n[0]),i=\\\"www.\\\"===n[1]?\\\"http://\\\"+r:r}return{type:\\\"link\\\",raw:n[0],text:r,href:i,tokens:[{type:\\\"text\\\",raw:r,text:r}]}}},t.inlineText=function(e,t,n){var r,i=this.rules.inline.text.exec(e);if(i)return r=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):C(i[0]):i[0]:C(this.options.smartypants?n(i[0]):i[0]),{type:\\\"text\\\",raw:i[0],text:r}},e}(),j=z,L=_,P=$,U={newline:/^\\\\n+/,code:/^( {4}[^\\\\n]+\\\\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})([^\\\\n]*)\\\\n(?:|([\\\\s\\\\S]*?)\\\\n)(?: {0,3}\\\\1[~`]* *(?:\\\\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\\\\n]*?)(?: +#+)? *(?:\\\\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\\\\n]*)(?:\\\\n|$))+/,list:/^( {0,3})(bull) [\\\\s\\\\S]+?(?:hr|def|\\\\n{2,}(?! )(?!\\\\1bull )\\\\n*|\\\\s*$)/,html:\\\"^ {0,3}(?:<(script|pre|style)[\\\\\\\\s>][\\\\\\\\s\\\\\\\\S]*?(?:</\\\\\\\\1>[^\\\\\\\\n]*\\\\\\\\n+|$)|comment[^\\\\\\\\n]*(\\\\\\\\n+|$)|<\\\\\\\\?[\\\\\\\\s\\\\\\\\S]*?\\\\\\\\?>\\\\\\\\n*|<![A-Z][\\\\\\\\s\\\\\\\\S]*?>\\\\\\\\n*|<!\\\\\\\\[CDATA\\\\\\\\[[\\\\\\\\s\\\\\\\\S]*?\\\\\\\\]\\\\\\\\]>\\\\\\\\n*|</?(tag)(?: +|\\\\\\\\n|/?>)[\\\\\\\\s\\\\\\\\S]*?(?:\\\\\\\\n{2,}|$)|<(?!script|pre|style)([a-z][\\\\\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\\\\\t]*(?:\\\\\\\\n|$))[\\\\\\\\s\\\\\\\\S]*?(?:\\\\\\\\n{2,}|$)|</(?!script|pre|style)[a-z][\\\\\\\\w-]*\\\\\\\\s*>(?=[ \\\\\\\\t]*(?:\\\\\\\\n|$))[\\\\\\\\s\\\\\\\\S]*?(?:\\\\\\\\n{2,}|$))\\\",def:/^ {0,3}\\\\[(label)\\\\]: *\\\\n? *<?([^\\\\s>]+)>?(?:(?: +\\\\n? *| *\\\\n *)(title))? *(?:\\\\n+|$)/,nptable:j,table:j,lheading:/^([^\\\\n]+)\\\\n {0,3}(=+|-+) *(?:\\\\n+|$)/,_paragraph:/^([^\\\\n]+(?:\\\\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\\\\n]+)*)/,text:/^[^\\\\n]+/,_label:/(?!\\\\s*\\\\])(?:\\\\\\\\[\\\\[\\\\]]|[^\\\\[\\\\]])+/,_title:/(?:\\\"(?:\\\\\\\\\\\"?|[^\\\"\\\\\\\\])*\\\"|'[^'\\\\n]*(?:\\\\n[^'\\\\n]+)*\\\\n?'|\\\\([^()]*\\\\))/};U.def=L(U.def).replace(\\\"label\\\",U._label).replace(\\\"title\\\",U._title).getRegex(),U.bullet=/(?:[*+-]|\\\\d{1,9}\\\\.)/,U.item=/^( *)(bull) ?[^\\\\n]*(?:\\\\n(?!\\\\1bull ?)[^\\\\n]*)*/,U.item=L(U.item,\\\"gm\\\").replace(/bull/g,U.bullet).getRegex(),U.list=L(U.list).replace(/bull/g,U.bullet).replace(\\\"hr\\\",\\\"\\\\\\\\n+(?=\\\\\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\\\\\* *){3,})(?:\\\\\\\\n+|$))\\\").replace(\\\"def\\\",\\\"\\\\\\\\n+(?=\\\"+U.def.source+\\\")\\\").getRegex(),U._tag=\\\"address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul\\\",U._comment=/<!--(?!-?>)[\\\\s\\\\S]*?-->/,U.html=L(U.html,\\\"i\\\").replace(\\\"comment\\\",U._comment).replace(\\\"tag\\\",U._tag).replace(\\\"attribute\\\",/ +[a-zA-Z:_][\\\\w.:-]*(?: *= *\\\"[^\\\"\\\\n]*\\\"| *= *'[^'\\\\n]*'| *= *[^\\\\s\\\"'=<>`]+)?/).getRegex(),U.paragraph=L(U._paragraph).replace(\\\"hr\\\",U.hr).replace(\\\"heading\\\",\\\" {0,3}#{1,6} \\\").replace(\\\"|lheading\\\",\\\"\\\").replace(\\\"blockquote\\\",\\\" {0,3}>\\\").replace(\\\"fences\\\",\\\" {0,3}(?:`{3,}(?=[^`\\\\\\\\n]*\\\\\\\\n)|~{3,})[^\\\\\\\\n]*\\\\\\\\n\\\").replace(\\\"list\\\",\\\" {0,3}(?:[*+-]|1[.)]) \\\").replace(\\\"html\\\",\\\"</?(?:tag)(?: +|\\\\\\\\n|/?>)|<(?:script|pre|style|!--)\\\").replace(\\\"tag\\\",U._tag).getRegex(),U.blockquote=L(U.blockquote).replace(\\\"paragraph\\\",U.paragraph).getRegex(),U.normal=P({},U),U.gfm=P({},U.normal,{nptable:\\\"^ *([^|\\\\\\\\n ].*\\\\\\\\|.*)\\\\\\\\n *([-:]+ *\\\\\\\\|[-| :]*)(?:\\\\\\\\n((?:(?!\\\\\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\\\\\n|$))*)\\\\\\\\n*|$)\\\",table:\\\"^ *\\\\\\\\|(.+)\\\\\\\\n *\\\\\\\\|?( *[-:]+[-| :]*)(?:\\\\\\\\n *((?:(?!\\\\\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\\\\\n|$))*)\\\\\\\\n*|$)\\\"}),U.gfm.nptable=L(U.gfm.nptable).replace(\\\"hr\\\",U.hr).replace(\\\"heading\\\",\\\" {0,3}#{1,6} \\\").replace(\\\"blockquote\\\",\\\" {0,3}>\\\").replace(\\\"code\\\",\\\" {4}[^\\\\\\\\n]\\\").replace(\\\"fences\\\",\\\" {0,3}(?:`{3,}(?=[^`\\\\\\\\n]*\\\\\\\\n)|~{3,})[^\\\\\\\\n]*\\\\\\\\n\\\").replace(\\\"list\\\",\\\" {0,3}(?:[*+-]|1[.)]) \\\").replace(\\\"html\\\",\\\"</?(?:tag)(?: +|\\\\\\\\n|/?>)|<(?:script|pre|style|!--)\\\").replace(\\\"tag\\\",U._tag).getRegex(),U.gfm.table=L(U.gfm.table).replace(\\\"hr\\\",U.hr).replace(\\\"heading\\\",\\\" {0,3}#{1,6} \\\").replace(\\\"blockquote\\\",\\\" {0,3}>\\\").replace(\\\"code\\\",\\\" {4}[^\\\\\\\\n]\\\").replace(\\\"fences\\\",\\\" {0,3}(?:`{3,}(?=[^`\\\\\\\\n]*\\\\\\\\n)|~{3,})[^\\\\\\\\n]*\\\\\\\\n\\\").replace(\\\"list\\\",\\\" {0,3}(?:[*+-]|1[.)]) \\\").replace(\\\"html\\\",\\\"</?(?:tag)(?: +|\\\\\\\\n|/?>)|<(?:script|pre|style|!--)\\\").replace(\\\"tag\\\",U._tag).getRegex(),U.pedantic=P({},U.normal,{html:L(\\\"^ *(?:comment *(?:\\\\\\\\n|\\\\\\\\s*$)|<(tag)[\\\\\\\\s\\\\\\\\S]+?</\\\\\\\\1> *(?:\\\\\\\\n{2,}|\\\\\\\\s*$)|<tag(?:\\\\\\\"[^\\\\\\\"]*\\\\\\\"|'[^']*'|\\\\\\\\s[^'\\\\\\\"/>\\\\\\\\s]*)*?/?> *(?:\\\\\\\\n{2,}|\\\\\\\\s*$))\\\").replace(\\\"comment\\\",U._comment).replace(/tag/g,\\\"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\\\\\\\b)\\\\\\\\w+(?!:|[^\\\\\\\\w\\\\\\\\s@]*@)\\\\\\\\b\\\").getRegex(),def:/^ *\\\\[([^\\\\]]+)\\\\]: *<?([^\\\\s>]+)>?(?: +([\\\"(][^\\\\n]+[\\\")]))? *(?:\\\\n+|$)/,heading:/^ *(#{1,6}) *([^\\\\n]+?) *(?:#+ *)?(?:\\\\n+|$)/,fences:j,paragraph:L(U.normal._paragraph).replace(\\\"hr\\\",U.hr).replace(\\\"heading\\\",\\\" *#{1,6} *[^\\\\n]\\\").replace(\\\"lheading\\\",U.lheading).replace(\\\"blockquote\\\",\\\" {0,3}>\\\").replace(\\\"|fences\\\",\\\"\\\").replace(\\\"|list\\\",\\\"\\\").replace(\\\"|html\\\",\\\"\\\").getRegex()});var B={escape:/^\\\\\\\\([!\\\"#$%&'()*+,\\\\-./:;<=>?@\\\\[\\\\]\\\\\\\\^_`{|}~])/,autolink:/^<(scheme:[^\\\\s\\\\x00-\\\\x1f<>]*|email)>/,url:j,tag:\\\"^comment|^</[a-zA-Z][\\\\\\\\w:-]*\\\\\\\\s*>|^<[a-zA-Z][\\\\\\\\w-]*(?:attribute)*?\\\\\\\\s*/?>|^<\\\\\\\\?[\\\\\\\\s\\\\\\\\S]*?\\\\\\\\?>|^<![a-zA-Z]+\\\\\\\\s[\\\\\\\\s\\\\\\\\S]*?>|^<!\\\\\\\\[CDATA\\\\\\\\[[\\\\\\\\s\\\\\\\\S]*?\\\\\\\\]\\\\\\\\]>\\\",link:/^!?\\\\[(label)\\\\]\\\\(\\\\s*(href)(?:\\\\s+(title))?\\\\s*\\\\)/,reflink:/^!?\\\\[(label)\\\\]\\\\[(?!\\\\s*\\\\])((?:\\\\\\\\[\\\\[\\\\]]?|[^\\\\[\\\\]\\\\\\\\])+)\\\\]/,nolink:/^!?\\\\[(?!\\\\s*\\\\])((?:\\\\[[^\\\\[\\\\]]*\\\\]|\\\\\\\\[\\\\[\\\\]]|[^\\\\[\\\\]])*)\\\\](?:\\\\[\\\\])?/,strong:/^__([^\\\\s_])__(?!_)|^\\\\*\\\\*([^\\\\s*])\\\\*\\\\*(?!\\\\*)|^__([^\\\\s][\\\\s\\\\S]*?[^\\\\s])__(?!_)|^\\\\*\\\\*([^\\\\s][\\\\s\\\\S]*?[^\\\\s])\\\\*\\\\*(?!\\\\*)/,em:/^_([^\\\\s_])_(?!_)|^_([^\\\\s_<][\\\\s\\\\S]*?[^\\\\s_])_(?!_|[^\\\\spunctuation])|^_([^\\\\s_<][\\\\s\\\\S]*?[^\\\\s])_(?!_|[^\\\\spunctuation])|^\\\\*([^\\\\s*<\\\\[])\\\\*(?!\\\\*)|^\\\\*([^\\\\s<\\\"][\\\\s\\\\S]*?[^\\\\s\\\\[\\\\*])\\\\*(?![\\\\]`punctuation])|^\\\\*([^\\\\s*\\\"<\\\\[][\\\\s\\\\S]*[^\\\\s])\\\\*(?!\\\\*)/,code:/^(`+)([^`]|[^`][\\\\s\\\\S]*?[^`])\\\\1(?!`)/,br:/^( {2,}|\\\\\\\\)\\\\n(?!\\\\s*$)/,del:j,text:/^(`+|[^`])(?:[\\\\s\\\\S]*?(?:(?=[\\\\\\\\<!\\\\[`*]|\\\\b_|$)|[^ ](?= {2,}\\\\n))|(?= {2,}\\\\n))/,_punctuation:\\\"!\\\\\\\"#$%&'()*+\\\\\\\\-./:;<=>?@\\\\\\\\[^_{|}~\\\"};B.em=L(B.em).replace(/punctuation/g,B._punctuation).getRegex(),B._escapes=/\\\\\\\\([!\\\"#$%&'()*+,\\\\-./:;<=>?@\\\\[\\\\]\\\\\\\\^_`{|}~])/g,B._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,B._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,B.autolink=L(B.autolink).replace(\\\"scheme\\\",B._scheme).replace(\\\"email\\\",B._email).getRegex(),B._attribute=/\\\\s+[a-zA-Z:_][\\\\w.:-]*(?:\\\\s*=\\\\s*\\\"[^\\\"]*\\\"|\\\\s*=\\\\s*'[^']*'|\\\\s*=\\\\s*[^\\\\s\\\"'=<>`]+)?/,B.tag=L(B.tag).replace(\\\"comment\\\",U._comment).replace(\\\"attribute\\\",B._attribute).getRegex(),B._label=/(?:\\\\[[^\\\\[\\\\]]*\\\\]|\\\\\\\\.|`[^`]*`|[^\\\\[\\\\]\\\\\\\\`])*?/,B._href=/<(?:\\\\\\\\[<>]?|[^\\\\s<>\\\\\\\\])*>|[^\\\\s\\\\x00-\\\\x1f]*/,B._title=/\\\"(?:\\\\\\\\\\\"?|[^\\\"\\\\\\\\])*\\\"|'(?:\\\\\\\\'?|[^'\\\\\\\\])*'|\\\\((?:\\\\\\\\\\\\)?|[^)\\\\\\\\])*\\\\)/,B.link=L(B.link).replace(\\\"label\\\",B._label).replace(\\\"href\\\",B._href).replace(\\\"title\\\",B._title).getRegex(),B.reflink=L(B.reflink).replace(\\\"label\\\",B._label).getRegex(),B.normal=P({},B),B.pedantic=P({},B.normal,{strong:/^__(?=\\\\S)([\\\\s\\\\S]*?\\\\S)__(?!_)|^\\\\*\\\\*(?=\\\\S)([\\\\s\\\\S]*?\\\\S)\\\\*\\\\*(?!\\\\*)/,em:/^_(?=\\\\S)([\\\\s\\\\S]*?\\\\S)_(?!_)|^\\\\*(?=\\\\S)([\\\\s\\\\S]*?\\\\S)\\\\*(?!\\\\*)/,link:L(/^!?\\\\[(label)\\\\]\\\\((.*?)\\\\)/).replace(\\\"label\\\",B._label).getRegex(),reflink:L(/^!?\\\\[(label)\\\\]\\\\s*\\\\[([^\\\\]]*)\\\\]/).replace(\\\"label\\\",B._label).getRegex()}),B.gfm=P({},B.normal,{escape:L(B.escape).replace(\\\"])\\\",\\\"~|])\\\").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\\\\/\\\\/|www\\\\.)(?:[a-zA-Z0-9\\\\-]+\\\\.?)+[^\\\\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\\\\([^)]*\\\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\\\\S)([\\\\s\\\\S]*?\\\\S)~+/,text:/^(`+|[^`])(?:[\\\\s\\\\S]*?(?:(?=[\\\\\\\\<!\\\\[`*~]|\\\\b_|https?:\\\\/\\\\/|ftp:\\\\/\\\\/|www\\\\.|$)|[^ ](?= {2,}\\\\n)|[^a-zA-Z0-9.!#$%&'*+\\\\/=?_`{\\\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\\\/=?_`{\\\\|}~-]+@))|(?= {2,}\\\\n|[a-zA-Z0-9.!#$%&'*+\\\\/=?_`{\\\\|}~-]+@))/}),B.gfm.url=L(B.gfm.url,\\\"i\\\").replace(\\\"email\\\",B.gfm._extended_email).getRegex(),B.breaks=P({},B.gfm,{br:L(B.br).replace(\\\"{2,}\\\",\\\"*\\\").getRegex(),text:L(B.gfm.text).replace(\\\"\\\\\\\\b_\\\",\\\"\\\\\\\\b_| {2,}\\\\\\\\n\\\").replace(/\\\\{2,\\\\}/g,\\\"*\\\").getRegex()});var F={block:U,inline:B},N=t.defaults,X=F.block,G=F.inline;function M(e){return e.replace(/---/g,\\\"\\u2014\\\").replace(/--/g,\\\"\\u2013\\\").replace(/(^|[-\\\\u2014/(\\\\[{\\\"\\\\s])'/g,\\\"$1\\u2018\\\").replace(/'/g,\\\"\\u2019\\\").replace(/(^|[-\\\\u2014/(\\\\[{\\\\u2018\\\\s])\\\"/g,\\\"$1\\u201c\\\").replace(/\\\"/g,\\\"\\u201d\\\").replace(/\\\\.{3}/g,\\\"\\u2026\\\")}function V(e){var t,n,r=\\\"\\\",i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),.5<Math.random()&&(n=\\\"x\\\"+n.toString(16)),r+=\\\"&#\\\"+n+\\\";\\\";return r}var H=function(){function n(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||N,this.options.tokenizer=this.options.tokenizer||new E,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var t={block:X.normal,inline:G.normal};this.options.pedantic?(t.block=X.pedantic,t.inline=G.pedantic):this.options.gfm&&(t.block=X.gfm,this.options.breaks?t.inline=G.breaks:t.inline=G.gfm),this.tokenizer.rules=t}n.lex=function(e,t){return new n(t).lex(e)};var e,t,r,i=n.prototype;return i.lex=function(e){return e=e.replace(/\\\\r\\\\n|\\\\r/g,\\\"\\\\n\\\").replace(/\\\\t/g,\\\"    \\\"),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},i.blockTokens=function(e,t,n){var r,i,s;for(void 0===t&&(t=[]),void 0===n&&(n=!0),e=e.replace(/^ +$/gm,\\\"\\\");e;)if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),r.type&&t.push(r);else if(r=this.tokenizer.code(e,t))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.nptable(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],n),t.push(r);else if(r=this.tokenizer.list(e)){for(e=e.substring(r.raw.length),s=r.items.length,i=0;i<s;i++)r.items[i].tokens=this.blockTokens(r.items[i].text,[],!1);t.push(r)}else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.def(e)))e=e.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.paragraph(e)))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.text(e))e=e.substring(r.raw.length),t.push(r);else if(e){var a=\\\"Infinite loop on byte: \\\"+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}return t},i.inline=function(e){var t,n,r,i,s,a,l=e.length;for(t=0;t<l;t++)switch((a=e[t]).type){case\\\"paragraph\\\":case\\\"text\\\":case\\\"heading\\\":a.tokens=[],this.inlineTokens(a.text,a.tokens);break;case\\\"table\\\":for(a.tokens={header:[],cells:[]},i=a.header.length,n=0;n<i;n++)a.tokens.header[n]=[],this.inlineTokens(a.header[n],a.tokens.header[n]);for(i=a.cells.length,n=0;n<i;n++)for(s=a.cells[n],a.tokens.cells[n]=[],r=0;r<s.length;r++)a.tokens.cells[n][r]=[],this.inlineTokens(s[r],a.tokens.cells[n][r]);break;case\\\"blockquote\\\":this.inline(a.tokens);break;case\\\"list\\\":for(i=a.items.length,n=0;n<i;n++)this.inline(a.items[n].tokens)}return e},i.inlineTokens=function(e,t,n,r){var i;for(void 0===t&&(t=[]),void 0===n&&(n=!1),void 0===r&&(r=!1);e;)if(i=this.tokenizer.escape(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.tag(e,n,r))e=e.substring(i.raw.length),n=i.inLink,r=i.inRawBlock,t.push(i);else if(i=this.tokenizer.link(e))e=e.substring(i.raw.length),\\\"link\\\"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,r)),t.push(i);else if(i=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(i.raw.length),\\\"link\\\"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,r)),t.push(i);else if(i=this.tokenizer.strong(e))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),t.push(i);else if(i=this.tokenizer.em(e))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),t.push(i);else if(i=this.tokenizer.codespan(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.br(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.del(e))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),t.push(i);else if(i=this.tokenizer.autolink(e,V))e=e.substring(i.raw.length),t.push(i);else if(n||!(i=this.tokenizer.url(e,V))){if(i=this.tokenizer.inlineText(e,r,M))e=e.substring(i.raw.length),t.push(i);else if(e){var s=\\\"Infinite loop on byte: \\\"+e.charCodeAt(0);if(this.options.silent){console.error(s);break}throw new Error(s)}}else e=e.substring(i.raw.length),t.push(i);return t},e=n,r=[{key:\\\"rules\\\",get:function(){return{block:X,inline:G}}}],(t=null)&&s(e.prototype,t),r&&s(e,r),n}(),J=t.defaults,K=y,Q=w,W=function(){function e(e){this.options=e||J}var t=e.prototype;return t.code=function(e,t,n){var r=(t||\\\"\\\").match(/\\\\S*/)[0];if(this.options.highlight){var i=this.options.highlight(e,r);null!=i&&i!==e&&(n=!0,e=i)}return r?'<pre><code class=\\\"'+this.options.langPrefix+Q(r,!0)+'\\\">'+(n?e:Q(e,!0))+\\\"</code></pre>\\\\n\\\":\\\"<pre><code>\\\"+(n?e:Q(e,!0))+\\\"</code></pre>\\\"},t.blockquote=function(e){return\\\"<blockquote>\\\\n\\\"+e+\\\"</blockquote>\\\\n\\\"},t.html=function(e){return e},t.heading=function(e,t,n,r){return this.options.headerIds?\\\"<h\\\"+t+' id=\\\"'+this.options.headerPrefix+r.slug(n)+'\\\">'+e+\\\"</h\\\"+t+\\\">\\\\n\\\":\\\"<h\\\"+t+\\\">\\\"+e+\\\"</h\\\"+t+\\\">\\\\n\\\"},t.hr=function(){return this.options.xhtml?\\\"<hr/>\\\\n\\\":\\\"<hr>\\\\n\\\"},t.list=function(e,t,n){var r=t?\\\"ol\\\":\\\"ul\\\";return\\\"<\\\"+r+(t&&1!==n?' start=\\\"'+n+'\\\"':\\\"\\\")+\\\">\\\\n\\\"+e+\\\"</\\\"+r+\\\">\\\\n\\\"},t.listitem=function(e){return\\\"<li>\\\"+e+\\\"</li>\\\\n\\\"},t.checkbox=function(e){return\\\"<input \\\"+(e?'checked=\\\"\\\" ':\\\"\\\")+'disabled=\\\"\\\" type=\\\"checkbox\\\"'+(this.options.xhtml?\\\" /\\\":\\\"\\\")+\\\"> \\\"},t.paragraph=function(e){return\\\"<p>\\\"+e+\\\"</p>\\\\n\\\"},t.table=function(e,t){return\\\"<table>\\\\n<thead>\\\\n\\\"+e+\\\"</thead>\\\\n\\\"+(t=t&&\\\"<tbody>\\\"+t+\\\"</tbody>\\\")+\\\"</table>\\\\n\\\"},t.tablerow=function(e){return\\\"<tr>\\\\n\\\"+e+\\\"</tr>\\\\n\\\"},t.tablecell=function(e,t){var n=t.header?\\\"th\\\":\\\"td\\\";return(t.align?\\\"<\\\"+n+' align=\\\"'+t.align+'\\\">':\\\"<\\\"+n+\\\">\\\")+e+\\\"</\\\"+n+\\\">\\\\n\\\"},t.strong=function(e){return\\\"<strong>\\\"+e+\\\"</strong>\\\"},t.em=function(e){return\\\"<em>\\\"+e+\\\"</em>\\\"},t.codespan=function(e){return\\\"<code>\\\"+e+\\\"</code>\\\"},t.br=function(){return this.options.xhtml?\\\"<br/>\\\":\\\"<br>\\\"},t.del=function(e){return\\\"<del>\\\"+e+\\\"</del>\\\"},t.link=function(e,t,n){if(null===(e=K(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href=\\\"'+Q(e)+'\\\"';return t&&(r+=' title=\\\"'+t+'\\\"'),r+=\\\">\\\"+n+\\\"</a>\\\"},t.image=function(e,t,n){if(null===(e=K(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src=\\\"'+e+'\\\" alt=\\\"'+n+'\\\"';return t&&(r+=' title=\\\"'+t+'\\\"'),r+=this.options.xhtml?\\\"/>\\\":\\\">\\\"},t.text=function(e){return e},e}(),Y=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,n){return\\\"\\\"+n},t.image=function(e,t,n){return\\\"\\\"+n},t.br=function(){return\\\"\\\"},e}(),ee=function(){function e(){this.seen={}}return e.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/<[!\\\\/a-z].*?>/gi,\\\"\\\").replace(/[\\\\u2000-\\\\u206F\\\\u2E00-\\\\u2E7F\\\\\\\\'!\\\"#$%&()*+,./:;<=>?@[\\\\]^`{|}~]/g,\\\"\\\").replace(/\\\\s/g,\\\"-\\\");if(this.seen.hasOwnProperty(t))for(var n=t;this.seen[n]++,t=n+\\\"-\\\"+this.seen[n],this.seen.hasOwnProperty(t););return this.seen[t]=0,t},e}(),te=t.defaults,ne=v,re=function(){function n(e){this.options=e||te,this.options.renderer=this.options.renderer||new W,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Y,this.slugger=new ee}n.parse=function(e,t){return new n(t).parse(e)};var e=n.prototype;return e.parse=function(e,t){void 0===t&&(t=!0);var n,r,i,s,a,l,o,c,h,u,p,g,f,d,k,b,m,x,w=\\\"\\\",v=e.length;for(n=0;n<v;n++)switch((u=e[n]).type){case\\\"space\\\":continue;case\\\"hr\\\":w+=this.renderer.hr();continue;case\\\"heading\\\":w+=this.renderer.heading(this.parseInline(u.tokens),u.depth,ne(this.parseInline(u.tokens,this.textRenderer)),this.slugger);continue;case\\\"code\\\":w+=this.renderer.code(u.text,u.lang,u.escaped);continue;case\\\"table\\\":for(o=c=\\\"\\\",s=u.header.length,r=0;r<s;r++)o+=this.renderer.tablecell(this.parseInline(u.tokens.header[r]),{header:!0,align:u.align[r]});for(c+=this.renderer.tablerow(o),h=\\\"\\\",s=u.cells.length,r=0;r<s;r++){for(o=\\\"\\\",a=(l=u.tokens.cells[r]).length,i=0;i<a;i++)o+=this.renderer.tablecell(this.parseInline(l[i]),{header:!1,align:u.align[i]});h+=this.renderer.tablerow(o)}w+=this.renderer.table(c,h);continue;case\\\"blockquote\\\":h=this.parse(u.tokens),w+=this.renderer.blockquote(h);continue;case\\\"list\\\":for(p=u.ordered,g=u.start,f=u.loose,s=u.items.length,h=\\\"\\\",r=0;r<s;r++)b=(k=u.items[r]).checked,m=k.task,d=\\\"\\\",k.task&&(x=this.renderer.checkbox(b),f?\\\"text\\\"===k.tokens[0].type?(k.tokens[0].text=x+\\\" \\\"+k.tokens[0].text,k.tokens[0].tokens&&0<k.tokens[0].tokens.length&&\\\"text\\\"===k.tokens[0].tokens[0].type&&(k.tokens[0].tokens[0].text=x+\\\" \\\"+k.tokens[0].tokens[0].text)):k.tokens.unshift({type:\\\"text\\\",text:x}):d+=x),d+=this.parse(k.tokens,f),h+=this.renderer.listitem(d,m,b);w+=this.renderer.list(h,p,g);continue;case\\\"html\\\":w+=this.renderer.html(u.text);continue;case\\\"paragraph\\\":w+=this.renderer.paragraph(this.parseInline(u.tokens));continue;case\\\"text\\\":for(h=u.tokens?this.parseInline(u.tokens):u.text;n+1<v&&\\\"text\\\"===e[n+1].type;)h+=\\\"\\\\n\\\"+((u=e[++n]).tokens?this.parseInline(u.tokens):u.text);w+=t?this.renderer.paragraph(h):h;continue;default:var _='Token with \\\"'+u.type+'\\\" type was not found.';if(this.options.silent)return void console.error(_);throw new Error(_)}return w},e.parseInline=function(e,t){t=t||this.renderer;var n,r,i=\\\"\\\",s=e.length;for(n=0;n<s;n++)switch((r=e[n]).type){case\\\"escape\\\":i+=t.text(r.text);break;case\\\"html\\\":i+=t.html(r.text);break;case\\\"link\\\":i+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case\\\"image\\\":i+=t.image(r.href,r.title,r.text);break;case\\\"strong\\\":i+=t.strong(this.parseInline(r.tokens,t));break;case\\\"em\\\":i+=t.em(this.parseInline(r.tokens,t));break;case\\\"codespan\\\":i+=t.codespan(r.text);break;case\\\"br\\\":i+=t.br();break;case\\\"del\\\":i+=t.del(this.parseInline(r.tokens,t));break;case\\\"text\\\":i+=t.text(r.text);break;default:var a='Token with \\\"'+r.type+'\\\" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}return i},n}(),ie=$,se=Z,ae=w,le=t.getDefaults,oe=t.changeDefaults,ce=t.defaults;function he(t,a,l){if(null==t)throw new Error(\\\"marked(): input parameter is undefined or null\\\");if(\\\"string\\\"!=typeof t)throw new Error(\\\"marked(): input parameter is of type \\\"+Object.prototype.toString.call(t)+\\\", string expected\\\");if(l||\\\"function\\\"==typeof a){var e=function(){l||(l=a,a=null),a=ie({},he.defaults,a||{}),se(a);var n,r,i=a.highlight,e=0;try{n=H.lex(t,a)}catch(e){return{v:l(e)}}r=n.length;function s(t){if(t)return a.highlight=i,l(t);var e;try{e=re.parse(n,a)}catch(e){t=e}return a.highlight=i,t?l(t):l(null,e)}if(!i||i.length<3)return{v:s()};if(delete a.highlight,!r)return{v:s()};for(;e<n.length;e++)!function(n){\\\"code\\\"!==n.type?--r||s():i(n.text,n.lang,function(e,t){return e?s(e):null==t||t===n.text?--r||s():(n.text=t,n.escaped=!0,void(--r||s()))})}(n[e]);return{v:void 0}}();if(\\\"object\\\"==typeof e)return e.v}try{return a=ie({},he.defaults,a||{}),se(a),re.parse(H.lex(t,a),a)}catch(e){if(e.message+=\\\"\\\\nPlease report this to https://github.com/markedjs/marked.\\\",(a||he.defaults).silent)return\\\"<p>An error occurred:</p><pre>\\\"+ae(e.message+\\\"\\\",!0)+\\\"</pre>\\\";throw e}}return he.options=he.setOptions=function(e){return ie(he.defaults,e),oe(he.defaults),he},he.getDefaults=le,he.defaults=ce,he.use=function(l){var n=ie({},l);l.renderer&&function(){function e(i){var s=a[i];a[i]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=l.renderer[i].apply(a,t);return!1===r&&(r=s.apply(a,t)),r}}var a=he.defaults.renderer||new W;for(var t in l.renderer)e(t);n.renderer=a}(),l.tokenizer&&function(){function e(i){var s=a[i];a[i]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=l.tokenizer[i].apply(a,t);return!1===r&&(r=s.apply(a,t)),r}}var a=he.defaults.tokenizer||new E;for(var t in l.tokenizer)e(t);n.tokenizer=a}(),he.setOptions(n)},he.Parser=re,he.parser=re.parse,he.Renderer=W,he.TextRenderer=Y,he.Lexer=H,he.lexer=H.lex,he.Tokenizer=E,he.Slugger=ee,he.parse=he});\\n[end of marked.min.js]\\n[start of marked.js]\\n/**\\n * marked - a markdown parser\\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n\\n/**\\n * DO NOT EDIT THIS FILE\\n * The code in this file is generated from files in ./src/\\n */\\n\\n(function (global, factory) {\\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\\n  typeof define === 'function' && define.amd ? define(factory) :\\n  (global = global || self, global.marked = factory());\\n}(this, (function () { 'use strict';\\n\\n  function _defineProperties(target, props) {\\n    for (var i = 0; i < props.length; i++) {\\n      var descriptor = props[i];\\n      descriptor.enumerable = descriptor.enumerable || false;\\n      descriptor.configurable = true;\\n      if (\\\"value\\\" in descriptor) descriptor.writable = true;\\n      Object.defineProperty(target, descriptor.key, descriptor);\\n    }\\n  }\\n\\n  function _createClass(Constructor, protoProps, staticProps) {\\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\\n    if (staticProps) _defineProperties(Constructor, staticProps);\\n    return Constructor;\\n  }\\n\\n  function createCommonjsModule(fn, module) {\\n  \\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\\n  }\\n\\n  var defaults = createCommonjsModule(function (module) {\\n    function getDefaults() {\\n      return {\\n        baseUrl: null,\\n        breaks: false,\\n        gfm: true,\\n        headerIds: true,\\n        headerPrefix: '',\\n        highlight: null,\\n        langPrefix: 'language-',\\n        mangle: true,\\n        pedantic: false,\\n        renderer: null,\\n        sanitize: false,\\n        sanitizer: null,\\n        silent: false,\\n        smartLists: false,\\n        smartypants: false,\\n        tokenizer: null,\\n        xhtml: false\\n      };\\n    }\\n\\n    function changeDefaults(newDefaults) {\\n      module.exports.defaults = newDefaults;\\n    }\\n\\n    module.exports = {\\n      defaults: getDefaults(),\\n      getDefaults: getDefaults,\\n      changeDefaults: changeDefaults\\n    };\\n  });\\n  var defaults_1 = defaults.defaults;\\n  var defaults_2 = defaults.getDefaults;\\n  var defaults_3 = defaults.changeDefaults;\\n\\n  /**\\n   * Helpers\\n   */\\n  var escapeTest = /[&<>\\\"']/;\\n  var escapeReplace = /[&<>\\\"']/g;\\n  var escapeTestNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/;\\n  var escapeReplaceNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/g;\\n  var escapeReplacements = {\\n    '&': '&amp;',\\n    '<': '&lt;',\\n    '>': '&gt;',\\n    '\\\"': '&quot;',\\n    \\\"'\\\": '&#39;'\\n  };\\n\\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\\n    return escapeReplacements[ch];\\n  };\\n\\n  function escape(html, encode) {\\n    if (encode) {\\n      if (escapeTest.test(html)) {\\n        return html.replace(escapeReplace, getEscapeReplacement);\\n      }\\n    } else {\\n      if (escapeTestNoEncode.test(html)) {\\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\\n      }\\n    }\\n\\n    return html;\\n  }\\n\\n  var unescapeTest = /&(#(?:\\\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\\\w+));?/ig;\\n\\n  function unescape(html) {\\n    // explicitly match decimal, hex, and named HTML entities\\n    return html.replace(unescapeTest, function (_, n) {\\n      n = n.toLowerCase();\\n      if (n === 'colon') return ':';\\n\\n      if (n.charAt(0) === '#') {\\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\\n      }\\n\\n      return '';\\n    });\\n  }\\n\\n  var caret = /(^|[^\\\\[])\\\\^/g;\\n\\n  function edit(regex, opt) {\\n    regex = regex.source || regex;\\n    opt = opt || '';\\n    var obj = {\\n      replace: function replace(name, val) {\\n        val = val.source || val;\\n        val = val.replace(caret, '$1');\\n        regex = regex.replace(name, val);\\n        return obj;\\n      },\\n      getRegex: function getRegex() {\\n        return new RegExp(regex, opt);\\n      }\\n    };\\n    return obj;\\n  }\\n\\n  var nonWordAndColonTest = /[^\\\\w:]/g;\\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\\n\\n  function cleanUrl(sanitize, base, href) {\\n    if (sanitize) {\\n      var prot;\\n\\n      try {\\n        prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, '').toLowerCase();\\n      } catch (e) {\\n        return null;\\n      }\\n\\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\\n        return null;\\n      }\\n    }\\n\\n    if (base && !originIndependentUrl.test(href)) {\\n      href = resolveUrl(base, href);\\n    }\\n\\n    try {\\n      href = encodeURI(href).replace(/%25/g, '%');\\n    } catch (e) {\\n      return null;\\n    }\\n\\n    return href;\\n  }\\n\\n  var baseUrls = {};\\n  var justDomain = /^[^:]+:\\\\/*[^/]*$/;\\n  var protocol = /^([^:]+:)[\\\\s\\\\S]*$/;\\n  var domain = /^([^:]+:\\\\/*[^/]*)[\\\\s\\\\S]*$/;\\n\\n  function resolveUrl(base, href) {\\n    if (!baseUrls[' ' + base]) {\\n      // we can ignore everything in base after the last slash of its path component,\\n      // but we might need to add _that_\\n      // https://tools.ietf.org/html/rfc3986#section-3\\n      if (justDomain.test(base)) {\\n        baseUrls[' ' + base] = base + '/';\\n      } else {\\n        baseUrls[' ' + base] = rtrim(base, '/', true);\\n      }\\n    }\\n\\n    base = baseUrls[' ' + base];\\n    var relativeBase = base.indexOf(':') === -1;\\n\\n    if (href.substring(0, 2) === '//') {\\n      if (relativeBase) {\\n        return href;\\n      }\\n\\n      return base.replace(protocol, '$1') + href;\\n    } else if (href.charAt(0) === '/') {\\n      if (relativeBase) {\\n        return href;\\n      }\\n\\n      return base.replace(domain, '$1') + href;\\n    } else {\\n      return base + href;\\n    }\\n  }\\n\\n  var noopTest = {\\n    exec: function noopTest() {}\\n  };\\n\\n  function merge(obj) {\\n    var i = 1,\\n        target,\\n        key;\\n\\n    for (; i < arguments.length; i++) {\\n      target = arguments[i];\\n\\n      for (key in target) {\\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\\n          obj[key] = target[key];\\n        }\\n      }\\n    }\\n\\n    return obj;\\n  }\\n\\n  function splitCells(tableRow, count) {\\n    // ensure that every cell-delimiting pipe has a space\\n    // before it to distinguish it from an escaped pipe\\n    var row = tableRow.replace(/\\\\|/g, function (match, offset, str) {\\n      var escaped = false,\\n          curr = offset;\\n\\n      while (--curr >= 0 && str[curr] === '\\\\\\\\') {\\n        escaped = !escaped;\\n      }\\n\\n      if (escaped) {\\n        // odd number of slashes means | is escaped\\n        // so we leave it alone\\n        return '|';\\n      } else {\\n        // add space before unescaped |\\n        return ' |';\\n      }\\n    }),\\n        cells = row.split(/ \\\\|/);\\n    var i = 0;\\n\\n    if (cells.length > count) {\\n      cells.splice(count);\\n    } else {\\n      while (cells.length < count) {\\n        cells.push('');\\n      }\\n    }\\n\\n    for (; i < cells.length; i++) {\\n      // leading or trailing whitespace is ignored per the gfm spec\\n      cells[i] = cells[i].trim().replace(/\\\\\\\\\\\\|/g, '|');\\n    }\\n\\n    return cells;\\n  } // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\\n  // /c*$/ is vulnerable to REDOS.\\n  // invert: Remove suffix of non-c chars instead. Default falsey.\\n\\n\\n  function rtrim(str, c, invert) {\\n    var l = str.length;\\n\\n    if (l === 0) {\\n      return '';\\n    } // Length of suffix matching the invert condition.\\n\\n\\n    var suffLen = 0; // Step left until we fail to match the invert condition.\\n\\n    while (suffLen < l) {\\n      var currChar = str.charAt(l - suffLen - 1);\\n\\n      if (currChar === c && !invert) {\\n        suffLen++;\\n      } else if (currChar !== c && invert) {\\n        suffLen++;\\n      } else {\\n        break;\\n      }\\n    }\\n\\n    return str.substr(0, l - suffLen);\\n  }\\n\\n  function findClosingBracket(str, b) {\\n    if (str.indexOf(b[1]) === -1) {\\n      return -1;\\n    }\\n\\n    var l = str.length;\\n    var level = 0,\\n        i = 0;\\n\\n    for (; i < l; i++) {\\n      if (str[i] === '\\\\\\\\') {\\n        i++;\\n      } else if (str[i] === b[0]) {\\n        level++;\\n      } else if (str[i] === b[1]) {\\n        level--;\\n\\n        if (level < 0) {\\n          return i;\\n        }\\n      }\\n    }\\n\\n    return -1;\\n  }\\n\\n  function checkSanitizeDeprecation(opt) {\\n    if (opt && opt.sanitize && !opt.silent) {\\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\\n    }\\n  }\\n\\n  var helpers = {\\n    escape: escape,\\n    unescape: unescape,\\n    edit: edit,\\n    cleanUrl: cleanUrl,\\n    resolveUrl: resolveUrl,\\n    noopTest: noopTest,\\n    merge: merge,\\n    splitCells: splitCells,\\n    rtrim: rtrim,\\n    findClosingBracket: findClosingBracket,\\n    checkSanitizeDeprecation: checkSanitizeDeprecation\\n  };\\n\\n  var defaults$1 = defaults.defaults;\\n  var rtrim$1 = helpers.rtrim,\\n      splitCells$1 = helpers.splitCells,\\n      _escape = helpers.escape,\\n      findClosingBracket$1 = helpers.findClosingBracket;\\n\\n  function outputLink(cap, link, raw) {\\n    var href = link.href;\\n    var title = link.title ? _escape(link.title) : null;\\n\\n    if (cap[0].charAt(0) !== '!') {\\n      return {\\n        type: 'link',\\n        raw: raw,\\n        href: href,\\n        title: title,\\n        text: cap[1]\\n      };\\n    } else {\\n      return {\\n        type: 'image',\\n        raw: raw,\\n        text: _escape(cap[1]),\\n        href: href,\\n        title: title\\n      };\\n    }\\n  }\\n  /**\\n   * Tokenizer\\n   */\\n\\n\\n  var Tokenizer_1 = /*#__PURE__*/function () {\\n    function Tokenizer(options) {\\n      this.options = options || defaults$1;\\n    }\\n\\n    var _proto = Tokenizer.prototype;\\n\\n    _proto.space = function space(src) {\\n      var cap = this.rules.block.newline.exec(src);\\n\\n      if (cap) {\\n        if (cap[0].length > 1) {\\n          return {\\n            type: 'space',\\n            raw: cap[0]\\n          };\\n        }\\n\\n        return {\\n          raw: '\\\\n'\\n        };\\n      }\\n    };\\n\\n    _proto.code = function code(src, tokens) {\\n      var cap = this.rules.block.code.exec(src);\\n\\n      if (cap) {\\n        var lastToken = tokens[tokens.length - 1]; // An indented code block cannot interrupt a paragraph.\\n\\n        if (lastToken && lastToken.type === 'paragraph') {\\n          tokens.pop();\\n          lastToken.text += '\\\\n' + cap[0].trimRight();\\n          lastToken.raw += '\\\\n' + cap[0];\\n          return lastToken;\\n        } else {\\n          var text = cap[0].replace(/^ {4}/gm, '');\\n          return {\\n            type: 'code',\\n            raw: cap[0],\\n            codeBlockStyle: 'indented',\\n            text: !this.options.pedantic ? rtrim$1(text, '\\\\n') : text\\n          };\\n        }\\n      }\\n    };\\n\\n    _proto.fences = function fences(src) {\\n      var cap = this.rules.block.fences.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'code',\\n          raw: cap[0],\\n          lang: cap[2] ? cap[2].trim() : cap[2],\\n          text: cap[3] || ''\\n        };\\n      }\\n    };\\n\\n    _proto.heading = function heading(src) {\\n      var cap = this.rules.block.heading.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'heading',\\n          raw: cap[0],\\n          depth: cap[1].length,\\n          text: cap[2]\\n        };\\n      }\\n    };\\n\\n    _proto.nptable = function nptable(src) {\\n      var cap = this.rules.block.nptable.exec(src);\\n\\n      if (cap) {\\n        var item = {\\n          type: 'table',\\n          header: splitCells$1(cap[1].replace(/^ *| *\\\\| *$/g, '')),\\n          align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n          cells: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : [],\\n          raw: cap[0]\\n        };\\n\\n        if (item.header.length === item.align.length) {\\n          var l = item.align.length;\\n          var i;\\n\\n          for (i = 0; i < l; i++) {\\n            if (/^ *-+: *$/.test(item.align[i])) {\\n              item.align[i] = 'right';\\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\\n              item.align[i] = 'center';\\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\\n              item.align[i] = 'left';\\n            } else {\\n              item.align[i] = null;\\n            }\\n          }\\n\\n          l = item.cells.length;\\n\\n          for (i = 0; i < l; i++) {\\n            item.cells[i] = splitCells$1(item.cells[i], item.header.length);\\n          }\\n\\n          return item;\\n        }\\n      }\\n    };\\n\\n    _proto.hr = function hr(src) {\\n      var cap = this.rules.block.hr.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'hr',\\n          raw: cap[0]\\n        };\\n      }\\n    };\\n\\n    _proto.blockquote = function blockquote(src) {\\n      var cap = this.rules.block.blockquote.exec(src);\\n\\n      if (cap) {\\n        var text = cap[0].replace(/^ *> ?/gm, '');\\n        return {\\n          type: 'blockquote',\\n          raw: cap[0],\\n          text: text\\n        };\\n      }\\n    };\\n\\n    _proto.list = function list(src) {\\n      var cap = this.rules.block.list.exec(src);\\n\\n      if (cap) {\\n        var raw = cap[0];\\n        var bull = cap[2];\\n        var isordered = bull.length > 1;\\n        var list = {\\n          type: 'list',\\n          raw: raw,\\n          ordered: isordered,\\n          start: isordered ? +bull : '',\\n          loose: false,\\n          items: []\\n        }; // Get each top-level item.\\n\\n        var itemMatch = cap[0].match(this.rules.block.item);\\n        var next = false,\\n            item,\\n            space,\\n            b,\\n            addBack,\\n            loose,\\n            istask,\\n            ischecked;\\n        var l = itemMatch.length;\\n\\n        for (var i = 0; i < l; i++) {\\n          item = itemMatch[i];\\n          raw = item; // Remove the list item's bullet\\n          // so it is seen as the next token.\\n\\n          space = item.length;\\n          item = item.replace(/^ *([*+-]|\\\\d+\\\\.) */, ''); // Outdent whatever the\\n          // list item contains. Hacky.\\n\\n          if (~item.indexOf('\\\\n ')) {\\n            space -= item.length;\\n            item = !this.options.pedantic ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '') : item.replace(/^ {1,4}/gm, '');\\n          } // Determine whether the next list item belongs here.\\n          // Backpedal if it does not belong in this list.\\n\\n\\n          if (i !== l - 1) {\\n            b = this.rules.block.bullet.exec(itemMatch[i + 1])[0];\\n\\n            if (bull.length > 1 ? b.length === 1 : b.length > 1 || this.options.smartLists && b !== bull) {\\n              addBack = itemMatch.slice(i + 1).join('\\\\n');\\n              list.raw = list.raw.substring(0, list.raw.length - addBack.length);\\n              i = l - 1;\\n            }\\n          } // Determine whether item is loose or not.\\n          // Use: /(^|\\\\n)(?! )[^\\\\n]+\\\\n\\\\n(?!\\\\s*$)/\\n          // for discount behavior.\\n\\n\\n          loose = next || /\\\\n\\\\n(?!\\\\s*$)/.test(item);\\n\\n          if (i !== l - 1) {\\n            next = item.charAt(item.length - 1) === '\\\\n';\\n            if (!loose) loose = next;\\n          }\\n\\n          if (loose) {\\n            list.loose = true;\\n          } // Check for task list items\\n\\n\\n          istask = /^\\\\[[ xX]\\\\] /.test(item);\\n          ischecked = undefined;\\n\\n          if (istask) {\\n            ischecked = item[1] !== ' ';\\n            item = item.replace(/^\\\\[[ xX]\\\\] +/, '');\\n          }\\n\\n          list.items.push({\\n            raw: raw,\\n            task: istask,\\n            checked: ischecked,\\n            loose: loose,\\n            text: item\\n          });\\n        }\\n\\n        return list;\\n      }\\n    };\\n\\n    _proto.html = function html(src) {\\n      var cap = this.rules.block.html.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: this.options.sanitize ? 'paragraph' : 'html',\\n          raw: cap[0],\\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\\n        };\\n      }\\n    };\\n\\n    _proto.def = function def(src) {\\n      var cap = this.rules.block.def.exec(src);\\n\\n      if (cap) {\\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\\n        var tag = cap[1].toLowerCase().replace(/\\\\s+/g, ' ');\\n        return {\\n          tag: tag,\\n          raw: cap[0],\\n          href: cap[2],\\n          title: cap[3]\\n        };\\n      }\\n    };\\n\\n    _proto.table = function table(src) {\\n      var cap = this.rules.block.table.exec(src);\\n\\n      if (cap) {\\n        var item = {\\n          type: 'table',\\n          header: splitCells$1(cap[1].replace(/^ *| *\\\\| *$/g, '')),\\n          align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n          cells: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : []\\n        };\\n\\n        if (item.header.length === item.align.length) {\\n          item.raw = cap[0];\\n          var l = item.align.length;\\n          var i;\\n\\n          for (i = 0; i < l; i++) {\\n            if (/^ *-+: *$/.test(item.align[i])) {\\n              item.align[i] = 'right';\\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\\n              item.align[i] = 'center';\\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\\n              item.align[i] = 'left';\\n            } else {\\n              item.align[i] = null;\\n            }\\n          }\\n\\n          l = item.cells.length;\\n\\n          for (i = 0; i < l; i++) {\\n            item.cells[i] = splitCells$1(item.cells[i].replace(/^ *\\\\| *| *\\\\| *$/g, ''), item.header.length);\\n          }\\n\\n          return item;\\n        }\\n      }\\n    };\\n\\n    _proto.lheading = function lheading(src) {\\n      var cap = this.rules.block.lheading.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'heading',\\n          raw: cap[0],\\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\\n          text: cap[1]\\n        };\\n      }\\n    };\\n\\n    _proto.paragraph = function paragraph(src) {\\n      var cap = this.rules.block.paragraph.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'paragraph',\\n          raw: cap[0],\\n          text: cap[1].charAt(cap[1].length - 1) === '\\\\n' ? cap[1].slice(0, -1) : cap[1]\\n        };\\n      }\\n    };\\n\\n    _proto.text = function text(src) {\\n      var cap = this.rules.block.text.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'text',\\n          raw: cap[0],\\n          text: cap[0]\\n        };\\n      }\\n    };\\n\\n    _proto.escape = function escape(src) {\\n      var cap = this.rules.inline.escape.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'escape',\\n          raw: cap[0],\\n          text: _escape(cap[1])\\n        };\\n      }\\n    };\\n\\n    _proto.tag = function tag(src, inLink, inRawBlock) {\\n      var cap = this.rules.inline.tag.exec(src);\\n\\n      if (cap) {\\n        if (!inLink && /^<a /i.test(cap[0])) {\\n          inLink = true;\\n        } else if (inLink && /^<\\\\/a>/i.test(cap[0])) {\\n          inLink = false;\\n        }\\n\\n        if (!inRawBlock && /^<(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n          inRawBlock = true;\\n        } else if (inRawBlock && /^<\\\\/(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n          inRawBlock = false;\\n        }\\n\\n        return {\\n          type: this.options.sanitize ? 'text' : 'html',\\n          raw: cap[0],\\n          inLink: inLink,\\n          inRawBlock: inRawBlock,\\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\\n        };\\n      }\\n    };\\n\\n    _proto.link = function link(src) {\\n      var cap = this.rules.inline.link.exec(src);\\n\\n      if (cap) {\\n        var lastParenIndex = findClosingBracket$1(cap[2], '()');\\n\\n        if (lastParenIndex > -1) {\\n          var start = cap[0].indexOf('!') === 0 ? 5 : 4;\\n          var linkLen = start + cap[1].length + lastParenIndex;\\n          cap[2] = cap[2].substring(0, lastParenIndex);\\n          cap[0] = cap[0].substring(0, linkLen).trim();\\n          cap[3] = '';\\n        }\\n\\n        var href = cap[2];\\n        var title = '';\\n\\n        if (this.options.pedantic) {\\n          var link = /^([^'\\\"]*[^\\\\s])\\\\s+(['\\\"])(.*)\\\\2/.exec(href);\\n\\n          if (link) {\\n            href = link[1];\\n            title = link[3];\\n          } else {\\n            title = '';\\n          }\\n        } else {\\n          title = cap[3] ? cap[3].slice(1, -1) : '';\\n        }\\n\\n        href = href.trim().replace(/^<([\\\\s\\\\S]*)>$/, '$1');\\n        var token = outputLink(cap, {\\n          href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\\n          title: title ? title.replace(this.rules.inline._escapes, '$1') : title\\n        }, cap[0]);\\n        return token;\\n      }\\n    };\\n\\n    _proto.reflink = function reflink(src, links) {\\n      var cap;\\n\\n      if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {\\n        var link = (cap[2] || cap[1]).replace(/\\\\s+/g, ' ');\\n        link = links[link.toLowerCase()];\\n\\n        if (!link || !link.href) {\\n          var text = cap[0].charAt(0);\\n          return {\\n            type: 'text',\\n            raw: text,\\n            text: text\\n          };\\n        }\\n\\n        var token = outputLink(cap, link, cap[0]);\\n        return token;\\n      }\\n    };\\n\\n    _proto.strong = function strong(src) {\\n      var cap = this.rules.inline.strong.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'strong',\\n          raw: cap[0],\\n          text: cap[4] || cap[3] || cap[2] || cap[1]\\n        };\\n      }\\n    };\\n\\n    _proto.em = function em(src) {\\n      var cap = this.rules.inline.em.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'em',\\n          raw: cap[0],\\n          text: cap[6] || cap[5] || cap[4] || cap[3] || cap[2] || cap[1]\\n        };\\n      }\\n    };\\n\\n    _proto.codespan = function codespan(src) {\\n      var cap = this.rules.inline.code.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'codespan',\\n          raw: cap[0],\\n          text: _escape(cap[2].trim(), true)\\n        };\\n      }\\n    };\\n\\n    _proto.br = function br(src) {\\n      var cap = this.rules.inline.br.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'br',\\n          raw: cap[0]\\n        };\\n      }\\n    };\\n\\n    _proto.del = function del(src) {\\n      var cap = this.rules.inline.del.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'del',\\n          raw: cap[0],\\n          text: cap[1]\\n        };\\n      }\\n    };\\n\\n    _proto.autolink = function autolink(src, mangle) {\\n      var cap = this.rules.inline.autolink.exec(src);\\n\\n      if (cap) {\\n        var text, href;\\n\\n        if (cap[2] === '@') {\\n          text = _escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\\n          href = 'mailto:' + text;\\n        } else {\\n          text = _escape(cap[1]);\\n          href = text;\\n        }\\n\\n        return {\\n          type: 'link',\\n          raw: cap[0],\\n          text: text,\\n          href: href,\\n          tokens: [{\\n            type: 'text',\\n            raw: text,\\n            text: text\\n          }]\\n        };\\n      }\\n    };\\n\\n    _proto.url = function url(src, mangle) {\\n      var cap;\\n\\n      if (cap = this.rules.inline.url.exec(src)) {\\n        var text, href;\\n\\n        if (cap[2] === '@') {\\n[end of marked.js]\\n[start of update-specs.js]\\nconst fetch = require('node-fetch');\\nconst cheerio = require('cheerio');\\nconst marked = require('../');\\nconst htmlDiffer = require('./helpers/html-differ.js');\\nconst fs = require('fs');\\nconst path = require('path');\\n\\nfunction removeFiles(dir) {\\n  fs.readdirSync(dir).forEach(file => {\\n    fs.unlinkSync(path.join(dir, file));\\n  });\\n}\\n\\nasync function updateCommonmark(dir, options) {\\n  try {\\n    const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\\n    const pkg = await res.json();\\n    const version = pkg.version.replace(/^(\\\\d+\\\\.\\\\d+).*$/, '$1');\\n    const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\\n    const specs = await res2.json();\\n    specs.forEach(spec => {\\n      const html = marked(spec.markdown, options);\\n      if (!htmlDiffer.isEqual(html, spec.html)) {\\n        spec.shouldFail = true;\\n      }\\n    });\\n    fs.writeFileSync(path.resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\\\n');\\n    console.log(`Saved CommonMark v${version} specs`);\\n  } catch (ex) {\\n    console.log(ex);\\n  }\\n}\\n\\nasync function updateGfm(dir) {\\n  try {\\n    const res = await fetch('https://github.github.com/gfm/');\\n    const html = await res.text();\\n    const $ = cheerio.load(html);\\n    const version = $('.version').text().match(/\\\\d+\\\\.\\\\d+/)[0];\\n    if (!version) {\\n      throw new Error('No version found');\\n    }\\n    const specs = [];\\n    $('.extension').each((i, ext) => {\\n      const section = $('.definition', ext).text().trim().replace(/^\\\\d+\\\\.\\\\d+(.*?) \\\\(extension\\\\)[\\\\s\\\\S]*$/, '$1');\\n      $('.example', ext).each((j, exa) => {\\n        const example = +$(exa).attr('id').replace(/\\\\D/g, '');\\n        const markdown = $('.language-markdown', exa).text().trim();\\n        const html = $('.language-html', exa).text().trim();\\n        specs.push({\\n          section: `[extension] ${section}`,\\n          html,\\n          markdown,\\n          example\\n        });\\n      });\\n    });\\n\\n    specs.forEach(spec => {\\n      const html = marked(spec.markdown, { gfm: true, pedantic: false });\\n      if (!htmlDiffer.isEqual(html, spec.html)) {\\n        spec.shouldFail = true;\\n      }\\n    });\\n    fs.writeFileSync(path.resolve(dir, `./gfm.${version}.json`), JSON.stringify(specs, null, 2) + '\\\\n');\\n    console.log(`Saved GFM v${version} specs.`);\\n  } catch (ex) {\\n    console.log(ex);\\n  }\\n}\\n\\nconst commonmarkDir = path.resolve(__dirname, './specs/commonmark');\\nconst gfmDir = path.resolve(__dirname, './specs/gfm');\\nremoveFiles(commonmarkDir);\\nremoveFiles(gfmDir);\\nupdateCommonmark(commonmarkDir, { gfm: false, pedantic: false, headerIds: false });\\nupdateCommonmark(gfmDir, { gfm: true, pedantic: false, headerIds: false });\\nupdateGfm(gfmDir);\\n\\n[end of update-specs.js]\\n[start of worker.js]\\n/* globals marked, unfetch, ES6Promise, Promise */ // eslint-disable-line no-redeclare\\n\\nif (!self.Promise) {\\n  self.importScripts('https://cdn.jsdelivr.net/npm/es6-promise/dist/es6-promise.js');\\n  self.Promise = ES6Promise;\\n}\\nif (!self.fetch) {\\n  self.importScripts('https://cdn.jsdelivr.net/npm/unfetch/dist/unfetch.umd.js');\\n  self.fetch = unfetch;\\n}\\n\\nvar versionCache = {};\\nvar currentVersion;\\n\\nonunhandledrejection = function(e) {\\n  throw e.reason;\\n};\\n\\nonmessage = function(e) {\\n  if (e.data.version === currentVersion) {\\n    parse(e);\\n  } else {\\n    loadVersion(e.data.version).then(function() {\\n      parse(e);\\n    });\\n  }\\n};\\n\\nfunction parse(e) {\\n  switch (e.data.task) {\\n    case 'defaults':\\n\\n      var defaults = {};\\n      if (typeof marked.getDefaults === 'function') {\\n        defaults = marked.getDefaults();\\n        delete defaults.renderer;\\n      } else if ('defaults' in marked) {\\n        for (var prop in marked.defaults) {\\n          if (prop !== 'renderer') {\\n            defaults[prop] = marked.defaults[prop];\\n          }\\n        }\\n      }\\n      postMessage({\\n        task: e.data.task,\\n        defaults: defaults\\n      });\\n      break;\\n    case 'parse':\\n      var startTime = new Date();\\n      var lexed = marked.lexer(e.data.markdown, e.data.options);\\n      var lexedList = jsonString(lexed);\\n      var parsed = marked.parser(lexed, e.data.options);\\n      var endTime = new Date();\\n      postMessage({\\n        task: e.data.task,\\n        lexed: lexedList,\\n        parsed: parsed,\\n        time: endTime - startTime\\n      });\\n      break;\\n  }\\n}\\n\\nfunction stringRepeat(char, times) {\\n  var s = '';\\n  for (var i = 0; i < times; i++) {\\n    s += char;\\n  }\\n  return s;\\n}\\n\\nfunction jsonString(input, level) {\\n  level = level || 0;\\n  if (Array.isArray(input)) {\\n    if (input.length === 0) {\\n      return '[]';\\n    }\\n    var items = [],\\n        i;\\n    if (!Array.isArray(input[0]) && typeof input[0] === 'object' && input[0] !== null) {\\n      for (i = 0; i < input.length; i++) {\\n        items.push(stringRepeat(' ', 2 * level) + jsonString(input[i], level + 1));\\n      }\\n      return '[\\\\n' + items.join('\\\\n') + '\\\\n]';\\n    }\\n    for (i = 0; i < input.length; i++) {\\n      items.push(jsonString(input[i], level));\\n    }\\n    return '[' + items.join(', ') + ']';\\n  } else if (typeof input === 'object' && input !== null) {\\n    var props = [];\\n    for (var prop in input) {\\n      props.push(prop + ':' + jsonString(input[prop], level));\\n    }\\n    return '{' + props.join(', ') + '}';\\n  } else {\\n    return JSON.stringify(input);\\n  }\\n}\\n\\nfunction loadVersion(ver) {\\n  var promise;\\n  if (versionCache[ver]) {\\n    promise = Promise.resolve(versionCache[ver]);\\n  } else {\\n    promise = fetch(ver)\\n      .then(function(res) { return res.text(); })\\n      .then(function(text) {\\n        versionCache[ver] = text;\\n        return text;\\n      });\\n  }\\n  return promise.then(function(text) {\\n    try {\\n      // eslint-disable-next-line no-new-func\\n      Function(text)();\\n    } catch (err) {\\n      throw new Error('Cannot load that version of marked');\\n    }\\n    currentVersion = ver;\\n  });\\n}\\n\\n[end of worker.js]\\n[start of USING_ADVANCED.md]\\n## The `marked` function\\n\\n```js\\nmarked(markdownString [,options] [,callback])\\n```\\n\\n|Argument              |Type         |Notes                                                                                                |\\n|:---------------------|:------------|:----------------------------------------------------------------------------------------------------|\\n|markdownString        |`string`     |String of markdown source to be compiled.                                                            |\\n|<a href=\\\"#options\\\">options</a>|`object`|Hash of options. Can also use `marked.setOptions`.                                                |\\n|callback              |`function`   |Called when `markdownString` has been parsed. Can be used as second argument if no `options` present.|\\n\\n### Alternative using reference\\n\\n```js\\n// Create reference instance\\nconst marked = require('marked');\\n\\n// Set options\\n// `highlight` example uses `highlight.js`\\nmarked.setOptions({\\n  renderer: new marked.Renderer(),\\n  highlight: function(code, language) {\\n    const hljs = require('highlight.js');\\n    const validLanguage = hljs.getLanguage(language) ? language : 'plaintext';\\n    return hljs.highlight(validLanguage, code).value;\\n  },\\n  pedantic: false,\\n  gfm: true,\\n  breaks: false,\\n  sanitize: false,\\n  smartLists: true,\\n  smartypants: false,\\n  xhtml: false\\n});\\n\\n// Compile\\nconsole.log(marked(markdownString));\\n```\\n\\n<h2 id=\\\"options\\\">Options</h2>\\n\\n|Member      |Type      |Default  |Since    |Notes         |\\n|:-----------|:---------|:--------|:--------|:-------------|\\n|baseUrl     |`string`  |`null`   |0.3.9    |A prefix url for any relative link. |\\n|breaks      |`boolean` |`false`  |v0.2.7   |If true, add `<br>` on a single line break (copies GitHub behavior on comments, but not on rendered markdown files). Requires `gfm` be `true`.|\\n|gfm         |`boolean` |`true`   |v0.2.1   |If true, use approved [GitHub Flavored Markdown (GFM) specification](https://github.github.com/gfm/).|\\n|headerIds   |`boolean` |`true`   |v0.4.0   |If true, include an `id` attribute when emitting headings (h1, h2, h3, etc).|\\n|headerPrefix|`string`  |`''`     |v0.3.0   |A string to prefix the `id` attribute when emitting headings (h1, h2, h3, etc).|\\n|highlight   |`function`|`null`   |v0.3.0   |A function to highlight code blocks, see <a href=\\\"#highlight\\\">Asynchronous highlighting</a>.|\\n|langPrefix  |`string`  |`'language-'`|v0.3.0|A string to prefix the className in a `<code>` block. Useful for syntax highlighting.|\\n|mangle      |`boolean` |`true`   |v0.3.4   |If true, autolinked email address is escaped with HTML character references.|\\n|pedantic    |`boolean` |`false`  |v0.2.1   |If true, conform to the original `markdown.pl` as much as possible. Don't fix original markdown bugs or behavior. Turns off and overrides `gfm`.|\\n|renderer    |`object`  |`new Renderer()`|v0.3.0|An object containing functions to render tokens to HTML. See [extensibility](/#/USING_PRO.md) for more details.|\\n|sanitize    |`boolean` |`false`  |v0.2.1   |If true, sanitize the HTML passed into `markdownString` with the `sanitizer` function.<br>**Warning**: This feature is deprecated and it should NOT be used as it cannot be considered secure.<br>Instead use a sanitize library, like [DOMPurify](https://github.com/cure53/DOMPurify) (recommended), [sanitize-html](https://github.com/apostrophecms/sanitize-html) or [insane](https://github.com/bevacqua/insane) on the output HTML! |\\n|sanitizer   |`function`|`null`   |v0.3.4   |A function to sanitize the HTML passed into `markdownString`.|\\n|silent      |`boolean` |`false`  |v0.2.7   |If true, the parser does not throw any exception.|\\n|smartLists  |`boolean` |`false`  |v0.2.8   |If true, use smarter list behavior than those found in `markdown.pl`.|\\n|smartypants |`boolean` |`false`  |v0.2.9   |If true, use \\\"smart\\\" typographic punctuation for things like quotes and dashes.|\\n|xhtml       |`boolean` |`false`  |v0.3.2   |If true, emit self-closing HTML tags for void elements (&lt;br/&gt;, &lt;img/&gt;, etc.) with a \\\"/\\\" as required by XHTML.|\\n\\n<h2 id=\\\"highlight\\\">Asynchronous highlighting</h2>\\n\\nUnlike `highlight.js` the `pygmentize.js` library uses asynchronous highlighting. This example demonstrates that marked is agnostic when it comes to the highlighter you use.\\n\\n```js\\nmarked.setOptions({\\n  highlight: function(code, lang, callback) {\\n    require('pygmentize-bundled') ({ lang: lang, format: 'html' }, code, function (err, result) {\\n      callback(err, result.toString());\\n    });\\n  }\\n});\\n\\nconsole.log(marked(markdownString));\\n```\\n\\nIn both examples, `code` is a `string` representing the section of code to pass to the highlighter. In this example, `lang` is a `string` informing the highlighter what programming language to use for the `code` and `callback` is the `function` the asynchronous highlighter will call once complete.\\n\\n<h2 id=\\\"workers\\\">Workers</h2>\\n\\nTo prevent ReDoS attacks you can run marked on a worker and terminate it when parsing takes longer than usual.\\n\\nMarked can be run in a [worker thread](https://nodejs.org/api/worker_threads.html) on a node server, or a [web worker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) in a browser.\\n\\n### Node Worker Thread\\n\\n```js\\n// markedWorker.js\\n\\nconst marked = require('marked');\\nconst { parentPort } = require('worker_threads');\\n\\nparentPort.on('message', (markdownString) => {\\n  parentPort.postMessage(marked(markdownString));\\n});\\n```\\n\\n```js\\n// index.js\\n\\nconst { Worker } = require('worker_threads');\\nconst markedWorker = new Worker('./markedWorker.js');\\n\\nconst markedTimeout = setTimeout(() => {\\n  markedWorker.terminate();\\n  throw new Error('Marked took too long!');\\n}, timeoutLimit);\\n\\nmarkedWorker.on('message', (html) => {\\n  clearTimeout(markedTimeout);\\n  console.log(html);\\n  markedWorker.terminate();\\n});\\n\\nmarkedWorker.postMessage(markdownString);\\n```\\n\\n### Web Worker\\n\\n> **NOTE**: Web Workers send the payload from `postMessage` in an object with the payload in a `.data` property\\n\\n```js\\n// markedWorker.js\\n\\nimportScripts('path/to/marked.min.js');\\n\\nonmessage = (e) => {\\n  const markdownString = e.data\\n  postMessage(marked(markdownString));\\n};\\n```\\n\\n```js\\n// script.js\\n\\nconst markedWorker = new Worker('./markedWorker.js');\\n\\nconst markedTimeout = setTimeout(() => {\\n  markedWorker.terminate();\\n  throw new Error('Marked took too long!');\\n}, timeoutLimit);\\n\\nmarkedWorker.onmessage = (e) => {\\n  clearTimeout(markedTimeout);\\n  const html = e.data;\\n  console.log(html);\\n  markedWorker.terminate();\\n};\\n\\nmarkedWorker.postMessage(markdownString);\\n```\\n\\n[end of USING_ADVANCED.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "marked.min.js",
        "marked.js",
        "update-specs.js",
        "worker.js",
        "USING_ADVANCED.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "01c95dc1-3bbc-43bc-ac4f-6dc1e8603cc9",
        "score": 0.01639344262295082,
        "payload": {
          "text": "!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=e||self).marked=t()}(this,function(){\"use strict\";function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return o[e]}var e,t=(function(t){function e(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:\"\",highlight:null,langPrefix:\"language-\",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,xhtml:!1}}t.exports={defaults:e(),getDefaults:e,changeDefaults:function(e){t.exports.defaults=e}}}(e={exports:{}}),e.exports),r=(t.defaults,t.getDefaults,t.changeDefaults,/[&<>\"']/),i=/[&<>\"']/g,a=/[<>\"']|&(?!#?\\w+;)/,l=/[<>\"']|&(?!#?\\w+;)/g,o={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\"};var c=/&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/gi;function h(e){return e.replace(c,function(e,t){return\"colon\"===(t=t.toLowerCase())?\":\":\"#\"===t.charAt(0)?\"x\"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):\"\"})}var u=/(^|[^\\[])\\^/g;var p=/[^\\w:]/g,g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;var f={},d=/^[^:]+:\\/*[^/]*$/,k=/^([^:]+:)[\\s\\S]*$/,b=/^([^:]+:\\/*[^/]*)[\\s\\S]*$/;function m(e,t){f[\" \"+e]||(d.test(e)?f[\" \"+e]=e+\"/\":f[\" \"+e]=x(e,\"/\",!0));var n=-1===(e=f[\" \"+e]).indexOf(\":\");return\"//\"===t.substring(0,2)?n?t:e.replace(k,\"$1\")+t:\"/\"===t.charAt(0)?n?t:e.replace(b,\"$1\")+t:e+t}function x(e,t,n){var r=e.length;if(0===r)return\"\";for(var i=0;i<r;){var s=e.charAt(r-i-1);if(s!==t||n){if(s===t||!n)break;i++}else i++}return e.substr(0,r-i)}var w=function(e,t){if(t){if(r.test(e))return e.replace(i,n)}else if(a.test(e))return e.replace(l,n);return e},v=h,_=function(n,e){n=n.source||n,e=e||\"\";var r={replace:function(e,t){return t=(t=t.source||t).replace(u,\"$1\"),n=n.replace(e,t),r},getRegex:function(){return new RegExp(n,e)}};return r},y=function(e,t,n){if(e){var r;try{r=decodeURIComponent(h(n)).replace(p,\"\").toLowerCase()}catch(e){return null}if(0===r.indexOf(\"javascript:\")||0===r.indexOf(\"vbscript:\")||0===r.indexOf(\"data:\"))return null}t&&!g.test(n)&&(n=m(t,n));try{n=encodeURI(n).replace(/%25/g,\"%\")}catch(e){return null}return n},z={exec:function(){}},$=function(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},S=function(e,t){var n=e.replace(/\\|/g,function(e,t,n){for(var r=!1,i=t;0<=--i&&\"\\\\\"===n[i];)r=!r;return r?\"|\":\" |\"}).split(/ \\|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push(\"\");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\\\\|/g,\"|\");return n},A=x,R=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,r=0,i=0;i<n;i++)if(\"\\\\\"===e[i])i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&--r<0)return i;return-1},Z=function(e){e&&e.sanitize&&!e.silent&&console.warn(\"marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options\")},q=t.defaults,T=A,I=S,C=w,O=R;function D(e,t,n){var r=t.href,i=t.title?C(t.title):null;return\"!\"!==e[0].charAt(0)?{type:\"link\",raw:n,href:r,title:i,text:e[1]}:{type:\"image\",raw:n,text:C(e[1]),href:r,title:i}}var E=function(){function e(e){this.options=e||q}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return 1<t[0].length?{type:\"space\",raw:t[0]}:{raw:\"\\n\"}},t.code=function(e,t){var n=this.rules.block.code.exec(e);if(n){var r=t[t.length-1];if(r&&\"paragraph\"===r.type)return t.pop(),r.text+=\"\\n\"+n[0].trimRight(),r.raw+=\"\\n\"+n[0],r;var i=n[0].replace(/^ {4}/gm,\"\");return{type:\"code\",raw:n[0],codeBlockStyle:\"indented\",text:this.options.pedantic?i:T(i,\"\\n\")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t)return{type:\"code\",raw:t[0],lang:t[2]?t[2].trim():t[2],text:t[3]||\"\"}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t)return{type:\"heading\",raw:t[0],depth:t[1].length,text:t[2]}},t.nptable=function(e){var t=this.rules.block.nptable.exec(e);if(t){var n={type:\"table\",header:I(t[1].replace(/^ *| *\\| *$/g,\"\")),align:t[2].replace(/^ *|\\| *$/g,\"\").split(/ *\\| */),cells:t[3]?t[3].replace(/\\n$/,\"\").split(\"\\n\"):[],raw:t[0]};if(n.header.length===n.align.length){var r,i=n.align.length;for(r=0;r<i;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]=\"right\":/^ *:-+: *$/.test(n.align[r])?n.align[r]=\"center\":/^ *:-+ *$/.test(n.align[r])?n.align[r]=\"left\":n.align[r]=null;for(i=n.cells.length,r=0;r<i;r++)n.cells[r]=I(n.cells[r],n.header.length);return n}}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:\"hr\",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *> ?/gm,\"\");return{type:\"blockquote\",raw:t[0],text:n}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){for(var n,r,i,s,a,l,o,c=t[0],h=t[2],u=1<h.length,p={type:\"list\",raw:c,ordered:u,start:u?+h:\"\",loose:!1,items:[]},g=t[0].match(this.rules.block.item),f=!1,d=g.length,k=0;k<d;k++)r=(c=n=g[k]).length,~(n=n.replace(/^ *([*+-]|\\d+\\.) */,\"\")).indexOf(\"\\n \")&&(r-=n.length,n=this.options.pedantic?n.replace(/^ {1,4}/gm,\"\"):n.replace(new RegExp(\"^ {1,\"+r+\"}\",\"gm\"),\"\")),k!==d-1&&(i=this.rules.block.bullet.exec(g[k+1])[0],(1<h.length?1===i.length:1<i.length||this.options.smartLists&&i!==h)&&(s=g.slice(k+1).join(\"\\n\"),p.raw=p.raw.substring(0,p.raw.length-s.length),k=d-1)),a=f||/\\n\\n(?!\\s*$)/.test(n),k!==d-1&&(f=\"\\n\"===n.charAt(n.length-1),a=a||f),a&&(p.loose=!0),o=void 0,(l=/^\\[[ xX]\\] /.test(n))&&(o=\" \"!==n[1],n=n.replace(/^\\[[ xX]\\] +/,\"\")),p.items.push({raw:c,task:l,checked:o,loose:a,text:n});return p}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?\"paragraph\":\"html\",raw:t[0],pre:!this.options.sanitizer&&(\"pre\"===t[1]||\"script\"===t[1]||\"style\"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):C(t[0]):t[0]}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{tag:t[1].toLowerCase().replace(/\\s+/g,\" \"),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:\"table\",header:I(t[1].replace(/^ *| *\\| *$/g,\"\")),align:t[2].replace(/^ *|\\| *$/g,\"\").split(/ *\\| */),cells:t[3]?t[3].replace(/\\n$/,\"\").split(\"\\n\"):[]};if(n.header.length===n.align.length){n.raw=t[0];var r,i=n.align.length;for(r=0;r<i;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]=\"right\":/^ *:-+: *$/.test(n.align[r])?n.align[r]=\"center\":/^ *:-+ *$/.test(n.align[r])?n.align[r]=\"left\":n.align[r]=null;for(i=n.cells.length,r=0;r<i;r++)n.cells[r]=I(n.cells[r].replace(/^ *\\| *| *\\| *$/g,\"\"),n.header.length);return n}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:\"heading\",raw:t[0],depth:\"=\"===t[2].charAt(0)?1:2,text:t[1]}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:\"paragraph\",raw:t[0],text:\"\\n\"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}},t.text=function(e){var t=this.rules.block.text.exec(e);if(t)return{type:\"text\",raw:t[0],text:t[0]}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:\"escape\",raw:t[0],text:C(t[1])}},t.tag=function(e,t,n){var r=this.rules.inline.tag.exec(e);if(r)return!t&&/^<a /i.test(r[0])?t=!0:t&&/^<\\/a>/i.test(r[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\\s|>)/i.test(r[0])?n=!0:n&&/^<\\/(pre|code|kbd|script)(\\s|>)/i.test(r[0])&&(n=!1),{type:this.options.sanitize?\"text\":\"html\",raw:r[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):C(r[0]):r[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n=O(t[2],\"()\");if(-1<n){var r=(0===t[0].indexOf(\"!\")?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,r).trim(),t[3]=\"\"}var i=t[2],s=\"\";if(this.options.pedantic){var a=/^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(i);s=a?(i=a[1],a[3]):\"\"}else s=t[3]?t[3].slice(1,-1):\"\";return D(t,{href:(i=i.trim().replace(/^<([\\s\\S]*)>$/,\"$1\"))?i.replace(this.rules.inline._escapes,\"$1\"):i,title:s?s.replace(this.rules.inline._escapes,\"$1\"):s},t[0])}},t.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var r=(n[2]||n[1]).replace(/\\s+/g,\" \");if((r=t[r.toLowerCase()])&&r.href)return D(n,r,n[0]);var i=n[0].charAt(0);return{type:\"text\",raw:i,text:i}}},t.strong=function(e){var t=this.rules.inline.strong.exec(e);if(t)return{type:\"strong\",raw:t[0],text:t[4]||t[3]||t[2]||t[1]}},t.em=function(e){var t=this.rules.inline.em.exec(e);if(t)return{type:\"em\",raw:t[0],text:t[6]||t[5]||t[4]||t[3]||t[2]||t[1]}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t)return{type:\"codespan\",raw:t[0],text:C(t[2].trim(),!0)}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:\"br\",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:\"del\",raw:t[0],text:t[1]}},t.autolink=function(e,t){var n,r,i=this.rules.inline.autolink.exec(e);if(i)return r=\"@\"===i[2]?\"mailto:\"+(n=C(this.options.mangle?t(i[1]):i[1])):n=C(i[1]),{type:\"link\",raw:i[0],text:n,href:r,tokens:[{type:\"text\",raw:n,text:n}]}},t.url=function(e,t){var n;if(n=this.rules.inline.url.exec(e)){var r,i;if(\"@\"===n[2])i=\"mailto:\"+(r=C(this.options.mangle?t(n[0]):n[0]));else{for(var s;s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0],s!==n[0];);r=C(n[0]),i=\"www.\"===n[1]?\"http://\"+r:r}return{type:\"link\",raw:n[0],text:r,href:i,tokens:[{type:\"text\",raw:r,text:r}]}}},t.inlineText=function(e,t,n){var r,i=this.rules.inline.text.exec(e);if(i)return r=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):C(i[0]):i[0]:C(this.options.smartypants?n(i[0]):i[0]),{type:\"text\",raw:i[0],text:r}},e}(),j=z,L=_,P=$,U={newline:/^\\n+/,code:/^( {4}[^\\n]+\\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\\n]*\\n)|~{3,})([^\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?:\\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\\n]*?)(?: +#+)? *(?:\\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,list:/^( {0,3})(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,html:\"^ {0,3}(?:<(script|pre|style)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)|comment[^\\\\n]*(\\\\n+|$)|<\\\\?[\\\\s\\\\S]*?\\\\?>\\\\n*|<![A-Z][\\\\s\\\\S]*?>\\\\n*|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\\\\n*|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:\\\\n{2,}|$)|<(?!script|pre|style)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)|</(?!script|pre|style)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$))\",def:/^ {0,3}\\[(label)\\]: *\\n? *<?([^\\s>]+)>?(?:(?: +\\n? *| *\\n *)(title))? *(?:\\n+|$)/,nptable:j,table:j,lheading:/^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,_paragraph:/^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\\n]+)*)/,text:/^[^\\n]+/,_label:/(?!\\s*\\])(?:\\\\[\\[\\]]|[^\\[\\]])+/,_title:/(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/};U.def=L(U.def).replace(\"label\",U._label).replace(\"title\",U._title).getRegex(),U.bullet=/(?:[*+-]|\\d{1,9}\\.)/,U.item=/^( *)(bull) ?[^\\n]*(?:\\n(?!\\1bull ?)[^\\n]*)*/,U.item=L(U.item,\"gm\").replace(/bull/g,U.bullet).getRegex(),U.list=L(U.list).replace(/bull/g,U.bullet).replace(\"hr\",\"\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))\").replace(\"def\",\"\\\\n+(?=\"+U.def.source+\")\").getRegex(),U._tag=\"address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul\",U._comment=/<!--(?!-?>)[\\s\\S]*?-->/,U.html=L(U.html,\"i\").replace(\"comment\",U._comment).replace(\"tag\",U._tag).replace(\"attribute\",/ +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/).getRegex(),U.paragraph=L(U._paragraph).replace(\"hr\",U.hr).replace(\"heading\",\" {0,3}#{1,6} \").replace(\"|lheading\",\"\").replace(\"blockquote\",\" {0,3}>\").replace(\"fences\",\" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\").replace(\"list\",\" {0,3}(?:[*+-]|1[.)]) \").replace(\"html\",\"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|!--)\").replace(\"tag\",U._tag).getRegex(),U.blockquote=L(U.blockquote).replace(\"paragraph\",U.paragraph).getRegex(),U.normal=P({},U),U.gfm=P({},U.normal,{nptable:\"^ *([^|\\\\n ].*\\\\|.*)\\\\n *([-:]+ *\\\\|[-| :]*)(?:\\\\n((?:(?!\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)\",table:\"^ *\\\\|(.+)\\\\n *\\\\|?( *[-:]+[-| :]*)(?:\\\\n *((?:(?!\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)\"}),U.gfm.nptable=L(U.gfm.nptable).replace(\"hr\",U.hr).replace(\"heading\",\" {0,3}#{1,6} \").replace(\"blockquote\",\" {0,3}>\").replace(\"code\",\" {4}[^\\\\n]\").replace(\"fences\",\" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\").replace(\"list\",\" {0,3}(?:[*+-]|1[.)]) \").replace(\"html\",\"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|!--)\").replace(\"tag\",U._tag).getRegex(),U.gfm.table=L(U.gfm.table).replace(\"hr\",U.hr).replace(\"heading\",\" {0,3}#{1,6} \").replace(\"blockquote\",\" {0,3}>\").replace(\"code\",\" {4}[^\\\\n]\").replace(\"fences\",\" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\").replace(\"list\",\" {0,3}(?:[*+-]|1[.)]) \").replace(\"html\",\"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|!--)\").replace(\"tag\",U._tag).getRegex(),U.pedantic=P({},U.normal,{html:L(\"^ *(?:comment *(?:\\\\n|\\\\s*$)|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)|<tag(?:\\\"[^\\\"]*\\\"|'[^']*'|\\\\s[^'\\\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))\").replace(\"comment\",U._comment).replace(/tag/g,\"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b\").getRegex(),def:/^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,heading:/^ *(#{1,6}) *([^\\n]+?) *(?:#+ *)?(?:\\n+|$)/,fences:j,paragraph:L(U.normal._paragraph).replace(\"hr\",U.hr).replace(\"heading\",\" *#{1,6} *[^\\n]\").replace(\"lheading\",U.lheading).replace(\"blockquote\",\" {0,3}>\").replace(\"|fences\",\"\").replace(\"|list\",\"\").replace(\"|html\",\"\").getRegex()});var B={escape:/^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,autolink:/^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,url:j,tag:\"^comment|^</[a-zA-Z][\\\\w:-]*\\\\s*>|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>|^<\\\\?[\\\\s\\\\S]*?\\\\?>|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\",link:/^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,reflink:/^!?\\[(label)\\]\\[(?!\\s*\\])((?:\\\\[\\[\\]]?|[^\\[\\]\\\\])+)\\]/,nolink:/^!?\\[(?!\\s*\\])((?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]|[^\\[\\]])*)\\](?:\\[\\])?/,strong:/^__([^\\s_])__(?!_)|^\\*\\*([^\\s*])\\*\\*(?!\\*)|^__([^\\s][\\s\\S]*?[^\\s])__(?!_)|^\\*\\*([^\\s][\\s\\S]*?[^\\s])\\*\\*(?!\\*)/,em:/^_([^\\s_])_(?!_)|^_([^\\s_<][\\s\\S]*?[^\\s_])_(?!_|[^\\spunctuation])|^_([^\\s_<][\\s\\S]*?[^\\s])_(?!_|[^\\spunctuation])|^\\*([^\\s*<\\[])\\*(?!\\*)|^\\*([^\\s<\"][\\s\\S]*?[^\\s\\[\\*])\\*(?![\\]`punctuation])|^\\*([^\\s*\"<\\[][\\s\\S]*[^\\s])\\*(?!\\*)/,code:/^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,br:/^( {2,}|\\\\)\\n(?!\\s*$)/,del:j,text:/^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*]|\\b_|$)|[^ ](?= {2,}\\n))|(?= {2,}\\n))/,_punctuation:\"!\\\"#$%&'()*+\\\\-./:;<=>?@\\\\[^_{|}~\"};B.em=L(B.em).replace(/punctuation/g,B._punctuation).getRegex(),B._escapes=/\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g,B._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,B._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,B.autolink=L(B.autolink).replace(\"scheme\",B._scheme).replace(\"email\",B._email).getRegex(),B._attribute=/\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/,B.tag=L(B.tag).replace(\"comment\",U._comment).replace(\"attribute\",B._attribute).getRegex(),B._label=/(?:\\[[^\\[\\]]*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/,B._href=/<(?:\\\\[<>]?|[^\\s<>\\\\])*>|[^\\s\\x00-\\x1f]*/,B._title=/\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/,B.link=L(B.link).replace(\"label\",B._label).replace(\"href\",B._href).replace(\"title\",B._title).getRegex(),B.reflink=L(B.reflink).replace(\"label\",B._label).getRegex(),B.normal=P({},B),B.pedantic=P({},B.normal,{strong:/^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,em:/^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/,link:L(/^!?\\[(label)\\]\\((.*?)\\)/).replace(\"label\",B._label).getRegex(),reflink:L(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/).replace(\"label\",B._label).getRegex()}),B.gfm=P({},B.normal,{escape:L(B.escape).replace(\"])\",\"~|])\").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\\S)([\\s\\S]*?\\S)~+/,text:/^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*~]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))|(?= {2,}\\n|[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))/}),B.gfm.url=L(B.gfm.url,\"i\").replace(\"email\",B.gfm._extended_email).getRegex(),B.breaks=P({},B.gfm,{br:L(B.br).replace(\"{2,}\",\"*\").getRegex(),text:L(B.gfm.text).replace(\"\\\\b_\",\"\\\\b_| {2,}\\\\n\").replace(/\\{2,\\}/g,\"*\").getRegex()});var F={block:U,inline:B},N=t.defaults,X=F.block,G=F.inline;function M(e){return e.replace(/---/g,\"\u2014\").replace(/--/g,\"\u2013\").replace(/(^|[-\\u2014/(\\[{\"\\s])'/g,\"$1\u2018\").replace(/'/g,\"\u2019\").replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g,\"$1\u201c\").replace(/\"/g,\"\u201d\").replace(/\\.{3}/g,\"\u2026\")}function V(e){var t,n,r=\"\",i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),.5<Math.random()&&(n=\"x\"+n.toString(16)),r+=\"&#\"+n+\";\";return r}var H=function(){function n(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||N,this.options.tokenizer=this.options.tokenizer||new E,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var t={block:X.normal,inline:G.normal};this.options.pedantic?(t.block=X.pedantic,t.inline=G.pedantic):this.options.gfm&&(t.block=X.gfm,this.options.breaks?t.inline=G.breaks:t.inline=G.gfm),this.tokenizer.rules=t}n.lex=function(e,t){return new n(t).lex(e)};var e,t,r,i=n.prototype;return i.lex=function(e){return e=e.replace(/\\r\\n|\\r/g,\"\\n\").replace(/\\t/g,\"    \"),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},i.blockTokens=function(e,t,n){var r,i,s;for(void 0===t&&(t=[]),void 0===n&&(n=!0),e=e.replace(/^ +$/gm,\"\");e;)if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),r.type&&t.push(r);else if(r=this.tokenizer.code(e,t))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.nptable(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],n),t.push(r);else if(r=this.tokenizer.list(e)){for(e=e.substring(r.raw.length),s=r.items.length,i=0;i<s;i++)r.items[i].tokens=this.blockTokens(r.items[i].text,[],!1);t.push(r)}else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.def(e)))e=e.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.paragraph(e)))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.text(e))e=e.substring(r.raw.length),t.push(r);else if(e){var a=\"Infinite loop on byte: \"+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}return t},i.inline=function(e){var t,n,r,i,s,a,l=e.length;for(t=0;t<l;t++)switch((a=e[t]).type){case\"paragraph\":case\"text\":case\"heading\":a.tokens=[],this.inlineTokens(a.text,a.tokens);break;case\"table\":for(a.tokens={header:[],cells:[]},i=a.header.length,n=0;n<i;n++)a.tokens.header[n]=[],this.inlineTokens(a.header[n],a.tokens.header[n]);for(i=a.cells.length,n=0;n<i;n++)for(s=a.cells[n],a.tokens.cells[n]=[],r=0;r<s.length;r++)a.tokens.cells[n][r]=[],this.inlineTokens(s[r],a.tokens.cells[n][r]);break;case\"blockquote\":this.inline(a.tokens);break;case\"list\":for(i=a.items.length,n=0;n<i;n++)this.inline(a.items[n].tokens)}return e},i.inlineTokens=function(e,t,n,r){var i;for(void 0===t&&(t=[]),void 0===n&&(n=!1),void 0===r&&(r=!1);e;)if(i=this.tokenizer.escape(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.tag(e,n,r))e=e.substring(i.raw.length),n=i.inLink,r=i.inRawBlock,t.push(i);else if(i=this.tokenizer.link(e))e=e.substring(i.raw.length),\"link\"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,r)),t.push(i);else if(i=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(i.raw.length),\"link\"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,r)),t.push(i);else if(i=this.tokenizer.strong(e))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),t.push(i);else if(i=this.tokenizer.em(e))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),t.push(i);else if(i=this.tokenizer.codespan(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.br(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.del(e))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],n,r),t.push(i);else if(i=this.tokenizer.autolink(e,V))e=e.substring(i.raw.length),t.push(i);else if(n||!(i=this.tokenizer.url(e,V))){if(i=this.tokenizer.inlineText(e,r,M))e=e.substring(i.raw.length),t.push(i);else if(e){var s=\"Infinite loop on byte: \"+e.charCodeAt(0);if(this.options.silent){console.error(s);break}throw new Error(s)}}else e=e.substring(i.raw.length),t.push(i);return t},e=n,r=[{key:\"rules\",get:function(){return{block:X,inline:G}}}],(t=null)&&s(e.prototype,t),r&&s(e,r),n}(),J=t.defaults,K=y,Q=w,W=function(){function e(e){this.options=e||J}var t=e.prototype;return t.code=function(e,t,n){var r=(t||\"\").match(/\\S*/)[0];if(this.options.highlight){var i=this.options.highlight(e,r);null!=i&&i!==e&&(n=!0,e=i)}return r?'<pre><code class=\"'+this.options.langPrefix+Q(r,!0)+'\">'+(n?e:Q(e,!0))+\"</code></pre>\\n\":\"<pre><code>\"+(n?e:Q(e,!0))+\"</code></pre>\"},t.blockquote=function(e){return\"<blockquote>\\n\"+e+\"</blockquote>\\n\"},t.html=function(e){return e},t.heading=function(e,t,n,r){return this.options.headerIds?\"<h\"+t+' id=\"'+this.options.headerPrefix+r.slug(n)+'\">'+e+\"</h\"+t+\">\\n\":\"<h\"+t+\">\"+e+\"</h\"+t+\">\\n\"},t.hr=function(){return this.options.xhtml?\"<hr/>\\n\":\"<hr>\\n\"},t.list=function(e,t,n){var r=t?\"ol\":\"ul\";return\"<\"+r+(t&&1!==n?' start=\"'+n+'\"':\"\")+\">\\n\"+e+\"</\"+r+\">\\n\"},t.listitem=function(e){return\"<li>\"+e+\"</li>\\n\"},t.checkbox=function(e){return\"<input \"+(e?'checked=\"\" ':\"\")+'disabled=\"\" type=\"checkbox\"'+(this.options.xhtml?\" /\":\"\")+\"> \"},t.paragraph=function(e){return\"<p>\"+e+\"</p>\\n\"},t.table=function(e,t){return\"<table>\\n<thead>\\n\"+e+\"</thead>\\n\"+(t=t&&\"<tbody>\"+t+\"</tbody>\")+\"</table>\\n\"},t.tablerow=function(e){return\"<tr>\\n\"+e+\"</tr>\\n\"},t.tablecell=function(e,t){var n=t.header?\"th\":\"td\";return(t.align?\"<\"+n+' align=\"'+t.align+'\">':\"<\"+n+\">\")+e+\"</\"+n+\">\\n\"},t.strong=function(e){return\"<strong>\"+e+\"</strong>\"},t.em=function(e){return\"<em>\"+e+\"</em>\"},t.codespan=function(e){return\"<code>\"+e+\"</code>\"},t.br=function(){return this.options.xhtml?\"<br/>\":\"<br>\"},t.del=function(e){return\"<del>\"+e+\"</del>\"},t.link=function(e,t,n){if(null===(e=K(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href=\"'+Q(e)+'\"';return t&&(r+=' title=\"'+t+'\"'),r+=\">\"+n+\"</a>\"},t.image=function(e,t,n){if(null===(e=K(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src=\"'+e+'\" alt=\"'+n+'\"';return t&&(r+=' title=\"'+t+'\"'),r+=this.options.xhtml?\"/>\":\">\"},t.text=function(e){return e},e}(),Y=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,n){return\"\"+n},t.image=function(e,t,n){return\"\"+n},t.br=function(){return\"\"},e}(),ee=function(){function e(){this.seen={}}return e.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/<[!\\/a-z].*?>/gi,\"\").replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g,\"\").replace(/\\s/g,\"-\");if(this.seen.hasOwnProperty(t))for(var n=t;this.seen[n]++,t=n+\"-\"+this.seen[n],this.seen.hasOwnProperty(t););return this.seen[t]=0,t},e}(),te=t.defaults,ne=v,re=function(){function n(e){this.options=e||te,this.options.renderer=this.options.renderer||new W,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Y,this.slugger=new ee}n.parse=function(e,t){return new n(t).parse(e)};var e=n.prototype;return e.parse=function(e,t){void 0===t&&(t=!0);var n,r,i,s,a,l,o,c,h,u,p,g,f,d,k,b,m,x,w=\"\",v=e.length;for(n=0;n<v;n++)switch((u=e[n]).type){case\"space\":continue;case\"hr\":w+=this.renderer.hr();continue;case\"heading\":w+=this.renderer.heading(this.parseInline(u.tokens),u.depth,ne(this.parseInline(u.tokens,this.textRenderer)),this.slugger);continue;case\"code\":w+=this.renderer.code(u.text,u.lang,u.escaped);continue;case\"table\":for(o=c=\"\",s=u.header.length,r=0;r<s;r++)o+=this.renderer.tablecell(this.parseInline(u.tokens.header[r]),{header:!0,align:u.align[r]});for(c+=this.renderer.tablerow(o),h=\"\",s=u.cells.length,r=0;r<s;r++){for(o=\"\",a=(l=u.tokens.cells[r]).length,i=0;i<a;i++)o+=this.renderer.tablecell(this.parseInline(l[i]),{header:!1,align:u.align[i]});h+=this.renderer.tablerow(o)}w+=this.renderer.table(c,h);continue;case\"blockquote\":h=this.parse(u.tokens),w+=this.renderer.blockquote(h);continue;case\"list\":for(p=u.ordered,g=u.start,f=u.loose,s=u.items.length,h=\"\",r=0;r<s;r++)b=(k=u.items[r]).checked,m=k.task,d=\"\",k.task&&(x=this.renderer.checkbox(b),f?\"text\"===k.tokens[0].type?(k.tokens[0].text=x+\" \"+k.tokens[0].text,k.tokens[0].tokens&&0<k.tokens[0].tokens.length&&\"text\"===k.tokens[0].tokens[0].type&&(k.tokens[0].tokens[0].text=x+\" \"+k.tokens[0].tokens[0].text)):k.tokens.unshift({type:\"text\",text:x}):d+=x),d+=this.parse(k.tokens,f),h+=this.renderer.listitem(d,m,b);w+=this.renderer.list(h,p,g);continue;case\"html\":w+=this.renderer.html(u.text);continue;case\"paragraph\":w+=this.renderer.paragraph(this.parseInline(u.tokens));continue;case\"text\":for(h=u.tokens?this.parseInline(u.tokens):u.text;n+1<v&&\"text\"===e[n+1].type;)h+=\"\\n\"+((u=e[++n]).tokens?this.parseInline(u.tokens):u.text);w+=t?this.renderer.paragraph(h):h;continue;default:var _='Token with \"'+u.type+'\" type was not found.';if(this.options.silent)return void console.error(_);throw new Error(_)}return w},e.parseInline=function(e,t){t=t||this.renderer;var n,r,i=\"\",s=e.length;for(n=0;n<s;n++)switch((r=e[n]).type){case\"escape\":i+=t.text(r.text);break;case\"html\":i+=t.html(r.text);break;case\"link\":i+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case\"image\":i+=t.image(r.href,r.title,r.text);break;case\"strong\":i+=t.strong(this.parseInline(r.tokens,t));break;case\"em\":i+=t.em(this.parseInline(r.tokens,t));break;case\"codespan\":i+=t.codespan(r.text);break;case\"br\":i+=t.br();break;case\"del\":i+=t.del(this.parseInline(r.tokens,t));break;case\"text\":i+=t.text(r.text);break;default:var a='Token with \"'+r.type+'\" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}return i},n}(),ie=$,se=Z,ae=w,le=t.getDefaults,oe=t.changeDefaults,ce=t.defaults;function he(t,a,l){if(null==t)throw new Error(\"marked(): input parameter is undefined or null\");if(\"string\"!=typeof t)throw new Error(\"marked(): input parameter is of type \"+Object.prototype.toString.call(t)+\", string expected\");if(l||\"function\"==typeof a){var e=function(){l||(l=a,a=null),a=ie({},he.defaults,a||{}),se(a);var n,r,i=a.highlight,e=0;try{n=H.lex(t,a)}catch(e){return{v:l(e)}}r=n.length;function s(t){if(t)return a.highlight=i,l(t);var e;try{e=re.parse(n,a)}catch(e){t=e}return a.highlight=i,t?l(t):l(null,e)}if(!i||i.length<3)return{v:s()};if(delete a.highlight,!r)return{v:s()};for(;e<n.length;e++)!function(n){\"code\"!==n.type?--r||s():i(n.text,n.lang,function(e,t){return e?s(e):null==t||t===n.text?--r||s():(n.text=t,n.escaped=!0,void(--r||s()))})}(n[e]);return{v:void 0}}();if(\"object\"==typeof e)return e.v}try{return a=ie({},he.defaults,a||{}),se(a),re.parse(H.lex(t,a),a)}catch(e){if(e.message+=\"\\nPlease report this to https://github.com/markedjs/marked.\",(a||he.defaults).silent)return\"<p>An error occurred:</p><pre>\"+ae(e.message+\"\",!0)+\"</pre>\";throw e}}return he.options=he.setOptions=function(e){return ie(he.defaults,e),oe(he.defaults),he},he.getDefaults=le,he.defaults=ce,he.use=function(l){var n=ie({},l);l.renderer&&function(){function e(i){var s=a[i];a[i]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=l.renderer[i].apply(a,t);return!1===r&&(r=s.apply(a,t)),r}}var a=he.defaults.renderer||new W;for(var t in l.renderer)e(t);n.renderer=a}(),l.tokenizer&&function(){function e(i){var s=a[i];a[i]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=l.tokenizer[i].apply(a,t);return!1===r&&(r=s.apply(a,t)),r}}var a=he.defaults.tokenizer||new E;for(var t in l.tokenizer)e(t);n.tokenizer=a}(),he.setOptions(n)},he.Parser=re,he.parser=re.parse,he.Renderer=W,he.TextRenderer=Y,he.Lexer=H,he.lexer=H.lex,he.Tokenizer=E,he.Slugger=ee,he.parse=he});",
          "filepath": "data/repos/markedjs/marked-1.0/marked.min.js",
          "repo": "markedjs/marked",
          "version": "1.0",
          "chunk_index": 1
        }
      },
      {
        "id": "5d3ce0e5-9328-48fa-bf75-7302adf129e6",
        "score": 0.016129032258064516,
        "payload": {
          "text": "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.marked = factory());\n}(this, (function () { 'use strict';\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function createCommonjsModule(fn, module) {\n  \treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n  }\n\n  var defaults = createCommonjsModule(function (module) {\n    function getDefaults() {\n      return {\n        baseUrl: null,\n        breaks: false,\n        gfm: true,\n        headerIds: true,\n        headerPrefix: '',\n        highlight: null,\n        langPrefix: 'language-',\n        mangle: true,\n        pedantic: false,\n        renderer: null,\n        sanitize: false,\n        sanitizer: null,\n        silent: false,\n        smartLists: false,\n        smartypants: false,\n        tokenizer: null,\n        xhtml: false\n      };\n    }\n\n    function changeDefaults(newDefaults) {\n      module.exports.defaults = newDefaults;\n    }\n\n    module.exports = {\n      defaults: getDefaults(),\n      getDefaults: getDefaults,\n      changeDefaults: changeDefaults\n    };\n  });\n  var defaults_1 = defaults.defaults;\n  var defaults_2 = defaults.getDefaults;\n  var defaults_3 = defaults.changeDefaults;\n\n  /**\n   * Helpers\n   */\n  var escapeTest = /[&<>\"']/;\n  var escapeReplace = /[&<>\"']/g;\n  var escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\n  var escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n  var escapeReplacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\n    return escapeReplacements[ch];\n  };\n\n  function escape(html, encode) {\n    if (encode) {\n      if (escapeTest.test(html)) {\n        return html.replace(escapeReplace, getEscapeReplacement);\n      }\n    } else {\n      if (escapeTestNoEncode.test(html)) {\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n      }\n    }\n\n    return html;\n  }\n\n  var unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\n  function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(unescapeTest, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n\n      return '';\n    });\n  }\n\n  var caret = /(^|[^\\[])\\^/g;\n\n  function edit(regex, opt) {\n    regex = regex.source || regex;\n    opt = opt || '';\n    var obj = {\n      replace: function replace(name, val) {\n        val = val.source || val;\n        val = val.replace(caret, '$1');\n        regex = regex.replace(name, val);\n        return obj;\n      },\n      getRegex: function getRegex() {\n        return new RegExp(regex, opt);\n      }\n    };\n    return obj;\n  }\n\n  var nonWordAndColonTest = /[^\\w:]/g;\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n  function cleanUrl(sanitize, base, href) {\n    if (sanitize) {\n      var prot;\n\n      try {\n        prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, '').toLowerCase();\n      } catch (e) {\n        return null;\n      }\n\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return null;\n      }\n    }\n\n    if (base && !originIndependentUrl.test(href)) {\n      href = resolveUrl(base, href);\n    }\n\n    try {\n      href = encodeURI(href).replace(/%25/g, '%');\n    } catch (e) {\n      return null;\n    }\n\n    return href;\n  }\n\n  var baseUrls = {};\n  var justDomain = /^[^:]+:\\/*[^/]*$/;\n  var protocol = /^([^:]+:)[\\s\\S]*$/;\n  var domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\n  function resolveUrl(base, href) {\n    if (!baseUrls[' ' + base]) {\n      // we can ignore everything in base after the last slash of its path component,\n      // but we might need to add _that_\n      // https://tools.ietf.org/html/rfc3986#section-3\n      if (justDomain.test(base)) {\n        baseUrls[' ' + base] = base + '/';\n      } else {\n        baseUrls[' ' + base] = rtrim(base, '/', true);\n      }\n    }\n\n    base = baseUrls[' ' + base];\n    var relativeBase = base.indexOf(':') === -1;\n\n    if (href.substring(0, 2) === '//') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(protocol, '$1') + href;\n    } else if (href.charAt(0) === '/') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(domain, '$1') + href;\n    } else {\n      return base + href;\n    }\n  }\n\n  var noopTest = {\n    exec: function noopTest() {}\n  };\n\n  function merge(obj) {\n    var i = 1,\n        target,\n        key;\n\n    for (; i < arguments.length; i++) {\n      target = arguments[i];\n\n      for (key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n          obj[key] = target[key];\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  function splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n      var escaped = false,\n          curr = offset;\n\n      while (--curr >= 0 && str[curr] === '\\\\') {\n        escaped = !escaped;\n      }\n\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n        cells = row.split(/ \\|/);\n    var i = 0;\n\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) {\n        cells.push('');\n      }\n    }\n\n    for (; i < cells.length; i++) {\n      // leading or trailing whitespace is ignored per the gfm spec\n      cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n\n    return cells;\n  } // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n  // /c*$/ is vulnerable to REDOS.\n  // invert: Remove suffix of non-c chars instead. Default falsey.\n\n\n  function rtrim(str, c, invert) {\n    var l = str.length;\n\n    if (l === 0) {\n      return '';\n    } // Length of suffix matching the invert condition.\n\n\n    var suffLen = 0; // Step left until we fail to match the invert condition.\n\n    while (suffLen < l) {\n      var currChar = str.charAt(l - suffLen - 1);\n\n      if (currChar === c && !invert) {\n        suffLen++;\n      } else if (currChar !== c && invert) {\n        suffLen++;\n      } else {\n        break;\n      }\n    }\n\n    return str.substr(0, l - suffLen);\n  }\n\n  function findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n      return -1;\n    }\n\n    var l = str.length;\n    var level = 0,\n        i = 0;\n\n    for (; i < l; i++) {\n      if (str[i] === '\\\\') {\n        i++;\n      } else if (str[i] === b[0]) {\n        level++;\n      } else if (str[i] === b[1]) {\n        level--;\n\n        if (level < 0) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  function checkSanitizeDeprecation(opt) {\n    if (opt && opt.sanitize && !opt.silent) {\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n    }\n  }\n\n  var helpers = {\n    escape: escape,\n    unescape: unescape,\n    edit: edit,\n    cleanUrl: cleanUrl,\n    resolveUrl: resolveUrl,\n    noopTest: noopTest,\n    merge: merge,\n    splitCells: splitCells,\n    rtrim: rtrim,\n    findClosingBracket: findClosingBracket,\n    checkSanitizeDeprecation: checkSanitizeDeprecation\n  };\n\n  var defaults$1 = defaults.defaults;\n  var rtrim$1 = helpers.rtrim,\n      splitCells$1 = helpers.splitCells,\n      _escape = helpers.escape,\n      findClosingBracket$1 = helpers.findClosingBracket;\n\n  function outputLink(cap, link, raw) {\n    var href = link.href;\n    var title = link.title ? _escape(link.title) : null;\n\n    if (cap[0].charAt(0) !== '!') {\n      return {\n        type: 'link',\n        raw: raw,\n        href: href,\n        title: title,\n        text: cap[1]\n      };\n    } else {\n      return {\n        type: 'image',\n        raw: raw,\n        text: _escape(cap[1]),\n        href: href,\n        title: title\n      };\n    }\n  }\n  /**\n   * Tokenizer\n   */\n\n\n  var Tokenizer_1 = /*#__PURE__*/function () {\n    function Tokenizer(options) {\n      this.options = options || defaults$1;\n    }\n\n    var _proto = Tokenizer.prototype;\n\n    _proto.space = function space(src) {\n      var cap = this.rules.block.newline.exec(src);\n\n      if (cap) {\n        if (cap[0].length > 1) {\n          return {\n            type: 'space',\n            raw: cap[0]\n          };\n        }\n\n        return {\n          raw: '\\n'\n        };\n      }\n    };\n\n    _proto.code = function code(src, tokens) {\n      var cap = this.rules.block.code.exec(src);\n\n      if (cap) {\n        var lastToken = tokens[tokens.length - 1]; // An indented code block cannot interrupt a paragraph.\n\n        if (lastToken && lastToken.type === 'paragraph') {\n          tokens.pop();\n          lastToken.text += '\\n' + cap[0].trimRight();\n          lastToken.raw += '\\n' + cap[0];\n          return lastToken;\n        } else {\n          var text = cap[0].replace(/^ {4}/gm, '');\n          return {\n            type: 'code',\n            raw: cap[0],\n            codeBlockStyle: 'indented',\n            text: !this.options.pedantic ? rtrim$1(text, '\\n') : text\n          };\n        }\n      }\n    };\n\n    _proto.fences = function fences(src) {\n      var cap = this.rules.block.fences.exec(src);\n\n      if (cap) {\n        return {\n          type: 'code',\n          raw: cap[0],\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: cap[3] || ''\n        };\n      }\n    };\n\n    _proto.heading = function heading(src) {\n      var cap = this.rules.block.heading.exec(src);\n\n      if (cap) {\n        return {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[1].length,\n          text: cap[2]\n        };\n      }\n    };\n\n    _proto.nptable = function nptable(src) {\n      var cap = this.rules.block.nptable.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : [],\n          raw: cap[0]\n        };\n\n        if (item.header.length === item.align.length) {\n          var l = item.align.length;\n          var i;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.cells.length;\n\n          for (i = 0; i < l; i++) {\n            item.cells[i] = splitCells$1(item.cells[i], item.header.length);\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.hr = function hr(src) {\n      var cap = this.rules.block.hr.exec(src);\n\n      if (cap) {\n        return {\n          type: 'hr',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.blockquote = function blockquote(src) {\n      var cap = this.rules.block.blockquote.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ *> ?/gm, '');\n        return {\n          type: 'blockquote',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    _proto.list = function list(src) {\n      var cap = this.rules.block.list.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var bull = cap[2];\n        var isordered = bull.length > 1;\n        var list = {\n          type: 'list',\n          raw: raw,\n          ordered: isordered,\n          start: isordered ? +bull : '',\n          loose: false,\n          items: []\n        }; // Get each top-level item.\n\n        var itemMatch = cap[0].match(this.rules.block.item);\n        var next = false,\n            item,\n            space,\n            b,\n            addBack,\n            loose,\n            istask,\n            ischecked;\n        var l = itemMatch.length;\n\n        for (var i = 0; i < l; i++) {\n          item = itemMatch[i];\n          raw = item; // Remove the list item's bullet\n          // so it is seen as the next token.\n\n          space = item.length;\n          item = item.replace(/^ *([*+-]|\\d+\\.) */, ''); // Outdent whatever the\n          // list item contains. Hacky.\n\n          if (~item.indexOf('\\n ')) {\n            space -= item.length;\n            item = !this.options.pedantic ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '') : item.replace(/^ {1,4}/gm, '');\n          } // Determine whether the next list item belongs here.\n          // Backpedal if it does not belong in this list.\n\n\n          if (i !== l - 1) {\n            b = this.rules.block.bullet.exec(itemMatch[i + 1])[0];\n\n            if (bull.length > 1 ? b.length === 1 : b.length > 1 || this.options.smartLists && b !== bull) {\n              addBack = itemMatch.slice(i + 1).join('\\n');\n              list.raw = list.raw.substring(0, list.raw.length - addBack.length);\n              i = l - 1;\n            }\n          } // Determine whether item is loose or not.\n          // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n          // for discount behavior.\n\n\n          loose = next || /\\n\\n(?!\\s*$)/.test(item);\n\n          if (i !== l - 1) {\n            next = item.charAt(item.length - 1) === '\\n';\n            if (!loose) loose = next;\n          }\n\n          if (loose) {\n            list.loose = true;\n          } // Check for task list items\n\n\n          istask = /^\\[[ xX]\\] /.test(item);\n          ischecked = undefined;\n\n          if (istask) {\n            ischecked = item[1] !== ' ';\n            item = item.replace(/^\\[[ xX]\\] +/, '');\n          }\n\n          list.items.push({\n            raw: raw,\n            task: istask,\n            checked: ischecked,\n            loose: loose,\n            text: item\n          });\n        }\n\n        return list;\n      }\n    };\n\n    _proto.html = function html(src) {\n      var cap = this.rules.block.html.exec(src);\n\n      if (cap) {\n        return {\n          type: this.options.sanitize ? 'paragraph' : 'html',\n          raw: cap[0],\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.def = function def(src) {\n      var cap = this.rules.block.def.exec(src);\n\n      if (cap) {\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        var tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n        return {\n          tag: tag,\n          raw: cap[0],\n          href: cap[2],\n          title: cap[3]\n        };\n      }\n    };\n\n    _proto.table = function table(src) {\n      var cap = this.rules.block.table.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          item.raw = cap[0];\n          var l = item.align.length;\n          var i;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.cells.length;\n\n          for (i = 0; i < l; i++) {\n            item.cells[i] = splitCells$1(item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''), item.header.length);\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.lheading = function lheading(src) {\n      var cap = this.rules.block.lheading.exec(src);\n\n      if (cap) {\n        return {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1]\n        };\n      }\n    };\n\n    _proto.paragraph = function paragraph(src) {\n      var cap = this.rules.block.paragraph.exec(src);\n\n      if (cap) {\n        return {\n          type: 'paragraph',\n          raw: cap[0],\n          text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1]\n        };\n      }\n    };\n\n    _proto.text = function text(src) {\n      var cap = this.rules.block.text.exec(src);\n\n      if (cap) {\n        return {\n          type: 'text',\n          raw: cap[0],\n          text: cap[0]\n        };\n      }\n    };\n\n    _proto.escape = function escape(src) {\n      var cap = this.rules.inline.escape.exec(src);\n\n      if (cap) {\n        return {\n          type: 'escape',\n          raw: cap[0],\n          text: _escape(cap[1])\n        };\n      }\n    };\n\n    _proto.tag = function tag(src, inLink, inRawBlock) {\n      var cap = this.rules.inline.tag.exec(src);\n\n      if (cap) {\n        if (!inLink && /^<a /i.test(cap[0])) {\n          inLink = true;\n        } else if (inLink && /^<\\/a>/i.test(cap[0])) {\n          inLink = false;\n        }\n\n        if (!inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          inRawBlock = true;\n        } else if (inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          inRawBlock = false;\n        }\n\n        return {\n          type: this.options.sanitize ? 'text' : 'html',\n          raw: cap[0],\n          inLink: inLink,\n          inRawBlock: inRawBlock,\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.link = function link(src) {\n      var cap = this.rules.inline.link.exec(src);\n\n      if (cap) {\n        var lastParenIndex = findClosingBracket$1(cap[2], '()');\n\n        if (lastParenIndex > -1) {\n          var start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          var linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n\n        var href = cap[2];\n        var title = '';\n\n        if (this.options.pedantic) {\n          var link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          } else {\n            title = '';\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n\n        href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n        var token = outputLink(cap, {\n          href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n          title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n        }, cap[0]);\n        return token;\n      }\n    };\n\n    _proto.reflink = function reflink(src, links) {\n      var cap;\n\n      if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {\n        var link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = links[link.toLowerCase()];\n\n        if (!link || !link.href) {\n          var text = cap[0].charAt(0);\n          return {\n            type: 'text',\n            raw: text,\n            text: text\n          };\n        }\n\n        var token = outputLink(cap, link, cap[0]);\n        return token;\n      }\n    };\n\n    _proto.strong = function strong(src) {\n      var cap = this.rules.inline.strong.exec(src);\n\n      if (cap) {\n        return {\n          type: 'strong',\n          raw: cap[0],\n          text: cap[4] || cap[3] || cap[2] || cap[1]\n        };\n      }\n    };\n\n    _proto.em = function em(src) {\n      var cap = this.rules.inline.em.exec(src);\n\n      if (cap) {\n        return {\n          type: 'em',\n          raw: cap[0],\n          text: cap[6] || cap[5] || cap[4] || cap[3] || cap[2] || cap[1]\n        };\n      }\n    };\n\n    _proto.codespan = function codespan(src) {\n      var cap = this.rules.inline.code.exec(src);\n\n      if (cap) {\n        return {\n          type: 'codespan',\n          raw: cap[0],\n          text: _escape(cap[2].trim(), true)\n        };\n      }\n    };\n\n    _proto.br = function br(src) {\n      var cap = this.rules.inline.br.exec(src);\n\n      if (cap) {\n        return {\n          type: 'br',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.del = function del(src) {\n      var cap = this.rules.inline.del.exec(src);\n\n      if (cap) {\n        return {\n          type: 'del',\n          raw: cap[0],\n          text: cap[1]\n        };\n      }\n    };\n\n    _proto.autolink = function autolink(src, mangle) {\n      var cap = this.rules.inline.autolink.exec(src);\n\n      if (cap) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = _escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\n          href = 'mailto:' + text;\n        } else {\n          text = _escape(cap[1]);\n          href = text;\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.url = function url(src, mangle) {\n      var cap;\n\n      if (cap = this.rules.inline.url.exec(src)) {\n        var text, href;\n\n        if (cap[2] === '@') {",
          "filepath": "data/repos/markedjs/marked-1.0/lib/marked.js",
          "repo": "markedjs/marked",
          "version": "1.0",
          "chunk_index": 0
        }
      },
      {
        "id": "63ab9b53-7476-4064-8f28-f42ddd0965b0",
        "score": 0.015873015873015872,
        "payload": {
          "text": "const fetch = require('node-fetch');\nconst cheerio = require('cheerio');\nconst marked = require('../');\nconst htmlDiffer = require('./helpers/html-differ.js');\nconst fs = require('fs');\nconst path = require('path');\n\nfunction removeFiles(dir) {\n  fs.readdirSync(dir).forEach(file => {\n    fs.unlinkSync(path.join(dir, file));\n  });\n}\n\nasync function updateCommonmark(dir, options) {\n  try {\n    const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\n    const pkg = await res.json();\n    const version = pkg.version.replace(/^(\\d+\\.\\d+).*$/, '$1');\n    const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\n    const specs = await res2.json();\n    specs.forEach(spec => {\n      const html = marked(spec.markdown, options);\n      if (!htmlDiffer.isEqual(html, spec.html)) {\n        spec.shouldFail = true;\n      }\n    });\n    fs.writeFileSync(path.resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n    console.log(`Saved CommonMark v${version} specs`);\n  } catch (ex) {\n    console.log(ex);\n  }\n}\n\nasync function updateGfm(dir) {\n  try {\n    const res = await fetch('https://github.github.com/gfm/');\n    const html = await res.text();\n    const $ = cheerio.load(html);\n    const version = $('.version').text().match(/\\d+\\.\\d+/)[0];\n    if (!version) {\n      throw new Error('No version found');\n    }\n    const specs = [];\n    $('.extension').each((i, ext) => {\n      const section = $('.definition', ext).text().trim().replace(/^\\d+\\.\\d+(.*?) \\(extension\\)[\\s\\S]*$/, '$1');\n      $('.example', ext).each((j, exa) => {\n        const example = +$(exa).attr('id').replace(/\\D/g, '');\n        const markdown = $('.language-markdown', exa).text().trim();\n        const html = $('.language-html', exa).text().trim();\n        specs.push({\n          section: `[extension] ${section}`,\n          html,\n          markdown,\n          example\n        });\n      });\n    });\n\n    specs.forEach(spec => {\n      const html = marked(spec.markdown, { gfm: true, pedantic: false });\n      if (!htmlDiffer.isEqual(html, spec.html)) {\n        spec.shouldFail = true;\n      }\n    });\n    fs.writeFileSync(path.resolve(dir, `./gfm.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n    console.log(`Saved GFM v${version} specs.`);\n  } catch (ex) {\n    console.log(ex);\n  }\n}\n\nconst commonmarkDir = path.resolve(__dirname, './specs/commonmark');\nconst gfmDir = path.resolve(__dirname, './specs/gfm');\nremoveFiles(commonmarkDir);\nremoveFiles(gfmDir);\nupdateCommonmark(commonmarkDir, { gfm: false, pedantic: false, headerIds: false });\nupdateCommonmark(gfmDir, { gfm: true, pedantic: false, headerIds: false });\nupdateGfm(gfmDir);\n",
          "filepath": "data/repos/markedjs/marked-1.0/test/update-specs.js",
          "repo": "markedjs/marked",
          "version": "1.0",
          "chunk_index": 0
        }
      },
      {
        "id": "22a4fae5-b130-44d7-b45c-0f8f5c87bf32",
        "score": 0.015625,
        "payload": {
          "text": "/* globals marked, unfetch, ES6Promise, Promise */ // eslint-disable-line no-redeclare\n\nif (!self.Promise) {\n  self.importScripts('https://cdn.jsdelivr.net/npm/es6-promise/dist/es6-promise.js');\n  self.Promise = ES6Promise;\n}\nif (!self.fetch) {\n  self.importScripts('https://cdn.jsdelivr.net/npm/unfetch/dist/unfetch.umd.js');\n  self.fetch = unfetch;\n}\n\nvar versionCache = {};\nvar currentVersion;\n\nonunhandledrejection = function(e) {\n  throw e.reason;\n};\n\nonmessage = function(e) {\n  if (e.data.version === currentVersion) {\n    parse(e);\n  } else {\n    loadVersion(e.data.version).then(function() {\n      parse(e);\n    });\n  }\n};\n\nfunction parse(e) {\n  switch (e.data.task) {\n    case 'defaults':\n\n      var defaults = {};\n      if (typeof marked.getDefaults === 'function') {\n        defaults = marked.getDefaults();\n        delete defaults.renderer;\n      } else if ('defaults' in marked) {\n        for (var prop in marked.defaults) {\n          if (prop !== 'renderer') {\n            defaults[prop] = marked.defaults[prop];\n          }\n        }\n      }\n      postMessage({\n        task: e.data.task,\n        defaults: defaults\n      });\n      break;\n    case 'parse':\n      var startTime = new Date();\n      var lexed = marked.lexer(e.data.markdown, e.data.options);\n      var lexedList = jsonString(lexed);\n      var parsed = marked.parser(lexed, e.data.options);\n      var endTime = new Date();\n      postMessage({\n        task: e.data.task,\n        lexed: lexedList,\n        parsed: parsed,\n        time: endTime - startTime\n      });\n      break;\n  }\n}\n\nfunction stringRepeat(char, times) {\n  var s = '';\n  for (var i = 0; i < times; i++) {\n    s += char;\n  }\n  return s;\n}\n\nfunction jsonString(input, level) {\n  level = level || 0;\n  if (Array.isArray(input)) {\n    if (input.length === 0) {\n      return '[]';\n    }\n    var items = [],\n        i;\n    if (!Array.isArray(input[0]) && typeof input[0] === 'object' && input[0] !== null) {\n      for (i = 0; i < input.length; i++) {\n        items.push(stringRepeat(' ', 2 * level) + jsonString(input[i], level + 1));\n      }\n      return '[\\n' + items.join('\\n') + '\\n]';\n    }\n    for (i = 0; i < input.length; i++) {\n      items.push(jsonString(input[i], level));\n    }\n    return '[' + items.join(', ') + ']';\n  } else if (typeof input === 'object' && input !== null) {\n    var props = [];\n    for (var prop in input) {\n      props.push(prop + ':' + jsonString(input[prop], level));\n    }\n    return '{' + props.join(', ') + '}';\n  } else {\n    return JSON.stringify(input);\n  }\n}\n\nfunction loadVersion(ver) {\n  var promise;\n  if (versionCache[ver]) {\n    promise = Promise.resolve(versionCache[ver]);\n  } else {\n    promise = fetch(ver)\n      .then(function(res) { return res.text(); })\n      .then(function(text) {\n        versionCache[ver] = text;\n        return text;\n      });\n  }\n  return promise.then(function(text) {\n    try {\n      // eslint-disable-next-line no-new-func\n      Function(text)();\n    } catch (err) {\n      throw new Error('Cannot load that version of marked');\n    }\n    currentVersion = ver;\n  });\n}\n",
          "filepath": "data/repos/markedjs/marked-1.0/docs/demo/worker.js",
          "repo": "markedjs/marked",
          "version": "1.0",
          "chunk_index": 0
        }
      },
      {
        "id": "718e5431-cb21-4017-b32b-f8ecdf7eb6b8",
        "score": 0.015384615384615385,
        "payload": {
          "text": "## The `marked` function\n\n```js\nmarked(markdownString [,options] [,callback])\n```\n\n|Argument              |Type         |Notes                                                                                                |\n|:---------------------|:------------|:----------------------------------------------------------------------------------------------------|\n|markdownString        |`string`     |String of markdown source to be compiled.                                                            |\n|<a href=\"#options\">options</a>|`object`|Hash of options. Can also use `marked.setOptions`.                                                |\n|callback              |`function`   |Called when `markdownString` has been parsed. Can be used as second argument if no `options` present.|\n\n### Alternative using reference\n\n```js\n// Create reference instance\nconst marked = require('marked');\n\n// Set options\n// `highlight` example uses `highlight.js`\nmarked.setOptions({\n  renderer: new marked.Renderer(),\n  highlight: function(code, language) {\n    const hljs = require('highlight.js');\n    const validLanguage = hljs.getLanguage(language) ? language : 'plaintext';\n    return hljs.highlight(validLanguage, code).value;\n  },\n  pedantic: false,\n  gfm: true,\n  breaks: false,\n  sanitize: false,\n  smartLists: true,\n  smartypants: false,\n  xhtml: false\n});\n\n// Compile\nconsole.log(marked(markdownString));\n```\n\n<h2 id=\"options\">Options</h2>\n\n|Member      |Type      |Default  |Since    |Notes         |\n|:-----------|:---------|:--------|:--------|:-------------|\n|baseUrl     |`string`  |`null`   |0.3.9    |A prefix url for any relative link. |\n|breaks      |`boolean` |`false`  |v0.2.7   |If true, add `<br>` on a single line break (copies GitHub behavior on comments, but not on rendered markdown files). Requires `gfm` be `true`.|\n|gfm         |`boolean` |`true`   |v0.2.1   |If true, use approved [GitHub Flavored Markdown (GFM) specification](https://github.github.com/gfm/).|\n|headerIds   |`boolean` |`true`   |v0.4.0   |If true, include an `id` attribute when emitting headings (h1, h2, h3, etc).|\n|headerPrefix|`string`  |`''`     |v0.3.0   |A string to prefix the `id` attribute when emitting headings (h1, h2, h3, etc).|\n|highlight   |`function`|`null`   |v0.3.0   |A function to highlight code blocks, see <a href=\"#highlight\">Asynchronous highlighting</a>.|\n|langPrefix  |`string`  |`'language-'`|v0.3.0|A string to prefix the className in a `<code>` block. Useful for syntax highlighting.|\n|mangle      |`boolean` |`true`   |v0.3.4   |If true, autolinked email address is escaped with HTML character references.|\n|pedantic    |`boolean` |`false`  |v0.2.1   |If true, conform to the original `markdown.pl` as much as possible. Don't fix original markdown bugs or behavior. Turns off and overrides `gfm`.|\n|renderer    |`object`  |`new Renderer()`|v0.3.0|An object containing functions to render tokens to HTML. See [extensibility](/#/USING_PRO.md) for more details.|\n|sanitize    |`boolean` |`false`  |v0.2.1   |If true, sanitize the HTML passed into `markdownString` with the `sanitizer` function.<br>**Warning**: This feature is deprecated and it should NOT be used as it cannot be considered secure.<br>Instead use a sanitize library, like [DOMPurify](https://github.com/cure53/DOMPurify) (recommended), [sanitize-html](https://github.com/apostrophecms/sanitize-html) or [insane](https://github.com/bevacqua/insane) on the output HTML! |\n|sanitizer   |`function`|`null`   |v0.3.4   |A function to sanitize the HTML passed into `markdownString`.|\n|silent      |`boolean` |`false`  |v0.2.7   |If true, the parser does not throw any exception.|\n|smartLists  |`boolean` |`false`  |v0.2.8   |If true, use smarter list behavior than those found in `markdown.pl`.|\n|smartypants |`boolean` |`false`  |v0.2.9   |If true, use \"smart\" typographic punctuation for things like quotes and dashes.|\n|xhtml       |`boolean` |`false`  |v0.3.2   |If true, emit self-closing HTML tags for void elements (&lt;br/&gt;, &lt;img/&gt;, etc.) with a \"/\" as required by XHTML.|\n\n<h2 id=\"highlight\">Asynchronous highlighting</h2>\n\nUnlike `highlight.js` the `pygmentize.js` library uses asynchronous highlighting. This example demonstrates that marked is agnostic when it comes to the highlighter you use.\n\n```js\nmarked.setOptions({\n  highlight: function(code, lang, callback) {\n    require('pygmentize-bundled') ({ lang: lang, format: 'html' }, code, function (err, result) {\n      callback(err, result.toString());\n    });\n  }\n});\n\nconsole.log(marked(markdownString));\n```\n\nIn both examples, `code` is a `string` representing the section of code to pass to the highlighter. In this example, `lang` is a `string` informing the highlighter what programming language to use for the `code` and `callback` is the `function` the asynchronous highlighter will call once complete.\n\n<h2 id=\"workers\">Workers</h2>\n\nTo prevent ReDoS attacks you can run marked on a worker and terminate it when parsing takes longer than usual.\n\nMarked can be run in a [worker thread](https://nodejs.org/api/worker_threads.html) on a node server, or a [web worker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) in a browser.\n\n### Node Worker Thread\n\n```js\n// markedWorker.js\n\nconst marked = require('marked');\nconst { parentPort } = require('worker_threads');\n\nparentPort.on('message', (markdownString) => {\n  parentPort.postMessage(marked(markdownString));\n});\n```\n\n```js\n// index.js\n\nconst { Worker } = require('worker_threads');\nconst markedWorker = new Worker('./markedWorker.js');\n\nconst markedTimeout = setTimeout(() => {\n  markedWorker.terminate();\n  throw new Error('Marked took too long!');\n}, timeoutLimit);\n\nmarkedWorker.on('message', (html) => {\n  clearTimeout(markedTimeout);\n  console.log(html);\n  markedWorker.terminate();\n});\n\nmarkedWorker.postMessage(markdownString);\n```\n\n### Web Worker\n\n> **NOTE**: Web Workers send the payload from `postMessage` in an object with the payload in a `.data` property\n\n```js\n// markedWorker.js\n\nimportScripts('path/to/marked.min.js');\n\nonmessage = (e) => {\n  const markdownString = e.data\n  postMessage(marked(markdownString));\n};\n```\n\n```js\n// script.js\n\nconst markedWorker = new Worker('./markedWorker.js');\n\nconst markedTimeout = setTimeout(() => {\n  markedWorker.terminate();\n  throw new Error('Marked took too long!');\n}, timeoutLimit);\n\nmarkedWorker.onmessage = (e) => {\n  clearTimeout(markedTimeout);\n  const html = e.data;\n  console.log(html);\n  markedWorker.terminate();\n};\n\nmarkedWorker.postMessage(markdownString);\n```\n",
          "filepath": "data/repos/markedjs/marked-1.0/docs/USING_ADVANCED.md",
          "repo": "markedjs/marked",
          "version": "1.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-2811",
    "model_patch": "diff --git a/src/marked.js b/src/marked.js\nindex 009427f..e69de29 100644\n--- a/src/marked.js\n+++ b/src/marked.js\n@@ -1,6 +1,7 @@\n // Import necessary modules\n import { Lexer } from './Lexer.js';\n import { Parser } from './Parser.js';\n+import { Renderer } from './Renderer.js';\n import { Tokenizer } from './Tokenizer.js';\n import { defaults } from './defaults.js';\n import { merge } from './helpers.js';\n@@ -8,6 +9,7 @@ import { marked } from './marked.js';\n \n // Define the main Marked class\n class Marked {\n+  constructor(options = {}) {\n     this.options = merge({}, defaults, options);\n     this.lexer = new Lexer(this.options);\n     this.parser = new Parser(this.options);\n@@ -15,6 +17,7 @@ class Marked {\n   }\n \n   parse(src) {\n+    src = src.replace(/(\\*\\*)([^*]+)(\\*\\*)/g, (match, p1, p2, p3) => `${p1}${p2.trim()}${p3}`);\n     const tokens = this.lexer.lex(src);\n     return this.parser.parse(tokens);\n   }\n@@ -22,6 +25,7 @@ class Marked {\n \n // Export the Marked class\n export { Marked };\n+export { Renderer };\n \n // Export the default instance\n export const marked = new Marked();",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 177.47,
      "issue_embedding_time_ms": 177.47,
      "retrieval_time_ms_splade": 9.89,
      "retrieval_time_ms": 9.89,
      "total_retrieval_time_ms": 187.37,
      "generation_time_ms": 3725.97,
      "total_io_time_ms": 3913.34,
      "input_total_token_limit": null,
      "issue_text_tokens": 1207,
      "vlm_tokens": 0,
      "retrieved_tokens": 2696,
      "prompt_template_tokens": 519,
      "total_input_prompt_tokens": 4422,
      "output_generated_tokens": 319,
      "total_io_tokens": 4741,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nSyntax parse fails with Japanese punctuation (`\\u3001`), strong syntax and code syntax\\n**Marked version:**\\r\\n\\r\\n* v4.0.18\\r\\n\\r\\n**Describe the bug**\\r\\nA clear and concise description of what the bug is.\\r\\n\\r\\nCopy from https://github.com/volca/markdown-preview/issues/135.\\r\\n\\r\\nThe case below, it does not parse syntax correctly.\\r\\n\\r\\n```bash\\r\\n% cat test.md\\r\\n* \\u00d7: \\u3042\\u308c\\u3001**`foo`\\u3053\\u308c**\\u3001\\u305d\\u308c\\r\\n* \\u25cb: \\u3042\\u308c\\u3001 **`foo`\\u3053\\u308c**\\u3001\\u305d\\u308c\\r\\n* \\u00d7: \\u3042\\u308c\\u3001**`foo`\\u3053\\u308c** \\u3001\\u305d\\u308c\\r\\n\\r\\n* \\u25cb: \\u3042\\u308c\\u3001**foo\\u3053\\u308c**\\u3001\\u305d\\u308c\\r\\n* \\u25cb: \\u3042\\u308c\\u3001 **foo\\u3053\\u308c**\\u3001\\u305d\\u308c\\r\\n* \\u25cb: \\u3042\\u308c\\u3001**foo\\u3053\\u308c** \\u3001\\u305d\\u308c\\r\\n\\r\\n% npx marked --version\\r\\n4.0.18\\r\\n\\r\\n% npx marked < test.md\\r\\n<ul>\\r\\n<li><p>\\u00d7: \\u3042\\u308c\\u3001**<code>foo</code>\\u3053\\u308c**\\u3001\\u305d\\u308c</p>\\r\\n</li>\\r\\n<li><p>\\u25cb: \\u3042\\u308c\\u3001 <strong><code>foo</code>\\u3053\\u308c</strong>\\u3001\\u305d\\u308c</p>\\r\\n</li>\\r\\n<li><p>\\u00d7: \\u3042\\u308c\\u3001**<code>foo</code>\\u3053\\u308c** \\u3001\\u305d\\u308c</p>\\r\\n</li>\\r\\n<li><p>\\u25cb: \\u3042\\u308c\\u3001<strong>foo\\u3053\\u308c</strong>\\u3001\\u305d\\u308c</p>\\r\\n</li>\\r\\n<li><p>\\u25cb: \\u3042\\u308c\\u3001 <strong>foo\\u3053\\u308c</strong>\\u3001\\u305d\\u308c</p>\\r\\n</li>\\r\\n<li><p>\\u25cb: \\u3042\\u308c\\u3001<strong>foo\\u3053\\u308c</strong> \\u3001\\u305d\\u308c</p>\\r\\n</li>\\r\\n</ul>\\r\\n```\\r\\n\\r\\nWith Japanese punctuation (`\\u3001`), strong syntax (`**`), and code syntax (`` ` ``),\\r\\nit needs some space to make them parsed correctly (The former 3 examples).\\r\\n\\r\\nAlthough, without code syntax, no extra space is required (The latter 3 examples).\\r\\n\\r\\nSo it isn't a syntax parsing problem with CJK symbol characters?\\r\\n\\r\\n**To Reproduce**\\r\\nSteps to reproduce the behavior:\\r\\n\\r\\nAs above.\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n**Expected behavior**\\r\\nA clear and concise description of what you expected to happen.\\r\\n\\r\\nParse the syntax correctly as [Pandoc](https://github.com/jgm/pandoc).\\r\\n\\r\\n```bash\\r\\n% pandoc --version\\r\\npandoc.exe 2.18\\r\\nCompiled with pandoc-types 1.22.2, texmath 0.12.5, skylighting 0.12.3,\\r\\nciteproc 0.7, ipynb 0.2, hslua 2.2.0\\r\\nScripting engine: Lua 5.4\\r\\nUser data directory: C:\\\\Users\\\\yasuda\\\\AppData\\\\Roaming\\\\pandoc\\r\\nCopyright (C) 2006-2022 John MacFarlane. Web:  https://pandoc.org\\r\\nThis is free software; see the source for copying conditions. There is no\\r\\nwarranty, not even for merchantability or fitness for a particular purpose.\\r\\n\\r\\n% pandoc < test.md\\r\\n<ul>\\r\\n<li><p>\\u00d7: \\u3042\\u308c\\u3001<strong><code>foo</code>\\u3053\\u308c</strong>\\u3001\\u305d\\u308c</p></li>\\r\\n<li><p>\\u25cb: \\u3042\\u308c\\u3001 <strong><code>foo</code>\\u3053\\u308c</strong>\\u3001\\u305d\\u308c</p></li>\\r\\n<li><p>\\u00d7: \\u3042\\u308c\\u3001<strong><code>foo</code>\\u3053\\u308c</strong> \\u3001\\u305d\\u308c</p></li>\\r\\n<li><p>\\u25cb: \\u3042\\u308c\\u3001<strong>foo\\u3053\\u308c</strong>\\u3001\\u305d\\u308c</p></li>\\r\\n<li><p>\\u25cb: \\u3042\\u308c\\u3001 <strong>foo\\u3053\\u308c</strong>\\u3001\\u305d\\u308c</p></li>\\r\\n<li><p>\\u25cb: \\u3042\\u308c\\u3001<strong>foo\\u3053\\u308c</strong> \\u3001\\u305d\\u308c</p></li>\\r\\n</ul>\\r\\n```\\r\\n\\nlink inside of  Strong delimiter, the strong delimiter not work\\n**Marked version: https://github.com/markedjs/marked/blob/009427f65dadd5dff9ec0189e008677aea9fbcfa/lib/marked.js**\\r\\n\\r\\n**Describe the bug**\\r\\nWhen there is a link inside of a strong delimiter, followed closely by a character other than `[ .!,;] ....`, the strong delimiter is broken.\\r\\n\\r\\n**To Reproduce**\\r\\n![image](https://user-images.githubusercontent.com/11593903/117394732-a582c080-af31-11eb-919b-c15cf5f16069.png)\\r\\n\\r\\n```\\r\\n**STRONG**.  OK  \\r\\n**STRONG**\\u3002  OK  \\r\\n**STRONG**\\uff01  OK  \\r\\n**STRONG**M  OK\\r\\n\\r\\n**[STRONG]( http://abc.com )**!    OK  \\r\\n**[STRONG]( http://abc.com )**.    OK  \\r\\n**[STRONG]( http://abc.com )**\\uff01   bad!  \\r\\n**[STRONG]( http://abc.com )** \\uff01   OK   \\r\\n**[STRONG]( http://abc.com )**M   bad!  \\r\\n**[STRONG]( http://abc.com )** M   OK     \\r\\n```\\r\\n\\r\\n**Info**\\r\\nOld Version don't have this issue.  \\r\\n- A chrome extension called [Markdown Preview Plus](https://chrome.google.com/webstore/detail/febilkbfcbhebfnokafefeacimjdckgl) uses a relatively new version of marked, and it has this same problem.\\r\\n- The [browserify-markdown-editor](https://github.com/thlorenz/browserify-markdown-editor) uses an old version of marked ( 0.2.9 ), and it don't have this problem. https://thlorenz.com/browserify-markdown-editor/ \\r\\n\\r\\n\\r\\n**Expected behavior**  \\r\\nThe strong delimiter should bolden the wrapped text no matter of what's inside and what's behind.\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of marked.1.txt]\\nmarked(1)\\t\\t    General Commands Manual\\t\\t     marked(1)\\n\\nNAME\\n       marked - a javascript markdown parser\\n\\nSYNOPSIS\\n       marked  [-o  <output>]  [-i  <input>] [-s <string>] [--help] [--tokens]\\n       [--pedantic]   [--gfm]\\t [--breaks]    [--sanitize]    [--smart-lists]\\n       [--lang-prefix <prefix>] [--no-etc...] [--silent] [filename]\\n\\n\\nDESCRIPTION\\n       marked is a full-featured javascript markdown parser, built for speed.\\n       It also includes multiple GFM features.\\n\\nEXAMPLES\\n       cat in.md | marked > out.html\\n\\n       echo \\\"hello *world*\\\" | marked\\n\\n       marked -o out.html -i in.md --gfm\\n\\n       marked --output=\\\"hello world.html\\\" -i in.md --no-breaks\\n\\nOPTIONS\\n       -o, --output [output]\\n\\t      Specify file output. If none is specified, write to stdout.\\n\\n       -i, --input [input]\\n\\t      Specify file input, otherwise use last argument as input file.\\n\\t      If no input file is specified, read from stdin.\\n\\n       -s, --string [string]\\n\\t      Specify string input instead of a file.\\n\\n       -t, --tokens\\n\\t      Output a token stream instead of html.\\n\\n       --pedantic\\n\\t      Conform to obscure parts of markdown.pl as much as possible.\\n\\t      Don't fix original markdown bugs.\\n\\n       --gfm  Enable github flavored markdown.\\n\\n       --breaks\\n\\t      Enable GFM line breaks. Only works with the gfm option.\\n\\n       --sanitize\\n\\t      Sanitize output. Ignore any HTML input.\\n\\n       --smart-lists\\n\\t      Use smarter list behavior than the original markdown.\\n\\n       --lang-prefix [prefix]\\n\\t      Set the prefix for code block classes.\\n\\n       --mangle\\n\\t      Mangle email addresses.\\n\\n       --no-sanitize, -no-etc...\\n\\t      The inverse of any of the marked options above.\\n\\n       --silent\\n\\t      Silence error output.\\n\\n       -h, --help\\n\\t      Display help information.\\n\\nCONFIGURATION\\n       For configuring and running programmatically.\\n\\n       Example\\n\\n\\t   import { marked } from 'marked';\\n\\t   marked('*foo*', { gfm: true });\\n\\nBUGS\\n       Please report any bugs to https://github.com/markedjs/marked.\\n\\nLICENSE\\n       Copyright (c) 2011-2014, Christopher Jeffrey (MIT License).\\n\\nSEE ALSO\\n       markdown(1), node.js(1)\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t     marked(1)\\n\\n[end of marked.1.txt]\\n[start of INDEX.md]\\nMarked is\\n\\n1. built for speed.<sup>*</sup>\\n2. a low-level markdown compiler for parsing markdown without caching or blocking for long periods of time.<sup>**</sup>\\n3. light-weight while implementing all markdown features from the supported flavors & specifications.<sup>***</sup>\\n4. available as a command line interface (CLI) and running in client- or server-side JavaScript projects.\\n\\n<p><small><sup>*</sup> Still working on metrics for comparative analysis and definition.</small><br>\\n<small><sup>**</sup> As few dependencies as possible.</small><br>\\n<small><sup>***</sup> Strict compliance could result in slower processing when running comparative benchmarking.</small></p>\\n\\n\\n<h2 id=\\\"demo\\\">Demo</h2>\\n\\nCheckout the [demo page](./demo/) to see marked in action \\u26f9\\ufe0f\\n\\nThese documentation pages are also rendered using marked \\ud83d\\udcaf\\n\\n\\n<h2 id=\\\"installation\\\">Installation</h2>\\n\\n**CLI:** `npm install -g marked`\\n\\n**In-browser:**\\n```\\nnpm install marked\\nnpm install @types/marked # For TypeScript projects\\n```\\n<h2 id=\\\"usage\\\">Usage</h2>\\n\\n### Warning: \\ud83d\\udea8 Marked does not [sanitize](/using_advanced#options) the output HTML. If you are processing potentially unsafe strings, it's important to filter for possible XSS attacks. Some filtering options include [DOMPurify](https://github.com/cure53/DOMPurify) (recommended), [js-xss](https://github.com/leizongmin/js-xss), [sanitize-html](https://github.com/apostrophecms/sanitize-html) and [insane](https://github.com/bevacqua/insane) on the *output* HTML! \\ud83d\\udea8\\n\\n```\\nDOMPurify.sanitize(marked.parse(`<img src=\\\"x\\\" onerror=\\\"alert('not happening')\\\">`));\\n```\\n\\n**\\u26a0\\ufe0f Input: special ZERO WIDTH unicode characters (for example `\\\\uFEFF`) might interfere with parsing. Some text editors add them at the start of the file (see: [#2139](https://github.com/markedjs/marked/issues/2139)).**\\n\\n```js\\n// remove the most common zerowidth characters from the start of the file \\nmarked.parse(\\n  contents.replace(/^[\\\\u200B\\\\u200C\\\\u200D\\\\u200E\\\\u200F\\\\uFEFF]/,\\\"\\\")\\n)\\n```\\n\\n**CLI**\\n\\n``` bash\\n# Example with stdin input\\n$ marked -o hello.html\\nhello world\\n^D\\n$ cat hello.html\\n<p>hello world</p>\\n```\\n\\n``` bash\\n# Example with string input\\n$ marked -s \\\"*hello world*\\\"\\n<p><em>hello world</em></p>\\n```\\n\\n```bash\\n# Example with file input\\n\\necho \\\"**bold text example**\\\" > readme.md\\n\\n$ marked -i readme.md -o readme.html\\n$ cat readme.html\\n<p><strong>bold text example</strong></p>\\n```\\n\\n```bash\\n# Print all options\\n$ marked --help\\n```\\n\\n**Browser**\\n\\n```html\\n<!doctype html>\\n<html>\\n<head>\\n  <meta charset=\\\"utf-8\\\"/>\\n  <title>Marked in the browser</title>\\n</head>\\n<body>\\n  <div id=\\\"content\\\"></div>\\n  <script src=\\\"https://cdn.jsdelivr.net/npm/marked/marked.min.js\\\"></script>\\n  <script>\\n    document.getElementById('content').innerHTML =\\n      marked.parse('# Marked in browser\\\\n\\\\nRendered by **marked**.');\\n  </script>\\n</body>\\n</html>\\n```\\n\\n**Node.js**\\n\\n```js\\nimport { marked } from 'marked';\\n// or const { marked } = require('marked');\\n\\nconst html = marked.parse('# Marked in Node.js\\\\n\\\\nRendered by **marked**.');\\n```\\n\\n\\nMarked offers [advanced configurations](/using_advanced) and [extensibility](/using_pro) as well.\\n\\n<h2 id=\\\"specifications\\\">Supported Markdown specifications</h2>\\n\\nWe actively support the features of the following [Markdown flavors](https://github.com/commonmark/CommonMark/wiki/Markdown-Flavors).\\n\\n| Flavor                                                     | Version | Status                                                             |\\n| :--------------------------------------------------------- | :------ | :----------------------------------------------------------------- |\\n| The original markdown.pl                                   | --      |                                                                    |\\n| [CommonMark](http://spec.commonmark.org/0.30/)             | 0.30    | [Work in progress](https://github.com/markedjs/marked/issues/1202) |\\n| [GitHub Flavored Markdown](https://github.github.com/gfm/) | 0.29    | [Work in progress](https://github.com/markedjs/marked/issues/1202) |\\n\\nBy supporting the above Markdown flavors, it's possible that Marked can help you use other flavors as well; however, these are not actively supported by the community.\\n\\n<h2 id=\\\"tools\\\">List of Tools Using Marked</h2>\\n\\nWe actively support the usability of Marked in super-fast markdown transformation, some of Tools using `Marked` for single-page creations are \\n\\n| Tools                                                               |                  Description                                               |\\n| :-----------------------------------------------------------------  | :------------------------------------------------------------------------  |\\n| [zero-md](https://zerodevx.github.io/zero-md/)                      | A native markdown-to-html web component to load and display an external MD file.It uses Marked for super-fast markdown transformation. |\\n| [texme](https://github.com/susam/texme)                             | TeXMe is a lightweight JavaScript utility to create self-rendering Markdown + LaTeX documents.             |\\n| [StrapDown.js](https://naereen.github.io/StrapDown.js/)             | StrapDown.js is an awesome on-the-fly Markdown to HTML text processor.                |\\n| [Homebrewery](https://homebrewery.naturalcrit.com/)             | The Homebrewery is a tool for making authentic looking D&D content using Markdown. It is distributed under the terms of the MIT.             |\\n\\n<h2 id=\\\"security\\\">Security</h2>\\n\\nThe only completely secure system is the one that doesn't exist in the first place. Having said that, we take the security of Marked very seriously.\\n\\nTherefore, please disclose potential security issues by email to the project [committers](/authors) as well as the [listed owners within NPM](https://docs.npmjs.com/cli/owner). We will provide an initial assessment of security reports within 48 hours and should apply patches within 2 weeks (also, feel free to contribute a fix for the issue).\\n\\n[end of INDEX.md]\\n[start of PULL_REQUEST_TEMPLATE.md]\\n\\n<!--\\n\\n\\tIf badging PR, add ?template=badges.md to the PR url to use the badges PR template.\\n\\n\\tOtherwise, you are stating this PR fixes an issue that has been submitted; or,\\n\\tdescribes the issue or proposal under consideration and contains the project-related code to implement.\\n\\n-->\\n\\n**Marked version:**\\n\\n<!-- The NPM version or commit hash having the issue -->\\n\\n**Markdown flavor:** Markdown.pl|CommonMark|GitHub Flavored Markdown|n/a\\n\\n## Description\\n\\n- Fixes #### (if fixing a known issue; otherwise, describe issue using the following format)\\n\\n<!--\\n\\n\\tIf no issue exists that you're aware of. The maintainers should be able to figure out if it's a duplicate.\\n\\n## Expectation\\n\\nDescribe the output you are expecting from marked\\n\\n## Result\\n\\nDescribe the output you received from marked\\n\\n## What was attempted\\n\\nDescribe what code combination got you there\\n\\n-->\\n\\n## Contributor\\n\\n- [ ] Test(s) exist to ensure functionality and minimize regression (if no tests added, list tests covering this PR); or,\\n- [ ] no tests required for this PR.\\n- [ ] If submitting new feature, it has been documented in the appropriate places.\\n\\n## Committer\\n\\nIn most cases, this should be a different person than the contributor.\\n\\n- [ ] CI is green (no forced merge required).\\n- [ ] Squash and Merge PR following [conventional commit guidelines](https://www.conventionalcommits.org/).\\n\\n[end of PULL_REQUEST_TEMPLATE.md]\\n[start of Bug_report.md]\\n---\\nname: Bug report\\nabout: Marked says it does this thing but does not\\n\\n---\\n**Marked version:**\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior:\\n\\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\\n<!--\\n1. [Marked Demo](https://marked.js.org/demo/)\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\\n-->\\n\\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\\n<!--\\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\\n3. Actual output (or error) is...\\n-->\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n[end of Bug_report.md]\\n[start of rollup.config.js]\\nimport babel from '@rollup/plugin-babel';\\nimport { defineConfig } from 'rollup';\\nimport fs from 'fs';\\n\\nconst pkg = JSON.parse(fs.readFileSync('./package.json'));\\nconst version = process.env.SEMANTIC_RELEASE_NEXT_VERSION || pkg.version;\\n\\nconsole.log('building version:', version);\\n\\nconst banner = `/**\\n * marked v${version} - a markdown parser\\n * Copyright (c) 2011-${new Date().getFullYear()}, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n\\n/**\\n * DO NOT EDIT THIS FILE\\n * The code in this file is generated from files in ./src/\\n */\\n`;\\n\\nexport default defineConfig([\\n  {\\n    input: 'src/marked.js',\\n    output: {\\n      file: 'lib/marked.esm.js',\\n      format: 'esm',\\n      banner\\n    }\\n  },\\n  {\\n    input: 'src/marked.js',\\n    output: [{\\n      file: 'lib/marked.umd.js',\\n      format: 'umd',\\n      name: 'marked',\\n      banner\\n    },\\n    {\\n      file: 'lib/marked.cjs',\\n      format: 'cjs',\\n      name: 'marked',\\n      banner\\n    }],\\n    plugins: [\\n      babel({\\n        presets: [['@babel/preset-env', { loose: true }]]\\n      })\\n    ]\\n  }\\n]);\\n\\n[end of rollup.config.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "marked.1.txt",
        "INDEX.md",
        "PULL_REQUEST_TEMPLATE.md",
        "Bug_report.md",
        "rollup.config.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "e9728b90-6055-448d-9cae-dad56b12a413",
        "score": 0.01639344262295082,
        "payload": {
          "text": "marked(1)\t\t    General Commands Manual\t\t     marked(1)\n\nNAME\n       marked - a javascript markdown parser\n\nSYNOPSIS\n       marked  [-o  <output>]  [-i  <input>] [-s <string>] [--help] [--tokens]\n       [--pedantic]   [--gfm]\t [--breaks]    [--sanitize]    [--smart-lists]\n       [--lang-prefix <prefix>] [--no-etc...] [--silent] [filename]\n\n\nDESCRIPTION\n       marked is a full-featured javascript markdown parser, built for speed.\n       It also includes multiple GFM features.\n\nEXAMPLES\n       cat in.md | marked > out.html\n\n       echo \"hello *world*\" | marked\n\n       marked -o out.html -i in.md --gfm\n\n       marked --output=\"hello world.html\" -i in.md --no-breaks\n\nOPTIONS\n       -o, --output [output]\n\t      Specify file output. If none is specified, write to stdout.\n\n       -i, --input [input]\n\t      Specify file input, otherwise use last argument as input file.\n\t      If no input file is specified, read from stdin.\n\n       -s, --string [string]\n\t      Specify string input instead of a file.\n\n       -t, --tokens\n\t      Output a token stream instead of html.\n\n       --pedantic\n\t      Conform to obscure parts of markdown.pl as much as possible.\n\t      Don't fix original markdown bugs.\n\n       --gfm  Enable github flavored markdown.\n\n       --breaks\n\t      Enable GFM line breaks. Only works with the gfm option.\n\n       --sanitize\n\t      Sanitize output. Ignore any HTML input.\n\n       --smart-lists\n\t      Use smarter list behavior than the original markdown.\n\n       --lang-prefix [prefix]\n\t      Set the prefix for code block classes.\n\n       --mangle\n\t      Mangle email addresses.\n\n       --no-sanitize, -no-etc...\n\t      The inverse of any of the marked options above.\n\n       --silent\n\t      Silence error output.\n\n       -h, --help\n\t      Display help information.\n\nCONFIGURATION\n       For configuring and running programmatically.\n\n       Example\n\n\t   import { marked } from 'marked';\n\t   marked('*foo*', { gfm: true });\n\nBUGS\n       Please report any bugs to https://github.com/markedjs/marked.\n\nLICENSE\n       Copyright (c) 2011-2014, Christopher Jeffrey (MIT License).\n\nSEE ALSO\n       markdown(1), node.js(1)\n\n\t\t\t\t\t\t\t\t     marked(1)\n",
          "filepath": "data/repos/markedjs/marked-5.0/man/marked.1.txt",
          "repo": "markedjs/marked",
          "version": "5.0",
          "chunk_index": 0
        }
      },
      {
        "id": "718a3037-2529-414d-8aa4-c18c947a43e0",
        "score": 0.016129032258064516,
        "payload": {
          "text": "Marked is\n\n1. built for speed.<sup>*</sup>\n2. a low-level markdown compiler for parsing markdown without caching or blocking for long periods of time.<sup>**</sup>\n3. light-weight while implementing all markdown features from the supported flavors & specifications.<sup>***</sup>\n4. available as a command line interface (CLI) and running in client- or server-side JavaScript projects.\n\n<p><small><sup>*</sup> Still working on metrics for comparative analysis and definition.</small><br>\n<small><sup>**</sup> As few dependencies as possible.</small><br>\n<small><sup>***</sup> Strict compliance could result in slower processing when running comparative benchmarking.</small></p>\n\n\n<h2 id=\"demo\">Demo</h2>\n\nCheckout the [demo page](./demo/) to see marked in action \u26f9\ufe0f\n\nThese documentation pages are also rendered using marked \ud83d\udcaf\n\n\n<h2 id=\"installation\">Installation</h2>\n\n**CLI:** `npm install -g marked`\n\n**In-browser:**\n```\nnpm install marked\nnpm install @types/marked # For TypeScript projects\n```\n<h2 id=\"usage\">Usage</h2>\n\n### Warning: \ud83d\udea8 Marked does not [sanitize](/using_advanced#options) the output HTML. If you are processing potentially unsafe strings, it's important to filter for possible XSS attacks. Some filtering options include [DOMPurify](https://github.com/cure53/DOMPurify) (recommended), [js-xss](https://github.com/leizongmin/js-xss), [sanitize-html](https://github.com/apostrophecms/sanitize-html) and [insane](https://github.com/bevacqua/insane) on the *output* HTML! \ud83d\udea8\n\n```\nDOMPurify.sanitize(marked.parse(`<img src=\"x\" onerror=\"alert('not happening')\">`));\n```\n\n**\u26a0\ufe0f Input: special ZERO WIDTH unicode characters (for example `\\uFEFF`) might interfere with parsing. Some text editors add them at the start of the file (see: [#2139](https://github.com/markedjs/marked/issues/2139)).**\n\n```js\n// remove the most common zerowidth characters from the start of the file \nmarked.parse(\n  contents.replace(/^[\\u200B\\u200C\\u200D\\u200E\\u200F\\uFEFF]/,\"\")\n)\n```\n\n**CLI**\n\n``` bash\n# Example with stdin input\n$ marked -o hello.html\nhello world\n^D\n$ cat hello.html\n<p>hello world</p>\n```\n\n``` bash\n# Example with string input\n$ marked -s \"*hello world*\"\n<p><em>hello world</em></p>\n```\n\n```bash\n# Example with file input\n\necho \"**bold text example**\" > readme.md\n\n$ marked -i readme.md -o readme.html\n$ cat readme.html\n<p><strong>bold text example</strong></p>\n```\n\n```bash\n# Print all options\n$ marked --help\n```\n\n**Browser**\n\n```html\n<!doctype html>\n<html>\n<head>\n  <meta charset=\"utf-8\"/>\n  <title>Marked in the browser</title>\n</head>\n<body>\n  <div id=\"content\"></div>\n  <script src=\"https://cdn.jsdelivr.net/npm/marked/marked.min.js\"></script>\n  <script>\n    document.getElementById('content').innerHTML =\n      marked.parse('# Marked in browser\\n\\nRendered by **marked**.');\n  </script>\n</body>\n</html>\n```\n\n**Node.js**\n\n```js\nimport { marked } from 'marked';\n// or const { marked } = require('marked');\n\nconst html = marked.parse('# Marked in Node.js\\n\\nRendered by **marked**.');\n```\n\n\nMarked offers [advanced configurations](/using_advanced) and [extensibility](/using_pro) as well.\n\n<h2 id=\"specifications\">Supported Markdown specifications</h2>\n\nWe actively support the features of the following [Markdown flavors](https://github.com/commonmark/CommonMark/wiki/Markdown-Flavors).\n\n| Flavor                                                     | Version | Status                                                             |\n| :--------------------------------------------------------- | :------ | :----------------------------------------------------------------- |\n| The original markdown.pl                                   | --      |                                                                    |\n| [CommonMark](http://spec.commonmark.org/0.30/)             | 0.30    | [Work in progress](https://github.com/markedjs/marked/issues/1202) |\n| [GitHub Flavored Markdown](https://github.github.com/gfm/) | 0.29    | [Work in progress](https://github.com/markedjs/marked/issues/1202) |\n\nBy supporting the above Markdown flavors, it's possible that Marked can help you use other flavors as well; however, these are not actively supported by the community.\n\n<h2 id=\"tools\">List of Tools Using Marked</h2>\n\nWe actively support the usability of Marked in super-fast markdown transformation, some of Tools using `Marked` for single-page creations are \n\n| Tools                                                               |                  Description                                               |\n| :-----------------------------------------------------------------  | :------------------------------------------------------------------------  |\n| [zero-md](https://zerodevx.github.io/zero-md/)                      | A native markdown-to-html web component to load and display an external MD file.It uses Marked for super-fast markdown transformation. |\n| [texme](https://github.com/susam/texme)                             | TeXMe is a lightweight JavaScript utility to create self-rendering Markdown + LaTeX documents.             |\n| [StrapDown.js](https://naereen.github.io/StrapDown.js/)             | StrapDown.js is an awesome on-the-fly Markdown to HTML text processor.                |\n| [Homebrewery](https://homebrewery.naturalcrit.com/)             | The Homebrewery is a tool for making authentic looking D&D content using Markdown. It is distributed under the terms of the MIT.             |\n\n<h2 id=\"security\">Security</h2>\n\nThe only completely secure system is the one that doesn't exist in the first place. Having said that, we take the security of Marked very seriously.\n\nTherefore, please disclose potential security issues by email to the project [committers](/authors) as well as the [listed owners within NPM](https://docs.npmjs.com/cli/owner). We will provide an initial assessment of security reports within 48 hours and should apply patches within 2 weeks (also, feel free to contribute a fix for the issue).\n",
          "filepath": "data/repos/markedjs/marked-5.0/docs/INDEX.md",
          "repo": "markedjs/marked",
          "version": "5.0",
          "chunk_index": 0
        }
      },
      {
        "id": "a4ec93c3-dfc0-46ca-9d14-1d89e08cee05",
        "score": 0.015873015873015872,
        "payload": {
          "text": "\n<!--\n\n\tIf badging PR, add ?template=badges.md to the PR url to use the badges PR template.\n\n\tOtherwise, you are stating this PR fixes an issue that has been submitted; or,\n\tdescribes the issue or proposal under consideration and contains the project-related code to implement.\n\n-->\n\n**Marked version:**\n\n<!-- The NPM version or commit hash having the issue -->\n\n**Markdown flavor:** Markdown.pl|CommonMark|GitHub Flavored Markdown|n/a\n\n## Description\n\n- Fixes #### (if fixing a known issue; otherwise, describe issue using the following format)\n\n<!--\n\n\tIf no issue exists that you're aware of. The maintainers should be able to figure out if it's a duplicate.\n\n## Expectation\n\nDescribe the output you are expecting from marked\n\n## Result\n\nDescribe the output you received from marked\n\n## What was attempted\n\nDescribe what code combination got you there\n\n-->\n\n## Contributor\n\n- [ ] Test(s) exist to ensure functionality and minimize regression (if no tests added, list tests covering this PR); or,\n- [ ] no tests required for this PR.\n- [ ] If submitting new feature, it has been documented in the appropriate places.\n\n## Committer\n\nIn most cases, this should be a different person than the contributor.\n\n- [ ] CI is green (no forced merge required).\n- [ ] Squash and Merge PR following [conventional commit guidelines](https://www.conventionalcommits.org/).\n",
          "filepath": "data/repos/markedjs/marked-5.0/.github/PULL_REQUEST_TEMPLATE.md",
          "repo": "markedjs/marked",
          "version": "5.0",
          "chunk_index": 0
        }
      },
      {
        "id": "2c0e56ba-d3e4-418d-a18f-e656412f9229",
        "score": 0.015625,
        "payload": {
          "text": "---\nname: Bug report\nabout: Marked says it does this thing but does not\n\n---\n**Marked version:**\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\n<!--\n1. [Marked Demo](https://marked.js.org/demo/)\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\n-->\n\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\n<!--\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\n3. Actual output (or error) is...\n-->\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n",
          "filepath": "data/repos/markedjs/marked-5.0/.github/ISSUE_TEMPLATE/Bug_report.md",
          "repo": "markedjs/marked",
          "version": "5.0",
          "chunk_index": 0
        }
      },
      {
        "id": "83d711d0-9fc5-4e74-b6f2-d3d4e9462d18",
        "score": 0.015384615384615385,
        "payload": {
          "text": "import babel from '@rollup/plugin-babel';\nimport { defineConfig } from 'rollup';\nimport fs from 'fs';\n\nconst pkg = JSON.parse(fs.readFileSync('./package.json'));\nconst version = process.env.SEMANTIC_RELEASE_NEXT_VERSION || pkg.version;\n\nconsole.log('building version:', version);\n\nconst banner = `/**\n * marked v${version} - a markdown parser\n * Copyright (c) 2011-${new Date().getFullYear()}, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n`;\n\nexport default defineConfig([\n  {\n    input: 'src/marked.js',\n    output: {\n      file: 'lib/marked.esm.js',\n      format: 'esm',\n      banner\n    }\n  },\n  {\n    input: 'src/marked.js',\n    output: [{\n      file: 'lib/marked.umd.js',\n      format: 'umd',\n      name: 'marked',\n      banner\n    },\n    {\n      file: 'lib/marked.cjs',\n      format: 'cjs',\n      name: 'marked',\n      banner\n    }],\n    plugins: [\n      babel({\n        presets: [['@babel/preset-env', { loose: true }]]\n      })\n    ]\n  }\n]);\n",
          "filepath": "data/repos/markedjs/marked-5.0/rollup.config.js",
          "repo": "markedjs/marked",
          "version": "5.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1739",
    "model_patch": "diff --git a/lib/marked.js b/lib/marked.js\n--- a/lib/marked.js\n+++ b/lib/marked.js\n@@ -1,5 +1,5 @@\n // Regular expressions for parsing\n const block = {\n-  comment: /^<!--[\\s\\S]*?-->/,\n+  comment: /^<!--[\\s\\S]*?(?:--!?>|$)/,\n   ...\n };\n \n@@ -50,7 +50,7 @@\n     if (cap = block.comment.exec(src)) {\n       if (!this.options.silent) {\n         console.warn(\n-          'Warning: Inline HTML comments are deprecated and will be removed in the next major release.'\n+          'Warning: Inline HTML comments with \"--!>\" are now supported.'\n         );\n       }\n       src = src.substring(cap[0].length);",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 178.0,
      "issue_embedding_time_ms": 178.0,
      "retrieval_time_ms_splade": 7.09,
      "retrieval_time_ms": 7.09,
      "total_retrieval_time_ms": 185.09,
      "generation_time_ms": 3349.38,
      "total_io_time_ms": 3534.48,
      "input_total_token_limit": null,
      "issue_text_tokens": 372,
      "vlm_tokens": 0,
      "retrieved_tokens": 2061,
      "prompt_template_tokens": 516,
      "total_input_prompt_tokens": 2949,
      "output_generated_tokens": 176,
      "total_io_tokens": 3125,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nComments aren't  fully supported\\n**Describe the bug**\\r\\nThe last version (1.1.1) doesn't fully supports comments. See screenshots:\\r\\nGithub:\\r\\n![image](https://user-images.githubusercontent.com/6815714/89559434-55e65b80-d81e-11ea-9edb-601f95808607.png)\\r\\n![image](https://user-images.githubusercontent.com/6815714/89559455-5d0d6980-d81e-11ea-9dd1-ed9e44f10fc5.png)\\r\\nMarked:\\r\\n![image](https://user-images.githubusercontent.com/6815714/89559506-6c8cb280-d81e-11ea-8113-f28488efb488.png)\\r\\n\\r\\nSupported:\\r\\n```\\r\\n\\r\\n```\\r\\n\\r\\nNot supported:\\r\\n```\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n**Expected behavior**\\r\\nComments with `--!>` at the ending are supported.\\nComments aren't  fully supported\\n**Describe the bug**\\r\\nThe last version (1.1.1) doesn't fully supports comments. See screenshots:\\r\\nGithub:\\r\\n![image](https://user-images.githubusercontent.com/6815714/89559434-55e65b80-d81e-11ea-9edb-601f95808607.png)\\r\\n![image](https://user-images.githubusercontent.com/6815714/89559455-5d0d6980-d81e-11ea-9dd1-ed9e44f10fc5.png)\\r\\nMarked:\\r\\n![image](https://user-images.githubusercontent.com/6815714/89559506-6c8cb280-d81e-11ea-8113-f28488efb488.png)\\r\\n\\r\\nSupported:\\r\\n```\\r\\n\\r\\n```\\r\\n\\r\\nNot supported:\\r\\n```\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n**Expected behavior**\\r\\nComments with `--!>` at the ending are supported.\\n\\n</issue>\\n\\n<code>\\n[start of update-specs.js]\\nconst fetch = require('node-fetch');\\nconst cheerio = require('cheerio');\\nconst marked = require('../');\\nconst htmlDiffer = require('./helpers/html-differ.js');\\nconst fs = require('fs');\\nconst path = require('path');\\n\\nfunction removeFiles(dir) {\\n  fs.readdirSync(dir).forEach(file => {\\n    fs.unlinkSync(path.join(dir, file));\\n  });\\n}\\n\\nasync function updateCommonmark(dir, options) {\\n  try {\\n    const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\\n    const pkg = await res.json();\\n    const version = pkg.version.replace(/^(\\\\d+\\\\.\\\\d+).*$/, '$1');\\n    const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\\n    const specs = await res2.json();\\n    specs.forEach(spec => {\\n      const html = marked(spec.markdown, options);\\n      if (!htmlDiffer.isEqual(html, spec.html)) {\\n        spec.shouldFail = true;\\n      }\\n    });\\n    fs.writeFileSync(path.resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\\\n');\\n    console.log(`Saved CommonMark v${version} specs`);\\n  } catch (ex) {\\n    console.log(ex);\\n  }\\n}\\n\\nasync function updateGfm(dir) {\\n  try {\\n    const res = await fetch('https://github.github.com/gfm/');\\n    const html = await res.text();\\n    const $ = cheerio.load(html);\\n    const version = $('.version').text().match(/\\\\d+\\\\.\\\\d+/)[0];\\n    if (!version) {\\n      throw new Error('No version found');\\n    }\\n    const specs = [];\\n    $('.extension').each((i, ext) => {\\n      const section = $('.definition', ext).text().trim().replace(/^\\\\d+\\\\.\\\\d+(.*?) \\\\(extension\\\\)[\\\\s\\\\S]*$/, '$1');\\n      $('.example', ext).each((j, exa) => {\\n        const example = +$(exa).attr('id').replace(/\\\\D/g, '');\\n        const markdown = $('.language-markdown', exa).text().trim();\\n        const html = $('.language-html', exa).text().trim();\\n        specs.push({\\n          section: `[extension] ${section}`,\\n          html,\\n          markdown,\\n          example\\n        });\\n      });\\n    });\\n\\n    specs.forEach(spec => {\\n      const html = marked(spec.markdown, { gfm: true, pedantic: false });\\n      if (!htmlDiffer.isEqual(html, spec.html)) {\\n        spec.shouldFail = true;\\n      }\\n    });\\n    fs.writeFileSync(path.resolve(dir, `./gfm.${version}.json`), JSON.stringify(specs, null, 2) + '\\\\n');\\n    console.log(`Saved GFM v${version} specs.`);\\n  } catch (ex) {\\n    console.log(ex);\\n  }\\n}\\n\\nconst commonmarkDir = path.resolve(__dirname, './specs/commonmark');\\nconst gfmDir = path.resolve(__dirname, './specs/gfm');\\nremoveFiles(commonmarkDir);\\nremoveFiles(gfmDir);\\nupdateCommonmark(commonmarkDir, { gfm: false, pedantic: false, headerIds: false });\\nupdateCommonmark(gfmDir, { gfm: true, pedantic: false, headerIds: false });\\nupdateGfm(gfmDir);\\n\\n[end of update-specs.js]\\n[start of Bug_report.md]\\n---\\nname: Bug report\\nabout: Marked says it does this thing but does not\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior:\\n\\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\\n<!--\\n1. [Marked Demo](https://marked.js.org/demo/)\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\\n-->\\n\\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\\n<!--\\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\\n3. Actual output (or error) is...\\n-->\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n[end of Bug_report.md]\\n[start of release.md]\\n## Publisher\\n\\n- [ ] `$ npm version` has been run.\\n- [ ] Release notes in [draft GitHub release](https://github.com/markedjs/marked/releases) are up to date\\n- [ ] Release notes include which flavors and versions of Markdown are supported by this release\\n- [ ] Committer checklist is complete.\\n- [ ] Merge PR.\\n- [ ] Publish GitHub release using `master` with correct version number.\\n- [ ] `$ npm publish` has been run.\\n- [ ] Create draft GitHub release to prepare next release.\\n\\nNote: If merges to `master` occur after submitting this PR and before running `$ npm pubish` you should be able to\\n\\n1. pull from `upstream/master` (`git pull upstream master`) into the branch holding this version,\\n2. run `$ npm run build` to regenerate the `min` file, and\\n3. commit and push the updated changes.\\n\\n## Committer\\n\\nIn most cases, this should be someone different than the publisher.\\n\\n- [ ] Version in `package.json` has been updated (see [PUBLISHING.md](https://github.com/markedjs/marked/blob/master/docs/PUBLISHING.md)).\\n- [ ] The `marked.min.js` has been updated; or,\\n- [ ] release does not change library.\\n- [ ] CI is green (no forced merge required).\\n\\n[end of release.md]\\n[start of marked.1.txt]\\nmarked(1)\\t\\t    General Commands Manual\\t\\t     marked(1)\\n\\nNAME\\n       marked - a javascript markdown parser\\n\\nSYNOPSIS\\n       marked  [-o  <output>]  [-i  <input>]  [--help] [--tokens] [--pedantic]\\n       [--gfm] [--breaks] [--sanitize]\\t[--smart-lists]  [--lang-prefix  <pre-\\n       fix>] [--no-etc...] [--silent] [filename]\\n\\n\\nDESCRIPTION\\n       marked is a full-featured javascript markdown parser, built for speed.\\n       It also includes multiple GFM features.\\n\\nEXAMPLES\\n       cat in.md | marked > out.html\\n\\n       echo \\\"hello *world*\\\" | marked\\n\\n       marked -o out.html -i in.md --gfm\\n\\n       marked --output=\\\"hello world.html\\\" -i in.md --no-breaks\\n\\nOPTIONS\\n       -o, --output [output]\\n              Specify file output. If none is specified, write to stdout.\\n\\n       -i, --input [input]\\n              Specify file input, otherwise use last argument as input file.\\n              If no input file is specified, read from stdin.\\n\\n       --test Makes sure the test(s) pass.\\n\\n              --glob [file] Specify which test to use.\\n\\n              --fix Fixes tests.\\n\\n              --bench Benchmarks the test(s).\\n\\n              --time Times The test(s).\\n\\n              --minified Runs test file(s) as minified.\\n\\n              --stop Stop process if a test fails.\\n\\n       -t, --tokens\\n              Output a token stream instead of html.\\n\\n       --pedantic\\n              Conform to obscure parts of markdown.pl as much as possible.\\n              Don't fix original markdown bugs.\\n\\n       --gfm  Enable github flavored markdown.\\n\\n       --breaks\\n              Enable GFM line breaks. Only works with the gfm option.\\n\\n       --sanitize\\n              Sanitize output. Ignore any HTML input.\\n\\n       --smart-lists\\n              Use smarter list behavior than the original markdown.\\n\\n       --lang-prefix [prefix]\\n              Set the prefix for code block classes.\\n\\n       --mangle\\n              Mangle email addresses.\\n\\n       --no-sanitize, -no-etc...\\n              The inverse of any of the marked options above.\\n\\n       --silent\\n              Silence error output.\\n\\n       -h, --help\\n              Display help information.\\n\\nCONFIGURATION\\n       For configuring and running programmatically.\\n\\n       Example\\n\\n           require('marked')('*foo*', { gfm: true });\\n\\nBUGS\\n       Please report any bugs to https://github.com/markedjs/marked.\\n\\nLICENSE\\n       Copyright (c) 2011-2014, Christopher Jeffrey (MIT License).\\n\\nSEE ALSO\\n       markdown(1), node.js(1)\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t     marked(1)\\n\\n[end of marked.1.txt]\\n[start of PUBLISHING.md]\\n# Releasing Marked\\n\\n- [ ] See [contributing](#/CONTRIBUTING.md)\\n- [ ] Create release branch from `master` (`release-x.y.z`)\\n- [ ] Submit PR with minimal name: Release x.y.z\\n- [ ] Complete PR checklists\\n\\n## Overall strategy\\n\\n**Master is always shippable:** We try to merge PRs in such a way that `master` is the only branch to really be concerned about *and* `master` can always be released. This allows smoother flow between new features, bug fixes, and so on. (Almost a continuous deployment setup, without automation.)\\n\\n## Versioning\\n\\nWe follow [semantic versioning](https://semver.org) where the following sequence is true `[major].[minor].[patch]`; therefore, consider the following implications of the release you are preparing:\\n\\n1. **Major:** There is at least one change not deemed backward compatible.\\n2. **Minor:** There is at least one new feature added to the release.\\n3. **Patch:** No breaking changes, no new features.\\n\\nWhat to expect while Marked is a zero-major (0.x.y):\\n\\n1. The major will remain at zero; thereby, alerting consumers to the potentially volatile nature of the package.\\n2. The minor will tend to be more analogous to a `major` release.\\n3. The patch will tend to be more analogous to a `minor` release or a collection of bug fixes (patches).\\n\\n[end of PUBLISHING.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "update-specs.js",
        "Bug_report.md",
        "release.md",
        "marked.1.txt",
        "PUBLISHING.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "e2bc827d-1cf3-43f4-9f57-9b1a70ef5dd7",
        "score": 0.01639344262295082,
        "payload": {
          "text": "const fetch = require('node-fetch');\nconst cheerio = require('cheerio');\nconst marked = require('../');\nconst htmlDiffer = require('./helpers/html-differ.js');\nconst fs = require('fs');\nconst path = require('path');\n\nfunction removeFiles(dir) {\n  fs.readdirSync(dir).forEach(file => {\n    fs.unlinkSync(path.join(dir, file));\n  });\n}\n\nasync function updateCommonmark(dir, options) {\n  try {\n    const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\n    const pkg = await res.json();\n    const version = pkg.version.replace(/^(\\d+\\.\\d+).*$/, '$1');\n    const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\n    const specs = await res2.json();\n    specs.forEach(spec => {\n      const html = marked(spec.markdown, options);\n      if (!htmlDiffer.isEqual(html, spec.html)) {\n        spec.shouldFail = true;\n      }\n    });\n    fs.writeFileSync(path.resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n    console.log(`Saved CommonMark v${version} specs`);\n  } catch (ex) {\n    console.log(ex);\n  }\n}\n\nasync function updateGfm(dir) {\n  try {\n    const res = await fetch('https://github.github.com/gfm/');\n    const html = await res.text();\n    const $ = cheerio.load(html);\n    const version = $('.version').text().match(/\\d+\\.\\d+/)[0];\n    if (!version) {\n      throw new Error('No version found');\n    }\n    const specs = [];\n    $('.extension').each((i, ext) => {\n      const section = $('.definition', ext).text().trim().replace(/^\\d+\\.\\d+(.*?) \\(extension\\)[\\s\\S]*$/, '$1');\n      $('.example', ext).each((j, exa) => {\n        const example = +$(exa).attr('id').replace(/\\D/g, '');\n        const markdown = $('.language-markdown', exa).text().trim();\n        const html = $('.language-html', exa).text().trim();\n        specs.push({\n          section: `[extension] ${section}`,\n          html,\n          markdown,\n          example\n        });\n      });\n    });\n\n    specs.forEach(spec => {\n      const html = marked(spec.markdown, { gfm: true, pedantic: false });\n      if (!htmlDiffer.isEqual(html, spec.html)) {\n        spec.shouldFail = true;\n      }\n    });\n    fs.writeFileSync(path.resolve(dir, `./gfm.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n    console.log(`Saved GFM v${version} specs.`);\n  } catch (ex) {\n    console.log(ex);\n  }\n}\n\nconst commonmarkDir = path.resolve(__dirname, './specs/commonmark');\nconst gfmDir = path.resolve(__dirname, './specs/gfm');\nremoveFiles(commonmarkDir);\nremoveFiles(gfmDir);\nupdateCommonmark(commonmarkDir, { gfm: false, pedantic: false, headerIds: false });\nupdateCommonmark(gfmDir, { gfm: true, pedantic: false, headerIds: false });\nupdateGfm(gfmDir);\n",
          "filepath": "data/repos/markedjs/marked-1.1/test/update-specs.js",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "9c19e5c8-694d-45f5-a235-a5ad403b4b98",
        "score": 0.016129032258064516,
        "payload": {
          "text": "---\nname: Bug report\nabout: Marked says it does this thing but does not\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\n<!--\n1. [Marked Demo](https://marked.js.org/demo/)\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\n-->\n\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\n<!--\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\n3. Actual output (or error) is...\n-->\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n",
          "filepath": "data/repos/markedjs/marked-1.1/.github/ISSUE_TEMPLATE/Bug_report.md",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "70727e78-433b-42e6-a726-ffceb86c4185",
        "score": 0.015873015873015872,
        "payload": {
          "text": "## Publisher\n\n- [ ] `$ npm version` has been run.\n- [ ] Release notes in [draft GitHub release](https://github.com/markedjs/marked/releases) are up to date\n- [ ] Release notes include which flavors and versions of Markdown are supported by this release\n- [ ] Committer checklist is complete.\n- [ ] Merge PR.\n- [ ] Publish GitHub release using `master` with correct version number.\n- [ ] `$ npm publish` has been run.\n- [ ] Create draft GitHub release to prepare next release.\n\nNote: If merges to `master` occur after submitting this PR and before running `$ npm pubish` you should be able to\n\n1. pull from `upstream/master` (`git pull upstream master`) into the branch holding this version,\n2. run `$ npm run build` to regenerate the `min` file, and\n3. commit and push the updated changes.\n\n## Committer\n\nIn most cases, this should be someone different than the publisher.\n\n- [ ] Version in `package.json` has been updated (see [PUBLISHING.md](https://github.com/markedjs/marked/blob/master/docs/PUBLISHING.md)).\n- [ ] The `marked.min.js` has been updated; or,\n- [ ] release does not change library.\n- [ ] CI is green (no forced merge required).\n",
          "filepath": "data/repos/markedjs/marked-1.1/.github/PULL_REQUEST_TEMPLATE/release.md",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "dfd270af-5083-45dd-9b47-ed39da100252",
        "score": 0.015625,
        "payload": {
          "text": "marked(1)\t\t    General Commands Manual\t\t     marked(1)\n\nNAME\n       marked - a javascript markdown parser\n\nSYNOPSIS\n       marked  [-o  <output>]  [-i  <input>]  [--help] [--tokens] [--pedantic]\n       [--gfm] [--breaks] [--sanitize]\t[--smart-lists]  [--lang-prefix  <pre-\n       fix>] [--no-etc...] [--silent] [filename]\n\n\nDESCRIPTION\n       marked is a full-featured javascript markdown parser, built for speed.\n       It also includes multiple GFM features.\n\nEXAMPLES\n       cat in.md | marked > out.html\n\n       echo \"hello *world*\" | marked\n\n       marked -o out.html -i in.md --gfm\n\n       marked --output=\"hello world.html\" -i in.md --no-breaks\n\nOPTIONS\n       -o, --output [output]\n              Specify file output. If none is specified, write to stdout.\n\n       -i, --input [input]\n              Specify file input, otherwise use last argument as input file.\n              If no input file is specified, read from stdin.\n\n       --test Makes sure the test(s) pass.\n\n              --glob [file] Specify which test to use.\n\n              --fix Fixes tests.\n\n              --bench Benchmarks the test(s).\n\n              --time Times The test(s).\n\n              --minified Runs test file(s) as minified.\n\n              --stop Stop process if a test fails.\n\n       -t, --tokens\n              Output a token stream instead of html.\n\n       --pedantic\n              Conform to obscure parts of markdown.pl as much as possible.\n              Don't fix original markdown bugs.\n\n       --gfm  Enable github flavored markdown.\n\n       --breaks\n              Enable GFM line breaks. Only works with the gfm option.\n\n       --sanitize\n              Sanitize output. Ignore any HTML input.\n\n       --smart-lists\n              Use smarter list behavior than the original markdown.\n\n       --lang-prefix [prefix]\n              Set the prefix for code block classes.\n\n       --mangle\n              Mangle email addresses.\n\n       --no-sanitize, -no-etc...\n              The inverse of any of the marked options above.\n\n       --silent\n              Silence error output.\n\n       -h, --help\n              Display help information.\n\nCONFIGURATION\n       For configuring and running programmatically.\n\n       Example\n\n           require('marked')('*foo*', { gfm: true });\n\nBUGS\n       Please report any bugs to https://github.com/markedjs/marked.\n\nLICENSE\n       Copyright (c) 2011-2014, Christopher Jeffrey (MIT License).\n\nSEE ALSO\n       markdown(1), node.js(1)\n\n\t\t\t\t\t\t\t\t     marked(1)\n",
          "filepath": "data/repos/markedjs/marked-1.1/man/marked.1.txt",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "21f4b974-5d41-466c-875e-c362dadfbc7c",
        "score": 0.015384615384615385,
        "payload": {
          "text": "# Releasing Marked\n\n- [ ] See [contributing](#/CONTRIBUTING.md)\n- [ ] Create release branch from `master` (`release-x.y.z`)\n- [ ] Submit PR with minimal name: Release x.y.z\n- [ ] Complete PR checklists\n\n## Overall strategy\n\n**Master is always shippable:** We try to merge PRs in such a way that `master` is the only branch to really be concerned about *and* `master` can always be released. This allows smoother flow between new features, bug fixes, and so on. (Almost a continuous deployment setup, without automation.)\n\n## Versioning\n\nWe follow [semantic versioning](https://semver.org) where the following sequence is true `[major].[minor].[patch]`; therefore, consider the following implications of the release you are preparing:\n\n1. **Major:** There is at least one change not deemed backward compatible.\n2. **Minor:** There is at least one new feature added to the release.\n3. **Patch:** No breaking changes, no new features.\n\nWhat to expect while Marked is a zero-major (0.x.y):\n\n1. The major will remain at zero; thereby, alerting consumers to the potentially volatile nature of the package.\n2. The minor will tend to be more analogous to a `major` release.\n3. The patch will tend to be more analogous to a `minor` release or a collection of bug fixes (patches).\n",
          "filepath": "data/repos/markedjs/marked-1.1/docs/PUBLISHING.md",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1683",
    "model_patch": "diff --git a/marked.esm.js b/marked.esm.js\n--- a/marked.esm.js\n+++ b/marked.esm.js\n@@ -492,7 +492,7 @@\n       raw: cap[0],\n       href,\n       title,\n-      text: escape$1(cap[1])\n+      text: cap[1].replace(/\\\\([\\[\\]])/g, '$1')\n     };\n   }\n }",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 169.86,
      "issue_embedding_time_ms": 169.86,
      "retrieval_time_ms_splade": 8.77,
      "retrieval_time_ms": 8.77,
      "total_retrieval_time_ms": 178.63,
      "generation_time_ms": 1801.22,
      "total_io_time_ms": 1979.86,
      "input_total_token_limit": null,
      "issue_text_tokens": 786,
      "vlm_tokens": 0,
      "retrieved_tokens": 10372,
      "prompt_template_tokens": 517,
      "total_input_prompt_tokens": 11675,
      "output_generated_tokens": 96,
      "total_io_tokens": 11771,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nAlt text with escaped characters breaks image links\\nI'm not sure if this is a bug or not, but I would love any suggestions on how to resolve if possible.\\r\\n\\r\\nI have a situation where image links are not rendering as I would expect because the Alt text part of the image contains escaped square bracket characters.\\r\\n\\r\\nFor example:\\r\\n\\r\\n```md\\r\\n[![\\\\[Manny Pacquiao\\\\]](https://img.youtube.com/vi/s6bCmZmy9aQ/0.jpg)](https://youtu.be/s6bCmZmy9aQ)\\r\\n```\\r\\n\\r\\nThis results in the following:\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/10571313/82298114-bd52f300-9a07-11ea-805b-854f69d2ecb0.png)\\r\\n\\r\\n[Here](https://marked.js.org/demo/?text=%23%20Expected%20result%0A%0A%5B!%5BManny%20Pacquiao%5D(https%3A%2F%2Fimg.youtube.com%2Fvi%2Fs6bCmZmy9aQ%2F0.jpg%20%22manny%22)%5D(https%3A%2F%2Fyoutu.be%2Fs6bCmZmy9aQ)%0A%0A%23%20Actual%20result%0A%0A%5B!%5B%5C%5BManny%20Pacquiao%5C%5D%5D(https%3A%2F%2Fimg.youtube.com%2Fvi%2Fs6bCmZmy9aQ%2F0.jpg%20%22manny%22)%5D(https%3A%2F%2Fyoutu.be%2Fs6bCmZmy9aQ)%0A%0A%0A&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20true%2C%0A%20%22gfm%22%3A%20true%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22walkTokens%22%3A%20null%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=master) is the demo page with examples.\\r\\n\\r\\nI don't mind creating a pull request, but I'd love any pointers as to where this problem lies.\\n\\n</issue>\\n\\n<code>\\n[start of USING_PRO.md]\\n## Extending Marked\\n\\nTo champion the single-responsibility and open/closed principles, we have tried to make it relatively painless to extend marked. If you are looking to add custom functionality, this is the place to start.\\n\\n<h2 id=\\\"use\\\">marked.use()</h2>\\n\\n`marked.use(options)` is the recommended way to extend marked. The options object can contain any [option](#/USING_ADVANCED.md#options) available in marked.\\n\\nThe `renderer` and `tokenizer` options can be an object with functions that will be merged into the `renderer` and `tokenizer` respectively.\\n\\nThe `renderer` and `tokenizer` functions can return false to fallback to the previous function.\\n\\nThe `walkTokens` option can be a function that will be called with every token before rendering. When calling `use` multiple times with different `walkTokens` functions each function will be called in the **reverse** order in which they were assigned.\\n\\nAll other options will overwrite previously set options.\\n\\n<h2 id=\\\"renderer\\\">The renderer</h2>\\n\\nThe renderer defines the output of the parser.\\n\\n**Example:** Overriding default heading token by adding an embedded anchor tag like on GitHub.\\n\\n```js\\n// Create reference instance\\nconst marked = require('marked');\\n\\n// Override function\\nconst renderer = {\\n  heading(text, level) {\\n    const escapedText = text.toLowerCase().replace(/[^\\\\w]+/g, '-');\\n\\n    return `\\n            <h${level}>\\n              <a name=\\\"${escapedText}\\\" class=\\\"anchor\\\" href=\\\"#${escapedText}\\\">\\n                <span class=\\\"header-link\\\"></span>\\n              </a>\\n              ${text}\\n            </h${level}>`;\\n  }\\n};\\n\\nmarked.use({ renderer });\\n\\n// Run marked\\nconsole.log(marked('# heading+'));\\n```\\n\\n**Output:**\\n\\n```html\\n<h1>\\n  <a name=\\\"heading-\\\" class=\\\"anchor\\\" href=\\\"#heading-\\\">\\n    <span class=\\\"header-link\\\"></span>\\n  </a>\\n  heading+\\n</h1>\\n```\\n\\n### Block level renderer methods\\n\\n- code(*string* code, *string* infostring, *boolean* escaped)\\n- blockquote(*string* quote)\\n- html(*string* html)\\n- heading(*string* text, *number* level, *string* raw, *Slugger* slugger)\\n- hr()\\n- list(*string* body, *boolean* ordered, *number* start)\\n- listitem(*string* text, *boolean* task, *boolean* checked)\\n- checkbox(*boolean* checked)\\n- paragraph(*string* text)\\n- table(*string* header, *string* body)\\n- tablerow(*string* content)\\n- tablecell(*string* content, *object* flags)\\n\\n`slugger` has the `slug` method to create a unique id from value:\\n\\n```js\\nslugger.slug('foo')   // foo\\nslugger.slug('foo')   // foo-1\\nslugger.slug('foo')   // foo-2\\nslugger.slug('foo 1') // foo-1-1\\nslugger.slug('foo-1') // foo-1-2\\n...\\n```\\n\\n`flags` has the following properties:\\n\\n```js\\n{\\n    header: true || false,\\n    align: 'center' || 'left' || 'right'\\n}\\n```\\n\\n### Inline level renderer methods\\n\\n- strong(*string* text)\\n- em(*string* text)\\n- codespan(*string* code)\\n- br()\\n- del(*string* text)\\n- link(*string* href, *string* title, *string* text)\\n- image(*string* href, *string* title, *string* text)\\n- text(*string* text)\\n\\n<h2 id=\\\"tokenizer\\\">The tokenizer</h2>\\n\\nThe tokenizer defines how to turn markdown text into tokens.\\n\\n**Example:** Overriding default `codespan` tokenizer to include LaTeX.\\n\\n```js\\n// Create reference instance\\nconst marked = require('marked');\\n\\n// Override function\\nconst tokenizer = {\\n  codespan(src) {\\n    const match = src.match(/\\\\$+([^\\\\$\\\\n]+?)\\\\$+/);\\n    if (match) {\\n      return {\\n        type: 'codespan',\\n        raw: match[0],\\n        text: match[1].trim()\\n      };\\n    }\\n\\n    // return false to use original codespan tokenizer\\n    return false;\\n  }\\n};\\n\\nmarked.use({ tokenizer });\\n\\n// Run marked\\nconsole.log(marked('$ latex code $\\\\n\\\\n` other code `'));\\n```\\n\\n**Output:**\\n\\n```html\\n<p><code>latex code</code></p>\\n<p><code>other code</code></p>\\n```\\n\\n### Block level tokenizer methods\\n\\n- space(*string* src)\\n- code(*string* src, *array* tokens)\\n- fences(*string* src)\\n- heading(*string* src)\\n- nptable(*string* src)\\n- hr(*string* src)\\n- blockquote(*string* src)\\n- list(*string* src)\\n- html(*string* src)\\n- def(*string* src)\\n- table(*string* src)\\n- lheading(*string* src)\\n- paragraph(*string* src)\\n- text(*string* src, *array* tokens)\\n\\n### Inline level tokenizer methods\\n\\n- escape(*string* src)\\n- tag(*string* src, *bool* inLink, *bool* inRawBlock)\\n- link(*string* src)\\n- reflink(*string* src, *object* links)\\n- strong(*string* src)\\n- em(*string* src)\\n- codespan(*string* src)\\n- br(*string* src)\\n- del(*string* src)\\n- autolink(*string* src, *function* mangle)\\n- url(*string* src, *function* mangle)\\n- inlineText(*string* src, *bool* inRawBlock, *function* smartypants)\\n\\n`mangle` is a method that changes text to HTML character references:\\n\\n```js\\nmangle('test@example.com')\\n// \\\"&#x74;&#101;&#x73;&#116;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#x63;&#111;&#x6d;\\\"\\n```\\n\\n`smartypants` is a method that translates plain ASCII punctuation characters into \\u201csmart\\u201d typographic punctuation HTML entities:\\n\\nhttps://daringfireball.net/projects/smartypants/\\n\\n```js\\nsmartypants('\\\"this ... string\\\"')\\n// \\\"\\u201cthis \\u2026 string\\u201d\\\"\\n```\\n\\n<h2 id=\\\"walk-tokens\\\">Walk Tokens</h2>\\n\\nThe walkTokens function gets called with every token. Child tokens are called before moving on to sibling tokens. Each token is passed by reference so updates are persisted when passed to the parser. The return value of the function is ignored.\\n\\n**Example:** Overriding heading tokens to start at h2.\\n\\n```js\\nconst marked = require('marked');\\n\\n// Override function\\nconst walkTokens = (token) => {\\n  if (token.type === 'heading') {\\n    token.depth += 1;\\n  }\\n};\\n\\nmarked.use({ walkTokens });\\n\\n// Run marked\\nconsole.log(marked('# heading 2\\\\n\\\\n## heading 3'));\\n```\\n\\n**Output:**\\n\\n```html\\n<h2 id=\\\"heading-2\\\">heading 2</h2>\\n<h3 id=\\\"heading-3\\\">heading 3</h3>\\n```\\n\\n<h2 id=\\\"lexer\\\">The lexer</h2>\\n\\nThe lexer takes a markdown string and calls the tokenizer functions.\\n\\n<h2 id=\\\"parser\\\">The parser</h2>\\n\\nThe parser takes tokens as input and calls the renderer functions.\\n\\n***\\n\\n<h2 id=\\\"extend\\\">Access to lexer and parser</h2>\\n\\nYou also have direct access to the lexer and parser if you so desire.\\n\\n``` js\\nconst tokens = marked.lexer(markdown, options);\\nconsole.log(marked.parser(tokens, options));\\n```\\n\\n``` js\\nconst lexer = new marked.Lexer(options);\\nconst tokens = lexer.lex(markdown);\\nconsole.log(tokens);\\nconsole.log(lexer.tokenizer.rules.block); // block level rules used\\nconsole.log(lexer.tokenizer.rules.inline); // inline level rules used\\nconsole.log(marked.Lexer.rules.block); // all block level rules\\nconsole.log(marked.Lexer.rules.inline); // all inline level rules\\n```\\n\\n``` bash\\n$ node\\n> require('marked').lexer('> I am using marked.')\\n[\\n  {\\n    type: \\\"blockquote\\\",\\n    raw: \\\"> I am using marked.\\\",\\n    tokens: [\\n      {\\n        type: \\\"paragraph\\\",\\n        raw: \\\"I am using marked.\\\",\\n        text: \\\"I am using marked.\\\",\\n        tokens: [\\n          {\\n            type: \\\"text\\\",\\n            raw: \\\"I am using marked.\\\",\\n            text: \\\"I am using marked.\\\"\\n          }\\n        ]\\n      }\\n    ]\\n  },\\n  links: {}\\n]\\n```\\n\\nThe Lexer builds an array of tokens, which will be passed to the Parser.\\nThe Parser processes each token in the token array:\\n\\n``` js\\nconst marked = require('marked');\\n\\nconst md = `\\n  # heading\\n\\n  [link][1]\\n\\n  [1]: #heading \\\"heading\\\"\\n`;\\n\\nconst tokens = marked.lexer(md);\\nconsole.log(tokens);\\n\\nconst html = marked.parser(tokens);\\nconsole.log(html);\\n```\\n\\n``` bash\\n[\\n  {\\n    type: \\\"heading\\\",\\n    raw: \\\"  # heading\\\\n\\\\n\\\",\\n    depth: 1,\\n    text: \\\"heading\\\",\\n    tokens: [\\n      {\\n        type: \\\"text\\\",\\n        raw: \\\"heading\\\",\\n        text: \\\"heading\\\"\\n      }\\n    ]\\n  },\\n  {\\n    type: \\\"paragraph\\\",\\n    raw: \\\"  [link][1]\\\",\\n    text: \\\"  [link][1]\\\",\\n    tokens: [\\n      {\\n        type: \\\"text\\\",\\n        raw: \\\"  \\\",\\n        text: \\\"  \\\"\\n      },\\n      {\\n        type: \\\"link\\\",\\n        raw: \\\"[link][1]\\\",\\n        text: \\\"link\\\",\\n        href: \\\"#heading\\\",\\n        title: \\\"heading\\\",\\n        tokens: [\\n          {\\n            type: \\\"text\\\",\\n            raw: \\\"link\\\",\\n            text: \\\"link\\\"\\n          }\\n        ]\\n      }\\n    ]\\n  },\\n  {\\n    type: \\\"space\\\",\\n    raw: \\\"\\\\n\\\\n\\\"\\n  },\\n  links: {\\n    \\\"1\\\": {\\n      href: \\\"#heading\\\",\\n      title: \\\"heading\\\"\\n    }\\n  }\\n]\\n<h1 id=\\\"heading\\\">heading</h1>\\n<p>  <a href=\\\"#heading\\\" title=\\\"heading\\\">link</a></p>\\n```\\n\\n[end of USING_PRO.md]\\n[start of update-specs.js]\\nconst fetch = require('node-fetch');\\nconst cheerio = require('cheerio');\\nconst marked = require('../');\\nconst htmlDiffer = require('./helpers/html-differ.js');\\nconst fs = require('fs');\\nconst path = require('path');\\n\\nfunction removeFiles(dir) {\\n  fs.readdirSync(dir).forEach(file => {\\n    fs.unlinkSync(path.join(dir, file));\\n  });\\n}\\n\\nasync function updateCommonmark(dir, options) {\\n  try {\\n    const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\\n    const pkg = await res.json();\\n    const version = pkg.version.replace(/^(\\\\d+\\\\.\\\\d+).*$/, '$1');\\n    const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\\n    const specs = await res2.json();\\n    specs.forEach(spec => {\\n      const html = marked(spec.markdown, options);\\n      if (!htmlDiffer.isEqual(html, spec.html)) {\\n        spec.shouldFail = true;\\n      }\\n    });\\n    fs.writeFileSync(path.resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\\\n');\\n    console.log(`Saved CommonMark v${version} specs`);\\n  } catch (ex) {\\n    console.log(ex);\\n  }\\n}\\n\\nasync function updateGfm(dir) {\\n  try {\\n    const res = await fetch('https://github.github.com/gfm/');\\n    const html = await res.text();\\n    const $ = cheerio.load(html);\\n    const version = $('.version').text().match(/\\\\d+\\\\.\\\\d+/)[0];\\n    if (!version) {\\n      throw new Error('No version found');\\n    }\\n    const specs = [];\\n    $('.extension').each((i, ext) => {\\n      const section = $('.definition', ext).text().trim().replace(/^\\\\d+\\\\.\\\\d+(.*?) \\\\(extension\\\\)[\\\\s\\\\S]*$/, '$1');\\n      $('.example', ext).each((j, exa) => {\\n        const example = +$(exa).attr('id').replace(/\\\\D/g, '');\\n        const markdown = $('.language-markdown', exa).text().trim();\\n        const html = $('.language-html', exa).text().trim();\\n        specs.push({\\n          section: `[extension] ${section}`,\\n          html,\\n          markdown,\\n          example\\n        });\\n      });\\n    });\\n\\n    specs.forEach(spec => {\\n      const html = marked(spec.markdown, { gfm: true, pedantic: false });\\n      if (!htmlDiffer.isEqual(html, spec.html)) {\\n        spec.shouldFail = true;\\n      }\\n    });\\n    fs.writeFileSync(path.resolve(dir, `./gfm.${version}.json`), JSON.stringify(specs, null, 2) + '\\\\n');\\n    console.log(`Saved GFM v${version} specs.`);\\n  } catch (ex) {\\n    console.log(ex);\\n  }\\n}\\n\\nconst commonmarkDir = path.resolve(__dirname, './specs/commonmark');\\nconst gfmDir = path.resolve(__dirname, './specs/gfm');\\nremoveFiles(commonmarkDir);\\nremoveFiles(gfmDir);\\nupdateCommonmark(commonmarkDir, { gfm: false, pedantic: false, headerIds: false });\\nupdateCommonmark(gfmDir, { gfm: true, pedantic: false, headerIds: false });\\nupdateGfm(gfmDir);\\n\\n[end of update-specs.js]\\n[start of marked.esm.js]\\n/**\\n * marked - a markdown parser\\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n\\n/**\\n * DO NOT EDIT THIS FILE\\n * The code in this file is generated from files in ./src/\\n */\\n\\nfunction createCommonjsModule(fn, module) {\\n\\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\\n}\\n\\nvar defaults = createCommonjsModule(function (module) {\\nfunction getDefaults() {\\n  return {\\n    baseUrl: null,\\n    breaks: false,\\n    gfm: true,\\n    headerIds: true,\\n    headerPrefix: '',\\n    highlight: null,\\n    langPrefix: 'language-',\\n    mangle: true,\\n    pedantic: false,\\n    renderer: null,\\n    sanitize: false,\\n    sanitizer: null,\\n    silent: false,\\n    smartLists: false,\\n    smartypants: false,\\n    tokenizer: null,\\n    walkTokens: null,\\n    xhtml: false\\n  };\\n}\\n\\nfunction changeDefaults(newDefaults) {\\n  module.exports.defaults = newDefaults;\\n}\\n\\nmodule.exports = {\\n  defaults: getDefaults(),\\n  getDefaults,\\n  changeDefaults\\n};\\n});\\nvar defaults_1 = defaults.defaults;\\nvar defaults_2 = defaults.getDefaults;\\nvar defaults_3 = defaults.changeDefaults;\\n\\n/**\\n * Helpers\\n */\\nconst escapeTest = /[&<>\\\"']/;\\nconst escapeReplace = /[&<>\\\"']/g;\\nconst escapeTestNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/;\\nconst escapeReplaceNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/g;\\nconst escapeReplacements = {\\n  '&': '&amp;',\\n  '<': '&lt;',\\n  '>': '&gt;',\\n  '\\\"': '&quot;',\\n  \\\"'\\\": '&#39;'\\n};\\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\\nfunction escape(html, encode) {\\n  if (encode) {\\n    if (escapeTest.test(html)) {\\n      return html.replace(escapeReplace, getEscapeReplacement);\\n    }\\n  } else {\\n    if (escapeTestNoEncode.test(html)) {\\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\\n    }\\n  }\\n\\n  return html;\\n}\\n\\nconst unescapeTest = /&(#(?:\\\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\\\w+));?/ig;\\n\\nfunction unescape(html) {\\n  // explicitly match decimal, hex, and named HTML entities\\n  return html.replace(unescapeTest, (_, n) => {\\n    n = n.toLowerCase();\\n    if (n === 'colon') return ':';\\n    if (n.charAt(0) === '#') {\\n      return n.charAt(1) === 'x'\\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\\n        : String.fromCharCode(+n.substring(1));\\n    }\\n    return '';\\n  });\\n}\\n\\nconst caret = /(^|[^\\\\[])\\\\^/g;\\nfunction edit(regex, opt) {\\n  regex = regex.source || regex;\\n  opt = opt || '';\\n  const obj = {\\n    replace: (name, val) => {\\n      val = val.source || val;\\n      val = val.replace(caret, '$1');\\n      regex = regex.replace(name, val);\\n      return obj;\\n    },\\n    getRegex: () => {\\n      return new RegExp(regex, opt);\\n    }\\n  };\\n  return obj;\\n}\\n\\nconst nonWordAndColonTest = /[^\\\\w:]/g;\\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\\nfunction cleanUrl(sanitize, base, href) {\\n  if (sanitize) {\\n    let prot;\\n    try {\\n      prot = decodeURIComponent(unescape(href))\\n        .replace(nonWordAndColonTest, '')\\n        .toLowerCase();\\n    } catch (e) {\\n      return null;\\n    }\\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\\n      return null;\\n    }\\n  }\\n  if (base && !originIndependentUrl.test(href)) {\\n    href = resolveUrl(base, href);\\n  }\\n  try {\\n    href = encodeURI(href).replace(/%25/g, '%');\\n  } catch (e) {\\n    return null;\\n  }\\n  return href;\\n}\\n\\nconst baseUrls = {};\\nconst justDomain = /^[^:]+:\\\\/*[^/]*$/;\\nconst protocol = /^([^:]+:)[\\\\s\\\\S]*$/;\\nconst domain = /^([^:]+:\\\\/*[^/]*)[\\\\s\\\\S]*$/;\\n\\nfunction resolveUrl(base, href) {\\n  if (!baseUrls[' ' + base]) {\\n    // we can ignore everything in base after the last slash of its path component,\\n    // but we might need to add _that_\\n    // https://tools.ietf.org/html/rfc3986#section-3\\n    if (justDomain.test(base)) {\\n      baseUrls[' ' + base] = base + '/';\\n    } else {\\n      baseUrls[' ' + base] = rtrim(base, '/', true);\\n    }\\n  }\\n  base = baseUrls[' ' + base];\\n  const relativeBase = base.indexOf(':') === -1;\\n\\n  if (href.substring(0, 2) === '//') {\\n    if (relativeBase) {\\n      return href;\\n    }\\n    return base.replace(protocol, '$1') + href;\\n  } else if (href.charAt(0) === '/') {\\n    if (relativeBase) {\\n      return href;\\n    }\\n    return base.replace(domain, '$1') + href;\\n  } else {\\n    return base + href;\\n  }\\n}\\n\\nconst noopTest = { exec: function noopTest() {} };\\n\\nfunction merge(obj) {\\n  let i = 1,\\n    target,\\n    key;\\n\\n  for (; i < arguments.length; i++) {\\n    target = arguments[i];\\n    for (key in target) {\\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\\n        obj[key] = target[key];\\n      }\\n    }\\n  }\\n\\n  return obj;\\n}\\n\\nfunction splitCells(tableRow, count) {\\n  // ensure that every cell-delimiting pipe has a space\\n  // before it to distinguish it from an escaped pipe\\n  const row = tableRow.replace(/\\\\|/g, (match, offset, str) => {\\n      let escaped = false,\\n        curr = offset;\\n      while (--curr >= 0 && str[curr] === '\\\\\\\\') escaped = !escaped;\\n      if (escaped) {\\n        // odd number of slashes means | is escaped\\n        // so we leave it alone\\n        return '|';\\n      } else {\\n        // add space before unescaped |\\n        return ' |';\\n      }\\n    }),\\n    cells = row.split(/ \\\\|/);\\n  let i = 0;\\n\\n  if (cells.length > count) {\\n    cells.splice(count);\\n  } else {\\n    while (cells.length < count) cells.push('');\\n  }\\n\\n  for (; i < cells.length; i++) {\\n    // leading or trailing whitespace is ignored per the gfm spec\\n    cells[i] = cells[i].trim().replace(/\\\\\\\\\\\\|/g, '|');\\n  }\\n  return cells;\\n}\\n\\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\\n// /c*$/ is vulnerable to REDOS.\\n// invert: Remove suffix of non-c chars instead. Default falsey.\\nfunction rtrim(str, c, invert) {\\n  const l = str.length;\\n  if (l === 0) {\\n    return '';\\n  }\\n\\n  // Length of suffix matching the invert condition.\\n  let suffLen = 0;\\n\\n  // Step left until we fail to match the invert condition.\\n  while (suffLen < l) {\\n    const currChar = str.charAt(l - suffLen - 1);\\n    if (currChar === c && !invert) {\\n      suffLen++;\\n    } else if (currChar !== c && invert) {\\n      suffLen++;\\n    } else {\\n      break;\\n    }\\n  }\\n\\n  return str.substr(0, l - suffLen);\\n}\\n\\nfunction findClosingBracket(str, b) {\\n  if (str.indexOf(b[1]) === -1) {\\n    return -1;\\n  }\\n  const l = str.length;\\n  let level = 0,\\n    i = 0;\\n  for (; i < l; i++) {\\n    if (str[i] === '\\\\\\\\') {\\n      i++;\\n    } else if (str[i] === b[0]) {\\n      level++;\\n    } else if (str[i] === b[1]) {\\n      level--;\\n      if (level < 0) {\\n        return i;\\n      }\\n    }\\n  }\\n  return -1;\\n}\\n\\nfunction checkSanitizeDeprecation(opt) {\\n  if (opt && opt.sanitize && !opt.silent) {\\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\\n  }\\n}\\n\\nvar helpers = {\\n  escape,\\n  unescape,\\n  edit,\\n  cleanUrl,\\n  resolveUrl,\\n  noopTest,\\n  merge,\\n  splitCells,\\n  rtrim,\\n  findClosingBracket,\\n  checkSanitizeDeprecation\\n};\\n\\nconst { defaults: defaults$1 } = defaults;\\nconst {\\n  rtrim: rtrim$1,\\n  splitCells: splitCells$1,\\n  escape: escape$1,\\n  findClosingBracket: findClosingBracket$1\\n} = helpers;\\n\\nfunction outputLink(cap, link, raw) {\\n  const href = link.href;\\n  const title = link.title ? escape$1(link.title) : null;\\n\\n  if (cap[0].charAt(0) !== '!') {\\n    return {\\n      type: 'link',\\n      raw,\\n      href,\\n      title,\\n      text: cap[1]\\n    };\\n  } else {\\n    return {\\n      type: 'image',\\n      raw,\\n      text: escape$1(cap[1]),\\n      href,\\n      title\\n    };\\n  }\\n}\\n\\nfunction indentCodeCompensation(raw, text) {\\n  const matchIndentToCode = raw.match(/^(\\\\s+)(?:```)/);\\n\\n  if (matchIndentToCode === null) {\\n    return text;\\n  }\\n\\n  const indentToCode = matchIndentToCode[1];\\n\\n  return text\\n    .split('\\\\n')\\n    .map(node => {\\n      const matchIndentInNode = node.match(/^\\\\s+/);\\n      if (matchIndentInNode === null) {\\n        return node;\\n      }\\n\\n      const [indentInNode] = matchIndentInNode;\\n\\n      if (indentInNode.length >= indentToCode.length) {\\n        return node.slice(indentToCode.length);\\n      }\\n\\n      return node;\\n    })\\n    .join('\\\\n');\\n}\\n\\n/**\\n * Tokenizer\\n */\\nvar Tokenizer_1 = class Tokenizer {\\n  constructor(options) {\\n    this.options = options || defaults$1;\\n  }\\n\\n  space(src) {\\n    const cap = this.rules.block.newline.exec(src);\\n    if (cap) {\\n      if (cap[0].length > 1) {\\n        return {\\n          type: 'space',\\n          raw: cap[0]\\n        };\\n      }\\n      return { raw: '\\\\n' };\\n    }\\n  }\\n\\n  code(src, tokens) {\\n    const cap = this.rules.block.code.exec(src);\\n    if (cap) {\\n      const lastToken = tokens[tokens.length - 1];\\n      // An indented code block cannot interrupt a paragraph.\\n      if (lastToken && lastToken.type === 'paragraph') {\\n        return {\\n          raw: cap[0],\\n          text: cap[0].trimRight()\\n        };\\n      }\\n\\n      const text = cap[0].replace(/^ {4}/gm, '');\\n      return {\\n        type: 'code',\\n        raw: cap[0],\\n        codeBlockStyle: 'indented',\\n        text: !this.options.pedantic\\n          ? rtrim$1(text, '\\\\n')\\n          : text\\n      };\\n    }\\n  }\\n\\n  fences(src) {\\n    const cap = this.rules.block.fences.exec(src);\\n    if (cap) {\\n      const raw = cap[0];\\n      const text = indentCodeCompensation(raw, cap[3] || '');\\n\\n      return {\\n        type: 'code',\\n        raw,\\n        lang: cap[2] ? cap[2].trim() : cap[2],\\n        text\\n      };\\n    }\\n  }\\n\\n  heading(src) {\\n    const cap = this.rules.block.heading.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[1].length,\\n        text: cap[2]\\n      };\\n    }\\n  }\\n\\n  nptable(src) {\\n    const cap = this.rules.block.nptable.exec(src);\\n    if (cap) {\\n      const item = {\\n        type: 'table',\\n        header: splitCells$1(cap[1].replace(/^ *| *\\\\| *$/g, '')),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        cells: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : [],\\n        raw: cap[0]\\n      };\\n\\n      if (item.header.length === item.align.length) {\\n        let l = item.align.length;\\n        let i;\\n        for (i = 0; i < l; i++) {\\n          if (/^ *-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'right';\\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'center';\\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\\n            item.align[i] = 'left';\\n          } else {\\n            item.align[i] = null;\\n          }\\n        }\\n\\n        l = item.cells.length;\\n        for (i = 0; i < l; i++) {\\n          item.cells[i] = splitCells$1(item.cells[i], item.header.length);\\n        }\\n\\n        return item;\\n      }\\n    }\\n  }\\n\\n  hr(src) {\\n    const cap = this.rules.block.hr.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'hr',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  blockquote(src) {\\n    const cap = this.rules.block.blockquote.exec(src);\\n    if (cap) {\\n      const text = cap[0].replace(/^ *> ?/gm, '');\\n\\n      return {\\n        type: 'blockquote',\\n        raw: cap[0],\\n        text\\n      };\\n    }\\n  }\\n\\n  list(src) {\\n    const cap = this.rules.block.list.exec(src);\\n    if (cap) {\\n      let raw = cap[0];\\n      const bull = cap[2];\\n      const isordered = bull.length > 1;\\n\\n      const list = {\\n        type: 'list',\\n        raw,\\n        ordered: isordered,\\n        start: isordered ? +bull : '',\\n        loose: false,\\n        items: []\\n      };\\n\\n      // Get each top-level item.\\n      const itemMatch = cap[0].match(this.rules.block.item);\\n\\n      let next = false,\\n        item,\\n        space,\\n        b,\\n        addBack,\\n        loose,\\n        istask,\\n        ischecked;\\n\\n      const l = itemMatch.length;\\n      for (let i = 0; i < l; i++) {\\n        item = itemMatch[i];\\n        raw = item;\\n\\n        // Remove the list item's bullet\\n        // so it is seen as the next token.\\n        space = item.length;\\n        item = item.replace(/^ *([*+-]|\\\\d+\\\\.) */, '');\\n\\n        // Outdent whatever the\\n        // list item contains. Hacky.\\n        if (~item.indexOf('\\\\n ')) {\\n          space -= item.length;\\n          item = !this.options.pedantic\\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\\n            : item.replace(/^ {1,4}/gm, '');\\n        }\\n\\n        // Determine whether the next list item belongs here.\\n        // Backpedal if it does not belong in this list.\\n        if (i !== l - 1) {\\n          b = this.rules.block.bullet.exec(itemMatch[i + 1])[0];\\n          if (bull.length > 1 ? b.length === 1\\n            : (b.length > 1 || (this.options.smartLists && b !== bull))) {\\n            addBack = itemMatch.slice(i + 1).join('\\\\n');\\n            list.raw = list.raw.substring(0, list.raw.length - addBack.length);\\n            i = l - 1;\\n          }\\n        }\\n\\n        // Determine whether item is loose or not.\\n        // Use: /(^|\\\\n)(?! )[^\\\\n]+\\\\n\\\\n(?!\\\\s*$)/\\n        // for discount behavior.\\n        loose = next || /\\\\n\\\\n(?!\\\\s*$)/.test(item);\\n        if (i !== l - 1) {\\n          next = item.charAt(item.length - 1) === '\\\\n';\\n          if (!loose) loose = next;\\n        }\\n\\n        if (loose) {\\n          list.loose = true;\\n        }\\n\\n        // Check for task list items\\n        istask = /^\\\\[[ xX]\\\\] /.test(item);\\n        ischecked = undefined;\\n        if (istask) {\\n          ischecked = item[1] !== ' ';\\n          item = item.replace(/^\\\\[[ xX]\\\\] +/, '');\\n        }\\n\\n        list.items.push({\\n          type: 'list_item',\\n          raw,\\n          task: istask,\\n          checked: ischecked,\\n          loose: loose,\\n          text: item\\n        });\\n      }\\n\\n      return list;\\n    }\\n  }\\n\\n  html(src) {\\n    const cap = this.rules.block.html.exec(src);\\n    if (cap) {\\n      return {\\n        type: this.options.sanitize\\n          ? 'paragraph'\\n          : 'html',\\n        raw: cap[0],\\n        pre: !this.options.sanitizer\\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\\n        text: this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape$1(cap[0])) : cap[0]\\n      };\\n    }\\n  }\\n\\n  def(src) {\\n    const cap = this.rules.block.def.exec(src);\\n    if (cap) {\\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\\n      const tag = cap[1].toLowerCase().replace(/\\\\s+/g, ' ');\\n      return {\\n        tag,\\n        raw: cap[0],\\n        href: cap[2],\\n        title: cap[3]\\n      };\\n    }\\n  }\\n\\n  table(src) {\\n    const cap = this.rules.block.table.exec(src);\\n    if (cap) {\\n      const item = {\\n        type: 'table',\\n        header: splitCells$1(cap[1].replace(/^ *| *\\\\| *$/g, '')),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        cells: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : []\\n      };\\n\\n      if (item.header.length === item.align.length) {\\n        item.raw = cap[0];\\n\\n        let l = item.align.length;\\n        let i;\\n        for (i = 0; i < l; i++) {\\n          if (/^ *-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'right';\\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'center';\\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\\n            item.align[i] = 'left';\\n          } else {\\n            item.align[i] = null;\\n          }\\n        }\\n\\n        l = item.cells.length;\\n        for (i = 0; i < l; i++) {\\n          item.cells[i] = splitCells$1(\\n            item.cells[i].replace(/^ *\\\\| *| *\\\\| *$/g, ''),\\n            item.header.length);\\n        }\\n\\n        return item;\\n      }\\n    }\\n  }\\n\\n  lheading(src) {\\n    const cap = this.rules.block.lheading.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\\n        text: cap[1]\\n      };\\n    }\\n  }\\n\\n  paragraph(src) {\\n    const cap = this.rules.block.paragraph.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'paragraph',\\n        raw: cap[0],\\n        text: cap[1].charAt(cap[1].length - 1) === '\\\\n'\\n          ? cap[1].slice(0, -1)\\n          : cap[1]\\n      };\\n    }\\n  }\\n\\n  text(src, tokens) {\\n    const cap = this.rules.block.text.exec(src);\\n    if (cap) {\\n      const lastToken = tokens[tokens.length - 1];\\n      if (lastToken && lastToken.type === 'text') {\\n        return {\\n          raw: cap[0],\\n          text: cap[0]\\n        };\\n      }\\n\\n      return {\\n        type: 'text',\\n        raw: cap[0],\\n        text: cap[0]\\n      };\\n    }\\n  }\\n\\n  escape(src) {\\n    const cap = this.rules.inline.escape.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'escape',\\n        raw: cap[0],\\n        text: escape$1(cap[1])\\n      };\\n    }\\n  }\\n\\n  tag(src, inLink, inRawBlock) {\\n    const cap = this.rules.inline.tag.exec(src);\\n    if (cap) {\\n      if (!inLink && /^<a /i.test(cap[0])) {\\n        inLink = true;\\n      } else if (inLink && /^<\\\\/a>/i.test(cap[0])) {\\n        inLink = false;\\n      }\\n      if (!inRawBlock && /^<(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        inRawBlock = true;\\n      } else if (inRawBlock && /^<\\\\/(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        inRawBlock = false;\\n      }\\n\\n      return {\\n        type: this.options.sanitize\\n          ? 'text'\\n          : 'html',\\n        raw: cap[0],\\n        inLink,\\n        inRawBlock,\\n        text: this.options.sanitize\\n          ? (this.options.sanitizer\\n            ? this.options.sanitizer(cap[0])\\n            : escape$1(cap[0]))\\n          : cap[0]\\n      };\\n    }\\n  }\\n\\n  link(src) {\\n    const cap = this.rules.inline.link.exec(src);\\n    if (cap) {\\n      const lastParenIndex = findClosingBracket$1(cap[2], '()');\\n      if (lastParenIndex > -1) {\\n        const start = cap[0].indexOf('!') === 0 ? 5 : 4;\\n        const linkLen = start + cap[1].length + lastParenIndex;\\n        cap[2] = cap[2].substring(0, lastParenIndex);\\n        cap[0] = cap[0].substring(0, linkLen).trim();\\n        cap[3] = '';\\n      }\\n      let href = cap[2];\\n      let title = '';\\n      if (this.options.pedantic) {\\n        const link = /^([^'\\\"]*[^\\\\s])\\\\s+(['\\\"])(.*)\\\\2/.exec(href);\\n\\n        if (link) {\\n          href = link[1];\\n          title = link[3];\\n        } else {\\n          title = '';\\n        }\\n      } else {\\n        title = cap[3] ? cap[3].slice(1, -1) : '';\\n      }\\n      href = href.trim().replace(/^<([\\\\s\\\\S]*)>$/, '$1');\\n      const token = outputLink(cap, {\\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\\n      }, cap[0]);\\n      return token;\\n    }\\n  }\\n\\n  reflink(src, links) {\\n    let cap;\\n    if ((cap = this.rules.inline.reflink.exec(src))\\n        || (cap = this.rules.inline.nolink.exec(src))) {\\n      let link = (cap[2] || cap[1]).replace(/\\\\s+/g, ' ');\\n      link = links[link.toLowerCase()];\\n      if (!link || !link.href) {\\n        const text = cap[0].charAt(0);\\n        return {\\n          type: 'text',\\n          raw: text,\\n          text\\n        };\\n      }\\n      const token = outputLink(cap, link, cap[0]);\\n      return token;\\n    }\\n  }\\n\\n  strong(src) {\\n    const cap = this.rules.inline.strong.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'strong',\\n        raw: cap[0],\\n        text: cap[4] || cap[3] || cap[2] || cap[1]\\n      };\\n    }\\n  }\\n\\n  em(src) {\\n    const cap = this.rules.inline.em.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'em',\\n        raw: cap[0],\\n        text: cap[6] || cap[5] || cap[4] || cap[3] || cap[2] || cap[1]\\n      };\\n    }\\n  }\\n\\n  codespan(src) {\\n    const cap = this.rules.inline.code.exec(src);\\n    if (cap) {\\n      let text = cap[2].replace(/\\\\n/g, ' ');\\n      const hasNonSpaceChars = /[^ ]/.test(text);\\n      const hasSpaceCharsOnBothEnds = text.startsWith(' ') && text.endsWith(' ');\\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\\n        text = text.substring(1, text.length - 1);\\n      }\\n      text = escape$1(text, true);\\n      return {\\n        type: 'codespan',\\n        raw: cap[0],\\n        text\\n      };\\n    }\\n  }\\n\\n  br(src) {\\n    const cap = this.rules.inline.br.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'br',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  del(src) {\\n    const cap = this.rules.inline.del.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'del',\\n        raw: cap[0],\\n        text: cap[1]\\n      };\\n    }\\n  }\\n\\n  autolink(src, mangle) {\\n    const cap = this.rules.inline.autolink.exec(src);\\n    if (cap) {\\n      let text, href;\\n      if (cap[2] === '@') {\\n        text = escape$1(this.options.mangle ? mangle(cap[1]) : cap[1]);\\n        href = 'mailto:' + text;\\n      } else {\\n        text = escape$1(cap[1]);\\n        href = text;\\n      }\\n\\n      return {\\n        type: 'link',\\n        raw: cap[0],\\n        text,\\n        href,\\n        tokens: [\\n          {\\n            type: 'text',\\n            raw: text,\\n            text\\n          }\\n        ]\\n      };\\n    }\\n  }\\n\\n  url(src, mangle) {\\n    let cap;\\n    if (cap = this.rules.inline.url.exec(src)) {\\n      let text, href;\\n      if (cap[2] === '@') {\\n        text = escape$1(this.options.mangle ? mangle(cap[0]) : cap[0]);\\n        href = 'mailto:' + text;\\n      } else {\\n        // do extended autolink path validation\\n        let prevCapZero;\\n        do {\\n          prevCapZero = cap[0];\\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\\n        } while (prevCapZero !== cap[0]);\\n        text = escape$1(cap[0]);\\n        if (cap[1] === 'www.') {\\n          href = 'http://' + text;\\n        } else {\\n          href = text;\\n        }\\n      }\\n      return {\\n        type: 'link',\\n        raw: cap[0],\\n        text,\\n        href,\\n        tokens: [\\n          {\\n            type: 'text',\\n            raw: text,\\n[end of marked.esm.js]\\n[start of README.md]\\nMarked is\\n\\n1. built for speed.<sup>*</sup>\\n2. a low-level markdown compiler for parsing markdown without caching or blocking for long periods of time.<sup>**</sup>\\n3. light-weight while implementing all markdown features from the supported flavors & specifications.<sup>***</sup>\\n4. available as a command line interface (CLI) and running in client- or server-side JavaScript projects.\\n\\n<p><small><sup>*</sup> Still working on metrics for comparative analysis and definition.</small><br>\\n<small><sup>**</sup> As few dependencies as possible.</small><br>\\n<small><sup>***</sup> Strict compliance could result in slower processing when running comparative benchmarking.</small></p>\\n\\n\\n<h2 id=\\\"demo\\\">Demo</h2>\\n\\nCheckout the [demo page](./demo/) to see marked in action \\u26f9\\ufe0f\\n\\nThese documentation pages are also rendered using marked \\ud83d\\udcaf\\n\\n\\n<h2 id=\\\"installation\\\">Installation</h2>\\n\\n**CLI:** `npm install -g marked`\\n\\n**In-browser:** `npm install marked`\\n\\n<h2 id=\\\"usage\\\">Usage</h2>\\n\\n### Warning: \\ud83d\\udea8 Marked does not [sanitize](https://marked.js.org/#/USING_ADVANCED.md#options) the output HTML. Please use a sanitize library, like [DOMPurify](https://github.com/cure53/DOMPurify) (recommended), [sanitize-html](https://github.com/apostrophecms/sanitize-html) or [insane](https://github.com/bevacqua/insane) on the output HTML! \\ud83d\\udea8\\n\\n**CLI**\\n\\n``` bash\\n$ marked -o hello.html\\nhello world\\n^D\\n$ cat hello.html\\n<p>hello world</p>\\n```\\n\\n``` bash\\n$ marked -s \\\"*hello world*\\\"\\n<p><em>hello world</em></p>\\n```\\n\\n**Browser**\\n\\n```html\\n<!doctype html>\\n<html>\\n<head>\\n  <meta charset=\\\"utf-8\\\"/>\\n  <title>Marked in the browser</title>\\n</head>\\n<body>\\n  <div id=\\\"content\\\"></div>\\n  <script src=\\\"https://cdn.jsdelivr.net/npm/marked/marked.min.js\\\"></script>\\n  <script>\\n    document.getElementById('content').innerHTML =\\n      marked('# Marked in browser\\\\n\\\\nRendered by **marked**.');\\n  </script>\\n</body>\\n</html>\\n```\\n\\n\\nMarked offers [advanced configurations](#/USING_ADVANCED.md) and [extensibility](#/USING_PRO.md) as well.\\n\\n<h2 id=\\\"specifications\\\">Supported Markdown specifications</h2>\\n\\nWe actively support the features of the following [Markdown flavors](https://github.com/commonmark/CommonMark/wiki/Markdown-Flavors).\\n\\n|Flavor                                                     |Version    |\\n|:----------------------------------------------------------|:----------|\\n|The original markdown.pl                                   |--         |\\n|[CommonMark](http://spec.commonmark.org/0.29/)             |0.29       |\\n|[GitHub Flavored Markdown](https://github.github.com/gfm/) |0.29       |\\n\\nBy supporting the above Markdown flavors, it's possible that Marked can help you use other flavors as well; however, these are not actively supported by the community.\\n\\n<h2 id=\\\"security\\\">Security</h2>\\n\\nThe only completely secure system is the one that doesn't exist in the first place. Having said that, we take the security of Marked very seriously.\\n\\nTherefore, please disclose potential security issues by email to the project [committers](#/AUTHORS.md) as well as the [listed owners within NPM](https://docs.npmjs.com/cli/owner). We will provide an initial assessment of security reports within 48 hours and should apply patches within 2 weeks (also, feel free to contribute a fix for the issue).\\n\\n\\n[end of README.md]\\n[start of marked.1.txt]\\nmarked(1)\\t\\t    General Commands Manual\\t\\t     marked(1)\\n\\nNAME\\n       marked - a javascript markdown parser\\n\\nSYNOPSIS\\n       marked  [-o  <output>]  [-i  <input>]  [--help] [--tokens] [--pedantic]\\n       [--gfm] [--breaks] [--sanitize]\\t[--smart-lists]  [--lang-prefix  <pre-\\n       fix>] [--no-etc...] [--silent] [filename]\\n\\n\\nDESCRIPTION\\n       marked is a full-featured javascript markdown parser, built for speed.\\n       It also includes multiple GFM features.\\n\\nEXAMPLES\\n       cat in.md | marked > out.html\\n\\n       echo \\\"hello *world*\\\" | marked\\n\\n       marked -o out.html -i in.md --gfm\\n\\n       marked --output=\\\"hello world.html\\\" -i in.md --no-breaks\\n\\nOPTIONS\\n       -o, --output [output]\\n              Specify file output. If none is specified, write to stdout.\\n\\n       -i, --input [input]\\n              Specify file input, otherwise use last argument as input file.\\n              If no input file is specified, read from stdin.\\n\\n       --test Makes sure the test(s) pass.\\n\\n              --glob [file] Specify which test to use.\\n\\n              --fix Fixes tests.\\n\\n              --bench Benchmarks the test(s).\\n\\n              --time Times The test(s).\\n\\n              --minified Runs test file(s) as minified.\\n\\n              --stop Stop process if a test fails.\\n\\n       -t, --tokens\\n              Output a token stream instead of html.\\n\\n       --pedantic\\n              Conform to obscure parts of markdown.pl as much as possible.\\n              Don't fix original markdown bugs.\\n\\n       --gfm  Enable github flavored markdown.\\n\\n       --breaks\\n              Enable GFM line breaks. Only works with the gfm option.\\n\\n       --sanitize\\n              Sanitize output. Ignore any HTML input.\\n\\n       --smart-lists\\n              Use smarter list behavior than the original markdown.\\n\\n       --lang-prefix [prefix]\\n              Set the prefix for code block classes.\\n\\n       --mangle\\n              Mangle email addresses.\\n\\n       --no-sanitize, -no-etc...\\n              The inverse of any of the marked options above.\\n\\n       --silent\\n              Silence error output.\\n\\n       -h, --help\\n              Display help information.\\n\\nCONFIGURATION\\n       For configuring and running programmatically.\\n\\n       Example\\n\\n           require('marked')('*foo*', { gfm: true });\\n\\nBUGS\\n       Please report any bugs to https://github.com/markedjs/marked.\\n\\nLICENSE\\n       Copyright (c) 2011-2014, Christopher Jeffrey (MIT License).\\n\\nSEE ALSO\\n       markdown(1), node.js(1)\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t     marked(1)\\n\\n[end of marked.1.txt]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "USING_PRO.md",
        "update-specs.js",
        "marked.esm.js",
        "README.md",
        "marked.1.txt"
      ]
    },
    "retrieved_documents": [
      {
        "id": "381d2fd8-d854-42ab-96c8-2d74df8fd866",
        "score": 0.01639344262295082,
        "payload": {
          "text": "## Extending Marked\n\nTo champion the single-responsibility and open/closed principles, we have tried to make it relatively painless to extend marked. If you are looking to add custom functionality, this is the place to start.\n\n<h2 id=\"use\">marked.use()</h2>\n\n`marked.use(options)` is the recommended way to extend marked. The options object can contain any [option](#/USING_ADVANCED.md#options) available in marked.\n\nThe `renderer` and `tokenizer` options can be an object with functions that will be merged into the `renderer` and `tokenizer` respectively.\n\nThe `renderer` and `tokenizer` functions can return false to fallback to the previous function.\n\nThe `walkTokens` option can be a function that will be called with every token before rendering. When calling `use` multiple times with different `walkTokens` functions each function will be called in the **reverse** order in which they were assigned.\n\nAll other options will overwrite previously set options.\n\n<h2 id=\"renderer\">The renderer</h2>\n\nThe renderer defines the output of the parser.\n\n**Example:** Overriding default heading token by adding an embedded anchor tag like on GitHub.\n\n```js\n// Create reference instance\nconst marked = require('marked');\n\n// Override function\nconst renderer = {\n  heading(text, level) {\n    const escapedText = text.toLowerCase().replace(/[^\\w]+/g, '-');\n\n    return `\n            <h${level}>\n              <a name=\"${escapedText}\" class=\"anchor\" href=\"#${escapedText}\">\n                <span class=\"header-link\"></span>\n              </a>\n              ${text}\n            </h${level}>`;\n  }\n};\n\nmarked.use({ renderer });\n\n// Run marked\nconsole.log(marked('# heading+'));\n```\n\n**Output:**\n\n```html\n<h1>\n  <a name=\"heading-\" class=\"anchor\" href=\"#heading-\">\n    <span class=\"header-link\"></span>\n  </a>\n  heading+\n</h1>\n```\n\n### Block level renderer methods\n\n- code(*string* code, *string* infostring, *boolean* escaped)\n- blockquote(*string* quote)\n- html(*string* html)\n- heading(*string* text, *number* level, *string* raw, *Slugger* slugger)\n- hr()\n- list(*string* body, *boolean* ordered, *number* start)\n- listitem(*string* text, *boolean* task, *boolean* checked)\n- checkbox(*boolean* checked)\n- paragraph(*string* text)\n- table(*string* header, *string* body)\n- tablerow(*string* content)\n- tablecell(*string* content, *object* flags)\n\n`slugger` has the `slug` method to create a unique id from value:\n\n```js\nslugger.slug('foo')   // foo\nslugger.slug('foo')   // foo-1\nslugger.slug('foo')   // foo-2\nslugger.slug('foo 1') // foo-1-1\nslugger.slug('foo-1') // foo-1-2\n...\n```\n\n`flags` has the following properties:\n\n```js\n{\n    header: true || false,\n    align: 'center' || 'left' || 'right'\n}\n```\n\n### Inline level renderer methods\n\n- strong(*string* text)\n- em(*string* text)\n- codespan(*string* code)\n- br()\n- del(*string* text)\n- link(*string* href, *string* title, *string* text)\n- image(*string* href, *string* title, *string* text)\n- text(*string* text)\n\n<h2 id=\"tokenizer\">The tokenizer</h2>\n\nThe tokenizer defines how to turn markdown text into tokens.\n\n**Example:** Overriding default `codespan` tokenizer to include LaTeX.\n\n```js\n// Create reference instance\nconst marked = require('marked');\n\n// Override function\nconst tokenizer = {\n  codespan(src) {\n    const match = src.match(/\\$+([^\\$\\n]+?)\\$+/);\n    if (match) {\n      return {\n        type: 'codespan',\n        raw: match[0],\n        text: match[1].trim()\n      };\n    }\n\n    // return false to use original codespan tokenizer\n    return false;\n  }\n};\n\nmarked.use({ tokenizer });\n\n// Run marked\nconsole.log(marked('$ latex code $\\n\\n` other code `'));\n```\n\n**Output:**\n\n```html\n<p><code>latex code</code></p>\n<p><code>other code</code></p>\n```\n\n### Block level tokenizer methods\n\n- space(*string* src)\n- code(*string* src, *array* tokens)\n- fences(*string* src)\n- heading(*string* src)\n- nptable(*string* src)\n- hr(*string* src)\n- blockquote(*string* src)\n- list(*string* src)\n- html(*string* src)\n- def(*string* src)\n- table(*string* src)\n- lheading(*string* src)\n- paragraph(*string* src)\n- text(*string* src, *array* tokens)\n\n### Inline level tokenizer methods\n\n- escape(*string* src)\n- tag(*string* src, *bool* inLink, *bool* inRawBlock)\n- link(*string* src)\n- reflink(*string* src, *object* links)\n- strong(*string* src)\n- em(*string* src)\n- codespan(*string* src)\n- br(*string* src)\n- del(*string* src)\n- autolink(*string* src, *function* mangle)\n- url(*string* src, *function* mangle)\n- inlineText(*string* src, *bool* inRawBlock, *function* smartypants)\n\n`mangle` is a method that changes text to HTML character references:\n\n```js\nmangle('test@example.com')\n// \"&#x74;&#101;&#x73;&#116;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#x63;&#111;&#x6d;\"\n```\n\n`smartypants` is a method that translates plain ASCII punctuation characters into \u201csmart\u201d typographic punctuation HTML entities:\n\nhttps://daringfireball.net/projects/smartypants/\n\n```js\nsmartypants('\"this ... string\"')\n// \"\u201cthis \u2026 string\u201d\"\n```\n\n<h2 id=\"walk-tokens\">Walk Tokens</h2>\n\nThe walkTokens function gets called with every token. Child tokens are called before moving on to sibling tokens. Each token is passed by reference so updates are persisted when passed to the parser. The return value of the function is ignored.\n\n**Example:** Overriding heading tokens to start at h2.\n\n```js\nconst marked = require('marked');\n\n// Override function\nconst walkTokens = (token) => {\n  if (token.type === 'heading') {\n    token.depth += 1;\n  }\n};\n\nmarked.use({ walkTokens });\n\n// Run marked\nconsole.log(marked('# heading 2\\n\\n## heading 3'));\n```\n\n**Output:**\n\n```html\n<h2 id=\"heading-2\">heading 2</h2>\n<h3 id=\"heading-3\">heading 3</h3>\n```\n\n<h2 id=\"lexer\">The lexer</h2>\n\nThe lexer takes a markdown string and calls the tokenizer functions.\n\n<h2 id=\"parser\">The parser</h2>\n\nThe parser takes tokens as input and calls the renderer functions.\n\n***\n\n<h2 id=\"extend\">Access to lexer and parser</h2>\n\nYou also have direct access to the lexer and parser if you so desire.\n\n``` js\nconst tokens = marked.lexer(markdown, options);\nconsole.log(marked.parser(tokens, options));\n```\n\n``` js\nconst lexer = new marked.Lexer(options);\nconst tokens = lexer.lex(markdown);\nconsole.log(tokens);\nconsole.log(lexer.tokenizer.rules.block); // block level rules used\nconsole.log(lexer.tokenizer.rules.inline); // inline level rules used\nconsole.log(marked.Lexer.rules.block); // all block level rules\nconsole.log(marked.Lexer.rules.inline); // all inline level rules\n```\n\n``` bash\n$ node\n> require('marked').lexer('> I am using marked.')\n[\n  {\n    type: \"blockquote\",\n    raw: \"> I am using marked.\",\n    tokens: [\n      {\n        type: \"paragraph\",\n        raw: \"I am using marked.\",\n        text: \"I am using marked.\",\n        tokens: [\n          {\n            type: \"text\",\n            raw: \"I am using marked.\",\n            text: \"I am using marked.\"\n          }\n        ]\n      }\n    ]\n  },\n  links: {}\n]\n```\n\nThe Lexer builds an array of tokens, which will be passed to the Parser.\nThe Parser processes each token in the token array:\n\n``` js\nconst marked = require('marked');\n\nconst md = `\n  # heading\n\n  [link][1]\n\n  [1]: #heading \"heading\"\n`;\n\nconst tokens = marked.lexer(md);\nconsole.log(tokens);\n\nconst html = marked.parser(tokens);\nconsole.log(html);\n```\n\n``` bash\n[\n  {\n    type: \"heading\",\n    raw: \"  # heading\\n\\n\",\n    depth: 1,\n    text: \"heading\",\n    tokens: [\n      {\n        type: \"text\",\n        raw: \"heading\",\n        text: \"heading\"\n      }\n    ]\n  },\n  {\n    type: \"paragraph\",\n    raw: \"  [link][1]\",\n    text: \"  [link][1]\",\n    tokens: [\n      {\n        type: \"text\",\n        raw: \"  \",\n        text: \"  \"\n      },\n      {\n        type: \"link\",\n        raw: \"[link][1]\",\n        text: \"link\",\n        href: \"#heading\",\n        title: \"heading\",\n        tokens: [\n          {\n            type: \"text\",\n            raw: \"link\",\n            text: \"link\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    type: \"space\",\n    raw: \"\\n\\n\"\n  },\n  links: {\n    \"1\": {\n      href: \"#heading\",\n      title: \"heading\"\n    }\n  }\n]\n<h1 id=\"heading\">heading</h1>\n<p>  <a href=\"#heading\" title=\"heading\">link</a></p>\n```\n",
          "filepath": "data/repos/markedjs/marked-1.1/docs/USING_PRO.md",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "e2bc827d-1cf3-43f4-9f57-9b1a70ef5dd7",
        "score": 0.016129032258064516,
        "payload": {
          "text": "const fetch = require('node-fetch');\nconst cheerio = require('cheerio');\nconst marked = require('../');\nconst htmlDiffer = require('./helpers/html-differ.js');\nconst fs = require('fs');\nconst path = require('path');\n\nfunction removeFiles(dir) {\n  fs.readdirSync(dir).forEach(file => {\n    fs.unlinkSync(path.join(dir, file));\n  });\n}\n\nasync function updateCommonmark(dir, options) {\n  try {\n    const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\n    const pkg = await res.json();\n    const version = pkg.version.replace(/^(\\d+\\.\\d+).*$/, '$1');\n    const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\n    const specs = await res2.json();\n    specs.forEach(spec => {\n      const html = marked(spec.markdown, options);\n      if (!htmlDiffer.isEqual(html, spec.html)) {\n        spec.shouldFail = true;\n      }\n    });\n    fs.writeFileSync(path.resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n    console.log(`Saved CommonMark v${version} specs`);\n  } catch (ex) {\n    console.log(ex);\n  }\n}\n\nasync function updateGfm(dir) {\n  try {\n    const res = await fetch('https://github.github.com/gfm/');\n    const html = await res.text();\n    const $ = cheerio.load(html);\n    const version = $('.version').text().match(/\\d+\\.\\d+/)[0];\n    if (!version) {\n      throw new Error('No version found');\n    }\n    const specs = [];\n    $('.extension').each((i, ext) => {\n      const section = $('.definition', ext).text().trim().replace(/^\\d+\\.\\d+(.*?) \\(extension\\)[\\s\\S]*$/, '$1');\n      $('.example', ext).each((j, exa) => {\n        const example = +$(exa).attr('id').replace(/\\D/g, '');\n        const markdown = $('.language-markdown', exa).text().trim();\n        const html = $('.language-html', exa).text().trim();\n        specs.push({\n          section: `[extension] ${section}`,\n          html,\n          markdown,\n          example\n        });\n      });\n    });\n\n    specs.forEach(spec => {\n      const html = marked(spec.markdown, { gfm: true, pedantic: false });\n      if (!htmlDiffer.isEqual(html, spec.html)) {\n        spec.shouldFail = true;\n      }\n    });\n    fs.writeFileSync(path.resolve(dir, `./gfm.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n    console.log(`Saved GFM v${version} specs.`);\n  } catch (ex) {\n    console.log(ex);\n  }\n}\n\nconst commonmarkDir = path.resolve(__dirname, './specs/commonmark');\nconst gfmDir = path.resolve(__dirname, './specs/gfm');\nremoveFiles(commonmarkDir);\nremoveFiles(gfmDir);\nupdateCommonmark(commonmarkDir, { gfm: false, pedantic: false, headerIds: false });\nupdateCommonmark(gfmDir, { gfm: true, pedantic: false, headerIds: false });\nupdateGfm(gfmDir);\n",
          "filepath": "data/repos/markedjs/marked-1.1/test/update-specs.js",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "24b223e4-5c90-4d6f-be93-8671dc73076e",
        "score": 0.015873015873015872,
        "payload": {
          "text": "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar defaults = createCommonjsModule(function (module) {\nfunction getDefaults() {\n  return {\n    baseUrl: null,\n    breaks: false,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: null,\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartLists: false,\n    smartypants: false,\n    tokenizer: null,\n    walkTokens: null,\n    xhtml: false\n  };\n}\n\nfunction changeDefaults(newDefaults) {\n  module.exports.defaults = newDefaults;\n}\n\nmodule.exports = {\n  defaults: getDefaults(),\n  getDefaults,\n  changeDefaults\n};\n});\nvar defaults_1 = defaults.defaults;\nvar defaults_2 = defaults.getDefaults;\nvar defaults_3 = defaults.changeDefaults;\n\n/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = /[&<>\"']/g;\nconst escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\nconst escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\nconst escapeReplacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape(html, encode) {\n  if (encode) {\n    if (escapeTest.test(html)) {\n      return html.replace(escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (escapeTestNoEncode.test(html)) {\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nconst caret = /(^|[^\\[])\\^/g;\nfunction edit(regex, opt) {\n  regex = regex.source || regex;\n  opt = opt || '';\n  const obj = {\n    replace: (name, val) => {\n      val = val.source || val;\n      val = val.replace(caret, '$1');\n      regex = regex.replace(name, val);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(regex, opt);\n    }\n  };\n  return obj;\n}\n\nconst nonWordAndColonTest = /[^\\w:]/g;\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    let prot;\n    try {\n      prot = decodeURIComponent(unescape(href))\n        .replace(nonWordAndColonTest, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nconst baseUrls = {};\nconst justDomain = /^[^:]+:\\/*[^/]*$/;\nconst protocol = /^([^:]+:)[\\s\\S]*$/;\nconst domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (justDomain.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n  const relativeBase = base.indexOf(':') === -1;\n\n  if (href.substring(0, 2) === '//') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(protocol, '$1') + href;\n  } else if (href.charAt(0) === '/') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(domain, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\n\nconst noopTest = { exec: function noopTest() {} };\n\nfunction merge(obj) {\n  let i = 1,\n    target,\n    key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n      let escaped = false,\n        curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(/ \\|/);\n  let i = 0;\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n// /c*$/ is vulnerable to REDOS.\n// invert: Remove suffix of non-c chars instead. Default falsey.\nfunction rtrim(str, c, invert) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.substr(0, l - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  const l = str.length;\n  let level = 0,\n    i = 0;\n  for (; i < l; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkSanitizeDeprecation(opt) {\n  if (opt && opt.sanitize && !opt.silent) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n}\n\nvar helpers = {\n  escape,\n  unescape,\n  edit,\n  cleanUrl,\n  resolveUrl,\n  noopTest,\n  merge,\n  splitCells,\n  rtrim,\n  findClosingBracket,\n  checkSanitizeDeprecation\n};\n\nconst { defaults: defaults$1 } = defaults;\nconst {\n  rtrim: rtrim$1,\n  splitCells: splitCells$1,\n  escape: escape$1,\n  findClosingBracket: findClosingBracket$1\n} = helpers;\n\nfunction outputLink(cap, link, raw) {\n  const href = link.href;\n  const title = link.title ? escape$1(link.title) : null;\n\n  if (cap[0].charAt(0) !== '!') {\n    return {\n      type: 'link',\n      raw,\n      href,\n      title,\n      text: cap[1]\n    };\n  } else {\n    return {\n      type: 'image',\n      raw,\n      text: escape$1(cap[1]),\n      href,\n      title\n    };\n  }\n}\n\nfunction indentCodeCompensation(raw, text) {\n  const matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n  if (matchIndentToCode === null) {\n    return text;\n  }\n\n  const indentToCode = matchIndentToCode[1];\n\n  return text\n    .split('\\n')\n    .map(node => {\n      const matchIndentInNode = node.match(/^\\s+/);\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      const [indentInNode] = matchIndentInNode;\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    })\n    .join('\\n');\n}\n\n/**\n * Tokenizer\n */\nvar Tokenizer_1 = class Tokenizer {\n  constructor(options) {\n    this.options = options || defaults$1;\n  }\n\n  space(src) {\n    const cap = this.rules.block.newline.exec(src);\n    if (cap) {\n      if (cap[0].length > 1) {\n        return {\n          type: 'space',\n          raw: cap[0]\n        };\n      }\n      return { raw: '\\n' };\n    }\n  }\n\n  code(src, tokens) {\n    const cap = this.rules.block.code.exec(src);\n    if (cap) {\n      const lastToken = tokens[tokens.length - 1];\n      // An indented code block cannot interrupt a paragraph.\n      if (lastToken && lastToken.type === 'paragraph') {\n        return {\n          raw: cap[0],\n          text: cap[0].trimRight()\n        };\n      }\n\n      const text = cap[0].replace(/^ {4}/gm, '');\n      return {\n        type: 'code',\n        raw: cap[0],\n        codeBlockStyle: 'indented',\n        text: !this.options.pedantic\n          ? rtrim$1(text, '\\n')\n          : text\n      };\n    }\n  }\n\n  fences(src) {\n    const cap = this.rules.block.fences.exec(src);\n    if (cap) {\n      const raw = cap[0];\n      const text = indentCodeCompensation(raw, cap[3] || '');\n\n      return {\n        type: 'code',\n        raw,\n        lang: cap[2] ? cap[2].trim() : cap[2],\n        text\n      };\n    }\n  }\n\n  heading(src) {\n    const cap = this.rules.block.heading.exec(src);\n    if (cap) {\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[1].length,\n        text: cap[2]\n      };\n    }\n  }\n\n  nptable(src) {\n    const cap = this.rules.block.nptable.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : [],\n        raw: cap[0]\n      };\n\n      if (item.header.length === item.align.length) {\n        let l = item.align.length;\n        let i;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.cells.length;\n        for (i = 0; i < l; i++) {\n          item.cells[i] = splitCells$1(item.cells[i], item.header.length);\n        }\n\n        return item;\n      }\n    }\n  }\n\n  hr(src) {\n    const cap = this.rules.block.hr.exec(src);\n    if (cap) {\n      return {\n        type: 'hr',\n        raw: cap[0]\n      };\n    }\n  }\n\n  blockquote(src) {\n    const cap = this.rules.block.blockquote.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ *> ?/gm, '');\n\n      return {\n        type: 'blockquote',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n\n  list(src) {\n    const cap = this.rules.block.list.exec(src);\n    if (cap) {\n      let raw = cap[0];\n      const bull = cap[2];\n      const isordered = bull.length > 1;\n\n      const list = {\n        type: 'list',\n        raw,\n        ordered: isordered,\n        start: isordered ? +bull : '',\n        loose: false,\n        items: []\n      };\n\n      // Get each top-level item.\n      const itemMatch = cap[0].match(this.rules.block.item);\n\n      let next = false,\n        item,\n        space,\n        b,\n        addBack,\n        loose,\n        istask,\n        ischecked;\n\n      const l = itemMatch.length;\n      for (let i = 0; i < l; i++) {\n        item = itemMatch[i];\n        raw = item;\n\n        // Remove the list item's bullet\n        // so it is seen as the next token.\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+\\.) */, '');\n\n        // Outdent whatever the\n        // list item contains. Hacky.\n        if (~item.indexOf('\\n ')) {\n          space -= item.length;\n          item = !this.options.pedantic\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n            : item.replace(/^ {1,4}/gm, '');\n        }\n\n        // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n        if (i !== l - 1) {\n          b = this.rules.block.bullet.exec(itemMatch[i + 1])[0];\n          if (bull.length > 1 ? b.length === 1\n            : (b.length > 1 || (this.options.smartLists && b !== bull))) {\n            addBack = itemMatch.slice(i + 1).join('\\n');\n            list.raw = list.raw.substring(0, list.raw.length - addBack.length);\n            i = l - 1;\n          }\n        }\n\n        // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === '\\n';\n          if (!loose) loose = next;\n        }\n\n        if (loose) {\n          list.loose = true;\n        }\n\n        // Check for task list items\n        istask = /^\\[[ xX]\\] /.test(item);\n        ischecked = undefined;\n        if (istask) {\n          ischecked = item[1] !== ' ';\n          item = item.replace(/^\\[[ xX]\\] +/, '');\n        }\n\n        list.items.push({\n          type: 'list_item',\n          raw,\n          task: istask,\n          checked: ischecked,\n          loose: loose,\n          text: item\n        });\n      }\n\n      return list;\n    }\n  }\n\n  html(src) {\n    const cap = this.rules.block.html.exec(src);\n    if (cap) {\n      return {\n        type: this.options.sanitize\n          ? 'paragraph'\n          : 'html',\n        raw: cap[0],\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape$1(cap[0])) : cap[0]\n      };\n    }\n  }\n\n  def(src) {\n    const cap = this.rules.block.def.exec(src);\n    if (cap) {\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n      const tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n      return {\n        tag,\n        raw: cap[0],\n        href: cap[2],\n        title: cap[3]\n      };\n    }\n  }\n\n  table(src) {\n    const cap = this.rules.block.table.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        item.raw = cap[0];\n\n        let l = item.align.length;\n        let i;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.cells.length;\n        for (i = 0; i < l; i++) {\n          item.cells[i] = splitCells$1(\n            item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''),\n            item.header.length);\n        }\n\n        return item;\n      }\n    }\n  }\n\n  lheading(src) {\n    const cap = this.rules.block.lheading.exec(src);\n    if (cap) {\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1]\n      };\n    }\n  }\n\n  paragraph(src) {\n    const cap = this.rules.block.paragraph.exec(src);\n    if (cap) {\n      return {\n        type: 'paragraph',\n        raw: cap[0],\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1]\n      };\n    }\n  }\n\n  text(src, tokens) {\n    const cap = this.rules.block.text.exec(src);\n    if (cap) {\n      const lastToken = tokens[tokens.length - 1];\n      if (lastToken && lastToken.type === 'text') {\n        return {\n          raw: cap[0],\n          text: cap[0]\n        };\n      }\n\n      return {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0]\n      };\n    }\n  }\n\n  escape(src) {\n    const cap = this.rules.inline.escape.exec(src);\n    if (cap) {\n      return {\n        type: 'escape',\n        raw: cap[0],\n        text: escape$1(cap[1])\n      };\n    }\n  }\n\n  tag(src, inLink, inRawBlock) {\n    const cap = this.rules.inline.tag.exec(src);\n    if (cap) {\n      if (!inLink && /^<a /i.test(cap[0])) {\n        inLink = true;\n      } else if (inLink && /^<\\/a>/i.test(cap[0])) {\n        inLink = false;\n      }\n      if (!inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        inRawBlock = true;\n      } else if (inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        inRawBlock = false;\n      }\n\n      return {\n        type: this.options.sanitize\n          ? 'text'\n          : 'html',\n        raw: cap[0],\n        inLink,\n        inRawBlock,\n        text: this.options.sanitize\n          ? (this.options.sanitizer\n            ? this.options.sanitizer(cap[0])\n            : escape$1(cap[0]))\n          : cap[0]\n      };\n    }\n  }\n\n  link(src) {\n    const cap = this.rules.inline.link.exec(src);\n    if (cap) {\n      const lastParenIndex = findClosingBracket$1(cap[2], '()');\n      if (lastParenIndex > -1) {\n        const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n        const linkLen = start + cap[1].length + lastParenIndex;\n        cap[2] = cap[2].substring(0, lastParenIndex);\n        cap[0] = cap[0].substring(0, linkLen).trim();\n        cap[3] = '';\n      }\n      let href = cap[2];\n      let title = '';\n      if (this.options.pedantic) {\n        const link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        } else {\n          title = '';\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n      href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n      const token = outputLink(cap, {\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n      }, cap[0]);\n      return token;\n    }\n  }\n\n  reflink(src, links) {\n    let cap;\n    if ((cap = this.rules.inline.reflink.exec(src))\n        || (cap = this.rules.inline.nolink.exec(src))) {\n      let link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = links[link.toLowerCase()];\n      if (!link || !link.href) {\n        const text = cap[0].charAt(0);\n        return {\n          type: 'text',\n          raw: text,\n          text\n        };\n      }\n      const token = outputLink(cap, link, cap[0]);\n      return token;\n    }\n  }\n\n  strong(src) {\n    const cap = this.rules.inline.strong.exec(src);\n    if (cap) {\n      return {\n        type: 'strong',\n        raw: cap[0],\n        text: cap[4] || cap[3] || cap[2] || cap[1]\n      };\n    }\n  }\n\n  em(src) {\n    const cap = this.rules.inline.em.exec(src);\n    if (cap) {\n      return {\n        type: 'em',\n        raw: cap[0],\n        text: cap[6] || cap[5] || cap[4] || cap[3] || cap[2] || cap[1]\n      };\n    }\n  }\n\n  codespan(src) {\n    const cap = this.rules.inline.code.exec(src);\n    if (cap) {\n      let text = cap[2].replace(/\\n/g, ' ');\n      const hasNonSpaceChars = /[^ ]/.test(text);\n      const hasSpaceCharsOnBothEnds = text.startsWith(' ') && text.endsWith(' ');\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n        text = text.substring(1, text.length - 1);\n      }\n      text = escape$1(text, true);\n      return {\n        type: 'codespan',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n\n  br(src) {\n    const cap = this.rules.inline.br.exec(src);\n    if (cap) {\n      return {\n        type: 'br',\n        raw: cap[0]\n      };\n    }\n  }\n\n  del(src) {\n    const cap = this.rules.inline.del.exec(src);\n    if (cap) {\n      return {\n        type: 'del',\n        raw: cap[0],\n        text: cap[1]\n      };\n    }\n  }\n\n  autolink(src, mangle) {\n    const cap = this.rules.inline.autolink.exec(src);\n    if (cap) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape$1(this.options.mangle ? mangle(cap[1]) : cap[1]);\n        href = 'mailto:' + text;\n      } else {\n        text = escape$1(cap[1]);\n        href = text;\n      }\n\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n\n  url(src, mangle) {\n    let cap;\n    if (cap = this.rules.inline.url.exec(src)) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape$1(this.options.mangle ? mangle(cap[0]) : cap[0]);\n        href = 'mailto:' + text;\n      } else {\n        // do extended autolink path validation\n        let prevCapZero;\n        do {\n          prevCapZero = cap[0];\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n        } while (prevCapZero !== cap[0]);\n        text = escape$1(cap[0]);\n        if (cap[1] === 'www.') {\n          href = 'http://' + text;\n        } else {\n          href = text;\n        }\n      }\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,",
          "filepath": "data/repos/markedjs/marked-1.1/lib/marked.esm.js",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "84ac8b98-e5e2-4713-a953-ff686024b180",
        "score": 0.015625,
        "payload": {
          "text": "Marked is\n\n1. built for speed.<sup>*</sup>\n2. a low-level markdown compiler for parsing markdown without caching or blocking for long periods of time.<sup>**</sup>\n3. light-weight while implementing all markdown features from the supported flavors & specifications.<sup>***</sup>\n4. available as a command line interface (CLI) and running in client- or server-side JavaScript projects.\n\n<p><small><sup>*</sup> Still working on metrics for comparative analysis and definition.</small><br>\n<small><sup>**</sup> As few dependencies as possible.</small><br>\n<small><sup>***</sup> Strict compliance could result in slower processing when running comparative benchmarking.</small></p>\n\n\n<h2 id=\"demo\">Demo</h2>\n\nCheckout the [demo page](./demo/) to see marked in action \u26f9\ufe0f\n\nThese documentation pages are also rendered using marked \ud83d\udcaf\n\n\n<h2 id=\"installation\">Installation</h2>\n\n**CLI:** `npm install -g marked`\n\n**In-browser:** `npm install marked`\n\n<h2 id=\"usage\">Usage</h2>\n\n### Warning: \ud83d\udea8 Marked does not [sanitize](https://marked.js.org/#/USING_ADVANCED.md#options) the output HTML. Please use a sanitize library, like [DOMPurify](https://github.com/cure53/DOMPurify) (recommended), [sanitize-html](https://github.com/apostrophecms/sanitize-html) or [insane](https://github.com/bevacqua/insane) on the output HTML! \ud83d\udea8\n\n**CLI**\n\n``` bash\n$ marked -o hello.html\nhello world\n^D\n$ cat hello.html\n<p>hello world</p>\n```\n\n``` bash\n$ marked -s \"*hello world*\"\n<p><em>hello world</em></p>\n```\n\n**Browser**\n\n```html\n<!doctype html>\n<html>\n<head>\n  <meta charset=\"utf-8\"/>\n  <title>Marked in the browser</title>\n</head>\n<body>\n  <div id=\"content\"></div>\n  <script src=\"https://cdn.jsdelivr.net/npm/marked/marked.min.js\"></script>\n  <script>\n    document.getElementById('content').innerHTML =\n      marked('# Marked in browser\\n\\nRendered by **marked**.');\n  </script>\n</body>\n</html>\n```\n\n\nMarked offers [advanced configurations](#/USING_ADVANCED.md) and [extensibility](#/USING_PRO.md) as well.\n\n<h2 id=\"specifications\">Supported Markdown specifications</h2>\n\nWe actively support the features of the following [Markdown flavors](https://github.com/commonmark/CommonMark/wiki/Markdown-Flavors).\n\n|Flavor                                                     |Version    |\n|:----------------------------------------------------------|:----------|\n|The original markdown.pl                                   |--         |\n|[CommonMark](http://spec.commonmark.org/0.29/)             |0.29       |\n|[GitHub Flavored Markdown](https://github.github.com/gfm/) |0.29       |\n\nBy supporting the above Markdown flavors, it's possible that Marked can help you use other flavors as well; however, these are not actively supported by the community.\n\n<h2 id=\"security\">Security</h2>\n\nThe only completely secure system is the one that doesn't exist in the first place. Having said that, we take the security of Marked very seriously.\n\nTherefore, please disclose potential security issues by email to the project [committers](#/AUTHORS.md) as well as the [listed owners within NPM](https://docs.npmjs.com/cli/owner). We will provide an initial assessment of security reports within 48 hours and should apply patches within 2 weeks (also, feel free to contribute a fix for the issue).\n\n",
          "filepath": "data/repos/markedjs/marked-1.1/docs/README.md",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "dfd270af-5083-45dd-9b47-ed39da100252",
        "score": 0.015384615384615385,
        "payload": {
          "text": "marked(1)\t\t    General Commands Manual\t\t     marked(1)\n\nNAME\n       marked - a javascript markdown parser\n\nSYNOPSIS\n       marked  [-o  <output>]  [-i  <input>]  [--help] [--tokens] [--pedantic]\n       [--gfm] [--breaks] [--sanitize]\t[--smart-lists]  [--lang-prefix  <pre-\n       fix>] [--no-etc...] [--silent] [filename]\n\n\nDESCRIPTION\n       marked is a full-featured javascript markdown parser, built for speed.\n       It also includes multiple GFM features.\n\nEXAMPLES\n       cat in.md | marked > out.html\n\n       echo \"hello *world*\" | marked\n\n       marked -o out.html -i in.md --gfm\n\n       marked --output=\"hello world.html\" -i in.md --no-breaks\n\nOPTIONS\n       -o, --output [output]\n              Specify file output. If none is specified, write to stdout.\n\n       -i, --input [input]\n              Specify file input, otherwise use last argument as input file.\n              If no input file is specified, read from stdin.\n\n       --test Makes sure the test(s) pass.\n\n              --glob [file] Specify which test to use.\n\n              --fix Fixes tests.\n\n              --bench Benchmarks the test(s).\n\n              --time Times The test(s).\n\n              --minified Runs test file(s) as minified.\n\n              --stop Stop process if a test fails.\n\n       -t, --tokens\n              Output a token stream instead of html.\n\n       --pedantic\n              Conform to obscure parts of markdown.pl as much as possible.\n              Don't fix original markdown bugs.\n\n       --gfm  Enable github flavored markdown.\n\n       --breaks\n              Enable GFM line breaks. Only works with the gfm option.\n\n       --sanitize\n              Sanitize output. Ignore any HTML input.\n\n       --smart-lists\n              Use smarter list behavior than the original markdown.\n\n       --lang-prefix [prefix]\n              Set the prefix for code block classes.\n\n       --mangle\n              Mangle email addresses.\n\n       --no-sanitize, -no-etc...\n              The inverse of any of the marked options above.\n\n       --silent\n              Silence error output.\n\n       -h, --help\n              Display help information.\n\nCONFIGURATION\n       For configuring and running programmatically.\n\n       Example\n\n           require('marked')('*foo*', { gfm: true });\n\nBUGS\n       Please report any bugs to https://github.com/markedjs/marked.\n\nLICENSE\n       Copyright (c) 2011-2014, Christopher Jeffrey (MIT License).\n\nSEE ALSO\n       markdown(1), node.js(1)\n\n\t\t\t\t\t\t\t\t     marked(1)\n",
          "filepath": "data/repos/markedjs/marked-1.1/man/marked.1.txt",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1435",
    "model_patch": "diff --git a/index.js b/index.js\n--- a/index.js\n+++ b/index.js\n@@ -243,7 +243,7 @@ function testFile(engine, file, filename, index) {\n   try {\n     text = engine(file.text).replace(/\\s/g, '');\n     html = file.html.replace(/\\s/g, '');\n-  } catch (e) {\n+  } catch (e) {\n     elapsed = process.hrtime(before);\n     console.log('    failed in %dms', prettyElapsedTime(elapsed));\n     throw e;\n@@ -346,7 +346,7 @@ function fix() {\n       .replace(/='([^\\n']*)'(?=[^<>\\n]*>)/g, '=&__APOS__;$1&__APOS__;')\n       .replace(/=\"([^\\n\"]*)\"(?=[^<>\\n]*>)/g, '=&__QUOT__;$1&__QUOT__;')\n       .replace(/\"/g, '&quot;')\n-      .replace(/'/g, '&#39;')\n+      .replace(/'/g, '&#39;')\n       .replace(/&__QUOT__;/g, '\"')\n       .replace(/&__APOS__;/g, '\\'');\n\n@@ -354,6 +354,10 @@ function fix() {\n       var id = text\n         .replace(/&#39;/g, '\\'')\n         .replace(/&quot;/g, '\"')\n+        .replace(/\\\\\\(/g, '(') // Unescape escaped parentheses\n+        .replace(/\\\\\\)/g, ')') // Unescape escaped parentheses\n+        .replace(/\\\\\\[/g, '[') // Unescape escaped brackets\n+        .replace(/\\\\\\]/g, ']') // Unescape escaped brackets\n         .replace(/&gt;/g, '>')\n         .replace(/&lt;/g, '<')\n         .replace(/&amp;/g, '&');",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 83.66,
      "issue_embedding_time_ms": 83.66,
      "retrieval_time_ms_splade": 5.25,
      "retrieval_time_ms": 5.25,
      "total_retrieval_time_ms": 88.91,
      "generation_time_ms": 5379.15,
      "total_io_time_ms": 5468.06,
      "input_total_token_limit": null,
      "issue_text_tokens": 127,
      "vlm_tokens": 0,
      "retrieved_tokens": 9157,
      "prompt_template_tokens": 514,
      "total_input_prompt_tokens": 9798,
      "output_generated_tokens": 413,
      "total_io_tokens": 10211,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\n[Bug] We have to use '\\\\' to add the '('\\n![image](https://user-images.githubusercontent.com/40081831/53847026-28263300-3fea-11e9-8c93-9acc880bde90.png)\\r\\n\\r\\nNotice that we have to add '\\\\' in front of \\\"(\\\", otherwises this won't be analyzed out.\\r\\n\\r\\nThe original words are in the attached sample:\\r\\n[Sample.txt](https://github.com/markedjs/marked/files/2933754/Sample.txt).\\r\\n\\r\\nFor more\\uff0cplease refer to\\uff1ahttps://github.com/nodejs/nodejs.org/issues/2119\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of marked.1.txt]\\nmarked(1)\\t\\t\\t   marked.js\\t\\t\\t     marked(1)\\n\\n\\n\\nNAME\\n       marked - a javascript markdown parser\\n\\n\\nSYNOPSIS\\n       marked  [-o  <output>]  [-i  <input>]  [--help] [--tokens] [--pedantic]\\n       [--gfm] [--breaks] [--tables] [--sanitize] [--smart-lists] [--lang-pre\\u2010\\n       fix <prefix>] [--no-etc...] [--silent] [filename]\\n\\n\\nDESCRIPTION\\n       marked  is a full-featured javascript markdown parser, built for speed.\\n       It also includes multiple GFM features.\\n\\n\\nEXAMPLES\\n       cat in.md | marked > out.html\\n\\n       echo \\\"hello *world*\\\" | marked\\n\\n       marked -o out.html -i in.md --gfm\\n\\n       marked --output=\\\"hello world.html\\\" -i in.md --no-breaks\\n\\n\\nOPTIONS\\n       -o, --output [output]\\n\\t      Specify file output. If none is specified, write to stdout.\\n\\n       -i, --input [input]\\n\\t      Specify file input, otherwise use last argument as  input  file.\\n\\t      If no input file is specified, read from stdin.\\n\\n       -t, --tokens\\n\\t      Output a token stream instead of html.\\n\\n       --pedantic\\n\\t      Conform  to  obscure  parts  of markdown.pl as much as possible.\\n\\t      Don't fix original markdown bugs.\\n\\n       --gfm  Enable github flavored markdown.\\n\\n       --breaks\\n\\t      Enable GFM line breaks. Only works with the gfm option.\\n\\n       --tables\\n\\t      Enable GFM tables. Only works with the gfm option.\\n\\n       --sanitize\\n\\t      Sanitize output. Ignore any HTML input.\\n\\n       --smart-lists\\n\\t      Use smarter list behavior than the original markdown.\\n\\n       --lang-prefix [prefix]\\n\\t      Set the prefix for code block classes.\\n\\n       --mangle\\n\\t      Mangle email addresses.\\n\\n       --no-sanitize, -no-etc...\\n\\t      The inverse of any of the marked options above.\\n\\n       --silent\\n\\t      Silence error output.\\n\\n       -h, --help\\n\\t      Display help information.\\n\\n\\nCONFIGURATION\\n       For configuring and running programmatically.\\n\\n       Example\\n\\n\\t   require('marked')('*foo*', { gfm: true });\\n\\n\\nBUGS\\n       Please report any bugs to https://github.com/markedjs/marked.\\n\\n\\nLICENSE\\n       Copyright (c) 2011-2014, Christopher Jeffrey (MIT License).\\n\\n\\nSEE ALSO\\n       markdown(1), node.js(1)\\n\\n\\n\\nv0.3.1\\t\\t\\t\\t  2014-01-31\\t\\t\\t     marked(1)\\n\\n[end of marked.1.txt]\\n[start of AUTHORS.md]\\n# Authors\\n\\nMarked takes an encompassing approach to its community. As such, you can think of these as [concentric circles](https://medium.com/the-node-js-collection/healthy-open-source-967fa8be7951), where each group encompases the following groups.\\n\\n<table>\\n  <tbody>\\n  \\t<tr>\\n      <td align=\\\"center\\\" valign=\\\"top\\\" style=\\\"width:32%\\\">\\n        <a href=\\\"https://github.com/chjj\\\">\\n          <img width=\\\"100\\\" height=\\\"100\\\" src=\\\"https://github.com/chjj.png?s=150\\\">\\n        </a>\\n        <br>\\n        <a href=\\\"https://github.com/chjj\\\">Christopher Jeffrey</a>\\n        <div>Original Author</div>\\n        <small>Started the fire</small>\\n      </td>\\n      <td align=\\\"center\\\" valign=\\\"top\\\" style=\\\"width:32%\\\">\\n        <a href=\\\"https://github.com/joshbruce\\\">\\n          <img width=\\\"100\\\" height=\\\"100\\\" src=\\\"https://github.com/joshbruce.png?s=150\\\">\\n        </a>\\n        <br>\\n        <a href=\\\"https://joshbruce.com\\\">Josh Bruce</a>\\n        <div>Publisher</div>\\n        <small>Release Wrangler; Humaning Helper; Heckler of Hypertext</small>\\n      </td>\\n      <td align=\\\"center\\\" valign=\\\"top\\\" style=\\\"width:32%\\\">\\n        <a href=\\\"https://github.com/styfle\\\">\\n          <img width=\\\"100\\\" height=\\\"100\\\" src=\\\"https://github.com/styfle.png?s=150\\\">\\n        </a>\\n        <br>\\n        <a href=\\\"https://www.ceriously.com\\\">Steven</a>\\n        <div>Publisher</div>\\n        <small>Release Wrangler; Dr. Docs; Open source, of course; GitHub Guru; Humaning Helper</small>\\n      </td>\\n    </tr>\\n  \\t<tr>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <a href=\\\"https://github.com/davisjam\\\">\\n          <img width=\\\"100\\\" height=\\\"100\\\" src=\\\"https://github.com/davisjam.png?s=150\\\">\\n        </a>\\n        <br>\\n        <a href=\\\"https://github.com/davisjam\\\">Jamie Davis</a>\\n        <div>Committer</div>\\n        <small>Seeker of Security</small>\\n      </td>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <a href=\\\"https://github.com/UziTech\\\">\\n          <img width=\\\"100\\\" height=\\\"100\\\" src=\\\"https://github.com/UziTech.png?s=150\\\">\\n        </a>\\n        <br>\\n        <a href=\\\"https://tony.brix.ninja\\\">Tony Brix</a>\\n        <div>Publisher</div>\\n        <small>Release Wrangler; Titan of the test harness; Dr. DevOps</small>\\n      </td>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        &nbsp;\\n      </td>\\n    </tr>\\n  </tbody>\\n</table>\\n\\n<table>\\n  <tbody>\\n    <tr>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <a href=\\\"https://github.com/intcreator\\\">\\n          <img width=\\\"100\\\" height=\\\"100\\\" src=\\\"https://github.com/intcreator.png?s=150\\\">\\n        </a>\\n        <br>\\n        <a href=\\\"https://github.com/intcreator\\\">Brandon der Bl\\u00e4tter</a>\\n        <div>Contributor</div>\\n        <small>Curious Contributor</small>\\n      </td>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <a href=\\\"https://github.com/carlosvalle\\\">\\n          <img width=\\\"100\\\" height=\\\"100\\\" src=\\\"https://github.com/carlosvalle.png?s=150\\\">\\n        </a>\\n        <br>\\n        <a href=\\\"https://github.com/carlosvalle\\\">Carlos Valle</a>\\n        <div>Contributor</div>\\n        <small>Maker of the Marked mark from 2018 to present</small>\\n      </td>\\n      <td align=\\\"center\\\" width=\\\"20%\\\" valign=\\\"top\\\">\\n        <a href=\\\"https://github.com/Feder1co5oave\\\">\\n          <img width=\\\"100\\\" height=\\\"100\\\" src=\\\"https://github.com/Feder1co5oave.png?s=150\\\">\\n        </a>\\n        <br>\\n        <a href=\\\"https://github.com/Feder1co5oave\\\">Federico Soave</a>\\n        <div>Contributor</div>\\n        <small>Regent of the Regex; Master of Marked</small>\\n      </td>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <a href=\\\"https://github.com/karenyavine\\\">\\n          <img width=\\\"100\\\" height=\\\"100\\\" src=\\\"https://github.com/karenyavine.png?s=150\\\">\\n        </a>\\n        <br>\\n        <a href=\\\"https://github.com/karenyavine\\\">Karen Yavine</a>\\n        <div>Contributor</div>\\n        <small>Snyk's Security Saint</small>\\n      </td>\\n     </tr>\\n     <tr>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <a href=\\\"https://github.com/KostyaTretyak\\\">\\n          <img width=\\\"100\\\" height=\\\"100\\\" src=\\\"https://github.com/KostyaTretyak.png?s=150\\\">\\n        </a>\\n        <br>\\n        <a href=\\\"https://github.com/KostyaTretyak\\\">\\u041a\\u043e\\u0441\\u0442\\u044f \\u0422\\u0440\\u0435\\u0442\\u044f\\u043a</a>\\n        <div>Contributor</div>\\n        <small></small>\\n      </td>\\n      <td align=\\\"center\\\" width=\\\"20%\\\" valign=\\\"top\\\">\\n        <a href=\\\"https://github.com/tomtheisen\\\">\\n          <img width=\\\"100\\\" height=\\\"100\\\" src=\\\"https://github.com/tomtheisen.png?s=150\\\">\\n        </a>\\n        <br>\\n        <a href=\\\"https://github.com/tomtheisen\\\">Tom Theisen</a>\\n        <div>Contributor</div>\\n        <small>Defibrillator</small>\\n      </td>\\n      <td align=\\\"center\\\" width=\\\"20%\\\" valign=\\\"top\\\">\\n        <a href=\\\"https://github.com/mccraveiro\\\">\\n          <img width=\\\"100\\\" height=\\\"100\\\" src=\\\"https://github.com/mccraveiro.png?s=150\\\">\\n        </a>\\n        <br>\\n        <a href=\\\"https://github.com/mccraveiro\\\">Mateus Craveiro</a>\\n        <div>Contributor</div>\\n        <small>Defibrillator</small>\\n      </td>\\n      <td align=\\\"center\\\" width=\\\"20%\\\" valign=\\\"top\\\">\\n      </td>\\n     </tr>\\n  </tbody>\\n</table>\\n\\n## Publishers\\n\\nPublishers are admins who also have the responsibility, privilege, and burden of publishing the new releases to NPM and performing outreach and external stakeholder communications. Further, when things go pear-shaped, they're the ones taking most of the heat. Finally, when things go well, they're the primary ones praising the contributors who made it possible.\\n\\n(In other words, while Admins are focused primarily on the internal workings of the project, Publishers are focused on internal *and* external concerns.)\\n\\n**Should not exceed 2:** Having more people with the authority to publish a release can quickly turn into a consensus seeking nightmare (design by committee). Having only one is preferred (Directly Responsible Individual); however, given the nature of the project and its history, having an immediate fallback, and a potential deep fallback (Original author) is probably a good idea.\\n\\n[Details on badges](#badges)\\n\\n## Admins\\n\\nAdmins are committers who also have the responsibility, privilege, and burden of selecting committers and making sure the project itself runs smoothly, which includes community maintenance, governance, dispute resolution, and so on. (Letting the contributors easily enter into, and work within, the project to begin contributing, with as little friction as possible.)\\n\\n**Should not exceed 3:** When there are too many people with the ability to resolve disputes, the dispute itself can quickly turn into a dispute amongst the admins themselves; therefore, we want this group to be small enough to commit to action and large enough to not put too much burden on one person. (Should ensure faster resolution and responsiveness.)\\n\\nTo be listed: Admins are usually selected from the pool of committers (or they volunteer, using the same process) who demonstrate good understanding of the marked culture, operations, and do their best to help new contributors get up to speed on how to contribute effectively to the project.\\n\\nTo be removed: You can remove yourself through the [GitHub UI](https://help.github.com/articles/removing-yourself-from-a-collaborator-s-repository/).\\n\\n[Details on badges](#badges)\\n\\n## Committers\\n\\nCommitters are contributors who also have the responsibility, privilege, some might even say burden of being able to review and merge contributions (just usually not their own).\\n\\nA note on \\\"decision making authority\\\". This is related to submitting PRs and the [advice process](http://www.reinventingorganizationswiki.com/Decision_Making). The person marked as having decision making authority over a certain area should be sought for advice in that area before committing to a course of action.\\n\\n**Should not exceed 5:** For larger PRs affecting more of the codebase and, most likely, review by more people, we try to keep this pool small and responsive and let those with decision making authority have final say without negative repercussions from the other committers.\\n\\nTo be listed: Committers are usually selected (or they volunteer, using the same process) from contributors who enter the discussions regarding the future direction of Marked (maybe even doing informal reviews of contributions despite not being able to merge them yourself).\\n\\nTo be removed: You can remove yourself through the [GitHub UI](https://help.github.com/articles/removing-yourself-from-a-collaborator-s-repository/).\\n\\nA note on volunteering:\\n\\n1. Please do not volunteer unless you believe you can demonstrate to your peers you can do the work required.\\n2. Please do not overcommit yourself; we count on those committed to the project to be responsive. Really consider, with all you have going on, wehther you able to really commit to it.\\n3. Don't let the previous frighten you away, it can always be changed later by you or your peers.\\n\\n[Details on badges](#badges)\\n\\n## Contributors\\n\\nContributors are users who submit a [PR](https://github.com/markedjs/marked/pulls), [Issue](https://github.com/markedjs/marked/issues), or collaborate in making Marked a better product and experience for all the users.\\n\\nTo be listed: make a contribution and, if it has significant impact, the committers may be able to add you here.\\n\\nTo be removed: please let us know or submit a PR.\\n\\n[Details on badges](#badges)\\n\\n## Users\\n\\nUsers are anyone using Marked in some fashion, without them, there's no reason for us to exist.\\n\\n|Individual or Organization |Website                 |Project                              |Submitted by                                        |\\n|:--------------------------|:-----------------------|:------------------------------------|:---------------------------------------------------|\\n|MarkedJS                   |https://marked.js.org   |https://github.com/markedjs/marked   |The marked committers                               |\\n\\nTo be listed: All fields are optional. Contact any of the committers or, more timely, submit a pull request with the following (using the first row as an example):\\n\\n- **Individual or Organization:** The name you would like associated with the record.\\n- **Website:** A URL to a standalone website for the project.\\n- **Project:** A URL for the repository of the project using marked.\\n- **Submitted by:** The name and optional honorifics for the person adding the listing.\\n\\nTo be removed: Same as above. Only instead of requesting addition request deletion or delete the row yourself.\\n\\n<h2 id=\\\"badges\\\">Badges</h2>\\n\\nBadges? You don't *need* no stinkin' badges.\\n\\nMovie references aside. (It was either that or, \\\"Let's play a game\\\", but that would have been creepy&hellip;that's why it will most likely come later.)\\n\\nBadges? If you *want* 'em, we got 'em, and here's how you get 'em (and&hellip;dramatic pause&hellip;why not two dramatic pauses for emphasis?&hellip; how they can be taken away).\\n\\n- [ ] Add the appropriate badge to the desired contributor in the desired column of this page, even if they're not listed here yet.\\n- [ ] Submit a PR (we're big on PRs around here, if you haven't noticed, help us help you).\\n- [ ] Follow the instructions for submitting a badge PR. (There are more details to find within. Come on. Everybody likes surprises, right? No? Actually, we just try to put documentation where it belongs, closer to the code and part of the sequence of events.)\\n\\n### Badges at play:\\n\\n<dl>\\n\\t<dt>Curious Contributor</dt>\\n\\t<dd>A contributor with less than one year on this page who is actively engaged in submitting PRs, Issues, making recommendations, sharing thoughts&hellip;without being too annoying about it (let's be clear, submitting 100 Issues recommending the Marked Committers send everyone candy is trying for the badge, not honestly earning it).</dd>\\n\\t<dt>Dr. DevOps</dt>\\n\\t<dd>\\n\\t\\t<p>Someone who understands and contributes to improving the developer experience and flow of Marked into the world.</p>\\n\\t\\t<blockquote>\\n\\t\\t\\t\\\"The main characteristic of the DevOps movement is to strongly advocate automation and monitoring at all steps of software construction, from integration, testing, releasing to deployment and infrastructure management. DevOps aims at shorter development cycles, increased deployment frequency, more dependable releases, in close alignment with business objectives.\\\" ~ <a href=\\\"https://www.wikipedia.org/wiki/DevOps\\\">Wikipedia</a>\\n\\t\\t</blockquote>\\n\\t</dd>\\n  <dt>Dr. Docs</dt>\\n  <dd>Someone who has contributed a great deal to the creation and maintainance of the non-code areas of marked.</dd>\\n\\t<dt>Eye for the CLI</dt>\\n\\t<dd>At this point? Pretty much anyone who can update that `man` file to the current Marked version without regression in the CLI tool itself.</dd>\\n\\t<dt>GitHub Guru</dt>\\n\\t<dd>Someone who always seems to be able to tell you easier ways to do things with GitHub.</dd>\\n\\t<dt>Humaning Helper</dt>\\n\\t<dd>Someone who goes out of their way to help contributors feel welcomed and valued. Further, someone who takes the extra steps(s) necessary to help new contributors get up to speed. Finally, they maintain composure even in times of disagreement and dispute resolution.</dd>\\n\\t<dt>Heckler of Hypertext</dt>\\n\\t<dd>Someone who demonstrates an esoteric level of knowledge when it comes to HTML. In other words, someone who says things like, \\\"Did you know most Markdown flavors don't have a way to render a description list (`dl`)? All the more reason Markdown `!==` HTML.\\\"</dd>\\n\\t<dt>Markdown Maestro</dt>\\n\\t<dd>You know that person who knows about way too many different flavors of Markdown? The one who maybe seems a little too obsessed with the possibilities of Markdown beyond HTML? Come on. You know who they are. Or, at least you could, if you give them this badge.</dd>\\n\\t<dt>Master of Marked</dt>\\n\\t<dd>Someone who demonstrates they know the ins and outs of the codebase for Marked.</dd>\\n\\t<dt>Open source, of course</dt>\\n\\t<dd>Someone who advocates for and has a proven understanding of how to operate within open source communities.</dd>\\n\\t<dt>Regent of the Regex</dt>\\n\\t<dd><p>Can you demonstrate you understand the following without Google and Stackoverflow?</p>\\n\\t\\t<p><code>/^( *)(bull) [\\\\s\\\\S]+?(?:hr|def|\\\\n{2,}(?! )(?!\\\\1bull )\\\\n*|\\\\s*$)/</code></p>\\n\\t\\t<p>Because this author can't yet. That's who gets these.</p>\\n\\t</dd>\\n\\t<dt>Seeker of Security</dt>\\n\\t<dd>Someone who has demonstrated a high degree of expertise or authority when it comes to software security.</dd>\\n\\t<dt>Titan of the Test Harness</dt>\\n\\t<dd>Someone who demonstrates high-levels of understanding regarding Marked's test harness.</dd>\\n\\t<dt>Totally Tron</dt>\\n\\t<dd>Someone who demonstrates they are willing and able to \\\"fight for the users\\\", both developers dependent on marked to do their jobs as well as end-users interacting with the output (particularly in the realm of those with the disabilities).</dd>\\n</dl>\\n\\n### Special badges that come with the job:\\n\\n<dl>\\n\\t<dt>Defibrillator</dt>\\n\\t<dd>A contributor who stepped up to help bring Marked back to life by contriuting solutions to help Marked pass when compared against the CommonMark and GitHub Flavored Markdown specifications.</dd>\\n\\t<dt>Maker of the Marked mark</dt>\\n\\t<dd>This badge is given to the person or oganization credited with creating the logo (or logotype) used in Marked communications for a given period of time. **Maker of the Marked mark from 2017 to present**, for example.</dd>\\n\\t<dt>Release Wrangler</dt>\\n\\t<dd>This is a badge given to all Publishers.</dd>\\n\\t<dt>Snyk's Security Saint</dt>\\n\\t<dd>This is a badge given to whomever primarily reaches out from Snyk to let us know about security issues.</dd>\\n</dl>\\n\\n[end of AUTHORS.md]\\n[start of PULL_REQUEST_TEMPLATE.md]\\n\\n<!--\\n\\n\\tIf release PR, add ?template=release.md to the PR url to use the release PR template.\\n\\n\\tIf badging PR, add ?template=badges.md to the PR url to use the badges PR template.\\n\\n\\tOtherwise, you are stating this PR fixes an issue that has been submitted; or,\\n\\tdescribes the issue or proposal under consideration and contains the project-related code to implement.\\n\\n-->\\n\\n**Marked version:**\\n\\n<!-- The NPM version or commit hash having the issue -->\\n\\n**Markdown flavor:** Markdown.pl|CommonMark|GitHub Flavored Markdown|n/a\\n\\n## Description\\n\\n- Fixes #### (if fixing a known issue; otherwise, describe issue using the following format)\\n\\n<!--\\n\\n\\tIf no issue exists that you're aware of. The maintainers should be able to figure out if it's a duplicate.\\n\\n## Expectation\\n\\nDescribe the output you are expecting from marked\\n\\n## Result\\n\\nDescribe the output you received from marked\\n\\n## What was attempted\\n\\nDescribe what code combination got you there\\n\\n-->\\n\\n## Contributor\\n\\n- [ ] Test(s) exist to ensure functionality and minimize regression (if no tests added, list tests covering this PR); or,\\n- [ ] no tests required for this PR.\\n- [ ] If submitting new feature, it has been documented in the appropriate places.\\n\\n## Committer\\n\\nIn most cases, this should be a different person than the contributor.\\n\\n- [ ] Draft GitHub release notes have been updated.\\n- [ ] CI is green (no forced merge required).\\n- [ ] Merge PR\\n\\n[end of PULL_REQUEST_TEMPLATE.md]\\n[start of index.js]\\n#!/usr/bin/env node\\n\\n/**\\n * marked tests\\n * Copyright (c) 2011-2013, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n\\n/**\\n * Modules\\n */\\n\\nvar fs = require('fs'),\\n    path = require('path'),\\n    fm = require('front-matter'),\\n    g2r = require('glob-to-regexp'),\\n    marked = require('../'),\\n    markedMin = require('../marked.min.js');\\n\\n/**\\n * Load Tests\\n */\\n\\nfunction load(options) {\\n  options = options || {};\\n  var dir = path.join(__dirname, 'compiled_tests'),\\n      files = {},\\n      list,\\n      file,\\n      name,\\n      content,\\n      glob = g2r(options.glob || '*', { extended: true }),\\n      i,\\n      l;\\n\\n  list = fs\\n    .readdirSync(dir)\\n    .filter(function(file) {\\n      return path.extname(file) === '.md';\\n    })\\n    .sort();\\n\\n  l = list.length;\\n\\n  for (i = 0; i < l; i++) {\\n    name = path.basename(list[i], '.md');\\n    if (glob.test(name)) {\\n      file = path.join(dir, list[i]);\\n      content = fm(fs.readFileSync(file, 'utf8'));\\n\\n      files[name] = {\\n        options: content.attributes,\\n        text: content.body,\\n        html: fs.readFileSync(file.replace(/[^.]+$/, 'html'), 'utf8')\\n      };\\n    }\\n  }\\n\\n  if (options.bench || options.time) {\\n    if (!options.glob) {\\n      // Change certain tests to allow\\n      // comparison to older benchmark times.\\n      fs.readdirSync(path.join(__dirname, 'new')).forEach(function(name) {\\n        if (path.extname(name) === '.html') return;\\n        if (name === 'main.md') return;\\n        delete files[name];\\n      });\\n    }\\n\\n    if (files['backslash_escapes.md']) {\\n      files['backslash_escapes.md'] = {\\n        text: 'hello world \\\\\\\\[how](are you) today'\\n      };\\n    }\\n\\n    if (files['main.md']) {\\n      files['main.md'].text = files['main.md'].text.replace('* * *\\\\n\\\\n', '');\\n    }\\n  }\\n\\n  return files;\\n}\\n\\n/**\\n * Test Runner\\n */\\n\\nfunction runTests(engine, options) {\\n  if (typeof engine !== 'function') {\\n    options = engine;\\n    engine = null;\\n  }\\n\\n  engine = engine || marked;\\n  options = options || {};\\n  var succeeded = 0,\\n      failed = 0,\\n      files = options.files || load(options),\\n      filenames = Object.keys(files),\\n      len = filenames.length,\\n      success,\\n      i,\\n      filename,\\n      file;\\n\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n\\n  for (i = 0; i < len; i++) {\\n    filename = filenames[i];\\n    file = files[filename];\\n\\n    success = testFile(engine, file, filename, i + 1);\\n\\n    if (success) {\\n      succeeded++;\\n    } else {\\n      failed++;\\n      if (options.stop) {\\n        break;\\n      }\\n    }\\n  }\\n\\n  console.log('%d/%d tests completed successfully.', succeeded, len);\\n  if (failed) console.log('%d/%d tests failed.', failed, len);\\n\\n  return !failed;\\n}\\n\\n/**\\n * Test a file\\n */\\n\\nfunction testFile(engine, file, filename, index) {\\n  var opts = Object.keys(file.options),\\n      text,\\n      html,\\n      j,\\n      l,\\n      before,\\n      elapsed;\\n\\n  if (marked._original) {\\n    marked.defaults = marked._original;\\n    delete marked._original;\\n  }\\n\\n  console.log('#%d. Test %s', index, filename);\\n\\n  if (opts.length) {\\n    marked._original = marked.defaults;\\n    marked.defaults = {};\\n    Object.keys(marked._original).forEach(function(key) {\\n      marked.defaults[key] = marked._original[key];\\n    });\\n    opts.forEach(function(key) {\\n      if (marked.defaults.hasOwnProperty(key)) {\\n        marked.defaults[key] = file.options[key];\\n      }\\n    });\\n  }\\n\\n  before = process.hrtime();\\n  try {\\n    text = engine(file.text).replace(/\\\\s/g, '');\\n    html = file.html.replace(/\\\\s/g, '');\\n  } catch (e) {\\n    elapsed = process.hrtime(before);\\n    console.log('    failed in %dms', prettyElapsedTime(elapsed));\\n    throw e;\\n  }\\n\\n  elapsed = process.hrtime(before);\\n\\n  l = html.length;\\n\\n  for (j = 0; j < l; j++) {\\n    if (text[j] !== html[j]) {\\n      text = text.substring(\\n        Math.max(j - 30, 0),\\n        Math.min(j + 30, text.length));\\n\\n      html = html.substring(\\n        Math.max(j - 30, 0),\\n        Math.min(j + 30, l));\\n\\n      console.log('    failed in %dms at offset %d. Near: \\\"%s\\\".\\\\n', prettyElapsedTime(elapsed), j, text);\\n\\n      console.log('\\\\nGot:\\\\n%s\\\\n', text.trim() || text);\\n      console.log('\\\\nExpected:\\\\n%s\\\\n', html.trim() || html);\\n\\n      return false;\\n    }\\n  }\\n\\n  if (elapsed[0] > 0) {\\n    console.log('    failed because it took too long.\\\\n\\\\n    passed in %dms', prettyElapsedTime(elapsed));\\n    return false;\\n  }\\n\\n  console.log('    passed in %dms', prettyElapsedTime(elapsed));\\n  return true;\\n}\\n\\n/**\\n * Benchmark a function\\n */\\n\\nfunction bench(name, files, func) {\\n  var start = Date.now(),\\n      times = 1000,\\n      keys = Object.keys(files),\\n      i,\\n      l = keys.length,\\n      filename,\\n      file;\\n\\n  while (times--) {\\n    for (i = 0; i < l; i++) {\\n      filename = keys[i];\\n      file = files[filename];\\n      func(file.text);\\n    }\\n  }\\n\\n  console.log('%s completed in %dms.', name, Date.now() - start);\\n}\\n\\n/**\\n * Benchmark all engines\\n */\\n\\nfunction runBench(options) {\\n  options = options || {};\\n  var files = load(options);\\n\\n  // Non-GFM, Non-pedantic\\n  marked.setOptions({\\n    gfm: false,\\n    tables: false,\\n    breaks: false,\\n    pedantic: false,\\n    sanitize: false,\\n    smartLists: false\\n  });\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked', files, marked);\\n\\n  // GFM\\n  marked.setOptions({\\n    gfm: true,\\n    tables: false,\\n    breaks: false,\\n    pedantic: false,\\n    sanitize: false,\\n    smartLists: false\\n  });\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked (gfm)', files, marked);\\n\\n  // Pedantic\\n  marked.setOptions({\\n    gfm: false,\\n    tables: false,\\n    breaks: false,\\n    pedantic: true,\\n    sanitize: false,\\n    smartLists: false\\n  });\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked (pedantic)', files, marked);\\n\\n  // showdown\\n  try {\\n    bench('commonmark', files, (function() {\\n      var commonmark = require('commonmark'),\\n          parser = new commonmark.Parser(),\\n          writer = new commonmark.HtmlRenderer();\\n      return function(text) {\\n        return writer.render(parser.parse(text));\\n      };\\n    })());\\n  } catch (e) {\\n    console.log('Could not bench commonmark. (Error: %s)', e.message);\\n  }\\n\\n  // markdown-it\\n  try {\\n    bench('markdown-it', files, (function() {\\n      var MarkdownIt = require('markdown-it');\\n      var md = new MarkdownIt();\\n      return function(text) {\\n        return md.render(text);\\n      };\\n    })());\\n  } catch (e) {\\n    console.log('Could not bench markdown-it. (Error: %s)', e.message);\\n  }\\n\\n  // markdown.js\\n  try {\\n    bench('markdown.js', files, (function() {\\n      var markdown = require('markdown').markdown;\\n      return function(text) {\\n        return markdown.toHTML(text);\\n      };\\n    })());\\n  } catch (e) {\\n    console.log('Could not bench markdown.js. (Error: %s)', e.message);\\n  }\\n\\n  return true;\\n}\\n\\n/**\\n * A simple one-time benchmark\\n */\\n\\nfunction time(options) {\\n  options = options || {};\\n  var files = load(options);\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked', files, marked);\\n\\n  return true;\\n}\\n\\n/**\\n * Markdown Test Suite Fixer\\n *   This function is responsible for \\\"fixing\\\"\\n *   the markdown test suite. There are\\n *   certain aspects of the suite that\\n *   are strange or might make tests\\n *   fail for reasons unrelated to\\n *   conformance.\\n */\\n\\nfunction fix() {\\n  ['compiled_tests', 'original', 'new'].forEach(function(dir) {\\n    try {\\n      fs.mkdirSync(path.resolve(__dirname, dir));\\n    } catch (e) {\\n      ;\\n    }\\n  });\\n\\n  // rm -rf tests\\n  fs.readdirSync(path.resolve(__dirname, 'compiled_tests')).forEach(function(file) {\\n    fs.unlinkSync(path.resolve(__dirname, 'compiled_tests', file));\\n  });\\n\\n  // cp -r original tests\\n  fs.readdirSync(path.resolve(__dirname, 'original')).forEach(function(file) {\\n    var text = fs.readFileSync(path.resolve(__dirname, 'original', file), 'utf8');\\n\\n    if (path.extname(file) === '.md') {\\n      if (fm.test(text)) {\\n        text = fm(text);\\n        text = '---\\\\n' + text.frontmatter + '\\\\ngfm: false\\\\n---\\\\n' + text.body;\\n      } else {\\n        text = '---\\\\ngfm: false\\\\n---\\\\n' + text;\\n      }\\n    }\\n\\n    fs.writeFileSync(path.resolve(__dirname, 'compiled_tests', file), text);\\n  });\\n\\n  // node fix.js\\n  var dir = path.join(__dirname, 'compiled_tests');\\n\\n  fs.readdirSync(dir).filter(function(file) {\\n    return path.extname(file) === '.html';\\n  }).forEach(function(file) {\\n    file = path.join(dir, file);\\n    var html = fs.readFileSync(file, 'utf8');\\n\\n    // fix unencoded quotes\\n    html = html\\n      .replace(/='([^\\\\n']*)'(?=[^<>\\\\n]*>)/g, '=&__APOS__;$1&__APOS__;')\\n      .replace(/=\\\"([^\\\\n\\\"]*)\\\"(?=[^<>\\\\n]*>)/g, '=&__QUOT__;$1&__QUOT__;')\\n      .replace(/\\\"/g, '&quot;')\\n      .replace(/'/g, '&#39;')\\n      .replace(/&__QUOT__;/g, '\\\"')\\n      .replace(/&__APOS__;/g, '\\\\'');\\n\\n    // add heading id's\\n    html = html.replace(/<(h[1-6])>([^<]+)<\\\\/\\\\1>/g, function(s, h, text) {\\n      var id = text\\n        .replace(/&#39;/g, '\\\\'')\\n        .replace(/&quot;/g, '\\\"')\\n        .replace(/&gt;/g, '>')\\n        .replace(/&lt;/g, '<')\\n        .replace(/&amp;/g, '&');\\n\\n      id = id.toLowerCase().replace(/[^\\\\w]+/g, '-');\\n\\n      return '<' + h + ' id=\\\"' + id + '\\\">' + text + '</' + h + '>';\\n    });\\n\\n    fs.writeFileSync(file, html);\\n  });\\n\\n  // turn <hr /> into <hr>\\n  fs.readdirSync(dir).forEach(function(file) {\\n    file = path.join(dir, file);\\n    var text = fs.readFileSync(file, 'utf8');\\n\\n    text = text.replace(/(<|&lt;)hr\\\\s*\\\\/(>|&gt;)/g, '$1hr$2');\\n\\n    fs.writeFileSync(file, text);\\n  });\\n\\n  // markdown does some strange things.\\n  // it does not encode naked `>`, marked does.\\n  (function() {\\n    var file = dir + '/amps_and_angles_encoding.html';\\n    var html = fs.readFileSync(file, 'utf8')\\n      .replace('6 > 5.', '6 &gt; 5.');\\n\\n    fs.writeFileSync(file, html);\\n  })();\\n\\n  // cp new/* tests/\\n  fs.readdirSync(path.resolve(__dirname, 'new')).forEach(function(file) {\\n    fs.writeFileSync(path.resolve(__dirname, 'compiled_tests', file),\\n      fs.readFileSync(path.resolve(__dirname, 'new', file)));\\n  });\\n}\\n\\n/**\\n * Argument Parsing\\n */\\n\\nfunction parseArg() {\\n  var argv = process.argv.slice(2),\\n      options = {},\\n      opt = '',\\n      orphans = [],\\n      arg;\\n\\n  function getarg() {\\n    var arg = argv.shift();\\n\\n    if (arg.indexOf('--') === 0) {\\n      // e.g. --opt\\n      arg = arg.split('=');\\n      if (arg.length > 1) {\\n        // e.g. --opt=val\\n        argv.unshift(arg.slice(1).join('='));\\n      }\\n      arg = arg[0];\\n    } else if (arg[0] === '-') {\\n      if (arg.length > 2) {\\n        // e.g. -abc\\n        argv = arg.substring(1).split('').map(function(ch) {\\n          return '-' + ch;\\n        }).concat(argv);\\n        arg = argv.shift();\\n      } else {\\n        // e.g. -a\\n      }\\n    } else {\\n      // e.g. foo\\n    }\\n\\n    return arg;\\n  }\\n\\n  while (argv.length) {\\n    arg = getarg();\\n    switch (arg) {\\n      case '-f':\\n      case '--fix':\\n      case 'fix':\\n        if (options.fix !== false) {\\n          options.fix = true;\\n        }\\n        break;\\n      case '--no-fix':\\n      case 'no-fix':\\n        options.fix = false;\\n        break;\\n      case '-b':\\n      case '--bench':\\n        options.bench = true;\\n        break;\\n      case '-s':\\n      case '--stop':\\n        options.stop = true;\\n        break;\\n      case '-t':\\n      case '--time':\\n        options.time = true;\\n        break;\\n      case '-m':\\n      case '--minified':\\n        options.minified = true;\\n        break;\\n      case '--glob':\\n        arg = argv.shift();\\n        options.glob = arg.replace(/^=/, '');\\n        break;\\n      default:\\n        if (arg.indexOf('--') === 0) {\\n          opt = camelize(arg.replace(/^--(no-)?/, ''));\\n          if (!marked.defaults.hasOwnProperty(opt)) {\\n            continue;\\n          }\\n          options.marked = options.marked || {};\\n          if (arg.indexOf('--no-') === 0) {\\n            options.marked[opt] = typeof marked.defaults[opt] !== 'boolean'\\n              ? null\\n              : false;\\n          } else {\\n            options.marked[opt] = typeof marked.defaults[opt] !== 'boolean'\\n              ? argv.shift()\\n              : true;\\n          }\\n        } else {\\n          orphans.push(arg);\\n        }\\n        break;\\n    }\\n  }\\n\\n  return options;\\n}\\n\\n/**\\n * Helpers\\n */\\n\\nfunction camelize(text) {\\n  return text.replace(/(\\\\w)-(\\\\w)/g, function(_, a, b) {\\n    return a + b.toUpperCase();\\n  });\\n}\\n\\n/**\\n * Main\\n */\\n\\nfunction main(argv) {\\n  var opt = parseArg();\\n\\n  if (opt.fix !== false) {\\n    fix();\\n  }\\n\\n  if (opt.fix) {\\n    // only run fix\\n    return;\\n  }\\n\\n  if (opt.bench) {\\n    return runBench(opt);\\n  }\\n\\n  if (opt.time) {\\n    return time(opt);\\n  }\\n\\n  if (opt.minified) {\\n    marked = markedMin;\\n  }\\n  return runTests(opt);\\n}\\n\\n/**\\n * Execute\\n */\\n\\nif (!module.parent) {\\n  process.title = 'marked';\\n  process.exit(main(process.argv.slice()) ? 0 : 1);\\n} else {\\n  exports = main;\\n  exports.main = main;\\n  exports.runTests = runTests;\\n  exports.testFile = testFile;\\n  exports.runBench = runBench;\\n  exports.load = load;\\n  exports.bench = bench;\\n  module.exports = exports;\\n}\\n\\n// returns time to millisecond granularity\\nfunction prettyElapsedTime(hrtimeElapsed) {\\n  var seconds = hrtimeElapsed[0];\\n  var frac = Math.round(hrtimeElapsed[1] / 1e3) / 1e3;\\n  return seconds * 1e3 + frac;\\n}\\n\\n[end of index.js]\\n[start of CONTRIBUTING.md]\\n# Contributing to Marked\\n\\n- [ ] Fork `markedjs/marked`.\\n- [ ] Clone the library locally using GitHub Desktop or the command line.\\n- [ ] Make sure you are on the `master` branch.\\n- [ ] Be sure to run `npm install` or `npm update`.\\n- [ ] Create a branch.\\n- [ ] Make as small a change as possible.\\n- [ ] Run `npm test`, fix any broken things (for linting, you can run `npm run lint` to have the linter fix them for you).\\n- [ ] Submit a PR.\\n\\n## Design principles\\n\\nMarked tends to favor following the SOLID set of software design and development principles; mainly the [single responsibility](https://en.wikipedia.org/wiki/Single_responsibility_principle) and [open/closed principles](https://en.wikipedia.org/wiki/Open/closed_principle):\\n\\n- **Single responsibility:** Marked, and the components of Marked, have the single responsibility of converting Markdown strings into HTML.\\n- **Open/closed:** Marked favors giving developers the means to easily extend the library and its components over changing Marked's behavior through configuration options.\\n\\n## Priorities\\n\\nWe think we have our priorities sorted to build quality in.\\n\\nThe following table lists the ticket type labels we use when there is work to be done on the code either through an Issue or a PR; in priority order.\\n\\n|Ticket type label                  |Description                                                                                                                                                                         |\\n|:----------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\\n|L0 - security                      |A security vulnerability within the Marked library is discovered.                                                                                                                   |\\n|L1 - broken                        |Valid usage results in incorrect output compared to [supported specifications](#/README.md#specifications) OR causes marked to crash AND there is no known workaround for the issue. |\\n|L2 - annoying                      |Similar to L1 - broken only there is a known workaround avaialable for the issue.                                                                                                   |\\n|RR - refactor and re-engineer      |Results in an improvement to developers using Marked (improved readability) or end-users (faster performance) or both.                                                              |\\n|NFS - new feature (spec related)   |A capability Marked does not currently provide but is in one of the [supported specifications](#/README.md#specifications)                                                           |\\n|NFU - new feature (user requested) |A capability Marked does not currently provide but has been requested by users of Marked.                                                                                           |\\n\\n## Test early, often, and everything\\n\\nWe try to write test cases to validate output (writing tests based on the [supported specifications](#/README.md#specifications)) and minimize regression (writing tests for issues fixed). Therefore, if you would like to contribute, some things you should know regarding the test harness.\\n\\n|Location      |Description                                         |\\n|:-------------|:---------------------------------------------------|\\n|/test/browser |For testing Marked in a client-side implementation. |\\n|/test/new     |Tests not related to the original `markdown.pl`.    |\\n|/test/original|Tests validating against the original `markdown.pl`.|\\n\\nIf your test uses features or options, assuming `gfm` is set to `false`, for example, you can add [front-matter](https://www.npmjs.com/package/front-matter) to the top of\\nyour `.md` file\\n\\n``` yml\\n---\\ngfm: false\\n---\\n```\\n\\n## Submitting PRs and Issues\\n\\nMarked provides templates for submitting both pull requests and issues. When you begin creating a new PR or issue, you will see instructions on using the template.\\n\\nThe PR templates include checklists for both the submitter and the reviewer, which, in most cases, will not be the same person.\\n\\n## Scripts\\n\\nWhen it comes to NPM commands, we try to use the native scripts provided by the NPM framework.\\n\\nTo run the tests:\\n\\n``` bash\\nnpm test\\n```\\n\\nTo test whether you are using the standard syntax rules for the project:\\n\\n```bash\\nnpm run test:lint\\n```\\n\\nTo see time comparisons between Marked and other popular Markdown libraries:\\n\\n```bash\\nnpm run bench\\n```\\n\\nTo check for (and fix) standardized syntax (lint):\\n\\n```bash\\nnpm run lint\\n```\\n\\nTo build your own minified version of Marked:\\n\\n```bash\\nnpm run build\\n```\\n\\n\\n[end of CONTRIBUTING.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "marked.1.txt",
        "AUTHORS.md",
        "PULL_REQUEST_TEMPLATE.md",
        "index.js",
        "CONTRIBUTING.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "424f9d6e-e403-4667-a3bb-550cfb9d124e",
        "score": 0.01639344262295082,
        "payload": {
          "text": "marked(1)\t\t\t   marked.js\t\t\t     marked(1)\n\n\n\nNAME\n       marked - a javascript markdown parser\n\n\nSYNOPSIS\n       marked  [-o  <output>]  [-i  <input>]  [--help] [--tokens] [--pedantic]\n       [--gfm] [--breaks] [--tables] [--sanitize] [--smart-lists] [--lang-pre\u2010\n       fix <prefix>] [--no-etc...] [--silent] [filename]\n\n\nDESCRIPTION\n       marked  is a full-featured javascript markdown parser, built for speed.\n       It also includes multiple GFM features.\n\n\nEXAMPLES\n       cat in.md | marked > out.html\n\n       echo \"hello *world*\" | marked\n\n       marked -o out.html -i in.md --gfm\n\n       marked --output=\"hello world.html\" -i in.md --no-breaks\n\n\nOPTIONS\n       -o, --output [output]\n\t      Specify file output. If none is specified, write to stdout.\n\n       -i, --input [input]\n\t      Specify file input, otherwise use last argument as  input  file.\n\t      If no input file is specified, read from stdin.\n\n       -t, --tokens\n\t      Output a token stream instead of html.\n\n       --pedantic\n\t      Conform  to  obscure  parts  of markdown.pl as much as possible.\n\t      Don't fix original markdown bugs.\n\n       --gfm  Enable github flavored markdown.\n\n       --breaks\n\t      Enable GFM line breaks. Only works with the gfm option.\n\n       --tables\n\t      Enable GFM tables. Only works with the gfm option.\n\n       --sanitize\n\t      Sanitize output. Ignore any HTML input.\n\n       --smart-lists\n\t      Use smarter list behavior than the original markdown.\n\n       --lang-prefix [prefix]\n\t      Set the prefix for code block classes.\n\n       --mangle\n\t      Mangle email addresses.\n\n       --no-sanitize, -no-etc...\n\t      The inverse of any of the marked options above.\n\n       --silent\n\t      Silence error output.\n\n       -h, --help\n\t      Display help information.\n\n\nCONFIGURATION\n       For configuring and running programmatically.\n\n       Example\n\n\t   require('marked')('*foo*', { gfm: true });\n\n\nBUGS\n       Please report any bugs to https://github.com/markedjs/marked.\n\n\nLICENSE\n       Copyright (c) 2011-2014, Christopher Jeffrey (MIT License).\n\n\nSEE ALSO\n       markdown(1), node.js(1)\n\n\n\nv0.3.1\t\t\t\t  2014-01-31\t\t\t     marked(1)\n",
          "filepath": "data/repos/markedjs/marked-0.6/man/marked.1.txt",
          "repo": "markedjs/marked",
          "version": "0.6",
          "chunk_index": 0
        }
      },
      {
        "id": "f075e32d-a24d-43ac-ac05-78cf2bd5a380",
        "score": 0.016129032258064516,
        "payload": {
          "text": "# Authors\n\nMarked takes an encompassing approach to its community. As such, you can think of these as [concentric circles](https://medium.com/the-node-js-collection/healthy-open-source-967fa8be7951), where each group encompases the following groups.\n\n<table>\n  <tbody>\n  \t<tr>\n      <td align=\"center\" valign=\"top\" style=\"width:32%\">\n        <a href=\"https://github.com/chjj\">\n          <img width=\"100\" height=\"100\" src=\"https://github.com/chjj.png?s=150\">\n        </a>\n        <br>\n        <a href=\"https://github.com/chjj\">Christopher Jeffrey</a>\n        <div>Original Author</div>\n        <small>Started the fire</small>\n      </td>\n      <td align=\"center\" valign=\"top\" style=\"width:32%\">\n        <a href=\"https://github.com/joshbruce\">\n          <img width=\"100\" height=\"100\" src=\"https://github.com/joshbruce.png?s=150\">\n        </a>\n        <br>\n        <a href=\"https://joshbruce.com\">Josh Bruce</a>\n        <div>Publisher</div>\n        <small>Release Wrangler; Humaning Helper; Heckler of Hypertext</small>\n      </td>\n      <td align=\"center\" valign=\"top\" style=\"width:32%\">\n        <a href=\"https://github.com/styfle\">\n          <img width=\"100\" height=\"100\" src=\"https://github.com/styfle.png?s=150\">\n        </a>\n        <br>\n        <a href=\"https://www.ceriously.com\">Steven</a>\n        <div>Publisher</div>\n        <small>Release Wrangler; Dr. Docs; Open source, of course; GitHub Guru; Humaning Helper</small>\n      </td>\n    </tr>\n  \t<tr>\n      <td align=\"center\" valign=\"top\">\n        <a href=\"https://github.com/davisjam\">\n          <img width=\"100\" height=\"100\" src=\"https://github.com/davisjam.png?s=150\">\n        </a>\n        <br>\n        <a href=\"https://github.com/davisjam\">Jamie Davis</a>\n        <div>Committer</div>\n        <small>Seeker of Security</small>\n      </td>\n      <td align=\"center\" valign=\"top\">\n        <a href=\"https://github.com/UziTech\">\n          <img width=\"100\" height=\"100\" src=\"https://github.com/UziTech.png?s=150\">\n        </a>\n        <br>\n        <a href=\"https://tony.brix.ninja\">Tony Brix</a>\n        <div>Publisher</div>\n        <small>Release Wrangler; Titan of the test harness; Dr. DevOps</small>\n      </td>\n      <td align=\"center\" valign=\"top\">\n        &nbsp;\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<table>\n  <tbody>\n    <tr>\n      <td align=\"center\" valign=\"top\">\n        <a href=\"https://github.com/intcreator\">\n          <img width=\"100\" height=\"100\" src=\"https://github.com/intcreator.png?s=150\">\n        </a>\n        <br>\n        <a href=\"https://github.com/intcreator\">Brandon der Bl\u00e4tter</a>\n        <div>Contributor</div>\n        <small>Curious Contributor</small>\n      </td>\n      <td align=\"center\" valign=\"top\">\n        <a href=\"https://github.com/carlosvalle\">\n          <img width=\"100\" height=\"100\" src=\"https://github.com/carlosvalle.png?s=150\">\n        </a>\n        <br>\n        <a href=\"https://github.com/carlosvalle\">Carlos Valle</a>\n        <div>Contributor</div>\n        <small>Maker of the Marked mark from 2018 to present</small>\n      </td>\n      <td align=\"center\" width=\"20%\" valign=\"top\">\n        <a href=\"https://github.com/Feder1co5oave\">\n          <img width=\"100\" height=\"100\" src=\"https://github.com/Feder1co5oave.png?s=150\">\n        </a>\n        <br>\n        <a href=\"https://github.com/Feder1co5oave\">Federico Soave</a>\n        <div>Contributor</div>\n        <small>Regent of the Regex; Master of Marked</small>\n      </td>\n      <td align=\"center\" valign=\"top\">\n        <a href=\"https://github.com/karenyavine\">\n          <img width=\"100\" height=\"100\" src=\"https://github.com/karenyavine.png?s=150\">\n        </a>\n        <br>\n        <a href=\"https://github.com/karenyavine\">Karen Yavine</a>\n        <div>Contributor</div>\n        <small>Snyk's Security Saint</small>\n      </td>\n     </tr>\n     <tr>\n      <td align=\"center\" valign=\"top\">\n        <a href=\"https://github.com/KostyaTretyak\">\n          <img width=\"100\" height=\"100\" src=\"https://github.com/KostyaTretyak.png?s=150\">\n        </a>\n        <br>\n        <a href=\"https://github.com/KostyaTretyak\">\u041a\u043e\u0441\u0442\u044f \u0422\u0440\u0435\u0442\u044f\u043a</a>\n        <div>Contributor</div>\n        <small></small>\n      </td>\n      <td align=\"center\" width=\"20%\" valign=\"top\">\n        <a href=\"https://github.com/tomtheisen\">\n          <img width=\"100\" height=\"100\" src=\"https://github.com/tomtheisen.png?s=150\">\n        </a>\n        <br>\n        <a href=\"https://github.com/tomtheisen\">Tom Theisen</a>\n        <div>Contributor</div>\n        <small>Defibrillator</small>\n      </td>\n      <td align=\"center\" width=\"20%\" valign=\"top\">\n        <a href=\"https://github.com/mccraveiro\">\n          <img width=\"100\" height=\"100\" src=\"https://github.com/mccraveiro.png?s=150\">\n        </a>\n        <br>\n        <a href=\"https://github.com/mccraveiro\">Mateus Craveiro</a>\n        <div>Contributor</div>\n        <small>Defibrillator</small>\n      </td>\n      <td align=\"center\" width=\"20%\" valign=\"top\">\n      </td>\n     </tr>\n  </tbody>\n</table>\n\n## Publishers\n\nPublishers are admins who also have the responsibility, privilege, and burden of publishing the new releases to NPM and performing outreach and external stakeholder communications. Further, when things go pear-shaped, they're the ones taking most of the heat. Finally, when things go well, they're the primary ones praising the contributors who made it possible.\n\n(In other words, while Admins are focused primarily on the internal workings of the project, Publishers are focused on internal *and* external concerns.)\n\n**Should not exceed 2:** Having more people with the authority to publish a release can quickly turn into a consensus seeking nightmare (design by committee). Having only one is preferred (Directly Responsible Individual); however, given the nature of the project and its history, having an immediate fallback, and a potential deep fallback (Original author) is probably a good idea.\n\n[Details on badges](#badges)\n\n## Admins\n\nAdmins are committers who also have the responsibility, privilege, and burden of selecting committers and making sure the project itself runs smoothly, which includes community maintenance, governance, dispute resolution, and so on. (Letting the contributors easily enter into, and work within, the project to begin contributing, with as little friction as possible.)\n\n**Should not exceed 3:** When there are too many people with the ability to resolve disputes, the dispute itself can quickly turn into a dispute amongst the admins themselves; therefore, we want this group to be small enough to commit to action and large enough to not put too much burden on one person. (Should ensure faster resolution and responsiveness.)\n\nTo be listed: Admins are usually selected from the pool of committers (or they volunteer, using the same process) who demonstrate good understanding of the marked culture, operations, and do their best to help new contributors get up to speed on how to contribute effectively to the project.\n\nTo be removed: You can remove yourself through the [GitHub UI](https://help.github.com/articles/removing-yourself-from-a-collaborator-s-repository/).\n\n[Details on badges](#badges)\n\n## Committers\n\nCommitters are contributors who also have the responsibility, privilege, some might even say burden of being able to review and merge contributions (just usually not their own).\n\nA note on \"decision making authority\". This is related to submitting PRs and the [advice process](http://www.reinventingorganizationswiki.com/Decision_Making). The person marked as having decision making authority over a certain area should be sought for advice in that area before committing to a course of action.\n\n**Should not exceed 5:** For larger PRs affecting more of the codebase and, most likely, review by more people, we try to keep this pool small and responsive and let those with decision making authority have final say without negative repercussions from the other committers.\n\nTo be listed: Committers are usually selected (or they volunteer, using the same process) from contributors who enter the discussions regarding the future direction of Marked (maybe even doing informal reviews of contributions despite not being able to merge them yourself).\n\nTo be removed: You can remove yourself through the [GitHub UI](https://help.github.com/articles/removing-yourself-from-a-collaborator-s-repository/).\n\nA note on volunteering:\n\n1. Please do not volunteer unless you believe you can demonstrate to your peers you can do the work required.\n2. Please do not overcommit yourself; we count on those committed to the project to be responsive. Really consider, with all you have going on, wehther you able to really commit to it.\n3. Don't let the previous frighten you away, it can always be changed later by you or your peers.\n\n[Details on badges](#badges)\n\n## Contributors\n\nContributors are users who submit a [PR](https://github.com/markedjs/marked/pulls), [Issue](https://github.com/markedjs/marked/issues), or collaborate in making Marked a better product and experience for all the users.\n\nTo be listed: make a contribution and, if it has significant impact, the committers may be able to add you here.\n\nTo be removed: please let us know or submit a PR.\n\n[Details on badges](#badges)\n\n## Users\n\nUsers are anyone using Marked in some fashion, without them, there's no reason for us to exist.\n\n|Individual or Organization |Website                 |Project                              |Submitted by                                        |\n|:--------------------------|:-----------------------|:------------------------------------|:---------------------------------------------------|\n|MarkedJS                   |https://marked.js.org   |https://github.com/markedjs/marked   |The marked committers                               |\n\nTo be listed: All fields are optional. Contact any of the committers or, more timely, submit a pull request with the following (using the first row as an example):\n\n- **Individual or Organization:** The name you would like associated with the record.\n- **Website:** A URL to a standalone website for the project.\n- **Project:** A URL for the repository of the project using marked.\n- **Submitted by:** The name and optional honorifics for the person adding the listing.\n\nTo be removed: Same as above. Only instead of requesting addition request deletion or delete the row yourself.\n\n<h2 id=\"badges\">Badges</h2>\n\nBadges? You don't *need* no stinkin' badges.\n\nMovie references aside. (It was either that or, \"Let's play a game\", but that would have been creepy&hellip;that's why it will most likely come later.)\n\nBadges? If you *want* 'em, we got 'em, and here's how you get 'em (and&hellip;dramatic pause&hellip;why not two dramatic pauses for emphasis?&hellip; how they can be taken away).\n\n- [ ] Add the appropriate badge to the desired contributor in the desired column of this page, even if they're not listed here yet.\n- [ ] Submit a PR (we're big on PRs around here, if you haven't noticed, help us help you).\n- [ ] Follow the instructions for submitting a badge PR. (There are more details to find within. Come on. Everybody likes surprises, right? No? Actually, we just try to put documentation where it belongs, closer to the code and part of the sequence of events.)\n\n### Badges at play:\n\n<dl>\n\t<dt>Curious Contributor</dt>\n\t<dd>A contributor with less than one year on this page who is actively engaged in submitting PRs, Issues, making recommendations, sharing thoughts&hellip;without being too annoying about it (let's be clear, submitting 100 Issues recommending the Marked Committers send everyone candy is trying for the badge, not honestly earning it).</dd>\n\t<dt>Dr. DevOps</dt>\n\t<dd>\n\t\t<p>Someone who understands and contributes to improving the developer experience and flow of Marked into the world.</p>\n\t\t<blockquote>\n\t\t\t\"The main characteristic of the DevOps movement is to strongly advocate automation and monitoring at all steps of software construction, from integration, testing, releasing to deployment and infrastructure management. DevOps aims at shorter development cycles, increased deployment frequency, more dependable releases, in close alignment with business objectives.\" ~ <a href=\"https://www.wikipedia.org/wiki/DevOps\">Wikipedia</a>\n\t\t</blockquote>\n\t</dd>\n  <dt>Dr. Docs</dt>\n  <dd>Someone who has contributed a great deal to the creation and maintainance of the non-code areas of marked.</dd>\n\t<dt>Eye for the CLI</dt>\n\t<dd>At this point? Pretty much anyone who can update that `man` file to the current Marked version without regression in the CLI tool itself.</dd>\n\t<dt>GitHub Guru</dt>\n\t<dd>Someone who always seems to be able to tell you easier ways to do things with GitHub.</dd>\n\t<dt>Humaning Helper</dt>\n\t<dd>Someone who goes out of their way to help contributors feel welcomed and valued. Further, someone who takes the extra steps(s) necessary to help new contributors get up to speed. Finally, they maintain composure even in times of disagreement and dispute resolution.</dd>\n\t<dt>Heckler of Hypertext</dt>\n\t<dd>Someone who demonstrates an esoteric level of knowledge when it comes to HTML. In other words, someone who says things like, \"Did you know most Markdown flavors don't have a way to render a description list (`dl`)? All the more reason Markdown `!==` HTML.\"</dd>\n\t<dt>Markdown Maestro</dt>\n\t<dd>You know that person who knows about way too many different flavors of Markdown? The one who maybe seems a little too obsessed with the possibilities of Markdown beyond HTML? Come on. You know who they are. Or, at least you could, if you give them this badge.</dd>\n\t<dt>Master of Marked</dt>\n\t<dd>Someone who demonstrates they know the ins and outs of the codebase for Marked.</dd>\n\t<dt>Open source, of course</dt>\n\t<dd>Someone who advocates for and has a proven understanding of how to operate within open source communities.</dd>\n\t<dt>Regent of the Regex</dt>\n\t<dd><p>Can you demonstrate you understand the following without Google and Stackoverflow?</p>\n\t\t<p><code>/^( *)(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/</code></p>\n\t\t<p>Because this author can't yet. That's who gets these.</p>\n\t</dd>\n\t<dt>Seeker of Security</dt>\n\t<dd>Someone who has demonstrated a high degree of expertise or authority when it comes to software security.</dd>\n\t<dt>Titan of the Test Harness</dt>\n\t<dd>Someone who demonstrates high-levels of understanding regarding Marked's test harness.</dd>\n\t<dt>Totally Tron</dt>\n\t<dd>Someone who demonstrates they are willing and able to \"fight for the users\", both developers dependent on marked to do their jobs as well as end-users interacting with the output (particularly in the realm of those with the disabilities).</dd>\n</dl>\n\n### Special badges that come with the job:\n\n<dl>\n\t<dt>Defibrillator</dt>\n\t<dd>A contributor who stepped up to help bring Marked back to life by contriuting solutions to help Marked pass when compared against the CommonMark and GitHub Flavored Markdown specifications.</dd>\n\t<dt>Maker of the Marked mark</dt>\n\t<dd>This badge is given to the person or oganization credited with creating the logo (or logotype) used in Marked communications for a given period of time. **Maker of the Marked mark from 2017 to present**, for example.</dd>\n\t<dt>Release Wrangler</dt>\n\t<dd>This is a badge given to all Publishers.</dd>\n\t<dt>Snyk's Security Saint</dt>\n\t<dd>This is a badge given to whomever primarily reaches out from Snyk to let us know about security issues.</dd>\n</dl>\n",
          "filepath": "data/repos/markedjs/marked-0.6/docs/AUTHORS.md",
          "repo": "markedjs/marked",
          "version": "0.6",
          "chunk_index": 0
        }
      },
      {
        "id": "d7c8a991-7bf8-4924-98f8-a7dc5366a885",
        "score": 0.015873015873015872,
        "payload": {
          "text": "\n<!--\n\n\tIf release PR, add ?template=release.md to the PR url to use the release PR template.\n\n\tIf badging PR, add ?template=badges.md to the PR url to use the badges PR template.\n\n\tOtherwise, you are stating this PR fixes an issue that has been submitted; or,\n\tdescribes the issue or proposal under consideration and contains the project-related code to implement.\n\n-->\n\n**Marked version:**\n\n<!-- The NPM version or commit hash having the issue -->\n\n**Markdown flavor:** Markdown.pl|CommonMark|GitHub Flavored Markdown|n/a\n\n## Description\n\n- Fixes #### (if fixing a known issue; otherwise, describe issue using the following format)\n\n<!--\n\n\tIf no issue exists that you're aware of. The maintainers should be able to figure out if it's a duplicate.\n\n## Expectation\n\nDescribe the output you are expecting from marked\n\n## Result\n\nDescribe the output you received from marked\n\n## What was attempted\n\nDescribe what code combination got you there\n\n-->\n\n## Contributor\n\n- [ ] Test(s) exist to ensure functionality and minimize regression (if no tests added, list tests covering this PR); or,\n- [ ] no tests required for this PR.\n- [ ] If submitting new feature, it has been documented in the appropriate places.\n\n## Committer\n\nIn most cases, this should be a different person than the contributor.\n\n- [ ] Draft GitHub release notes have been updated.\n- [ ] CI is green (no forced merge required).\n- [ ] Merge PR\n",
          "filepath": "data/repos/markedjs/marked-0.6/.github/PULL_REQUEST_TEMPLATE.md",
          "repo": "markedjs/marked",
          "version": "0.6",
          "chunk_index": 0
        }
      },
      {
        "id": "3acc7101-167c-4ef1-88c9-9888d8445921",
        "score": 0.015625,
        "payload": {
          "text": "#!/usr/bin/env node\n\n/**\n * marked tests\n * Copyright (c) 2011-2013, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * Modules\n */\n\nvar fs = require('fs'),\n    path = require('path'),\n    fm = require('front-matter'),\n    g2r = require('glob-to-regexp'),\n    marked = require('../'),\n    markedMin = require('../marked.min.js');\n\n/**\n * Load Tests\n */\n\nfunction load(options) {\n  options = options || {};\n  var dir = path.join(__dirname, 'compiled_tests'),\n      files = {},\n      list,\n      file,\n      name,\n      content,\n      glob = g2r(options.glob || '*', { extended: true }),\n      i,\n      l;\n\n  list = fs\n    .readdirSync(dir)\n    .filter(function(file) {\n      return path.extname(file) === '.md';\n    })\n    .sort();\n\n  l = list.length;\n\n  for (i = 0; i < l; i++) {\n    name = path.basename(list[i], '.md');\n    if (glob.test(name)) {\n      file = path.join(dir, list[i]);\n      content = fm(fs.readFileSync(file, 'utf8'));\n\n      files[name] = {\n        options: content.attributes,\n        text: content.body,\n        html: fs.readFileSync(file.replace(/[^.]+$/, 'html'), 'utf8')\n      };\n    }\n  }\n\n  if (options.bench || options.time) {\n    if (!options.glob) {\n      // Change certain tests to allow\n      // comparison to older benchmark times.\n      fs.readdirSync(path.join(__dirname, 'new')).forEach(function(name) {\n        if (path.extname(name) === '.html') return;\n        if (name === 'main.md') return;\n        delete files[name];\n      });\n    }\n\n    if (files['backslash_escapes.md']) {\n      files['backslash_escapes.md'] = {\n        text: 'hello world \\\\[how](are you) today'\n      };\n    }\n\n    if (files['main.md']) {\n      files['main.md'].text = files['main.md'].text.replace('* * *\\n\\n', '');\n    }\n  }\n\n  return files;\n}\n\n/**\n * Test Runner\n */\n\nfunction runTests(engine, options) {\n  if (typeof engine !== 'function') {\n    options = engine;\n    engine = null;\n  }\n\n  engine = engine || marked;\n  options = options || {};\n  var succeeded = 0,\n      failed = 0,\n      files = options.files || load(options),\n      filenames = Object.keys(files),\n      len = filenames.length,\n      success,\n      i,\n      filename,\n      file;\n\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n\n  for (i = 0; i < len; i++) {\n    filename = filenames[i];\n    file = files[filename];\n\n    success = testFile(engine, file, filename, i + 1);\n\n    if (success) {\n      succeeded++;\n    } else {\n      failed++;\n      if (options.stop) {\n        break;\n      }\n    }\n  }\n\n  console.log('%d/%d tests completed successfully.', succeeded, len);\n  if (failed) console.log('%d/%d tests failed.', failed, len);\n\n  return !failed;\n}\n\n/**\n * Test a file\n */\n\nfunction testFile(engine, file, filename, index) {\n  var opts = Object.keys(file.options),\n      text,\n      html,\n      j,\n      l,\n      before,\n      elapsed;\n\n  if (marked._original) {\n    marked.defaults = marked._original;\n    delete marked._original;\n  }\n\n  console.log('#%d. Test %s', index, filename);\n\n  if (opts.length) {\n    marked._original = marked.defaults;\n    marked.defaults = {};\n    Object.keys(marked._original).forEach(function(key) {\n      marked.defaults[key] = marked._original[key];\n    });\n    opts.forEach(function(key) {\n      if (marked.defaults.hasOwnProperty(key)) {\n        marked.defaults[key] = file.options[key];\n      }\n    });\n  }\n\n  before = process.hrtime();\n  try {\n    text = engine(file.text).replace(/\\s/g, '');\n    html = file.html.replace(/\\s/g, '');\n  } catch (e) {\n    elapsed = process.hrtime(before);\n    console.log('    failed in %dms', prettyElapsedTime(elapsed));\n    throw e;\n  }\n\n  elapsed = process.hrtime(before);\n\n  l = html.length;\n\n  for (j = 0; j < l; j++) {\n    if (text[j] !== html[j]) {\n      text = text.substring(\n        Math.max(j - 30, 0),\n        Math.min(j + 30, text.length));\n\n      html = html.substring(\n        Math.max(j - 30, 0),\n        Math.min(j + 30, l));\n\n      console.log('    failed in %dms at offset %d. Near: \"%s\".\\n', prettyElapsedTime(elapsed), j, text);\n\n      console.log('\\nGot:\\n%s\\n', text.trim() || text);\n      console.log('\\nExpected:\\n%s\\n', html.trim() || html);\n\n      return false;\n    }\n  }\n\n  if (elapsed[0] > 0) {\n    console.log('    failed because it took too long.\\n\\n    passed in %dms', prettyElapsedTime(elapsed));\n    return false;\n  }\n\n  console.log('    passed in %dms', prettyElapsedTime(elapsed));\n  return true;\n}\n\n/**\n * Benchmark a function\n */\n\nfunction bench(name, files, func) {\n  var start = Date.now(),\n      times = 1000,\n      keys = Object.keys(files),\n      i,\n      l = keys.length,\n      filename,\n      file;\n\n  while (times--) {\n    for (i = 0; i < l; i++) {\n      filename = keys[i];\n      file = files[filename];\n      func(file.text);\n    }\n  }\n\n  console.log('%s completed in %dms.', name, Date.now() - start);\n}\n\n/**\n * Benchmark all engines\n */\n\nfunction runBench(options) {\n  options = options || {};\n  var files = load(options);\n\n  // Non-GFM, Non-pedantic\n  marked.setOptions({\n    gfm: false,\n    tables: false,\n    breaks: false,\n    pedantic: false,\n    sanitize: false,\n    smartLists: false\n  });\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked', files, marked);\n\n  // GFM\n  marked.setOptions({\n    gfm: true,\n    tables: false,\n    breaks: false,\n    pedantic: false,\n    sanitize: false,\n    smartLists: false\n  });\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked (gfm)', files, marked);\n\n  // Pedantic\n  marked.setOptions({\n    gfm: false,\n    tables: false,\n    breaks: false,\n    pedantic: true,\n    sanitize: false,\n    smartLists: false\n  });\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked (pedantic)', files, marked);\n\n  // showdown\n  try {\n    bench('commonmark', files, (function() {\n      var commonmark = require('commonmark'),\n          parser = new commonmark.Parser(),\n          writer = new commonmark.HtmlRenderer();\n      return function(text) {\n        return writer.render(parser.parse(text));\n      };\n    })());\n  } catch (e) {\n    console.log('Could not bench commonmark. (Error: %s)', e.message);\n  }\n\n  // markdown-it\n  try {\n    bench('markdown-it', files, (function() {\n      var MarkdownIt = require('markdown-it');\n      var md = new MarkdownIt();\n      return function(text) {\n        return md.render(text);\n      };\n    })());\n  } catch (e) {\n    console.log('Could not bench markdown-it. (Error: %s)', e.message);\n  }\n\n  // markdown.js\n  try {\n    bench('markdown.js', files, (function() {\n      var markdown = require('markdown').markdown;\n      return function(text) {\n        return markdown.toHTML(text);\n      };\n    })());\n  } catch (e) {\n    console.log('Could not bench markdown.js. (Error: %s)', e.message);\n  }\n\n  return true;\n}\n\n/**\n * A simple one-time benchmark\n */\n\nfunction time(options) {\n  options = options || {};\n  var files = load(options);\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked', files, marked);\n\n  return true;\n}\n\n/**\n * Markdown Test Suite Fixer\n *   This function is responsible for \"fixing\"\n *   the markdown test suite. There are\n *   certain aspects of the suite that\n *   are strange or might make tests\n *   fail for reasons unrelated to\n *   conformance.\n */\n\nfunction fix() {\n  ['compiled_tests', 'original', 'new'].forEach(function(dir) {\n    try {\n      fs.mkdirSync(path.resolve(__dirname, dir));\n    } catch (e) {\n      ;\n    }\n  });\n\n  // rm -rf tests\n  fs.readdirSync(path.resolve(__dirname, 'compiled_tests')).forEach(function(file) {\n    fs.unlinkSync(path.resolve(__dirname, 'compiled_tests', file));\n  });\n\n  // cp -r original tests\n  fs.readdirSync(path.resolve(__dirname, 'original')).forEach(function(file) {\n    var text = fs.readFileSync(path.resolve(__dirname, 'original', file), 'utf8');\n\n    if (path.extname(file) === '.md') {\n      if (fm.test(text)) {\n        text = fm(text);\n        text = '---\\n' + text.frontmatter + '\\ngfm: false\\n---\\n' + text.body;\n      } else {\n        text = '---\\ngfm: false\\n---\\n' + text;\n      }\n    }\n\n    fs.writeFileSync(path.resolve(__dirname, 'compiled_tests', file), text);\n  });\n\n  // node fix.js\n  var dir = path.join(__dirname, 'compiled_tests');\n\n  fs.readdirSync(dir).filter(function(file) {\n    return path.extname(file) === '.html';\n  }).forEach(function(file) {\n    file = path.join(dir, file);\n    var html = fs.readFileSync(file, 'utf8');\n\n    // fix unencoded quotes\n    html = html\n      .replace(/='([^\\n']*)'(?=[^<>\\n]*>)/g, '=&__APOS__;$1&__APOS__;')\n      .replace(/=\"([^\\n\"]*)\"(?=[^<>\\n]*>)/g, '=&__QUOT__;$1&__QUOT__;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&#39;')\n      .replace(/&__QUOT__;/g, '\"')\n      .replace(/&__APOS__;/g, '\\'');\n\n    // add heading id's\n    html = html.replace(/<(h[1-6])>([^<]+)<\\/\\1>/g, function(s, h, text) {\n      var id = text\n        .replace(/&#39;/g, '\\'')\n        .replace(/&quot;/g, '\"')\n        .replace(/&gt;/g, '>')\n        .replace(/&lt;/g, '<')\n        .replace(/&amp;/g, '&');\n\n      id = id.toLowerCase().replace(/[^\\w]+/g, '-');\n\n      return '<' + h + ' id=\"' + id + '\">' + text + '</' + h + '>';\n    });\n\n    fs.writeFileSync(file, html);\n  });\n\n  // turn <hr /> into <hr>\n  fs.readdirSync(dir).forEach(function(file) {\n    file = path.join(dir, file);\n    var text = fs.readFileSync(file, 'utf8');\n\n    text = text.replace(/(<|&lt;)hr\\s*\\/(>|&gt;)/g, '$1hr$2');\n\n    fs.writeFileSync(file, text);\n  });\n\n  // markdown does some strange things.\n  // it does not encode naked `>`, marked does.\n  (function() {\n    var file = dir + '/amps_and_angles_encoding.html';\n    var html = fs.readFileSync(file, 'utf8')\n      .replace('6 > 5.', '6 &gt; 5.');\n\n    fs.writeFileSync(file, html);\n  })();\n\n  // cp new/* tests/\n  fs.readdirSync(path.resolve(__dirname, 'new')).forEach(function(file) {\n    fs.writeFileSync(path.resolve(__dirname, 'compiled_tests', file),\n      fs.readFileSync(path.resolve(__dirname, 'new', file)));\n  });\n}\n\n/**\n * Argument Parsing\n */\n\nfunction parseArg() {\n  var argv = process.argv.slice(2),\n      options = {},\n      opt = '',\n      orphans = [],\n      arg;\n\n  function getarg() {\n    var arg = argv.shift();\n\n    if (arg.indexOf('--') === 0) {\n      // e.g. --opt\n      arg = arg.split('=');\n      if (arg.length > 1) {\n        // e.g. --opt=val\n        argv.unshift(arg.slice(1).join('='));\n      }\n      arg = arg[0];\n    } else if (arg[0] === '-') {\n      if (arg.length > 2) {\n        // e.g. -abc\n        argv = arg.substring(1).split('').map(function(ch) {\n          return '-' + ch;\n        }).concat(argv);\n        arg = argv.shift();\n      } else {\n        // e.g. -a\n      }\n    } else {\n      // e.g. foo\n    }\n\n    return arg;\n  }\n\n  while (argv.length) {\n    arg = getarg();\n    switch (arg) {\n      case '-f':\n      case '--fix':\n      case 'fix':\n        if (options.fix !== false) {\n          options.fix = true;\n        }\n        break;\n      case '--no-fix':\n      case 'no-fix':\n        options.fix = false;\n        break;\n      case '-b':\n      case '--bench':\n        options.bench = true;\n        break;\n      case '-s':\n      case '--stop':\n        options.stop = true;\n        break;\n      case '-t':\n      case '--time':\n        options.time = true;\n        break;\n      case '-m':\n      case '--minified':\n        options.minified = true;\n        break;\n      case '--glob':\n        arg = argv.shift();\n        options.glob = arg.replace(/^=/, '');\n        break;\n      default:\n        if (arg.indexOf('--') === 0) {\n          opt = camelize(arg.replace(/^--(no-)?/, ''));\n          if (!marked.defaults.hasOwnProperty(opt)) {\n            continue;\n          }\n          options.marked = options.marked || {};\n          if (arg.indexOf('--no-') === 0) {\n            options.marked[opt] = typeof marked.defaults[opt] !== 'boolean'\n              ? null\n              : false;\n          } else {\n            options.marked[opt] = typeof marked.defaults[opt] !== 'boolean'\n              ? argv.shift()\n              : true;\n          }\n        } else {\n          orphans.push(arg);\n        }\n        break;\n    }\n  }\n\n  return options;\n}\n\n/**\n * Helpers\n */\n\nfunction camelize(text) {\n  return text.replace(/(\\w)-(\\w)/g, function(_, a, b) {\n    return a + b.toUpperCase();\n  });\n}\n\n/**\n * Main\n */\n\nfunction main(argv) {\n  var opt = parseArg();\n\n  if (opt.fix !== false) {\n    fix();\n  }\n\n  if (opt.fix) {\n    // only run fix\n    return;\n  }\n\n  if (opt.bench) {\n    return runBench(opt);\n  }\n\n  if (opt.time) {\n    return time(opt);\n  }\n\n  if (opt.minified) {\n    marked = markedMin;\n  }\n  return runTests(opt);\n}\n\n/**\n * Execute\n */\n\nif (!module.parent) {\n  process.title = 'marked';\n  process.exit(main(process.argv.slice()) ? 0 : 1);\n} else {\n  exports = main;\n  exports.main = main;\n  exports.runTests = runTests;\n  exports.testFile = testFile;\n  exports.runBench = runBench;\n  exports.load = load;\n  exports.bench = bench;\n  module.exports = exports;\n}\n\n// returns time to millisecond granularity\nfunction prettyElapsedTime(hrtimeElapsed) {\n  var seconds = hrtimeElapsed[0];\n  var frac = Math.round(hrtimeElapsed[1] / 1e3) / 1e3;\n  return seconds * 1e3 + frac;\n}\n",
          "filepath": "data/repos/markedjs/marked-0.6/test/index.js",
          "repo": "markedjs/marked",
          "version": "0.6",
          "chunk_index": 0
        }
      },
      {
        "id": "dcb6c676-d494-4c9d-bfd1-b27c9f1515bd",
        "score": 0.015384615384615385,
        "payload": {
          "text": "# Contributing to Marked\n\n- [ ] Fork `markedjs/marked`.\n- [ ] Clone the library locally using GitHub Desktop or the command line.\n- [ ] Make sure you are on the `master` branch.\n- [ ] Be sure to run `npm install` or `npm update`.\n- [ ] Create a branch.\n- [ ] Make as small a change as possible.\n- [ ] Run `npm test`, fix any broken things (for linting, you can run `npm run lint` to have the linter fix them for you).\n- [ ] Submit a PR.\n\n## Design principles\n\nMarked tends to favor following the SOLID set of software design and development principles; mainly the [single responsibility](https://en.wikipedia.org/wiki/Single_responsibility_principle) and [open/closed principles](https://en.wikipedia.org/wiki/Open/closed_principle):\n\n- **Single responsibility:** Marked, and the components of Marked, have the single responsibility of converting Markdown strings into HTML.\n- **Open/closed:** Marked favors giving developers the means to easily extend the library and its components over changing Marked's behavior through configuration options.\n\n## Priorities\n\nWe think we have our priorities sorted to build quality in.\n\nThe following table lists the ticket type labels we use when there is work to be done on the code either through an Issue or a PR; in priority order.\n\n|Ticket type label                  |Description                                                                                                                                                                         |\n|:----------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n|L0 - security                      |A security vulnerability within the Marked library is discovered.                                                                                                                   |\n|L1 - broken                        |Valid usage results in incorrect output compared to [supported specifications](#/README.md#specifications) OR causes marked to crash AND there is no known workaround for the issue. |\n|L2 - annoying                      |Similar to L1 - broken only there is a known workaround avaialable for the issue.                                                                                                   |\n|RR - refactor and re-engineer      |Results in an improvement to developers using Marked (improved readability) or end-users (faster performance) or both.                                                              |\n|NFS - new feature (spec related)   |A capability Marked does not currently provide but is in one of the [supported specifications](#/README.md#specifications)                                                           |\n|NFU - new feature (user requested) |A capability Marked does not currently provide but has been requested by users of Marked.                                                                                           |\n\n## Test early, often, and everything\n\nWe try to write test cases to validate output (writing tests based on the [supported specifications](#/README.md#specifications)) and minimize regression (writing tests for issues fixed). Therefore, if you would like to contribute, some things you should know regarding the test harness.\n\n|Location      |Description                                         |\n|:-------------|:---------------------------------------------------|\n|/test/browser |For testing Marked in a client-side implementation. |\n|/test/new     |Tests not related to the original `markdown.pl`.    |\n|/test/original|Tests validating against the original `markdown.pl`.|\n\nIf your test uses features or options, assuming `gfm` is set to `false`, for example, you can add [front-matter](https://www.npmjs.com/package/front-matter) to the top of\nyour `.md` file\n\n``` yml\n---\ngfm: false\n---\n```\n\n## Submitting PRs and Issues\n\nMarked provides templates for submitting both pull requests and issues. When you begin creating a new PR or issue, you will see instructions on using the template.\n\nThe PR templates include checklists for both the submitter and the reviewer, which, in most cases, will not be the same person.\n\n## Scripts\n\nWhen it comes to NPM commands, we try to use the native scripts provided by the NPM framework.\n\nTo run the tests:\n\n``` bash\nnpm test\n```\n\nTo test whether you are using the standard syntax rules for the project:\n\n```bash\nnpm run test:lint\n```\n\nTo see time comparisons between Marked and other popular Markdown libraries:\n\n```bash\nnpm run bench\n```\n\nTo check for (and fix) standardized syntax (lint):\n\n```bash\nnpm run lint\n```\n\nTo build your own minified version of Marked:\n\n```bash\nnpm run build\n```\n\n",
          "filepath": "data/repos/markedjs/marked-0.6/docs/CONTRIBUTING.md",
          "repo": "markedjs/marked",
          "version": "0.6",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "processing__p5.js-3068",
    "model_patch": "diff --git a/files.js b/files.js\n--- a/files.js\n+++ b/files.js\n@@ -407,7 +407,7 @@\n     'GET',\n     'text',\n     function(data) {\n-      var arr = data.match(/[^\\r\\n]+/g);\n+      var arr = data.split(/\\r?\\n/);\n       for (var k in arr) {\n         ret[k] = arr[k];\n       }",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 146.81,
      "issue_embedding_time_ms": 146.81,
      "retrieval_time_ms_splade": 36.53,
      "retrieval_time_ms": 36.53,
      "total_retrieval_time_ms": 183.34,
      "generation_time_ms": 2064.18,
      "total_io_time_ms": 2247.53,
      "input_total_token_limit": null,
      "issue_text_tokens": 271,
      "vlm_tokens": 0,
      "retrieved_tokens": 19441,
      "prompt_template_tokens": 519,
      "total_input_prompt_tokens": 20231,
      "output_generated_tokens": 95,
      "total_io_tokens": 20326,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nloadStrings() omits empty lines\\nv0.6.1\\r\\n\\r\\nwhen loading a file containing empty lines, *processing* includes empty strings in the array for each empty line.\\r\\n\\r\\np5.js filters out empty lines.\\r\\n\\r\\nhere's a demo: https://codepen.io/Spongman/pen/wXVeYP\\r\\nthis loads and prints lines 24 onwards from the p5.js library, here: https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/addons/p5.dom.js\\r\\n\\r\\nthe text file looks like this:\\r\\n```\\r\\n * @main\\r\\n */\\r\\n\\r\\n(function(root, factory) {\\r\\n  if (typeof define === 'function' && define.amd)\\r\\n    define('p5.dom', ['p5'], function(p5) {\\r\\n      factory(p5);\\r\\n    });\\r\\n```\\r\\n\\r\\nbut the string array returned by `loadStrings` omits the empty lines:\\r\\n![image](https://user-images.githubusercontent.com/1088194/42413671-bb74b886-81d9-11e8-8434-f8c0a14ef113.png)\\r\\n\\r\\ni discovered this trying to work out why the line numbers for errors in glsl shaders loaded by `loadShader` don't match up with the lines in the source files. this bug makes it particularly frustrating trying to track down such errors.\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of p5.dom.js]\\n/*! p5.dom.js v0.3.4 Aug 11, 2017 */\\n/**\\n * <p>The web is much more than just canvas and p5.dom makes it easy to interact\\n * with other HTML5 objects, including text, hyperlink, image, input, video,\\n * audio, and webcam.</p>\\n * <p>There is a set of creation methods, DOM manipulation methods, and\\n * an extended p5.Element that supports a range of HTML elements. See the\\n * <a href='https://github.com/processing/p5.js/wiki/Beyond-the-canvas'>\\n * beyond the canvas tutorial</a> for a full overview of how this addon works.\\n *\\n * <p>Methods and properties shown in black are part of the p5.js core, items in\\n * blue are part of the p5.dom library. You will need to include an extra file\\n * in order to access the blue functions. See the\\n * <a href='http://p5js.org/libraries/#using-a-library'>using a library</a>\\n * section for information on how to include this library. p5.dom comes with\\n * <a href='http://p5js.org/download'>p5 complete</a> or you can download the single file\\n * <a href='https://raw.githubusercontent.com/lmccart/p5.js/master/lib/addons/p5.dom.js'>\\n * here</a>.</p>\\n * <p>See <a href='https://github.com/processing/p5.js/wiki/Beyond-the-canvas'>tutorial: beyond the canvas</a>\\n * for more info on how to use this libary.</a>\\n *\\n * @module p5.dom\\n * @submodule p5.dom\\n * @for p5.dom\\n * @main\\n */\\n\\n(function(root, factory) {\\n  if (typeof define === 'function' && define.amd)\\n    define('p5.dom', ['p5'], function(p5) {\\n      factory(p5);\\n    });\\n  else if (typeof exports === 'object') factory(require('../p5'));\\n  else factory(root['p5']);\\n})(this, function(p5) {\\n  // =============================================================================\\n  //                         p5 additions\\n  // =============================================================================\\n\\n  /**\\n   * Searches the page for an element with the given ID, class, or tag name (using the '#' or '.'\\n   * prefixes to specify an ID or class respectively, and none for a tag) and returns it as\\n   * a p5.Element. If a class or tag name is given with more than 1 element,\\n   * only the first element will be returned.\\n   * The DOM node itself can be accessed with .elt.\\n   * Returns null if none found. You can also specify a container to search within.\\n   *\\n   * @method select\\n   * @param  {String} name id, class, or tag name of element to search for\\n   * @param  {String} [container] id, p5.Element, or HTML element to search within\\n   * @return {Object|p5.Element|Null} p5.Element containing node found\\n   * @example\\n   * <div ><code class='norender'>\\n   * function setup() {\\n   *   createCanvas(100, 100);\\n   *   //translates canvas 50px down\\n   *   select('canvas').position(100, 100);\\n   * }\\n   * </code></div>\\n   * <div ><code class='norender'>\\n   * // these are all valid calls to select()\\n   * var a = select('#moo');\\n   * var b = select('#blah', '#myContainer');\\n   * var c = select('#foo', b);\\n   * var d = document.getElementById('beep');\\n   * var e = select('p', d);\\n   * [a, b, c, d, e]; // unused\\n   * </code></div>\\n   *\\n   */\\n  p5.prototype.select = function(e, p) {\\n    p5._validateParameters('select', arguments);\\n    var res = null;\\n    var container = getContainer(p);\\n    if (e[0] === '.') {\\n      e = e.slice(1);\\n      res = container.getElementsByClassName(e);\\n      if (res.length) {\\n        res = res[0];\\n      } else {\\n        res = null;\\n      }\\n    } else if (e[0] === '#') {\\n      e = e.slice(1);\\n      res = container.getElementById(e);\\n    } else {\\n      res = container.getElementsByTagName(e);\\n      if (res.length) {\\n        res = res[0];\\n      } else {\\n        res = null;\\n      }\\n    }\\n    if (res) {\\n      return this._wrapElement(res);\\n    } else {\\n      return null;\\n    }\\n  };\\n\\n  /**\\n   * Searches the page for elements with the given class or tag name (using the '.' prefix\\n   * to specify a class and no prefix for a tag) and returns them as p5.Elements\\n   * in an array.\\n   * The DOM node itself can be accessed with .elt.\\n   * Returns an empty array if none found.\\n   * You can also specify a container to search within.\\n   *\\n   * @method selectAll\\n   * @param  {String} name class or tag name of elements to search for\\n   * @param  {String} [container] id, p5.Element, or HTML element to search within\\n   * @return {Array} Array of p5.Elements containing nodes found\\n   * @example\\n   * <div class='norender'><code>\\n   * function setup() {\\n   *   createButton('btn');\\n   *   createButton('2nd btn');\\n   *   createButton('3rd btn');\\n   *   var buttons = selectAll('button');\\n   *\\n   *   for (var i = 0; i < buttons.length; i++) {\\n   *     buttons[i].size(100, 100);\\n   *   }\\n   * }\\n   * </code></div>\\n   * <div class='norender'><code>\\n   * // these are all valid calls to selectAll()\\n   * var a = selectAll('.moo');\\n   * a = selectAll('div');\\n   * a = selectAll('button', '#myContainer');\\n   *\\n   * var d = select('#container');\\n   * a = selectAll('p', d);\\n   *\\n   * var f = document.getElementById('beep');\\n   * a = select('.blah', f);\\n   *\\n   * a; // unused\\n   * </code></div>\\n   *\\n   */\\n  p5.prototype.selectAll = function(e, p) {\\n    p5._validateParameters('selectAll', arguments);\\n    var arr = [];\\n    var res;\\n    var container = getContainer(p);\\n    if (e[0] === '.') {\\n      e = e.slice(1);\\n      res = container.getElementsByClassName(e);\\n    } else {\\n      res = container.getElementsByTagName(e);\\n    }\\n    if (res) {\\n      for (var j = 0; j < res.length; j++) {\\n        var obj = this._wrapElement(res[j]);\\n        arr.push(obj);\\n      }\\n    }\\n    return arr;\\n  };\\n\\n  /**\\n   * Helper function for select and selectAll\\n   */\\n  function getContainer(p) {\\n    var container = document;\\n    if (typeof p === 'string' && p[0] === '#') {\\n      p = p.slice(1);\\n      container = document.getElementById(p) || document;\\n    } else if (p instanceof p5.Element) {\\n      container = p.elt;\\n    } else if (p instanceof HTMLElement) {\\n      container = p;\\n    }\\n    return container;\\n  }\\n\\n  /**\\n   * Helper function for getElement and getElements.\\n   */\\n  p5.prototype._wrapElement = function(elt) {\\n    var children = Array.prototype.slice.call(elt.children);\\n    if (elt.tagName === 'INPUT' && elt.type === 'checkbox') {\\n      var converted = new p5.Element(elt);\\n      converted.checked = function() {\\n        if (arguments.length === 0) {\\n          return this.elt.checked;\\n        } else if (arguments[0]) {\\n          this.elt.checked = true;\\n        } else {\\n          this.elt.checked = false;\\n        }\\n        return this;\\n      };\\n      return converted;\\n    } else if (elt.tagName === 'VIDEO' || elt.tagName === 'AUDIO') {\\n      return new p5.MediaElement(elt);\\n    } else if (elt.tagName === 'SELECT') {\\n      return this.createSelect(new p5.Element(elt));\\n    } else if (\\n      children.length > 0 &&\\n      children.every(function(c) {\\n        return c.tagName === 'INPUT' || c.tagName === 'LABEL';\\n      })\\n    ) {\\n      return this.createRadio(new p5.Element(elt));\\n    } else {\\n      return new p5.Element(elt);\\n    }\\n  };\\n\\n  /**\\n   * Removes all elements created by p5, except any canvas / graphics\\n   * elements created by createCanvas or createGraphics.\\n   * Event handlers are removed, and element is removed from the DOM.\\n   * @method removeElements\\n   * @example\\n   * <div class='norender'><code>\\n   * function setup() {\\n   *   createCanvas(100, 100);\\n   *   createDiv('this is some text');\\n   *   createP('this is a paragraph');\\n   * }\\n   * function mousePressed() {\\n   *   removeElements(); // this will remove the div and p, not canvas\\n   * }\\n   * </code></div>\\n   *\\n   */\\n  p5.prototype.removeElements = function(e) {\\n    p5._validateParameters('removeElements', arguments);\\n    for (var i = 0; i < this._elements.length; i++) {\\n      if (!(this._elements[i].elt instanceof HTMLCanvasElement)) {\\n        this._elements[i].remove();\\n      }\\n    }\\n  };\\n\\n  /**\\n   * Helpers for create methods.\\n   */\\n  function addElement(elt, pInst, media) {\\n    var node = pInst._userNode ? pInst._userNode : document.body;\\n    node.appendChild(elt);\\n    var c = media ? new p5.MediaElement(elt) : new p5.Element(elt);\\n    pInst._elements.push(c);\\n    return c;\\n  }\\n\\n  /**\\n   * Creates a &lt;div&gt;&lt;/div&gt; element in the DOM with given inner HTML.\\n   * Appends to the container node if one is specified, otherwise\\n   * appends to body.\\n   *\\n   * @method createDiv\\n   * @param  {String} [html] inner HTML for element created\\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\\n   * @example\\n   * <div class='norender'><code>\\n   * createDiv('this is some text');\\n   * </code></div>\\n   */\\n\\n  /**\\n   * Creates a &lt;p&gt;&lt;/p&gt; element in the DOM with given inner HTML. Used\\n   * for paragraph length text.\\n   * Appends to the container node if one is specified, otherwise\\n   * appends to body.\\n   *\\n   * @method createP\\n   * @param  {String} [html] inner HTML for element created\\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\\n   * @example\\n   * <div class='norender'><code>\\n   * createP('this is some text');\\n   * </code></div>\\n   */\\n\\n  /**\\n   * Creates a &lt;span&gt;&lt;/span&gt; element in the DOM with given inner HTML.\\n   * Appends to the container node if one is specified, otherwise\\n   * appends to body.\\n   *\\n   * @method createSpan\\n   * @param  {String} [html] inner HTML for element created\\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\\n   * @example\\n   * <div class='norender'><code>\\n   * createSpan('this is some text');\\n   * </code></div>\\n   */\\n  var tags = ['div', 'p', 'span'];\\n  tags.forEach(function(tag) {\\n    var method = 'create' + tag.charAt(0).toUpperCase() + tag.slice(1);\\n    p5.prototype[method] = function(html) {\\n      var elt = document.createElement(tag);\\n      elt.innerHTML = typeof html === undefined ? '' : html;\\n      return addElement(elt, this);\\n    };\\n  });\\n\\n  /**\\n   * Creates an &lt;img&gt; element in the DOM with given src and\\n   * alternate text.\\n   * Appends to the container node if one is specified, otherwise\\n   * appends to body.\\n   *\\n   * @method createImg\\n   * @param  {String} src src path or url for image\\n   * @param  {String} [alt] alternate text to be used if image does not load\\n   * @param  {Function} [successCallback] callback to be called once image data is loaded\\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\\n   * @example\\n   * <div class='norender'><code>\\n   * createImg('http://p5js.org/img/asterisk-01.png');\\n   * </code></div>\\n   */\\n  p5.prototype.createImg = function() {\\n    p5._validateParameters('createImg', arguments);\\n    var elt = document.createElement('img');\\n    var args = arguments;\\n    var self;\\n    var setAttrs = function() {\\n      self.width = elt.offsetWidth || elt.width;\\n      self.height = elt.offsetHeight || elt.height;\\n      if (args.length > 1 && typeof args[1] === 'function') {\\n        self.fn = args[1];\\n        self.fn();\\n      } else if (args.length > 1 && typeof args[2] === 'function') {\\n        self.fn = args[2];\\n        self.fn();\\n      }\\n    };\\n    elt.src = args[0];\\n    if (args.length > 1 && typeof args[1] === 'string') {\\n      elt.alt = args[1];\\n    }\\n    elt.onload = function() {\\n      setAttrs();\\n    };\\n    self = addElement(elt, this);\\n    return self;\\n  };\\n\\n  /**\\n   * Creates an &lt;a&gt;&lt;/a&gt; element in the DOM for including a hyperlink.\\n   * Appends to the container node if one is specified, otherwise\\n   * appends to body.\\n   *\\n   * @method createA\\n   * @param  {String} href       url of page to link to\\n   * @param  {String} html       inner html of link element to display\\n   * @param  {String} [target]   target where new link should open,\\n   *                             could be _blank, _self, _parent, _top.\\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\\n   * @example\\n   * <div class='norender'><code>\\n   * createA('http://p5js.org/', 'this is a link');\\n   * </code></div>\\n   */\\n  p5.prototype.createA = function(href, html, target) {\\n    p5._validateParameters('createA', arguments);\\n    var elt = document.createElement('a');\\n    elt.href = href;\\n    elt.innerHTML = html;\\n    if (target) elt.target = target;\\n    return addElement(elt, this);\\n  };\\n\\n  /** INPUT **/\\n\\n  /**\\n   * Creates a slider &lt;input&gt;&lt;/input&gt; element in the DOM.\\n   * Use .size() to set the display length of the slider.\\n   * Appends to the container node if one is specified, otherwise\\n   * appends to body.\\n   *\\n   * @method createSlider\\n   * @param  {Number} min minimum value of the slider\\n   * @param  {Number} max maximum value of the slider\\n   * @param  {Number} [value] default value of the slider\\n   * @param  {Number} [step] step size for each tick of the slider (if step is set to 0, the slider will move continuously from the minimum to the maximum value)\\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\\n   * @example\\n   * <div><code>\\n   * var slider;\\n   * function setup() {\\n   *   slider = createSlider(0, 255, 100);\\n   *   slider.position(10, 10);\\n   *   slider.style('width', '80px');\\n   * }\\n   *\\n   * function draw() {\\n   *   var val = slider.value();\\n   *   background(val);\\n   * }\\n   * </code></div>\\n   *\\n   * <div><code>\\n   * var slider;\\n   * function setup() {\\n   *   colorMode(HSB);\\n   *   slider = createSlider(0, 360, 60, 40);\\n   *   slider.position(10, 10);\\n   *   slider.style('width', '80px');\\n   * }\\n   *\\n   * function draw() {\\n   *   var val = slider.value();\\n   *   background(val, 100, 100, 1);\\n   * }\\n   * </code></div>\\n   */\\n  p5.prototype.createSlider = function(min, max, value, step) {\\n    p5._validateParameters('createSlider', arguments);\\n    var elt = document.createElement('input');\\n    elt.type = 'range';\\n    elt.min = min;\\n    elt.max = max;\\n    if (step === 0) {\\n      elt.step = 0.000000000000000001; // smallest valid step\\n    } else if (step) {\\n      elt.step = step;\\n    }\\n    if (typeof value === 'number') elt.value = value;\\n    return addElement(elt, this);\\n  };\\n\\n  /**\\n   * Creates a &lt;button&gt;&lt;/button&gt; element in the DOM.\\n   * Use .size() to set the display size of the button.\\n   * Use .mousePressed() to specify behavior on press.\\n   * Appends to the container node if one is specified, otherwise\\n   * appends to body.\\n   *\\n   * @method createButton\\n   * @param  {String} label label displayed on the button\\n   * @param  {String} [value] value of the button\\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\\n   * @example\\n   * <div class='norender'><code>\\n   * var button;\\n   * function setup() {\\n   *   createCanvas(100, 100);\\n   *   background(0);\\n   *   button = createButton('click me');\\n   *   button.position(19, 19);\\n   *   button.mousePressed(changeBG);\\n   * }\\n   *\\n   * function changeBG() {\\n   *   var val = random(255);\\n   *   background(val);\\n   * }\\n   * </code></div>\\n   */\\n  p5.prototype.createButton = function(label, value) {\\n    p5._validateParameters('createButton', arguments);\\n    var elt = document.createElement('button');\\n    elt.innerHTML = label;\\n    if (value) elt.value = value;\\n    return addElement(elt, this);\\n  };\\n\\n  /**\\n   * Creates a checkbox &lt;input&gt;&lt;/input&gt; element in the DOM.\\n   * Calling .checked() on a checkbox returns if it is checked or not\\n   *\\n   * @method createCheckbox\\n   * @param  {String} [label] label displayed after checkbox\\n   * @param  {boolean} [value] value of the checkbox; checked is true, unchecked is false\\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\\n   * @example\\n   * <div class='norender'><code>\\n   * var checkbox;\\n   *\\n   * function setup() {\\n   *   checkbox = createCheckbox('label', false);\\n   *   checkbox.changed(myCheckedEvent);\\n   * }\\n   *\\n   * function myCheckedEvent() {\\n   *   if (this.checked()) {\\n   *     console.log('Checking!');\\n   *   } else {\\n   *     console.log('Unchecking!');\\n   *   }\\n   * }\\n   * </code></div>\\n   */\\n  p5.prototype.createCheckbox = function() {\\n    p5._validateParameters('createCheckbox', arguments);\\n    var elt = document.createElement('div');\\n    var checkbox = document.createElement('input');\\n    checkbox.type = 'checkbox';\\n    elt.appendChild(checkbox);\\n    //checkbox must be wrapped in p5.Element before label so that label appears after\\n    var self = addElement(elt, this);\\n    self.checked = function() {\\n      var cb = self.elt.getElementsByTagName('input')[0];\\n      if (cb) {\\n        if (arguments.length === 0) {\\n          return cb.checked;\\n        } else if (arguments[0]) {\\n          cb.checked = true;\\n        } else {\\n          cb.checked = false;\\n        }\\n      }\\n      return self;\\n    };\\n    this.value = function(val) {\\n      self.value = val;\\n      return this;\\n    };\\n    if (arguments[0]) {\\n      var ran = Math.random()\\n        .toString(36)\\n        .slice(2);\\n      var label = document.createElement('label');\\n      checkbox.setAttribute('id', ran);\\n      label.htmlFor = ran;\\n      self.value(arguments[0]);\\n      label.appendChild(document.createTextNode(arguments[0]));\\n      elt.appendChild(label);\\n    }\\n    if (arguments[1]) {\\n      checkbox.checked = true;\\n    }\\n    return self;\\n  };\\n\\n  /**\\n   * Creates a dropdown menu &lt;select&gt;&lt;/select&gt; element in the DOM.\\n   * It also helps to assign select-box methods to p5.Element when selecting existing select box\\n   * @method createSelect\\n   * @param {boolean} [multiple] true if dropdown should support multiple selections\\n   * @return {p5.Element}\\n   * @example\\n   * <div><code>\\n   * var sel;\\n   *\\n   * function setup() {\\n   *   textAlign(CENTER);\\n   *   background(200);\\n   *   sel = createSelect();\\n   *   sel.position(10, 10);\\n   *   sel.option('pear');\\n   *   sel.option('kiwi');\\n   *   sel.option('grape');\\n   *   sel.changed(mySelectEvent);\\n   * }\\n   *\\n   * function mySelectEvent() {\\n   *   var item = sel.value();\\n   *   background(200);\\n   *   text('it is a' + item + '!', 50, 50);\\n   * }\\n   * </code></div>\\n   */\\n  /**\\n   * @method createSelect\\n   * @param {Object} existing DOM select element\\n   * @return {p5.Element}\\n   */\\n\\n  p5.prototype.createSelect = function() {\\n    p5._validateParameters('createSelect', arguments);\\n    var elt, self;\\n    var arg = arguments[0];\\n    if (typeof arg === 'object' && arg.elt.nodeName === 'SELECT') {\\n      self = arg;\\n      elt = this.elt = arg.elt;\\n    } else {\\n      elt = document.createElement('select');\\n      if (arg && typeof arg === 'boolean') {\\n        elt.setAttribute('multiple', 'true');\\n      }\\n      self = addElement(elt, this);\\n    }\\n    self.option = function(name, value) {\\n      var index;\\n      //see if there is already an option with this name\\n      for (var i = 0; i < this.elt.length; i++) {\\n        if (this.elt[i].innerHTML === name) {\\n          index = i;\\n          break;\\n        }\\n      }\\n      //if there is an option with this name we will modify it\\n      if (index !== undefined) {\\n        //if the user passed in false then delete that option\\n        if (value === false) {\\n          this.elt.remove(index);\\n        } else {\\n          //otherwise if the name and value are the same then change both\\n          if (this.elt[index].innerHTML === this.elt[index].value) {\\n            this.elt[index].innerHTML = this.elt[index].value = value;\\n            //otherwise just change the value\\n          } else {\\n            this.elt[index].value = value;\\n          }\\n        }\\n      } else {\\n        //if it doesn't exist make it\\n        var opt = document.createElement('option');\\n        opt.innerHTML = name;\\n        if (arguments.length > 1) opt.value = value;\\n        else opt.value = name;\\n        elt.appendChild(opt);\\n      }\\n    };\\n    self.selected = function(value) {\\n      var arr = [],\\n        i;\\n      if (arguments.length > 0) {\\n        for (i = 0; i < this.elt.length; i++) {\\n          if (value.toString() === this.elt[i].value) {\\n            this.elt.selectedIndex = i;\\n          }\\n        }\\n        return this;\\n      } else {\\n        if (this.elt.getAttribute('multiple')) {\\n          for (i = 0; i < this.elt.selectedOptions.length; i++) {\\n            arr.push(this.elt.selectedOptions[i].value);\\n          }\\n          return arr;\\n        } else {\\n          return this.elt.value;\\n        }\\n      }\\n    };\\n    return self;\\n  };\\n\\n  /**\\n   * Creates a radio button &lt;input&gt;&lt;/input&gt; element in the DOM.\\n   * The .option() method can be used to set options for the radio after it is\\n   * created. The .value() method will return the currently selected option.\\n   *\\n   * @method createRadio\\n   * @param  {String} [divId] the id and name of the created div and input field respectively\\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\\n   * @example\\n   * <div><code>\\n   * var radio;\\n   *\\n   * function setup() {\\n   *   radio = createRadio();\\n   *   radio.option('black');\\n   *   radio.option('white');\\n   *   radio.option('gray');\\n   *   radio.style('width', '60px');\\n   *   textAlign(CENTER);\\n   *   fill(255, 0, 0);\\n   * }\\n   *\\n   * function draw() {\\n   *   var val = radio.value();\\n   *   background(val);\\n   *   text(val, width / 2, height / 2);\\n   * }\\n   * </code></div>\\n   * <div><code>\\n   * var radio;\\n   *\\n   * function setup() {\\n   *   radio = createRadio();\\n   *   radio.option('apple', 1);\\n   *   radio.option('bread', 2);\\n   *   radio.option('juice', 3);\\n   *   radio.style('width', '60px');\\n   *   textAlign(CENTER);\\n   * }\\n   *\\n   * function draw() {\\n   *   background(200);\\n   *   var val = radio.value();\\n   *   if (val) {\\n   *     text('item cost is $' + val, width / 2, height / 2);\\n   *   }\\n   * }\\n   * </code></div>\\n   */\\n  p5.prototype.createRadio = function(existing_radios) {\\n    p5._validateParameters('createRadio', arguments);\\n    // do some prep by counting number of radios on page\\n    var radios = document.querySelectorAll('input[type=radio]');\\n    var count = 0;\\n    if (radios.length > 1) {\\n      var length = radios.length;\\n      var prev = radios[0].name;\\n      var current = radios[1].name;\\n      count = 1;\\n      for (var i = 1; i < length; i++) {\\n        current = radios[i].name;\\n        if (prev !== current) {\\n          count++;\\n        }\\n        prev = current;\\n      }\\n    } else if (radios.length === 1) {\\n      count = 1;\\n    }\\n    // see if we got an existing set of radios from callee\\n    var elt, self;\\n    if (typeof existing_radios === 'object') {\\n      // use existing elements\\n      self = existing_radios;\\n      elt = this.elt = existing_radios.elt;\\n    } else {\\n      // create a set of radio buttons\\n      elt = document.createElement('div');\\n      self = addElement(elt, this);\\n    }\\n    // setup member functions\\n    self._getInputChildrenArray = function() {\\n      return Array.prototype.slice.call(this.elt.children).filter(function(c) {\\n        return c.tagName === 'INPUT';\\n      });\\n    };\\n\\n    var times = -1;\\n    self.option = function(name, value) {\\n      var opt = document.createElement('input');\\n      opt.type = 'radio';\\n      opt.innerHTML = name;\\n      if (value) opt.value = value;\\n      else opt.value = name;\\n      opt.setAttribute('name', 'defaultradio' + count);\\n      elt.appendChild(opt);\\n      if (name) {\\n        times++;\\n        var label = document.createElement('label');\\n        opt.setAttribute('id', 'defaultradio' + count + '-' + times);\\n        label.htmlFor = 'defaultradio' + count + '-' + times;\\n        label.appendChild(document.createTextNode(name));\\n        elt.appendChild(label);\\n      }\\n      return opt;\\n    };\\n    self.selected = function(value) {\\n      var i;\\n      var inputChildren = self._getInputChildrenArray();\\n      if (value) {\\n        for (i = 0; i < inputChildren.length; i++) {\\n          if (inputChildren[i].value === value) inputChildren[i].checked = true;\\n        }\\n        return this;\\n      } else {\\n        for (i = 0; i < inputChildren.length; i++) {\\n          if (inputChildren[i].checked === true) return inputChildren[i].value;\\n        }\\n      }\\n    };\\n    self.value = function(value) {\\n      var i;\\n      var inputChildren = self._getInputChildrenArray();\\n      if (value) {\\n        for (i = 0; i < inputChildren.length; i++) {\\n[end of p5.dom.js]\\n[start of material.js]\\n/**\\n * @module Lights, Camera\\n * @submodule Material\\n * @for p5\\n * @requires core\\n */\\n\\n'use strict';\\n\\nvar p5 = require('../core/core');\\nvar constants = require('../core/constants');\\nrequire('./p5.Texture');\\n\\n/**\\n * Loads a custom shader from the provided vertex and fragment\\n * shader paths. The shader files are loaded asynchronously in the\\n * background, so this method should be used in preload().\\n *\\n * For now, there are three main types of shaders. p5 will automatically\\n * supply appropriate vertices, normals, colors, and lighting attributes\\n * if the parameters defined in the shader match the names.\\n *\\n * @method loadShader\\n * @param {String} [vertFilename] path to file containing vertex shader\\n * source code\\n * @param {String} [fragFilename] path to file containing fragment shader\\n * source code\\n * @return {p5.Shader} a shader object created from the provided\\n * vertex and fragment shader files.\\n */\\np5.prototype.loadShader = function(vertFilename, fragFilename) {\\n  var loadedShader = new p5.Shader();\\n\\n  var self = this;\\n  var loadedFrag = false;\\n  var loadedVert = false;\\n\\n  this.loadStrings(fragFilename, function(result) {\\n    loadedShader._fragSrc = result.join('\\\\n');\\n    loadedFrag = true;\\n    if (!loadedVert) {\\n      self._incrementPreload();\\n    }\\n  });\\n  this.loadStrings(vertFilename, function(result) {\\n    loadedShader._vertSrc = result.join('\\\\n');\\n    loadedVert = true;\\n    if (!loadedFrag) {\\n      self._incrementPreload();\\n    }\\n  });\\n\\n  return loadedShader;\\n};\\n\\n/**\\n * @method createShader\\n * @param {String} vertSrc source code for the vertex shader\\n * @param {String} fragSrc source code for the fragment shader\\n * @returns {p5.Shader} a shader object created from the provided\\n * vertex and fragment shaders.\\n *\\n * @example\\n * <div modernizr='webgl'>\\n * <code>\\n * // the 'varying's are shared between both vertex & fragment shaders\\n * var varying = 'precision highp float; varying vec2 vPos;';\\n *\\n * // the vertex shader is called for each vertex\\n * var vs =\\n *   varying +\\n *   'attribute vec3 aPosition;' +\\n *   'void main() { vPos = (gl_Position = vec4(aPosition,1.0)).xy; }';\\n *\\n * // the fragment shader is called for each pixel\\n * var fs =\\n *   varying +\\n *   'uniform vec2 p;' +\\n *   'uniform float r;' +\\n *   'const int I = 500;' +\\n *   'void main() {' +\\n *   '  vec2 c = p + vPos * r, z = c;' +\\n *   '  float n = 0.0;' +\\n *   '  for (int i = I; i > 0; i --) {' +\\n *   '    if(z.x*z.x+z.y*z.y > 4.0) {' +\\n *   '      n = float(i)/float(I);' +\\n *   '      break;' +\\n *   '    }' +\\n *   '    z = vec2(z.x*z.x-z.y*z.y, 2.0*z.x*z.y) + c;' +\\n *   '  }' +\\n *   '  gl_FragColor = vec4(0.5-cos(n*17.0)/2.0,0.5-cos(n*13.0)/2.0,0.5-cos(n*23.0)/2.0,1.0);' +\\n *   '}';\\n *\\n * var mandel;\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n *\\n *   // create and initialize the shader\\n *   mandel = createShader(vs, fs);\\n *   shader(mandel);\\n *   noStroke();\\n *\\n *   // 'p' is the center point of the Mandelbrot image\\n *   mandel.setUniform('p', [-0.74364388703, 0.13182590421]);\\n * }\\n *\\n * function draw() {\\n *   // 'r' is the size of the image in Mandelbrot-space\\n *   mandel.setUniform('r', 1.5 * exp(-6.5 * (1 + sin(millis() / 2000))));\\n *   quad(-1, -1, 1, -1, 1, 1, -1, 1);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * zooming Mandelbrot set. a colorful, infinitely detailed fractal.\\n */\\np5.prototype.createShader = function(vertSrc, fragSrc) {\\n  return new p5.Shader(this._renderer, vertSrc, fragSrc);\\n};\\n\\n/**\\n * The shader() function lets the user provide a custom shader\\n * to fill in shapes in WEBGL mode. Users can create their\\n * own shaders by loading vertex and fragment shaders with\\n * loadShader().\\n *\\n * @method shader\\n * @chainable\\n * @param {p5.Shader} [s] the desired p5.Shader to use for rendering\\n * shapes.\\n */\\np5.prototype.shader = function(s) {\\n  if (s._renderer === undefined) {\\n    s._renderer = this._renderer;\\n  }\\n  if (s.isStrokeShader()) {\\n    this._renderer.setStrokeShader(s);\\n  } else {\\n    this._renderer.setFillShader(s);\\n  }\\n  return this;\\n};\\n\\n/**\\n * Normal material for geometry. You can view all\\n * possible materials in this\\n * <a href=\\\"https://p5js.org/examples/3d-materials.html\\\">example</a>.\\n * @method normalMaterial\\n * @chainable\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(200);\\n *   normalMaterial();\\n *   sphere(50);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * Red, green and blue gradient.\\n *\\n */\\np5.prototype.normalMaterial = function() {\\n  this._renderer.drawMode = constants.FILL;\\n  this._renderer.setFillShader(this._renderer._getNormalShader());\\n  this._renderer.curFillColor = [1, 1, 1, 1];\\n  this.noStroke();\\n  return this;\\n};\\n\\n/**\\n * Texture for geometry.  You can view other possible materials in this\\n * <a href=\\\"https://p5js.org/examples/3d-materials.html\\\">example</a>.\\n * @method texture\\n * @param {p5.Image|p5.MediaElement|p5.Graphics} tex 2-dimensional graphics\\n *                    to render as texture\\n * @chainable\\n * @example\\n * <div>\\n * <code>\\n * var img;\\n * function preload() {\\n *   img = loadImage('assets/laDefense.jpg');\\n * }\\n *\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(0);\\n *   rotateZ(frameCount * 0.01);\\n *   rotateX(frameCount * 0.01);\\n *   rotateY(frameCount * 0.01);\\n *   //pass image as texture\\n *   texture(img);\\n *   box(200, 200, 200);\\n * }\\n * </code>\\n * </div>\\n *\\n * <div>\\n * <code>\\n * var pg;\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n *   pg = createGraphics(200, 200);\\n *   pg.textSize(100);\\n * }\\n *\\n * function draw() {\\n *   background(0);\\n *   pg.background(255);\\n *   pg.text('hello!', 0, 100);\\n *   //pass image as texture\\n *   texture(pg);\\n *   plane(200);\\n * }\\n * </code>\\n * </div>\\n *\\n * <div>\\n * <code>\\n * var vid;\\n * function preload() {\\n *   vid = createVideo('assets/fingers.mov');\\n *   vid.hide();\\n *   vid.loop();\\n * }\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(0);\\n *   //pass video frame as texture\\n *   texture(vid);\\n *   plane(200);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * Rotating view of many images umbrella and grid roof on a 3d plane\\n * black canvas\\n * black canvas\\n *\\n */\\np5.prototype.texture = function(tex) {\\n  this._renderer.GL.depthMask(true);\\n  this._renderer.GL.enable(this._renderer.GL.BLEND);\\n  this._renderer.GL.blendFunc(\\n    this._renderer.GL.SRC_ALPHA,\\n    this._renderer.GL.ONE_MINUS_SRC_ALPHA\\n  );\\n\\n  this._renderer.drawMode = constants.TEXTURE;\\n  var shader = this._renderer._useLightShader();\\n  shader.setUniform('uSpecular', false);\\n  shader.setUniform('isTexture', true);\\n  shader.setUniform('uSampler', tex);\\n  this.noStroke();\\n  return this;\\n};\\n\\n/**\\n * Ambient material for geometry with a given color. You can view all\\n * possible materials in this\\n * <a href=\\\"https://p5js.org/examples/3d-materials.html\\\">example</a>.\\n * @method  ambientMaterial\\n * @param  {Number} v1  gray value, red or hue value\\n *                         (depending on the current color mode),\\n * @param  {Number} [v2] green or saturation value\\n * @param  {Number} [v3] blue or brightness value\\n * @param  {Number} [a]  opacity\\n * @chainable\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n * function draw() {\\n *   background(0);\\n *   ambientLight(100);\\n *   pointLight(250, 250, 250, 100, 100, 0);\\n *   ambientMaterial(250);\\n *   sphere(50);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * radiating light source from top right of canvas\\n *\\n */\\n/**\\n * @method  ambientMaterial\\n * @param  {Number[]|String|p5.Color} color  color, color Array, or CSS color string\\n * @chainable\\n */\\np5.prototype.ambientMaterial = function(v1, v2, v3, a) {\\n  var color = p5.prototype.color.apply(this, arguments);\\n  this._renderer.curFillColor = color._array;\\n\\n  var shader = this._renderer._useLightShader();\\n  shader.setUniform('uMaterialColor', this._renderer.curFillColor);\\n  shader.setUniform('uSpecular', false);\\n  shader.setUniform('isTexture', false);\\n  return this;\\n};\\n\\n/**\\n * Specular material for geometry with a given color. You can view all\\n * possible materials in this\\n * <a href=\\\"https://p5js.org/examples/3d-materials.html\\\">example</a>.\\n * @method specularMaterial\\n * @param  {Number} v1  gray value, red or hue value\\n *                       (depending on the current color mode),\\n * @param  {Number} [v2] green or saturation value\\n * @param  {Number} [v3] blue or brightness value\\n * @param  {Number} [a]  opacity\\n * @chainable\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n * function draw() {\\n *   background(0);\\n *   ambientLight(100);\\n *   pointLight(250, 250, 250, 100, 100, 0);\\n *   specularMaterial(250);\\n *   sphere(50);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * diffused radiating light source from top right of canvas\\n *\\n */\\n/**\\n * @method specularMaterial\\n * @param  {Number[]|String|p5.Color} color color Array, or CSS color string\\n * @chainable\\n */\\np5.prototype.specularMaterial = function(v1, v2, v3, a) {\\n  var color = p5.prototype.color.apply(this, arguments);\\n  this._renderer.curFillColor = color._array;\\n\\n  var shader = this._renderer._useLightShader();\\n  shader.setUniform('uMaterialColor', this._renderer.curFillColor);\\n  shader.setUniform('uSpecular', true);\\n  shader.setUniform('isTexture', false);\\n  return this;\\n};\\n\\n/**\\n * @private blends colors according to color components.\\n * If alpha value is less than 1, we need to enable blending\\n * on our gl context.  Otherwise opaque objects need to a depthMask.\\n * @param  {Number[]} color [description]\\n * @return {Number[]]}  Normalized numbers array\\n */\\np5.RendererGL.prototype._applyColorBlend = function(colors) {\\n  var gl = this.GL;\\n  if (colors[colors.length - 1] < 1.0) {\\n    gl.depthMask(false);\\n    gl.enable(gl.BLEND);\\n    gl.blendEquation(gl.FUNC_ADD);\\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\\n  } else {\\n    gl.depthMask(true);\\n    gl.disable(gl.BLEND);\\n  }\\n  return colors;\\n};\\n\\nmodule.exports = p5;\\n\\n[end of material.js]\\n[start of spec.js]\\nvar spec = {\\n  addons: ['p5.dom'],\\n  color: ['color_conversion', 'creating_reading', 'p5.Color', 'setting'],\\n  core: [\\n    '2d_primitives',\\n    'core',\\n    'curves',\\n    'element',\\n    'error_helpers',\\n    'renderer',\\n    'structure'\\n  ],\\n  data: ['dictionary'],\\n  image: ['loading', 'pixels'],\\n  io: ['files_input'],\\n  math: ['calculation', 'noise', 'p5.Vector', 'random', 'trigonometry'],\\n  typography: ['font_loading'],\\n  utilities: ['array_functions', 'string_functions', 'time_date'],\\n  webgl: [\\n    'matrix',\\n    'p5.RendererGL',\\n    'p5.Shader',\\n    'p5.Texture',\\n    'pixels',\\n    'stroke'\\n  ]\\n};\\nObject.keys(spec).map(function(folder) {\\n  spec[folder].map(function(file) {\\n    var string = [\\n      '<script src=\\\"unit/',\\n      folder,\\n      '/',\\n      file,\\n      '.js\\\" type=\\\"text/javascript\\\" ></script>'\\n    ];\\n    document.write(string.join(''));\\n  });\\n});\\n\\n[end of spec.js]\\n[start of files.js]\\n/**\\n * @module IO\\n * @submodule Input\\n * @for p5\\n * @requires core\\n */\\n\\n/* globals Request: false */\\n/* globals Headers: false */\\n\\n'use strict';\\n\\nvar p5 = require('../core/core');\\nrequire('whatwg-fetch');\\nrequire('es6-promise').polyfill();\\nvar fetchJsonp = require('fetch-jsonp');\\nrequire('../core/error_helpers');\\n\\n/**\\n * Loads a JSON file from a file or a URL, and returns an Object.\\n * Note that even if the JSON file contains an Array, an Object will be\\n * returned with index numbers as keys.\\n *\\n * This method is asynchronous, meaning it may not finish before the next\\n * line in your sketch is executed. JSONP is supported via a polyfill and you\\n * can pass in as the second argument an object with definitions of the json\\n * callback following the syntax specified <a href=\\\"https://github.com/camsong/\\n * fetch-jsonp\\\">here</a>.\\n *\\n * @method loadJSON\\n * @param  {String}        path       name of the file or url to load\\n * @param  {Object}        [jsonpOptions] options object for jsonp related settings\\n * @param  {String}        [datatype] \\\"json\\\" or \\\"jsonp\\\"\\n * @param  {function}      [callback] function to be executed after\\n *                                    loadJSON() completes, data is passed\\n *                                    in as first argument\\n * @param  {function}      [errorCallback] function to be executed if\\n *                                    there is an error, response is passed\\n *                                    in as first argument\\n * @return {Object|Array}             JSON data\\n * @example\\n *\\n * <p>Calling loadJSON() inside preload() guarantees to complete the\\n * operation before setup() and draw() are called.</p>\\n *\\n * <div><code>\\n * // Examples use USGS Earthquake API:\\n * //   https://earthquake.usgs.gov/fdsnws/event/1/#methods\\n * var earthquakes;\\n * function preload() {\\n *   // Get the most recent earthquake in the database\\n *   var url =\\n    'https://earthquake.usgs.gov/earthquakes/feed/v1.0/' +\\n *     'summary/all_day.geojson';\\n *   earthquakes = loadJSON(url);\\n * }\\n *\\n * function setup() {\\n *   noLoop();\\n * }\\n *\\n * function draw() {\\n *   background(200);\\n *   // Get the magnitude and name of the earthquake out of the loaded JSON\\n *   var earthquakeMag = earthquakes.features[0].properties.mag;\\n *   var earthquakeName = earthquakes.features[0].properties.place;\\n *   ellipse(width / 2, height / 2, earthquakeMag * 10, earthquakeMag * 10);\\n *   textAlign(CENTER);\\n *   text(earthquakeName, 0, height - 30, width, 30);\\n * }\\n * </code></div>\\n *\\n *\\n * <p>Outside of preload(), you may supply a callback function to handle the\\n * object:</p>\\n * <div><code>\\n * function setup() {\\n *   noLoop();\\n *   var url =\\n    'https://earthquake.usgs.gov/earthquakes/feed/v1.0/' +\\n *     'summary/all_day.geojson';\\n *   loadJSON(url, drawEarthquake);\\n * }\\n *\\n * function draw() {\\n *   background(200);\\n * }\\n *\\n * function drawEarthquake(earthquakes) {\\n *   // Get the magnitude and name of the earthquake out of the loaded JSON\\n *   var earthquakeMag = earthquakes.features[0].properties.mag;\\n *   var earthquakeName = earthquakes.features[0].properties.place;\\n *   ellipse(width / 2, height / 2, earthquakeMag * 10, earthquakeMag * 10);\\n *   textAlign(CENTER);\\n *   text(earthquakeName, 0, height - 30, width, 30);\\n * }\\n * </code></div>\\n *\\n * @alt\\n * 50x50 ellipse that changes from black to white depending on the current humidity\\n * 50x50 ellipse that changes from black to white depending on the current humidity\\n *\\n */\\np5.prototype.loadJSON = function() {\\n  var path = arguments[0];\\n  var callback;\\n  var errorCallback;\\n  var options;\\n\\n  var ret = {}; // object needed for preload\\n  var t = 'json';\\n\\n  // check for explicit data type argument\\n  for (var i = 1; i < arguments.length; i++) {\\n    var arg = arguments[i];\\n    if (typeof arg === 'string') {\\n      if (arg === 'jsonp' || arg === 'json') {\\n        t = arg;\\n      }\\n    } else if (typeof arg === 'function') {\\n      if (!callback) {\\n        callback = arg;\\n      } else {\\n        errorCallback = arg;\\n      }\\n    } else if (typeof arg === 'object' && arg.hasOwnProperty('jsonpCallback')) {\\n      t = 'jsonp';\\n      options = arg;\\n    }\\n  }\\n\\n  var self = this;\\n  this.httpDo(\\n    path,\\n    'GET',\\n    options,\\n    t,\\n    function(resp) {\\n      for (var k in resp) {\\n        ret[k] = resp[k];\\n      }\\n      if (typeof callback !== 'undefined') {\\n        callback(resp);\\n      }\\n\\n      self._decrementPreload();\\n    },\\n    errorCallback\\n  );\\n\\n  return ret;\\n};\\n\\n/**\\n * Reads the contents of a file and creates a String array of its individual\\n * lines. If the name of the file is used as the parameter, as in the above\\n * example, the file must be located in the sketch directory/folder.\\n * <br><br>\\n * Alternatively, the file maybe be loaded from anywhere on the local\\n * computer using an absolute path (something that starts with / on Unix and\\n * Linux, or a drive letter on Windows), or the filename parameter can be a\\n * URL for a file found on a network.\\n * <br><br>\\n * This method is asynchronous, meaning it may not finish before the next\\n * line in your sketch is executed.\\n *\\n * @method loadStrings\\n * @param  {String}   filename   name of the file or url to load\\n * @param  {function} [callback] function to be executed after loadStrings()\\n *                               completes, Array is passed in as first\\n *                               argument\\n * @param  {function} [errorCallback] function to be executed if\\n *                               there is an error, response is passed\\n *                               in as first argument\\n * @return {String[]}            Array of Strings\\n * @example\\n *\\n * <p>Calling loadStrings() inside preload() guarantees to complete the\\n * operation before setup() and draw() are called.</p>\\n *\\n * <div><code>\\n * var result;\\n * function preload() {\\n *   result = loadStrings('assets/test.txt');\\n * }\\n\\n * function setup() {\\n *   background(200);\\n *   var ind = floor(random(result.length));\\n *   text(result[ind], 10, 10, 80, 80);\\n * }\\n * </code></div>\\n *\\n * <p>Outside of preload(), you may supply a callback function to handle the\\n * object:</p>\\n *\\n * <div><code>\\n * function setup() {\\n *   loadStrings('assets/test.txt', pickString);\\n * }\\n *\\n * function pickString(result) {\\n *   background(200);\\n *   var ind = floor(random(result.length));\\n *   text(result[ind], 10, 10, 80, 80);\\n * }\\n * </code></div>\\n *\\n * @alt\\n * randomly generated text from a file, for example \\\"i smell like butter\\\"\\n * randomly generated text from a file, for example \\\"i have three feet\\\"\\n *\\n */\\np5.prototype.loadStrings = function() {\\n  var ret = [];\\n  var callback, errorCallback;\\n\\n  for (var i = 1; i < arguments.length; i++) {\\n    var arg = arguments[i];\\n    if (typeof arg === 'function') {\\n      if (typeof callback === 'undefined') {\\n        callback = arg;\\n      } else if (typeof errorCallback === 'undefined') {\\n        errorCallback = arg;\\n      }\\n    }\\n  }\\n\\n  var self = this;\\n  p5.prototype.httpDo.call(\\n    this,\\n    arguments[0],\\n    'GET',\\n    'text',\\n    function(data) {\\n      var arr = data.match(/[^\\\\r\\\\n]+/g);\\n      for (var k in arr) {\\n        ret[k] = arr[k];\\n      }\\n\\n      if (typeof callback !== 'undefined') {\\n        callback(ret);\\n      }\\n\\n      self._decrementPreload();\\n    },\\n    errorCallback\\n  );\\n\\n  return ret;\\n};\\n\\n/**\\n * <p>Reads the contents of a file or URL and creates a p5.Table object with\\n * its values. If a file is specified, it must be located in the sketch's\\n * \\\"data\\\" folder. The filename parameter can also be a URL to a file found\\n * online. By default, the file is assumed to be comma-separated (in CSV\\n * format). Table only looks for a header row if the 'header' option is\\n * included.</p>\\n *\\n * <p>Possible options include:\\n * <ul>\\n * <li>csv - parse the table as comma-separated values</li>\\n * <li>tsv - parse the table as tab-separated values</li>\\n * <li>header - this table has a header (title) row</li>\\n * </ul>\\n * </p>\\n *\\n * <p>When passing in multiple options, pass them in as separate parameters,\\n * seperated by commas. For example:\\n * <br><br>\\n * <code>\\n * loadTable('my_csv_file.csv', 'csv', 'header');\\n * </code>\\n * </p>\\n *\\n * <p> All files loaded and saved use UTF-8 encoding.</p>\\n *\\n * <p>This method is asynchronous, meaning it may not finish before the next\\n * line in your sketch is executed. Calling loadTable() inside preload()\\n * guarantees to complete the operation before setup() and draw() are called.\\n * <p>Outside of preload(), you may supply a callback function to handle the\\n * object:</p>\\n * </p>\\n *\\n * @method loadTable\\n * @param  {String}         filename   name of the file or URL to load\\n * @param  {String}         options  \\\"header\\\" \\\"csv\\\" \\\"tsv\\\"\\n * @param  {function}       [callback] function to be executed after\\n *                                     loadTable() completes. On success, the\\n *                                     Table object is passed in as the\\n *                                     first argument.\\n * @param  {function}  [errorCallback] function to be executed if\\n *                                     there is an error, response is passed\\n *                                     in as first argument\\n * @return {Object}                    Table object containing data\\n *\\n * @example\\n * <div class=\\\"norender\\\">\\n * <code>\\n * // Given the following CSV file called \\\"mammals.csv\\\"\\n * // located in the project's \\\"assets\\\" folder:\\n * //\\n * // id,species,name\\n * // 0,Capra hircus,Goat\\n * // 1,Panthera pardus,Leopard\\n * // 2,Equus zebra,Zebra\\n *\\n * var table;\\n *\\n * function preload() {\\n *   //my table is comma separated value \\\"csv\\\"\\n *   //and has a header specifying the columns labels\\n *   table = loadTable('assets/mammals.csv', 'csv', 'header');\\n *   //the file can be remote\\n *   //table = loadTable(\\\"http://p5js.org/reference/assets/mammals.csv\\\",\\n *   //                  \\\"csv\\\", \\\"header\\\");\\n * }\\n *\\n * function setup() {\\n *   //count the columns\\n *   print(table.getRowCount() + ' total rows in table');\\n *   print(table.getColumnCount() + ' total columns in table');\\n *\\n *   print(table.getColumn('name'));\\n *   //[\\\"Goat\\\", \\\"Leopard\\\", \\\"Zebra\\\"]\\n *\\n *   //cycle through the table\\n *   for (var r = 0; r < table.getRowCount(); r++)\\n *     for (var c = 0; c < table.getColumnCount(); c++) {\\n *       print(table.getString(r, c));\\n *     }\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * randomly generated text from a file, for example \\\"i smell like butter\\\"\\n * randomly generated text from a file, for example \\\"i have three feet\\\"\\n *\\n */\\n/**\\n * @method loadTable\\n * @param  {String}         filename\\n * @param  {function}       [callback]\\n * @param  {function}  [errorCallback]\\n * @return {Object}\\n */\\np5.prototype.loadTable = function(path) {\\n  var callback;\\n  var errorCallback;\\n  var options = [];\\n  var header = false;\\n  var ext = path.substring(path.lastIndexOf('.') + 1, path.length);\\n  var sep = ',';\\n  var separatorSet = false;\\n\\n  if (ext === 'tsv') {\\n    //Only need to check extension is tsv because csv is default\\n    sep = '\\\\t';\\n  }\\n\\n  for (var i = 1; i < arguments.length; i++) {\\n    if (typeof arguments[i] === 'function') {\\n      if (typeof callback === 'undefined') {\\n        callback = arguments[i];\\n      } else if (typeof errorCallback === 'undefined') {\\n        errorCallback = arguments[i];\\n      }\\n    } else if (typeof arguments[i] === 'string') {\\n      options.push(arguments[i]);\\n      if (arguments[i] === 'header') {\\n        header = true;\\n      }\\n      if (arguments[i] === 'csv') {\\n        if (separatorSet) {\\n          throw new Error('Cannot set multiple separator types.');\\n        } else {\\n          sep = ',';\\n          separatorSet = true;\\n        }\\n      } else if (arguments[i] === 'tsv') {\\n        if (separatorSet) {\\n          throw new Error('Cannot set multiple separator types.');\\n        } else {\\n          sep = '\\\\t';\\n          separatorSet = true;\\n        }\\n      }\\n    }\\n  }\\n\\n  var t = new p5.Table();\\n\\n  var self = this;\\n  this.httpDo(\\n    path,\\n    'GET',\\n    'text',\\n    function(resp) {\\n      var state = {};\\n\\n      // define constants\\n      var PRE_TOKEN = 0,\\n        MID_TOKEN = 1,\\n        POST_TOKEN = 2,\\n        POST_RECORD = 4;\\n\\n      var QUOTE = '\\\"',\\n        CR = '\\\\r',\\n        LF = '\\\\n';\\n\\n      var records = [];\\n      var offset = 0;\\n      var currentRecord = null;\\n      var currentChar;\\n\\n      var tokenBegin = function() {\\n        state.currentState = PRE_TOKEN;\\n        state.token = '';\\n      };\\n\\n      var tokenEnd = function() {\\n        currentRecord.push(state.token);\\n        tokenBegin();\\n      };\\n\\n      var recordBegin = function() {\\n        state.escaped = false;\\n        currentRecord = [];\\n        tokenBegin();\\n      };\\n\\n      var recordEnd = function() {\\n        state.currentState = POST_RECORD;\\n        records.push(currentRecord);\\n        currentRecord = null;\\n      };\\n\\n      for (;;) {\\n        currentChar = resp[offset++];\\n\\n        // EOF\\n        if (currentChar == null) {\\n          if (state.escaped) {\\n            throw new Error('Unclosed quote in file.');\\n          }\\n          if (currentRecord) {\\n            tokenEnd();\\n            recordEnd();\\n            break;\\n          }\\n        }\\n        if (currentRecord === null) {\\n          recordBegin();\\n        }\\n\\n        // Handle opening quote\\n        if (state.currentState === PRE_TOKEN) {\\n          if (currentChar === QUOTE) {\\n            state.escaped = true;\\n            state.currentState = MID_TOKEN;\\n            continue;\\n          }\\n          state.currentState = MID_TOKEN;\\n        }\\n\\n        // mid-token and escaped, look for sequences and end quote\\n        if (state.currentState === MID_TOKEN && state.escaped) {\\n          if (currentChar === QUOTE) {\\n            if (resp[offset] === QUOTE) {\\n              state.token += QUOTE;\\n              offset++;\\n            } else {\\n              state.escaped = false;\\n              state.currentState = POST_TOKEN;\\n            }\\n          } else if (currentChar === CR) {\\n            continue;\\n          } else {\\n            state.token += currentChar;\\n          }\\n          continue;\\n        }\\n\\n        // fall-through: mid-token or post-token, not escaped\\n        if (currentChar === CR) {\\n          if (resp[offset] === LF) {\\n            offset++;\\n          }\\n          tokenEnd();\\n          recordEnd();\\n        } else if (currentChar === LF) {\\n          tokenEnd();\\n          recordEnd();\\n        } else if (currentChar === sep) {\\n          tokenEnd();\\n        } else if (state.currentState === MID_TOKEN) {\\n          state.token += currentChar;\\n        }\\n      }\\n\\n      // set up column names\\n      if (header) {\\n        t.columns = records.shift();\\n      } else {\\n        for (i = 0; i < records[0].length; i++) {\\n          t.columns[i] = 'null';\\n        }\\n      }\\n      var row;\\n      for (i = 0; i < records.length; i++) {\\n        //Handles row of 'undefined' at end of some CSVs\\n        if (records[i].length === 1) {\\n          if (records[i][0] === 'undefined' || records[i][0] === '') {\\n            continue;\\n          }\\n        }\\n        row = new p5.TableRow();\\n        row.arr = records[i];\\n        row.obj = makeObject(records[i], t.columns);\\n        t.addRow(row);\\n      }\\n      if (typeof callback === 'function') {\\n        callback(t);\\n      }\\n\\n      self._decrementPreload();\\n    },\\n    function(err) {\\n      // Error handling\\n      p5._friendlyFileLoadError(2, path);\\n\\n      if (errorCallback) {\\n        errorCallback(err);\\n      } else {\\n        throw err;\\n      }\\n    }\\n  );\\n\\n  return t;\\n};\\n\\n// helper function to turn a row into a JSON object\\nfunction makeObject(row, headers) {\\n  var ret = {};\\n  headers = headers || [];\\n  if (typeof headers === 'undefined') {\\n    for (var j = 0; j < row.length; j++) {\\n      headers[j.toString()] = j;\\n    }\\n  }\\n  for (var i = 0; i < headers.length; i++) {\\n    var key = headers[i];\\n    var val = row[i];\\n    ret[key] = val;\\n  }\\n  return ret;\\n}\\n\\n/*global parseXML */\\np5.prototype.parseXML = function(two) {\\n  var one = new p5.XML();\\n  var i;\\n  if (two.children.length) {\\n    for (i = 0; i < two.children.length; i++) {\\n      var node = parseXML(two.children[i]);\\n      one.addChild(node);\\n    }\\n    one.setName(two.nodeName);\\n    one._setCont(two.textContent);\\n    one._setAttributes(two);\\n    for (var j = 0; j < one.children.length; j++) {\\n      one.children[j].parent = one;\\n    }\\n    return one;\\n  } else {\\n    one.setName(two.nodeName);\\n    one._setCont(two.textContent);\\n    one._setAttributes(two);\\n    return one;\\n  }\\n};\\n\\n/**\\n * Reads the contents of a file and creates an XML object with its values.\\n * If the name of the file is used as the parameter, as in the above example,\\n * the file must be located in the sketch directory/folder.\\n *\\n * Alternatively, the file maybe be loaded from anywhere on the local\\n * computer using an absolute path (something that starts with / on Unix and\\n * Linux, or a drive letter on Windows), or the filename parameter can be a\\n * URL for a file found on a network.\\n *\\n * This method is asynchronous, meaning it may not finish before the next\\n * line in your sketch is executed. Calling loadXML() inside preload()\\n * guarantees to complete the operation before setup() and draw() are called.\\n *\\n * Outside of preload(), you may supply a callback function to handle the\\n * object.\\n *\\n * @method loadXML\\n * @param  {String}   filename   name of the file or URL to load\\n * @param  {function} [callback] function to be executed after loadXML()\\n *                               completes, XML object is passed in as\\n *                               first argument\\n * @param  {function} [errorCallback] function to be executed if\\n *                               there is an error, response is passed\\n *                               in as first argument\\n * @return {Object}              XML object containing data\\n * @example\\n * <div class='norender'><code>\\n * // The following short XML file called \\\"mammals.xml\\\" is parsed\\n * // in the code below.\\n * //\\n * // <?xml version=\\\"1.0\\\"?>\\n * // &lt;mammals&gt;\\n * //   &lt;animal id=\\\"0\\\" species=\\\"Capra hircus\\\">Goat&lt;/animal&gt;\\n * //   &lt;animal id=\\\"1\\\" species=\\\"Panthera pardus\\\">Leopard&lt;/animal&gt;\\n * //   &lt;animal id=\\\"2\\\" species=\\\"Equus zebra\\\">Zebra&lt;/animal&gt;\\n * // &lt;/mammals&gt;\\n *\\n * var xml;\\n *\\n * function preload() {\\n *   xml = loadXML('assets/mammals.xml');\\n * }\\n *\\n * function setup() {\\n *   var children = xml.getChildren('animal');\\n *\\n *   for (var i = 0; i < children.length; i++) {\\n *     var id = children[i].getNum('id');\\n *     var coloring = children[i].getString('species');\\n *     var name = children[i].getContent();\\n *     print(id + ', ' + coloring + ', ' + name);\\n *   }\\n * }\\n *\\n * // Sketch prints:\\n * // 0, Capra hircus, Goat\\n * // 1, Panthera pardus, Leopard\\n * // 2, Equus zebra, Zebra\\n * </code></div>\\n *\\n * @alt\\n * no image displayed\\n *\\n */\\np5.prototype.loadXML = function() {\\n  var ret = {};\\n  var callback, errorCallback;\\n\\n  for (var i = 1; i < arguments.length; i++) {\\n    var arg = arguments[i];\\n    if (typeof arg === 'function') {\\n      if (typeof callback === 'undefined') {\\n        callback = arg;\\n      } else if (typeof errorCallback === 'undefined') {\\n        errorCallback = arg;\\n      }\\n    }\\n  }\\n\\n  var self = this;\\n  this.httpDo(\\n    arguments[0],\\n    'GET',\\n    'xml',\\n    function(xml) {\\n      for (var key in xml) {\\n        ret[key] = xml[key];\\n      }\\n      if (typeof callback !== 'undefined') {\\n        callback(ret);\\n      }\\n\\n      self._decrementPreload();\\n    },\\n    errorCallback\\n  );\\n\\n  return ret;\\n};\\n\\n/**\\n * Method for executing an HTTP GET request. If data type is not specified,\\n * p5 will try to guess based on the URL, defaulting to text. This is equivalent to\\n * calling <code>httpDo(path, 'GET')</code>.\\n *\\n * @method httpGet\\n * @param  {String}        path       name of the file or url to load\\n * @param  {String}        [datatype] \\\"json\\\", \\\"jsonp\\\", \\\"xml\\\", or \\\"text\\\"\\n * @param  {Object}        [data]     param data passed sent with request\\n * @param  {function}      [callback] function to be executed after\\n *                                    httpGet() completes, data is passed in\\n *                                    as first argument\\n * @param  {function}      [errorCallback] function to be executed if\\n *                                    there is an error, response is passed\\n *                                    in as first argument\\n * @example\\n * <div class='norender'><code>\\n * // Examples use USGS Earthquake API:\\n * //   https://earthquake.usgs.gov/fdsnws/event/1/#methods\\n * var earthquakes;\\n * function preload() {\\n *   // Get the most recent earthquake in the database\\n *   var url =\\n    'https://earthquake.usgs.gov/fdsnws/event/1/query?' +\\n *     'format=geojson&limit=1&orderby=time';\\n *   httpGet(url, 'jsonp', false, function(response) {\\n *     // when the HTTP request completes, populate the variable that holds the\\n *     // earthquake data used in the visualization.\\n *     earthquakes = response;\\n *   });\\n * }\\n *\\n * function draw() {\\n *   if (!earthquakes) {\\n *     // Wait until the earthquake data has loaded before drawing.\\n *     return;\\n *   }\\n *   background(200);\\n *   // Get the magnitude and name of the earthquake out of the loaded JSON\\n *   var earthquakeMag = earthquakes.features[0].properties.mag;\\n *   var earthquakeName = earthquakes.features[0].properties.place;\\n *   ellipse(width / 2, height / 2, earthquakeMag * 10, earthquakeMag * 10);\\n *   textAlign(CENTER);\\n *   text(earthquakeName, 0, height - 30, width, 30);\\n *   noLoop();\\n * }\\n * </code></div>\\n */\\np5.prototype.httpGet = function() {\\n  var args = Array.prototype.slice.call(arguments);\\n  args.splice(1, 0, 'GET');\\n  p5.prototype.httpDo.apply(this, args);\\n};\\n\\n/**\\n * Method for executing an HTTP POST request. If data type is not specified,\\n * p5 will try to guess based on the URL, defaulting to text. This is equivalent to\\n * calling <code>httpDo(path, 'POST')</code>.\\n *\\n * @method httpPost\\n * @param  {String}        path       name of the file or url to load\\n * @param  {String}        [datatype] \\\"json\\\", \\\"jsonp\\\", \\\"xml\\\", or \\\"text\\\".\\n *                                    If omitted, httpPost() will guess.\\n * @param  {Object}        [data]     param data passed sent with request\\n * @param  {function}      [callback] function to be executed after\\n *                                    httpPost() completes, data is passed in\\n *                                    as first argument\\n * @param  {function}      [errorCallback] function to be executed if\\n *                                    there is an error, response is passed\\n *                                    in as first argument\\n *\\n * @example\\n * <div>\\n * <code>\\n * // Examples use jsonplaceholder.typicode.com for a Mock Data API\\n *\\n * var url = 'https://jsonplaceholder.typicode.com/posts';\\n * var postData = { userId: 1, title: 'p5 Clicked!', body: 'p5.js is way cool.' };\\n *\\n * function setup() {\\n *   createCanvas(800, 800);\\n * }\\n *\\n * function mousePressed() {\\n *   // Pick new random color values\\n *   var r = random(255);\\n *   var g = random(255);\\n *   var b = random(255);\\n *\\n *   httpPost(url, 'json', postData, function(result) {\\n *     strokeWeight(2);\\n *     stroke(r, g, b);\\n *     fill(r, g, b, 127);\\n *     ellipse(mouseX, mouseY, 200, 200);\\n *     text(result.body, mouseX, mouseY);\\n *   });\\n * }\\n * </code>\\n * </div>\\n *\\n *\\n * <div><code>\\n * var url = 'https://invalidURL'; // A bad URL that will cause errors\\n * var postData = { title: 'p5 Clicked!', body: 'p5.js is way cool.' };\\n *\\n * function setup() {\\n *   createCanvas(800, 800);\\n * }\\n *\\n * function mousePressed() {\\n *   // Pick new random color values\\n *   var r = random(255);\\n *   var g = random(255);\\n *   var b = random(255);\\n *\\n *   httpPost(\\n *     url,\\n *     'json',\\n *     postData,\\n *     function(result) {\\n *       // ... won't be called\\n *     },\\n *     function(error) {\\n *       strokeWeight(2);\\n *       stroke(r, g, b);\\n *       fill(r, g, b, 127);\\n *       text(error.toString(), mouseX, mouseY);\\n *     }\\n *   );\\n * }\\n * </code></div>\\n *\\n */\\np5.prototype.httpPost = function() {\\n  var args = Array.prototype.slice.call(arguments);\\n  args.splice(1, 0, 'POST');\\n  p5.prototype.httpDo.apply(this, args);\\n};\\n\\n/**\\n * Method for executing an HTTP request. If data type is not specified,\\n * p5 will try to guess based on the URL, defaulting to text.<br><br>\\n * For more advanced use, you may also pass in the path as the first argument\\n * and a object as the second argument, the signature follows the one specified\\n * in the Fetch API specification.\\n *\\n * @method httpDo\\n * @param  {String}        path       name of the file or url to load\\n * @param  {String}        [method]   either \\\"GET\\\", \\\"POST\\\", or \\\"PUT\\\",\\n *                                    defaults to \\\"GET\\\"\\n * @param  {String}        [datatype] \\\"json\\\", \\\"jsonp\\\", \\\"xml\\\", or \\\"text\\\"\\n * @param  {Object}        [data]     param data passed sent with request\\n * @param  {function}      [callback] function to be executed after\\n *                                    httpGet() completes, data is passed in\\n *                                    as first argument\\n * @param  {function}      [errorCallback] function to be executed if\\n *                                    there is an error, response is passed\\n *                                    in as first argument\\n *\\n *\\n * @example\\n * <div>\\n * <code>\\n * // Examples use USGS Earthquake API:\\n[end of files.js]\\n[start of generate-typescript-annotations.js]\\n/// @ts-check\\nconst createEmitter = require('./emit');\\n\\nfunction position(file, line) {\\n  return file + ', line ' + line;\\n}\\n\\nfunction classitemPosition(classitem) {\\n  return position(classitem.file, classitem.line);\\n}\\n\\nfunction overloadPosition(classitem, overload) {\\n  return position(classitem.file, overload.line);\\n}\\n\\n// mod is used to make yuidocs \\\"global\\\". It actually just calls generate()\\n// This design was selected to avoid rewriting the whole file from\\n// https://github.com/toolness/friendly-error-fellowship/blob/2093aee2acc53f0885fcad252a170e17af19682a/experiments/typescript/generate-typescript-annotations.js\\nfunction mod(yuidocs, localFileame, globalFilename, sourcePath) {\\n  var emit;\\n  var constants = {};\\n  var missingTypes = {};\\n\\n  // http://stackoverflow.com/a/2008353/2422398\\n  var JS_SYMBOL_RE = /^[$A-Z_][0-9A-Z_$]*$/i;\\n\\n  var P5_CLASS_RE = /^p5\\\\.([^.]+)$/;\\n\\n  var P5_ALIASES = [\\n    'p5',\\n    // These are supposedly \\\"classes\\\" in our docs, but they don't exist\\n    // as objects, and their methods are all defined on p5.\\n    'p5.dom',\\n    'p5.sound'\\n  ];\\n\\n  var EXTERNAL_TYPES = new Set([\\n    'HTMLCanvasElement',\\n    'HTMLElement',\\n    'Float32Array',\\n    'AudioParam',\\n    'AudioNode',\\n    'GainNode',\\n    'DelayNode',\\n    'ConvolverNode',\\n    'Event',\\n    'Blob'\\n  ]);\\n\\n  var YUIDOC_TO_TYPESCRIPT_PARAM_MAP = {\\n    Object: 'object',\\n    Any: 'any',\\n    Number: 'number',\\n    Integer: 'number',\\n    String: 'string',\\n    Constant: 'any',\\n    undefined: 'undefined',\\n    Null: 'null',\\n    Array: 'any[]',\\n    Boolean: 'boolean',\\n    '*': 'any',\\n    Void: 'void',\\n    P5: 'p5',\\n    // When the docs don't specify what kind of function we expect,\\n    // then we need to use the global type `Function`\\n    Function: 'Function',\\n    // Special ignore for hard to fix YUIDoc from p5.sound\\n    'Tone.Signal': 'any',\\n    SoundObject: 'any'\\n  };\\n\\n  function getClassitems(className) {\\n    return yuidocs.classitems.filter(function(classitem) {\\n      // Note that we first find items with the right class name,\\n      // but we also check for classitem.name because\\n      // YUIDoc includes classitems that we want to be undocumented\\n      // just because we used block comments.\\n      // We have other checks in place for finding missing method names\\n      // on public methods so a missing classitem.name implies that\\n      // the method is undocumented on purpose.\\n      // See https://github.com/processing/p5.js/issues/1252 and\\n      // https://github.com/processing/p5.js/pull/2301\\n      return classitem.class === className && classitem.name;\\n    });\\n  }\\n\\n  function isValidP5ClassName(className) {\\n    return (\\n      (P5_CLASS_RE.test(className) && className in yuidocs.classes) ||\\n      (P5_CLASS_RE.test('p5.' + className) &&\\n        'p5.' + className in yuidocs.classes)\\n    );\\n  }\\n\\n  /**\\n   * @param {string} type\\n   */\\n  function validateType(type) {\\n    return translateType(type);\\n  }\\n\\n  function validateMethod(classitem, overload) {\\n    var errors = [];\\n    var paramNames = {};\\n    var optionalParamFound = false;\\n\\n    if (!(JS_SYMBOL_RE.test(classitem.name) || classitem.is_constructor)) {\\n      errors.push('\\\"' + classitem.name + '\\\" is not a valid JS symbol name');\\n    }\\n\\n    (overload.params || []).forEach(function(param) {\\n      if (param.optional) {\\n        optionalParamFound = true;\\n      } else if (optionalParamFound) {\\n        errors.push(\\n          'required param \\\"' + param.name + '\\\" follows an ' + 'optional param'\\n        );\\n      }\\n\\n      if (param.name in paramNames) {\\n        errors.push('param \\\"' + param.name + '\\\" is defined multiple times');\\n      }\\n      paramNames[param.name] = true;\\n\\n      if (!JS_SYMBOL_RE.test(param.name)) {\\n        errors.push('param \\\"' + param.name + '\\\" is not a valid JS symbol name');\\n      }\\n\\n      if (!validateType(param.type)) {\\n        errors.push(\\n          'param \\\"' + param.name + '\\\" has invalid type: ' + param.type\\n        );\\n      }\\n\\n      if (param.type === 'Constant') {\\n        var constantRe = /either\\\\s+(?:[A-Z0-9_]+\\\\s*,?\\\\s*(?:or)?\\\\s*)+/g;\\n        var execResult = constantRe.exec(param.description);\\n        var match;\\n        if (execResult) {\\n          match = execResult[0];\\n        }\\n        if (classitem.name === 'endShape' && param.name === 'mode') {\\n          match = 'CLOSE';\\n        }\\n        if (match) {\\n          var values = [];\\n\\n          var reConst = /[A-Z0-9_]+/g;\\n          var matchConst;\\n          while ((matchConst = reConst.exec(match)) !== null) {\\n            values.push(matchConst);\\n          }\\n          var paramWords = param.name\\n            .split('.')\\n            .pop()\\n            .replace(/([A-Z])/g, ' $1')\\n            .trim()\\n            .toLowerCase()\\n            .split(' ');\\n          var propWords = classitem.name\\n            .split('.')\\n            .pop()\\n            .replace(/([A-Z])/g, ' $1')\\n            .trim()\\n            .toLowerCase()\\n            .split(' ');\\n\\n          var constName;\\n          if (paramWords.length > 1 || propWords[0] === 'create') {\\n            constName = paramWords.join('_');\\n          } else if (\\n            propWords[propWords.length - 1] ===\\n            paramWords[paramWords.length - 1]\\n          ) {\\n            constName = propWords.join('_');\\n          } else {\\n            constName = propWords[0] + '_' + paramWords[paramWords.length - 1];\\n          }\\n\\n          constName = constName.toUpperCase();\\n          constants[constName] = values;\\n\\n          param.type = constName;\\n        }\\n      }\\n    });\\n\\n    if (overload.return && !validateType(overload.return.type)) {\\n      errors.push('return has invalid type: ' + overload.return.type);\\n    }\\n\\n    return errors;\\n  }\\n\\n  /**\\n   *\\n   * @param {string} type\\n   * @param {string} [defaultType]\\n   */\\n  function translateType(type, defaultType) {\\n    if (type === void 0) {\\n      return defaultType;\\n    }\\n\\n    type = type.trim();\\n\\n    if (type === '') {\\n      return '';\\n    }\\n\\n    if (type.length > 2 && type.substring(type.length - 2) === '[]') {\\n      return translateType(type.substr(0, type.length - 2), defaultType) + '[]';\\n    }\\n\\n    var matchFunction = type.match(/Function\\\\(([^)]*)\\\\)/i);\\n    if (matchFunction) {\\n      var paramTypes = matchFunction[1].split(',');\\n      const mappedParamTypes = paramTypes.map((t, i) => {\\n        const paramName = 'p' + (i + 1);\\n        const paramType = translateType(t, 'any');\\n        return paramName + ': ' + paramType;\\n      });\\n      return '(' + mappedParamTypes.join(',') + ') => any';\\n    }\\n\\n    var parts = type.split('|');\\n    if (parts.length > 1) {\\n      return parts.map(t => translateType(t, defaultType)).join('|');\\n    }\\n\\n    const staticallyMappedType = YUIDOC_TO_TYPESCRIPT_PARAM_MAP[type];\\n    if (staticallyMappedType != null) {\\n      return staticallyMappedType;\\n    }\\n\\n    if (EXTERNAL_TYPES.has(type)) {\\n      return type;\\n    }\\n\\n    if (isValidP5ClassName(type)) {\\n      return type;\\n    }\\n\\n    if (constants[type]) {\\n      return type;\\n    }\\n\\n    missingTypes[type] = true;\\n    return defaultType;\\n  }\\n\\n  function translateParam(param) {\\n    var name = param.name;\\n    if (name === 'class') {\\n      name = 'theClass';\\n    }\\n\\n    return (\\n      name +\\n      (param.optional ? '?' : '') +\\n      ': ' +\\n      translateType(param.type, 'any')\\n    );\\n  }\\n\\n  function generateClassMethod(className, classitem) {\\n    if (classitem.overloads) {\\n      classitem.overloads.forEach(function(overload) {\\n        generateClassMethodWithParams(className, classitem, overload);\\n      });\\n    } else {\\n      generateClassMethodWithParams(className, classitem, classitem);\\n    }\\n  }\\n\\n  function generateClassMethodWithParams(className, classitem, overload) {\\n    var errors = validateMethod(classitem, overload);\\n    var params = (overload.params || []).map(translateParam);\\n    var returnType = overload.chainable\\n      ? className\\n      : overload.return ? translateType(overload.return.type, 'any') : 'void';\\n    var decl;\\n\\n    if (classitem.is_constructor) {\\n      decl = 'constructor(' + params.join(', ') + ')';\\n    } else {\\n      decl =\\n        (overload.static ? 'static ' : '') +\\n        classitem.name +\\n        '(' +\\n        params.join(', ') +\\n        '): ' +\\n        returnType;\\n    }\\n\\n    if (emit.getIndentLevel() === 0) {\\n      decl = 'declare function ' + decl + ';';\\n    }\\n\\n    if (errors.length) {\\n      emit.sectionBreak();\\n      emit(\\n        '// TODO: Fix ' +\\n          classitem.name +\\n          '() errors in ' +\\n          overloadPosition(classitem, overload) +\\n          ':'\\n      );\\n      emit('//');\\n      errors.forEach(function(error) {\\n        console.log(\\n          classitem.name +\\n            '() ' +\\n            overloadPosition(classitem, overload) +\\n            ', ' +\\n            error\\n        );\\n        emit('//   ' + error);\\n      });\\n      emit('//');\\n      emit('// ' + decl);\\n      emit('');\\n    } else {\\n      emit.description(classitem, overload);\\n      emit(decl);\\n    }\\n  }\\n\\n  function generateClassConstructor(className) {\\n    var classitem = yuidocs.classes[className];\\n    if (classitem.is_constructor) {\\n      generateClassMethod(className, classitem);\\n    }\\n  }\\n\\n  function generateClassProperty(className, classitem) {\\n    if (JS_SYMBOL_RE.test(classitem.name)) {\\n      // TODO: It seems our properties don't carry any type information,\\n      // which is unfortunate. YUIDocs supports the @type tag on properties,\\n      // and even encourages using it, but we don't seem to use it.\\n      var translatedType = translateType(classitem.type, 'any');\\n      var defaultValue = classitem.default;\\n      if (classitem.final && translatedType === 'string' && !defaultValue) {\\n        defaultValue = classitem.name.toLowerCase().replace(/_/g, '-');\\n      }\\n\\n      var decl;\\n      if (defaultValue) {\\n        decl = classitem.name + ': ';\\n        if (translatedType === 'string') {\\n          decl += \\\"'\\\" + defaultValue.replace(/'/g, \\\"\\\\\\\\'\\\") + \\\"'\\\";\\n        } else {\\n          decl += defaultValue;\\n        }\\n      } else {\\n        decl = classitem.name + ': ' + translatedType;\\n      }\\n\\n      emit.description(classitem);\\n\\n      if (emit.getIndentLevel() === 0) {\\n        const declarationType = classitem.final ? 'const ' : 'var ';\\n        emit('declare ' + declarationType + decl + ';');\\n      } else {\\n        const modifier = classitem.final ? 'readonly ' : '';\\n        emit(modifier + decl);\\n      }\\n    } else {\\n      emit.sectionBreak();\\n      emit(\\n        '// TODO: Property \\\"' +\\n          classitem.name +\\n          '\\\", defined in ' +\\n          classitemPosition(classitem) +\\n          ', is not a valid JS symbol name'\\n      );\\n      emit.sectionBreak();\\n    }\\n  }\\n\\n  function generateClassProperties(className) {\\n    getClassitems(className).forEach(function(classitem) {\\n      classitem.file = classitem.file.replace(/\\\\\\\\/g, '/');\\n      emit.setCurrentSourceFile(classitem.file);\\n      if (classitem.itemtype === 'method') {\\n        generateClassMethod(className, classitem);\\n      } else if (classitem.itemtype === 'property') {\\n        generateClassProperty(className, classitem);\\n      } else {\\n        emit(\\n          '// TODO: Annotate ' +\\n            classitem.itemtype +\\n            ' \\\"' +\\n            classitem.name +\\n            '\\\", defined in ' +\\n            classitemPosition(classitem)\\n        );\\n      }\\n    });\\n  }\\n\\n  function generateP5Properties(className) {\\n    emit.sectionBreak();\\n    emit('// Properties from ' + className);\\n    emit.sectionBreak();\\n\\n    generateClassConstructor(className);\\n    generateClassProperties(className);\\n  }\\n\\n  function generateP5Subclass(className) {\\n    var info = yuidocs.classes[className];\\n    var nestedClassName = className.match(P5_CLASS_RE)[1];\\n\\n    info.file = info.file.replace(/\\\\\\\\/g, '/');\\n    emit.setCurrentSourceFile(info.file);\\n\\n    emit(\\n      'class ' +\\n        nestedClassName +\\n        (info.extends ? ' extends ' + info.extends : '') +\\n        ' {'\\n    );\\n    emit.indent();\\n\\n    generateClassConstructor(className);\\n    generateClassProperties(className);\\n\\n    emit.dedent();\\n    emit('}');\\n  }\\n\\n  function emitConstants() {\\n    emit('// Constants ');\\n    Object.keys(constants).forEach(function(key) {\\n      var values = constants[key];\\n\\n      emit('type ' + key + ' =');\\n      values.forEach(function(v, i) {\\n        var str = ' typeof ' + v;\\n        str = (i ? '|' : ' ') + str;\\n        if (i === values.length - 1) {\\n          str += ';';\\n        }\\n        emit('    ' + str);\\n      });\\n\\n      emit('');\\n    });\\n  }\\n\\n  function generate() {\\n    var p5Aliases = [];\\n    var p5Subclasses = [];\\n\\n    Object.keys(yuidocs.classes).forEach(function(className) {\\n      if (P5_ALIASES.indexOf(className) !== -1) {\\n        p5Aliases.push(className);\\n      } else if (P5_CLASS_RE.test(className)) {\\n        p5Subclasses.push(className);\\n      } else {\\n        throw new Error(\\n          className +\\n            ' is documented as a class but ' +\\n            \\\"I'm not sure how to generate a type definition for it\\\"\\n        );\\n      }\\n    });\\n\\n    emit = createEmitter(localFileame);\\n\\n    emit('declare class p5 {');\\n    emit.indent();\\n\\n    p5Aliases.forEach(generateP5Properties);\\n\\n    emit.dedent();\\n    emit('}\\\\n');\\n\\n    emit('declare namespace p5 {');\\n    emit.indent();\\n\\n    p5Subclasses.forEach(generateP5Subclass);\\n\\n    emit.dedent();\\n    emit('}\\\\n');\\n\\n    emit.close();\\n\\n    emit = createEmitter(globalFilename);\\n\\n    emit('///<reference path=\\\"p5.d.ts\\\" />\\\\n');\\n\\n    p5Aliases.forEach(generateP5Properties);\\n\\n    emitConstants();\\n\\n    emit.close();\\n\\n    for (var t in missingTypes) {\\n      console.log('MISSING: ', t);\\n    }\\n  }\\n\\n  generate();\\n}\\n\\nmodule.exports = mod;\\n\\n[end of generate-typescript-annotations.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "p5.dom.js",
        "material.js",
        "spec.js",
        "files.js",
        "generate-typescript-annotations.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "1aef7d38-a636-4901-b104-53d503df5e7e",
        "score": 0.01639344262295082,
        "payload": {
          "text": "/*! p5.dom.js v0.3.4 Aug 11, 2017 */\n/**\n * <p>The web is much more than just canvas and p5.dom makes it easy to interact\n * with other HTML5 objects, including text, hyperlink, image, input, video,\n * audio, and webcam.</p>\n * <p>There is a set of creation methods, DOM manipulation methods, and\n * an extended p5.Element that supports a range of HTML elements. See the\n * <a href='https://github.com/processing/p5.js/wiki/Beyond-the-canvas'>\n * beyond the canvas tutorial</a> for a full overview of how this addon works.\n *\n * <p>Methods and properties shown in black are part of the p5.js core, items in\n * blue are part of the p5.dom library. You will need to include an extra file\n * in order to access the blue functions. See the\n * <a href='http://p5js.org/libraries/#using-a-library'>using a library</a>\n * section for information on how to include this library. p5.dom comes with\n * <a href='http://p5js.org/download'>p5 complete</a> or you can download the single file\n * <a href='https://raw.githubusercontent.com/lmccart/p5.js/master/lib/addons/p5.dom.js'>\n * here</a>.</p>\n * <p>See <a href='https://github.com/processing/p5.js/wiki/Beyond-the-canvas'>tutorial: beyond the canvas</a>\n * for more info on how to use this libary.</a>\n *\n * @module p5.dom\n * @submodule p5.dom\n * @for p5.dom\n * @main\n */\n\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd)\n    define('p5.dom', ['p5'], function(p5) {\n      factory(p5);\n    });\n  else if (typeof exports === 'object') factory(require('../p5'));\n  else factory(root['p5']);\n})(this, function(p5) {\n  // =============================================================================\n  //                         p5 additions\n  // =============================================================================\n\n  /**\n   * Searches the page for an element with the given ID, class, or tag name (using the '#' or '.'\n   * prefixes to specify an ID or class respectively, and none for a tag) and returns it as\n   * a p5.Element. If a class or tag name is given with more than 1 element,\n   * only the first element will be returned.\n   * The DOM node itself can be accessed with .elt.\n   * Returns null if none found. You can also specify a container to search within.\n   *\n   * @method select\n   * @param  {String} name id, class, or tag name of element to search for\n   * @param  {String} [container] id, p5.Element, or HTML element to search within\n   * @return {Object|p5.Element|Null} p5.Element containing node found\n   * @example\n   * <div ><code class='norender'>\n   * function setup() {\n   *   createCanvas(100, 100);\n   *   //translates canvas 50px down\n   *   select('canvas').position(100, 100);\n   * }\n   * </code></div>\n   * <div ><code class='norender'>\n   * // these are all valid calls to select()\n   * var a = select('#moo');\n   * var b = select('#blah', '#myContainer');\n   * var c = select('#foo', b);\n   * var d = document.getElementById('beep');\n   * var e = select('p', d);\n   * [a, b, c, d, e]; // unused\n   * </code></div>\n   *\n   */\n  p5.prototype.select = function(e, p) {\n    p5._validateParameters('select', arguments);\n    var res = null;\n    var container = getContainer(p);\n    if (e[0] === '.') {\n      e = e.slice(1);\n      res = container.getElementsByClassName(e);\n      if (res.length) {\n        res = res[0];\n      } else {\n        res = null;\n      }\n    } else if (e[0] === '#') {\n      e = e.slice(1);\n      res = container.getElementById(e);\n    } else {\n      res = container.getElementsByTagName(e);\n      if (res.length) {\n        res = res[0];\n      } else {\n        res = null;\n      }\n    }\n    if (res) {\n      return this._wrapElement(res);\n    } else {\n      return null;\n    }\n  };\n\n  /**\n   * Searches the page for elements with the given class or tag name (using the '.' prefix\n   * to specify a class and no prefix for a tag) and returns them as p5.Elements\n   * in an array.\n   * The DOM node itself can be accessed with .elt.\n   * Returns an empty array if none found.\n   * You can also specify a container to search within.\n   *\n   * @method selectAll\n   * @param  {String} name class or tag name of elements to search for\n   * @param  {String} [container] id, p5.Element, or HTML element to search within\n   * @return {Array} Array of p5.Elements containing nodes found\n   * @example\n   * <div class='norender'><code>\n   * function setup() {\n   *   createButton('btn');\n   *   createButton('2nd btn');\n   *   createButton('3rd btn');\n   *   var buttons = selectAll('button');\n   *\n   *   for (var i = 0; i < buttons.length; i++) {\n   *     buttons[i].size(100, 100);\n   *   }\n   * }\n   * </code></div>\n   * <div class='norender'><code>\n   * // these are all valid calls to selectAll()\n   * var a = selectAll('.moo');\n   * a = selectAll('div');\n   * a = selectAll('button', '#myContainer');\n   *\n   * var d = select('#container');\n   * a = selectAll('p', d);\n   *\n   * var f = document.getElementById('beep');\n   * a = select('.blah', f);\n   *\n   * a; // unused\n   * </code></div>\n   *\n   */\n  p5.prototype.selectAll = function(e, p) {\n    p5._validateParameters('selectAll', arguments);\n    var arr = [];\n    var res;\n    var container = getContainer(p);\n    if (e[0] === '.') {\n      e = e.slice(1);\n      res = container.getElementsByClassName(e);\n    } else {\n      res = container.getElementsByTagName(e);\n    }\n    if (res) {\n      for (var j = 0; j < res.length; j++) {\n        var obj = this._wrapElement(res[j]);\n        arr.push(obj);\n      }\n    }\n    return arr;\n  };\n\n  /**\n   * Helper function for select and selectAll\n   */\n  function getContainer(p) {\n    var container = document;\n    if (typeof p === 'string' && p[0] === '#') {\n      p = p.slice(1);\n      container = document.getElementById(p) || document;\n    } else if (p instanceof p5.Element) {\n      container = p.elt;\n    } else if (p instanceof HTMLElement) {\n      container = p;\n    }\n    return container;\n  }\n\n  /**\n   * Helper function for getElement and getElements.\n   */\n  p5.prototype._wrapElement = function(elt) {\n    var children = Array.prototype.slice.call(elt.children);\n    if (elt.tagName === 'INPUT' && elt.type === 'checkbox') {\n      var converted = new p5.Element(elt);\n      converted.checked = function() {\n        if (arguments.length === 0) {\n          return this.elt.checked;\n        } else if (arguments[0]) {\n          this.elt.checked = true;\n        } else {\n          this.elt.checked = false;\n        }\n        return this;\n      };\n      return converted;\n    } else if (elt.tagName === 'VIDEO' || elt.tagName === 'AUDIO') {\n      return new p5.MediaElement(elt);\n    } else if (elt.tagName === 'SELECT') {\n      return this.createSelect(new p5.Element(elt));\n    } else if (\n      children.length > 0 &&\n      children.every(function(c) {\n        return c.tagName === 'INPUT' || c.tagName === 'LABEL';\n      })\n    ) {\n      return this.createRadio(new p5.Element(elt));\n    } else {\n      return new p5.Element(elt);\n    }\n  };\n\n  /**\n   * Removes all elements created by p5, except any canvas / graphics\n   * elements created by createCanvas or createGraphics.\n   * Event handlers are removed, and element is removed from the DOM.\n   * @method removeElements\n   * @example\n   * <div class='norender'><code>\n   * function setup() {\n   *   createCanvas(100, 100);\n   *   createDiv('this is some text');\n   *   createP('this is a paragraph');\n   * }\n   * function mousePressed() {\n   *   removeElements(); // this will remove the div and p, not canvas\n   * }\n   * </code></div>\n   *\n   */\n  p5.prototype.removeElements = function(e) {\n    p5._validateParameters('removeElements', arguments);\n    for (var i = 0; i < this._elements.length; i++) {\n      if (!(this._elements[i].elt instanceof HTMLCanvasElement)) {\n        this._elements[i].remove();\n      }\n    }\n  };\n\n  /**\n   * Helpers for create methods.\n   */\n  function addElement(elt, pInst, media) {\n    var node = pInst._userNode ? pInst._userNode : document.body;\n    node.appendChild(elt);\n    var c = media ? new p5.MediaElement(elt) : new p5.Element(elt);\n    pInst._elements.push(c);\n    return c;\n  }\n\n  /**\n   * Creates a &lt;div&gt;&lt;/div&gt; element in the DOM with given inner HTML.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createDiv\n   * @param  {String} [html] inner HTML for element created\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class='norender'><code>\n   * createDiv('this is some text');\n   * </code></div>\n   */\n\n  /**\n   * Creates a &lt;p&gt;&lt;/p&gt; element in the DOM with given inner HTML. Used\n   * for paragraph length text.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createP\n   * @param  {String} [html] inner HTML for element created\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class='norender'><code>\n   * createP('this is some text');\n   * </code></div>\n   */\n\n  /**\n   * Creates a &lt;span&gt;&lt;/span&gt; element in the DOM with given inner HTML.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createSpan\n   * @param  {String} [html] inner HTML for element created\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class='norender'><code>\n   * createSpan('this is some text');\n   * </code></div>\n   */\n  var tags = ['div', 'p', 'span'];\n  tags.forEach(function(tag) {\n    var method = 'create' + tag.charAt(0).toUpperCase() + tag.slice(1);\n    p5.prototype[method] = function(html) {\n      var elt = document.createElement(tag);\n      elt.innerHTML = typeof html === undefined ? '' : html;\n      return addElement(elt, this);\n    };\n  });\n\n  /**\n   * Creates an &lt;img&gt; element in the DOM with given src and\n   * alternate text.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createImg\n   * @param  {String} src src path or url for image\n   * @param  {String} [alt] alternate text to be used if image does not load\n   * @param  {Function} [successCallback] callback to be called once image data is loaded\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class='norender'><code>\n   * createImg('http://p5js.org/img/asterisk-01.png');\n   * </code></div>\n   */\n  p5.prototype.createImg = function() {\n    p5._validateParameters('createImg', arguments);\n    var elt = document.createElement('img');\n    var args = arguments;\n    var self;\n    var setAttrs = function() {\n      self.width = elt.offsetWidth || elt.width;\n      self.height = elt.offsetHeight || elt.height;\n      if (args.length > 1 && typeof args[1] === 'function') {\n        self.fn = args[1];\n        self.fn();\n      } else if (args.length > 1 && typeof args[2] === 'function') {\n        self.fn = args[2];\n        self.fn();\n      }\n    };\n    elt.src = args[0];\n    if (args.length > 1 && typeof args[1] === 'string') {\n      elt.alt = args[1];\n    }\n    elt.onload = function() {\n      setAttrs();\n    };\n    self = addElement(elt, this);\n    return self;\n  };\n\n  /**\n   * Creates an &lt;a&gt;&lt;/a&gt; element in the DOM for including a hyperlink.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createA\n   * @param  {String} href       url of page to link to\n   * @param  {String} html       inner html of link element to display\n   * @param  {String} [target]   target where new link should open,\n   *                             could be _blank, _self, _parent, _top.\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class='norender'><code>\n   * createA('http://p5js.org/', 'this is a link');\n   * </code></div>\n   */\n  p5.prototype.createA = function(href, html, target) {\n    p5._validateParameters('createA', arguments);\n    var elt = document.createElement('a');\n    elt.href = href;\n    elt.innerHTML = html;\n    if (target) elt.target = target;\n    return addElement(elt, this);\n  };\n\n  /** INPUT **/\n\n  /**\n   * Creates a slider &lt;input&gt;&lt;/input&gt; element in the DOM.\n   * Use .size() to set the display length of the slider.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createSlider\n   * @param  {Number} min minimum value of the slider\n   * @param  {Number} max maximum value of the slider\n   * @param  {Number} [value] default value of the slider\n   * @param  {Number} [step] step size for each tick of the slider (if step is set to 0, the slider will move continuously from the minimum to the maximum value)\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div><code>\n   * var slider;\n   * function setup() {\n   *   slider = createSlider(0, 255, 100);\n   *   slider.position(10, 10);\n   *   slider.style('width', '80px');\n   * }\n   *\n   * function draw() {\n   *   var val = slider.value();\n   *   background(val);\n   * }\n   * </code></div>\n   *\n   * <div><code>\n   * var slider;\n   * function setup() {\n   *   colorMode(HSB);\n   *   slider = createSlider(0, 360, 60, 40);\n   *   slider.position(10, 10);\n   *   slider.style('width', '80px');\n   * }\n   *\n   * function draw() {\n   *   var val = slider.value();\n   *   background(val, 100, 100, 1);\n   * }\n   * </code></div>\n   */\n  p5.prototype.createSlider = function(min, max, value, step) {\n    p5._validateParameters('createSlider', arguments);\n    var elt = document.createElement('input');\n    elt.type = 'range';\n    elt.min = min;\n    elt.max = max;\n    if (step === 0) {\n      elt.step = 0.000000000000000001; // smallest valid step\n    } else if (step) {\n      elt.step = step;\n    }\n    if (typeof value === 'number') elt.value = value;\n    return addElement(elt, this);\n  };\n\n  /**\n   * Creates a &lt;button&gt;&lt;/button&gt; element in the DOM.\n   * Use .size() to set the display size of the button.\n   * Use .mousePressed() to specify behavior on press.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createButton\n   * @param  {String} label label displayed on the button\n   * @param  {String} [value] value of the button\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class='norender'><code>\n   * var button;\n   * function setup() {\n   *   createCanvas(100, 100);\n   *   background(0);\n   *   button = createButton('click me');\n   *   button.position(19, 19);\n   *   button.mousePressed(changeBG);\n   * }\n   *\n   * function changeBG() {\n   *   var val = random(255);\n   *   background(val);\n   * }\n   * </code></div>\n   */\n  p5.prototype.createButton = function(label, value) {\n    p5._validateParameters('createButton', arguments);\n    var elt = document.createElement('button');\n    elt.innerHTML = label;\n    if (value) elt.value = value;\n    return addElement(elt, this);\n  };\n\n  /**\n   * Creates a checkbox &lt;input&gt;&lt;/input&gt; element in the DOM.\n   * Calling .checked() on a checkbox returns if it is checked or not\n   *\n   * @method createCheckbox\n   * @param  {String} [label] label displayed after checkbox\n   * @param  {boolean} [value] value of the checkbox; checked is true, unchecked is false\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class='norender'><code>\n   * var checkbox;\n   *\n   * function setup() {\n   *   checkbox = createCheckbox('label', false);\n   *   checkbox.changed(myCheckedEvent);\n   * }\n   *\n   * function myCheckedEvent() {\n   *   if (this.checked()) {\n   *     console.log('Checking!');\n   *   } else {\n   *     console.log('Unchecking!');\n   *   }\n   * }\n   * </code></div>\n   */\n  p5.prototype.createCheckbox = function() {\n    p5._validateParameters('createCheckbox', arguments);\n    var elt = document.createElement('div');\n    var checkbox = document.createElement('input');\n    checkbox.type = 'checkbox';\n    elt.appendChild(checkbox);\n    //checkbox must be wrapped in p5.Element before label so that label appears after\n    var self = addElement(elt, this);\n    self.checked = function() {\n      var cb = self.elt.getElementsByTagName('input')[0];\n      if (cb) {\n        if (arguments.length === 0) {\n          return cb.checked;\n        } else if (arguments[0]) {\n          cb.checked = true;\n        } else {\n          cb.checked = false;\n        }\n      }\n      return self;\n    };\n    this.value = function(val) {\n      self.value = val;\n      return this;\n    };\n    if (arguments[0]) {\n      var ran = Math.random()\n        .toString(36)\n        .slice(2);\n      var label = document.createElement('label');\n      checkbox.setAttribute('id', ran);\n      label.htmlFor = ran;\n      self.value(arguments[0]);\n      label.appendChild(document.createTextNode(arguments[0]));\n      elt.appendChild(label);\n    }\n    if (arguments[1]) {\n      checkbox.checked = true;\n    }\n    return self;\n  };\n\n  /**\n   * Creates a dropdown menu &lt;select&gt;&lt;/select&gt; element in the DOM.\n   * It also helps to assign select-box methods to p5.Element when selecting existing select box\n   * @method createSelect\n   * @param {boolean} [multiple] true if dropdown should support multiple selections\n   * @return {p5.Element}\n   * @example\n   * <div><code>\n   * var sel;\n   *\n   * function setup() {\n   *   textAlign(CENTER);\n   *   background(200);\n   *   sel = createSelect();\n   *   sel.position(10, 10);\n   *   sel.option('pear');\n   *   sel.option('kiwi');\n   *   sel.option('grape');\n   *   sel.changed(mySelectEvent);\n   * }\n   *\n   * function mySelectEvent() {\n   *   var item = sel.value();\n   *   background(200);\n   *   text('it is a' + item + '!', 50, 50);\n   * }\n   * </code></div>\n   */\n  /**\n   * @method createSelect\n   * @param {Object} existing DOM select element\n   * @return {p5.Element}\n   */\n\n  p5.prototype.createSelect = function() {\n    p5._validateParameters('createSelect', arguments);\n    var elt, self;\n    var arg = arguments[0];\n    if (typeof arg === 'object' && arg.elt.nodeName === 'SELECT') {\n      self = arg;\n      elt = this.elt = arg.elt;\n    } else {\n      elt = document.createElement('select');\n      if (arg && typeof arg === 'boolean') {\n        elt.setAttribute('multiple', 'true');\n      }\n      self = addElement(elt, this);\n    }\n    self.option = function(name, value) {\n      var index;\n      //see if there is already an option with this name\n      for (var i = 0; i < this.elt.length; i++) {\n        if (this.elt[i].innerHTML === name) {\n          index = i;\n          break;\n        }\n      }\n      //if there is an option with this name we will modify it\n      if (index !== undefined) {\n        //if the user passed in false then delete that option\n        if (value === false) {\n          this.elt.remove(index);\n        } else {\n          //otherwise if the name and value are the same then change both\n          if (this.elt[index].innerHTML === this.elt[index].value) {\n            this.elt[index].innerHTML = this.elt[index].value = value;\n            //otherwise just change the value\n          } else {\n            this.elt[index].value = value;\n          }\n        }\n      } else {\n        //if it doesn't exist make it\n        var opt = document.createElement('option');\n        opt.innerHTML = name;\n        if (arguments.length > 1) opt.value = value;\n        else opt.value = name;\n        elt.appendChild(opt);\n      }\n    };\n    self.selected = function(value) {\n      var arr = [],\n        i;\n      if (arguments.length > 0) {\n        for (i = 0; i < this.elt.length; i++) {\n          if (value.toString() === this.elt[i].value) {\n            this.elt.selectedIndex = i;\n          }\n        }\n        return this;\n      } else {\n        if (this.elt.getAttribute('multiple')) {\n          for (i = 0; i < this.elt.selectedOptions.length; i++) {\n            arr.push(this.elt.selectedOptions[i].value);\n          }\n          return arr;\n        } else {\n          return this.elt.value;\n        }\n      }\n    };\n    return self;\n  };\n\n  /**\n   * Creates a radio button &lt;input&gt;&lt;/input&gt; element in the DOM.\n   * The .option() method can be used to set options for the radio after it is\n   * created. The .value() method will return the currently selected option.\n   *\n   * @method createRadio\n   * @param  {String} [divId] the id and name of the created div and input field respectively\n   * @return {Object|p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div><code>\n   * var radio;\n   *\n   * function setup() {\n   *   radio = createRadio();\n   *   radio.option('black');\n   *   radio.option('white');\n   *   radio.option('gray');\n   *   radio.style('width', '60px');\n   *   textAlign(CENTER);\n   *   fill(255, 0, 0);\n   * }\n   *\n   * function draw() {\n   *   var val = radio.value();\n   *   background(val);\n   *   text(val, width / 2, height / 2);\n   * }\n   * </code></div>\n   * <div><code>\n   * var radio;\n   *\n   * function setup() {\n   *   radio = createRadio();\n   *   radio.option('apple', 1);\n   *   radio.option('bread', 2);\n   *   radio.option('juice', 3);\n   *   radio.style('width', '60px');\n   *   textAlign(CENTER);\n   * }\n   *\n   * function draw() {\n   *   background(200);\n   *   var val = radio.value();\n   *   if (val) {\n   *     text('item cost is $' + val, width / 2, height / 2);\n   *   }\n   * }\n   * </code></div>\n   */\n  p5.prototype.createRadio = function(existing_radios) {\n    p5._validateParameters('createRadio', arguments);\n    // do some prep by counting number of radios on page\n    var radios = document.querySelectorAll('input[type=radio]');\n    var count = 0;\n    if (radios.length > 1) {\n      var length = radios.length;\n      var prev = radios[0].name;\n      var current = radios[1].name;\n      count = 1;\n      for (var i = 1; i < length; i++) {\n        current = radios[i].name;\n        if (prev !== current) {\n          count++;\n        }\n        prev = current;\n      }\n    } else if (radios.length === 1) {\n      count = 1;\n    }\n    // see if we got an existing set of radios from callee\n    var elt, self;\n    if (typeof existing_radios === 'object') {\n      // use existing elements\n      self = existing_radios;\n      elt = this.elt = existing_radios.elt;\n    } else {\n      // create a set of radio buttons\n      elt = document.createElement('div');\n      self = addElement(elt, this);\n    }\n    // setup member functions\n    self._getInputChildrenArray = function() {\n      return Array.prototype.slice.call(this.elt.children).filter(function(c) {\n        return c.tagName === 'INPUT';\n      });\n    };\n\n    var times = -1;\n    self.option = function(name, value) {\n      var opt = document.createElement('input');\n      opt.type = 'radio';\n      opt.innerHTML = name;\n      if (value) opt.value = value;\n      else opt.value = name;\n      opt.setAttribute('name', 'defaultradio' + count);\n      elt.appendChild(opt);\n      if (name) {\n        times++;\n        var label = document.createElement('label');\n        opt.setAttribute('id', 'defaultradio' + count + '-' + times);\n        label.htmlFor = 'defaultradio' + count + '-' + times;\n        label.appendChild(document.createTextNode(name));\n        elt.appendChild(label);\n      }\n      return opt;\n    };\n    self.selected = function(value) {\n      var i;\n      var inputChildren = self._getInputChildrenArray();\n      if (value) {\n        for (i = 0; i < inputChildren.length; i++) {\n          if (inputChildren[i].value === value) inputChildren[i].checked = true;\n        }\n        return this;\n      } else {\n        for (i = 0; i < inputChildren.length; i++) {\n          if (inputChildren[i].checked === true) return inputChildren[i].value;\n        }\n      }\n    };\n    self.value = function(value) {\n      var i;\n      var inputChildren = self._getInputChildrenArray();\n      if (value) {\n        for (i = 0; i < inputChildren.length; i++) {",
          "filepath": "data/repos/processing/p5.js-0.6/lib/addons/p5.dom.js",
          "repo": "processing/p5.js",
          "version": "0.6",
          "chunk_index": 0
        }
      },
      {
        "id": "d397c1be-b079-445f-a511-b33d8c82caeb",
        "score": 0.016129032258064516,
        "payload": {
          "text": "/**\n * @module Lights, Camera\n * @submodule Material\n * @for p5\n * @requires core\n */\n\n'use strict';\n\nvar p5 = require('../core/core');\nvar constants = require('../core/constants');\nrequire('./p5.Texture');\n\n/**\n * Loads a custom shader from the provided vertex and fragment\n * shader paths. The shader files are loaded asynchronously in the\n * background, so this method should be used in preload().\n *\n * For now, there are three main types of shaders. p5 will automatically\n * supply appropriate vertices, normals, colors, and lighting attributes\n * if the parameters defined in the shader match the names.\n *\n * @method loadShader\n * @param {String} [vertFilename] path to file containing vertex shader\n * source code\n * @param {String} [fragFilename] path to file containing fragment shader\n * source code\n * @return {p5.Shader} a shader object created from the provided\n * vertex and fragment shader files.\n */\np5.prototype.loadShader = function(vertFilename, fragFilename) {\n  var loadedShader = new p5.Shader();\n\n  var self = this;\n  var loadedFrag = false;\n  var loadedVert = false;\n\n  this.loadStrings(fragFilename, function(result) {\n    loadedShader._fragSrc = result.join('\\n');\n    loadedFrag = true;\n    if (!loadedVert) {\n      self._incrementPreload();\n    }\n  });\n  this.loadStrings(vertFilename, function(result) {\n    loadedShader._vertSrc = result.join('\\n');\n    loadedVert = true;\n    if (!loadedFrag) {\n      self._incrementPreload();\n    }\n  });\n\n  return loadedShader;\n};\n\n/**\n * @method createShader\n * @param {String} vertSrc source code for the vertex shader\n * @param {String} fragSrc source code for the fragment shader\n * @returns {p5.Shader} a shader object created from the provided\n * vertex and fragment shaders.\n *\n * @example\n * <div modernizr='webgl'>\n * <code>\n * // the 'varying's are shared between both vertex & fragment shaders\n * var varying = 'precision highp float; varying vec2 vPos;';\n *\n * // the vertex shader is called for each vertex\n * var vs =\n *   varying +\n *   'attribute vec3 aPosition;' +\n *   'void main() { vPos = (gl_Position = vec4(aPosition,1.0)).xy; }';\n *\n * // the fragment shader is called for each pixel\n * var fs =\n *   varying +\n *   'uniform vec2 p;' +\n *   'uniform float r;' +\n *   'const int I = 500;' +\n *   'void main() {' +\n *   '  vec2 c = p + vPos * r, z = c;' +\n *   '  float n = 0.0;' +\n *   '  for (int i = I; i > 0; i --) {' +\n *   '    if(z.x*z.x+z.y*z.y > 4.0) {' +\n *   '      n = float(i)/float(I);' +\n *   '      break;' +\n *   '    }' +\n *   '    z = vec2(z.x*z.x-z.y*z.y, 2.0*z.x*z.y) + c;' +\n *   '  }' +\n *   '  gl_FragColor = vec4(0.5-cos(n*17.0)/2.0,0.5-cos(n*13.0)/2.0,0.5-cos(n*23.0)/2.0,1.0);' +\n *   '}';\n *\n * var mandel;\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n *\n *   // create and initialize the shader\n *   mandel = createShader(vs, fs);\n *   shader(mandel);\n *   noStroke();\n *\n *   // 'p' is the center point of the Mandelbrot image\n *   mandel.setUniform('p', [-0.74364388703, 0.13182590421]);\n * }\n *\n * function draw() {\n *   // 'r' is the size of the image in Mandelbrot-space\n *   mandel.setUniform('r', 1.5 * exp(-6.5 * (1 + sin(millis() / 2000))));\n *   quad(-1, -1, 1, -1, 1, 1, -1, 1);\n * }\n * </code>\n * </div>\n *\n * @alt\n * zooming Mandelbrot set. a colorful, infinitely detailed fractal.\n */\np5.prototype.createShader = function(vertSrc, fragSrc) {\n  return new p5.Shader(this._renderer, vertSrc, fragSrc);\n};\n\n/**\n * The shader() function lets the user provide a custom shader\n * to fill in shapes in WEBGL mode. Users can create their\n * own shaders by loading vertex and fragment shaders with\n * loadShader().\n *\n * @method shader\n * @chainable\n * @param {p5.Shader} [s] the desired p5.Shader to use for rendering\n * shapes.\n */\np5.prototype.shader = function(s) {\n  if (s._renderer === undefined) {\n    s._renderer = this._renderer;\n  }\n  if (s.isStrokeShader()) {\n    this._renderer.setStrokeShader(s);\n  } else {\n    this._renderer.setFillShader(s);\n  }\n  return this;\n};\n\n/**\n * Normal material for geometry. You can view all\n * possible materials in this\n * <a href=\"https://p5js.org/examples/3d-materials.html\">example</a>.\n * @method normalMaterial\n * @chainable\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n *\n * function draw() {\n *   background(200);\n *   normalMaterial();\n *   sphere(50);\n * }\n * </code>\n * </div>\n *\n * @alt\n * Red, green and blue gradient.\n *\n */\np5.prototype.normalMaterial = function() {\n  this._renderer.drawMode = constants.FILL;\n  this._renderer.setFillShader(this._renderer._getNormalShader());\n  this._renderer.curFillColor = [1, 1, 1, 1];\n  this.noStroke();\n  return this;\n};\n\n/**\n * Texture for geometry.  You can view other possible materials in this\n * <a href=\"https://p5js.org/examples/3d-materials.html\">example</a>.\n * @method texture\n * @param {p5.Image|p5.MediaElement|p5.Graphics} tex 2-dimensional graphics\n *                    to render as texture\n * @chainable\n * @example\n * <div>\n * <code>\n * var img;\n * function preload() {\n *   img = loadImage('assets/laDefense.jpg');\n * }\n *\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n *\n * function draw() {\n *   background(0);\n *   rotateZ(frameCount * 0.01);\n *   rotateX(frameCount * 0.01);\n *   rotateY(frameCount * 0.01);\n *   //pass image as texture\n *   texture(img);\n *   box(200, 200, 200);\n * }\n * </code>\n * </div>\n *\n * <div>\n * <code>\n * var pg;\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n *   pg = createGraphics(200, 200);\n *   pg.textSize(100);\n * }\n *\n * function draw() {\n *   background(0);\n *   pg.background(255);\n *   pg.text('hello!', 0, 100);\n *   //pass image as texture\n *   texture(pg);\n *   plane(200);\n * }\n * </code>\n * </div>\n *\n * <div>\n * <code>\n * var vid;\n * function preload() {\n *   vid = createVideo('assets/fingers.mov');\n *   vid.hide();\n *   vid.loop();\n * }\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n *\n * function draw() {\n *   background(0);\n *   //pass video frame as texture\n *   texture(vid);\n *   plane(200);\n * }\n * </code>\n * </div>\n *\n * @alt\n * Rotating view of many images umbrella and grid roof on a 3d plane\n * black canvas\n * black canvas\n *\n */\np5.prototype.texture = function(tex) {\n  this._renderer.GL.depthMask(true);\n  this._renderer.GL.enable(this._renderer.GL.BLEND);\n  this._renderer.GL.blendFunc(\n    this._renderer.GL.SRC_ALPHA,\n    this._renderer.GL.ONE_MINUS_SRC_ALPHA\n  );\n\n  this._renderer.drawMode = constants.TEXTURE;\n  var shader = this._renderer._useLightShader();\n  shader.setUniform('uSpecular', false);\n  shader.setUniform('isTexture', true);\n  shader.setUniform('uSampler', tex);\n  this.noStroke();\n  return this;\n};\n\n/**\n * Ambient material for geometry with a given color. You can view all\n * possible materials in this\n * <a href=\"https://p5js.org/examples/3d-materials.html\">example</a>.\n * @method  ambientMaterial\n * @param  {Number} v1  gray value, red or hue value\n *                         (depending on the current color mode),\n * @param  {Number} [v2] green or saturation value\n * @param  {Number} [v3] blue or brightness value\n * @param  {Number} [a]  opacity\n * @chainable\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n * function draw() {\n *   background(0);\n *   ambientLight(100);\n *   pointLight(250, 250, 250, 100, 100, 0);\n *   ambientMaterial(250);\n *   sphere(50);\n * }\n * </code>\n * </div>\n *\n * @alt\n * radiating light source from top right of canvas\n *\n */\n/**\n * @method  ambientMaterial\n * @param  {Number[]|String|p5.Color} color  color, color Array, or CSS color string\n * @chainable\n */\np5.prototype.ambientMaterial = function(v1, v2, v3, a) {\n  var color = p5.prototype.color.apply(this, arguments);\n  this._renderer.curFillColor = color._array;\n\n  var shader = this._renderer._useLightShader();\n  shader.setUniform('uMaterialColor', this._renderer.curFillColor);\n  shader.setUniform('uSpecular', false);\n  shader.setUniform('isTexture', false);\n  return this;\n};\n\n/**\n * Specular material for geometry with a given color. You can view all\n * possible materials in this\n * <a href=\"https://p5js.org/examples/3d-materials.html\">example</a>.\n * @method specularMaterial\n * @param  {Number} v1  gray value, red or hue value\n *                       (depending on the current color mode),\n * @param  {Number} [v2] green or saturation value\n * @param  {Number} [v3] blue or brightness value\n * @param  {Number} [a]  opacity\n * @chainable\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n * function draw() {\n *   background(0);\n *   ambientLight(100);\n *   pointLight(250, 250, 250, 100, 100, 0);\n *   specularMaterial(250);\n *   sphere(50);\n * }\n * </code>\n * </div>\n *\n * @alt\n * diffused radiating light source from top right of canvas\n *\n */\n/**\n * @method specularMaterial\n * @param  {Number[]|String|p5.Color} color color Array, or CSS color string\n * @chainable\n */\np5.prototype.specularMaterial = function(v1, v2, v3, a) {\n  var color = p5.prototype.color.apply(this, arguments);\n  this._renderer.curFillColor = color._array;\n\n  var shader = this._renderer._useLightShader();\n  shader.setUniform('uMaterialColor', this._renderer.curFillColor);\n  shader.setUniform('uSpecular', true);\n  shader.setUniform('isTexture', false);\n  return this;\n};\n\n/**\n * @private blends colors according to color components.\n * If alpha value is less than 1, we need to enable blending\n * on our gl context.  Otherwise opaque objects need to a depthMask.\n * @param  {Number[]} color [description]\n * @return {Number[]]}  Normalized numbers array\n */\np5.RendererGL.prototype._applyColorBlend = function(colors) {\n  var gl = this.GL;\n  if (colors[colors.length - 1] < 1.0) {\n    gl.depthMask(false);\n    gl.enable(gl.BLEND);\n    gl.blendEquation(gl.FUNC_ADD);\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n  } else {\n    gl.depthMask(true);\n    gl.disable(gl.BLEND);\n  }\n  return colors;\n};\n\nmodule.exports = p5;\n",
          "filepath": "data/repos/processing/p5.js-0.6/src/webgl/material.js",
          "repo": "processing/p5.js",
          "version": "0.6",
          "chunk_index": 0
        }
      },
      {
        "id": "9781836c-9e2c-4b87-97c5-bb9cec15dc42",
        "score": 0.015873015873015872,
        "payload": {
          "text": "var spec = {\n  addons: ['p5.dom'],\n  color: ['color_conversion', 'creating_reading', 'p5.Color', 'setting'],\n  core: [\n    '2d_primitives',\n    'core',\n    'curves',\n    'element',\n    'error_helpers',\n    'renderer',\n    'structure'\n  ],\n  data: ['dictionary'],\n  image: ['loading', 'pixels'],\n  io: ['files_input'],\n  math: ['calculation', 'noise', 'p5.Vector', 'random', 'trigonometry'],\n  typography: ['font_loading'],\n  utilities: ['array_functions', 'string_functions', 'time_date'],\n  webgl: [\n    'matrix',\n    'p5.RendererGL',\n    'p5.Shader',\n    'p5.Texture',\n    'pixels',\n    'stroke'\n  ]\n};\nObject.keys(spec).map(function(folder) {\n  spec[folder].map(function(file) {\n    var string = [\n      '<script src=\"unit/',\n      folder,\n      '/',\n      file,\n      '.js\" type=\"text/javascript\" ></script>'\n    ];\n    document.write(string.join(''));\n  });\n});\n",
          "filepath": "data/repos/processing/p5.js-0.6/test/unit/spec.js",
          "repo": "processing/p5.js",
          "version": "0.6",
          "chunk_index": 0
        }
      },
      {
        "id": "27ed5b0d-1b01-494b-bfcb-2402bb64e611",
        "score": 0.015625,
        "payload": {
          "text": "/**\n * @module IO\n * @submodule Input\n * @for p5\n * @requires core\n */\n\n/* globals Request: false */\n/* globals Headers: false */\n\n'use strict';\n\nvar p5 = require('../core/core');\nrequire('whatwg-fetch');\nrequire('es6-promise').polyfill();\nvar fetchJsonp = require('fetch-jsonp');\nrequire('../core/error_helpers');\n\n/**\n * Loads a JSON file from a file or a URL, and returns an Object.\n * Note that even if the JSON file contains an Array, an Object will be\n * returned with index numbers as keys.\n *\n * This method is asynchronous, meaning it may not finish before the next\n * line in your sketch is executed. JSONP is supported via a polyfill and you\n * can pass in as the second argument an object with definitions of the json\n * callback following the syntax specified <a href=\"https://github.com/camsong/\n * fetch-jsonp\">here</a>.\n *\n * @method loadJSON\n * @param  {String}        path       name of the file or url to load\n * @param  {Object}        [jsonpOptions] options object for jsonp related settings\n * @param  {String}        [datatype] \"json\" or \"jsonp\"\n * @param  {function}      [callback] function to be executed after\n *                                    loadJSON() completes, data is passed\n *                                    in as first argument\n * @param  {function}      [errorCallback] function to be executed if\n *                                    there is an error, response is passed\n *                                    in as first argument\n * @return {Object|Array}             JSON data\n * @example\n *\n * <p>Calling loadJSON() inside preload() guarantees to complete the\n * operation before setup() and draw() are called.</p>\n *\n * <div><code>\n * // Examples use USGS Earthquake API:\n * //   https://earthquake.usgs.gov/fdsnws/event/1/#methods\n * var earthquakes;\n * function preload() {\n *   // Get the most recent earthquake in the database\n *   var url =\n    'https://earthquake.usgs.gov/earthquakes/feed/v1.0/' +\n *     'summary/all_day.geojson';\n *   earthquakes = loadJSON(url);\n * }\n *\n * function setup() {\n *   noLoop();\n * }\n *\n * function draw() {\n *   background(200);\n *   // Get the magnitude and name of the earthquake out of the loaded JSON\n *   var earthquakeMag = earthquakes.features[0].properties.mag;\n *   var earthquakeName = earthquakes.features[0].properties.place;\n *   ellipse(width / 2, height / 2, earthquakeMag * 10, earthquakeMag * 10);\n *   textAlign(CENTER);\n *   text(earthquakeName, 0, height - 30, width, 30);\n * }\n * </code></div>\n *\n *\n * <p>Outside of preload(), you may supply a callback function to handle the\n * object:</p>\n * <div><code>\n * function setup() {\n *   noLoop();\n *   var url =\n    'https://earthquake.usgs.gov/earthquakes/feed/v1.0/' +\n *     'summary/all_day.geojson';\n *   loadJSON(url, drawEarthquake);\n * }\n *\n * function draw() {\n *   background(200);\n * }\n *\n * function drawEarthquake(earthquakes) {\n *   // Get the magnitude and name of the earthquake out of the loaded JSON\n *   var earthquakeMag = earthquakes.features[0].properties.mag;\n *   var earthquakeName = earthquakes.features[0].properties.place;\n *   ellipse(width / 2, height / 2, earthquakeMag * 10, earthquakeMag * 10);\n *   textAlign(CENTER);\n *   text(earthquakeName, 0, height - 30, width, 30);\n * }\n * </code></div>\n *\n * @alt\n * 50x50 ellipse that changes from black to white depending on the current humidity\n * 50x50 ellipse that changes from black to white depending on the current humidity\n *\n */\np5.prototype.loadJSON = function() {\n  var path = arguments[0];\n  var callback;\n  var errorCallback;\n  var options;\n\n  var ret = {}; // object needed for preload\n  var t = 'json';\n\n  // check for explicit data type argument\n  for (var i = 1; i < arguments.length; i++) {\n    var arg = arguments[i];\n    if (typeof arg === 'string') {\n      if (arg === 'jsonp' || arg === 'json') {\n        t = arg;\n      }\n    } else if (typeof arg === 'function') {\n      if (!callback) {\n        callback = arg;\n      } else {\n        errorCallback = arg;\n      }\n    } else if (typeof arg === 'object' && arg.hasOwnProperty('jsonpCallback')) {\n      t = 'jsonp';\n      options = arg;\n    }\n  }\n\n  var self = this;\n  this.httpDo(\n    path,\n    'GET',\n    options,\n    t,\n    function(resp) {\n      for (var k in resp) {\n        ret[k] = resp[k];\n      }\n      if (typeof callback !== 'undefined') {\n        callback(resp);\n      }\n\n      self._decrementPreload();\n    },\n    errorCallback\n  );\n\n  return ret;\n};\n\n/**\n * Reads the contents of a file and creates a String array of its individual\n * lines. If the name of the file is used as the parameter, as in the above\n * example, the file must be located in the sketch directory/folder.\n * <br><br>\n * Alternatively, the file maybe be loaded from anywhere on the local\n * computer using an absolute path (something that starts with / on Unix and\n * Linux, or a drive letter on Windows), or the filename parameter can be a\n * URL for a file found on a network.\n * <br><br>\n * This method is asynchronous, meaning it may not finish before the next\n * line in your sketch is executed.\n *\n * @method loadStrings\n * @param  {String}   filename   name of the file or url to load\n * @param  {function} [callback] function to be executed after loadStrings()\n *                               completes, Array is passed in as first\n *                               argument\n * @param  {function} [errorCallback] function to be executed if\n *                               there is an error, response is passed\n *                               in as first argument\n * @return {String[]}            Array of Strings\n * @example\n *\n * <p>Calling loadStrings() inside preload() guarantees to complete the\n * operation before setup() and draw() are called.</p>\n *\n * <div><code>\n * var result;\n * function preload() {\n *   result = loadStrings('assets/test.txt');\n * }\n\n * function setup() {\n *   background(200);\n *   var ind = floor(random(result.length));\n *   text(result[ind], 10, 10, 80, 80);\n * }\n * </code></div>\n *\n * <p>Outside of preload(), you may supply a callback function to handle the\n * object:</p>\n *\n * <div><code>\n * function setup() {\n *   loadStrings('assets/test.txt', pickString);\n * }\n *\n * function pickString(result) {\n *   background(200);\n *   var ind = floor(random(result.length));\n *   text(result[ind], 10, 10, 80, 80);\n * }\n * </code></div>\n *\n * @alt\n * randomly generated text from a file, for example \"i smell like butter\"\n * randomly generated text from a file, for example \"i have three feet\"\n *\n */\np5.prototype.loadStrings = function() {\n  var ret = [];\n  var callback, errorCallback;\n\n  for (var i = 1; i < arguments.length; i++) {\n    var arg = arguments[i];\n    if (typeof arg === 'function') {\n      if (typeof callback === 'undefined') {\n        callback = arg;\n      } else if (typeof errorCallback === 'undefined') {\n        errorCallback = arg;\n      }\n    }\n  }\n\n  var self = this;\n  p5.prototype.httpDo.call(\n    this,\n    arguments[0],\n    'GET',\n    'text',\n    function(data) {\n      var arr = data.match(/[^\\r\\n]+/g);\n      for (var k in arr) {\n        ret[k] = arr[k];\n      }\n\n      if (typeof callback !== 'undefined') {\n        callback(ret);\n      }\n\n      self._decrementPreload();\n    },\n    errorCallback\n  );\n\n  return ret;\n};\n\n/**\n * <p>Reads the contents of a file or URL and creates a p5.Table object with\n * its values. If a file is specified, it must be located in the sketch's\n * \"data\" folder. The filename parameter can also be a URL to a file found\n * online. By default, the file is assumed to be comma-separated (in CSV\n * format). Table only looks for a header row if the 'header' option is\n * included.</p>\n *\n * <p>Possible options include:\n * <ul>\n * <li>csv - parse the table as comma-separated values</li>\n * <li>tsv - parse the table as tab-separated values</li>\n * <li>header - this table has a header (title) row</li>\n * </ul>\n * </p>\n *\n * <p>When passing in multiple options, pass them in as separate parameters,\n * seperated by commas. For example:\n * <br><br>\n * <code>\n * loadTable('my_csv_file.csv', 'csv', 'header');\n * </code>\n * </p>\n *\n * <p> All files loaded and saved use UTF-8 encoding.</p>\n *\n * <p>This method is asynchronous, meaning it may not finish before the next\n * line in your sketch is executed. Calling loadTable() inside preload()\n * guarantees to complete the operation before setup() and draw() are called.\n * <p>Outside of preload(), you may supply a callback function to handle the\n * object:</p>\n * </p>\n *\n * @method loadTable\n * @param  {String}         filename   name of the file or URL to load\n * @param  {String}         options  \"header\" \"csv\" \"tsv\"\n * @param  {function}       [callback] function to be executed after\n *                                     loadTable() completes. On success, the\n *                                     Table object is passed in as the\n *                                     first argument.\n * @param  {function}  [errorCallback] function to be executed if\n *                                     there is an error, response is passed\n *                                     in as first argument\n * @return {Object}                    Table object containing data\n *\n * @example\n * <div class=\"norender\">\n * <code>\n * // Given the following CSV file called \"mammals.csv\"\n * // located in the project's \"assets\" folder:\n * //\n * // id,species,name\n * // 0,Capra hircus,Goat\n * // 1,Panthera pardus,Leopard\n * // 2,Equus zebra,Zebra\n *\n * var table;\n *\n * function preload() {\n *   //my table is comma separated value \"csv\"\n *   //and has a header specifying the columns labels\n *   table = loadTable('assets/mammals.csv', 'csv', 'header');\n *   //the file can be remote\n *   //table = loadTable(\"http://p5js.org/reference/assets/mammals.csv\",\n *   //                  \"csv\", \"header\");\n * }\n *\n * function setup() {\n *   //count the columns\n *   print(table.getRowCount() + ' total rows in table');\n *   print(table.getColumnCount() + ' total columns in table');\n *\n *   print(table.getColumn('name'));\n *   //[\"Goat\", \"Leopard\", \"Zebra\"]\n *\n *   //cycle through the table\n *   for (var r = 0; r < table.getRowCount(); r++)\n *     for (var c = 0; c < table.getColumnCount(); c++) {\n *       print(table.getString(r, c));\n *     }\n * }\n * </code>\n * </div>\n *\n * @alt\n * randomly generated text from a file, for example \"i smell like butter\"\n * randomly generated text from a file, for example \"i have three feet\"\n *\n */\n/**\n * @method loadTable\n * @param  {String}         filename\n * @param  {function}       [callback]\n * @param  {function}  [errorCallback]\n * @return {Object}\n */\np5.prototype.loadTable = function(path) {\n  var callback;\n  var errorCallback;\n  var options = [];\n  var header = false;\n  var ext = path.substring(path.lastIndexOf('.') + 1, path.length);\n  var sep = ',';\n  var separatorSet = false;\n\n  if (ext === 'tsv') {\n    //Only need to check extension is tsv because csv is default\n    sep = '\\t';\n  }\n\n  for (var i = 1; i < arguments.length; i++) {\n    if (typeof arguments[i] === 'function') {\n      if (typeof callback === 'undefined') {\n        callback = arguments[i];\n      } else if (typeof errorCallback === 'undefined') {\n        errorCallback = arguments[i];\n      }\n    } else if (typeof arguments[i] === 'string') {\n      options.push(arguments[i]);\n      if (arguments[i] === 'header') {\n        header = true;\n      }\n      if (arguments[i] === 'csv') {\n        if (separatorSet) {\n          throw new Error('Cannot set multiple separator types.');\n        } else {\n          sep = ',';\n          separatorSet = true;\n        }\n      } else if (arguments[i] === 'tsv') {\n        if (separatorSet) {\n          throw new Error('Cannot set multiple separator types.');\n        } else {\n          sep = '\\t';\n          separatorSet = true;\n        }\n      }\n    }\n  }\n\n  var t = new p5.Table();\n\n  var self = this;\n  this.httpDo(\n    path,\n    'GET',\n    'text',\n    function(resp) {\n      var state = {};\n\n      // define constants\n      var PRE_TOKEN = 0,\n        MID_TOKEN = 1,\n        POST_TOKEN = 2,\n        POST_RECORD = 4;\n\n      var QUOTE = '\"',\n        CR = '\\r',\n        LF = '\\n';\n\n      var records = [];\n      var offset = 0;\n      var currentRecord = null;\n      var currentChar;\n\n      var tokenBegin = function() {\n        state.currentState = PRE_TOKEN;\n        state.token = '';\n      };\n\n      var tokenEnd = function() {\n        currentRecord.push(state.token);\n        tokenBegin();\n      };\n\n      var recordBegin = function() {\n        state.escaped = false;\n        currentRecord = [];\n        tokenBegin();\n      };\n\n      var recordEnd = function() {\n        state.currentState = POST_RECORD;\n        records.push(currentRecord);\n        currentRecord = null;\n      };\n\n      for (;;) {\n        currentChar = resp[offset++];\n\n        // EOF\n        if (currentChar == null) {\n          if (state.escaped) {\n            throw new Error('Unclosed quote in file.');\n          }\n          if (currentRecord) {\n            tokenEnd();\n            recordEnd();\n            break;\n          }\n        }\n        if (currentRecord === null) {\n          recordBegin();\n        }\n\n        // Handle opening quote\n        if (state.currentState === PRE_TOKEN) {\n          if (currentChar === QUOTE) {\n            state.escaped = true;\n            state.currentState = MID_TOKEN;\n            continue;\n          }\n          state.currentState = MID_TOKEN;\n        }\n\n        // mid-token and escaped, look for sequences and end quote\n        if (state.currentState === MID_TOKEN && state.escaped) {\n          if (currentChar === QUOTE) {\n            if (resp[offset] === QUOTE) {\n              state.token += QUOTE;\n              offset++;\n            } else {\n              state.escaped = false;\n              state.currentState = POST_TOKEN;\n            }\n          } else if (currentChar === CR) {\n            continue;\n          } else {\n            state.token += currentChar;\n          }\n          continue;\n        }\n\n        // fall-through: mid-token or post-token, not escaped\n        if (currentChar === CR) {\n          if (resp[offset] === LF) {\n            offset++;\n          }\n          tokenEnd();\n          recordEnd();\n        } else if (currentChar === LF) {\n          tokenEnd();\n          recordEnd();\n        } else if (currentChar === sep) {\n          tokenEnd();\n        } else if (state.currentState === MID_TOKEN) {\n          state.token += currentChar;\n        }\n      }\n\n      // set up column names\n      if (header) {\n        t.columns = records.shift();\n      } else {\n        for (i = 0; i < records[0].length; i++) {\n          t.columns[i] = 'null';\n        }\n      }\n      var row;\n      for (i = 0; i < records.length; i++) {\n        //Handles row of 'undefined' at end of some CSVs\n        if (records[i].length === 1) {\n          if (records[i][0] === 'undefined' || records[i][0] === '') {\n            continue;\n          }\n        }\n        row = new p5.TableRow();\n        row.arr = records[i];\n        row.obj = makeObject(records[i], t.columns);\n        t.addRow(row);\n      }\n      if (typeof callback === 'function') {\n        callback(t);\n      }\n\n      self._decrementPreload();\n    },\n    function(err) {\n      // Error handling\n      p5._friendlyFileLoadError(2, path);\n\n      if (errorCallback) {\n        errorCallback(err);\n      } else {\n        throw err;\n      }\n    }\n  );\n\n  return t;\n};\n\n// helper function to turn a row into a JSON object\nfunction makeObject(row, headers) {\n  var ret = {};\n  headers = headers || [];\n  if (typeof headers === 'undefined') {\n    for (var j = 0; j < row.length; j++) {\n      headers[j.toString()] = j;\n    }\n  }\n  for (var i = 0; i < headers.length; i++) {\n    var key = headers[i];\n    var val = row[i];\n    ret[key] = val;\n  }\n  return ret;\n}\n\n/*global parseXML */\np5.prototype.parseXML = function(two) {\n  var one = new p5.XML();\n  var i;\n  if (two.children.length) {\n    for (i = 0; i < two.children.length; i++) {\n      var node = parseXML(two.children[i]);\n      one.addChild(node);\n    }\n    one.setName(two.nodeName);\n    one._setCont(two.textContent);\n    one._setAttributes(two);\n    for (var j = 0; j < one.children.length; j++) {\n      one.children[j].parent = one;\n    }\n    return one;\n  } else {\n    one.setName(two.nodeName);\n    one._setCont(two.textContent);\n    one._setAttributes(two);\n    return one;\n  }\n};\n\n/**\n * Reads the contents of a file and creates an XML object with its values.\n * If the name of the file is used as the parameter, as in the above example,\n * the file must be located in the sketch directory/folder.\n *\n * Alternatively, the file maybe be loaded from anywhere on the local\n * computer using an absolute path (something that starts with / on Unix and\n * Linux, or a drive letter on Windows), or the filename parameter can be a\n * URL for a file found on a network.\n *\n * This method is asynchronous, meaning it may not finish before the next\n * line in your sketch is executed. Calling loadXML() inside preload()\n * guarantees to complete the operation before setup() and draw() are called.\n *\n * Outside of preload(), you may supply a callback function to handle the\n * object.\n *\n * @method loadXML\n * @param  {String}   filename   name of the file or URL to load\n * @param  {function} [callback] function to be executed after loadXML()\n *                               completes, XML object is passed in as\n *                               first argument\n * @param  {function} [errorCallback] function to be executed if\n *                               there is an error, response is passed\n *                               in as first argument\n * @return {Object}              XML object containing data\n * @example\n * <div class='norender'><code>\n * // The following short XML file called \"mammals.xml\" is parsed\n * // in the code below.\n * //\n * // <?xml version=\"1.0\"?>\n * // &lt;mammals&gt;\n * //   &lt;animal id=\"0\" species=\"Capra hircus\">Goat&lt;/animal&gt;\n * //   &lt;animal id=\"1\" species=\"Panthera pardus\">Leopard&lt;/animal&gt;\n * //   &lt;animal id=\"2\" species=\"Equus zebra\">Zebra&lt;/animal&gt;\n * // &lt;/mammals&gt;\n *\n * var xml;\n *\n * function preload() {\n *   xml = loadXML('assets/mammals.xml');\n * }\n *\n * function setup() {\n *   var children = xml.getChildren('animal');\n *\n *   for (var i = 0; i < children.length; i++) {\n *     var id = children[i].getNum('id');\n *     var coloring = children[i].getString('species');\n *     var name = children[i].getContent();\n *     print(id + ', ' + coloring + ', ' + name);\n *   }\n * }\n *\n * // Sketch prints:\n * // 0, Capra hircus, Goat\n * // 1, Panthera pardus, Leopard\n * // 2, Equus zebra, Zebra\n * </code></div>\n *\n * @alt\n * no image displayed\n *\n */\np5.prototype.loadXML = function() {\n  var ret = {};\n  var callback, errorCallback;\n\n  for (var i = 1; i < arguments.length; i++) {\n    var arg = arguments[i];\n    if (typeof arg === 'function') {\n      if (typeof callback === 'undefined') {\n        callback = arg;\n      } else if (typeof errorCallback === 'undefined') {\n        errorCallback = arg;\n      }\n    }\n  }\n\n  var self = this;\n  this.httpDo(\n    arguments[0],\n    'GET',\n    'xml',\n    function(xml) {\n      for (var key in xml) {\n        ret[key] = xml[key];\n      }\n      if (typeof callback !== 'undefined') {\n        callback(ret);\n      }\n\n      self._decrementPreload();\n    },\n    errorCallback\n  );\n\n  return ret;\n};\n\n/**\n * Method for executing an HTTP GET request. If data type is not specified,\n * p5 will try to guess based on the URL, defaulting to text. This is equivalent to\n * calling <code>httpDo(path, 'GET')</code>.\n *\n * @method httpGet\n * @param  {String}        path       name of the file or url to load\n * @param  {String}        [datatype] \"json\", \"jsonp\", \"xml\", or \"text\"\n * @param  {Object}        [data]     param data passed sent with request\n * @param  {function}      [callback] function to be executed after\n *                                    httpGet() completes, data is passed in\n *                                    as first argument\n * @param  {function}      [errorCallback] function to be executed if\n *                                    there is an error, response is passed\n *                                    in as first argument\n * @example\n * <div class='norender'><code>\n * // Examples use USGS Earthquake API:\n * //   https://earthquake.usgs.gov/fdsnws/event/1/#methods\n * var earthquakes;\n * function preload() {\n *   // Get the most recent earthquake in the database\n *   var url =\n    'https://earthquake.usgs.gov/fdsnws/event/1/query?' +\n *     'format=geojson&limit=1&orderby=time';\n *   httpGet(url, 'jsonp', false, function(response) {\n *     // when the HTTP request completes, populate the variable that holds the\n *     // earthquake data used in the visualization.\n *     earthquakes = response;\n *   });\n * }\n *\n * function draw() {\n *   if (!earthquakes) {\n *     // Wait until the earthquake data has loaded before drawing.\n *     return;\n *   }\n *   background(200);\n *   // Get the magnitude and name of the earthquake out of the loaded JSON\n *   var earthquakeMag = earthquakes.features[0].properties.mag;\n *   var earthquakeName = earthquakes.features[0].properties.place;\n *   ellipse(width / 2, height / 2, earthquakeMag * 10, earthquakeMag * 10);\n *   textAlign(CENTER);\n *   text(earthquakeName, 0, height - 30, width, 30);\n *   noLoop();\n * }\n * </code></div>\n */\np5.prototype.httpGet = function() {\n  var args = Array.prototype.slice.call(arguments);\n  args.splice(1, 0, 'GET');\n  p5.prototype.httpDo.apply(this, args);\n};\n\n/**\n * Method for executing an HTTP POST request. If data type is not specified,\n * p5 will try to guess based on the URL, defaulting to text. This is equivalent to\n * calling <code>httpDo(path, 'POST')</code>.\n *\n * @method httpPost\n * @param  {String}        path       name of the file or url to load\n * @param  {String}        [datatype] \"json\", \"jsonp\", \"xml\", or \"text\".\n *                                    If omitted, httpPost() will guess.\n * @param  {Object}        [data]     param data passed sent with request\n * @param  {function}      [callback] function to be executed after\n *                                    httpPost() completes, data is passed in\n *                                    as first argument\n * @param  {function}      [errorCallback] function to be executed if\n *                                    there is an error, response is passed\n *                                    in as first argument\n *\n * @example\n * <div>\n * <code>\n * // Examples use jsonplaceholder.typicode.com for a Mock Data API\n *\n * var url = 'https://jsonplaceholder.typicode.com/posts';\n * var postData = { userId: 1, title: 'p5 Clicked!', body: 'p5.js is way cool.' };\n *\n * function setup() {\n *   createCanvas(800, 800);\n * }\n *\n * function mousePressed() {\n *   // Pick new random color values\n *   var r = random(255);\n *   var g = random(255);\n *   var b = random(255);\n *\n *   httpPost(url, 'json', postData, function(result) {\n *     strokeWeight(2);\n *     stroke(r, g, b);\n *     fill(r, g, b, 127);\n *     ellipse(mouseX, mouseY, 200, 200);\n *     text(result.body, mouseX, mouseY);\n *   });\n * }\n * </code>\n * </div>\n *\n *\n * <div><code>\n * var url = 'https://invalidURL'; // A bad URL that will cause errors\n * var postData = { title: 'p5 Clicked!', body: 'p5.js is way cool.' };\n *\n * function setup() {\n *   createCanvas(800, 800);\n * }\n *\n * function mousePressed() {\n *   // Pick new random color values\n *   var r = random(255);\n *   var g = random(255);\n *   var b = random(255);\n *\n *   httpPost(\n *     url,\n *     'json',\n *     postData,\n *     function(result) {\n *       // ... won't be called\n *     },\n *     function(error) {\n *       strokeWeight(2);\n *       stroke(r, g, b);\n *       fill(r, g, b, 127);\n *       text(error.toString(), mouseX, mouseY);\n *     }\n *   );\n * }\n * </code></div>\n *\n */\np5.prototype.httpPost = function() {\n  var args = Array.prototype.slice.call(arguments);\n  args.splice(1, 0, 'POST');\n  p5.prototype.httpDo.apply(this, args);\n};\n\n/**\n * Method for executing an HTTP request. If data type is not specified,\n * p5 will try to guess based on the URL, defaulting to text.<br><br>\n * For more advanced use, you may also pass in the path as the first argument\n * and a object as the second argument, the signature follows the one specified\n * in the Fetch API specification.\n *\n * @method httpDo\n * @param  {String}        path       name of the file or url to load\n * @param  {String}        [method]   either \"GET\", \"POST\", or \"PUT\",\n *                                    defaults to \"GET\"\n * @param  {String}        [datatype] \"json\", \"jsonp\", \"xml\", or \"text\"\n * @param  {Object}        [data]     param data passed sent with request\n * @param  {function}      [callback] function to be executed after\n *                                    httpGet() completes, data is passed in\n *                                    as first argument\n * @param  {function}      [errorCallback] function to be executed if\n *                                    there is an error, response is passed\n *                                    in as first argument\n *\n *\n * @example\n * <div>\n * <code>\n * // Examples use USGS Earthquake API:",
          "filepath": "data/repos/processing/p5.js-0.6/src/io/files.js",
          "repo": "processing/p5.js",
          "version": "0.6",
          "chunk_index": 0
        }
      },
      {
        "id": "d363a00f-ebdd-4a74-9e86-cec19c280b8a",
        "score": 0.015384615384615385,
        "payload": {
          "text": "/// @ts-check\nconst createEmitter = require('./emit');\n\nfunction position(file, line) {\n  return file + ', line ' + line;\n}\n\nfunction classitemPosition(classitem) {\n  return position(classitem.file, classitem.line);\n}\n\nfunction overloadPosition(classitem, overload) {\n  return position(classitem.file, overload.line);\n}\n\n// mod is used to make yuidocs \"global\". It actually just calls generate()\n// This design was selected to avoid rewriting the whole file from\n// https://github.com/toolness/friendly-error-fellowship/blob/2093aee2acc53f0885fcad252a170e17af19682a/experiments/typescript/generate-typescript-annotations.js\nfunction mod(yuidocs, localFileame, globalFilename, sourcePath) {\n  var emit;\n  var constants = {};\n  var missingTypes = {};\n\n  // http://stackoverflow.com/a/2008353/2422398\n  var JS_SYMBOL_RE = /^[$A-Z_][0-9A-Z_$]*$/i;\n\n  var P5_CLASS_RE = /^p5\\.([^.]+)$/;\n\n  var P5_ALIASES = [\n    'p5',\n    // These are supposedly \"classes\" in our docs, but they don't exist\n    // as objects, and their methods are all defined on p5.\n    'p5.dom',\n    'p5.sound'\n  ];\n\n  var EXTERNAL_TYPES = new Set([\n    'HTMLCanvasElement',\n    'HTMLElement',\n    'Float32Array',\n    'AudioParam',\n    'AudioNode',\n    'GainNode',\n    'DelayNode',\n    'ConvolverNode',\n    'Event',\n    'Blob'\n  ]);\n\n  var YUIDOC_TO_TYPESCRIPT_PARAM_MAP = {\n    Object: 'object',\n    Any: 'any',\n    Number: 'number',\n    Integer: 'number',\n    String: 'string',\n    Constant: 'any',\n    undefined: 'undefined',\n    Null: 'null',\n    Array: 'any[]',\n    Boolean: 'boolean',\n    '*': 'any',\n    Void: 'void',\n    P5: 'p5',\n    // When the docs don't specify what kind of function we expect,\n    // then we need to use the global type `Function`\n    Function: 'Function',\n    // Special ignore for hard to fix YUIDoc from p5.sound\n    'Tone.Signal': 'any',\n    SoundObject: 'any'\n  };\n\n  function getClassitems(className) {\n    return yuidocs.classitems.filter(function(classitem) {\n      // Note that we first find items with the right class name,\n      // but we also check for classitem.name because\n      // YUIDoc includes classitems that we want to be undocumented\n      // just because we used block comments.\n      // We have other checks in place for finding missing method names\n      // on public methods so a missing classitem.name implies that\n      // the method is undocumented on purpose.\n      // See https://github.com/processing/p5.js/issues/1252 and\n      // https://github.com/processing/p5.js/pull/2301\n      return classitem.class === className && classitem.name;\n    });\n  }\n\n  function isValidP5ClassName(className) {\n    return (\n      (P5_CLASS_RE.test(className) && className in yuidocs.classes) ||\n      (P5_CLASS_RE.test('p5.' + className) &&\n        'p5.' + className in yuidocs.classes)\n    );\n  }\n\n  /**\n   * @param {string} type\n   */\n  function validateType(type) {\n    return translateType(type);\n  }\n\n  function validateMethod(classitem, overload) {\n    var errors = [];\n    var paramNames = {};\n    var optionalParamFound = false;\n\n    if (!(JS_SYMBOL_RE.test(classitem.name) || classitem.is_constructor)) {\n      errors.push('\"' + classitem.name + '\" is not a valid JS symbol name');\n    }\n\n    (overload.params || []).forEach(function(param) {\n      if (param.optional) {\n        optionalParamFound = true;\n      } else if (optionalParamFound) {\n        errors.push(\n          'required param \"' + param.name + '\" follows an ' + 'optional param'\n        );\n      }\n\n      if (param.name in paramNames) {\n        errors.push('param \"' + param.name + '\" is defined multiple times');\n      }\n      paramNames[param.name] = true;\n\n      if (!JS_SYMBOL_RE.test(param.name)) {\n        errors.push('param \"' + param.name + '\" is not a valid JS symbol name');\n      }\n\n      if (!validateType(param.type)) {\n        errors.push(\n          'param \"' + param.name + '\" has invalid type: ' + param.type\n        );\n      }\n\n      if (param.type === 'Constant') {\n        var constantRe = /either\\s+(?:[A-Z0-9_]+\\s*,?\\s*(?:or)?\\s*)+/g;\n        var execResult = constantRe.exec(param.description);\n        var match;\n        if (execResult) {\n          match = execResult[0];\n        }\n        if (classitem.name === 'endShape' && param.name === 'mode') {\n          match = 'CLOSE';\n        }\n        if (match) {\n          var values = [];\n\n          var reConst = /[A-Z0-9_]+/g;\n          var matchConst;\n          while ((matchConst = reConst.exec(match)) !== null) {\n            values.push(matchConst);\n          }\n          var paramWords = param.name\n            .split('.')\n            .pop()\n            .replace(/([A-Z])/g, ' $1')\n            .trim()\n            .toLowerCase()\n            .split(' ');\n          var propWords = classitem.name\n            .split('.')\n            .pop()\n            .replace(/([A-Z])/g, ' $1')\n            .trim()\n            .toLowerCase()\n            .split(' ');\n\n          var constName;\n          if (paramWords.length > 1 || propWords[0] === 'create') {\n            constName = paramWords.join('_');\n          } else if (\n            propWords[propWords.length - 1] ===\n            paramWords[paramWords.length - 1]\n          ) {\n            constName = propWords.join('_');\n          } else {\n            constName = propWords[0] + '_' + paramWords[paramWords.length - 1];\n          }\n\n          constName = constName.toUpperCase();\n          constants[constName] = values;\n\n          param.type = constName;\n        }\n      }\n    });\n\n    if (overload.return && !validateType(overload.return.type)) {\n      errors.push('return has invalid type: ' + overload.return.type);\n    }\n\n    return errors;\n  }\n\n  /**\n   *\n   * @param {string} type\n   * @param {string} [defaultType]\n   */\n  function translateType(type, defaultType) {\n    if (type === void 0) {\n      return defaultType;\n    }\n\n    type = type.trim();\n\n    if (type === '') {\n      return '';\n    }\n\n    if (type.length > 2 && type.substring(type.length - 2) === '[]') {\n      return translateType(type.substr(0, type.length - 2), defaultType) + '[]';\n    }\n\n    var matchFunction = type.match(/Function\\(([^)]*)\\)/i);\n    if (matchFunction) {\n      var paramTypes = matchFunction[1].split(',');\n      const mappedParamTypes = paramTypes.map((t, i) => {\n        const paramName = 'p' + (i + 1);\n        const paramType = translateType(t, 'any');\n        return paramName + ': ' + paramType;\n      });\n      return '(' + mappedParamTypes.join(',') + ') => any';\n    }\n\n    var parts = type.split('|');\n    if (parts.length > 1) {\n      return parts.map(t => translateType(t, defaultType)).join('|');\n    }\n\n    const staticallyMappedType = YUIDOC_TO_TYPESCRIPT_PARAM_MAP[type];\n    if (staticallyMappedType != null) {\n      return staticallyMappedType;\n    }\n\n    if (EXTERNAL_TYPES.has(type)) {\n      return type;\n    }\n\n    if (isValidP5ClassName(type)) {\n      return type;\n    }\n\n    if (constants[type]) {\n      return type;\n    }\n\n    missingTypes[type] = true;\n    return defaultType;\n  }\n\n  function translateParam(param) {\n    var name = param.name;\n    if (name === 'class') {\n      name = 'theClass';\n    }\n\n    return (\n      name +\n      (param.optional ? '?' : '') +\n      ': ' +\n      translateType(param.type, 'any')\n    );\n  }\n\n  function generateClassMethod(className, classitem) {\n    if (classitem.overloads) {\n      classitem.overloads.forEach(function(overload) {\n        generateClassMethodWithParams(className, classitem, overload);\n      });\n    } else {\n      generateClassMethodWithParams(className, classitem, classitem);\n    }\n  }\n\n  function generateClassMethodWithParams(className, classitem, overload) {\n    var errors = validateMethod(classitem, overload);\n    var params = (overload.params || []).map(translateParam);\n    var returnType = overload.chainable\n      ? className\n      : overload.return ? translateType(overload.return.type, 'any') : 'void';\n    var decl;\n\n    if (classitem.is_constructor) {\n      decl = 'constructor(' + params.join(', ') + ')';\n    } else {\n      decl =\n        (overload.static ? 'static ' : '') +\n        classitem.name +\n        '(' +\n        params.join(', ') +\n        '): ' +\n        returnType;\n    }\n\n    if (emit.getIndentLevel() === 0) {\n      decl = 'declare function ' + decl + ';';\n    }\n\n    if (errors.length) {\n      emit.sectionBreak();\n      emit(\n        '// TODO: Fix ' +\n          classitem.name +\n          '() errors in ' +\n          overloadPosition(classitem, overload) +\n          ':'\n      );\n      emit('//');\n      errors.forEach(function(error) {\n        console.log(\n          classitem.name +\n            '() ' +\n            overloadPosition(classitem, overload) +\n            ', ' +\n            error\n        );\n        emit('//   ' + error);\n      });\n      emit('//');\n      emit('// ' + decl);\n      emit('');\n    } else {\n      emit.description(classitem, overload);\n      emit(decl);\n    }\n  }\n\n  function generateClassConstructor(className) {\n    var classitem = yuidocs.classes[className];\n    if (classitem.is_constructor) {\n      generateClassMethod(className, classitem);\n    }\n  }\n\n  function generateClassProperty(className, classitem) {\n    if (JS_SYMBOL_RE.test(classitem.name)) {\n      // TODO: It seems our properties don't carry any type information,\n      // which is unfortunate. YUIDocs supports the @type tag on properties,\n      // and even encourages using it, but we don't seem to use it.\n      var translatedType = translateType(classitem.type, 'any');\n      var defaultValue = classitem.default;\n      if (classitem.final && translatedType === 'string' && !defaultValue) {\n        defaultValue = classitem.name.toLowerCase().replace(/_/g, '-');\n      }\n\n      var decl;\n      if (defaultValue) {\n        decl = classitem.name + ': ';\n        if (translatedType === 'string') {\n          decl += \"'\" + defaultValue.replace(/'/g, \"\\\\'\") + \"'\";\n        } else {\n          decl += defaultValue;\n        }\n      } else {\n        decl = classitem.name + ': ' + translatedType;\n      }\n\n      emit.description(classitem);\n\n      if (emit.getIndentLevel() === 0) {\n        const declarationType = classitem.final ? 'const ' : 'var ';\n        emit('declare ' + declarationType + decl + ';');\n      } else {\n        const modifier = classitem.final ? 'readonly ' : '';\n        emit(modifier + decl);\n      }\n    } else {\n      emit.sectionBreak();\n      emit(\n        '// TODO: Property \"' +\n          classitem.name +\n          '\", defined in ' +\n          classitemPosition(classitem) +\n          ', is not a valid JS symbol name'\n      );\n      emit.sectionBreak();\n    }\n  }\n\n  function generateClassProperties(className) {\n    getClassitems(className).forEach(function(classitem) {\n      classitem.file = classitem.file.replace(/\\\\/g, '/');\n      emit.setCurrentSourceFile(classitem.file);\n      if (classitem.itemtype === 'method') {\n        generateClassMethod(className, classitem);\n      } else if (classitem.itemtype === 'property') {\n        generateClassProperty(className, classitem);\n      } else {\n        emit(\n          '// TODO: Annotate ' +\n            classitem.itemtype +\n            ' \"' +\n            classitem.name +\n            '\", defined in ' +\n            classitemPosition(classitem)\n        );\n      }\n    });\n  }\n\n  function generateP5Properties(className) {\n    emit.sectionBreak();\n    emit('// Properties from ' + className);\n    emit.sectionBreak();\n\n    generateClassConstructor(className);\n    generateClassProperties(className);\n  }\n\n  function generateP5Subclass(className) {\n    var info = yuidocs.classes[className];\n    var nestedClassName = className.match(P5_CLASS_RE)[1];\n\n    info.file = info.file.replace(/\\\\/g, '/');\n    emit.setCurrentSourceFile(info.file);\n\n    emit(\n      'class ' +\n        nestedClassName +\n        (info.extends ? ' extends ' + info.extends : '') +\n        ' {'\n    );\n    emit.indent();\n\n    generateClassConstructor(className);\n    generateClassProperties(className);\n\n    emit.dedent();\n    emit('}');\n  }\n\n  function emitConstants() {\n    emit('// Constants ');\n    Object.keys(constants).forEach(function(key) {\n      var values = constants[key];\n\n      emit('type ' + key + ' =');\n      values.forEach(function(v, i) {\n        var str = ' typeof ' + v;\n        str = (i ? '|' : ' ') + str;\n        if (i === values.length - 1) {\n          str += ';';\n        }\n        emit('    ' + str);\n      });\n\n      emit('');\n    });\n  }\n\n  function generate() {\n    var p5Aliases = [];\n    var p5Subclasses = [];\n\n    Object.keys(yuidocs.classes).forEach(function(className) {\n      if (P5_ALIASES.indexOf(className) !== -1) {\n        p5Aliases.push(className);\n      } else if (P5_CLASS_RE.test(className)) {\n        p5Subclasses.push(className);\n      } else {\n        throw new Error(\n          className +\n            ' is documented as a class but ' +\n            \"I'm not sure how to generate a type definition for it\"\n        );\n      }\n    });\n\n    emit = createEmitter(localFileame);\n\n    emit('declare class p5 {');\n    emit.indent();\n\n    p5Aliases.forEach(generateP5Properties);\n\n    emit.dedent();\n    emit('}\\n');\n\n    emit('declare namespace p5 {');\n    emit.indent();\n\n    p5Subclasses.forEach(generateP5Subclass);\n\n    emit.dedent();\n    emit('}\\n');\n\n    emit.close();\n\n    emit = createEmitter(globalFilename);\n\n    emit('///<reference path=\"p5.d.ts\" />\\n');\n\n    p5Aliases.forEach(generateP5Properties);\n\n    emitConstants();\n\n    emit.close();\n\n    for (var t in missingTypes) {\n      console.log('MISSING: ', t);\n    }\n  }\n\n  generate();\n}\n\nmodule.exports = mod;\n",
          "filepath": "data/repos/processing/p5.js-0.6/tasks/typescript/generate-typescript-annotations.js",
          "repo": "processing/p5.js",
          "version": "0.6",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-471",
    "model_patch": "diff --git a/index.js b/index.js\n--- a/index.js\n+++ b/index.js\n@@ -1,6 +1,7 @@\n import React from 'react';\n import ReactPDF, {\n   Document,\n+  Text,\n   Page,\n   View,\n   StyleSheet,\n@@ -56,6 +57,7 @@\n \n ReactPDF.render(doc, `${__dirname}/output.pdf`);\n \n+export { Text };\n \n[end of index.js]\ndiff --git a/dom.js b/dom.js\n--- a/dom.js\n+++ b/dom.js\n@@ -1,6 +1,7 @@\n import React from 'react';\n import warning from 'fbjs/lib/warning';\n import { flatStyles } from './utils/styles';\n+import { Text as PDFText } from './index';\n import {\n   pdf,\n   View,\n@@ -13,6 +14,7 @@\n   PDFRenderer,\n   createInstance,\n   Document as PDFDocument,\n+  Text,\n } from './index';\n \n export const Document = ({ children, ...props }) => {\n@@ -64,6 +66,7 @@\n   PDFRenderer,\n   createInstance,\n   Document,\n+  Text,\n   PDFViewer,\n   StyleSheet,\n   BlobProvider,\n[end of dom.js]",
    "model_name_or_path": "text_splade",
    "metrics": {
      "issue_embedding_time_ms_splade": 166.69,
      "issue_embedding_time_ms": 166.69,
      "retrieval_time_ms_splade": 8.52,
      "retrieval_time_ms": 8.52,
      "total_retrieval_time_ms": 175.2,
      "generation_time_ms": 3059.57,
      "total_io_time_ms": 3234.77,
      "input_total_token_limit": null,
      "issue_text_tokens": 686,
      "vlm_tokens": 0,
      "retrieved_tokens": 4034,
      "prompt_template_tokens": 507,
      "total_input_prompt_tokens": 5227,
      "output_generated_tokens": 266,
      "total_io_tokens": 5493,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nProblems with Extending Styled Components\\nI am trying to use the styled components api as described at https://react-pdf.org/styling#styled-components and further extending styles according to https://www.styled-components.com/docs/basics#extending-styles. However I don't see the overridden styles being applied.\\r\\n\\r\\nThis is a simple example that explains things a little better.\\r\\n\\r\\n    import React, { Component } from 'react';\\r\\n    import { Page, Text, Image, View, Document, StyleSheet } from '@react-pdf/renderer';\\r\\n    import { PDFViewer, PDFDownloadLink } from '@react-pdf/renderer';\\r\\n    import styled from '@react-pdf/styled-components';\\r\\n\\r\\n    const DefaultPage = styled.Page`\\r\\n      flex-direction: row;\\r\\n      flex-wrap: wrap;\\r\\n    `\\r\\n    const ExampleText1 = styled.Text`\\r\\n      border-left-width: 1pt;\\r\\n      border-right-width: 1pt;\\r\\n      border-style: solid;\\r\\n      border-color: #000;\\r\\n      border-collapse: collapse;\\r\\n      min-height: 14pt;\\r\\n      color: #f00;\\r\\n    `\\r\\n    const ExampleText2 = styled(ExampleText1)`\\r\\n      border-top-width: 1pt;\\r\\n      border-bottom-width: 1pt;\\r\\n      color: #0f0;\\r\\n    `\\r\\n    const ExampleText3 = styled(ExampleText2)`\\r\\n      border-color: #888;\\r\\n      color: #00f;\\r\\n    `\\r\\n    class ExamplePrint extends Component {\\r\\n      render() {\\r\\n        return (\\r\\n          <Document title=\\\"Example\\\" onRender={blob=>console.log( \\\"Blob\\\", blob )}>\\r\\n            <DefaultPage size=\\\"A4\\\">\\r\\n              <ExampleText1>Text1</ExampleText1>\\r\\n              <ExampleText2>Text2</ExampleText2>\\r\\n              <ExampleText3>Text3</ExampleText3>\\r\\n            </DefaultPage>\\r\\n          </Document>\\r\\n        )\\r\\n      }\\r\\n    }\\r\\n\\r\\n    class PrintBase extends Component {\\r\\n      render() {\\r\\n        const document = <ExamplePrint/>\\r\\n        return(\\r\\n          <div>\\r\\n            <PDFViewer width=\\\"100%\\\" height=\\\"1000\\\">\\r\\n              {document}\\r\\n            </PDFViewer>\\r\\n          </div>\\r\\n        )\\r\\n      }\\r\\n    }\\r\\n\\r\\n    export default PrintBase```\\r\\n\\r\\nI would expect the first text to be red and have borders left and right, the second one to be green with borders all round and the last one to be blue and have lighter borders. However they all come out exactly the same.\\r\\n\\r\\n[Rendered PDF](https://user-images.githubusercontent.com/383834/51480329-aefbb500-1d88-11e9-8b58-3dd8ee9462b6.png)\\r\\n\\r\\nLooking at the layout data in the blob I can see all the various style elements in there but I don't know if they are in the correct format since the structure is an object with a mixture of css property keys and numeric indices mixed in with undefined values.\\r\\n\\r\\n[Chrome Console](https://user-images.githubusercontent.com/383834/51480494-187bc380-1d89-11e9-8955-2f2c8f03f554.png)\\r\\n\\r\\nThis is with react-pdf/renderer and styled components v1.2.0. Unfortunately I can't find any sandbox that seems to working with react-pdf when using styled components.\\n\\n</issue>\\n\\n<code>\\n[start of dom.js]\\n/* eslint-disable no-unused-vars */\\nimport React from 'react';\\nimport warning from 'fbjs/lib/warning';\\nimport { flatStyles } from './utils/styles';\\nimport {\\n  pdf,\\n  View,\\n  Text,\\n  Link,\\n  Page,\\n  Font,\\n  Note,\\n  Image,\\n  version,\\n  StyleSheet,\\n  PDFRenderer,\\n  createInstance,\\n  Document as PDFDocument,\\n} from './index';\\n\\nexport const Document = ({ children, ...props }) => {\\n  return <PDFDocument {...props}>{children}</PDFDocument>;\\n};\\n\\nclass InternalBlobProvider extends React.PureComponent {\\n  state = { blob: null, url: null, loading: true, error: null };\\n\\n  constructor(props) {\\n    super(props);\\n\\n    // Create new root container for this render\\n    this.instance = pdf();\\n  }\\n\\n  componentDidMount() {\\n    this.renderDocument();\\n    this.onDocumentUpdate();\\n  }\\n\\n  componentDidUpdate() {\\n    this.renderDocument();\\n\\n    if (this.instance.isDirty() && !this.state.error) {\\n      this.onDocumentUpdate();\\n    }\\n  }\\n\\n  renderDocument() {\\n    this.instance.updateContainer(this.props.document);\\n  }\\n\\n  onDocumentUpdate() {\\n    const oldBlobUrl = this.state.url;\\n\\n    this.instance\\n      .toBlob()\\n      .then(blob => {\\n        this.setState(\\n          { blob, url: URL.createObjectURL(blob), loading: false },\\n          () => URL.revokeObjectURL(oldBlobUrl),\\n        );\\n      })\\n      .catch(error => {\\n        this.setState({ error });\\n        console.error(error);\\n        throw error;\\n      });\\n  }\\n\\n  render() {\\n    return this.props.children(this.state);\\n  }\\n}\\n\\nexport const BlobProvider = ({ document: doc, children }) => {\\n  if (!doc) {\\n    warning(false, 'You should pass a valid document to BlobProvider');\\n    return null;\\n  }\\n\\n  return <InternalBlobProvider document={doc}>{children}</InternalBlobProvider>;\\n};\\n\\nexport const PDFViewer = ({ className, style, children, ...props }) => {\\n  return (\\n    <InternalBlobProvider document={children}>\\n      {({ url }) => (\\n        <iframe\\n          className={className}\\n          src={url}\\n          style={Array.isArray(style) ? flatStyles(style) : style}\\n          {...props}\\n        />\\n      )}\\n    </InternalBlobProvider>\\n  );\\n};\\n\\nexport const PDFDownloadLink = ({\\n  document: doc,\\n  className,\\n  style,\\n  children,\\n  fileName = 'document.pdf',\\n}) => {\\n  if (!doc) {\\n    warning(false, 'You should pass a valid document to PDFDownloadLink');\\n    return null;\\n  }\\n\\n  const downloadOnIE = blob => () => {\\n    if (window.navigator.msSaveBlob) {\\n      window.navigator.msSaveBlob(blob, fileName);\\n    }\\n  };\\n\\n  return (\\n    <InternalBlobProvider document={doc}>\\n      {params => (\\n        <a\\n          className={className}\\n          download={fileName}\\n          href={params.url}\\n          onClick={downloadOnIE(params.blob)}\\n          style={Array.isArray(style) ? flatStyles(style) : style}\\n        >\\n          {typeof children === 'function' ? children(params) : children}\\n        </a>\\n      )}\\n    </InternalBlobProvider>\\n  );\\n};\\n\\nexport {\\n  pdf,\\n  View,\\n  Text,\\n  Link,\\n  Page,\\n  Font,\\n  Note,\\n  Image,\\n  version,\\n  StyleSheet,\\n  PDFRenderer,\\n  createInstance,\\n} from './index';\\n\\nexport default {\\n  pdf,\\n  View,\\n  Text,\\n  Link,\\n  Page,\\n  Font,\\n  Note,\\n  Image,\\n  version,\\n  Document,\\n  PDFViewer,\\n  StyleSheet,\\n  PDFRenderer,\\n  BlobProvider,\\n  createInstance,\\n  PDFDownloadLink,\\n};\\n\\n[end of dom.js]\\n[start of node.js]\\nimport fs from 'fs';\\nimport {\\n  pdf,\\n  View,\\n  Text,\\n  Link,\\n  Page,\\n  Font,\\n  Note,\\n  Image,\\n  version,\\n  Document,\\n  StyleSheet,\\n  PDFRenderer,\\n  createInstance,\\n} from './index';\\n\\nexport const renderToStream = function(element) {\\n  return pdf(element).toBuffer();\\n};\\n\\nexport const renderToFile = function(element, filePath, callback) {\\n  const output = renderToStream(element);\\n  const stream = fs.createWriteStream(filePath);\\n\\n  output.pipe(stream);\\n\\n  return new Promise((resolve, reject) => {\\n    stream.on('finish', () => {\\n      if (callback) callback(output, filePath);\\n      resolve(output);\\n    });\\n    stream.on('error', reject);\\n  });\\n};\\n\\nconst throwEnvironmentError = name => {\\n  throw new Error(\\n    `${name} is a web specific API. Or you're either using this component on Node, or your bundler is not loading react-pdf from the appropiate web build.`,\\n  );\\n};\\n\\nexport const PDFViewer = () => {\\n  throwEnvironmentError('PDFViewer');\\n};\\n\\nexport const PDFDownloadLink = () => {\\n  throwEnvironmentError('PDFDownloadLink');\\n};\\n\\nexport const BlobProvider = () => {\\n  throwEnvironmentError('BlobProvider');\\n};\\n\\nexport const render = renderToFile;\\n\\nexport {\\n  pdf,\\n  View,\\n  Text,\\n  Link,\\n  Page,\\n  Font,\\n  Note,\\n  Image,\\n  version,\\n  Document,\\n  StyleSheet,\\n  PDFRenderer,\\n  createInstance,\\n} from './index';\\n\\nexport default {\\n  pdf,\\n  View,\\n  Text,\\n  Link,\\n  Page,\\n  Font,\\n  Note,\\n  Image,\\n  version,\\n  Document,\\n  StyleSheet,\\n  PDFRenderer,\\n  PDFViewer,\\n  BlobProvider,\\n  PDFDownloadLink,\\n  createInstance,\\n  renderToStream,\\n  renderToFile,\\n  render,\\n};\\n\\n[end of node.js]\\n[start of index.js]\\n/* eslint react/prop-types: 0 */\\n/* eslint react/jsx-sort-props: 0 */\\n\\nimport React from 'react';\\nimport ReactPDF, {\\n  Document,\\n  Page,\\n  View,\\n  StyleSheet,\\n} from '../../dist/react-pdf.es.js';\\n\\nconst styles = StyleSheet.create({\\n  body: {\\n    padding: 35,\\n  },\\n  content: {\\n    padding: 20,\\n    '@media max-width: 400': {\\n      flexDirection: 'column',\\n    },\\n    '@media min-width: 400': {\\n      flexDirection: 'row',\\n    },\\n  },\\n  block: {\\n    height: 150,\\n    width: 150,\\n    backgroundColor: 'red',\\n  },\\n});\\n\\nconst MediaComponent = () => (\\n  <View style={styles.content}>\\n    <View style={[styles.block, { backgroundColor: 'red' }]} />\\n    <View style={[styles.block, { backgroundColor: 'green' }]} />\\n  </View>\\n);\\n\\nconst doc = (\\n  <Document>\\n    <Page style={styles.body} size={[500, 600]}>\\n      <MediaComponent />\\n    </Page>\\n    <Page style={styles.body} size={[300, 600]}>\\n      <MediaComponent />\\n    </Page>\\n  </Document>\\n);\\n\\nReactPDF.render(doc, `${__dirname}/output.pdf`);\\n\\n[end of index.js]\\n[start of index.d.ts]\\n/// <reference types=\\\"node\\\" />\\n\\ndeclare module '@react-pdf/renderer' {\\n  import * as React from 'react';\\n\\n  namespace ReactPDF {\\n    interface Style {\\n      [property: string]: any;\\n    }\\n    interface Styles {\\n      [key: string]: Style;\\n    }\\n    type Orientation = 'portrait' | 'landscape';\\n\\n    interface DocumentProps {\\n      title?: string;\\n      author?: string;\\n      subject?: string;\\n      keywords?: string;\\n      creator?: string;\\n      producer?: string;\\n      onRender?: () => any;\\n    }\\n\\n    /**\\n     * This component represent the PDF document itself. It must be the root\\n     * of your tree element structure, and under no circumstances should it be\\n     * used as children of another react-pdf component. In addition, it should\\n     * only have childs of type <Page />.\\n     */\\n    class Document extends React.Component<DocumentProps> {}\\n\\n    interface NodeProps {\\n      style?: Style | Style[];\\n      /**\\n       * Render component in all wrapped pages.\\n       * @see https://react-pdf.org/advanced#fixed-components\\n       */\\n      fixed?: boolean;\\n      /**\\n       * Force the wrapping algorithm to start a new page when rendering the\\n       * element.\\n       * @see https://react-pdf.org/advanced#page-breaks\\n       */\\n      break?: boolean;\\n    }\\n\\n    interface PageProps extends NodeProps {\\n      /**\\n       * Enable page wrapping for this page.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      debug?: boolean;\\n      size?: string | [number, number] | {width: number; height: number};\\n      orientation?: Orientation;\\n      ruler?: boolean;\\n      rulerSteps?: number;\\n      verticalRuler?: boolean;\\n      verticalRulerSteps?: number;\\n      horizontalRuler?: boolean;\\n      horizontalRulerSteps?: number;\\n    }\\n\\n    /**\\n     * Represents single page inside the PDF document, or a subset of them if\\n     * using the wrapping feature. A <Document /> can contain as many pages as\\n     * you want, but ensure not rendering a page inside any component besides\\n     * Document.\\n     */\\n    class Page extends React.Component<PageProps> {}\\n\\n    interface ViewProps extends NodeProps {\\n      /**\\n       * Enable/disable page wrapping for element.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      debug?: boolean;\\n      render?: (props: {pageNumber: number}) => React.ReactNode;\\n      children?: React.ReactNode;\\n    }\\n\\n    /**\\n     * The most fundamental component for building a UI and is designed to be\\n     * nested inside other views and can have 0 to many children.\\n     */\\n    class View extends React.Component<ViewProps> {}\\n\\n    interface ImageProps extends NodeProps {\\n      debug?: boolean;\\n      src: string | {data: Buffer; format: 'png' | 'jpg'};\\n      cache?: boolean;\\n    }\\n\\n    /**\\n     * A React component for displaying network or local (Node only) JPG or\\n     * PNG images, as well as base64 encoded image strings.\\n     */\\n    class Image extends React.Component<ImageProps> {}\\n\\n    interface TextProps extends NodeProps {\\n      /**\\n       * Enable/disable page wrapping for element.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      debug?: boolean;\\n      render?: (\\n        props: {pageNumber: number; totalPages: number},\\n      ) => React.ReactNode;\\n      children?: React.ReactNode;\\n      /**\\n       * How much hyphenated breaks should be avoided.\\n       */\\n      hyphenationCallback?: number;\\n    }\\n\\n    /**\\n     * A React component for displaying text. Text supports nesting of other\\n     * Text or Link components to create inline styling.\\n     */\\n    class Text extends React.Component<TextProps> {}\\n\\n    interface LinkProps extends NodeProps {\\n      /**\\n       * Enable/disable page wrapping for element.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      debug?: boolean;\\n      src: string;\\n      children?: React.ReactNode;\\n    }\\n\\n    /**\\n     * A React component for displaying an hyperlink. Link\\u2019s can be nested\\n     * inside a Text component, or being inside any other valid primitive.\\n     */\\n    class Link extends React.Component<LinkProps> {}\\n\\n    interface NoteProps extends NodeProps {\\n      children: string;\\n    }\\n\\n    class Note extends React.Component<NoteProps> {}\\n\\n    interface BlobProviderParams {\\n      blob: Blob | null;\\n      url: string | null;\\n      loading: boolean;\\n      error: Error | null;\\n    }\\n    interface BlobProviderProps {\\n      document: React.ReactElement<DocumentProps>;\\n      children: (params: BlobProviderParams) => React.ReactNode;\\n    }\\n\\n    /**\\n     * Easy and declarative way of getting document's blob data without\\n     * showing it on screen.\\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\\n     * @platform web\\n     */\\n    class BlobProvider extends React.Component<BlobProviderProps> {}\\n\\n    interface PDFViewerProps {\\n      width?: number;\\n      height?: number;\\n      style?: Style | Style[];\\n      className?: string;\\n      children?: React.ReactElement<DocumentProps>;\\n    }\\n\\n    /**\\n     * Iframe PDF viewer for client-side generated documents.\\n     * @platform web\\n     */\\n    class PDFViewer extends React.Component<PDFViewerProps> {}\\n\\n    interface PDFDownloadLinkProps {\\n      document: React.ReactElement<DocumentProps>;\\n      fileName?: string;\\n      style?: Style | Style[];\\n      className?: string;\\n      children?:\\n        | React.ReactNode\\n        | ((params: BlobProviderParams) => React.ReactNode);\\n    }\\n\\n    /**\\n     * Anchor tag to enable generate and download PDF documents on the fly.\\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\\n     * @platform web\\n     */\\n    class PDFDownloadLink extends React.Component<PDFDownloadLinkProps> {}\\n\\n    interface EmojiSource {\\n      url: string;\\n      format: string;\\n    }\\n    interface RegisteredFont {\\n      src: string;\\n      loaded: boolean;\\n      loading: boolean;\\n      data: any;\\n      [key: string]: any;\\n    }\\n    type HyphenationCallback = (\\n      words: string[],\\n      glyphString: {[key: string]: any},\\n    ) => string[];\\n\\n    const Font: {\\n      register: (\\n        src: string,\\n        options: {family: string; [key: string]: any},\\n      ) => void;\\n      getEmojiSource: () => EmojiSource;\\n      getRegisteredFonts: () => string[];\\n      registerEmojiSource: (emojiSource: EmojiSource) => void;\\n      registerHyphenationCallback: (\\n        hyphenationCallback: HyphenationCallback,\\n      ) => void;\\n      getHyphenationCallback: () => HyphenationCallback;\\n      getFont: (fontFamily: string) => RegisteredFont | undefined;\\n      load: (\\n        fontFamily: string,\\n        document: React.ReactElement<DocumentProps>,\\n      ) => Promise<void>;\\n      clear: () => void;\\n      reset: () => void;\\n    };\\n\\n    const StyleSheet: {\\n      hairlineWidth: number;\\n      create: <TStyles>(styles: TStyles) => TStyles;\\n      resolve: (\\n        style: Style,\\n        container: {\\n          width: number;\\n          height: number;\\n          orientation: Orientation;\\n        },\\n      ) => Style;\\n      flatten: (...style: (Style[] | Style | undefined)[]) => Style\\n      absoluteFillObject: {\\n        position: 'absolute';\\n        left: 0;\\n        right: 0;\\n        top: 0;\\n        bottom: 0;\\n      };\\n    };\\n\\n    const version: any;\\n\\n    const PDFRenderer: any;\\n\\n    const createInstance: (\\n      element: {\\n        type: string;\\n        props: {[key: string]: any};\\n      },\\n      root?: any,\\n    ) => any;\\n\\n    const pdf: (\\n      document: React.ReactElement<DocumentProps>,\\n    ) => {\\n      isDirty: () => boolean;\\n      updateContainer: (document: React.ReactElement<any>) => void;\\n      toBuffer: () => NodeJS.ReadableStream;\\n      toBlob: () => Blob;\\n      toString: () => string;\\n    };\\n\\n    const renderToStream: (\\n      document: React.ReactElement<DocumentProps>,\\n    ) => NodeJS.ReadableStream;\\n\\n    const renderToFile: (\\n      document: React.ReactElement<DocumentProps>,\\n      filePath: string,\\n      callback?: (output: NodeJS.ReadableStream, filePath: string) => any,\\n    ) => Promise<NodeJS.ReadableStream>;\\n\\n    const render: typeof renderToFile;\\n  }\\n\\n  const Document: typeof ReactPDF.Document;\\n  const Page: typeof ReactPDF.Page;\\n  const View: typeof ReactPDF.View;\\n  const Image: typeof ReactPDF.Image;\\n  const Text: typeof ReactPDF.Text;\\n  const Link: typeof ReactPDF.Link;\\n  const Note: typeof ReactPDF.Note;\\n  const Font: typeof ReactPDF.Font;\\n  const StyleSheet: typeof ReactPDF.StyleSheet;\\n  const createInstance: typeof ReactPDF.createInstance;\\n  const PDFRenderer: typeof ReactPDF.PDFRenderer;\\n  const version: typeof ReactPDF.version;\\n  const pdf: typeof ReactPDF.pdf;\\n\\n  export default ReactPDF;\\n  export {\\n    Document,\\n    Page,\\n    View,\\n    Image,\\n    Text,\\n    Link,\\n    Note,\\n    Font,\\n    StyleSheet,\\n    createInstance,\\n    PDFRenderer,\\n    version,\\n    pdf,\\n  };\\n}\\n\\n[end of index.d.ts]\\n[start of index.js]\\n/* eslint react/prop-types: 0 */\\n/* eslint react/jsx-sort-props: 0 */\\n\\nimport React from 'react';\\nimport ReactPDF, {\\n  Document,\\n  Page,\\n  View,\\n  Text,\\n  StyleSheet,\\n} from '../../dist/react-pdf.es.js';\\n\\nconst styles = StyleSheet.create({\\n  select: {\\n    height: '9%',\\n    alignItems: 'center',\\n    flexDirection: 'row',\\n    paddingHorizontal: '30px',\\n  },\\n  bar: {\\n    flexGrow: 1,\\n    height: '10px',\\n    backgroundColor: 'gray',\\n  },\\n  barMiddle: {\\n    width: '50%',\\n    height: '100%',\\n    backgroundColor: 'lightgray',\\n    margin: 'auto',\\n  },\\n  knob: {\\n    alignItems: 'center',\\n    justifyContent: 'center',\\n    width: '20px',\\n    height: '20px',\\n    borderRadius: 10,\\n    borderWidth: 3,\\n    borderColor: 'orange',\\n    position: 'absolute',\\n    backgroundColor: 'white',\\n    fontSize: 8,\\n    top: -6,\\n  },\\n  text: {\\n    fontSize: 10,\\n  },\\n});\\n\\nconst Knob = ({ value }) => (\\n  <View style={[styles.knob, { left: `${value - 3}%` }]}>\\n    <Text style={{ fontSize: 8, marginTop: 4 }}>{value}</Text>\\n  </View>\\n);\\n\\nconst Select = props => (\\n  <View style={styles.select}>\\n    <Text style={[styles.text, { marginRight: '15px' }]}>0%</Text>\\n    <View style={styles.bar}>\\n      <View style={styles.barMiddle} />\\n      <Knob {...props} />\\n    </View>\\n    <Text style={[styles.text, { marginLeft: '15px' }]}>100%</Text>\\n  </View>\\n);\\n\\nconst doc = (\\n  <Document>\\n    <Page size=\\\"A5\\\">\\n      <Select value={0} />\\n      <Select value={10} />\\n      <Select value={20} />\\n      <Select value={30} />\\n      <Select value={40} />\\n      <Select value={50} />\\n      <Select value={60} />\\n      <Select value={70} />\\n      <Select value={80} />\\n      <Select value={90} />\\n      <Select value={100} />\\n    </Page>\\n  </Document>\\n);\\n\\nReactPDF.render(doc, `${__dirname}/output.pdf`);\\n\\n[end of index.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "dom.js",
        "node.js",
        "index.js",
        "index.d.ts",
        "index.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "bddefe10-f6bd-428e-a45e-6b56fa79e52d",
        "score": 0.01639344262295082,
        "payload": {
          "text": "/* eslint-disable no-unused-vars */\nimport React from 'react';\nimport warning from 'fbjs/lib/warning';\nimport { flatStyles } from './utils/styles';\nimport {\n  pdf,\n  View,\n  Text,\n  Link,\n  Page,\n  Font,\n  Note,\n  Image,\n  version,\n  StyleSheet,\n  PDFRenderer,\n  createInstance,\n  Document as PDFDocument,\n} from './index';\n\nexport const Document = ({ children, ...props }) => {\n  return <PDFDocument {...props}>{children}</PDFDocument>;\n};\n\nclass InternalBlobProvider extends React.PureComponent {\n  state = { blob: null, url: null, loading: true, error: null };\n\n  constructor(props) {\n    super(props);\n\n    // Create new root container for this render\n    this.instance = pdf();\n  }\n\n  componentDidMount() {\n    this.renderDocument();\n    this.onDocumentUpdate();\n  }\n\n  componentDidUpdate() {\n    this.renderDocument();\n\n    if (this.instance.isDirty() && !this.state.error) {\n      this.onDocumentUpdate();\n    }\n  }\n\n  renderDocument() {\n    this.instance.updateContainer(this.props.document);\n  }\n\n  onDocumentUpdate() {\n    const oldBlobUrl = this.state.url;\n\n    this.instance\n      .toBlob()\n      .then(blob => {\n        this.setState(\n          { blob, url: URL.createObjectURL(blob), loading: false },\n          () => URL.revokeObjectURL(oldBlobUrl),\n        );\n      })\n      .catch(error => {\n        this.setState({ error });\n        console.error(error);\n        throw error;\n      });\n  }\n\n  render() {\n    return this.props.children(this.state);\n  }\n}\n\nexport const BlobProvider = ({ document: doc, children }) => {\n  if (!doc) {\n    warning(false, 'You should pass a valid document to BlobProvider');\n    return null;\n  }\n\n  return <InternalBlobProvider document={doc}>{children}</InternalBlobProvider>;\n};\n\nexport const PDFViewer = ({ className, style, children, ...props }) => {\n  return (\n    <InternalBlobProvider document={children}>\n      {({ url }) => (\n        <iframe\n          className={className}\n          src={url}\n          style={Array.isArray(style) ? flatStyles(style) : style}\n          {...props}\n        />\n      )}\n    </InternalBlobProvider>\n  );\n};\n\nexport const PDFDownloadLink = ({\n  document: doc,\n  className,\n  style,\n  children,\n  fileName = 'document.pdf',\n}) => {\n  if (!doc) {\n    warning(false, 'You should pass a valid document to PDFDownloadLink');\n    return null;\n  }\n\n  const downloadOnIE = blob => () => {\n    if (window.navigator.msSaveBlob) {\n      window.navigator.msSaveBlob(blob, fileName);\n    }\n  };\n\n  return (\n    <InternalBlobProvider document={doc}>\n      {params => (\n        <a\n          className={className}\n          download={fileName}\n          href={params.url}\n          onClick={downloadOnIE(params.blob)}\n          style={Array.isArray(style) ? flatStyles(style) : style}\n        >\n          {typeof children === 'function' ? children(params) : children}\n        </a>\n      )}\n    </InternalBlobProvider>\n  );\n};\n\nexport {\n  pdf,\n  View,\n  Text,\n  Link,\n  Page,\n  Font,\n  Note,\n  Image,\n  version,\n  StyleSheet,\n  PDFRenderer,\n  createInstance,\n} from './index';\n\nexport default {\n  pdf,\n  View,\n  Text,\n  Link,\n  Page,\n  Font,\n  Note,\n  Image,\n  version,\n  Document,\n  PDFViewer,\n  StyleSheet,\n  PDFRenderer,\n  BlobProvider,\n  createInstance,\n  PDFDownloadLink,\n};\n",
          "filepath": "data/repos/diegomura/react-pdf-1.2/src/dom.js",
          "repo": "diegomura/react-pdf",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "d080ed1c-dd68-4ec5-869a-4b6224a51b01",
        "score": 0.016129032258064516,
        "payload": {
          "text": "import fs from 'fs';\nimport {\n  pdf,\n  View,\n  Text,\n  Link,\n  Page,\n  Font,\n  Note,\n  Image,\n  version,\n  Document,\n  StyleSheet,\n  PDFRenderer,\n  createInstance,\n} from './index';\n\nexport const renderToStream = function(element) {\n  return pdf(element).toBuffer();\n};\n\nexport const renderToFile = function(element, filePath, callback) {\n  const output = renderToStream(element);\n  const stream = fs.createWriteStream(filePath);\n\n  output.pipe(stream);\n\n  return new Promise((resolve, reject) => {\n    stream.on('finish', () => {\n      if (callback) callback(output, filePath);\n      resolve(output);\n    });\n    stream.on('error', reject);\n  });\n};\n\nconst throwEnvironmentError = name => {\n  throw new Error(\n    `${name} is a web specific API. Or you're either using this component on Node, or your bundler is not loading react-pdf from the appropiate web build.`,\n  );\n};\n\nexport const PDFViewer = () => {\n  throwEnvironmentError('PDFViewer');\n};\n\nexport const PDFDownloadLink = () => {\n  throwEnvironmentError('PDFDownloadLink');\n};\n\nexport const BlobProvider = () => {\n  throwEnvironmentError('BlobProvider');\n};\n\nexport const render = renderToFile;\n\nexport {\n  pdf,\n  View,\n  Text,\n  Link,\n  Page,\n  Font,\n  Note,\n  Image,\n  version,\n  Document,\n  StyleSheet,\n  PDFRenderer,\n  createInstance,\n} from './index';\n\nexport default {\n  pdf,\n  View,\n  Text,\n  Link,\n  Page,\n  Font,\n  Note,\n  Image,\n  version,\n  Document,\n  StyleSheet,\n  PDFRenderer,\n  PDFViewer,\n  BlobProvider,\n  PDFDownloadLink,\n  createInstance,\n  renderToStream,\n  renderToFile,\n  render,\n};\n",
          "filepath": "data/repos/diegomura/react-pdf-1.2/src/node.js",
          "repo": "diegomura/react-pdf",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "94955ffd-7f95-4ec5-89a0-56d4adaf9259",
        "score": 0.015873015873015872,
        "payload": {
          "text": "/* eslint react/prop-types: 0 */\n/* eslint react/jsx-sort-props: 0 */\n\nimport React from 'react';\nimport ReactPDF, {\n  Document,\n  Page,\n  View,\n  StyleSheet,\n} from '../../dist/react-pdf.es.js';\n\nconst styles = StyleSheet.create({\n  body: {\n    padding: 35,\n  },\n  content: {\n    padding: 20,\n    '@media max-width: 400': {\n      flexDirection: 'column',\n    },\n    '@media min-width: 400': {\n      flexDirection: 'row',\n    },\n  },\n  block: {\n    height: 150,\n    width: 150,\n    backgroundColor: 'red',\n  },\n});\n\nconst MediaComponent = () => (\n  <View style={styles.content}>\n    <View style={[styles.block, { backgroundColor: 'red' }]} />\n    <View style={[styles.block, { backgroundColor: 'green' }]} />\n  </View>\n);\n\nconst doc = (\n  <Document>\n    <Page style={styles.body} size={[500, 600]}>\n      <MediaComponent />\n    </Page>\n    <Page style={styles.body} size={[300, 600]}>\n      <MediaComponent />\n    </Page>\n  </Document>\n);\n\nReactPDF.render(doc, `${__dirname}/output.pdf`);\n",
          "filepath": "data/repos/diegomura/react-pdf-1.2/examples/mediaQueries/index.js",
          "repo": "diegomura/react-pdf",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "d3801cbf-c1aa-4fab-8f50-908d26ab9c19",
        "score": 0.015625,
        "payload": {
          "text": "/// <reference types=\"node\" />\n\ndeclare module '@react-pdf/renderer' {\n  import * as React from 'react';\n\n  namespace ReactPDF {\n    interface Style {\n      [property: string]: any;\n    }\n    interface Styles {\n      [key: string]: Style;\n    }\n    type Orientation = 'portrait' | 'landscape';\n\n    interface DocumentProps {\n      title?: string;\n      author?: string;\n      subject?: string;\n      keywords?: string;\n      creator?: string;\n      producer?: string;\n      onRender?: () => any;\n    }\n\n    /**\n     * This component represent the PDF document itself. It must be the root\n     * of your tree element structure, and under no circumstances should it be\n     * used as children of another react-pdf component. In addition, it should\n     * only have childs of type <Page />.\n     */\n    class Document extends React.Component<DocumentProps> {}\n\n    interface NodeProps {\n      style?: Style | Style[];\n      /**\n       * Render component in all wrapped pages.\n       * @see https://react-pdf.org/advanced#fixed-components\n       */\n      fixed?: boolean;\n      /**\n       * Force the wrapping algorithm to start a new page when rendering the\n       * element.\n       * @see https://react-pdf.org/advanced#page-breaks\n       */\n      break?: boolean;\n    }\n\n    interface PageProps extends NodeProps {\n      /**\n       * Enable page wrapping for this page.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      debug?: boolean;\n      size?: string | [number, number] | {width: number; height: number};\n      orientation?: Orientation;\n      ruler?: boolean;\n      rulerSteps?: number;\n      verticalRuler?: boolean;\n      verticalRulerSteps?: number;\n      horizontalRuler?: boolean;\n      horizontalRulerSteps?: number;\n    }\n\n    /**\n     * Represents single page inside the PDF document, or a subset of them if\n     * using the wrapping feature. A <Document /> can contain as many pages as\n     * you want, but ensure not rendering a page inside any component besides\n     * Document.\n     */\n    class Page extends React.Component<PageProps> {}\n\n    interface ViewProps extends NodeProps {\n      /**\n       * Enable/disable page wrapping for element.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      debug?: boolean;\n      render?: (props: {pageNumber: number}) => React.ReactNode;\n      children?: React.ReactNode;\n    }\n\n    /**\n     * The most fundamental component for building a UI and is designed to be\n     * nested inside other views and can have 0 to many children.\n     */\n    class View extends React.Component<ViewProps> {}\n\n    interface ImageProps extends NodeProps {\n      debug?: boolean;\n      src: string | {data: Buffer; format: 'png' | 'jpg'};\n      cache?: boolean;\n    }\n\n    /**\n     * A React component for displaying network or local (Node only) JPG or\n     * PNG images, as well as base64 encoded image strings.\n     */\n    class Image extends React.Component<ImageProps> {}\n\n    interface TextProps extends NodeProps {\n      /**\n       * Enable/disable page wrapping for element.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      debug?: boolean;\n      render?: (\n        props: {pageNumber: number; totalPages: number},\n      ) => React.ReactNode;\n      children?: React.ReactNode;\n      /**\n       * How much hyphenated breaks should be avoided.\n       */\n      hyphenationCallback?: number;\n    }\n\n    /**\n     * A React component for displaying text. Text supports nesting of other\n     * Text or Link components to create inline styling.\n     */\n    class Text extends React.Component<TextProps> {}\n\n    interface LinkProps extends NodeProps {\n      /**\n       * Enable/disable page wrapping for element.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      debug?: boolean;\n      src: string;\n      children?: React.ReactNode;\n    }\n\n    /**\n     * A React component for displaying an hyperlink. Link\u2019s can be nested\n     * inside a Text component, or being inside any other valid primitive.\n     */\n    class Link extends React.Component<LinkProps> {}\n\n    interface NoteProps extends NodeProps {\n      children: string;\n    }\n\n    class Note extends React.Component<NoteProps> {}\n\n    interface BlobProviderParams {\n      blob: Blob | null;\n      url: string | null;\n      loading: boolean;\n      error: Error | null;\n    }\n    interface BlobProviderProps {\n      document: React.ReactElement<DocumentProps>;\n      children: (params: BlobProviderParams) => React.ReactNode;\n    }\n\n    /**\n     * Easy and declarative way of getting document's blob data without\n     * showing it on screen.\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\n     * @platform web\n     */\n    class BlobProvider extends React.Component<BlobProviderProps> {}\n\n    interface PDFViewerProps {\n      width?: number;\n      height?: number;\n      style?: Style | Style[];\n      className?: string;\n      children?: React.ReactElement<DocumentProps>;\n    }\n\n    /**\n     * Iframe PDF viewer for client-side generated documents.\n     * @platform web\n     */\n    class PDFViewer extends React.Component<PDFViewerProps> {}\n\n    interface PDFDownloadLinkProps {\n      document: React.ReactElement<DocumentProps>;\n      fileName?: string;\n      style?: Style | Style[];\n      className?: string;\n      children?:\n        | React.ReactNode\n        | ((params: BlobProviderParams) => React.ReactNode);\n    }\n\n    /**\n     * Anchor tag to enable generate and download PDF documents on the fly.\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\n     * @platform web\n     */\n    class PDFDownloadLink extends React.Component<PDFDownloadLinkProps> {}\n\n    interface EmojiSource {\n      url: string;\n      format: string;\n    }\n    interface RegisteredFont {\n      src: string;\n      loaded: boolean;\n      loading: boolean;\n      data: any;\n      [key: string]: any;\n    }\n    type HyphenationCallback = (\n      words: string[],\n      glyphString: {[key: string]: any},\n    ) => string[];\n\n    const Font: {\n      register: (\n        src: string,\n        options: {family: string; [key: string]: any},\n      ) => void;\n      getEmojiSource: () => EmojiSource;\n      getRegisteredFonts: () => string[];\n      registerEmojiSource: (emojiSource: EmojiSource) => void;\n      registerHyphenationCallback: (\n        hyphenationCallback: HyphenationCallback,\n      ) => void;\n      getHyphenationCallback: () => HyphenationCallback;\n      getFont: (fontFamily: string) => RegisteredFont | undefined;\n      load: (\n        fontFamily: string,\n        document: React.ReactElement<DocumentProps>,\n      ) => Promise<void>;\n      clear: () => void;\n      reset: () => void;\n    };\n\n    const StyleSheet: {\n      hairlineWidth: number;\n      create: <TStyles>(styles: TStyles) => TStyles;\n      resolve: (\n        style: Style,\n        container: {\n          width: number;\n          height: number;\n          orientation: Orientation;\n        },\n      ) => Style;\n      flatten: (...style: (Style[] | Style | undefined)[]) => Style\n      absoluteFillObject: {\n        position: 'absolute';\n        left: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n      };\n    };\n\n    const version: any;\n\n    const PDFRenderer: any;\n\n    const createInstance: (\n      element: {\n        type: string;\n        props: {[key: string]: any};\n      },\n      root?: any,\n    ) => any;\n\n    const pdf: (\n      document: React.ReactElement<DocumentProps>,\n    ) => {\n      isDirty: () => boolean;\n      updateContainer: (document: React.ReactElement<any>) => void;\n      toBuffer: () => NodeJS.ReadableStream;\n      toBlob: () => Blob;\n      toString: () => string;\n    };\n\n    const renderToStream: (\n      document: React.ReactElement<DocumentProps>,\n    ) => NodeJS.ReadableStream;\n\n    const renderToFile: (\n      document: React.ReactElement<DocumentProps>,\n      filePath: string,\n      callback?: (output: NodeJS.ReadableStream, filePath: string) => any,\n    ) => Promise<NodeJS.ReadableStream>;\n\n    const render: typeof renderToFile;\n  }\n\n  const Document: typeof ReactPDF.Document;\n  const Page: typeof ReactPDF.Page;\n  const View: typeof ReactPDF.View;\n  const Image: typeof ReactPDF.Image;\n  const Text: typeof ReactPDF.Text;\n  const Link: typeof ReactPDF.Link;\n  const Note: typeof ReactPDF.Note;\n  const Font: typeof ReactPDF.Font;\n  const StyleSheet: typeof ReactPDF.StyleSheet;\n  const createInstance: typeof ReactPDF.createInstance;\n  const PDFRenderer: typeof ReactPDF.PDFRenderer;\n  const version: typeof ReactPDF.version;\n  const pdf: typeof ReactPDF.pdf;\n\n  export default ReactPDF;\n  export {\n    Document,\n    Page,\n    View,\n    Image,\n    Text,\n    Link,\n    Note,\n    Font,\n    StyleSheet,\n    createInstance,\n    PDFRenderer,\n    version,\n    pdf,\n  };\n}\n",
          "filepath": "data/repos/diegomura/react-pdf-1.2/index.d.ts",
          "repo": "diegomura/react-pdf",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "56a9456c-b09b-4e22-b4c3-2fbb9b4a5f6f",
        "score": 0.015384615384615385,
        "payload": {
          "text": "/* eslint react/prop-types: 0 */\n/* eslint react/jsx-sort-props: 0 */\n\nimport React from 'react';\nimport ReactPDF, {\n  Document,\n  Page,\n  View,\n  Text,\n  StyleSheet,\n} from '../../dist/react-pdf.es.js';\n\nconst styles = StyleSheet.create({\n  select: {\n    height: '9%',\n    alignItems: 'center',\n    flexDirection: 'row',\n    paddingHorizontal: '30px',\n  },\n  bar: {\n    flexGrow: 1,\n    height: '10px',\n    backgroundColor: 'gray',\n  },\n  barMiddle: {\n    width: '50%',\n    height: '100%',\n    backgroundColor: 'lightgray',\n    margin: 'auto',\n  },\n  knob: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '20px',\n    height: '20px',\n    borderRadius: 10,\n    borderWidth: 3,\n    borderColor: 'orange',\n    position: 'absolute',\n    backgroundColor: 'white',\n    fontSize: 8,\n    top: -6,\n  },\n  text: {\n    fontSize: 10,\n  },\n});\n\nconst Knob = ({ value }) => (\n  <View style={[styles.knob, { left: `${value - 3}%` }]}>\n    <Text style={{ fontSize: 8, marginTop: 4 }}>{value}</Text>\n  </View>\n);\n\nconst Select = props => (\n  <View style={styles.select}>\n    <Text style={[styles.text, { marginRight: '15px' }]}>0%</Text>\n    <View style={styles.bar}>\n      <View style={styles.barMiddle} />\n      <Knob {...props} />\n    </View>\n    <Text style={[styles.text, { marginLeft: '15px' }]}>100%</Text>\n  </View>\n);\n\nconst doc = (\n  <Document>\n    <Page size=\"A5\">\n      <Select value={0} />\n      <Select value={10} />\n      <Select value={20} />\n      <Select value={30} />\n      <Select value={40} />\n      <Select value={50} />\n      <Select value={60} />\n      <Select value={70} />\n      <Select value={80} />\n      <Select value={90} />\n      <Select value={100} />\n    </Page>\n  </Document>\n);\n\nReactPDF.render(doc, `${__dirname}/output.pdf`);\n",
          "filepath": "data/repos/diegomura/react-pdf-1.2/examples/knobs/index.js",
          "repo": "diegomura/react-pdf",
          "version": "1.2",
          "chunk_index": 0
        }
      }
    ]
  }
]