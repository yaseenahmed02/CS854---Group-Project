[
  {
    "instance_id": "markedjs__marked-1262",
    "model_patch": "diff --git a/marked.js b/marked.js\nindex 7e4c3f2..d3f4e5b 100644\n--- a/marked.js\n+++ b/marked.js\n@@ -257,7 +257,7 @@ Parser.prototype.tok = function() {\n         flags = { header: true, align: this.token.align[i] };\n         cell += this.renderer.tablecell(\n           this.inline.output(this.token.header[i]),\n-          { header: true, align: this.token.align[i] }\n+          flags\n         );\n       }\n       header += this.renderer.tablerow(cell);\n@@ -266,7 +266,7 @@ Parser.prototype.tok = function() {\n         cell = '';\n         for (j = 0; j < row.length; j++) {\n           cell += this.renderer.tablecell(\n-            this.inline.output(row[j]),\n+            this.inline.output(row[j] || ''),\n             { header: false, align: this.token.align[j] }\n           );\n         }",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 191.04,
      "issue_embedding_time_ms": 191.04,
      "retrieval_time_ms_jina": 1.29,
      "retrieval_time_ms": 1.29,
      "total_retrieval_time_ms": 192.33,
      "generation_time_ms": 3208.61,
      "total_io_time_ms": 3400.94,
      "input_total_token_limit": null,
      "issue_text_tokens": 334,
      "vlm_tokens": 0,
      "retrieved_tokens": 13196,
      "prompt_template_tokens": 505,
      "total_input_prompt_tokens": 14035,
      "output_generated_tokens": 215,
      "total_io_tokens": 14250,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\ntable render error\\nThis markdown \\r\\n\\r\\n```\\r\\n| \\u53c2\\u6570 | \\u8bf4\\u660e | \\u7c7b\\u578b | \\u53ef\\u9009\\u503c | \\u9ed8\\u8ba4\\u503c |\\r\\n| --- | --- | --- | --- | --- |\\r\\n| itemRender | \\u81ea\\u5b9a\\u4e49\\u94fe\\u63a5\\u51fd\\u6570\\uff0c\\u548c react-router \\u914d\\u7f6e\\u4f7f\\u7528 | (route, params, routes, paths) => ReactNode |  | - |\\r\\n| params | \\u8def\\u7531\\u7684\\u53c2\\u6570 | object |  | - |\\r\\n| routes | router \\u7684\\u8def\\u7531\\u6808\\u4fe1\\u606f | object\\\\[] |  | - |\\r\\n| separator | \\u5206\\u9694\\u7b26\\u81ea\\u5b9a\\u4e49 | string\\\\|ReactNode |  | '/' |\\r\\n```\\r\\n\\r\\nWill be rendered by `Marked` as ( **Marked Version** : 0.4.0 )\\r\\n\\r\\n<img width=\\\"783\\\" alt=\\\"screen shot 2018-06-11 at 8 56 07 pm\\\" src=\\\"https://user-images.githubusercontent.com/2193211/41232736-e1a5fd5a-6db9-11e8-9f18-0b0ac28e018f.png\\\">\\r\\n\\r\\n\\r\\nActually it should be\\r\\n\\r\\n| \\u53c2\\u6570 | \\u8bf4\\u660e | \\u7c7b\\u578b | \\u53ef\\u9009\\u503c | \\u9ed8\\u8ba4\\u503c |\\r\\n| --- | --- | --- | --- | --- |\\r\\n| itemRender | \\u81ea\\u5b9a\\u4e49\\u94fe\\u63a5\\u51fd\\u6570\\uff0c\\u548c react-router \\u914d\\u7f6e\\u4f7f\\u7528 | (route, params, routes, paths) => ReactNode |  | - |\\r\\n| params | \\u8def\\u7531\\u7684\\u53c2\\u6570 | object |  | - |\\r\\n| routes | router \\u7684\\u8def\\u7531\\u6808\\u4fe1\\u606f | object\\\\[] |  | - |\\r\\n| separator | \\u5206\\u9694\\u7b26\\u81ea\\u5b9a\\u4e49 | string\\\\|ReactNode |  | '/' |\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of marked.js]\\n */\\n\\nParser.prototype.next = function() {\\n  return this.token = this.tokens.pop();\\n};\\n\\n/**\\n * Preview Next Token\\n */\\n\\nParser.prototype.peek = function() {\\n  return this.tokens[this.tokens.length - 1] || 0;\\n};\\n\\n/**\\n * Parse Text Tokens\\n */\\n\\nParser.prototype.parseText = function() {\\n  var body = this.token.text;\\n\\n  while (this.peek().type === 'text') {\\n    body += '\\\\n' + this.next().text;\\n  }\\n\\n  return this.inline.output(body);\\n};\\n\\n/**\\n * Parse Current Token\\n */\\n\\nParser.prototype.tok = function() {\\n  switch (this.token.type) {\\n    case 'space': {\\n      return '';\\n    }\\n    case 'hr': {\\n      return this.renderer.hr();\\n    }\\n    case 'heading': {\\n      return this.renderer.heading(\\n        this.inline.output(this.token.text),\\n        this.token.depth,\\n        this.token.text,\\n        this.options\\n      );\\n    }\\n    case 'code': {\\n      return this.renderer.code(this.token.text,\\n        this.token.lang,\\n        this.token.escaped,\\n        this.options);\\n    }\\n    case 'table': {\\n      var header = ''\\n        , body = ''\\n        , i\\n        , row\\n        , cell\\n        , flags\\n        , j;\\n\\n      // header\\n      cell = '';\\n      for (i = 0; i < this.token.header.length; i++) {\\n        flags = { header: true, align: this.token.align[i] };\\n        cell += this.renderer.tablecell(\\n          this.inline.output(this.token.header[i]),\\n          { header: true, align: this.token.align[i] }\\n        );\\n      }\\n      header += this.renderer.tablerow(cell);\\n\\n      for (i = 0; i < this.token.cells.length; i++) {\\n        row = this.token.cells[i];\\n\\n        cell = '';\\n        for (j = 0; j < row.length; j++) {\\n          cell += this.renderer.tablecell(\\n            this.inline.output(row[j]),\\n            { header: false, align: this.token.align[j] }\\n          );\\n        }\\n\\n        body += this.renderer.tablerow(cell);\\n      }\\n      return this.renderer.table(header, body);\\n    }\\n    case 'blockquote_start': {\\n      var body = '';\\n\\n      while (this.next().type !== 'blockquote_end') {\\n        body += this.tok();\\n      }\\n\\n      return this.renderer.blockquote(body);\\n    }\\n    case 'list_start': {\\n      var body = ''\\n        , ordered = this.token.ordered;\\n\\n      while (this.next().type !== 'list_end') {\\n        body += this.tok();\\n      }\\n\\n      return this.renderer.list(body, ordered);\\n    }\\n    case 'list_item_start': {\\n      var body = '';\\n\\n      while (this.next().type !== 'list_item_end') {\\n        body += this.token.type === 'text'\\n          ? this.parseText()\\n          : this.tok();\\n      }\\n\\n      return this.renderer.listitem(body);\\n    }\\n    case 'loose_item_start': {\\n      var body = '';\\n\\n      while (this.next().type !== 'list_item_end') {\\n        body += this.tok();\\n      }\\n\\n      return this.renderer.listitem(body);\\n    }\\n    case 'html': {\\n      var html = !this.token.pre && !this.options.pedantic\\n        ? this.inline.output(this.token.text)\\n        : this.token.text;\\n      return this.renderer.html(html);\\n    }\\n    case 'paragraph': {\\n      return this.renderer.paragraph(this.inline.output(this.token.text));\\n    }\\n    case 'text': {\\n      return this.renderer.paragraph(this.parseText());\\n    }\\n  }\\n};\\n\\n/**\\n * Helpers\\n */\\n\\nfunction escape(html, encode) {\\n  return html\\n    .replace(!encode ? /&(?!#?\\\\w+;)/g : /&/g, '&amp;')\\n    .replace(/</g, '&lt;')\\n    .replace(/>/g, '&gt;')\\n    .replace(/\\\"/g, '&quot;')\\n    .replace(/'/g, '&#39;');\\n}\\n\\nfunction replace(regex, opt) {\\n  regex = regex.source;\\n  opt = opt || '';\\n  return function self(name, val) {\\n    if (!name) return new RegExp(regex, opt);\\n    val = val.source || val;\\n    val = val.replace(/(^|[^\\\\[])\\\\^/g, '$1');\\n    regex = regex.replace(name, val);\\n    return self;\\n  };\\n}\\n\\nfunction noop() {}\\nnoop.exec = noop;\\n\\nfunction merge(obj) {\\n  var i = 1\\n    , target\\n    , key;\\n\\n  for (; i < arguments.length; i++) {\\n    target = arguments[i];\\n    for (key in target) {\\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\\n        obj[key] = target[key];\\n      }\\n    }\\n  }\\n\\n  return obj;\\n}\\n\\n\\n/**\\n * Marked\\n */\\n\\nfunction marked(src, opt, callback) {\\n  if (callback || typeof opt === 'function') {\\n    if (!callback) {\\n      callback = opt;\\n      opt = null;\\n    }\\n\\n    opt = merge({}, marked.defaults, opt || {});\\n\\n    var highlight = opt.highlight\\n      , tokens\\n      , pending\\n      , i = 0;\\n\\n    try {\\n      tokens = Lexer.lex(src, opt)\\n    } catch (e) {\\n      return callback(e);\\n    }\\n\\n    pending = tokens.length;\\n\\n    var done = function() {\\n      var out, err;\\n\\n      try {\\n        out = Parser.parse(tokens, opt);\\n      } catch (e) {\\n        err = e;\\n      }\\n\\n      opt.highlight = highlight;\\n\\n      return err\\n        ? callback(err)\\n        : callback(null, out);\\n    };\\n\\n    if (!highlight || highlight.length < 3) {\\n      return done();\\n    }\\n\\n    delete opt.highlight;\\n\\n    if (!pending) return done();\\n\\n    for (; i < tokens.length; i++) {\\n      (function(token) {\\n        if (token.type !== 'code') {\\n          return --pending || done();\\n        }\\n        return highlight(token.text, token.lang, function(err, code) {\\n          if (code == null || code === token.text) {\\n            return --pending || done();\\n          }\\n          token.text = code;\\n          token.escaped = true;\\n          --pending || done();\\n        });\\n      })(tokens[i]);\\n    }\\n\\n    return;\\n  }\\n  try {\\n    if (opt) opt = merge({}, marked.defaults, opt);\\n    return Parser.parse(Lexer.lex(src, opt), opt);\\n  } catch (e) {\\n    e.message += '\\\\nPlease report this to https://github.com/chjj/marked.';\\n    if ((opt || marked.defaults).silent) {\\n      return '<p>An error occured:</p><pre>'\\n        + escape(e.message + '', true)\\n        + '</pre>';\\n    }\\n    throw e;\\n  }\\n}\\n\\n/**\\n * Options\\n */\\n\\nmarked.options =\\nmarked.setOptions = function(opt) {\\n  merge(marked.defaults, opt);\\n  return marked;\\n};\\n\\nmarked.defaults = {\\n  gfm: true,\\n  tables: true,\\n  breaks: false,\\n  pedantic: false,\\n  sanitize: false,\\n  smartLists: false,\\n  silent: false,\\n  highlight: null,\\n  langPrefix: 'lang-',\\n  smartypants: false,\\n  headerPrefix: '',\\n  renderer: new Renderer\\n};\\n\\n/**\\n * Expose\\n */\\n\\nmarked.Parser = Parser;\\nmarked.parser = Parser.parse;\\n\\nmarked.Renderer = Renderer;\\n\\nmarked.Lexer = Lexer;\\nmarked.lexer = Lexer.lex;\\n\\nmarked.InlineLexer = InlineLexer;\\nmarked.inlineLexer = InlineLexer.output;\\n\\nmarked.parse = marked;\\n\\nif (typeof exports === 'object') {\\n  module.exports = marked;\\n} else if (typeof define === 'function' && define.amd) {\\n  define(function() { return marked; });\\n} else {\\n  this.marked = marked;\\n}\\n\\n}).call(function() {\\n  return this || (typeof window !== 'undefined' ? window : global);\\n}());\\n[end of marked.js]\\n[start of marked.js]\\n/**\\n * marked - a markdown parser\\n * Copyright (c) 2011-2013, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/chjj/marked\\n */\\n\\n;(function() {\\n\\n/**\\n * Block-Level Grammar\\n */\\n\\nvar block = {\\n  newline: /^\\\\n+/,\\n  code: /^( {4}[^\\\\n]+\\\\n*)+/,\\n  fences: noop,\\n  hr: /^( *[-*_]){3,} *(?:\\\\n+|$)/,\\n  heading: /^ *(#{1,6}) *([^\\\\n]+?) *#* *(?:\\\\n+|$)/,\\n  nptable: noop,\\n  lheading: /^([^\\\\n]+)\\\\n *(=|-){2,} *(?:\\\\n+|$)/,\\n  blockquote: /^( *>[^\\\\n]+(\\\\n[^\\\\n]+)*\\\\n*)+/,\\n  list: /^( *)(bull) [\\\\s\\\\S]+?(?:hr|\\\\n{2,}(?! )(?!\\\\1bull )\\\\n*|\\\\s*$)/,\\n  html: /^ *(?:comment|closed|closing) *(?:\\\\n{2,}|\\\\s*$)/,\\n  def: /^ *\\\\[([^\\\\]]+)\\\\]: *<?([^\\\\s>]+)>?(?: +[\\\"(]([^\\\\n]+)[\\\")])? *(?:\\\\n+|$)/,\\n  table: noop,\\n  paragraph: /^((?:[^\\\\n]+\\\\n?(?!hr|heading|lheading|blockquote|tag|def))+)\\\\n*/,\\n  text: /^[^\\\\n]+/\\n};\\n\\nblock.bullet = /(?:[*+-]|\\\\d+\\\\.)/;\\nblock.item = /^( *)(bull) [^\\\\n]*(?:\\\\n(?!\\\\1bull )[^\\\\n]*)*/;\\nblock.item = replace(block.item, 'gm')\\n  (/bull/g, block.bullet)\\n  ();\\n\\nblock.list = replace(block.list)\\n  (/bull/g, block.bullet)\\n  ('hr', /\\\\n+(?=(?: *[-*_]){3,} *(?:\\\\n+|$))/)\\n  ();\\n\\nblock._tag = '(?!(?:'\\n  + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code'\\n  + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo'\\n  + '|span|br|wbr|ins|del|img)\\\\\\\\b)\\\\\\\\w+(?!:/|@)\\\\\\\\b';\\n\\nblock.html = replace(block.html)\\n  ('comment', /<!--[\\\\s\\\\S]*?-->/)\\n  ('closed', /<(tag)[\\\\s\\\\S]+?<\\\\/\\\\1>/)\\n  ('closing', /<tag(?:\\\"[^\\\"]*\\\"|'[^']*'|[^'\\\">])*?>/)\\n  (/tag/g, block._tag)\\n  ();\\n\\nblock.paragraph = replace(block.paragraph)\\n  ('hr', block.hr)\\n  ('heading', block.heading)\\n  ('lheading', block.lheading)\\n  ('blockquote', block.blockquote)\\n  ('tag', '<' + block._tag)\\n  ('def', block.def)\\n  ();\\n\\n/**\\n * Normal Block Grammar\\n */\\n\\nblock.normal = merge({}, block);\\n\\n/**\\n * GFM Block Grammar\\n */\\n\\nblock.gfm = merge({}, block.normal, {\\n  fences: /^ *(`{3,}|~{3,}) *(\\\\S+)? *\\\\n([\\\\s\\\\S]+?)\\\\s*\\\\1 *(?:\\\\n+|$)/,\\n  paragraph: /^/\\n});\\n\\nblock.gfm.paragraph = replace(block.paragraph)\\n  ('(?!', '(?!'\\n    + block.gfm.fences.source.replace('\\\\\\\\1', '\\\\\\\\2') + '|'\\n    + block.list.source.replace('\\\\\\\\1', '\\\\\\\\3') + '|')\\n  ();\\n\\n/**\\n * GFM + Tables Block Grammar\\n */\\n\\nblock.tables = merge({}, block.gfm, {\\n  nptable: /^ *(\\\\S.*\\\\|.*)\\\\n *([-:]+ *\\\\|[-| :]*)\\\\n((?:.*\\\\|.*(?:\\\\n|$))*)\\\\n*/,\\n  table: /^ *\\\\|(.+)\\\\n *\\\\|( *[-:]+[-| :]*)\\\\n((?: *\\\\|.*(?:\\\\n|$))*)\\\\n*/\\n});\\n\\n/**\\n * Block Lexer\\n */\\n\\nfunction Lexer(options) {\\n  this.tokens = [];\\n  this.tokens.links = {};\\n  this.options = options || marked.defaults;\\n  this.rules = block.normal;\\n\\n  if (this.options.gfm) {\\n    if (this.options.tables) {\\n      this.rules = block.tables;\\n    } else {\\n      this.rules = block.gfm;\\n    }\\n  }\\n}\\n\\n/**\\n * Expose Block Rules\\n */\\n\\nLexer.rules = block;\\n\\n/**\\n * Static Lex Method\\n */\\n\\nLexer.lex = function(src, options) {\\n  var lexer = new Lexer(options);\\n  return lexer.lex(src);\\n};\\n\\n/**\\n * Preprocessing\\n */\\n\\nLexer.prototype.lex = function(src) {\\n  src = src\\n    .replace(/\\\\r\\\\n|\\\\r/g, '\\\\n')\\n    .replace(/\\\\t/g, '    ')\\n    .replace(/\\\\u00a0/g, ' ')\\n    .replace(/\\\\u2424/g, '\\\\n');\\n\\n  return this.token(src, true);\\n};\\n\\n/**\\n * Lexing\\n */\\n\\nLexer.prototype.token = function(src, top) {\\n  var src = src.replace(/^ +$/gm, '')\\n    , next\\n    , loose\\n    , cap\\n    , bull\\n    , b\\n    , item\\n    , space\\n    , i\\n    , l;\\n\\n  while (src) {\\n    // newline\\n    if (cap = this.rules.newline.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      if (cap[0].length > 1) {\\n        this.tokens.push({\\n          type: 'space'\\n        });\\n      }\\n    }\\n\\n    // code\\n    if (cap = this.rules.code.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      cap = cap[0].replace(/^ {4}/gm, '');\\n      this.tokens.push({\\n        type: 'code',\\n        text: !this.options.pedantic\\n          ? cap.replace(/\\\\n+$/, '')\\n          : cap\\n      });\\n      continue;\\n    }\\n\\n    // fences (gfm)\\n    if (cap = this.rules.fences.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      this.tokens.push({\\n        type: 'code',\\n        lang: cap[2],\\n        text: cap[3]\\n      });\\n      continue;\\n    }\\n\\n    // heading\\n    if (cap = this.rules.heading.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      this.tokens.push({\\n        type: 'heading',\\n        depth: cap[1].length,\\n        text: cap[2]\\n      });\\n      continue;\\n    }\\n\\n    // table no leading pipe (gfm)\\n    if (top && (cap = this.rules.nptable.exec(src))) {\\n      src = src.substring(cap[0].length);\\n\\n      item = {\\n        type: 'table',\\n        header: cap[1].replace(/^ *| *\\\\| *$/g, '').split(/ *\\\\| */),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        cells: cap[3].replace(/\\\\n$/, '').split('\\\\n')\\n      };\\n\\n      for (i = 0; i < item.align.length; i++) {\\n        if (/^ *-+: *$/.test(item.align[i])) {\\n          item.align[i] = 'right';\\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\\n          item.align[i] = 'center';\\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\\n          item.align[i] = 'left';\\n        } else {\\n          item.align[i] = null;\\n        }\\n      }\\n\\n      for (i = 0; i < item.cells.length; i++) {\\n        item.cells[i] = item.cells[i].split(/ *\\\\| */);\\n      }\\n\\n      this.tokens.push(item);\\n\\n      continue;\\n    }\\n\\n    // lheading\\n    if (cap = this.rules.lheading.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      this.tokens.push({\\n        type: 'heading',\\n        depth: cap[2] === '=' ? 1 : 2,\\n        text: cap[1]\\n      });\\n      continue;\\n    }\\n\\n    // hr\\n    if (cap = this.rules.hr.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      this.tokens.push({\\n        type: 'hr'\\n      });\\n      continue;\\n    }\\n\\n    // blockquote\\n    if (cap = this.rules.blockquote.exec(src)) {\\n      src = src.substring(cap[0].length);\\n\\n      this.tokens.push({\\n        type: 'blockquote_start'\\n      });\\n\\n      cap = cap[0].replace(/^ *> ?/gm, '');\\n\\n      // Pass `top` to keep the current\\n      // \\\"toplevel\\\" state. This is exactly\\n      // how markdown.pl works.\\n      this.token(cap, top);\\n\\n      this.tokens.push({\\n        type: 'blockquote_end'\\n      });\\n\\n      continue;\\n    }\\n\\n    // list\\n    if (cap = this.rules.list.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      bull = cap[2];\\n\\n      this.tokens.push({\\n        type: 'list_start',\\n        ordered: bull.length > 1\\n      });\\n\\n      // Get each top-level item.\\n      cap = cap[0].match(this.rules.item);\\n\\n      next = false;\\n      l = cap.length;\\n      i = 0;\\n\\n      for (; i < l; i++) {\\n        item = cap[i];\\n\\n        // Remove the list item's bullet\\n        // so it is seen as the next token.\\n        space = item.length;\\n        item = item.replace(/^ *([*+-]|\\\\d+\\\\.) +/, '');\\n\\n        // Outdent whatever the\\n        // list item contains. Hacky.\\n        if (~item.indexOf('\\\\n ')) {\\n          space -= item.length;\\n          item = !this.options.pedantic\\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\\n            : item.replace(/^ {1,4}/gm, '');\\n        }\\n\\n        // Determine whether the next list item belongs here.\\n        // Backpedal if it does not belong in this list.\\n        if (this.options.smartLists && i !== l - 1) {\\n          b = block.bullet.exec(cap[i + 1])[0];\\n          if (bull !== b && !(bull.length > 1 && b.length > 1)) {\\n            src = cap.slice(i + 1).join('\\\\n') + src;\\n            i = l - 1;\\n          }\\n        }\\n\\n        // Determine whether item is loose or not.\\n        // Use: /(^|\\\\n)(?! )[^\\\\n]+\\\\n\\\\n(?!\\\\s*$)/\\n        // for discount behavior.\\n        loose = next || /\\\\n\\\\n(?!\\\\s*$)/.test(item);\\n        if (i !== l - 1) {\\n          next = item.charAt(item.length - 1) === '\\\\n';\\n          if (!loose) loose = next;\\n        }\\n\\n        this.tokens.push({\\n          type: loose\\n            ? 'loose_item_start'\\n            : 'list_item_start'\\n        });\\n\\n        // Recurse.\\n        this.token(item, false);\\n\\n        this.tokens.push({\\n          type: 'list_item_end'\\n        });\\n      }\\n\\n      this.tokens.push({\\n        type: 'list_end'\\n      });\\n\\n      continue;\\n    }\\n\\n    // html\\n    if (cap = this.rules.html.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      this.tokens.push({\\n        type: this.options.sanitize\\n          ? 'paragraph'\\n          : 'html',\\n        pre: cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style',\\n        text: cap[0]\\n      });\\n      continue;\\n    }\\n\\n    // def\\n    if (top && (cap = this.rules.def.exec(src))) {\\n      src = src.substring(cap[0].length);\\n      this.tokens.links[cap[1].toLowerCase()] = {\\n        href: cap[2],\\n        title: cap[3]\\n      };\\n      continue;\\n    }\\n\\n    // table (gfm)\\n    if (top && (cap = this.rules.table.exec(src))) {\\n      src = src.substring(cap[0].length);\\n\\n      item = {\\n        type: 'table',\\n        header: cap[1].replace(/^ *| *\\\\| *$/g, '').split(/ *\\\\| */),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        cells: cap[3].replace(/(?: *\\\\| *)?\\\\n$/, '').split('\\\\n')\\n      };\\n\\n      for (i = 0; i < item.align.length; i++) {\\n        if (/^ *-+: *$/.test(item.align[i])) {\\n          item.align[i] = 'right';\\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\\n          item.align[i] = 'center';\\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\\n          item.align[i] = 'left';\\n        } else {\\n          item.align[i] = null;\\n        }\\n      }\\n\\n      for (i = 0; i < item.cells.length; i++) {\\n        item.cells[i] = item.cells[i]\\n          .replace(/^ *\\\\| *| *\\\\| *$/g, '')\\n          .split(/ *\\\\| */);\\n      }\\n\\n      this.tokens.push(item);\\n\\n      continue;\\n    }\\n\\n    // top-level paragraph\\n    if (top && (cap = this.rules.paragraph.exec(src))) {\\n      src = src.substring(cap[0].length);\\n      this.tokens.push({\\n        type: 'paragraph',\\n        text: cap[1].charAt(cap[1].length - 1) === '\\\\n'\\n          ? cap[1].slice(0, -1)\\n          : cap[1]\\n      });\\n      continue;\\n    }\\n\\n    // text\\n    if (cap = this.rules.text.exec(src)) {\\n      // Top-level should never reach here.\\n      src = src.substring(cap[0].length);\\n      this.tokens.push({\\n        type: 'text',\\n        text: cap[0]\\n      });\\n      continue;\\n    }\\n\\n    if (src) {\\n      throw new\\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\\n    }\\n  }\\n\\n  return this.tokens;\\n};\\n\\n/**\\n * Inline-Level Grammar\\n */\\n\\nvar inline = {\\n  escape: /^\\\\\\\\([\\\\\\\\`*{}\\\\[\\\\]()#+\\\\-.!_>])/,\\n  autolink: /^<([^ >]+(@|:\\\\/)[^ >]+)>/,\\n  url: noop,\\n  tag: /^<!--[\\\\s\\\\S]*?-->|^<\\\\/?\\\\w+(?:\\\"[^\\\"]*\\\"|'[^']*'|[^'\\\">])*?>/,\\n  link: /^!?\\\\[(inside)\\\\]\\\\(href\\\\)/,\\n  reflink: /^!?\\\\[(inside)\\\\]\\\\s*\\\\[([^\\\\]]*)\\\\]/,\\n  nolink: /^!?\\\\[((?:\\\\[[^\\\\]]*\\\\]|[^\\\\[\\\\]])*)\\\\]/,\\n  strong: /^__([\\\\s\\\\S]+?)__(?!_)|^\\\\*\\\\*([\\\\s\\\\S]+?)\\\\*\\\\*(?!\\\\*)/,\\n  em: /^\\\\b_((?:__|[\\\\s\\\\S])+?)_\\\\b|^\\\\*((?:\\\\*\\\\*|[\\\\s\\\\S])+?)\\\\*(?!\\\\*)/,\\n  code: /^(`+)\\\\s*([\\\\s\\\\S]*?[^`])\\\\s*\\\\1(?!`)/,\\n  br: /^ {2,}\\\\n(?!\\\\s*$)/,\\n  del: noop,\\n  text: /^[\\\\s\\\\S]+?(?=[\\\\\\\\<!\\\\[_*`]| {2,}\\\\n|$)/\\n};\\n\\ninline._inside = /(?:\\\\[[^\\\\]]*\\\\]|[^\\\\[\\\\]]|\\\\](?=[^\\\\[]*\\\\]))*/;\\ninline._href = /\\\\s*<?([\\\\s\\\\S]*?)>?(?:\\\\s+['\\\"]([\\\\s\\\\S]*?)['\\\"])?\\\\s*/;\\n\\ninline.link = replace(inline.link)\\n  ('inside', inline._inside)\\n  ('href', inline._href)\\n  ();\\n\\ninline.reflink = replace(inline.reflink)\\n  ('inside', inline._inside)\\n  ();\\n\\n/**\\n * Normal Inline Grammar\\n */\\n\\ninline.normal = merge({}, inline);\\n\\n/**\\n * Pedantic Inline Grammar\\n */\\n\\ninline.pedantic = merge({}, inline.normal, {\\n  strong: /^__(?=\\\\S)([\\\\s\\\\S]*?\\\\S)__(?!_)|^\\\\*\\\\*(?=\\\\S)([\\\\s\\\\S]*?\\\\S)\\\\*\\\\*(?!\\\\*)/,\\n  em: /^_(?=\\\\S)([\\\\s\\\\S]*?\\\\S)_(?!_)|^\\\\*(?=\\\\S)([\\\\s\\\\S]*?\\\\S)\\\\*(?!\\\\*)/\\n});\\n\\n/**\\n * GFM Inline Grammar\\n */\\n\\ninline.gfm = merge({}, inline.normal, {\\n  escape: replace(inline.escape)('])', '~|])')(),\\n  url: /^(https?:\\\\/\\\\/[^\\\\s<]+[^<.,:;\\\"')\\\\]\\\\s])/,\\n  del: /^~~(?=\\\\S)([\\\\s\\\\S]*?\\\\S)~~/,\\n  text: replace(inline.text)\\n    (']|', '~]|')\\n    ('|', '|https?://|')\\n    ()\\n});\\n\\n/**\\n * GFM + Line Breaks Inline Grammar\\n */\\n\\ninline.breaks = merge({}, inline.gfm, {\\n  br: replace(inline.br)('{2,}', '*')(),\\n  text: replace(inline.gfm.text)('{2,}', '*')()\\n});\\n\\n/**\\n * Inline Lexer & Compiler\\n */\\n\\nfunction InlineLexer(links, options) {\\n  this.options = options || marked.defaults;\\n  this.links = links;\\n  this.rules = inline.normal;\\n  this.renderer = this.options.renderer || new Renderer;\\n\\n  if (!this.links) {\\n    throw new\\n      Error('Tokens array requires a `links` property.');\\n  }\\n\\n  if (this.options.gfm) {\\n    if (this.options.breaks) {\\n      this.rules = inline.breaks;\\n    } else {\\n      this.rules = inline.gfm;\\n    }\\n  } else if (this.options.pedantic) {\\n    this.rules = inline.pedantic;\\n  }\\n}\\n\\n/**\\n * Expose Inline Rules\\n */\\n\\nInlineLexer.rules = inline;\\n\\n/**\\n * Static Lexing/Compiling Method\\n */\\n\\nInlineLexer.output = function(src, links, options) {\\n  var inline = new InlineLexer(links, options);\\n  return inline.output(src);\\n};\\n\\n/**\\n * Lexing/Compiling\\n */\\n\\nInlineLexer.prototype.output = function(src) {\\n  var out = ''\\n    , link\\n    , text\\n    , href\\n    , cap;\\n\\n  while (src) {\\n    // escape\\n    if (cap = this.rules.escape.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += cap[1];\\n      continue;\\n    }\\n\\n    // autolink\\n    if (cap = this.rules.autolink.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      if (cap[2] === '@') {\\n        text = cap[1].charAt(6) === ':'\\n          ? this.mangle(cap[1].substring(7))\\n          : this.mangle(cap[1]);\\n        href = this.mangle('mailto:') + text;\\n      } else {\\n        text = escape(cap[1]);\\n        href = text;\\n      }\\n      out += this.renderer.link(href, null, text);\\n      continue;\\n    }\\n\\n    // url (gfm)\\n    if (cap = this.rules.url.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      text = escape(cap[1]);\\n      href = text;\\n      out += this.renderer.link(href, null, text);\\n      continue;\\n    }\\n\\n    // tag\\n    if (cap = this.rules.tag.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += this.options.sanitize\\n        ? escape(cap[0])\\n        : cap[0];\\n      continue;\\n    }\\n\\n    // link\\n    if (cap = this.rules.link.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += this.outputLink(cap, {\\n        href: cap[2],\\n        title: cap[3]\\n      });\\n      continue;\\n    }\\n\\n    // reflink, nolink\\n    if ((cap = this.rules.reflink.exec(src))\\n        || (cap = this.rules.nolink.exec(src))) {\\n      src = src.substring(cap[0].length);\\n      link = (cap[2] || cap[1]).replace(/\\\\s+/g, ' ');\\n      link = this.links[link.toLowerCase()];\\n      if (!link || !link.href) {\\n        out += cap[0].charAt(0);\\n        src = cap[0].substring(1) + src;\\n        continue;\\n      }\\n      out += this.outputLink(cap, link);\\n      continue;\\n    }\\n\\n    // strong\\n    if (cap = this.rules.strong.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += this.renderer.strong(this.output(cap[2] || cap[1]));\\n      continue;\\n    }\\n\\n    // em\\n    if (cap = this.rules.em.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += this.renderer.em(this.output(cap[2] || cap[1]));\\n      continue;\\n    }\\n\\n    // code\\n    if (cap = this.rules.code.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += this.renderer.codespan(escape(cap[2], true));\\n      continue;\\n    }\\n\\n    // br\\n    if (cap = this.rules.br.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += this.renderer.br();\\n      continue;\\n    }\\n\\n    // del (gfm)\\n    if (cap = this.rules.del.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += this.renderer.del(this.output(cap[1]));\\n      continue;\\n    }\\n\\n    // text\\n    if (cap = this.rules.text.exec(src)) {\\n      src = src.substring(cap[0].length);\\n      out += escape(this.smartypants(cap[0]));\\n      continue;\\n    }\\n\\n    if (src) {\\n      throw new\\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\\n    }\\n  }\\n\\n  return out;\\n};\\n\\n/**\\n * Compile Link\\n */\\n\\nInlineLexer.prototype.outputLink = function(cap, link) {\\n  var href = escape(link.href)\\n    , title = link.title ? escape(link.title) : null;\\n\\n  return cap[0].charAt(0) !== '!'\\n    ? this.renderer.link(href, title, this.output(cap[1]))\\n    : this.renderer.image(href, title, escape(cap[1]));\\n};\\n\\n/**\\n * Smartypants Transformations\\n */\\n\\nInlineLexer.prototype.smartypants = function(text) {\\n  if (!this.options.smartypants) return text;\\n  return text\\n    // em-dashes\\n    .replace(/--/g, '\\\\u2014')\\n    // opening singles\\n    .replace(/(^|[-\\\\u2014/(\\\\[{\\\"\\\\s])'/g, '$1\\\\u2018')\\n    // closing singles & apostrophes\\n    .replace(/'/g, '\\\\u2019')\\n    // opening doubles\\n    .replace(/(^|[-\\\\u2014/(\\\\[{\\\\u2018\\\\s])\\\"/g, '$1\\\\u201c')\\n    // closing doubles\\n    .replace(/\\\"/g, '\\\\u201d')\\n    // ellipses\\n    .replace(/\\\\.{3}/g, '\\\\u2026');\\n};\\n\\n/**\\n * Mangle Links\\n */\\n\\nInlineLexer.prototype.mangle = function(text) {\\n  var out = ''\\n    , l = text.length\\n    , i = 0\\n    , ch;\\n\\n  for (; i < l; i++) {\\n    ch = text.charCodeAt(i);\\n    if (Math.random() > 0.5) {\\n      ch = 'x' + ch.toString(16);\\n    }\\n    out += '&#' + ch + ';';\\n  }\\n\\n  return out;\\n};\\n\\n/**\\n * Renderer\\n */\\n\\nfunction Renderer() {}\\n\\nRenderer.prototype.code = function(code, lang, escaped, options) {\\n  options = options || {};\\n\\n  if (options.highlight) {\\n    var out = options.highlight(code, lang);\\n    if (out != null && out !== code) {\\n      escaped = true;\\n      code = out;\\n    }\\n  }\\n\\n  if (!lang) {\\n    return '<pre><code>'\\n      + (escaped ? code : escape(code, true))\\n      + '\\\\n</code></pre>';\\n  }\\n\\n  return '<pre><code class=\\\"'\\n    + options.langPrefix\\n    + lang\\n    + '\\\">'\\n    + (escaped ? code : escape(code))\\n    + '\\\\n</code></pre>\\\\n';\\n};\\n\\nRenderer.prototype.blockquote = function(quote) {\\n  return '<blockquote>\\\\n' + quote + '</blockquote>\\\\n';\\n};\\n\\nRenderer.prototype.html = function(html) {\\n  return html;\\n};\\n\\nRenderer.prototype.heading = function(text, level, raw, options) {\\n  return '<h'\\n    + level\\n    + ' id=\\\"'\\n    + options.headerPrefix\\n    + raw.toLowerCase().replace(/[^\\\\w]+/g, '-')\\n    + '\\\">'\\n    + text\\n    + '</h'\\n    + level\\n    + '>\\\\n';\\n};\\n\\nRenderer.prototype.hr = function() {\\n  return '<hr>\\\\n';\\n};\\n\\nRenderer.prototype.list = function(body, ordered) {\\n  var type = ordered ? 'ol' : 'ul';\\n  return '<' + type + '>\\\\n' + body + '</' + type + '>\\\\n';\\n};\\n\\nRenderer.prototype.listitem = function(text) {\\n  return '<li>' + text + '</li>\\\\n';\\n};\\n\\nRenderer.prototype.paragraph = function(text) {\\n  return '<p>' + text + '</p>\\\\n';\\n};\\n\\nRenderer.prototype.table = function(header, body) {\\n  return '<table>\\\\n'\\n    + '<thead>\\\\n'\\n    + header\\n    + '</thead>\\\\n'\\n    + '<tbody>\\\\n'\\n    + body\\n    + '</tbody>\\\\n'\\n    + '</table>\\\\n';\\n};\\n\\nRenderer.prototype.tablerow = function(content) {\\n  return '<tr>\\\\n' + content + '</tr>\\\\n';\\n};\\n\\nRenderer.prototype.tablecell = function(content, flags) {\\n  var type = flags.header ? 'th' : 'td';\\n  var tag = flags.align\\n    ? '<' + type + ' style=\\\"text-align:' + flags.align + '\\\">'\\n    : '<' + type + '>';\\n  return tag + content + '</' + type + '>\\\\n';\\n};\\n\\n// span level renderer\\nRenderer.prototype.strong = function(text) {\\n  return '<strong>' + text + '</strong>';\\n};\\n\\nRenderer.prototype.em = function(text) {\\n  return '<em>' + text + '</em>';\\n};\\n\\nRenderer.prototype.codespan = function(text) {\\n  return '<code>' + text + '</code>';\\n};\\n\\nRenderer.prototype.br = function() {\\n  return '<br>';\\n};\\n\\nRenderer.prototype.del = function(text) {\\n  return '<del>' + text + '</del>';\\n};\\n\\nRenderer.prototype.link = function(href, title, text) {\\n  var out = '<a href=\\\"' + href + '\\\"';\\n  if (title) {\\n    out += ' title=\\\"' + title + '\\\"';\\n  }\\n  out += '>' + text + '</a>';\\n  return out;\\n};\\n\\nRenderer.prototype.image = function(href, title, text) {\\n  var out = '<img src=\\\"' + href + '\\\" alt=\\\"' + text + '\\\"';\\n  if (title) {\\n    out += ' title=\\\"' + title + '\\\"';\\n  }\\n  out += '>';\\n  return out;\\n};\\n\\n/**\\n * Parsing & Compiling\\n */\\n\\nfunction Parser(options) {\\n  this.tokens = [];\\n  this.token = null;\\n  this.options = options || marked.defaults;\\n  this.options.renderer = this.options.renderer || new Renderer;\\n  this.renderer = this.options.renderer;\\n}\\n\\n/**\\n * Static Parse Method\\n */\\n\\nParser.parse = function(src, options, renderer) {\\n  var parser = new Parser(options, renderer);\\n  return parser.parse(src);\\n};\\n\\n/**\\n * Parse Loop\\n */\\n\\nParser.prototype.parse = function(src) {\\n  this.inline = new InlineLexer(src.links, this.options, this.renderer);\\n  this.tokens = src.reverse();\\n\\n  var out = '';\\n  while (this.next()) {\\n    out += this.tok();\\n  }\\n\\n  return out;\\n};\\n\\n/**\\n * Next Token\\n[end of marked.js]\\n[start of README.md]\\n# marked\\n\\n> A full-featured markdown parser and compiler, written in javascript. Built\\n> for speed.\\n\\n[![NPM version](https://badge.fury.io/js/marked.png)][badge]\\n\\n## Install\\n\\n``` bash\\nnpm install marked --save\\n```\\n\\n## Usage\\n\\nMinimal usage:\\n\\n```js\\nconsole.log(marked('I am using __markdown__.'));\\n// Outputs: <p>I am using <strong>markdown</strong>.</p>\\n```\\n\\nExample using all options:\\n\\n```js\\nmarked.setOptions({\\n  gfm: true,\\n  tables: true,\\n  breaks: false,\\n  pedantic: false,\\n  sanitize: true,\\n  smartLists: true,\\n  smartypants: false,\\n});\\n\\n// Using async version of marked\\nmarked('I am using __markdown__.', function (err, content) {\\n  if (err) throw err;\\n  console.log(content);\\n});\\n```\\n\\n## marked(markdownString, [options], [callback])\\n\\n### markdownString\\n\\nType: `String`\\n\\nString of markdown source to be compiled.\\n\\n### options\\n\\nType: `Object`\\n\\nHash of options. Can also be set using the `marked.setOptions` method as seen\\nabove.\\n\\n### callback\\n\\nType: `Function`\\n\\nFunction called when the `markdownString` has been fully parsed when using\\nasync highlighting. If the `options` argument is omitted, this can be used as\\nthe second argument as seen above:\\n\\n## Options\\n\\n### gfm\\n\\nType: `Boolean`\\nDefault: `true`\\n\\nEnable [GitHub flavored markdown][gfm].\\n\\n### tables\\n\\nType: `Boolean`\\nDefault: `true`\\n\\nEnable GFM [tables][tables].\\nThis option requires the `gfm` option to be true.\\n\\n### breaks\\n\\nType: `Boolean`\\nDefault: `false`\\n\\nEnable GFM [line breaks][breaks].\\nThis option requires the `gfm` option to be true.\\n\\n### pedantic\\n\\nType: `Boolean`\\nDefault: `false`\\n\\nConform to obscure parts of `markdown.pl` as much as possible. Don't fix any of\\nthe original markdown bugs or poor behavior.\\n\\n### sanitize\\n\\nType: `Boolean`\\nDefault: `false`\\n\\nSanitize the output. Ignore any HTML that has been input.\\n\\n### smartLists\\n\\nType: `Boolean`\\nDefault: `true`\\n\\nUse smarter list behavior than the original markdown. May eventually be\\ndefault with the old behavior moved into `pedantic`.\\n\\n### smartypants\\n\\nType: `Boolean`\\nDefault: `false`\\n\\nUse \\\"smart\\\" typograhic punctuation for things like quotes and dashes.\\n\\n### renderer\\n\\nType: `Renderer`\\nDefault: `new Renderer()`\\n\\nA renderer instance for rendering ast to html. Learn more on the Renderer\\nsection.\\n\\n## Renderer\\n\\nRenderer is a the new way for rendering tokens to html. Here is a simple\\nexample:\\n\\n```javascript\\nvar r = new marked.Renderer()\\nr.blockcode = function(code, lang) {\\n  return highlight(lang, code).value;\\n}\\n\\nconsole.log(marked(text, {renderer: r}))\\n```\\n\\nYou can control anything you want.\\n\\n### Block Level\\n\\n- code(code, language)\\n- blockquote(quote)\\n- html(html)\\n- heading(text, level)\\n- hr()\\n- list(body, ordered)\\n- listitem(text)\\n- paragraph(text)\\n- table(header, body)\\n- tablerow(content)\\n- tablecell(content, flags)\\n\\n`flags` is an object like this:\\n\\n```\\n{\\n    header: true,\\n    align: 'center'\\n}\\n```\\n\\n### Span Level\\n\\n- strong(text)\\n- em(text)\\n- codespan(code)\\n- br()\\n- del(text)\\n- link(href, title, text)\\n- image(href, title, text)\\n\\n## Access to lexer and parser\\n\\nYou also have direct access to the lexer and parser if you so desire.\\n\\n``` js\\nvar tokens = marked.lexer(text, options);\\nconsole.log(marked.parser(tokens));\\n```\\n\\n``` js\\nvar lexer = new marked.Lexer(options);\\nvar tokens = lexer.lex(text);\\nconsole.log(tokens);\\nconsole.log(lexer.rules);\\n```\\n\\n## CLI\\n\\n``` bash\\n$ marked -o hello.html\\nhello world\\n^D\\n$ cat hello.html\\n<p>hello world</p>\\n```\\n\\n## Benchmarks\\n\\nnode v0.4.x\\n\\n``` bash\\n$ node test --bench\\nmarked completed in 12071ms.\\nshowdown (reuse converter) completed in 27387ms.\\nshowdown (new converter) completed in 75617ms.\\nmarkdown-js completed in 70069ms.\\n```\\n\\nnode v0.6.x\\n\\n``` bash\\n$ node test --bench\\nmarked completed in 6448ms.\\nmarked (gfm) completed in 7357ms.\\nmarked (pedantic) completed in 6092ms.\\ndiscount completed in 7314ms.\\nshowdown (reuse converter) completed in 16018ms.\\nshowdown (new converter) completed in 18234ms.\\nmarkdown-js completed in 24270ms.\\n```\\n\\n__Marked is now faster than Discount, which is written in C.__\\n\\nFor those feeling skeptical: These benchmarks run the entire markdown test suite\\n1000 times. The test suite tests every feature. It doesn't cater to specific\\naspects.\\n\\nnode v0.8.x\\n\\n``` bash\\n$ node test --bench\\nmarked completed in 3411ms.\\nmarked (gfm) completed in 3727ms.\\nmarked (pedantic) completed in 3201ms.\\nrobotskirt completed in 808ms.\\nshowdown (reuse converter) completed in 11954ms.\\nshowdown (new converter) completed in 17774ms.\\nmarkdown-js completed in 17191ms.\\n```\\n\\n## Another Javascript Markdown Parser\\n\\nThe point of marked was to create a markdown compiler where it was possible to\\nfrequently parse huge chunks of markdown without having to worry about\\ncaching the compiled output somehow...or blocking for an unnecesarily long time.\\n\\nmarked is very concise and still implements all markdown features. It is also\\nnow fully compatible with the client-side.\\n\\nmarked more or less passes the official markdown test suite in its\\nentirety. This is important because a surprising number of markdown compilers\\ncannot pass more than a few tests. It was very difficult to get marked as\\ncompliant as it is. It could have cut corners in several areas for the sake\\nof performance, but did not in order to be exactly what you expect in terms\\nof a markdown rendering. In fact, this is why marked could be considered at a\\ndisadvantage in the benchmarks above.\\n\\nAlong with implementing every markdown feature, marked also implements [GFM\\nfeatures][gfmf].\\n\\n### High level\\n\\nYou can customize the result with a customized renderer.\\n\\n``` js\\nvar renderer = new marked.Renderer()\\n\\nrenderer.heading = function(text, level) {\\n  return '<div class=\\\"h-' + level + '\\\">' + text + '</div>'\\n}\\n\\nvar parse = function(src, options) {\\n  options = options || {};\\n  options.renderer = renderer\\n  return marked.parser(marked.lexer(src, options), options);\\n}\\n\\nconsole.log(parse('# h1'))\\n```\\n\\nThe renderer API:\\n\\n```\\ncode: function(code, lang)\\nblockquote: function(text)\\nhtml: function(html)\\n\\nheading: function(text, level)\\nparagraph: function(text)\\n\\nhr: function()\\n\\nlist: function(contents, isOrdered)\\nlistitem: function(text)\\n\\ntable: function(header, body)\\ntablerow: function(content)\\ntablecell: function(text, flags)\\n// flags: {header: false, align: 'center'}\\n```\\n\\n### Pro level\\n\\nYou also have direct access to the lexer and parser if you so desire.\\n\\n``` js\\nvar tokens = marked.lexer(text, options);\\nconsole.log(marked.parser(tokens));\\n```\\n\\n``` js\\nvar lexer = new marked.Lexer(options);\\nvar tokens = lexer.lex(text);\\nconsole.log(tokens);\\nconsole.log(lexer.rules);\\n```\\n\\n``` bash\\n$ node\\n> require('marked').lexer('> i am using marked.')\\n[ { type: 'blockquote_start' },\\n  { type: 'paragraph',\\n    text: 'i am using marked.' },\\n  { type: 'blockquote_end' },\\n  links: {} ]\\n```\\n\\n## Running Tests & Contributing\\n\\nIf you want to submit a pull request, make sure your changes pass the test\\nsuite. If you're adding a new feature, be sure to add your own test.\\n\\nThe marked test suite is set up slightly strangely: `test/new` is for all tests\\nthat are not part of the original markdown.pl test suite (this is where your\\ntest should go if you make one). `test/original` is only for the original\\nmarkdown.pl tests. `test/tests` houses both types of tests after they have been\\ncombined and moved/generated by running `node test --fix` or `marked --test\\n--fix`.\\n\\nIn other words, if you have a test to add, add it to `test/new/` and then\\nregenerate the tests with `node test --fix`. Commit the result. If your test\\nuses a certain feature, for example, maybe it assumes GFM is *not* enabled, you\\ncan add `.nogfm` to the filename. So, `my-test.text` becomes\\n`my-test.nogfm.text`. You can do this with any marked option. Say you want\\nline breaks and smartypants enabled, your filename should be:\\n`my-test.breaks.smartypants.text`.\\n\\nTo run the tests:\\n\\n``` bash\\ncd marked/\\nnode test\\n```\\n\\n### Contribution and License Agreement\\n\\nIf you contribute code to this project, you are implicitly allowing your code\\nto be distributed under the MIT license. You are also implicitly verifying that\\nall code is your original work. `</legalese>`\\n\\n## License\\n\\nCopyright (c) 2011-2013, Christopher Jeffrey. (MIT License)\\n\\nSee LICENSE for more info.\\n\\n[gfm]: https://help.github.com/articles/github-flavored-markdown\\n[gfmf]: http://github.github.com/github-flavored-markdown/\\n[pygmentize]: https://github.com/rvagg/node-pygmentize-bundled\\n[highlight]: https://github.com/isagalaev/highlight.js\\n[badge]: http://badge.fury.io/js/marked\\n[tables]: https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#wiki-tables\\n[breaks]: https://help.github.com/articles/github-flavored-markdown#newlines\\n\\n[end of README.md]\\n[start of index.js]\\n#!/usr/bin/env node\\n\\n/**\\n * marked tests\\n * Copyright (c) 2011-2013, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/chjj/marked\\n */\\n\\n/**\\n * Modules\\n */\\n\\nvar fs = require('fs')\\n  , path = require('path')\\n  , marked = require('../');\\n\\n/**\\n * Load Tests\\n */\\n\\nfunction load() {\\n  var dir = __dirname + '/tests'\\n    , files = {}\\n    , list\\n    , file\\n    , i\\n    , l;\\n\\n  list = fs\\n    .readdirSync(dir)\\n    .filter(function(file) {\\n      return path.extname(file) !== '.html';\\n    })\\n    .sort(function(a, b) {\\n      a = path.basename(a).toLowerCase().charCodeAt(0);\\n      b = path.basename(b).toLowerCase().charCodeAt(0);\\n      return a > b ? 1 : (a < b ? -1 : 0);\\n    });\\n\\n  i = 0;\\n  l = list.length;\\n\\n  for (; i < l; i++) {\\n    file = path.join(dir, list[i]);\\n    files[path.basename(file)] = {\\n      text: fs.readFileSync(file, 'utf8'),\\n      html: fs.readFileSync(file.replace(/[^.]+$/, 'html'), 'utf8')\\n    };\\n  }\\n\\n  return files;\\n}\\n\\n/**\\n * Test Runner\\n */\\n\\nfunction runTests(engine, options) {\\n  if (typeof engine !== 'function') {\\n    options = engine;\\n    engine = null;\\n  }\\n\\n  var engine = engine || marked\\n    , options = options || {}\\n    , files = options.files || load()\\n    , complete = 0\\n    , failed = 0\\n    , failures = []\\n    , keys = Object.keys(files)\\n    , i = 0\\n    , len = keys.length\\n    , filename\\n    , file\\n    , flags\\n    , text\\n    , html\\n    , j\\n    , l;\\n\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n\\nmain:\\n  for (; i < len; i++) {\\n    filename = keys[i];\\n    file = files[filename];\\n\\n    if (marked._original) {\\n      marked.defaults = marked._original;\\n      delete marked._original;\\n    }\\n\\n    flags = filename.split('.').slice(1, -1);\\n    if (flags.length) {\\n      marked._original = marked.defaults;\\n      marked.defaults = {};\\n      Object.keys(marked._original).forEach(function(key) {\\n        marked.defaults[key] = marked._original[key];\\n      });\\n      flags.forEach(function(key) {\\n        var val = true;\\n        if (key.indexOf('no') === 0) {\\n          key = key.substring(2);\\n          val = false;\\n        }\\n        if (marked.defaults.hasOwnProperty(key)) {\\n          marked.defaults[key] = val;\\n        }\\n      });\\n    }\\n\\n    try {\\n      text = engine(file.text).replace(/\\\\s/g, '');\\n      html = file.html.replace(/\\\\s/g, '');\\n    } catch(e) {\\n      console.log('%s failed.', filename);\\n      throw e;\\n    }\\n\\n    j = 0;\\n    l = html.length;\\n\\n    for (; j < l; j++) {\\n      if (text[j] !== html[j]) {\\n        failed++;\\n        failures.push(filename);\\n\\n        text = text.substring(\\n          Math.max(j - 30, 0),\\n          Math.min(j + 30, text.length));\\n\\n        html = html.substring(\\n          Math.max(j - 30, 0),\\n          Math.min(j + 30, html.length));\\n\\n        console.log(\\n          '\\\\n#%d. %s failed at offset %d. Near: \\\"%s\\\".\\\\n',\\n          i + 1, filename, j, text);\\n\\n        console.log('\\\\nGot:\\\\n%s\\\\n', text.trim() || text);\\n        console.log('\\\\nExpected:\\\\n%s\\\\n', html.trim() || html);\\n\\n        if (options.stop) {\\n          break main;\\n        }\\n\\n        continue main;\\n      }\\n    }\\n\\n    complete++;\\n    console.log('#%d. %s completed.', i + 1, filename);\\n  }\\n\\n  console.log('%d/%d tests completed successfully.', complete, len);\\n  if (failed) console.log('%d/%d tests failed.', failed, len);\\n\\n  // Tests currently failing.\\n  if (~failures.indexOf('def_blocks.text')\\n      && ~failures.indexOf('double_link.text')\\n      && ~failures.indexOf('gfm_code_hr_list.text')) {\\n    failed -= 3;\\n  }\\n\\n  return !failed;\\n}\\n\\n/**\\n * Benchmark a function\\n */\\n\\nfunction bench(name, func) {\\n  var files = bench.files || load();\\n\\n  if (!bench.files) {\\n    bench.files = files;\\n\\n    // Change certain tests to allow\\n    // comparison to older benchmark times.\\n    fs.readdirSync(__dirname + '/new').forEach(function(name) {\\n      if (path.extname(name) === '.html') return;\\n      if (name === 'main.text') return;\\n      delete files[name];\\n    });\\n\\n    files['backslash_escapes.text'] = {\\n      text: 'hello world \\\\\\\\[how](are you) today'\\n    };\\n\\n    files['main.text'].text = files['main.text'].text.replace('* * *\\\\n\\\\n', '');\\n  }\\n\\n  var start = Date.now()\\n    , times = 1000\\n    , keys = Object.keys(files)\\n    , i\\n    , l = keys.length\\n    , filename\\n    , file;\\n\\n  while (times--) {\\n    for (i = 0; i < l; i++) {\\n      filename = keys[i];\\n      file = files[filename];\\n      func(file.text);\\n    }\\n  }\\n\\n  console.log('%s completed in %dms.', name, Date.now() - start);\\n}\\n\\n/**\\n * Benchmark all engines\\n */\\n\\nfunction runBench(options) {\\n  var options = options || {};\\n\\n  // Non-GFM, Non-pedantic\\n  marked.setOptions({\\n    gfm: false,\\n    tables: false,\\n    breaks: false,\\n    pedantic: false,\\n    sanitize: false,\\n    smartLists: false\\n  });\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked', marked);\\n\\n  // GFM\\n  marked.setOptions({\\n    gfm: true,\\n    tables: false,\\n    breaks: false,\\n    pedantic: false,\\n    sanitize: false,\\n    smartLists: false\\n  });\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked (gfm)', marked);\\n\\n  // Pedantic\\n  marked.setOptions({\\n    gfm: false,\\n    tables: false,\\n    breaks: false,\\n    pedantic: true,\\n    sanitize: false,\\n    smartLists: false\\n  });\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked (pedantic)', marked);\\n\\n  // robotskirt\\n  try {\\n    bench('robotskirt', (function() {\\n      var rs = require('robotskirt');\\n      return function(text) {\\n        var parser = rs.Markdown.std();\\n        return parser.render(text);\\n      };\\n    })());\\n  } catch (e) {\\n    console.log('Could not bench robotskirt.');\\n  }\\n\\n  // showdown\\n  try {\\n    bench('showdown (reuse converter)', (function() {\\n      var Showdown = require('showdown');\\n      var convert = new Showdown.converter();\\n      return function(text) {\\n        return convert.makeHtml(text);\\n      };\\n    })());\\n    bench('showdown (new converter)', (function() {\\n      var Showdown = require('showdown');\\n      return function(text) {\\n        var convert = new Showdown.converter();\\n        return convert.makeHtml(text);\\n      };\\n    })());\\n  } catch (e) {\\n    console.log('Could not bench showdown.');\\n  }\\n\\n  // markdown.js\\n  try {\\n    bench('markdown.js', require('markdown').parse);\\n  } catch (e) {\\n    console.log('Could not bench markdown.js.');\\n  }\\n}\\n\\n/**\\n * A simple one-time benchmark\\n */\\n\\nfunction time(options) {\\n  var options = options || {};\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked', marked);\\n}\\n\\n/**\\n * Markdown Test Suite Fixer\\n *   This function is responsible for \\\"fixing\\\"\\n *   the markdown test suite. There are\\n *   certain aspects of the suite that\\n *   are strange or might make tests\\n *   fail for reasons unrelated to\\n *   conformance.\\n */\\n\\nfunction fix(options) {\\n  ['tests', 'original', 'new'].forEach(function(dir) {\\n    try {\\n      fs.mkdirSync(path.resolve(__dirname, dir), 0755);\\n    } catch (e) {\\n      ;\\n    }\\n  });\\n\\n  // rm -rf tests\\n  fs.readdirSync(path.resolve(__dirname, 'tests')).forEach(function(file) {\\n    fs.unlinkSync(path.resolve(__dirname, 'tests', file));\\n  });\\n\\n  // cp -r original tests\\n  fs.readdirSync(path.resolve(__dirname, 'original')).forEach(function(file) {\\n    var nfile = file;\\n    if (file.indexOf('hard_wrapped_paragraphs_with_list_like_lines.') === 0) {\\n      nfile = file.replace(/\\\\.(text|html)$/, '.nogfm.$1');\\n    }\\n    fs.writeFileSync(path.resolve(__dirname, 'tests', nfile),\\n      fs.readFileSync(path.resolve(__dirname, 'original', file)));\\n  });\\n\\n  // node fix.js\\n  var dir = __dirname + '/tests';\\n\\n  fs.readdirSync(dir).filter(function(file) {\\n    return path.extname(file) === '.html';\\n  }).forEach(function(file) {\\n    var file = path.join(dir, file)\\n      , html = fs.readFileSync(file, 'utf8');\\n\\n    // fix unencoded quotes\\n    html = html\\n      .replace(/='([^\\\\n']*)'(?=[^<>\\\\n]*>)/g, '=&__APOS__;$1&__APOS__;')\\n      .replace(/=\\\"([^\\\\n\\\"]*)\\\"(?=[^<>\\\\n]*>)/g, '=&__QUOT__;$1&__QUOT__;')\\n      .replace(/\\\"/g, '&quot;')\\n      .replace(/'/g, '&#39;')\\n      .replace(/&__QUOT__;/g, '\\\"')\\n      .replace(/&__APOS__;/g, '\\\\'');\\n\\n    // add heading id's\\n    html = html.replace(/<(h[1-6])>([^<]+)<\\\\/\\\\1>/g, function(s, h, text) {\\n      var id = text\\n        .replace(/&#39;/g, '\\\\'')\\n        .replace(/&quot;/g, '\\\"')\\n        .replace(/&gt;/g, '>')\\n        .replace(/&lt;/g, '<')\\n        .replace(/&amp;/g, '&');\\n\\n      id = id.toLowerCase().replace(/[^\\\\w]+/g,\\u00a0'-');\\n\\n      return '<' + h + ' id=\\\"' + id + '\\\">' + text + '</' + h + '>';\\n    });\\n\\n    fs.writeFileSync(file, html);\\n  });\\n\\n  // turn <hr /> into <hr>\\n  fs.readdirSync(dir).forEach(function(file) {\\n    var file = path.join(dir, file)\\n      , text = fs.readFileSync(file, 'utf8');\\n\\n    text = text.replace(/(<|&lt;)hr\\\\s*\\\\/(>|&gt;)/g, '$1hr$2');\\n\\n    fs.writeFileSync(file, text);\\n  });\\n\\n  // markdown does some strange things.\\n  // it does not encode naked `>`, marked does.\\n  (function() {\\n    var file = dir + '/amps_and_angles_encoding.html';\\n    var html = fs.readFileSync(file, 'utf8')\\n      .replace('6 > 5.', '6 &gt; 5.');\\n\\n    fs.writeFileSync(file, html);\\n  })();\\n\\n  // cp new/* tests/\\n  fs.readdirSync(path.resolve(__dirname, 'new')).forEach(function(file) {\\n    fs.writeFileSync(path.resolve(__dirname, 'tests', file),\\n      fs.readFileSync(path.resolve(__dirname, 'new', file)));\\n  });\\n}\\n\\n/**\\n * Argument Parsing\\n */\\n\\nfunction parseArg(argv) {\\n  var argv = process.argv.slice(2)\\n    , options = {}\\n    , orphans = []\\n    , arg;\\n\\n  function getarg() {\\n    var arg = argv.shift();\\n\\n    if (arg.indexOf('--') === 0) {\\n      // e.g. --opt\\n      arg = arg.split('=');\\n      if (arg.length > 1) {\\n        // e.g. --opt=val\\n        argv.unshift(arg.slice(1).join('='));\\n      }\\n      arg = arg[0];\\n    } else if (arg[0] === '-') {\\n      if (arg.length > 2) {\\n        // e.g. -abc\\n        argv = arg.substring(1).split('').map(function(ch) {\\n          return '-' + ch;\\n        }).concat(argv);\\n        arg = argv.shift();\\n      } else {\\n        // e.g. -a\\n      }\\n    } else {\\n      // e.g. foo\\n    }\\n\\n    return arg;\\n  }\\n\\n  while (argv.length) {\\n    arg = getarg();\\n    switch (arg) {\\n      case '-f':\\n      case '--fix':\\n      case 'fix':\\n        options.fix = true;\\n        break;\\n      case '-b':\\n      case '--bench':\\n        options.bench = true;\\n        break;\\n      case '-s':\\n      case '--stop':\\n        options.stop = true;\\n        break;\\n      case '-t':\\n      case '--time':\\n        options.time = true;\\n        break;\\n      default:\\n        if (arg.indexOf('--') === 0) {\\n          opt = camelize(arg.replace(/^--(no-)?/, ''));\\n          if (!marked.defaults.hasOwnProperty(opt)) {\\n            continue;\\n          }\\n          options.marked = options.marked || {};\\n          if (arg.indexOf('--no-') === 0) {\\n            options.marked[opt] = typeof marked.defaults[opt] !== 'boolean'\\n              ? null\\n              : false;\\n          } else {\\n            options.marked[opt] = typeof marked.defaults[opt] !== 'boolean'\\n              ? argv.shift()\\n              : true;\\n          }\\n        } else {\\n          orphans.push(arg);\\n        }\\n        break;\\n    }\\n  }\\n\\n  return options;\\n}\\n\\n/**\\n * Helpers\\n */\\n\\nfunction camelize(text) {\\n  return text.replace(/(\\\\w)-(\\\\w)/g, function(_, a, b) {\\n    return a + b.toUpperCase();\\n  });\\n}\\n\\n/**\\n * Main\\n */\\n\\nfunction main(argv) {\\n  var opt = parseArg();\\n\\n  if (opt.fix) {\\n    return fix(opt);\\n  }\\n\\n  if (opt.bench) {\\n    return runBench(opt);\\n  }\\n\\n  if (opt.time) {\\n    return time(opt);\\n  }\\n\\n  return runTests(opt);\\n}\\n\\n/**\\n * Execute\\n */\\n\\nif (!module.parent) {\\n  process.title = 'marked';\\n  process.exit(main(process.argv.slice()) ? 0 : 1);\\n} else {\\n  exports = main;\\n  exports.main = main;\\n  exports.runTests = runTests;\\n  exports.runBench = runBench;\\n  exports.load = load;\\n  exports.bench = bench;\\n  module.exports = exports;\\n}\\n\\n[end of index.js]\\n[start of index.js]\\nmodule.exports = require('./lib/marked');\\n\\n[end of index.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "marked.js",
        "marked.js",
        "README.md",
        "index.js",
        "index.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "6d9af21f-e7fd-4287-ad5e-aae4876d2636",
        "score": 0.01639344262295082,
        "payload": {
          "text": " */\n\nParser.prototype.next = function() {\n  return this.token = this.tokens.pop();\n};\n\n/**\n * Preview Next Token\n */\n\nParser.prototype.peek = function() {\n  return this.tokens[this.tokens.length - 1] || 0;\n};\n\n/**\n * Parse Text Tokens\n */\n\nParser.prototype.parseText = function() {\n  var body = this.token.text;\n\n  while (this.peek().type === 'text') {\n    body += '\\n' + this.next().text;\n  }\n\n  return this.inline.output(body);\n};\n\n/**\n * Parse Current Token\n */\n\nParser.prototype.tok = function() {\n  switch (this.token.type) {\n    case 'space': {\n      return '';\n    }\n    case 'hr': {\n      return this.renderer.hr();\n    }\n    case 'heading': {\n      return this.renderer.heading(\n        this.inline.output(this.token.text),\n        this.token.depth,\n        this.token.text,\n        this.options\n      );\n    }\n    case 'code': {\n      return this.renderer.code(this.token.text,\n        this.token.lang,\n        this.token.escaped,\n        this.options);\n    }\n    case 'table': {\n      var header = ''\n        , body = ''\n        , i\n        , row\n        , cell\n        , flags\n        , j;\n\n      // header\n      cell = '';\n      for (i = 0; i < this.token.header.length; i++) {\n        flags = { header: true, align: this.token.align[i] };\n        cell += this.renderer.tablecell(\n          this.inline.output(this.token.header[i]),\n          { header: true, align: this.token.align[i] }\n        );\n      }\n      header += this.renderer.tablerow(cell);\n\n      for (i = 0; i < this.token.cells.length; i++) {\n        row = this.token.cells[i];\n\n        cell = '';\n        for (j = 0; j < row.length; j++) {\n          cell += this.renderer.tablecell(\n            this.inline.output(row[j]),\n            { header: false, align: this.token.align[j] }\n          );\n        }\n\n        body += this.renderer.tablerow(cell);\n      }\n      return this.renderer.table(header, body);\n    }\n    case 'blockquote_start': {\n      var body = '';\n\n      while (this.next().type !== 'blockquote_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.blockquote(body);\n    }\n    case 'list_start': {\n      var body = ''\n        , ordered = this.token.ordered;\n\n      while (this.next().type !== 'list_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.list(body, ordered);\n    }\n    case 'list_item_start': {\n      var body = '';\n\n      while (this.next().type !== 'list_item_end') {\n        body += this.token.type === 'text'\n          ? this.parseText()\n          : this.tok();\n      }\n\n      return this.renderer.listitem(body);\n    }\n    case 'loose_item_start': {\n      var body = '';\n\n      while (this.next().type !== 'list_item_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.listitem(body);\n    }\n    case 'html': {\n      var html = !this.token.pre && !this.options.pedantic\n        ? this.inline.output(this.token.text)\n        : this.token.text;\n      return this.renderer.html(html);\n    }\n    case 'paragraph': {\n      return this.renderer.paragraph(this.inline.output(this.token.text));\n    }\n    case 'text': {\n      return this.renderer.paragraph(this.parseText());\n    }\n  }\n};\n\n/**\n * Helpers\n */\n\nfunction escape(html, encode) {\n  return html\n    .replace(!encode ? /&(?!#?\\w+;)/g : /&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;');\n}\n\nfunction replace(regex, opt) {\n  regex = regex.source;\n  opt = opt || '';\n  return function self(name, val) {\n    if (!name) return new RegExp(regex, opt);\n    val = val.source || val;\n    val = val.replace(/(^|[^\\[])\\^/g, '$1');\n    regex = regex.replace(name, val);\n    return self;\n  };\n}\n\nfunction noop() {}\nnoop.exec = noop;\n\nfunction merge(obj) {\n  var i = 1\n    , target\n    , key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\n\n/**\n * Marked\n */\n\nfunction marked(src, opt, callback) {\n  if (callback || typeof opt === 'function') {\n    if (!callback) {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n\n    var highlight = opt.highlight\n      , tokens\n      , pending\n      , i = 0;\n\n    try {\n      tokens = Lexer.lex(src, opt)\n    } catch (e) {\n      return callback(e);\n    }\n\n    pending = tokens.length;\n\n    var done = function() {\n      var out, err;\n\n      try {\n        out = Parser.parse(tokens, opt);\n      } catch (e) {\n        err = e;\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!pending) return done();\n\n    for (; i < tokens.length; i++) {\n      (function(token) {\n        if (token.type !== 'code') {\n          return --pending || done();\n        }\n        return highlight(token.text, token.lang, function(err, code) {\n          if (code == null || code === token.text) {\n            return --pending || done();\n          }\n          token.text = code;\n          token.escaped = true;\n          --pending || done();\n        });\n      })(tokens[i]);\n    }\n\n    return;\n  }\n  try {\n    if (opt) opt = merge({}, marked.defaults, opt);\n    return Parser.parse(Lexer.lex(src, opt), opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/chjj/marked.';\n    if ((opt || marked.defaults).silent) {\n      return '<p>An error occured:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  return marked;\n};\n\nmarked.defaults = {\n  gfm: true,\n  tables: true,\n  breaks: false,\n  pedantic: false,\n  sanitize: false,\n  smartLists: false,\n  silent: false,\n  highlight: null,\n  langPrefix: 'lang-',\n  smartypants: false,\n  headerPrefix: '',\n  renderer: new Renderer\n};\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Renderer = Renderer;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.InlineLexer = InlineLexer;\nmarked.inlineLexer = InlineLexer.output;\n\nmarked.parse = marked;\n\nif (typeof exports === 'object') {\n  module.exports = marked;\n} else if (typeof define === 'function' && define.amd) {\n  define(function() { return marked; });\n} else {\n  this.marked = marked;\n}\n\n}).call(function() {\n  return this || (typeof window !== 'undefined' ? window : global);\n}());",
          "filepath": "data/repos/markedjs/marked-0.3/lib/marked.js",
          "repo": "markedjs/marked",
          "version": "0.3",
          "chunk_index": 1
        }
      },
      {
        "id": "9891e658-b36b-4467-96e7-226444400c88",
        "score": 0.016129032258064516,
        "payload": {
          "text": "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2013, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n */\n\n;(function() {\n\n/**\n * Block-Level Grammar\n */\n\nvar block = {\n  newline: /^\\n+/,\n  code: /^( {4}[^\\n]+\\n*)+/,\n  fences: noop,\n  hr: /^( *[-*_]){3,} *(?:\\n+|$)/,\n  heading: /^ *(#{1,6}) *([^\\n]+?) *#* *(?:\\n+|$)/,\n  nptable: noop,\n  lheading: /^([^\\n]+)\\n *(=|-){2,} *(?:\\n+|$)/,\n  blockquote: /^( *>[^\\n]+(\\n[^\\n]+)*\\n*)+/,\n  list: /^( *)(bull) [\\s\\S]+?(?:hr|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n  html: /^ *(?:comment|closed|closing) *(?:\\n{2,}|\\s*$)/,\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +[\"(]([^\\n]+)[\")])? *(?:\\n+|$)/,\n  table: noop,\n  paragraph: /^((?:[^\\n]+\\n?(?!hr|heading|lheading|blockquote|tag|def))+)\\n*/,\n  text: /^[^\\n]+/\n};\n\nblock.bullet = /(?:[*+-]|\\d+\\.)/;\nblock.item = /^( *)(bull) [^\\n]*(?:\\n(?!\\1bull )[^\\n]*)*/;\nblock.item = replace(block.item, 'gm')\n  (/bull/g, block.bullet)\n  ();\n\nblock.list = replace(block.list)\n  (/bull/g, block.bullet)\n  ('hr', /\\n+(?=(?: *[-*_]){3,} *(?:\\n+|$))/)\n  ();\n\nblock._tag = '(?!(?:'\n  + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code'\n  + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo'\n  + '|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:/|@)\\\\b';\n\nblock.html = replace(block.html)\n  ('comment', /<!--[\\s\\S]*?-->/)\n  ('closed', /<(tag)[\\s\\S]+?<\\/\\1>/)\n  ('closing', /<tag(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/)\n  (/tag/g, block._tag)\n  ();\n\nblock.paragraph = replace(block.paragraph)\n  ('hr', block.hr)\n  ('heading', block.heading)\n  ('lheading', block.lheading)\n  ('blockquote', block.blockquote)\n  ('tag', '<' + block._tag)\n  ('def', block.def)\n  ();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  fences: /^ *(`{3,}|~{3,}) *(\\S+)? *\\n([\\s\\S]+?)\\s*\\1 *(?:\\n+|$)/,\n  paragraph: /^/\n});\n\nblock.gfm.paragraph = replace(block.paragraph)\n  ('(?!', '(?!'\n    + block.gfm.fences.source.replace('\\\\1', '\\\\2') + '|'\n    + block.list.source.replace('\\\\1', '\\\\3') + '|')\n  ();\n\n/**\n * GFM + Tables Block Grammar\n */\n\nblock.tables = merge({}, block.gfm, {\n  nptable: /^ *(\\S.*\\|.*)\\n *([-:]+ *\\|[-| :]*)\\n((?:.*\\|.*(?:\\n|$))*)\\n*/,\n  table: /^ *\\|(.+)\\n *\\|( *[-:]+[-| :]*)\\n((?: *\\|.*(?:\\n|$))*)\\n*/\n});\n\n/**\n * Block Lexer\n */\n\nfunction Lexer(options) {\n  this.tokens = [];\n  this.tokens.links = {};\n  this.options = options || marked.defaults;\n  this.rules = block.normal;\n\n  if (this.options.gfm) {\n    if (this.options.tables) {\n      this.rules = block.tables;\n    } else {\n      this.rules = block.gfm;\n    }\n  }\n}\n\n/**\n * Expose Block Rules\n */\n\nLexer.rules = block;\n\n/**\n * Static Lex Method\n */\n\nLexer.lex = function(src, options) {\n  var lexer = new Lexer(options);\n  return lexer.lex(src);\n};\n\n/**\n * Preprocessing\n */\n\nLexer.prototype.lex = function(src) {\n  src = src\n    .replace(/\\r\\n|\\r/g, '\\n')\n    .replace(/\\t/g, '    ')\n    .replace(/\\u00a0/g, ' ')\n    .replace(/\\u2424/g, '\\n');\n\n  return this.token(src, true);\n};\n\n/**\n * Lexing\n */\n\nLexer.prototype.token = function(src, top) {\n  var src = src.replace(/^ +$/gm, '')\n    , next\n    , loose\n    , cap\n    , bull\n    , b\n    , item\n    , space\n    , i\n    , l;\n\n  while (src) {\n    // newline\n    if (cap = this.rules.newline.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[0].length > 1) {\n        this.tokens.push({\n          type: 'space'\n        });\n      }\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      cap = cap[0].replace(/^ {4}/gm, '');\n      this.tokens.push({\n        type: 'code',\n        text: !this.options.pedantic\n          ? cap.replace(/\\n+$/, '')\n          : cap\n      });\n      continue;\n    }\n\n    // fences (gfm)\n    if (cap = this.rules.fences.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'code',\n        lang: cap[2],\n        text: cap[3]\n      });\n      continue;\n    }\n\n    // heading\n    if (cap = this.rules.heading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[1].length,\n        text: cap[2]\n      });\n      continue;\n    }\n\n    // table no leading pipe (gfm)\n    if (top && (cap = this.rules.nptable.exec(src))) {\n      src = src.substring(cap[0].length);\n\n      item = {\n        type: 'table',\n        header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3].replace(/\\n$/, '').split('\\n')\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = 'right';\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = 'center';\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = 'left';\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = item.cells[i].split(/ *\\| */);\n      }\n\n      this.tokens.push(item);\n\n      continue;\n    }\n\n    // lheading\n    if (cap = this.rules.lheading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[2] === '=' ? 1 : 2,\n        text: cap[1]\n      });\n      continue;\n    }\n\n    // hr\n    if (cap = this.rules.hr.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'hr'\n      });\n      continue;\n    }\n\n    // blockquote\n    if (cap = this.rules.blockquote.exec(src)) {\n      src = src.substring(cap[0].length);\n\n      this.tokens.push({\n        type: 'blockquote_start'\n      });\n\n      cap = cap[0].replace(/^ *> ?/gm, '');\n\n      // Pass `top` to keep the current\n      // \"toplevel\" state. This is exactly\n      // how markdown.pl works.\n      this.token(cap, top);\n\n      this.tokens.push({\n        type: 'blockquote_end'\n      });\n\n      continue;\n    }\n\n    // list\n    if (cap = this.rules.list.exec(src)) {\n      src = src.substring(cap[0].length);\n      bull = cap[2];\n\n      this.tokens.push({\n        type: 'list_start',\n        ordered: bull.length > 1\n      });\n\n      // Get each top-level item.\n      cap = cap[0].match(this.rules.item);\n\n      next = false;\n      l = cap.length;\n      i = 0;\n\n      for (; i < l; i++) {\n        item = cap[i];\n\n        // Remove the list item's bullet\n        // so it is seen as the next token.\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+\\.) +/, '');\n\n        // Outdent whatever the\n        // list item contains. Hacky.\n        if (~item.indexOf('\\n ')) {\n          space -= item.length;\n          item = !this.options.pedantic\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n            : item.replace(/^ {1,4}/gm, '');\n        }\n\n        // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n        if (this.options.smartLists && i !== l - 1) {\n          b = block.bullet.exec(cap[i + 1])[0];\n          if (bull !== b && !(bull.length > 1 && b.length > 1)) {\n            src = cap.slice(i + 1).join('\\n') + src;\n            i = l - 1;\n          }\n        }\n\n        // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === '\\n';\n          if (!loose) loose = next;\n        }\n\n        this.tokens.push({\n          type: loose\n            ? 'loose_item_start'\n            : 'list_item_start'\n        });\n\n        // Recurse.\n        this.token(item, false);\n\n        this.tokens.push({\n          type: 'list_item_end'\n        });\n      }\n\n      this.tokens.push({\n        type: 'list_end'\n      });\n\n      continue;\n    }\n\n    // html\n    if (cap = this.rules.html.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: this.options.sanitize\n          ? 'paragraph'\n          : 'html',\n        pre: cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style',\n        text: cap[0]\n      });\n      continue;\n    }\n\n    // def\n    if (top && (cap = this.rules.def.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.links[cap[1].toLowerCase()] = {\n        href: cap[2],\n        title: cap[3]\n      };\n      continue;\n    }\n\n    // table (gfm)\n    if (top && (cap = this.rules.table.exec(src))) {\n      src = src.substring(cap[0].length);\n\n      item = {\n        type: 'table',\n        header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3].replace(/(?: *\\| *)?\\n$/, '').split('\\n')\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = 'right';\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = 'center';\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = 'left';\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = item.cells[i]\n          .replace(/^ *\\| *| *\\| *$/g, '')\n          .split(/ *\\| */);\n      }\n\n      this.tokens.push(item);\n\n      continue;\n    }\n\n    // top-level paragraph\n    if (top && (cap = this.rules.paragraph.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'paragraph',\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1]\n      });\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      // Top-level should never reach here.\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'text',\n        text: cap[0]\n      });\n      continue;\n    }\n\n    if (src) {\n      throw new\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return this.tokens;\n};\n\n/**\n * Inline-Level Grammar\n */\n\nvar inline = {\n  escape: /^\\\\([\\\\`*{}\\[\\]()#+\\-.!_>])/,\n  autolink: /^<([^ >]+(@|:\\/)[^ >]+)>/,\n  url: noop,\n  tag: /^<!--[\\s\\S]*?-->|^<\\/?\\w+(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/,\n  link: /^!?\\[(inside)\\]\\(href\\)/,\n  reflink: /^!?\\[(inside)\\]\\s*\\[([^\\]]*)\\]/,\n  nolink: /^!?\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\]/,\n  strong: /^__([\\s\\S]+?)__(?!_)|^\\*\\*([\\s\\S]+?)\\*\\*(?!\\*)/,\n  em: /^\\b_((?:__|[\\s\\S])+?)_\\b|^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,\n  code: /^(`+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/,\n  br: /^ {2,}\\n(?!\\s*$)/,\n  del: noop,\n  text: /^[\\s\\S]+?(?=[\\\\<!\\[_*`]| {2,}\\n|$)/\n};\n\ninline._inside = /(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*/;\ninline._href = /\\s*<?([\\s\\S]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*/;\n\ninline.link = replace(inline.link)\n  ('inside', inline._inside)\n  ('href', inline._href)\n  ();\n\ninline.reflink = replace(inline.reflink)\n  ('inside', inline._inside)\n  ();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n  em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: replace(inline.escape)('])', '~|])')(),\n  url: /^(https?:\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])/,\n  del: /^~~(?=\\S)([\\s\\S]*?\\S)~~/,\n  text: replace(inline.text)\n    (']|', '~]|')\n    ('|', '|https?://|')\n    ()\n});\n\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: replace(inline.br)('{2,}', '*')(),\n  text: replace(inline.gfm.text)('{2,}', '*')()\n});\n\n/**\n * Inline Lexer & Compiler\n */\n\nfunction InlineLexer(links, options) {\n  this.options = options || marked.defaults;\n  this.links = links;\n  this.rules = inline.normal;\n  this.renderer = this.options.renderer || new Renderer;\n\n  if (!this.links) {\n    throw new\n      Error('Tokens array requires a `links` property.');\n  }\n\n  if (this.options.gfm) {\n    if (this.options.breaks) {\n      this.rules = inline.breaks;\n    } else {\n      this.rules = inline.gfm;\n    }\n  } else if (this.options.pedantic) {\n    this.rules = inline.pedantic;\n  }\n}\n\n/**\n * Expose Inline Rules\n */\n\nInlineLexer.rules = inline;\n\n/**\n * Static Lexing/Compiling Method\n */\n\nInlineLexer.output = function(src, links, options) {\n  var inline = new InlineLexer(links, options);\n  return inline.output(src);\n};\n\n/**\n * Lexing/Compiling\n */\n\nInlineLexer.prototype.output = function(src) {\n  var out = ''\n    , link\n    , text\n    , href\n    , cap;\n\n  while (src) {\n    // escape\n    if (cap = this.rules.escape.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += cap[1];\n      continue;\n    }\n\n    // autolink\n    if (cap = this.rules.autolink.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[2] === '@') {\n        text = cap[1].charAt(6) === ':'\n          ? this.mangle(cap[1].substring(7))\n          : this.mangle(cap[1]);\n        href = this.mangle('mailto:') + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // url (gfm)\n    if (cap = this.rules.url.exec(src)) {\n      src = src.substring(cap[0].length);\n      text = escape(cap[1]);\n      href = text;\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // tag\n    if (cap = this.rules.tag.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.options.sanitize\n        ? escape(cap[0])\n        : cap[0];\n      continue;\n    }\n\n    // link\n    if (cap = this.rules.link.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.outputLink(cap, {\n        href: cap[2],\n        title: cap[3]\n      });\n      continue;\n    }\n\n    // reflink, nolink\n    if ((cap = this.rules.reflink.exec(src))\n        || (cap = this.rules.nolink.exec(src))) {\n      src = src.substring(cap[0].length);\n      link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = this.links[link.toLowerCase()];\n      if (!link || !link.href) {\n        out += cap[0].charAt(0);\n        src = cap[0].substring(1) + src;\n        continue;\n      }\n      out += this.outputLink(cap, link);\n      continue;\n    }\n\n    // strong\n    if (cap = this.rules.strong.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.strong(this.output(cap[2] || cap[1]));\n      continue;\n    }\n\n    // em\n    if (cap = this.rules.em.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.em(this.output(cap[2] || cap[1]));\n      continue;\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.codespan(escape(cap[2], true));\n      continue;\n    }\n\n    // br\n    if (cap = this.rules.br.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.br();\n      continue;\n    }\n\n    // del (gfm)\n    if (cap = this.rules.del.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.del(this.output(cap[1]));\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += escape(this.smartypants(cap[0]));\n      continue;\n    }\n\n    if (src) {\n      throw new\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return out;\n};\n\n/**\n * Compile Link\n */\n\nInlineLexer.prototype.outputLink = function(cap, link) {\n  var href = escape(link.href)\n    , title = link.title ? escape(link.title) : null;\n\n  return cap[0].charAt(0) !== '!'\n    ? this.renderer.link(href, title, this.output(cap[1]))\n    : this.renderer.image(href, title, escape(cap[1]));\n};\n\n/**\n * Smartypants Transformations\n */\n\nInlineLexer.prototype.smartypants = function(text) {\n  if (!this.options.smartypants) return text;\n  return text\n    // em-dashes\n    .replace(/--/g, '\\u2014')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n};\n\n/**\n * Mangle Links\n */\n\nInlineLexer.prototype.mangle = function(text) {\n  var out = ''\n    , l = text.length\n    , i = 0\n    , ch;\n\n  for (; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n};\n\n/**\n * Renderer\n */\n\nfunction Renderer() {}\n\nRenderer.prototype.code = function(code, lang, escaped, options) {\n  options = options || {};\n\n  if (options.highlight) {\n    var out = options.highlight(code, lang);\n    if (out != null && out !== code) {\n      escaped = true;\n      code = out;\n    }\n  }\n\n  if (!lang) {\n    return '<pre><code>'\n      + (escaped ? code : escape(code, true))\n      + '\\n</code></pre>';\n  }\n\n  return '<pre><code class=\"'\n    + options.langPrefix\n    + lang\n    + '\">'\n    + (escaped ? code : escape(code))\n    + '\\n</code></pre>\\n';\n};\n\nRenderer.prototype.blockquote = function(quote) {\n  return '<blockquote>\\n' + quote + '</blockquote>\\n';\n};\n\nRenderer.prototype.html = function(html) {\n  return html;\n};\n\nRenderer.prototype.heading = function(text, level, raw, options) {\n  return '<h'\n    + level\n    + ' id=\"'\n    + options.headerPrefix\n    + raw.toLowerCase().replace(/[^\\w]+/g, '-')\n    + '\">'\n    + text\n    + '</h'\n    + level\n    + '>\\n';\n};\n\nRenderer.prototype.hr = function() {\n  return '<hr>\\n';\n};\n\nRenderer.prototype.list = function(body, ordered) {\n  var type = ordered ? 'ol' : 'ul';\n  return '<' + type + '>\\n' + body + '</' + type + '>\\n';\n};\n\nRenderer.prototype.listitem = function(text) {\n  return '<li>' + text + '</li>\\n';\n};\n\nRenderer.prototype.paragraph = function(text) {\n  return '<p>' + text + '</p>\\n';\n};\n\nRenderer.prototype.table = function(header, body) {\n  return '<table>\\n'\n    + '<thead>\\n'\n    + header\n    + '</thead>\\n'\n    + '<tbody>\\n'\n    + body\n    + '</tbody>\\n'\n    + '</table>\\n';\n};\n\nRenderer.prototype.tablerow = function(content) {\n  return '<tr>\\n' + content + '</tr>\\n';\n};\n\nRenderer.prototype.tablecell = function(content, flags) {\n  var type = flags.header ? 'th' : 'td';\n  var tag = flags.align\n    ? '<' + type + ' style=\"text-align:' + flags.align + '\">'\n    : '<' + type + '>';\n  return tag + content + '</' + type + '>\\n';\n};\n\n// span level renderer\nRenderer.prototype.strong = function(text) {\n  return '<strong>' + text + '</strong>';\n};\n\nRenderer.prototype.em = function(text) {\n  return '<em>' + text + '</em>';\n};\n\nRenderer.prototype.codespan = function(text) {\n  return '<code>' + text + '</code>';\n};\n\nRenderer.prototype.br = function() {\n  return '<br>';\n};\n\nRenderer.prototype.del = function(text) {\n  return '<del>' + text + '</del>';\n};\n\nRenderer.prototype.link = function(href, title, text) {\n  var out = '<a href=\"' + href + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += '>' + text + '</a>';\n  return out;\n};\n\nRenderer.prototype.image = function(href, title, text) {\n  var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += '>';\n  return out;\n};\n\n/**\n * Parsing & Compiling\n */\n\nfunction Parser(options) {\n  this.tokens = [];\n  this.token = null;\n  this.options = options || marked.defaults;\n  this.options.renderer = this.options.renderer || new Renderer;\n  this.renderer = this.options.renderer;\n}\n\n/**\n * Static Parse Method\n */\n\nParser.parse = function(src, options, renderer) {\n  var parser = new Parser(options, renderer);\n  return parser.parse(src);\n};\n\n/**\n * Parse Loop\n */\n\nParser.prototype.parse = function(src) {\n  this.inline = new InlineLexer(src.links, this.options, this.renderer);\n  this.tokens = src.reverse();\n\n  var out = '';\n  while (this.next()) {\n    out += this.tok();\n  }\n\n  return out;\n};\n\n/**\n * Next Token",
          "filepath": "data/repos/markedjs/marked-0.3/lib/marked.js",
          "repo": "markedjs/marked",
          "version": "0.3",
          "chunk_index": 0
        }
      },
      {
        "id": "32a2843a-5deb-4e96-9b87-b69de90cc7b4",
        "score": 0.015873015873015872,
        "payload": {
          "text": "# marked\n\n> A full-featured markdown parser and compiler, written in javascript. Built\n> for speed.\n\n[![NPM version](https://badge.fury.io/js/marked.png)][badge]\n\n## Install\n\n``` bash\nnpm install marked --save\n```\n\n## Usage\n\nMinimal usage:\n\n```js\nconsole.log(marked('I am using __markdown__.'));\n// Outputs: <p>I am using <strong>markdown</strong>.</p>\n```\n\nExample using all options:\n\n```js\nmarked.setOptions({\n  gfm: true,\n  tables: true,\n  breaks: false,\n  pedantic: false,\n  sanitize: true,\n  smartLists: true,\n  smartypants: false,\n});\n\n// Using async version of marked\nmarked('I am using __markdown__.', function (err, content) {\n  if (err) throw err;\n  console.log(content);\n});\n```\n\n## marked(markdownString, [options], [callback])\n\n### markdownString\n\nType: `String`\n\nString of markdown source to be compiled.\n\n### options\n\nType: `Object`\n\nHash of options. Can also be set using the `marked.setOptions` method as seen\nabove.\n\n### callback\n\nType: `Function`\n\nFunction called when the `markdownString` has been fully parsed when using\nasync highlighting. If the `options` argument is omitted, this can be used as\nthe second argument as seen above:\n\n## Options\n\n### gfm\n\nType: `Boolean`\nDefault: `true`\n\nEnable [GitHub flavored markdown][gfm].\n\n### tables\n\nType: `Boolean`\nDefault: `true`\n\nEnable GFM [tables][tables].\nThis option requires the `gfm` option to be true.\n\n### breaks\n\nType: `Boolean`\nDefault: `false`\n\nEnable GFM [line breaks][breaks].\nThis option requires the `gfm` option to be true.\n\n### pedantic\n\nType: `Boolean`\nDefault: `false`\n\nConform to obscure parts of `markdown.pl` as much as possible. Don't fix any of\nthe original markdown bugs or poor behavior.\n\n### sanitize\n\nType: `Boolean`\nDefault: `false`\n\nSanitize the output. Ignore any HTML that has been input.\n\n### smartLists\n\nType: `Boolean`\nDefault: `true`\n\nUse smarter list behavior than the original markdown. May eventually be\ndefault with the old behavior moved into `pedantic`.\n\n### smartypants\n\nType: `Boolean`\nDefault: `false`\n\nUse \"smart\" typograhic punctuation for things like quotes and dashes.\n\n### renderer\n\nType: `Renderer`\nDefault: `new Renderer()`\n\nA renderer instance for rendering ast to html. Learn more on the Renderer\nsection.\n\n## Renderer\n\nRenderer is a the new way for rendering tokens to html. Here is a simple\nexample:\n\n```javascript\nvar r = new marked.Renderer()\nr.blockcode = function(code, lang) {\n  return highlight(lang, code).value;\n}\n\nconsole.log(marked(text, {renderer: r}))\n```\n\nYou can control anything you want.\n\n### Block Level\n\n- code(code, language)\n- blockquote(quote)\n- html(html)\n- heading(text, level)\n- hr()\n- list(body, ordered)\n- listitem(text)\n- paragraph(text)\n- table(header, body)\n- tablerow(content)\n- tablecell(content, flags)\n\n`flags` is an object like this:\n\n```\n{\n    header: true,\n    align: 'center'\n}\n```\n\n### Span Level\n\n- strong(text)\n- em(text)\n- codespan(code)\n- br()\n- del(text)\n- link(href, title, text)\n- image(href, title, text)\n\n## Access to lexer and parser\n\nYou also have direct access to the lexer and parser if you so desire.\n\n``` js\nvar tokens = marked.lexer(text, options);\nconsole.log(marked.parser(tokens));\n```\n\n``` js\nvar lexer = new marked.Lexer(options);\nvar tokens = lexer.lex(text);\nconsole.log(tokens);\nconsole.log(lexer.rules);\n```\n\n## CLI\n\n``` bash\n$ marked -o hello.html\nhello world\n^D\n$ cat hello.html\n<p>hello world</p>\n```\n\n## Benchmarks\n\nnode v0.4.x\n\n``` bash\n$ node test --bench\nmarked completed in 12071ms.\nshowdown (reuse converter) completed in 27387ms.\nshowdown (new converter) completed in 75617ms.\nmarkdown-js completed in 70069ms.\n```\n\nnode v0.6.x\n\n``` bash\n$ node test --bench\nmarked completed in 6448ms.\nmarked (gfm) completed in 7357ms.\nmarked (pedantic) completed in 6092ms.\ndiscount completed in 7314ms.\nshowdown (reuse converter) completed in 16018ms.\nshowdown (new converter) completed in 18234ms.\nmarkdown-js completed in 24270ms.\n```\n\n__Marked is now faster than Discount, which is written in C.__\n\nFor those feeling skeptical: These benchmarks run the entire markdown test suite\n1000 times. The test suite tests every feature. It doesn't cater to specific\naspects.\n\nnode v0.8.x\n\n``` bash\n$ node test --bench\nmarked completed in 3411ms.\nmarked (gfm) completed in 3727ms.\nmarked (pedantic) completed in 3201ms.\nrobotskirt completed in 808ms.\nshowdown (reuse converter) completed in 11954ms.\nshowdown (new converter) completed in 17774ms.\nmarkdown-js completed in 17191ms.\n```\n\n## Another Javascript Markdown Parser\n\nThe point of marked was to create a markdown compiler where it was possible to\nfrequently parse huge chunks of markdown without having to worry about\ncaching the compiled output somehow...or blocking for an unnecesarily long time.\n\nmarked is very concise and still implements all markdown features. It is also\nnow fully compatible with the client-side.\n\nmarked more or less passes the official markdown test suite in its\nentirety. This is important because a surprising number of markdown compilers\ncannot pass more than a few tests. It was very difficult to get marked as\ncompliant as it is. It could have cut corners in several areas for the sake\nof performance, but did not in order to be exactly what you expect in terms\nof a markdown rendering. In fact, this is why marked could be considered at a\ndisadvantage in the benchmarks above.\n\nAlong with implementing every markdown feature, marked also implements [GFM\nfeatures][gfmf].\n\n### High level\n\nYou can customize the result with a customized renderer.\n\n``` js\nvar renderer = new marked.Renderer()\n\nrenderer.heading = function(text, level) {\n  return '<div class=\"h-' + level + '\">' + text + '</div>'\n}\n\nvar parse = function(src, options) {\n  options = options || {};\n  options.renderer = renderer\n  return marked.parser(marked.lexer(src, options), options);\n}\n\nconsole.log(parse('# h1'))\n```\n\nThe renderer API:\n\n```\ncode: function(code, lang)\nblockquote: function(text)\nhtml: function(html)\n\nheading: function(text, level)\nparagraph: function(text)\n\nhr: function()\n\nlist: function(contents, isOrdered)\nlistitem: function(text)\n\ntable: function(header, body)\ntablerow: function(content)\ntablecell: function(text, flags)\n// flags: {header: false, align: 'center'}\n```\n\n### Pro level\n\nYou also have direct access to the lexer and parser if you so desire.\n\n``` js\nvar tokens = marked.lexer(text, options);\nconsole.log(marked.parser(tokens));\n```\n\n``` js\nvar lexer = new marked.Lexer(options);\nvar tokens = lexer.lex(text);\nconsole.log(tokens);\nconsole.log(lexer.rules);\n```\n\n``` bash\n$ node\n> require('marked').lexer('> i am using marked.')\n[ { type: 'blockquote_start' },\n  { type: 'paragraph',\n    text: 'i am using marked.' },\n  { type: 'blockquote_end' },\n  links: {} ]\n```\n\n## Running Tests & Contributing\n\nIf you want to submit a pull request, make sure your changes pass the test\nsuite. If you're adding a new feature, be sure to add your own test.\n\nThe marked test suite is set up slightly strangely: `test/new` is for all tests\nthat are not part of the original markdown.pl test suite (this is where your\ntest should go if you make one). `test/original` is only for the original\nmarkdown.pl tests. `test/tests` houses both types of tests after they have been\ncombined and moved/generated by running `node test --fix` or `marked --test\n--fix`.\n\nIn other words, if you have a test to add, add it to `test/new/` and then\nregenerate the tests with `node test --fix`. Commit the result. If your test\nuses a certain feature, for example, maybe it assumes GFM is *not* enabled, you\ncan add `.nogfm` to the filename. So, `my-test.text` becomes\n`my-test.nogfm.text`. You can do this with any marked option. Say you want\nline breaks and smartypants enabled, your filename should be:\n`my-test.breaks.smartypants.text`.\n\nTo run the tests:\n\n``` bash\ncd marked/\nnode test\n```\n\n### Contribution and License Agreement\n\nIf you contribute code to this project, you are implicitly allowing your code\nto be distributed under the MIT license. You are also implicitly verifying that\nall code is your original work. `</legalese>`\n\n## License\n\nCopyright (c) 2011-2013, Christopher Jeffrey. (MIT License)\n\nSee LICENSE for more info.\n\n[gfm]: https://help.github.com/articles/github-flavored-markdown\n[gfmf]: http://github.github.com/github-flavored-markdown/\n[pygmentize]: https://github.com/rvagg/node-pygmentize-bundled\n[highlight]: https://github.com/isagalaev/highlight.js\n[badge]: http://badge.fury.io/js/marked\n[tables]: https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#wiki-tables\n[breaks]: https://help.github.com/articles/github-flavored-markdown#newlines\n",
          "filepath": "data/repos/markedjs/marked-0.3/README.md",
          "repo": "markedjs/marked",
          "version": "0.3",
          "chunk_index": 0
        }
      },
      {
        "id": "6c8a9cf7-22c0-4769-9a33-6214fc147506",
        "score": 0.015625,
        "payload": {
          "text": "#!/usr/bin/env node\n\n/**\n * marked tests\n * Copyright (c) 2011-2013, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n */\n\n/**\n * Modules\n */\n\nvar fs = require('fs')\n  , path = require('path')\n  , marked = require('../');\n\n/**\n * Load Tests\n */\n\nfunction load() {\n  var dir = __dirname + '/tests'\n    , files = {}\n    , list\n    , file\n    , i\n    , l;\n\n  list = fs\n    .readdirSync(dir)\n    .filter(function(file) {\n      return path.extname(file) !== '.html';\n    })\n    .sort(function(a, b) {\n      a = path.basename(a).toLowerCase().charCodeAt(0);\n      b = path.basename(b).toLowerCase().charCodeAt(0);\n      return a > b ? 1 : (a < b ? -1 : 0);\n    });\n\n  i = 0;\n  l = list.length;\n\n  for (; i < l; i++) {\n    file = path.join(dir, list[i]);\n    files[path.basename(file)] = {\n      text: fs.readFileSync(file, 'utf8'),\n      html: fs.readFileSync(file.replace(/[^.]+$/, 'html'), 'utf8')\n    };\n  }\n\n  return files;\n}\n\n/**\n * Test Runner\n */\n\nfunction runTests(engine, options) {\n  if (typeof engine !== 'function') {\n    options = engine;\n    engine = null;\n  }\n\n  var engine = engine || marked\n    , options = options || {}\n    , files = options.files || load()\n    , complete = 0\n    , failed = 0\n    , failures = []\n    , keys = Object.keys(files)\n    , i = 0\n    , len = keys.length\n    , filename\n    , file\n    , flags\n    , text\n    , html\n    , j\n    , l;\n\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n\nmain:\n  for (; i < len; i++) {\n    filename = keys[i];\n    file = files[filename];\n\n    if (marked._original) {\n      marked.defaults = marked._original;\n      delete marked._original;\n    }\n\n    flags = filename.split('.').slice(1, -1);\n    if (flags.length) {\n      marked._original = marked.defaults;\n      marked.defaults = {};\n      Object.keys(marked._original).forEach(function(key) {\n        marked.defaults[key] = marked._original[key];\n      });\n      flags.forEach(function(key) {\n        var val = true;\n        if (key.indexOf('no') === 0) {\n          key = key.substring(2);\n          val = false;\n        }\n        if (marked.defaults.hasOwnProperty(key)) {\n          marked.defaults[key] = val;\n        }\n      });\n    }\n\n    try {\n      text = engine(file.text).replace(/\\s/g, '');\n      html = file.html.replace(/\\s/g, '');\n    } catch(e) {\n      console.log('%s failed.', filename);\n      throw e;\n    }\n\n    j = 0;\n    l = html.length;\n\n    for (; j < l; j++) {\n      if (text[j] !== html[j]) {\n        failed++;\n        failures.push(filename);\n\n        text = text.substring(\n          Math.max(j - 30, 0),\n          Math.min(j + 30, text.length));\n\n        html = html.substring(\n          Math.max(j - 30, 0),\n          Math.min(j + 30, html.length));\n\n        console.log(\n          '\\n#%d. %s failed at offset %d. Near: \"%s\".\\n',\n          i + 1, filename, j, text);\n\n        console.log('\\nGot:\\n%s\\n', text.trim() || text);\n        console.log('\\nExpected:\\n%s\\n', html.trim() || html);\n\n        if (options.stop) {\n          break main;\n        }\n\n        continue main;\n      }\n    }\n\n    complete++;\n    console.log('#%d. %s completed.', i + 1, filename);\n  }\n\n  console.log('%d/%d tests completed successfully.', complete, len);\n  if (failed) console.log('%d/%d tests failed.', failed, len);\n\n  // Tests currently failing.\n  if (~failures.indexOf('def_blocks.text')\n      && ~failures.indexOf('double_link.text')\n      && ~failures.indexOf('gfm_code_hr_list.text')) {\n    failed -= 3;\n  }\n\n  return !failed;\n}\n\n/**\n * Benchmark a function\n */\n\nfunction bench(name, func) {\n  var files = bench.files || load();\n\n  if (!bench.files) {\n    bench.files = files;\n\n    // Change certain tests to allow\n    // comparison to older benchmark times.\n    fs.readdirSync(__dirname + '/new').forEach(function(name) {\n      if (path.extname(name) === '.html') return;\n      if (name === 'main.text') return;\n      delete files[name];\n    });\n\n    files['backslash_escapes.text'] = {\n      text: 'hello world \\\\[how](are you) today'\n    };\n\n    files['main.text'].text = files['main.text'].text.replace('* * *\\n\\n', '');\n  }\n\n  var start = Date.now()\n    , times = 1000\n    , keys = Object.keys(files)\n    , i\n    , l = keys.length\n    , filename\n    , file;\n\n  while (times--) {\n    for (i = 0; i < l; i++) {\n      filename = keys[i];\n      file = files[filename];\n      func(file.text);\n    }\n  }\n\n  console.log('%s completed in %dms.', name, Date.now() - start);\n}\n\n/**\n * Benchmark all engines\n */\n\nfunction runBench(options) {\n  var options = options || {};\n\n  // Non-GFM, Non-pedantic\n  marked.setOptions({\n    gfm: false,\n    tables: false,\n    breaks: false,\n    pedantic: false,\n    sanitize: false,\n    smartLists: false\n  });\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked', marked);\n\n  // GFM\n  marked.setOptions({\n    gfm: true,\n    tables: false,\n    breaks: false,\n    pedantic: false,\n    sanitize: false,\n    smartLists: false\n  });\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked (gfm)', marked);\n\n  // Pedantic\n  marked.setOptions({\n    gfm: false,\n    tables: false,\n    breaks: false,\n    pedantic: true,\n    sanitize: false,\n    smartLists: false\n  });\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked (pedantic)', marked);\n\n  // robotskirt\n  try {\n    bench('robotskirt', (function() {\n      var rs = require('robotskirt');\n      return function(text) {\n        var parser = rs.Markdown.std();\n        return parser.render(text);\n      };\n    })());\n  } catch (e) {\n    console.log('Could not bench robotskirt.');\n  }\n\n  // showdown\n  try {\n    bench('showdown (reuse converter)', (function() {\n      var Showdown = require('showdown');\n      var convert = new Showdown.converter();\n      return function(text) {\n        return convert.makeHtml(text);\n      };\n    })());\n    bench('showdown (new converter)', (function() {\n      var Showdown = require('showdown');\n      return function(text) {\n        var convert = new Showdown.converter();\n        return convert.makeHtml(text);\n      };\n    })());\n  } catch (e) {\n    console.log('Could not bench showdown.');\n  }\n\n  // markdown.js\n  try {\n    bench('markdown.js', require('markdown').parse);\n  } catch (e) {\n    console.log('Could not bench markdown.js.');\n  }\n}\n\n/**\n * A simple one-time benchmark\n */\n\nfunction time(options) {\n  var options = options || {};\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked', marked);\n}\n\n/**\n * Markdown Test Suite Fixer\n *   This function is responsible for \"fixing\"\n *   the markdown test suite. There are\n *   certain aspects of the suite that\n *   are strange or might make tests\n *   fail for reasons unrelated to\n *   conformance.\n */\n\nfunction fix(options) {\n  ['tests', 'original', 'new'].forEach(function(dir) {\n    try {\n      fs.mkdirSync(path.resolve(__dirname, dir), 0755);\n    } catch (e) {\n      ;\n    }\n  });\n\n  // rm -rf tests\n  fs.readdirSync(path.resolve(__dirname, 'tests')).forEach(function(file) {\n    fs.unlinkSync(path.resolve(__dirname, 'tests', file));\n  });\n\n  // cp -r original tests\n  fs.readdirSync(path.resolve(__dirname, 'original')).forEach(function(file) {\n    var nfile = file;\n    if (file.indexOf('hard_wrapped_paragraphs_with_list_like_lines.') === 0) {\n      nfile = file.replace(/\\.(text|html)$/, '.nogfm.$1');\n    }\n    fs.writeFileSync(path.resolve(__dirname, 'tests', nfile),\n      fs.readFileSync(path.resolve(__dirname, 'original', file)));\n  });\n\n  // node fix.js\n  var dir = __dirname + '/tests';\n\n  fs.readdirSync(dir).filter(function(file) {\n    return path.extname(file) === '.html';\n  }).forEach(function(file) {\n    var file = path.join(dir, file)\n      , html = fs.readFileSync(file, 'utf8');\n\n    // fix unencoded quotes\n    html = html\n      .replace(/='([^\\n']*)'(?=[^<>\\n]*>)/g, '=&__APOS__;$1&__APOS__;')\n      .replace(/=\"([^\\n\"]*)\"(?=[^<>\\n]*>)/g, '=&__QUOT__;$1&__QUOT__;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&#39;')\n      .replace(/&__QUOT__;/g, '\"')\n      .replace(/&__APOS__;/g, '\\'');\n\n    // add heading id's\n    html = html.replace(/<(h[1-6])>([^<]+)<\\/\\1>/g, function(s, h, text) {\n      var id = text\n        .replace(/&#39;/g, '\\'')\n        .replace(/&quot;/g, '\"')\n        .replace(/&gt;/g, '>')\n        .replace(/&lt;/g, '<')\n        .replace(/&amp;/g, '&');\n\n      id = id.toLowerCase().replace(/[^\\w]+/g,\u00a0'-');\n\n      return '<' + h + ' id=\"' + id + '\">' + text + '</' + h + '>';\n    });\n\n    fs.writeFileSync(file, html);\n  });\n\n  // turn <hr /> into <hr>\n  fs.readdirSync(dir).forEach(function(file) {\n    var file = path.join(dir, file)\n      , text = fs.readFileSync(file, 'utf8');\n\n    text = text.replace(/(<|&lt;)hr\\s*\\/(>|&gt;)/g, '$1hr$2');\n\n    fs.writeFileSync(file, text);\n  });\n\n  // markdown does some strange things.\n  // it does not encode naked `>`, marked does.\n  (function() {\n    var file = dir + '/amps_and_angles_encoding.html';\n    var html = fs.readFileSync(file, 'utf8')\n      .replace('6 > 5.', '6 &gt; 5.');\n\n    fs.writeFileSync(file, html);\n  })();\n\n  // cp new/* tests/\n  fs.readdirSync(path.resolve(__dirname, 'new')).forEach(function(file) {\n    fs.writeFileSync(path.resolve(__dirname, 'tests', file),\n      fs.readFileSync(path.resolve(__dirname, 'new', file)));\n  });\n}\n\n/**\n * Argument Parsing\n */\n\nfunction parseArg(argv) {\n  var argv = process.argv.slice(2)\n    , options = {}\n    , orphans = []\n    , arg;\n\n  function getarg() {\n    var arg = argv.shift();\n\n    if (arg.indexOf('--') === 0) {\n      // e.g. --opt\n      arg = arg.split('=');\n      if (arg.length > 1) {\n        // e.g. --opt=val\n        argv.unshift(arg.slice(1).join('='));\n      }\n      arg = arg[0];\n    } else if (arg[0] === '-') {\n      if (arg.length > 2) {\n        // e.g. -abc\n        argv = arg.substring(1).split('').map(function(ch) {\n          return '-' + ch;\n        }).concat(argv);\n        arg = argv.shift();\n      } else {\n        // e.g. -a\n      }\n    } else {\n      // e.g. foo\n    }\n\n    return arg;\n  }\n\n  while (argv.length) {\n    arg = getarg();\n    switch (arg) {\n      case '-f':\n      case '--fix':\n      case 'fix':\n        options.fix = true;\n        break;\n      case '-b':\n      case '--bench':\n        options.bench = true;\n        break;\n      case '-s':\n      case '--stop':\n        options.stop = true;\n        break;\n      case '-t':\n      case '--time':\n        options.time = true;\n        break;\n      default:\n        if (arg.indexOf('--') === 0) {\n          opt = camelize(arg.replace(/^--(no-)?/, ''));\n          if (!marked.defaults.hasOwnProperty(opt)) {\n            continue;\n          }\n          options.marked = options.marked || {};\n          if (arg.indexOf('--no-') === 0) {\n            options.marked[opt] = typeof marked.defaults[opt] !== 'boolean'\n              ? null\n              : false;\n          } else {\n            options.marked[opt] = typeof marked.defaults[opt] !== 'boolean'\n              ? argv.shift()\n              : true;\n          }\n        } else {\n          orphans.push(arg);\n        }\n        break;\n    }\n  }\n\n  return options;\n}\n\n/**\n * Helpers\n */\n\nfunction camelize(text) {\n  return text.replace(/(\\w)-(\\w)/g, function(_, a, b) {\n    return a + b.toUpperCase();\n  });\n}\n\n/**\n * Main\n */\n\nfunction main(argv) {\n  var opt = parseArg();\n\n  if (opt.fix) {\n    return fix(opt);\n  }\n\n  if (opt.bench) {\n    return runBench(opt);\n  }\n\n  if (opt.time) {\n    return time(opt);\n  }\n\n  return runTests(opt);\n}\n\n/**\n * Execute\n */\n\nif (!module.parent) {\n  process.title = 'marked';\n  process.exit(main(process.argv.slice()) ? 0 : 1);\n} else {\n  exports = main;\n  exports.main = main;\n  exports.runTests = runTests;\n  exports.runBench = runBench;\n  exports.load = load;\n  exports.bench = bench;\n  module.exports = exports;\n}\n",
          "filepath": "data/repos/markedjs/marked-0.3/test/index.js",
          "repo": "markedjs/marked",
          "version": "0.3",
          "chunk_index": 0
        }
      },
      {
        "id": "676b6860-7432-4f9e-b54d-5bb87f6cfd5c",
        "score": 0.015384615384615385,
        "payload": {
          "text": "module.exports = require('./lib/marked');\n",
          "filepath": "data/repos/markedjs/marked-0.3/index.js",
          "repo": "markedjs/marked",
          "version": "0.3",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-1178",
    "model_patch": "diff --git a/packages/examples/src/knobs/index.js b/packages/examples/src/knobs/index.js\n--- a/packages/examples/src/knobs/index.js\n+++ b/packages/examples/src/knobs/index.js\n@@ -20,6 +20,10 @@ const styles = StyleSheet.create({\n     margin: 10,\n     padding: 10,\n     flexGrow: 1,\n+    // Fix for margin auto issue in v2\n+    marginLeft: 'auto',\n+    marginRight: 'auto',\n+    alignSelf: 'center',\n   },\n });",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 110.5,
      "issue_embedding_time_ms": 110.5,
      "retrieval_time_ms_jina": 1.61,
      "retrieval_time_ms": 1.61,
      "total_retrieval_time_ms": 112.11,
      "generation_time_ms": 2408.61,
      "total_io_time_ms": 2520.71,
      "input_total_token_limit": null,
      "issue_text_tokens": 209,
      "vlm_tokens": 0,
      "retrieved_tokens": 3393,
      "prompt_template_tokens": 505,
      "total_input_prompt_tokens": 4107,
      "output_generated_tokens": 124,
      "total_io_tokens": 4231,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nmargin auto is broken in v2\\n**Describe the bug**\\r\\nRun a some snapshot tests with react-pdf examples for v1/v2 and seems like margin auto doesn't work\\r\\n\\r\\nhttps://github.com/diegomura/react-pdf/blob/master/packages/examples/src/knobs/index.js#L20\\r\\n\\r\\n![index-test-js-renders-correctly-1-diff](https://user-images.githubusercontent.com/6726016/113850039-b8736b00-97a2-11eb-857d-50470f1d52c2.png)\\r\\n> v1 on the left side v2 on the right\\r\\n\\r\\n**To Reproduce**\\r\\nSteps to reproduce the behavior including code snippet (if applies):\\r\\n1. run https://github.com/diegomura/react-pdf/blob/master/packages/examples/src/knobs/\\r\\n2. See error\\r\\n\\r\\n\\r\\n**Desktop (please complete the following information):**\\r\\n - MacOS\\r\\n - Node v14.7.0\\r\\n - React-pdf version v2.0.0\\r\\n\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n  <p align=\\\"center\\\">React renderer for creating PDF files on the browser and server<p>\\n  <p align=\\\"center\\\">\\n    <a href=\\\"https://www.npmjs.com/package/@react-pdf/renderer\\\">\\n      <img src=\\\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\\\" />\\n    </a>\\n    <a href=\\\"https://travis-ci.org/diegomura/react-pdf\\\">\\n      <img src=\\\"https://img.shields.io/travis/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\\\">\\n      <img src=\\\"https://img.shields.io/github/license/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://spectrum.chat/react-pdf\\\">\\n      <img src=\\\"https://withspectrum.github.io/badge/badge.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/prettier/prettier\\\">\\n      <img src=\\\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\\\" />\\n    </a>\\n    <a href=\\\"https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_shield\\\" alt=\\\"FOSSA Status\\\"><img src=\\\"https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=shield\\\"/></a>\\n  </p>\\n</p>\\n\\n## How to install\\n```sh\\nyarn add @react-pdf/renderer\\n```\\n\\n## How it works\\n\\n```jsx\\nimport React from 'react';\\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\\n\\n// Create styles\\nconst styles = StyleSheet.create({\\n  page: {\\n    flexDirection: 'row',\\n    backgroundColor: '#E4E4E4'\\n  },\\n  section: {\\n    margin: 10,\\n    padding: 10,\\n    flexGrow: 1\\n  }\\n});\\n\\n// Create Document Component\\nconst MyDocument = () => (\\n  <Document>\\n    <Page size=\\\"A4\\\" style={styles.page}>\\n      <View style={styles.section}>\\n        <Text>Section #1</Text>\\n      </View>\\n      <View style={styles.section}>\\n        <Text>Section #2</Text>\\n      </View>\\n    </Page>\\n  </Document>\\n);\\n```\\n\\n### `Web.` Render in DOM\\n```jsx\\nimport React from 'react';\\nimport ReactDOM from 'react-dom';\\nimport { PDFViewer } from '@react-pdf/renderer';\\n\\nconst App = () => (\\n  <PDFViewer>\\n    <MyDocument />\\n  </PDFViewer>\\n);\\n\\nReactDOM.render(<App />, document.getElementById('root'));\\n```\\n\\n### `Node.` Save in a file\\n```jsx\\nimport React from 'react';\\nimport ReactPDF from '@react-pdf/renderer';\\n\\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\\n```\\n\\n## Examples\\nFor each example, try opening `output.pdf` to see the result.\\n\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/text/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/text/\\\">Text</a>\\n      </td>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/resume/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/resume/\\\">Resume</a>\\n\\t\\t\\t</td>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/fractals/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/fractals/\\\">Fractals</a>\\n\\t\\t\\t</td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/knobs/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/knobs/\\\">Knobs</a>\\n\\t\\t\\t</td>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/pageWrap/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/pageWrap/\\\">Page wrap</a>\\n      </td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n\\n## Contributors\\n\\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\\n<a href=\\\"https://github.com/diegomura/react-pdf/graphs/contributors\\\"><img src=\\\"https://opencollective.com/react-pdf/contributors.svg?width=890\\\" /></a>\\n\\n## Sponsors\\n\\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#sponsors\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/sponsors.svg?width=890\\\"></a>\\n\\n## Backers\\n\\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#backers\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/backers.svg?width=890\\\"></a>\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_large)\\n\\n---\\n![](https://img.shields.io/npm/dt/@react-pdf/renderer.svg?style=flat)\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n  <p align=\\\"center\\\">React renderer for creating PDF files on the browser and server<p>\\n  <p align=\\\"center\\\">\\n    <a href=\\\"https://www.npmjs.com/package/@react-pdf/renderer\\\">\\n      <img src=\\\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\\\" />\\n    </a>\\n    <a href=\\\"https://travis-ci.org/diegomura/react-pdf\\\">\\n      <img src=\\\"https://img.shields.io/travis/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\\\">\\n      <img src=\\\"https://img.shields.io/github/license/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/prettier/prettier\\\">\\n      <img src=\\\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\\\" />\\n    </a>\\n    <a href=\\\"https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_shield\\\" alt=\\\"FOSSA Status\\\"><img src=\\\"https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=shield\\\"/></a>\\n  </p>\\n</p>\\n\\n> New react-pdf 2.0 was relesed. [Read about the announcement](http://react-pdf.org/blog/announcing-react-pdf-v2)\\n\\n## Lost?\\n\\nThis package is used to _create_ PDFs using React. If you wish to _display_ existing PDFs, you may be looking for [react-pdf](https://github.com/wojtekmaj/react-pdf).\\n\\n## How to install\\n```sh\\nyarn add @react-pdf/renderer\\n```\\n\\n## How it works\\n\\n```jsx\\nimport React from 'react';\\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\\n\\n// Create styles\\nconst styles = StyleSheet.create({\\n  page: {\\n    flexDirection: 'row',\\n    backgroundColor: '#E4E4E4'\\n  },\\n  section: {\\n    margin: 10,\\n    padding: 10,\\n    flexGrow: 1\\n  }\\n});\\n\\n// Create Document Component\\nconst MyDocument = () => (\\n  <Document>\\n    <Page size=\\\"A4\\\" style={styles.page}>\\n      <View style={styles.section}>\\n        <Text>Section #1</Text>\\n      </View>\\n      <View style={styles.section}>\\n        <Text>Section #2</Text>\\n      </View>\\n    </Page>\\n  </Document>\\n);\\n```\\n\\n### `Web.` Render in DOM\\n```jsx\\nimport React from 'react';\\nimport ReactDOM from 'react-dom';\\nimport { PDFViewer } from '@react-pdf/renderer';\\n\\nconst App = () => (\\n  <PDFViewer>\\n    <MyDocument />\\n  </PDFViewer>\\n);\\n\\nReactDOM.render(<App />, document.getElementById('root'));\\n```\\n\\n### `Node.` Save in a file\\n```jsx\\nimport React from 'react';\\nimport ReactPDF from '@react-pdf/renderer';\\n\\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\\n```\\n\\n## Contributors\\n\\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\\n<a href=\\\"https://github.com/diegomura/react-pdf/graphs/contributors\\\"><img src=\\\"https://opencollective.com/react-pdf/contributors.svg?width=890\\\" /></a>\\n\\n## Sponsors\\n\\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#sponsors\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/sponsors.svg?width=890\\\"></a>\\n\\n## Backers\\n\\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#backers\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/backers.svg?width=890\\\"></a>\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_large)\\n\\n---\\n![](https://img.shields.io/npm/dt/@react-pdf/renderer.svg?style=flat)\\n\\n[end of README.md]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/layout\\n\\n[end of README.md]\\n[start of index.js]\\nimport BlobStream from 'blob-stream';\\nimport FontStore from '@react-pdf/font';\\nimport renderPDF from '@react-pdf/render';\\nimport PDFDocument from '@react-pdf/pdfkit';\\nimport layoutDocument from '@react-pdf/layout';\\n\\nimport createRenderer from './renderer';\\nimport { version } from '../package.json';\\n\\nconst fontStore = new FontStore();\\n\\nconst pdf = (initialValue, onChange) => {\\n  const container = { type: 'ROOT', document: null };\\n  const renderer = createRenderer({ onChange });\\n  const mountNode = renderer.createContainer(container);\\n\\n  const updateContainer = doc => {\\n    renderer.updateContainer(doc, mountNode, null);\\n  };\\n\\n  if (initialValue) updateContainer(initialValue);\\n\\n  const render = async () => {\\n    const ctx = new PDFDocument({ autoFirstPage: false });\\n    const layout = await layoutDocument(container.document, fontStore);\\n    return renderPDF(ctx, layout);\\n  };\\n\\n  const callOnRender = (params = {}) => {\\n    if (container.document.props.onRender) {\\n      container.document.props.onRender(params);\\n    }\\n  };\\n\\n  const toBlob = async () => {\\n    const instance = await render();\\n    const stream = instance.pipe(BlobStream());\\n\\n    return new Promise((resolve, reject) => {\\n      stream.on('finish', () => {\\n        try {\\n          const blob = stream.toBlob('application/pdf');\\n          callOnRender({ blob });\\n          resolve(blob);\\n        } catch (error) {\\n          reject(error);\\n        }\\n      });\\n\\n      stream.on('error', reject);\\n    });\\n  };\\n\\n  const toBuffer = async () => {\\n    callOnRender();\\n    return render();\\n  };\\n\\n  const toString = async () => {\\n    let result = '';\\n    const instance = await render();\\n\\n    return new Promise((resolve, reject) => {\\n      try {\\n        instance.on('data', buffer => {\\n          result += buffer;\\n        });\\n\\n        instance.on('end', () => {\\n          callOnRender();\\n          resolve(result);\\n        });\\n      } catch (error) {\\n        reject(error);\\n      }\\n    });\\n  };\\n\\n  return {\\n    container,\\n    toBlob,\\n    toBuffer,\\n    toString,\\n    updateContainer,\\n  };\\n};\\n\\nconst Font = fontStore;\\n\\nconst StyleSheet = {\\n  create: s => s,\\n};\\n\\nexport { version, Font, StyleSheet, pdf, createRenderer };\\n\\n[end of index.js]\\n[start of bug_report.md]\\n---\\nname: Bug report\\nabout: Create a report to help us improve\\ntitle: ''\\nlabels: ''\\nassignees: ''\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior including code snippet (if applies):\\n1. Go to '...'\\n2. Click on '....'\\n3. Scroll down to '....'\\n4. See error\\n\\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n**Screenshots**\\nIf applicable, add screenshots to help explain your problem.\\n\\n**Desktop (please complete the following information):**\\n - OS: [e.g. MacOS, Windows]\\n - Browser [e.g. chrome, safari]\\n - React-pdf version [e.g. v1.1.0]\\n\\n<!-- Love react-pdf? Please consider supporting our collective:\\n\\ud83d\\udc49  https://opencollective.com/react-pdf/donate -->\\n\\n[end of bug_report.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "README.md",
        "README.md",
        "README.md",
        "index.js",
        "bug_report.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "adceb749-ad96-47f9-b286-0f8d059de07f",
        "score": 0.01639344262295082,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n  <p align=\"center\">React renderer for creating PDF files on the browser and server<p>\n  <p align=\"center\">\n    <a href=\"https://www.npmjs.com/package/@react-pdf/renderer\">\n      <img src=\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\" />\n    </a>\n    <a href=\"https://travis-ci.org/diegomura/react-pdf\">\n      <img src=\"https://img.shields.io/travis/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\">\n      <img src=\"https://img.shields.io/github/license/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://spectrum.chat/react-pdf\">\n      <img src=\"https://withspectrum.github.io/badge/badge.svg\" />\n    </a>\n    <a href=\"https://github.com/prettier/prettier\">\n      <img src=\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\" />\n    </a>\n    <a href=\"https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_shield\" alt=\"FOSSA Status\"><img src=\"https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=shield\"/></a>\n  </p>\n</p>\n\n## How to install\n```sh\nyarn add @react-pdf/renderer\n```\n\n## How it works\n\n```jsx\nimport React from 'react';\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\n\n// Create styles\nconst styles = StyleSheet.create({\n  page: {\n    flexDirection: 'row',\n    backgroundColor: '#E4E4E4'\n  },\n  section: {\n    margin: 10,\n    padding: 10,\n    flexGrow: 1\n  }\n});\n\n// Create Document Component\nconst MyDocument = () => (\n  <Document>\n    <Page size=\"A4\" style={styles.page}>\n      <View style={styles.section}>\n        <Text>Section #1</Text>\n      </View>\n      <View style={styles.section}>\n        <Text>Section #2</Text>\n      </View>\n    </Page>\n  </Document>\n);\n```\n\n### `Web.` Render in DOM\n```jsx\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { PDFViewer } from '@react-pdf/renderer';\n\nconst App = () => (\n  <PDFViewer>\n    <MyDocument />\n  </PDFViewer>\n);\n\nReactDOM.render(<App />, document.getElementById('root'));\n```\n\n### `Node.` Save in a file\n```jsx\nimport React from 'react';\nimport ReactPDF from '@react-pdf/renderer';\n\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\n```\n\n## Examples\nFor each example, try opening `output.pdf` to see the result.\n\n<table>\n\t<tbody>\n\t\t<tr>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/text/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/text/\">Text</a>\n      </td>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/resume/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/resume/\">Resume</a>\n\t\t\t</td>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/fractals/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/fractals/\">Fractals</a>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n<table>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/knobs/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/knobs/\">Knobs</a>\n\t\t\t</td>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/pageWrap/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/pageWrap/\">Page wrap</a>\n      </td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n## Contributors\n\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\n<a href=\"https://github.com/diegomura/react-pdf/graphs/contributors\"><img src=\"https://opencollective.com/react-pdf/contributors.svg?width=890\" /></a>\n\n## Sponsors\n\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\n\n<a href=\"https://opencollective.com/react-pdf#sponsors\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/sponsors.svg?width=890\"></a>\n\n## Backers\n\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\n\n<a href=\"https://opencollective.com/react-pdf#backers\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/backers.svg?width=890\"></a>\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n\n[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_large)\n\n---\n![](https://img.shields.io/npm/dt/@react-pdf/renderer.svg?style=flat)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/renderer/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "401ae391-ee3a-493b-bc3f-20e9e5aedd4b",
        "score": 0.016129032258064516,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n  <p align=\"center\">React renderer for creating PDF files on the browser and server<p>\n  <p align=\"center\">\n    <a href=\"https://www.npmjs.com/package/@react-pdf/renderer\">\n      <img src=\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\" />\n    </a>\n    <a href=\"https://travis-ci.org/diegomura/react-pdf\">\n      <img src=\"https://img.shields.io/travis/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\">\n      <img src=\"https://img.shields.io/github/license/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://github.com/prettier/prettier\">\n      <img src=\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\" />\n    </a>\n    <a href=\"https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_shield\" alt=\"FOSSA Status\"><img src=\"https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=shield\"/></a>\n  </p>\n</p>\n\n> New react-pdf 2.0 was relesed. [Read about the announcement](http://react-pdf.org/blog/announcing-react-pdf-v2)\n\n## Lost?\n\nThis package is used to _create_ PDFs using React. If you wish to _display_ existing PDFs, you may be looking for [react-pdf](https://github.com/wojtekmaj/react-pdf).\n\n## How to install\n```sh\nyarn add @react-pdf/renderer\n```\n\n## How it works\n\n```jsx\nimport React from 'react';\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\n\n// Create styles\nconst styles = StyleSheet.create({\n  page: {\n    flexDirection: 'row',\n    backgroundColor: '#E4E4E4'\n  },\n  section: {\n    margin: 10,\n    padding: 10,\n    flexGrow: 1\n  }\n});\n\n// Create Document Component\nconst MyDocument = () => (\n  <Document>\n    <Page size=\"A4\" style={styles.page}>\n      <View style={styles.section}>\n        <Text>Section #1</Text>\n      </View>\n      <View style={styles.section}>\n        <Text>Section #2</Text>\n      </View>\n    </Page>\n  </Document>\n);\n```\n\n### `Web.` Render in DOM\n```jsx\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { PDFViewer } from '@react-pdf/renderer';\n\nconst App = () => (\n  <PDFViewer>\n    <MyDocument />\n  </PDFViewer>\n);\n\nReactDOM.render(<App />, document.getElementById('root'));\n```\n\n### `Node.` Save in a file\n```jsx\nimport React from 'react';\nimport ReactPDF from '@react-pdf/renderer';\n\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\n```\n\n## Contributors\n\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\n<a href=\"https://github.com/diegomura/react-pdf/graphs/contributors\"><img src=\"https://opencollective.com/react-pdf/contributors.svg?width=890\" /></a>\n\n## Sponsors\n\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\n\n<a href=\"https://opencollective.com/react-pdf#sponsors\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/sponsors.svg?width=890\"></a>\n\n## Backers\n\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\n\n<a href=\"https://opencollective.com/react-pdf#backers\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/backers.svg?width=890\"></a>\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n\n[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_large)\n\n---\n![](https://img.shields.io/npm/dt/@react-pdf/renderer.svg?style=flat)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "11da3cdb-0972-4d99-a5f4-61d31d301721",
        "score": 0.015873015873015872,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/layout\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "9c3a5498-902b-4d14-9d6e-e7418298cf22",
        "score": 0.015625,
        "payload": {
          "text": "import BlobStream from 'blob-stream';\nimport FontStore from '@react-pdf/font';\nimport renderPDF from '@react-pdf/render';\nimport PDFDocument from '@react-pdf/pdfkit';\nimport layoutDocument from '@react-pdf/layout';\n\nimport createRenderer from './renderer';\nimport { version } from '../package.json';\n\nconst fontStore = new FontStore();\n\nconst pdf = (initialValue, onChange) => {\n  const container = { type: 'ROOT', document: null };\n  const renderer = createRenderer({ onChange });\n  const mountNode = renderer.createContainer(container);\n\n  const updateContainer = doc => {\n    renderer.updateContainer(doc, mountNode, null);\n  };\n\n  if (initialValue) updateContainer(initialValue);\n\n  const render = async () => {\n    const ctx = new PDFDocument({ autoFirstPage: false });\n    const layout = await layoutDocument(container.document, fontStore);\n    return renderPDF(ctx, layout);\n  };\n\n  const callOnRender = (params = {}) => {\n    if (container.document.props.onRender) {\n      container.document.props.onRender(params);\n    }\n  };\n\n  const toBlob = async () => {\n    const instance = await render();\n    const stream = instance.pipe(BlobStream());\n\n    return new Promise((resolve, reject) => {\n      stream.on('finish', () => {\n        try {\n          const blob = stream.toBlob('application/pdf');\n          callOnRender({ blob });\n          resolve(blob);\n        } catch (error) {\n          reject(error);\n        }\n      });\n\n      stream.on('error', reject);\n    });\n  };\n\n  const toBuffer = async () => {\n    callOnRender();\n    return render();\n  };\n\n  const toString = async () => {\n    let result = '';\n    const instance = await render();\n\n    return new Promise((resolve, reject) => {\n      try {\n        instance.on('data', buffer => {\n          result += buffer;\n        });\n\n        instance.on('end', () => {\n          callOnRender();\n          resolve(result);\n        });\n      } catch (error) {\n        reject(error);\n      }\n    });\n  };\n\n  return {\n    container,\n    toBlob,\n    toBuffer,\n    toString,\n    updateContainer,\n  };\n};\n\nconst Font = fontStore;\n\nconst StyleSheet = {\n  create: s => s,\n};\n\nexport { version, Font, StyleSheet, pdf, createRenderer };\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/renderer/src/index.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "62ec4b36-1585-49a0-895a-0ef0f44bd44e",
        "score": 0.015384615384615385,
        "payload": {
          "text": "---\nname: Bug report\nabout: Create a report to help us improve\ntitle: ''\nlabels: ''\nassignees: ''\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior including code snippet (if applies):\n1. Go to '...'\n2. Click on '....'\n3. Scroll down to '....'\n4. See error\n\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n\n**Screenshots**\nIf applicable, add screenshots to help explain your problem.\n\n**Desktop (please complete the following information):**\n - OS: [e.g. MacOS, Windows]\n - Browser [e.g. chrome, safari]\n - React-pdf version [e.g. v1.1.0]\n\n<!-- Love react-pdf? Please consider supporting our collective:\n\ud83d\udc49  https://opencollective.com/react-pdf/donate -->\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/.github/ISSUE_TEMPLATE/bug_report.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-1280",
    "model_patch": "diff --git a/src/styleProcessor.js b/src/styleProcessor.js\n--- a/src/styleProcessor.js\n+++ b/src/styleProcessor.js\n@@ -1,5 +1,6 @@\n import * as R from 'ramda';\n import expand from './expand';\n+import { processFlexBasis } from './expand';\n \n /**\n  * Transform style object\n@@ -15,6 +16,10 @@\n   return expandedStyle;\n };\n \n+const processStyle = style => {\n+  if (style.flexBasis) style.flexBasis = processFlexBasis('flexBasis', style.flexBasis);\n+  return style;\n+};\n \n /**\n  * Process style object\n@@ -23,7 +28,7 @@\n  */\n const process = R.compose(\n   R.map(transform),\n+  R.map(processStyle),\n   R.map(expand),\n );\n \n export default process;",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 112.0,
      "issue_embedding_time_ms": 112.0,
      "retrieval_time_ms_jina": 0.86,
      "retrieval_time_ms": 0.86,
      "total_retrieval_time_ms": 112.86,
      "generation_time_ms": 4139.82,
      "total_io_time_ms": 4252.69,
      "input_total_token_limit": null,
      "issue_text_tokens": 218,
      "vlm_tokens": 0,
      "retrieved_tokens": 4468,
      "prompt_template_tokens": 512,
      "total_input_prompt_tokens": 5198,
      "output_generated_tokens": 244,
      "total_io_tokens": 5442,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nThe flexBasis rule does not work in v2.0.8.\\nThe flexBasis rule does not work since I upgraded to version 2.0.8 from 1.6.14.\\r\\nI have the following code:\\r\\n\\r\\n```\\r\\n<View\\r\\n  style={{\\r\\n    display: \\\"flex\\\",\\r\\n    flexDirection: \\\"row\\\",\\r\\n    alignItems: \\\"center\\\",\\r\\n  }}\\r\\n>\\r\\n  <Text style={{ flexBasis: \\\"50%\\\" }}>One</Text>\\r\\n  <Text style={{ flexBasis: \\\"25%\\\" }}>Two</Text>\\r\\n  <Text style={{ flexBasis: \\\"25%\\\" }}>Three</Text>\\r\\n</View>\\r\\n```\\r\\n\\r\\nBefore:\\r\\n![image](https://user-images.githubusercontent.com/21165322/116717903-ca19ee00-a9af-11eb-89bd-7633c37bd21f.png)\\r\\n\\r\\nAfter:\\r\\n![image](https://user-images.githubusercontent.com/21165322/116718099-01889a80-a9b0-11eb-9d12-a15756b0a819.png)\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of index.test.js]\\nconst Yoga = require('../src/dist/entry-browser');\\n\\ndescribe('yoga-layout', () => {\\n  test('layout works', () => {\\n    const config = Yoga.Config.create();\\n\\n    const root = Yoga.Node.create(config);\\n    root.setWidth(100);\\n    root.setHeight(100);\\n\\n    const firstChild = Yoga.Node.create(config);\\n    firstChild.setFlexGrow(1);\\n    firstChild.setFlexBasis(50);\\n    root.insertChild(firstChild, 0);\\n\\n    const secondChild = Yoga.Node.create(config);\\n    secondChild.setFlexGrow(1);\\n    root.insertChild(secondChild, 1);\\n    root.calculateLayout(Yoga.UNDEFINED, Yoga.UNDEFINED, Yoga.DIRECTION_LTR);\\n\\n    expect(root.getComputedLeft()).toBe(0);\\n    expect(root.getComputedTop()).toBe(0);\\n    expect(root.getComputedWidth()).toBe(100);\\n    expect(root.getComputedHeight()).toBe(100);\\n\\n    expect(firstChild.getComputedLeft()).toBe(0);\\n    expect(firstChild.getComputedTop()).toBe(0);\\n    expect(firstChild.getComputedWidth()).toBe(100);\\n    expect(firstChild.getComputedHeight()).toBe(75);\\n\\n    expect(secondChild.getComputedLeft()).toBe(0);\\n    expect(secondChild.getComputedTop()).toBe(75);\\n    expect(secondChild.getComputedWidth()).toBe(100);\\n    expect(secondChild.getComputedHeight()).toBe(25);\\n\\n    root.calculateLayout(Yoga.UNDEFINED, Yoga.UNDEFINED, Yoga.DIRECTION_RTL);\\n\\n    expect(root.getComputedLeft()).toBe(0);\\n    expect(root.getComputedTop()).toBe(0);\\n    expect(root.getComputedWidth()).toBe(100);\\n    expect(root.getComputedHeight()).toBe(100);\\n\\n    expect(firstChild.getComputedLeft()).toBe(0);\\n    expect(firstChild.getComputedTop()).toBe(0);\\n    expect(firstChild.getComputedWidth()).toBe(100);\\n    expect(firstChild.getComputedHeight()).toBe(75);\\n\\n    expect(secondChild.getComputedLeft()).toBe(0);\\n    expect(secondChild.getComputedTop()).toBe(75);\\n    expect(secondChild.getComputedWidth()).toBe(100);\\n    expect(secondChild.getComputedHeight()).toBe(25);\\n  });\\n});\\n\\n[end of index.test.js]\\n[start of layoutText.test.js]\\nimport * as P from '@react-pdf/primitives';\\nimport runWidth from '@react-pdf/textkit/run/advanceWidth';\\n\\nimport layoutText from '../../src/text/layoutText';\\n\\nconst TEXT =\\n  'Life can be much broader once you discover one simple fact: Everything around you that you call life was made up by people that were no smarter than you';\\n\\nconst createTextNode = (value, style = {}, props = {}) => ({\\n  style,\\n  props,\\n  type: P.Text,\\n  children: [{ type: P.TextInstance, value }],\\n});\\n\\ndescribe('text layoutText', () => {\\n  test('Should render empty text', async () => {\\n    const node = createTextNode('');\\n    const lines = layoutText(node, 1500, 200, null);\\n\\n    expect(lines).toHaveLength(0);\\n  });\\n\\n  test('Should render aligned left text by default', async () => {\\n    const node = createTextNode(TEXT);\\n    const lines = layoutText(node, 1500, 30, null);\\n\\n    expect(lines[0].box.x).toBe(0);\\n  });\\n\\n  test('Should render aligned left text', async () => {\\n    const node = createTextNode(TEXT, { textAlign: 'left' });\\n    const lines = layoutText(node, 1500, 30, null);\\n\\n    expect(lines[0].box.x).toBe(0);\\n  });\\n\\n  test('Should render aligned right text', async () => {\\n    const node = createTextNode(TEXT, { textAlign: 'right' });\\n    const lines = layoutText(node, 1500, 30, null);\\n    const textWidth = runWidth(lines[0].runs[0]);\\n\\n    expect(lines[0].box.x).toBe(1500 - textWidth);\\n  });\\n\\n  test('Should render aligned center text', async () => {\\n    const node = createTextNode(TEXT, { textAlign: 'center' });\\n    const lines = layoutText(node, 1500, 30, null);\\n    const textWidth = runWidth(lines[0].runs[0]);\\n\\n    expect(lines[0].box.x).toBe((1500 - textWidth) / 2);\\n  });\\n\\n  test('Should render single line justified text aligned to the left', async () => {\\n    const node = createTextNode(TEXT, { textAlign: 'justify' });\\n    const lines = layoutText(node, 1500, 30, null);\\n\\n    expect(lines[0].box.x).toBe(0);\\n  });\\n\\n  test('Should render multiline justified text correctly aligned', async () => {\\n    const containerWidth = 800;\\n    const node = createTextNode(TEXT, { textAlign: 'justify' });\\n    const lines = layoutText(node, containerWidth, 100, null);\\n\\n    const positions = lines[0].runs[0].positions;\\n    const spaceWidth = positions[positions.length - 1].xAdvance;\\n\\n    // First line justified. Last line aligned to the left\\n    expect(lines[0].box.width).toBe(containerWidth + spaceWidth);\\n    expect(lines[1].box.width).not.toBe(containerWidth + spaceWidth);\\n  });\\n\\n  test('Should render maxLines', async () => {\\n    const node = createTextNode(TEXT, { maxLines: 2 });\\n    const lines = layoutText(node, 300, 100, null);\\n\\n    expect(lines.length).toEqual(2);\\n  });\\n\\n  test('should allow hyphenation callback to be overriden', async () => {\\n    const text = 'reallylongtext';\\n    const hyphens = ['really', 'long', 'text'];\\n    const hyphenationCallback = jest.fn().mockReturnValue(hyphens);\\n\\n    const node = createTextNode(text, {}, { hyphenationCallback });\\n    const lines = layoutText(node, 50, 100, null);\\n\\n    expect(lines[0].string).toEqual('really');\\n    expect(lines[1].string).toEqual('long');\\n    expect(lines[2].string).toEqual('text');\\n    expect(hyphenationCallback).toHaveBeenCalledWith('reallylongtext');\\n  });\\n});\\n\\n[end of layoutText.test.js]\\n[start of index.js]\\n/* eslint-disable jsx-a11y/anchor-is-valid */\\n\\nimport React from 'react';\\nimport {\\n  Document,\\n  Page,\\n  View,\\n  Text,\\n  Link,\\n  Font,\\n  StyleSheet,\\n} from '@react-pdf/renderer';\\n\\nconst styles = StyleSheet.create({\\n  title: {\\n    margin: 20,\\n    fontSize: 25,\\n    textAlign: 'center',\\n    backgroundColor: '#e4e4e4',\\n    textTransform: 'uppercase',\\n    fontFamily: 'Oswald',\\n  },\\n  body: {\\n    flexGrow: 1,\\n  },\\n  row: {\\n    flexGrow: 1,\\n    flexDirection: 'row',\\n  },\\n  block: {\\n    flexGrow: 1,\\n  },\\n  text: {\\n    width: '60%',\\n    margin: 10,\\n    fontFamily: 'Oswald',\\n    textAlign: 'justify',\\n  },\\n  fill1: {\\n    width: '40%',\\n    backgroundColor: '#e14427',\\n  },\\n  fill2: {\\n    flexGrow: 2,\\n    backgroundColor: '#e6672d',\\n  },\\n  fill3: {\\n    flexGrow: 2,\\n    backgroundColor: '#e78632',\\n  },\\n  fill4: {\\n    flexGrow: 2,\\n    backgroundColor: '#e29e37',\\n  },\\n});\\n\\nFont.register({\\n  family: 'Oswald',\\n  src: 'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\\n});\\n\\nexport default () => (\\n  <Document>\\n    <Page size=\\\"A4\\\">\\n      <Link\\n        style={styles.title}\\n        src=\\\"https://es.wikipedia.org/wiki/Lorem_ipsum\\\"\\n      >\\n        Lorem Ipsum\\n      </Link>\\n      <View style={styles.body}>\\n        <View style={styles.row}>\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n          <View style={styles.fill1} />\\n        </View>\\n        <View style={styles.row}>\\n          <View style={styles.fill2} />\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n        </View>\\n        <View style={styles.row}>\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n          <View style={styles.fill3} />\\n        </View>\\n      </View>\\n    </Page>\\n  </Document>\\n);\\n\\n[end of index.js]\\n[start of expand.js]\\nimport * as R from 'ramda';\\n\\nimport shorthands from './shorthands';\\n\\nconst BOX_MODEL_REGEX = /\\\\d+(\\\\.\\\\d+)?(px|in|mm|cm|pt|%|vw|vh|px)?/g;\\nconst OBJECT_POSITION_REGEX = /\\\\d+(\\\\.\\\\d+)?(px|in|mm|cm|pt|%|vw|vh|px)?/g;\\nconst BORDER_SHORTHAND_REGEX = /(\\\\d+(\\\\.\\\\d+)?(px|in|mm|cm|pt|vw|vh|px)?)\\\\s(\\\\S+)\\\\s(.+)/;\\nconst TRANSFORM_ORIGIN_REGEX = /(-?\\\\d+(px|in|mm|cm|pt|%|vw|vh|px)?)|top|right|bottom|left|center/g;\\n\\nconst FONT_WEIGHTS = {\\n  thin: 100,\\n  hairline: 100,\\n  ultralight: 200,\\n  extralight: 200,\\n  light: 300,\\n  normal: 400,\\n  medium: 500,\\n  semibold: 600,\\n  demibold: 600,\\n  bold: 700,\\n  ultrabold: 800,\\n  extrabold: 800,\\n  heavy: 900,\\n  black: 900,\\n};\\n\\nconst matchBoxModel = R.match(BOX_MODEL_REGEX);\\nconst matchObjectPosition = R.match(OBJECT_POSITION_REGEX);\\nconst matchBorderShorthand = R.match(BORDER_SHORTHAND_REGEX);\\nconst matchTransformOrigin = R.match(TRANSFORM_ORIGIN_REGEX);\\n\\nconst isNumber = R.is(Number);\\n\\nconst FONT_WEIGHT_REGEX = /^fontWeight/;\\n\\nconst isFontWeightStyle = key => key.match(FONT_WEIGHT_REGEX);\\n\\nconst BORDER_STYLE_REGEX = /^border(Top|Right|Bottom|Left)(Color|Width|Style)/;\\n\\nconst isBorderStyle = (key, value) =>\\n  key.match(BORDER_STYLE_REGEX) && typeof value === 'string';\\n\\nconst BOX_MODEL_STYLE_REGEX = /^(margin)|(padding)/;\\n\\nconst isBoxModelStyle = (key, value) =>\\n  key.match(BOX_MODEL_STYLE_REGEX) && typeof value === 'string';\\n\\nconst OBJECT_POSITION_STYLE_REGEX = /^objectPosition/;\\n\\nconst isObjectPositionStyle = (key, value) =>\\n  key.match(OBJECT_POSITION_STYLE_REGEX) && typeof value === 'string';\\n\\nconst isTransformOriginStyle = (key, value) =>\\n  key.match(/^transformOrigin/) && typeof value === 'string';\\n\\nconst isFlexGrow = key => key === 'flexGrow';\\n\\nconst isFlexShrink = key => key === 'flexShrink';\\n\\nconst isFlexBasis = key => key === 'flexBasis';\\n\\nconst processBorders = (key, value) => {\\n  const match = matchBorderShorthand(value);\\n\\n  if (match) {\\n    if (key.match(/Color$/)) {\\n      return match[5] || value;\\n    }\\n\\n    if (key.match(/Style$/)) {\\n      return match[4] || value;\\n    }\\n\\n    if (key.match(/Width$/)) {\\n      return match[1] || value;\\n    }\\n\\n    throw new Error(`StyleSheet: Invalid '${value}' for '${key}'`);\\n  }\\n\\n  return value;\\n};\\n\\nconst processBoxModel = (key, value) => {\\n  const match = matchBoxModel(value);\\n\\n  if (match) {\\n    if (key.match(/Top$/)) {\\n      return match[0];\\n    }\\n\\n    if (key.match(/Right$/)) {\\n      return match[1] || match[0];\\n    }\\n\\n    if (key.match(/Bottom$/)) {\\n      return match[2] || match[0];\\n    }\\n\\n    if (key.match(/Left$/)) {\\n      return match[3] || match[1] || match[0];\\n    }\\n\\n    throw new Error(`StyleSheet: Invalid '${value}' for '${key}'`);\\n  }\\n\\n  return value;\\n};\\n\\nexport const processFontWeight = (key, value) => {\\n  if (!value) return FONT_WEIGHTS.normal;\\n  if (typeof value === 'number') return value;\\n  return FONT_WEIGHTS[value.toLowerCase()];\\n};\\n\\nexport const processObjectPosition = (key, value) => {\\n  const match = matchObjectPosition(value);\\n\\n  if (match) {\\n    if (key.match(/X$/)) {\\n      return match[0] || value;\\n    }\\n\\n    if (key.match(/Y$/)) {\\n      return match[1] || value;\\n    }\\n\\n    throw new Error(`StyleSheet: Invalid '${value}' for '${key}'`);\\n  }\\n\\n  return value;\\n};\\n\\nconst transformOffsetKeywords = value => {\\n  switch (value) {\\n    case 'top':\\n    case 'left':\\n      return '0%';\\n    case 'right':\\n    case 'bottom':\\n      return '100%';\\n    case 'center':\\n      return '50%';\\n    default:\\n      return value;\\n  }\\n};\\n\\n// Transforms shorthand transformOrigin values\\nconst processTransformOrigin = (key, value) => {\\n  const match = matchTransformOrigin(value);\\n\\n  if (match) {\\n    let result;\\n\\n    if (key.match(/X$/)) {\\n      result = match[0] || value;\\n    } else if (key.match(/Y$/)) {\\n      result = match[1] || match[0] || value;\\n    } else {\\n      throw new Error(`StyleSheet: Invalid '${value}' for '${key}'`);\\n    }\\n\\n    return transformOffsetKeywords(result);\\n  }\\n\\n  return value;\\n};\\n\\nconst processFlexGrow = (key, value) => {\\n  if (isNumber(value)) return value;\\n  const matches = value.split(' ');\\n  return matches[0];\\n};\\n\\nconst processFlexShrink = (key, value) => {\\n  if (isNumber(value)) return value;\\n  const matches = value.split(' ');\\n  return matches[1];\\n};\\n\\nconst processFlexBasis = (key, value) => {\\n  if (isNumber(value)) return value;\\n  const matches = value.split(' ');\\n  return matches[2];\\n};\\n\\nconst keepSame = (key, value) => value;\\n\\nconst matchNumber = R.when(R.is(String), R.test(/^-?\\\\d*\\\\.?\\\\d*$/));\\n\\nconst castFloat = R.when(matchNumber, v => parseFloat(v, 10));\\n\\n/**\\n * Transforms style key-value\\n *\\n * @param {String} key style key\\n * @param {String} value style value\\n * @returns {String | Number} transformed style values\\n */\\nconst transformStyle = R.compose(\\n  castFloat,\\n  R.cond([\\n    [isBorderStyle, processBorders],\\n    [isBoxModelStyle, processBoxModel],\\n    [isObjectPositionStyle, processObjectPosition],\\n    [isTransformOriginStyle, processTransformOrigin],\\n    [isFontWeightStyle, processFontWeight],\\n    [isFlexGrow, processFlexGrow],\\n    [isFlexShrink, processFlexShrink],\\n    [isFlexBasis, processFlexBasis],\\n    [R.T, keepSame],\\n  ]),\\n);\\n\\n/**\\n * Expand the shorthand properties to isolate every declaration from the others.\\n *\\n * @param { Object } style object\\n * @returns { Object } expanded style object\\n */\\nconst expand = style => {\\n  if (!style) return style;\\n\\n  const propsArray = Object.keys(style);\\n  const resolvedStyle = {};\\n\\n  for (let i = 0; i < propsArray.length; i += 1) {\\n    const key = propsArray[i];\\n    const value = style[key];\\n\\n    if (shorthands[key]) {\\n      const expandedProps = shorthands[key];\\n\\n      for (let j = 0; j < expandedProps.length; j += 1) {\\n        const propName = expandedProps[j];\\n        resolvedStyle[propName] = transformStyle(propName, value);\\n      }\\n    } else {\\n      resolvedStyle[key] = transformStyle(key, value);\\n    }\\n  }\\n\\n  return resolvedStyle;\\n};\\n\\nexport default expand;\\n\\n[end of expand.js]\\n[start of layoutText.js]\\nimport * as R from 'ramda';\\nimport * as P from '@react-pdf/primitives';\\nimport layoutEngine from '@react-pdf/textkit/layout';\\nimport linebreaker from '@react-pdf/textkit/engines/linebreaker';\\nimport justification from '@react-pdf/textkit/engines/justification';\\nimport scriptItemizer from '@react-pdf/textkit/engines/scriptItemizer';\\nimport wordHyphenation from '@react-pdf/textkit/engines/wordHyphenation';\\nimport decorationEngine from '@react-pdf/textkit/engines/textDecoration';\\nimport AttributedString from '@react-pdf/textkit/attributedString';\\n\\nimport transformText from '../text/transformText';\\nimport fontSubstitution from '../text/fontSubstitution';\\n\\nconst isTextInstance = R.propEq('type', P.TextInstance);\\n\\nconst engines = {\\n  linebreaker,\\n  justification,\\n  scriptItemizer,\\n  wordHyphenation,\\n  fontSubstitution,\\n  textDecoration: decorationEngine,\\n};\\n\\nconst engine = layoutEngine(engines);\\n\\nconst getFragments = (fontStore, instance) => {\\n  if (!instance) return [{ string: '' }];\\n\\n  const fragments = [];\\n\\n  const {\\n    fill = 'black',\\n    fontFamily = 'Helvetica',\\n    fontWeight,\\n    fontStyle,\\n    fontSize = 18,\\n    textDecoration,\\n    textDecorationColor,\\n    textDecorationStyle,\\n    textTransform,\\n    opacity,\\n  } = instance.props;\\n\\n  const obj = fontStore\\n    ? fontStore.getFont({ fontFamily, fontWeight, fontStyle })\\n    : null;\\n  const font = obj ? obj.data : fontFamily;\\n\\n  const attributes = {\\n    font,\\n    opacity,\\n    fontSize,\\n    color: fill,\\n    underlineStyle: textDecorationStyle,\\n    underline: textDecoration === 'underline',\\n    underlineColor: textDecorationColor || fill,\\n    strike: textDecoration === 'line-through',\\n    strikeStyle: textDecorationStyle,\\n    strikeColor: textDecorationColor || fill,\\n  };\\n\\n  for (let i = 0; i < instance.children.length; i += 1) {\\n    const child = instance.children[i];\\n\\n    if (isTextInstance(child)) {\\n      fragments.push({\\n        string: transformText(child.value, textTransform),\\n        attributes,\\n      });\\n    } else if (child) {\\n      fragments.push(...getFragments(child));\\n    }\\n  }\\n\\n  return fragments;\\n};\\n\\nconst getAttributedString = (fontStore, instance) =>\\n  AttributedString.fromFragments(getFragments(fontStore, instance));\\n\\nconst AlmostInfinity = 999999999999;\\n\\nconst shrinkWhitespaceFactor = { before: -0.5, after: -0.5 };\\n\\nconst layoutTspan = fontStore => node => {\\n  const attributedString = getAttributedString(fontStore, node);\\n\\n  const x = R.pathOr(0, ['props', 'x'], node);\\n  const y = R.pathOr(0, ['props', 'y'], node);\\n\\n  const container = { x, y, width: AlmostInfinity, height: AlmostInfinity };\\n\\n  const hyphenationCallback =\\n    node.props.hyphenationCallback ||\\n    fontStore?.getHyphenationCallback() ||\\n    null;\\n\\n  const layoutOptions = { hyphenationCallback, shrinkWhitespaceFactor };\\n\\n  const lines = R.compose(R.reduce(R.concat, []), engine)(\\n    attributedString,\\n    container,\\n    layoutOptions,\\n  );\\n\\n  return R.assoc('lines', lines, node);\\n};\\n\\nconst layoutText = (fontStore, node) =>\\n  R.evolve({\\n    children: R.map(layoutTspan(fontStore)),\\n  })(node);\\n\\nexport default R.curryN(2, layoutText);\\n\\n[end of layoutText.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "index.test.js",
        "layoutText.test.js",
        "index.js",
        "expand.js",
        "layoutText.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "f17c8fc6-8144-407f-9c4a-1aa70e8edfc4",
        "score": 0.01639344262295082,
        "payload": {
          "text": "const Yoga = require('../src/dist/entry-browser');\n\ndescribe('yoga-layout', () => {\n  test('layout works', () => {\n    const config = Yoga.Config.create();\n\n    const root = Yoga.Node.create(config);\n    root.setWidth(100);\n    root.setHeight(100);\n\n    const firstChild = Yoga.Node.create(config);\n    firstChild.setFlexGrow(1);\n    firstChild.setFlexBasis(50);\n    root.insertChild(firstChild, 0);\n\n    const secondChild = Yoga.Node.create(config);\n    secondChild.setFlexGrow(1);\n    root.insertChild(secondChild, 1);\n    root.calculateLayout(Yoga.UNDEFINED, Yoga.UNDEFINED, Yoga.DIRECTION_LTR);\n\n    expect(root.getComputedLeft()).toBe(0);\n    expect(root.getComputedTop()).toBe(0);\n    expect(root.getComputedWidth()).toBe(100);\n    expect(root.getComputedHeight()).toBe(100);\n\n    expect(firstChild.getComputedLeft()).toBe(0);\n    expect(firstChild.getComputedTop()).toBe(0);\n    expect(firstChild.getComputedWidth()).toBe(100);\n    expect(firstChild.getComputedHeight()).toBe(75);\n\n    expect(secondChild.getComputedLeft()).toBe(0);\n    expect(secondChild.getComputedTop()).toBe(75);\n    expect(secondChild.getComputedWidth()).toBe(100);\n    expect(secondChild.getComputedHeight()).toBe(25);\n\n    root.calculateLayout(Yoga.UNDEFINED, Yoga.UNDEFINED, Yoga.DIRECTION_RTL);\n\n    expect(root.getComputedLeft()).toBe(0);\n    expect(root.getComputedTop()).toBe(0);\n    expect(root.getComputedWidth()).toBe(100);\n    expect(root.getComputedHeight()).toBe(100);\n\n    expect(firstChild.getComputedLeft()).toBe(0);\n    expect(firstChild.getComputedTop()).toBe(0);\n    expect(firstChild.getComputedWidth()).toBe(100);\n    expect(firstChild.getComputedHeight()).toBe(75);\n\n    expect(secondChild.getComputedLeft()).toBe(0);\n    expect(secondChild.getComputedTop()).toBe(75);\n    expect(secondChild.getComputedWidth()).toBe(100);\n    expect(secondChild.getComputedHeight()).toBe(25);\n  });\n});\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/yoga/tests/index.test.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "a6a86a30-8762-4236-8c69-f255544f6f84",
        "score": 0.016129032258064516,
        "payload": {
          "text": "import * as P from '@react-pdf/primitives';\nimport runWidth from '@react-pdf/textkit/run/advanceWidth';\n\nimport layoutText from '../../src/text/layoutText';\n\nconst TEXT =\n  'Life can be much broader once you discover one simple fact: Everything around you that you call life was made up by people that were no smarter than you';\n\nconst createTextNode = (value, style = {}, props = {}) => ({\n  style,\n  props,\n  type: P.Text,\n  children: [{ type: P.TextInstance, value }],\n});\n\ndescribe('text layoutText', () => {\n  test('Should render empty text', async () => {\n    const node = createTextNode('');\n    const lines = layoutText(node, 1500, 200, null);\n\n    expect(lines).toHaveLength(0);\n  });\n\n  test('Should render aligned left text by default', async () => {\n    const node = createTextNode(TEXT);\n    const lines = layoutText(node, 1500, 30, null);\n\n    expect(lines[0].box.x).toBe(0);\n  });\n\n  test('Should render aligned left text', async () => {\n    const node = createTextNode(TEXT, { textAlign: 'left' });\n    const lines = layoutText(node, 1500, 30, null);\n\n    expect(lines[0].box.x).toBe(0);\n  });\n\n  test('Should render aligned right text', async () => {\n    const node = createTextNode(TEXT, { textAlign: 'right' });\n    const lines = layoutText(node, 1500, 30, null);\n    const textWidth = runWidth(lines[0].runs[0]);\n\n    expect(lines[0].box.x).toBe(1500 - textWidth);\n  });\n\n  test('Should render aligned center text', async () => {\n    const node = createTextNode(TEXT, { textAlign: 'center' });\n    const lines = layoutText(node, 1500, 30, null);\n    const textWidth = runWidth(lines[0].runs[0]);\n\n    expect(lines[0].box.x).toBe((1500 - textWidth) / 2);\n  });\n\n  test('Should render single line justified text aligned to the left', async () => {\n    const node = createTextNode(TEXT, { textAlign: 'justify' });\n    const lines = layoutText(node, 1500, 30, null);\n\n    expect(lines[0].box.x).toBe(0);\n  });\n\n  test('Should render multiline justified text correctly aligned', async () => {\n    const containerWidth = 800;\n    const node = createTextNode(TEXT, { textAlign: 'justify' });\n    const lines = layoutText(node, containerWidth, 100, null);\n\n    const positions = lines[0].runs[0].positions;\n    const spaceWidth = positions[positions.length - 1].xAdvance;\n\n    // First line justified. Last line aligned to the left\n    expect(lines[0].box.width).toBe(containerWidth + spaceWidth);\n    expect(lines[1].box.width).not.toBe(containerWidth + spaceWidth);\n  });\n\n  test('Should render maxLines', async () => {\n    const node = createTextNode(TEXT, { maxLines: 2 });\n    const lines = layoutText(node, 300, 100, null);\n\n    expect(lines.length).toEqual(2);\n  });\n\n  test('should allow hyphenation callback to be overriden', async () => {\n    const text = 'reallylongtext';\n    const hyphens = ['really', 'long', 'text'];\n    const hyphenationCallback = jest.fn().mockReturnValue(hyphens);\n\n    const node = createTextNode(text, {}, { hyphenationCallback });\n    const lines = layoutText(node, 50, 100, null);\n\n    expect(lines[0].string).toEqual('really');\n    expect(lines[1].string).toEqual('long');\n    expect(lines[2].string).toEqual('text');\n    expect(hyphenationCallback).toHaveBeenCalledWith('reallylongtext');\n  });\n});\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/tests/text/layoutText.test.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "8ac211c1-ff1c-463b-af48-ef648360ad95",
        "score": 0.015873015873015872,
        "payload": {
          "text": "/* eslint-disable jsx-a11y/anchor-is-valid */\n\nimport React from 'react';\nimport {\n  Document,\n  Page,\n  View,\n  Text,\n  Link,\n  Font,\n  StyleSheet,\n} from '@react-pdf/renderer';\n\nconst styles = StyleSheet.create({\n  title: {\n    margin: 20,\n    fontSize: 25,\n    textAlign: 'center',\n    backgroundColor: '#e4e4e4',\n    textTransform: 'uppercase',\n    fontFamily: 'Oswald',\n  },\n  body: {\n    flexGrow: 1,\n  },\n  row: {\n    flexGrow: 1,\n    flexDirection: 'row',\n  },\n  block: {\n    flexGrow: 1,\n  },\n  text: {\n    width: '60%',\n    margin: 10,\n    fontFamily: 'Oswald',\n    textAlign: 'justify',\n  },\n  fill1: {\n    width: '40%',\n    backgroundColor: '#e14427',\n  },\n  fill2: {\n    flexGrow: 2,\n    backgroundColor: '#e6672d',\n  },\n  fill3: {\n    flexGrow: 2,\n    backgroundColor: '#e78632',\n  },\n  fill4: {\n    flexGrow: 2,\n    backgroundColor: '#e29e37',\n  },\n});\n\nFont.register({\n  family: 'Oswald',\n  src: 'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\n});\n\nexport default () => (\n  <Document>\n    <Page size=\"A4\">\n      <Link\n        style={styles.title}\n        src=\"https://es.wikipedia.org/wiki/Lorem_ipsum\"\n      >\n        Lorem Ipsum\n      </Link>\n      <View style={styles.body}>\n        <View style={styles.row}>\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n          <View style={styles.fill1} />\n        </View>\n        <View style={styles.row}>\n          <View style={styles.fill2} />\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n        </View>\n        <View style={styles.row}>\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n          <View style={styles.fill3} />\n        </View>\n      </View>\n    </Page>\n  </Document>\n);\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/examples/src/text/index.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "94bc799a-257d-4dd8-9844-d8b78a321112",
        "score": 0.015625,
        "payload": {
          "text": "import * as R from 'ramda';\n\nimport shorthands from './shorthands';\n\nconst BOX_MODEL_REGEX = /\\d+(\\.\\d+)?(px|in|mm|cm|pt|%|vw|vh|px)?/g;\nconst OBJECT_POSITION_REGEX = /\\d+(\\.\\d+)?(px|in|mm|cm|pt|%|vw|vh|px)?/g;\nconst BORDER_SHORTHAND_REGEX = /(\\d+(\\.\\d+)?(px|in|mm|cm|pt|vw|vh|px)?)\\s(\\S+)\\s(.+)/;\nconst TRANSFORM_ORIGIN_REGEX = /(-?\\d+(px|in|mm|cm|pt|%|vw|vh|px)?)|top|right|bottom|left|center/g;\n\nconst FONT_WEIGHTS = {\n  thin: 100,\n  hairline: 100,\n  ultralight: 200,\n  extralight: 200,\n  light: 300,\n  normal: 400,\n  medium: 500,\n  semibold: 600,\n  demibold: 600,\n  bold: 700,\n  ultrabold: 800,\n  extrabold: 800,\n  heavy: 900,\n  black: 900,\n};\n\nconst matchBoxModel = R.match(BOX_MODEL_REGEX);\nconst matchObjectPosition = R.match(OBJECT_POSITION_REGEX);\nconst matchBorderShorthand = R.match(BORDER_SHORTHAND_REGEX);\nconst matchTransformOrigin = R.match(TRANSFORM_ORIGIN_REGEX);\n\nconst isNumber = R.is(Number);\n\nconst FONT_WEIGHT_REGEX = /^fontWeight/;\n\nconst isFontWeightStyle = key => key.match(FONT_WEIGHT_REGEX);\n\nconst BORDER_STYLE_REGEX = /^border(Top|Right|Bottom|Left)(Color|Width|Style)/;\n\nconst isBorderStyle = (key, value) =>\n  key.match(BORDER_STYLE_REGEX) && typeof value === 'string';\n\nconst BOX_MODEL_STYLE_REGEX = /^(margin)|(padding)/;\n\nconst isBoxModelStyle = (key, value) =>\n  key.match(BOX_MODEL_STYLE_REGEX) && typeof value === 'string';\n\nconst OBJECT_POSITION_STYLE_REGEX = /^objectPosition/;\n\nconst isObjectPositionStyle = (key, value) =>\n  key.match(OBJECT_POSITION_STYLE_REGEX) && typeof value === 'string';\n\nconst isTransformOriginStyle = (key, value) =>\n  key.match(/^transformOrigin/) && typeof value === 'string';\n\nconst isFlexGrow = key => key === 'flexGrow';\n\nconst isFlexShrink = key => key === 'flexShrink';\n\nconst isFlexBasis = key => key === 'flexBasis';\n\nconst processBorders = (key, value) => {\n  const match = matchBorderShorthand(value);\n\n  if (match) {\n    if (key.match(/Color$/)) {\n      return match[5] || value;\n    }\n\n    if (key.match(/Style$/)) {\n      return match[4] || value;\n    }\n\n    if (key.match(/Width$/)) {\n      return match[1] || value;\n    }\n\n    throw new Error(`StyleSheet: Invalid '${value}' for '${key}'`);\n  }\n\n  return value;\n};\n\nconst processBoxModel = (key, value) => {\n  const match = matchBoxModel(value);\n\n  if (match) {\n    if (key.match(/Top$/)) {\n      return match[0];\n    }\n\n    if (key.match(/Right$/)) {\n      return match[1] || match[0];\n    }\n\n    if (key.match(/Bottom$/)) {\n      return match[2] || match[0];\n    }\n\n    if (key.match(/Left$/)) {\n      return match[3] || match[1] || match[0];\n    }\n\n    throw new Error(`StyleSheet: Invalid '${value}' for '${key}'`);\n  }\n\n  return value;\n};\n\nexport const processFontWeight = (key, value) => {\n  if (!value) return FONT_WEIGHTS.normal;\n  if (typeof value === 'number') return value;\n  return FONT_WEIGHTS[value.toLowerCase()];\n};\n\nexport const processObjectPosition = (key, value) => {\n  const match = matchObjectPosition(value);\n\n  if (match) {\n    if (key.match(/X$/)) {\n      return match[0] || value;\n    }\n\n    if (key.match(/Y$/)) {\n      return match[1] || value;\n    }\n\n    throw new Error(`StyleSheet: Invalid '${value}' for '${key}'`);\n  }\n\n  return value;\n};\n\nconst transformOffsetKeywords = value => {\n  switch (value) {\n    case 'top':\n    case 'left':\n      return '0%';\n    case 'right':\n    case 'bottom':\n      return '100%';\n    case 'center':\n      return '50%';\n    default:\n      return value;\n  }\n};\n\n// Transforms shorthand transformOrigin values\nconst processTransformOrigin = (key, value) => {\n  const match = matchTransformOrigin(value);\n\n  if (match) {\n    let result;\n\n    if (key.match(/X$/)) {\n      result = match[0] || value;\n    } else if (key.match(/Y$/)) {\n      result = match[1] || match[0] || value;\n    } else {\n      throw new Error(`StyleSheet: Invalid '${value}' for '${key}'`);\n    }\n\n    return transformOffsetKeywords(result);\n  }\n\n  return value;\n};\n\nconst processFlexGrow = (key, value) => {\n  if (isNumber(value)) return value;\n  const matches = value.split(' ');\n  return matches[0];\n};\n\nconst processFlexShrink = (key, value) => {\n  if (isNumber(value)) return value;\n  const matches = value.split(' ');\n  return matches[1];\n};\n\nconst processFlexBasis = (key, value) => {\n  if (isNumber(value)) return value;\n  const matches = value.split(' ');\n  return matches[2];\n};\n\nconst keepSame = (key, value) => value;\n\nconst matchNumber = R.when(R.is(String), R.test(/^-?\\d*\\.?\\d*$/));\n\nconst castFloat = R.when(matchNumber, v => parseFloat(v, 10));\n\n/**\n * Transforms style key-value\n *\n * @param {String} key style key\n * @param {String} value style value\n * @returns {String | Number} transformed style values\n */\nconst transformStyle = R.compose(\n  castFloat,\n  R.cond([\n    [isBorderStyle, processBorders],\n    [isBoxModelStyle, processBoxModel],\n    [isObjectPositionStyle, processObjectPosition],\n    [isTransformOriginStyle, processTransformOrigin],\n    [isFontWeightStyle, processFontWeight],\n    [isFlexGrow, processFlexGrow],\n    [isFlexShrink, processFlexShrink],\n    [isFlexBasis, processFlexBasis],\n    [R.T, keepSame],\n  ]),\n);\n\n/**\n * Expand the shorthand properties to isolate every declaration from the others.\n *\n * @param { Object } style object\n * @returns { Object } expanded style object\n */\nconst expand = style => {\n  if (!style) return style;\n\n  const propsArray = Object.keys(style);\n  const resolvedStyle = {};\n\n  for (let i = 0; i < propsArray.length; i += 1) {\n    const key = propsArray[i];\n    const value = style[key];\n\n    if (shorthands[key]) {\n      const expandedProps = shorthands[key];\n\n      for (let j = 0; j < expandedProps.length; j += 1) {\n        const propName = expandedProps[j];\n        resolvedStyle[propName] = transformStyle(propName, value);\n      }\n    } else {\n      resolvedStyle[key] = transformStyle(key, value);\n    }\n  }\n\n  return resolvedStyle;\n};\n\nexport default expand;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/stylesheet/src/expand.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "05558704-8d56-433f-97b6-fb5de510bd88",
        "score": 0.015384615384615385,
        "payload": {
          "text": "import * as R from 'ramda';\nimport * as P from '@react-pdf/primitives';\nimport layoutEngine from '@react-pdf/textkit/layout';\nimport linebreaker from '@react-pdf/textkit/engines/linebreaker';\nimport justification from '@react-pdf/textkit/engines/justification';\nimport scriptItemizer from '@react-pdf/textkit/engines/scriptItemizer';\nimport wordHyphenation from '@react-pdf/textkit/engines/wordHyphenation';\nimport decorationEngine from '@react-pdf/textkit/engines/textDecoration';\nimport AttributedString from '@react-pdf/textkit/attributedString';\n\nimport transformText from '../text/transformText';\nimport fontSubstitution from '../text/fontSubstitution';\n\nconst isTextInstance = R.propEq('type', P.TextInstance);\n\nconst engines = {\n  linebreaker,\n  justification,\n  scriptItemizer,\n  wordHyphenation,\n  fontSubstitution,\n  textDecoration: decorationEngine,\n};\n\nconst engine = layoutEngine(engines);\n\nconst getFragments = (fontStore, instance) => {\n  if (!instance) return [{ string: '' }];\n\n  const fragments = [];\n\n  const {\n    fill = 'black',\n    fontFamily = 'Helvetica',\n    fontWeight,\n    fontStyle,\n    fontSize = 18,\n    textDecoration,\n    textDecorationColor,\n    textDecorationStyle,\n    textTransform,\n    opacity,\n  } = instance.props;\n\n  const obj = fontStore\n    ? fontStore.getFont({ fontFamily, fontWeight, fontStyle })\n    : null;\n  const font = obj ? obj.data : fontFamily;\n\n  const attributes = {\n    font,\n    opacity,\n    fontSize,\n    color: fill,\n    underlineStyle: textDecorationStyle,\n    underline: textDecoration === 'underline',\n    underlineColor: textDecorationColor || fill,\n    strike: textDecoration === 'line-through',\n    strikeStyle: textDecorationStyle,\n    strikeColor: textDecorationColor || fill,\n  };\n\n  for (let i = 0; i < instance.children.length; i += 1) {\n    const child = instance.children[i];\n\n    if (isTextInstance(child)) {\n      fragments.push({\n        string: transformText(child.value, textTransform),\n        attributes,\n      });\n    } else if (child) {\n      fragments.push(...getFragments(child));\n    }\n  }\n\n  return fragments;\n};\n\nconst getAttributedString = (fontStore, instance) =>\n  AttributedString.fromFragments(getFragments(fontStore, instance));\n\nconst AlmostInfinity = 999999999999;\n\nconst shrinkWhitespaceFactor = { before: -0.5, after: -0.5 };\n\nconst layoutTspan = fontStore => node => {\n  const attributedString = getAttributedString(fontStore, node);\n\n  const x = R.pathOr(0, ['props', 'x'], node);\n  const y = R.pathOr(0, ['props', 'y'], node);\n\n  const container = { x, y, width: AlmostInfinity, height: AlmostInfinity };\n\n  const hyphenationCallback =\n    node.props.hyphenationCallback ||\n    fontStore?.getHyphenationCallback() ||\n    null;\n\n  const layoutOptions = { hyphenationCallback, shrinkWhitespaceFactor };\n\n  const lines = R.compose(R.reduce(R.concat, []), engine)(\n    attributedString,\n    container,\n    layoutOptions,\n  );\n\n  return R.assoc('lines', lines, node);\n};\n\nconst layoutText = (fontStore, node) =>\n  R.evolve({\n    children: R.map(layoutTspan(fontStore)),\n  })(node);\n\nexport default R.curryN(2, layoutText);\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/src/svg/layoutText.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-1341",
    "model_patch": "diff --git a/setFlexWrap.js b/setFlexWrap.js\n--- a/setFlexWrap.js\n+++ b/setFlexWrap.js\n@@ -6,7 +6,7 @@\n  *\n  * @param {String} flex wrap value\n  * @param {Object} node instance\n- * @return {Object} node instance\n+ * @returns {Object} node instance\n  */\n const setFlexWrap = value => node => {\n   const yogaNode = node._yogaNode;\ndiff --git a/resolveFlex.js b/resolveFlex.js\nnew file mode 100644\n--- /dev/null\n+++ b/resolveFlex.js\n@@ -0,0 +1,28 @@\n+import * as R from 'ramda';\n+import Yoga from '@react-pdf/yoga';\n+\n+/**\n+ * Set flex attribute to node's Yoga instance\n+ *\n+ * @param {String|Number} flex value\n+ * @param {Object} node instance\n+ * @returns {Object} node instance\n+ */\n+const setFlex = value => node => {\n+  const yogaNode = node._yogaNode;\n+\n+  if (yogaNode) {\n+    const yogaValue = R.cond([\n+      [R.is(Number), R.identity],\n+      [R.equals('auto'), R.always(Yoga.FLEX_AUTO)],\n+      [R.T, R.always(Yoga.FLEX_NO_FLEX)],\n+    ])(value);\n+\n+    yogaNode.setFlex(yogaValue);\n+  }\n+\n+  return node;\n+};\n+\n+export default setFlex;\ndiff --git a/resolveNode.js b/resolveNode.js\n--- a/resolveNode.js\n+++ b/resolveNode.js\n@@ -1,6 +1,7 @@\n import * as R from 'ramda';\n import setFlexWrap from './setFlexWrap';\n+import setFlex from './resolveFlex';\n \n const resolveNode = node => {\n   const style = node.style || {};\n@@ -9,6 +10,7 @@\n \n   return R.compose(\n     setFlexWrap(style.flexWrap),\n+    setFlex(style.flex),\n   )(node);\n };",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 93.67,
      "issue_embedding_time_ms": 93.67,
      "retrieval_time_ms_jina": 0.84,
      "retrieval_time_ms": 0.84,
      "total_retrieval_time_ms": 94.51,
      "generation_time_ms": 4426.25,
      "total_io_time_ms": 4520.76,
      "input_total_token_limit": null,
      "issue_text_tokens": 175,
      "vlm_tokens": 0,
      "retrieved_tokens": 2966,
      "prompt_template_tokens": 516,
      "total_input_prompt_tokens": 3657,
      "output_generated_tokens": 466,
      "total_io_tokens": 4123,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nLatest update 2.0.13 produces a flexbox error when using \\\"flex\\\"\\n**Describe the bug**\\r\\nIf I use the \\\"flex\\\" keyword in css in the latest update it gives me the error \\\"TypeError: value.split is not a function\\\"  (Such as flex:1)\\r\\n\\r\\n**To Reproduce**\\r\\nSteps to reproduce the behavior including code snippet (if applies):\\r\\n1. Use flex keyword in css\\r\\n\\r\\n**Screenshots**\\r\\n![value split is not a function](https://user-images.githubusercontent.com/3676669/119581286-7ec0e880-bd7f-11eb-8eb6-0983bf4c8f45.png)\\r\\n\\r\\n**Desktop (please complete the following information):**\\r\\n - OS: Windows\\r\\n - Browser: Firefox/Chrome\\r\\n - React-pdf version: 2.0.13\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of List.js]\\nimport React from 'react';\\nimport { Text, View, StyleSheet } from '@react-pdf/renderer';\\n\\nconst styles = StyleSheet.create({\\n  item: {\\n    flexDirection: 'row',\\n    marginBottom: 5,\\n  },\\n  bulletPoint: {\\n    width: 10,\\n    fontSize: 10,\\n  },\\n  itemContent: {\\n    flex: 1,\\n    fontSize: 10,\\n    fontFamily: 'Lato',\\n  },\\n});\\n\\nconst List = ({ children }) => children;\\n\\nexport const Item = ({ children }) => (\\n  <View style={styles.item}>\\n    <Text style={styles.bulletPoint}>\\u2022</Text>\\n    <Text style={styles.itemContent}>{children}</Text>\\n  </View>\\n);\\n\\nexport default List;\\n\\n[end of List.js]\\n[start of resolveTextLayout.js]\\nimport * as R from 'ramda';\\nimport * as P from '@react-pdf/primitives';\\n\\nimport layoutText from '../text/layoutText';\\n\\nconst isType = R.propEq('type');\\n\\nconst isSvg = isType(P.Svg);\\n\\nconst isText = isType(P.Text);\\n\\nconst isNotSvg = R.complement(isSvg);\\n\\nconst shouldLayoutText = node => isText(node) && !node.lines;\\n\\n/**\\n * Performs text layout on text node if wasn't calculated before.\\n * Text layout is usually performed on Yoga's layout process (via setMeasureFunc),\\n * but we need to layout those nodes with fixed width and height.\\n *\\n * @param {Object} node\\n * @returns {Object} layout node\\n */\\nconst resolveTextLayout = (node, fontStore) => {\\n  const mapChild = child => resolveTextLayout(child, fontStore);\\n\\n  return R.compose(\\n    R.evolve({\\n      children: R.map(R.when(isNotSvg, mapChild)),\\n    }),\\n    R.when(\\n      shouldLayoutText,\\n      R.compose(\\n        R.converge(R.assoc('lines'), [\\n          R.converge(layoutText, [\\n            R.identity,\\n            R.path(['box', 'width']),\\n            R.path(['box', 'height']),\\n            R.always(fontStore),\\n          ]),\\n          R.identity,\\n        ]),\\n      ),\\n    ),\\n  )(node);\\n};\\n\\nexport default resolveTextLayout;\\n\\n[end of resolveTextLayout.js]\\n[start of setFlexWrap.js]\\nimport * as R from 'ramda';\\nimport Yoga from '@react-pdf/yoga';\\n\\n/**\\n * Set flex wrap attribute to node's Yoga instance\\n *\\n * @param {String} flex wrap value\\n * @param {Object} node instance\\n * @return {Object} node instance\\n */\\nconst setFlexWrap = value => node => {\\n  const yogaNode = node._yogaNode;\\n\\n  if (yogaNode) {\\n    const yogaValue = R.cond([\\n      [R.equals('wrap'), R.always(Yoga.WRAP_WRAP)],\\n      [R.equals('wrap-reverse'), R.always(Yoga.WRAP_WRAP_REVERSE)],\\n      [R.T, R.always(Yoga.WRAP_NO_WRAP)],\\n    ])(value);\\n\\n    yogaNode.setFlexWrap(yogaValue);\\n  }\\n\\n  return node;\\n};\\n\\nexport default setFlexWrap;\\n\\n[end of setFlexWrap.js]\\n[start of layoutText.js]\\nimport * as R from 'ramda';\\nimport layoutEngine from '@react-pdf/textkit/layout';\\nimport linebreaker from '@react-pdf/textkit/engines/linebreaker';\\nimport justification from '@react-pdf/textkit/engines/justification';\\nimport textDecoration from '@react-pdf/textkit/engines/textDecoration';\\nimport scriptItemizer from '@react-pdf/textkit/engines/scriptItemizer';\\nimport wordHyphenation from '@react-pdf/textkit/engines/wordHyphenation';\\n\\nimport fontSubstitution from './fontSubstitution';\\nimport getAttributedString from './getAttributedString';\\n\\nconst engines = {\\n  linebreaker,\\n  justification,\\n  textDecoration,\\n  scriptItemizer,\\n  wordHyphenation,\\n  fontSubstitution,\\n};\\n\\nconst engine = layoutEngine(engines);\\n\\nconst getMaxLines = R.path(['style', 'maxLines']);\\n\\nconst getTextOverflow = R.path(['style', 'textOverflow']);\\n\\n/**\\n * Get layout container for specific text node\\n *\\n * @param {Number} width\\n * @param {Number} height\\n * @param {Object} node\\n * @returns {Object} layout container\\n */\\nconst getContainer = (width, height) => node => {\\n  const maxLines = getMaxLines(node);\\n  const textOverflow = getTextOverflow(node);\\n\\n  return {\\n    x: 0,\\n    y: 0,\\n    width,\\n    maxLines,\\n    height: height || Infinity,\\n    truncateMode: textOverflow,\\n  };\\n};\\n\\n/**\\n * Get text layout options for specific text node\\n *\\n * @param {Object} node instance\\n * @returns {Object} layout options\\n */\\nconst getLayoutOptions = fontStore => node => ({\\n  hyphenationPenalty: node.props.hyphenationPenalty,\\n  shrinkWhitespaceFactor: { before: -0.5, after: -0.5 },\\n  hyphenationCallback:\\n    node.props.hyphenationCallback ||\\n    fontStore?.getHyphenationCallback() ||\\n    null,\\n});\\n\\n/**\\n * Get text lines for given node\\n *\\n * @param {Object} node\\n * @param {Number} container width\\n * @param {Number} container height\\n * @param {Number} fontStore font store\\n * @returns {Array} layout lines\\n */\\nconst layoutText = (node, width, height, fontStore) => {\\n  return R.compose(\\n    R.reduce(R.concat, []),\\n    R.converge(engine, [\\n      getAttributedString(fontStore),\\n      getContainer(width, height),\\n      getLayoutOptions(fontStore),\\n    ]),\\n  )(node);\\n};\\n\\nexport default R.curryN(4, layoutText);\\n\\n[end of layoutText.js]\\n[start of resolvePagination.js]\\n/* eslint-disable no-continue */\\n/* eslint-disable prefer-destructuring */\\n\\nimport * as R from 'ramda';\\nimport * as P from '@react-pdf/primitives';\\n\\nimport splitText from '../text/splitText';\\nimport splitNode from '../node/splitNode';\\nimport createInstance from '../node/createInstance';\\nimport shouldNodeBreak from '../node/shouldBreak';\\nimport getContentArea from '../page/getContentArea';\\nimport resolveTextLayout from './resolveTextLayout';\\nimport resolveInheritance from './resolveInheritance';\\nimport { resolvePageDimensions } from './resolveDimensions';\\n\\nconst isText = R.propEq('type', P.Text);\\n\\n// Prevent splitting elements by low decimal numbers\\nconst SAFTY_THRESHOLD = 0.001;\\n\\nconst assingChildren = R.assoc('children');\\n\\nconst getTop = R.pathOr(0, ['box', 'top']);\\n\\nconst getHeight = R.path(['box', 'height']);\\n\\nconst getChildren = R.propOr([], 'children');\\n\\nconst isElementOutside = R.useWith(R.lte, [R.identity, getTop]);\\n\\nconst isFixed = R.pathEq(['props', 'fixed'], true);\\n\\nconst allFixed = R.all(isFixed);\\n\\nconst isDynamic = R.hasPath(['props', 'render']);\\n\\nconst compose = (...fns) => (value, ...args) => {\\n  let result = value;\\n  const reversedFns = R.reverse(fns);\\n\\n  for (let i = 0; i < reversedFns.length; i += 1) {\\n    const fn = reversedFns[i];\\n    result = fn(result, ...args);\\n  }\\n\\n  return result;\\n};\\n\\nconst relayoutPage = compose(\\n  resolveTextLayout,\\n  resolveInheritance,\\n  resolvePageDimensions,\\n);\\n\\nconst splitNodes = (height, nodes) => {\\n  const currentChildren = [];\\n  const nextChildren = [];\\n\\n  for (let i = 0; i < nodes.length; i += 1) {\\n    const child = nodes[i];\\n    const futureNodes = nodes.slice(i + 1);\\n    const futureFixedNodes = R.filter(isFixed, futureNodes);\\n\\n    const nodeTop = getTop(child);\\n    const nodeHeight = getHeight(child);\\n    const isOutside = isElementOutside(height, child);\\n    const shouldBreak = shouldNodeBreak(child, futureNodes, height);\\n    const shouldSplit = height + SAFTY_THRESHOLD < nodeTop + nodeHeight;\\n\\n    if (isFixed(child)) {\\n      nextChildren.push(child);\\n      currentChildren.push(child);\\n      continue;\\n    }\\n\\n    if (isOutside) {\\n      const next = R.evolve({ box: { top: R.subtract(R.__, height) } })(child);\\n      nextChildren.push(next);\\n      continue;\\n    }\\n\\n    if (shouldBreak) {\\n      const next = R.evolve({\\n        box: { top: R.subtract(R.__, height) },\\n        props: R.evolve({ break: R.always(false) }),\\n      })(child);\\n\\n      currentChildren.push(...futureFixedNodes);\\n      nextChildren.push(next, ...futureNodes);\\n      break;\\n    }\\n\\n    if (shouldSplit) {\\n      const [currentChild, nextChild] = split(child, height);\\n\\n      if (currentChild) currentChildren.push(currentChild);\\n      if (nextChild) nextChildren.push(nextChild);\\n\\n      continue;\\n    }\\n\\n    currentChildren.push(child);\\n  }\\n\\n  return [currentChildren, nextChildren];\\n};\\n\\nconst splitChildren = (height, node) => {\\n  const children = getChildren(node);\\n  const availableHeight = height - getTop(node);\\n  return splitNodes(availableHeight, children);\\n};\\n\\nconst splitView = (node, height) => {\\n  const [currentNode, nextNode] = splitNode(node, height);\\n  const [currentChilds, nextChildren] = splitChildren(height, node);\\n\\n  return [\\n    assingChildren(currentChilds)(currentNode),\\n    assingChildren(nextChildren)(nextNode),\\n  ];\\n};\\n\\nconst split = R.ifElse(isText, splitText, splitView);\\n\\nconst shouldResolveDynamicNodes = node => {\\n  const children = node.children || [];\\n  return isDynamic(node) || children.some(shouldResolveDynamicNodes);\\n};\\n\\nconst resolveDynamicNodes = (props, node) => {\\n  const isNodeDynamic = isDynamic(node);\\n\\n  // Call render prop on dynamic nodes and append result to children\\n  const resolveChildren = (children = []) => {\\n    if (isNodeDynamic) {\\n      const res = node.props.render(props);\\n      return [createInstance(res)].filter(Boolean);\\n    }\\n\\n    return children.map(c => resolveDynamicNodes(props, c));\\n  };\\n\\n  // We reset dynamic text box so it can be computed again later on\\n  const resolveBox = box => {\\n    return isNodeDynamic && isText(node) ? { ...box, height: 0 } : box;\\n  };\\n\\n  return R.evolve(\\n    {\\n      box: resolveBox,\\n      children: resolveChildren,\\n      lines: prev => (isNodeDynamic ? null : prev),\\n    },\\n    node,\\n  );\\n};\\n\\nconst resolveDynamicPage = (props, page, fontStore) => {\\n  if (shouldResolveDynamicNodes(page)) {\\n    const resolvedPage = resolveDynamicNodes(props, page);\\n    return relayoutPage(resolvedPage, fontStore);\\n  }\\n\\n  return page;\\n};\\n\\nconst splitPage = (page, pageNumber, fontStore) => {\\n  const contentArea = getContentArea(page);\\n  const height = R.path(['style', 'height'], page);\\n  const dynamicPage = resolveDynamicPage({ pageNumber }, page, fontStore);\\n\\n  const [currentChilds, nextChilds] = splitNodes(\\n    contentArea,\\n    dynamicPage.children,\\n  );\\n\\n  const relayout = node => relayoutPage(node, fontStore);\\n\\n  const currentPage = R.compose(\\n    relayout,\\n    assingChildren(currentChilds),\\n    R.assocPath(['box', 'height'], height),\\n  )(page);\\n\\n  if (R.isEmpty(nextChilds) || allFixed(nextChilds)) return [currentPage, null];\\n\\n  const nextPage = R.compose(\\n    relayout,\\n    assingChildren(nextChilds),\\n    R.dissocPath(['box', 'height']),\\n  )(page);\\n\\n  return [currentPage, nextPage];\\n};\\n\\nconst resolvePageIndices = fontStore => (page, pageNumber, pages) => {\\n  const totalPages = pages.length;\\n\\n  const props = {\\n    totalPages,\\n    pageNumber: pageNumber + 1,\\n    subPageNumber: page.subPageNumber + 1,\\n    subPageTotalPages: page.subPageTotalPages,\\n  };\\n\\n  return resolveDynamicPage(props, page, fontStore);\\n};\\n\\nconst assocSubPageData = subpages => {\\n  return subpages.map((page, i) => ({\\n    ...page,\\n    subPageNumber: i,\\n    subPageTotalPages: subpages.length,\\n  }));\\n};\\n\\nconst dissocSubPageData = page => {\\n  return R.compose(\\n    R.dissoc('subPageNumber'),\\n    R.dissoc('subPageTotalPages'),\\n  )(page);\\n};\\n\\nconst paginate = (page, pageNumber, fontStore) => {\\n  if (!page) return [];\\n\\n  let splittedPage = splitPage(page, pageNumber, fontStore);\\n\\n  const pages = [splittedPage[0]];\\n  let nextPage = splittedPage[1];\\n\\n  while (nextPage !== null) {\\n    splittedPage = splitPage(nextPage, pageNumber + pages.length, fontStore);\\n\\n    pages.push(splittedPage[0]);\\n    nextPage = splittedPage[1];\\n  }\\n\\n  return pages;\\n};\\n\\n/**\\n * Performs pagination. This is the step responsible of breaking the whole document\\n * into pages following pagiation rules, such as `fixed`, `break` and dynamic nodes.\\n *\\n * @param {Object} node\\n * @param {Object} fontStore font store\\n * @returns {Object} layout node\\n */\\nconst resolvePagination = (doc, fontStore) => {\\n  let pages = [];\\n  let pageNumber = 1;\\n\\n  for (let i = 0; i < doc.children.length; i += 1) {\\n    const page = doc.children[i];\\n    let subpages = paginate(page, pageNumber, fontStore);\\n\\n    subpages = assocSubPageData(subpages);\\n    pageNumber += subpages.length;\\n    pages = pages.concat(subpages);\\n  }\\n\\n  pages = pages.map(\\n    R.compose(dissocSubPageData, resolvePageIndices(fontStore)),\\n  );\\n\\n  return assingChildren(pages, doc);\\n};\\n\\nexport default resolvePagination;\\n\\n[end of resolvePagination.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "List.js",
        "resolveTextLayout.js",
        "setFlexWrap.js",
        "layoutText.js",
        "resolvePagination.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "fa7e3491-581c-4f15-a724-a03f7aa7d7df",
        "score": 0.01639344262295082,
        "payload": {
          "text": "import React from 'react';\nimport { Text, View, StyleSheet } from '@react-pdf/renderer';\n\nconst styles = StyleSheet.create({\n  item: {\n    flexDirection: 'row',\n    marginBottom: 5,\n  },\n  bulletPoint: {\n    width: 10,\n    fontSize: 10,\n  },\n  itemContent: {\n    flex: 1,\n    fontSize: 10,\n    fontFamily: 'Lato',\n  },\n});\n\nconst List = ({ children }) => children;\n\nexport const Item = ({ children }) => (\n  <View style={styles.item}>\n    <Text style={styles.bulletPoint}>\u2022</Text>\n    <Text style={styles.itemContent}>{children}</Text>\n  </View>\n);\n\nexport default List;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/examples/src/resume/List.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "1ef871f5-a381-4992-b4fb-dac18db094c5",
        "score": 0.016129032258064516,
        "payload": {
          "text": "import * as R from 'ramda';\nimport * as P from '@react-pdf/primitives';\n\nimport layoutText from '../text/layoutText';\n\nconst isType = R.propEq('type');\n\nconst isSvg = isType(P.Svg);\n\nconst isText = isType(P.Text);\n\nconst isNotSvg = R.complement(isSvg);\n\nconst shouldLayoutText = node => isText(node) && !node.lines;\n\n/**\n * Performs text layout on text node if wasn't calculated before.\n * Text layout is usually performed on Yoga's layout process (via setMeasureFunc),\n * but we need to layout those nodes with fixed width and height.\n *\n * @param {Object} node\n * @returns {Object} layout node\n */\nconst resolveTextLayout = (node, fontStore) => {\n  const mapChild = child => resolveTextLayout(child, fontStore);\n\n  return R.compose(\n    R.evolve({\n      children: R.map(R.when(isNotSvg, mapChild)),\n    }),\n    R.when(\n      shouldLayoutText,\n      R.compose(\n        R.converge(R.assoc('lines'), [\n          R.converge(layoutText, [\n            R.identity,\n            R.path(['box', 'width']),\n            R.path(['box', 'height']),\n            R.always(fontStore),\n          ]),\n          R.identity,\n        ]),\n      ),\n    ),\n  )(node);\n};\n\nexport default resolveTextLayout;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/src/steps/resolveTextLayout.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "0696d866-78a1-40d5-b33a-78a9348ed483",
        "score": 0.015873015873015872,
        "payload": {
          "text": "import * as R from 'ramda';\nimport Yoga from '@react-pdf/yoga';\n\n/**\n * Set flex wrap attribute to node's Yoga instance\n *\n * @param {String} flex wrap value\n * @param {Object} node instance\n * @return {Object} node instance\n */\nconst setFlexWrap = value => node => {\n  const yogaNode = node._yogaNode;\n\n  if (yogaNode) {\n    const yogaValue = R.cond([\n      [R.equals('wrap'), R.always(Yoga.WRAP_WRAP)],\n      [R.equals('wrap-reverse'), R.always(Yoga.WRAP_WRAP_REVERSE)],\n      [R.T, R.always(Yoga.WRAP_NO_WRAP)],\n    ])(value);\n\n    yogaNode.setFlexWrap(yogaValue);\n  }\n\n  return node;\n};\n\nexport default setFlexWrap;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/src/node/setFlexWrap.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "4cb2409b-6ba5-45ac-b1b5-f5af2b70d0cb",
        "score": 0.015625,
        "payload": {
          "text": "import * as R from 'ramda';\nimport layoutEngine from '@react-pdf/textkit/layout';\nimport linebreaker from '@react-pdf/textkit/engines/linebreaker';\nimport justification from '@react-pdf/textkit/engines/justification';\nimport textDecoration from '@react-pdf/textkit/engines/textDecoration';\nimport scriptItemizer from '@react-pdf/textkit/engines/scriptItemizer';\nimport wordHyphenation from '@react-pdf/textkit/engines/wordHyphenation';\n\nimport fontSubstitution from './fontSubstitution';\nimport getAttributedString from './getAttributedString';\n\nconst engines = {\n  linebreaker,\n  justification,\n  textDecoration,\n  scriptItemizer,\n  wordHyphenation,\n  fontSubstitution,\n};\n\nconst engine = layoutEngine(engines);\n\nconst getMaxLines = R.path(['style', 'maxLines']);\n\nconst getTextOverflow = R.path(['style', 'textOverflow']);\n\n/**\n * Get layout container for specific text node\n *\n * @param {Number} width\n * @param {Number} height\n * @param {Object} node\n * @returns {Object} layout container\n */\nconst getContainer = (width, height) => node => {\n  const maxLines = getMaxLines(node);\n  const textOverflow = getTextOverflow(node);\n\n  return {\n    x: 0,\n    y: 0,\n    width,\n    maxLines,\n    height: height || Infinity,\n    truncateMode: textOverflow,\n  };\n};\n\n/**\n * Get text layout options for specific text node\n *\n * @param {Object} node instance\n * @returns {Object} layout options\n */\nconst getLayoutOptions = fontStore => node => ({\n  hyphenationPenalty: node.props.hyphenationPenalty,\n  shrinkWhitespaceFactor: { before: -0.5, after: -0.5 },\n  hyphenationCallback:\n    node.props.hyphenationCallback ||\n    fontStore?.getHyphenationCallback() ||\n    null,\n});\n\n/**\n * Get text lines for given node\n *\n * @param {Object} node\n * @param {Number} container width\n * @param {Number} container height\n * @param {Number} fontStore font store\n * @returns {Array} layout lines\n */\nconst layoutText = (node, width, height, fontStore) => {\n  return R.compose(\n    R.reduce(R.concat, []),\n    R.converge(engine, [\n      getAttributedString(fontStore),\n      getContainer(width, height),\n      getLayoutOptions(fontStore),\n    ]),\n  )(node);\n};\n\nexport default R.curryN(4, layoutText);\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/src/text/layoutText.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "65a4cfd0-509c-4e1a-9af0-0f266ba4876e",
        "score": 0.015384615384615385,
        "payload": {
          "text": "/* eslint-disable no-continue */\n/* eslint-disable prefer-destructuring */\n\nimport * as R from 'ramda';\nimport * as P from '@react-pdf/primitives';\n\nimport splitText from '../text/splitText';\nimport splitNode from '../node/splitNode';\nimport createInstance from '../node/createInstance';\nimport shouldNodeBreak from '../node/shouldBreak';\nimport getContentArea from '../page/getContentArea';\nimport resolveTextLayout from './resolveTextLayout';\nimport resolveInheritance from './resolveInheritance';\nimport { resolvePageDimensions } from './resolveDimensions';\n\nconst isText = R.propEq('type', P.Text);\n\n// Prevent splitting elements by low decimal numbers\nconst SAFTY_THRESHOLD = 0.001;\n\nconst assingChildren = R.assoc('children');\n\nconst getTop = R.pathOr(0, ['box', 'top']);\n\nconst getHeight = R.path(['box', 'height']);\n\nconst getChildren = R.propOr([], 'children');\n\nconst isElementOutside = R.useWith(R.lte, [R.identity, getTop]);\n\nconst isFixed = R.pathEq(['props', 'fixed'], true);\n\nconst allFixed = R.all(isFixed);\n\nconst isDynamic = R.hasPath(['props', 'render']);\n\nconst compose = (...fns) => (value, ...args) => {\n  let result = value;\n  const reversedFns = R.reverse(fns);\n\n  for (let i = 0; i < reversedFns.length; i += 1) {\n    const fn = reversedFns[i];\n    result = fn(result, ...args);\n  }\n\n  return result;\n};\n\nconst relayoutPage = compose(\n  resolveTextLayout,\n  resolveInheritance,\n  resolvePageDimensions,\n);\n\nconst splitNodes = (height, nodes) => {\n  const currentChildren = [];\n  const nextChildren = [];\n\n  for (let i = 0; i < nodes.length; i += 1) {\n    const child = nodes[i];\n    const futureNodes = nodes.slice(i + 1);\n    const futureFixedNodes = R.filter(isFixed, futureNodes);\n\n    const nodeTop = getTop(child);\n    const nodeHeight = getHeight(child);\n    const isOutside = isElementOutside(height, child);\n    const shouldBreak = shouldNodeBreak(child, futureNodes, height);\n    const shouldSplit = height + SAFTY_THRESHOLD < nodeTop + nodeHeight;\n\n    if (isFixed(child)) {\n      nextChildren.push(child);\n      currentChildren.push(child);\n      continue;\n    }\n\n    if (isOutside) {\n      const next = R.evolve({ box: { top: R.subtract(R.__, height) } })(child);\n      nextChildren.push(next);\n      continue;\n    }\n\n    if (shouldBreak) {\n      const next = R.evolve({\n        box: { top: R.subtract(R.__, height) },\n        props: R.evolve({ break: R.always(false) }),\n      })(child);\n\n      currentChildren.push(...futureFixedNodes);\n      nextChildren.push(next, ...futureNodes);\n      break;\n    }\n\n    if (shouldSplit) {\n      const [currentChild, nextChild] = split(child, height);\n\n      if (currentChild) currentChildren.push(currentChild);\n      if (nextChild) nextChildren.push(nextChild);\n\n      continue;\n    }\n\n    currentChildren.push(child);\n  }\n\n  return [currentChildren, nextChildren];\n};\n\nconst splitChildren = (height, node) => {\n  const children = getChildren(node);\n  const availableHeight = height - getTop(node);\n  return splitNodes(availableHeight, children);\n};\n\nconst splitView = (node, height) => {\n  const [currentNode, nextNode] = splitNode(node, height);\n  const [currentChilds, nextChildren] = splitChildren(height, node);\n\n  return [\n    assingChildren(currentChilds)(currentNode),\n    assingChildren(nextChildren)(nextNode),\n  ];\n};\n\nconst split = R.ifElse(isText, splitText, splitView);\n\nconst shouldResolveDynamicNodes = node => {\n  const children = node.children || [];\n  return isDynamic(node) || children.some(shouldResolveDynamicNodes);\n};\n\nconst resolveDynamicNodes = (props, node) => {\n  const isNodeDynamic = isDynamic(node);\n\n  // Call render prop on dynamic nodes and append result to children\n  const resolveChildren = (children = []) => {\n    if (isNodeDynamic) {\n      const res = node.props.render(props);\n      return [createInstance(res)].filter(Boolean);\n    }\n\n    return children.map(c => resolveDynamicNodes(props, c));\n  };\n\n  // We reset dynamic text box so it can be computed again later on\n  const resolveBox = box => {\n    return isNodeDynamic && isText(node) ? { ...box, height: 0 } : box;\n  };\n\n  return R.evolve(\n    {\n      box: resolveBox,\n      children: resolveChildren,\n      lines: prev => (isNodeDynamic ? null : prev),\n    },\n    node,\n  );\n};\n\nconst resolveDynamicPage = (props, page, fontStore) => {\n  if (shouldResolveDynamicNodes(page)) {\n    const resolvedPage = resolveDynamicNodes(props, page);\n    return relayoutPage(resolvedPage, fontStore);\n  }\n\n  return page;\n};\n\nconst splitPage = (page, pageNumber, fontStore) => {\n  const contentArea = getContentArea(page);\n  const height = R.path(['style', 'height'], page);\n  const dynamicPage = resolveDynamicPage({ pageNumber }, page, fontStore);\n\n  const [currentChilds, nextChilds] = splitNodes(\n    contentArea,\n    dynamicPage.children,\n  );\n\n  const relayout = node => relayoutPage(node, fontStore);\n\n  const currentPage = R.compose(\n    relayout,\n    assingChildren(currentChilds),\n    R.assocPath(['box', 'height'], height),\n  )(page);\n\n  if (R.isEmpty(nextChilds) || allFixed(nextChilds)) return [currentPage, null];\n\n  const nextPage = R.compose(\n    relayout,\n    assingChildren(nextChilds),\n    R.dissocPath(['box', 'height']),\n  )(page);\n\n  return [currentPage, nextPage];\n};\n\nconst resolvePageIndices = fontStore => (page, pageNumber, pages) => {\n  const totalPages = pages.length;\n\n  const props = {\n    totalPages,\n    pageNumber: pageNumber + 1,\n    subPageNumber: page.subPageNumber + 1,\n    subPageTotalPages: page.subPageTotalPages,\n  };\n\n  return resolveDynamicPage(props, page, fontStore);\n};\n\nconst assocSubPageData = subpages => {\n  return subpages.map((page, i) => ({\n    ...page,\n    subPageNumber: i,\n    subPageTotalPages: subpages.length,\n  }));\n};\n\nconst dissocSubPageData = page => {\n  return R.compose(\n    R.dissoc('subPageNumber'),\n    R.dissoc('subPageTotalPages'),\n  )(page);\n};\n\nconst paginate = (page, pageNumber, fontStore) => {\n  if (!page) return [];\n\n  let splittedPage = splitPage(page, pageNumber, fontStore);\n\n  const pages = [splittedPage[0]];\n  let nextPage = splittedPage[1];\n\n  while (nextPage !== null) {\n    splittedPage = splitPage(nextPage, pageNumber + pages.length, fontStore);\n\n    pages.push(splittedPage[0]);\n    nextPage = splittedPage[1];\n  }\n\n  return pages;\n};\n\n/**\n * Performs pagination. This is the step responsible of breaking the whole document\n * into pages following pagiation rules, such as `fixed`, `break` and dynamic nodes.\n *\n * @param {Object} node\n * @param {Object} fontStore font store\n * @returns {Object} layout node\n */\nconst resolvePagination = (doc, fontStore) => {\n  let pages = [];\n  let pageNumber = 1;\n\n  for (let i = 0; i < doc.children.length; i += 1) {\n    const page = doc.children[i];\n    let subpages = paginate(page, pageNumber, fontStore);\n\n    subpages = assocSubPageData(subpages);\n    pageNumber += subpages.length;\n    pages = pages.concat(subpages);\n  }\n\n  pages = pages.map(\n    R.compose(dissocSubPageData, resolvePageIndices(fontStore)),\n  );\n\n  return assingChildren(pages, doc);\n};\n\nexport default resolvePagination;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/src/steps/resolvePagination.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-1363",
    "model_patch": "diff --git a/Svg2.js b/Svg2.js\nindex 3c8f7e2..b1a2f3c 100644\n--- a/Svg2.js\n+++ b/Svg2.js\n@@ -51,7 +51,7 @@ const Svg2 = () => (\n     </G>\n     <G>\n       <Text\n-        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\n+        style={{ fontSize: '11', fill: 'rgba(102, 102, 102, 1)' }}\n         textAnchor=\"middle\"\n         transform=\"translate(0,0)\"\n         y=\"383\"\n@@ -60,7 +60,7 @@ const Svg2 = () => (\n       <Text\n         x=\"167.81321682141\"\n         style={{\n-          color: '#666666',\n+          fill: 'rgba(102, 102, 102, 1)',\n           fontSize: '11',\n           fill: '#666666',\n         }}\n@@ -69,7 +69,7 @@ const Svg2 = () => (\n       <Text\n         x=\"276.55379574003\"\n         style={{\n-          color: '#666666',\n+          fill: 'rgba(102, 102, 102, 1)',\n           fontSize: '11',\n           fill: '#666666',\n         }}\n@@ -78,7 +78,7 @@ const Svg2 = () => (\n       <Text\n         x=\"384.99726925177\"\n         style={{\n-          color: '#666666',\n+          fill: 'rgba(102, 102, 102, 1)',\n           fontSize: '11',\n           fill: '#666666',\n         }}\n@@ -87,7 +87,7 @@ const Svg2 = () => (\n       <Text\n         x=\"493.44074276352\"\n         style={{\n-          color: '#666666',\n+          fill: 'rgba(102, 102, 102, 1)',\n           fontSize: '11',\n           fill: '#666666',\n         }}\n@@ -97,7 +97,7 @@ const Svg2 = () => (\n     <G>\n       <Text\n         x=\"31\"\n-        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\n+        style={{ fontSize: '11', fill: 'rgba(102, 102, 102, 1)' }}\n         textAnchor=\"end\"\n         transform=\"translate(0,0)\"\n         y=\"362\"\n@@ -106,7 +106,7 @@ const Svg2 = () => (\n       <Text\n         x=\"31\"\n         style={{\n-          color: '#666666',\n+          fill: 'rgba(102, 102, 102, 1)',\n           fontSize: '11',\n           fill: '#666666',\n         }}\n@@ -115,7 +115,7 @@ const Svg2 = () => (\n       <Text\n         x=\"31\"\n         style={{\n-          color: '#666666',\n+          fill: 'rgba(102, 102, 102, 1)',\n           fontSize: '11',\n           fill: '#666666',\n         }}\n@@ -124,7 +124,7 @@ const Svg2 = () => (\n       <Text\n         x=\"31\"\n         style={{\n-          color: '#666666',\n+          fill: 'rgba(102, 102, 102, 1)',\n           fontSize: '11',\n           fill: '#666666',\n         }}\n@@ -133,7 +133,7 @@ const Svg2 = () => (\n       <Text\n         x=\"31\"\n         style={{\n-          color: '#666666',\n+          fill: 'rgba(102, 102, 102, 1)',\n           fontSize: '11',\n           fill: '#666666',\n         }}\n@@ -142,7 +142,7 @@ const Svg2 = () => (\n       <Text\n         x=\"31\"\n         style={{\n-          color: '#666666',\n+          fill: 'rgba(102, 102, 102, 1)',\n           fontSize: '11',\n           fill: '#666666',\n         }}\n@@ -151,7 +151,7 @@ const Svg2 = () => (\n       <Text\n         x=\"31\"\n         style={{\n-          color: '#666666',\n+          fill: 'rgba(102, 102, 102, 1)',\n           fontSize: '11',\n           fill: '#666666',\n         }}\n@@ -160,7 +160,7 @@ const Svg2 = () => (\n       <Text\n         x=\"0\"\n         style={{\n-          color: '#666666',\n+          fill: 'rgba(102, 102, 102, 1)',\n           fontSize: '11',\n           fill: '#666666',\n         }}\n@@ -170,7 +170,7 @@ const Svg2 = () => (\n     <G transform=\"translate(0,0)\">\n       <G transform=\"translate(0,10)\">\n         <Text\n-          style={{ color: '#666666', fill: '#666666' }}\n+          style={{ fill: 'rgba(102, 102, 102, 1)' }}\n           x=\"46\"\n           y=\"15\"\n         >\n@@ -176,7 +176,7 @@ const Svg2 = () => (\n         </Text>\n         <G transform=\"translate(158,0)\">\n           <Rect fill=\"none\" x=\"0\" y=\"0\" width=\"32\" height=\"22\" rx=\"2\" ry=\"2\" />\n           <Text\n-            style={{ fontWeight: 'normal', color: '#333333', fill: '#333333' }}\n+            style={{ fontWeight: 'normal', fill: 'rgba(51, 51, 51, 1)' }}\n             x=\"4.59375\"\n             y=\"14\"\n           >\n@@ -186,7 +186,7 @@ const Svg2 = () => (\n         <G transform=\"translate(232,0)\">\n           <Rect\n             fill=\"rgb(225, 243, 239)\"\n             fillOpacity=\" .50\"\n             x=\"0\"\n             y=\"0\"\n             width=\"32\"\n             height=\"22\"\n             rx=\"2\"\n             ry=\"2\"\n           />\n           <Text\n-            style={{ fontWeight: 'bold', fill: '#000000' }}\n+            style={{ fontWeight: 'bold', fill: 'rgba(0, 0, 0, 1)' }}\n             x=\"8.6640625\"\n             y=\"14\"\n           >\n@@ -198,7 +198,7 @@ const Svg2 = () => (\n       <G transform=\"translate(331,10)\">\n         <G transform=\"translate(0,0)\" fill=\"#666666\">\n           <Text\n-            style={{ fontSize: '12', fill: '#666666' }}\n+            style={{ fontSize: '12', fill: 'rgba(102, 102, 102, 1)' }}\n             x=\"2\"\n             y=\"14\"\n           >\n@@ -205,7 +205,7 @@ const Svg2 = () => (\n         </G>\n         <G transform=\"translate(38,0)\">\n           <Rect\n             fill=\"none\"\n             x=\"0.5\"\n             y=\"0.5\"\n             width=\"94\"\n             height=\"21\"\n             stroke=\"#cccccc\"\n             strokeWidth=\"1\"\n           />\n           <Text\n-            style={{ fontSize: '12', fill: '#333333' }}\n+            style={{ fontSize: '12', fill: 'rgba(51, 51, 51, 1)' }}\n             x=\"11.9140625\"\n             y=\"14\"\n           >\n@@ -215,7 +215,7 @@ const Svg2 = () => (\n         <G transform=\"translate(142,0)\" fill=\"#666666\">\n           <Text\n-            style={{ fontSize: '12', fill: '#666666' }}\n+            style={{ fontSize: '12', fill: 'rgba(102, 102, 102, 1)' }}\n             x=\"2\"\n             y=\"14\"\n           >\n@@ -222,7 +222,7 @@ const Svg2 = () => (\n         </G>\n         <G transform=\"translate(165,0)\">\n           <Rect\n             fill=\"none\"\n             x=\"0.5\"\n             y=\"0.5\"\n             width=\"94\"\n             height=\"21\"\n             stroke=\"#cccccc\"\n             strokeWidth=\"1\"\n           />\n           <Text\n-            style={{ fontSize: '12', fill: '#333333' }}\n+            style={{ fontSize: '12', fill: 'rgba(51, 51, 51, 1)' }}\n             x=\"11.9140625\"\n             y=\"14\"\n           >",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 1541.17,
      "issue_embedding_time_ms": 1541.17,
      "retrieval_time_ms_jina": 0.82,
      "retrieval_time_ms": 0.82,
      "total_retrieval_time_ms": 1541.99,
      "generation_time_ms": 13600.63,
      "total_io_time_ms": 15142.61,
      "input_total_token_limit": null,
      "issue_text_tokens": 1855,
      "vlm_tokens": 0,
      "retrieved_tokens": 18048,
      "prompt_template_tokens": 510,
      "total_input_prompt_tokens": 20413,
      "output_generated_tokens": 1910,
      "total_io_tokens": 22323,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nRGBA color doesn't work correct in Text component\\n**Describe the bug**\\r\\nhttps://react-pdf.org/repl?code=3187b0760ce02e00408a057025803c450298c0bc300500943807cf805030c00f0022230080b6198531165d400a02180e659a004f003619b006f61622003a0046200099080beed3a72a00d490600ee31a788913e4f6001acf80271008c1280c2204481b00b8600721b7dcde0003000d08484c2c802b0137aaba872695000a860a2c31a4b19c84023c94121418bc66a6938f0003802dd4021b8c002497a216140d8f140f0c129608a768239230120033d80c108c060015860d90d0c81746088c00198f23080422c00592128f089f22cd2c8249621214fa16374c2f4c002c8f18300ecf39e515003d0a5a468947eba03003127f74941442609280dc9e1f1f8026150b0422d158b144a94002898c1cf7041f0783625bdd3acf57bbd517706109166010231e4362c032600047642cd16167701c6ccc545b3de9f4e230106f45be4308c72a2d3958001b92115954ebe2f60723a2cee6e082937a600017a7458301e3409022311d9513c7e513459417be4f8081e2a2ecc04a98d56bd5038c6044ed4c1403616529dcb21800154c09d5703cee87638c1180043fd62a2c9d0553b43c4b0373511043b9506a3327ea33fa865bc30106a421965b40c2b992ed6dea8ce9f32471bf9b12b1a616fbab795b322e37cd470017d8dca8746520d9c98023fdbf6083698ff591c60af8e03ac651fa39461aac6bd7d6b41b3045cd9307bc102060ef218b00ed1ec4ac59d01d72c0f3f4c00880825e460f074be67722acb312982a2c021c26b3e302c1d682091bdec4a74d79ac7a340a3bf446020faa2eac0207eab6ba880f981e1026ca8b764a1aaa84b0b7918328bc9d040580ece01b4e6286e009168601ee12006a2c35be6ab0ae20346291806aa4c630e405a96300389d06cb9b36d8696424d1fa830c4bb11ea06da518203322b87c27872fa5b2d686044909b878e180ae086596326c4680105aca8b04ce52f426aa20ab9a10254f98b01015abd109cb0c05e8fac266c301408c8f04243c7281cdd1b4d18006236120866e1a6a15a4980cdb40763e69a8a68b311dd90caf336ac0e96b96ca8acc9d0d28c985a908c630b243059bc40634a160db047158053020d96927603520000dc419b47e7da36212f6bb88186c482a6ba9f43c09ad1a5cb319add10c249e60e660ca69a2b36ccc8b08c97da4a5c533da09bc0f5603f814566836ab7bc130a6da741482ac776bc4829a57ab63c0adee1de51774d01604876c93040c0395f20b0041da0e145728d8f9bf4330d46d166dc8c5078c89c52c00ea9af5158e6083d2f48c274ff771db794dc913d97e6483058fa74728069d1d590dd8a1975d976de62117cea9648c0f1b861618d5d000972b1b2bc441473d927be2e5038ab45d624d88568a3f382a0968e091890988992fb0dac88b808001c93064cd8aa2a59facc921e012361a1f87b32a2d9474222f0023eaaa110d8290783e600018002412307181874cacc51f7c3029769e1c99c36aa217a281051dc9280604a0c0df27b3f137008fc74030cc2b0ec0109b59064095e0140b20b27c055980d8f1c70eb1b342178de000f2103e887128de02d940407336f3b1405039410078df37cab1cf721f0847e4c02c8a0230df040df16c07c884a1be22a0008c00199be0004d000fa4900034b680006c2000007000751008a9e40c6250a03181408001a001387800041121b20afaac6f06407394f320678211427d4b8000328071613b03006079e24c303b40c06bd282281505e02439c45c4a09421e248201ca1785019104fa70091522c01f000042e81b2a302f008314788fb4aa2f800009092015ba888791fa3282a8251f910a060511e711fab01614808d23898000098000b128ca0980d2090910674c036f600ec56631f67173c4aa9d1105bc7c1ef7fe47c382d88e018ca03f1784623340b8a806e23c5786015e3fc56554850182684f099126c344cd042cfc0ae4d157d191781f1210d25289c87900a188271792e7a14cf1c0390594c694bcc24c0129653f25c4cdedbd9261f6a1362ec4548196298924ce29a52626b8f71232fc79c409952425f0299de196a5a558421ea670399f131277824832c1b0005a0004a394c00ac980e93280cb7e09e37266ca69601b42cc37e8718a758d059334c795731e9d8a6044e9ab238270fb4b30366507c9c327678cad9cd2b45b4ef168b3809caa9e726a70e3a9653613b86deb60302dca51ff31385764e393c456c028481c036f5cadb140a603b9b8a8641c825e71142b49d130140792ca0621561402f08ab5299d4be6aaca652b39172226d2b15c24e1132964acaba4d0c9ed3c3e5f0e00500b80d012a0bc63aaf2a0970d02605eec40ad500000\\r\\n\\r\\n**Expected behavior**\\r\\nWhen setting color or backgroundColor (rgba) for Text component, I want color to work the same as View component\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/19285404/120582712-23fe4f80-c457-11eb-871b-d0029dfc245f.png)\\r\\n\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of Svg2.js]\\n          d=\\\"M 0 229.26985714285718 L 2.0797378481704 230.31799999999998 L 4.1594756963408 228.6014761904762 L 6.2392135445112 229.46125714285716 L 8.3189513926816 228.27640000000002 L 10.398689240852 226.6905142857143 L 12.478427089022 227.21914285714286 L 14.558164937193 230.3909142857143 L 16.637902785363 230.26331428571427 L 18.717640633534 229.35188571428571 L 20.797378481704 224.44840000000002 L 22.877116329874 210.4306285714286 L 24.956854178045 177.0358857142857 L 27.036592026215 166.08051428571426 L 29.116329874386 169.36165714285715 L 31.196067722556 175.3892380952381 L 33.275805570726 223.51874285714285 L 35.355543418897 233.1981142857143 L 37.435281267067 207.86040000000003 L 39.515019115238 190.16957142857143 L 41.594756963408 181.68417142857143 L 43.674494811578 162.9452 L 45.754232659749 165.57011428571428 L 47.833970507919 180.21980952380952 L 49.91370835609 183.41588571428574 L 51.99344620426 212.05297142857142 L 54.07318405243 217.15697142857144 L 56.152921900601 217.3757142857143 L 58.232659748771 223.1906285714286 L 60.312397596942 206.2562857142857 L 62.392135445112 197.06908571428573 L 64.471873293282 189.6865142857143 L 66.551611141453 188.33152380952382 L 68.631348989623 176.52548571428574 L 70.711086837794 152.8648 L 72.790824685964 160.33851428571433 L 74.870562534134 156.2872142857143 L 76.950300382305 154.97931428571428 L 79.030038230475 181.192 L 81.109776078646 191.10834285714287 L 83.189513926816 183.83514285714284 L 85.269251774986 188.26468571428572 L 87.348989623157 185.45748571428572 L 89.428727471327 188.17354285714288 L 91.508465319498 136.9330285714286 L 93.588203167668 111.66519047619047 L 95.667941015838 112.30622857142856 L 97.747678864009 90.55954285714287 L 99.827416712179 77.56257142857146 L 101.90715456035 101.60150000000002 L 103.98689240852 108.73342857142859 L 106.06663025669 112.8166285714286 L 108.14636810486 155.23451428571428 L 110.22610595303 172.6428 L 112.3058438012 193.19247619047619 L 114.38558164937 181.68417142857143 L 116.46531949754 174.83022857142856 L 118.54505734571 169.9632 L 120.62479519388 139.8131428571429 L 122.70453304205 104.68668571428569 L 124.78427089022 98.7806285714286 L 126.86400873839 77.32560000000001 L 128.94374658656 86.05708571428573 L 131.02348443474 106.01737142857141 L 133.10322228291 139.63085714285717 L 135.18296013108 165.64302857142857 L 137.26269797925 203.9959428571429 L 139.34243582742 225.0165238095238 L 141.42217367559 229.71645714285714 L 143.50191152376 214.53205714285716 L 145.58164937193 202.95691428571428 L 147.6613872201 202.40550000000002 L 149.74112506827 194.35302857142858 L 151.82086291644 199.6757714285714 L 153.90060076461 218.81577142857145 L 155.98033861278 170.11814285714283 L 158.06007646095 146.13845714285713 L 160.13981430912 143.02137142857143 L 162.21955215729 142.96668571428572 L 164.29929000546 170.91108571428572 L 166.37902785363 238.90821428571428 L 168.4587657018 247.50754285714288 L 170.53850354997 250.5517142857143 L 172.61824139814 248.1273142857143 L 174.69797924631 241.14880952380952 L 176.77771709448 239.7057142857143 L 178.85745494265 227.21914285714286 L 180.93719279082 220.74800000000005 L 183.016930639 218.67450000000002 L 185.09666848717 226.52645714285717 L 187.17640633534 225.87022857142858 L 189.25614418351 224.4484 L 191.33588203168 209.50097142857143 L 193.41561987985 210.79520000000002 L 195.49535772802 216.39137142857146 L 197.57509557619 216.08148571428572 L 199.65483342436 239.23177142857145 L 201.73457127253 260.1824761904762 L 203.8143091207 255.78331428571428 L 205.89404696887 258.0801142857143 L 207.97378481704 264.7882285714286 L 210.05352266521 268.3245714285714 L 212.13326051338 278.69207142857147 L 214.21299836155 260.8690857142857 L 216.29273620972 257.6426285714286 L 218.37247405789 247.74451428571427 L 220.45221190606 241.39185714285713 L 222.53194975423 247.8721142857143 L 224.6116876024 242.53114285714287 L 226.69142545057 237.15371428571427 L 228.77116329874 237.40435714285712 L 230.85090114691 230.24508571428572 L 232.93063899508 214.47737142857142 L 235.01037684326 214.25862857142857 L 237.09011469143 211.25091428571432 L 239.1698525396 211.92537142857145 L 241.24959038777 225.14108571428574 L 243.32932823594 222.46148571428571 L 245.40906608411 214.69611428571432 L 247.48880393228 210.9957142857143 L 249.56854178045 208.26142857142855 L 251.64827962862 208.4984 L 253.72801747679 222.58908571428572 L 255.80775532496 235.71821428571428 L 257.88749317313 248.94760000000002 L 259.9672310213 243.31497142857143 L 262.04696886947 243.18737142857142 L 264.12670671764 241.07285714285715 L 266.20644456581 199.35980952380953 L 268.28618241398 153.32051428571432 L 270.36592026215 153.9038285714286 L 272.44565811032 157.13028571428575 L 274.52539595849 157.03914285714288 L 276.60513380666 203.68605714285712 L 278.68487165483 236.33342857142856 L 280.764609503 193.58742857142857 L 282.84434735117 93.58852380952382 L 284.92408519934 82.84885714285713 L 287.00382304752 67.02645714285711 L 289.08356089569 63.39897142857143 L 291.16329874386 81.46348571428572 L 293.24303659203 48.89814285714283 L 295.3227744402 45.425599999999974 L 297.40251228837 48.34217142857142 L 299.48225013654 41.178342857142866 L 301.56198798471 88.39034285714288 L 303.64172583288 131.1363428571429 L 305.72146368105 144.57080000000002 L 307.80120152922 171.54908571428575 L 309.88093937739 182.49838095238098 L 311.96067722556 165.97114285714287 L 314.04041507373 158.35160000000002 L 316.1201529219 156.54697142857142 L 318.19989077007 139.50325714285717 L 320.27962861824 173.17142857142858 L 322.35936646641 184.49137142857145 L 324.43910431458 192.78537142857144 L 326.51884216275 205.89171428571427 L 328.59858001092 226.45961904761904 L 330.67831785909 226.14365714285714 L 332.75805570726 187.59022857142855 L 334.83779355543 136.82365714285714 L 336.9175314036 84.17042857142857 L 338.99726925177 71.20080000000002 L 341.07700709995 71.54714285714289 L 343.15674494812 107.36628571428571 L 345.23648279629 142.54742857142858 L 347.31622064446 219.472 L 349.39595849263 221.98754285714284 L 351.4756963408 232.12262857142858 L 353.55543418897 196.10297142857144 L 355.63517203714 189.8657619047619 L 357.71490988531 183.3612 L 359.79464773348 151.1695428571429 L 361.87438558165 147.56028571428575 L 363.95412342982 156.9252142857143 L 366.03386127799 161.23171428571428 L 368.11359912616 162.52594285714287 L 370.19333697433 192.11091428571427 L 372.2730748225 166.75497142857142 L 374.35281267067 140.78533333333337 L 376.43255051884 122.47777142857143 L 378.51228836701 57.63874285714286 L 380.59202621518 45.49851428571429 L 382.67176406335 48.282928571428556 L 384.75150191152 44.09491428571431 L 386.83123975969 50.456685714285754 L 388.91097760786 86.95028571428574 L 390.99071545603 65.01523809523815 L 393.07045330421 75.15639999999999 L 395.15019115238 87.05965714285716 L 397.22992900055 119.59765714285712 L 399.30966684872 228.58628571428574 L 401.38940469689 235.14857142857144 L 403.46914254506 189.12142857142857 L 405.54888039323 157.8412 L 407.6286182414 154.45068571428573 L 409.70835608957 154.396 L 411.78809393774 157.51308571428572 L 413.86783178591 220.71154285714286 L 415.94756963408 242.7498857142857 L 418.02730748225 241.69262857142857 L 420.10704533042 246.54142857142858 L 422.18678317859 243.4608 L 424.26652102676 229.26074285714287 L 426.34625887493 212.47222857142856 L 428.4259967231 208.7855 L 430.50573457127 207.75102857142858 L 432.58547241944 213.5659428571429 L 434.66521026761 214.9513142857143 L 436.74494811578 225.6697142857143 L 438.82468596395 217.53977142857144 L 440.90442381212 211.85245714285713 L 442.98416166029 213.67531428571428 L 445.06389950847 212.74565714285717 L 447.14363735664 216.1452857142857 L 449.22337520481 234.18245714285712 L 451.30311305298 237.66411428571428 L 453.38285090115 236.20582857142858 L 455.46258874932 248.3825142857143 L 457.54232659749 243.93474285714285 L 459.62206444566 242.31240000000003 L 461.70180229383 249.7678857142857 L 463.781540142 259.17990476190477 L 465.86127799017 266.84805714285716 L 467.94101583834 273.7566857142857 L 470.02075368651 267.0121142857143 L 472.10049153468 260.75971428571427 L 474.18022938285 256.18434285714284 L 476.25996723102 257.9889714285714 L 478.33970507919 258.99154285714286 L 480.41944292736 231.2112 L 482.49918077553 216.85923809523808 L 484.5789186237 214.09457142857144 L 486.65865647187 209.4098285714286 L 488.73839432004 211.70662857142855 L 490.81813216821 231.68514285714286 L 492.89787001638 225.81554285714287 L 494.97760786455 223.82862857142857 L 497.05734571273 218.76108571428574 L 499.1370835609 223.5005142857143 L 501.21682140907 235.13338095238095 L 503.29655925724 237.68234285714286 L 505.37629710541 244.08057142857143 L 507.45603495358 251.66365714285712 L 509.53577280175 248.6605 L 511.61551064992 247.01537142857143 L 513.69524849809 221.34954285714286 L 515.77498634626 149.43782857142855 L 517.85472419443 141.89120000000003 L 519.9344620426 143.51354285714288 L 522.01419989077 147.23217142857143 L 524.09393773894 188.06417142857143 L 526.17367558711 216.95645714285715 L 528.25341343528 197.30909523809524 L 530.33315128345 196.1941142857143 L 532.41288913162 204.21468571428574 L 534.49262697979 203.55845714285715 L 536.57236482796 228.65464285714285 L 538.65210267613 231.6486857142857 L 540.7318405243 219.83657142857146 L 542.81157837247 208.47409523809526\\\"\\n          stroke=\\\"#56bd9f\\\"\\n          strokeWidth=\\\"2\\\"\\n          stroke-linejoin=\\\"round\\\"\\n          stroke-linecap=\\\"round\\\"\\n        />\\n      </G>\\n      <G transform=\\\"translate(46,45) scale(1 1)\\\" clip-Path=\\\"none\\\" />\\n    </G>\\n    <G>\\n      <Text\\n        x=\\\"59.369743309667\\\"\\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\\n        textAnchor=\\\"middle\\\"\\n        transform=\\\"translate(0,0)\\\"\\n        y=\\\"383\\\"\\n        opacity=\\\"1\\\"\\n      >\\n        2015\\n      </Text>\\n      <Text\\n        x=\\\"167.81321682141\\\"\\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\\n        textAnchor=\\\"middle\\\"\\n        transform=\\\"translate(0,0)\\\"\\n        y=\\\"383\\\"\\n        opacity=\\\"1\\\"\\n      >\\n        2016\\n      </Text>\\n      <Text\\n        x=\\\"276.55379574003\\\"\\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\\n        textAnchor=\\\"middle\\\"\\n        transform=\\\"translate(0,0)\\\"\\n        y=\\\"383\\\"\\n        opacity=\\\"1\\\"\\n      >\\n        2017\\n      </Text>\\n      <Text\\n        x=\\\"384.99726925177\\\"\\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\\n        textAnchor=\\\"middle\\\"\\n        transform=\\\"translate(0,0)\\\"\\n        y=\\\"383\\\"\\n        opacity=\\\"1\\\"\\n      >\\n        2018\\n      </Text>\\n      <Text\\n        x=\\\"493.44074276352\\\"\\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\\n        textAnchor=\\\"middle\\\"\\n        transform=\\\"translate(0,0)\\\"\\n        y=\\\"383\\\"\\n        opacity=\\\"1\\\"\\n      >\\n        2019\\n      </Text>\\n    </G>\\n    <G>\\n      <Text\\n        x=\\\"31\\\"\\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\\n        textAnchor=\\\"end\\\"\\n        transform=\\\"translate(0,0)\\\"\\n        y=\\\"362\\\"\\n        opacity=\\\"1\\\"\\n      >\\n        0%\\n      </Text>\\n      <Text\\n        x=\\\"31\\\"\\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\\n        textAnchor=\\\"end\\\"\\n        transform=\\\"translate(0,0)\\\"\\n        y=\\\"316\\\"\\n        opacity=\\\"1\\\"\\n      >\\n        5%\\n      </Text>\\n      <Text\\n        x=\\\"31\\\"\\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\\n        textAnchor=\\\"end\\\"\\n        transform=\\\"translate(0,0)\\\"\\n        y=\\\"271\\\"\\n        opacity=\\\"1\\\"\\n      >\\n        10%\\n      </Text>\\n      <Text\\n        x=\\\"31\\\"\\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\\n        textAnchor=\\\"end\\\"\\n        transform=\\\"translate(0,0)\\\"\\n        y=\\\"225\\\"\\n        opacity=\\\"1\\\"\\n      >\\n        15%\\n      </Text>\\n      <Text\\n        x=\\\"31\\\"\\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\\n        textAnchor=\\\"end\\\"\\n        transform=\\\"translate(0,0)\\\"\\n        y=\\\"180\\\"\\n        opacity=\\\"1\\\"\\n      >\\n        20%\\n      </Text>\\n      <Text\\n        x=\\\"31\\\"\\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\\n        textAnchor=\\\"end\\\"\\n        transform=\\\"translate(0,0)\\\"\\n        y=\\\"134\\\"\\n        opacity=\\\"1\\\"\\n      >\\n        25%\\n      </Text>\\n      <Text\\n        x=\\\"31\\\"\\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\\n        textAnchor=\\\"end\\\"\\n        transform=\\\"translate(0,0)\\\"\\n        y=\\\"89\\\"\\n        opacity=\\\"1\\\"\\n      >\\n        30%\\n      </Text>\\n      <Text\\n        x=\\\"0\\\"\\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\\n        textAnchor=\\\"end\\\"\\n        transform=\\\"translate(0,0)\\\"\\n        y=\\\"-9999\\\"\\n      >\\n        35%\\n      </Text>\\n    </G>\\n    <G transform=\\\"translate(0,0)\\\">\\n      <G transform=\\\"translate(0,10)\\\">\\n        <Text x=\\\"46\\\" y=\\\"15\\\" style={{ color: '#666666', fill: '#666666' }}>\\n          Zoom\\n        </Text>\\n        <G transform=\\\"translate(158,0)\\\">\\n          <Rect fill=\\\"none\\\" x=\\\"0\\\" y=\\\"0\\\" width=\\\"32\\\" height=\\\"22\\\" rx=\\\"2\\\" ry=\\\"2\\\" />\\n          <Text\\n            x=\\\"4.59375\\\"\\n            style={{ fontWeight: 'normal', color: '#333333', fill: '#333333' }}\\n            y=\\\"14\\\"\\n          >\\n            YTD\\n          </Text>\\n        </G>\\n        <G transform=\\\"translate(232,0)\\\">\\n          <Rect\\n            fill=\\\"rgb(225, 243, 239)\\\"\\n            fillOpacity=\\\" .50\\\"\\n            x=\\\"0\\\"\\n            y=\\\"0\\\"\\n            width=\\\"32\\\"\\n            height=\\\"22\\\"\\n            rx=\\\"2\\\"\\n            ry=\\\"2\\\"\\n          />\\n          <Text\\n            x=\\\"8.6640625\\\"\\n            style={{ fontWeight: 'bold', fill: '#000000' }}\\n            y=\\\"14\\\"\\n          >\\n            All\\n          </Text>\\n        </G>\\n      </G>\\n      <G transform=\\\"translate(331,10)\\\">\\n        <G transform=\\\"translate(0,0)\\\" fill=\\\"#666666\\\">\\n          <Text x=\\\"2\\\" y=\\\"14\\\" style={{ fontSize: '12', fill: '#666666' }}>\\n            From\\n          </Text>\\n        </G>\\n        <G transform=\\\"translate(38,0)\\\">\\n          <Rect\\n            fill=\\\"none\\\"\\n            x=\\\"0.5\\\"\\n            y=\\\"0.5\\\"\\n            width=\\\"94\\\"\\n            height=\\\"21\\\"\\n            stroke=\\\"#cccccc\\\"\\n            strokeWidth=\\\"1\\\"\\n          />\\n          <Text\\n            x=\\\"11.9140625\\\"\\n            y=\\\"14\\\"\\n            style={{ fontSize: '12', fill: '#333333' }}\\n          >\\n            <Tspan>Nov 17, 2014</Tspan>\\n          </Text>\\n        </G>\\n        <G transform=\\\"translate(142,0)\\\" fill=\\\"#666666\\\">\\n          <Text x=\\\"2\\\" y=\\\"14\\\" style={{ fontSize: '12', fill: '#666666' }}>\\n            To\\n          </Text>\\n        </G>\\n        <G transform=\\\"translate(165,0)\\\">\\n          <Rect\\n            fill=\\\"none\\\"\\n            x=\\\"0.5\\\"\\n            y=\\\"0.5\\\"\\n            width=\\\"94\\\"\\n            height=\\\"21\\\"\\n            stroke=\\\"#cccccc\\\"\\n            strokeWidth=\\\"1\\\"\\n          />\\n          <Text\\n            x=\\\"11.9140625\\\"\\n            y=\\\"14\\\"\\n            style={{ fontSize: '12', fill: '#333333' }}\\n          >\\n            <Tspan>Nov 22, 2019</Tspan>\\n          </Text>\\n        </G>\\n      </G>\\n    </G>\\n  </Svg>\\n);\\n\\nexport default Svg2;\\n[end of Svg2.js]\\n[start of index.js]\\nimport React from 'react';\\nimport {\\n  Document,\\n  Font,\\n  Page,\\n  Text,\\n  Image,\\n  StyleSheet,\\n} from '@react-pdf/renderer';\\n\\nconst styles = StyleSheet.create({\\n  body: {\\n    paddingTop: 35,\\n    paddingBottom: 65,\\n    paddingHorizontal: 35,\\n  },\\n  title: {\\n    fontSize: 24,\\n    textAlign: 'center',\\n    fontFamily: 'Oswald',\\n  },\\n  author: {\\n    fontSize: 12,\\n    textAlign: 'center',\\n    marginBottom: 40,\\n  },\\n  subtitle: {\\n    fontSize: 18,\\n    margin: 12,\\n    fontFamily: 'Oswald',\\n  },\\n  text: {\\n    margin: 12,\\n    fontSize: 14,\\n    textAlign: 'justify',\\n    fontFamily: 'Times-Roman',\\n  },\\n  image: {\\n    marginVertical: 15,\\n    marginHorizontal: 100,\\n  },\\n  header: {\\n    fontSize: 12,\\n    marginBottom: 20,\\n    textAlign: 'center',\\n    color: 'grey',\\n  },\\n  pageNumber: {\\n    position: 'absolute',\\n    fontSize: 12,\\n    bottom: 30,\\n    left: 0,\\n    right: 0,\\n    textAlign: 'center',\\n    color: 'grey',\\n  },\\n});\\n\\nFont.register({\\n  family: 'Oswald',\\n  src: 'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\\n});\\n\\nconst Subtitle = ({ children, ...props }) => (\\n  <Text style={styles.subtitle} {...props}>\\n    {children}\\n  </Text>\\n);\\n\\nexport default () => (\\n  <Document>\\n    <Page style={styles.body} wrap>\\n      <Text style={styles.header} fixed>\\n        ~ Created with react-pdf ~\\n      </Text>\\n      <Text style={styles.title}>Don Quijote de la Mancha</Text>\\n      <Text style={styles.author}>Miguel de Cervantes</Text>\\n      <Image\\n        style={styles.image}\\n        src=\\\"http://static.donquijote.org/images/blogs/dq-reg/don-quijote-de-la-mancha.jpg\\\"\\n      />\\n      <Subtitle>\\n        Cap\\u00edtulo I: Que trata de la condici\\u00f3n y ejercicio del famoso hidalgo D.\\n        Quijote de la Mancha\\n      </Subtitle>\\n      <Text style={styles.text}>\\n        En un lugar de la Mancha, de cuyo nombre no quiero acordarme, no ha\\n        mucho tiempo que viv\\u00eda un hidalgo de los de lanza en astillero, adarga\\n        antigua, roc\\u00edn flaco y galgo corredor. Una olla de algo m\\u00e1s vaca que\\n        carnero, salpic\\u00f3n las m\\u00e1s noches, duelos y quebrantos los s\\u00e1bados,\\n        lentejas los viernes, alg\\u00fan palomino de a\\u00f1adidura los domingos,\\n        consum\\u00edan las tres partes de su hacienda. El resto della conclu\\u00edan sayo\\n        de velarte, calzas de velludo para las fiestas con sus pantuflos de lo\\n        mismo, los d\\u00edas de entre semana se honraba con su vellori de lo m\\u00e1s\\n        fino. Ten\\u00eda en su casa una ama que pasaba de los cuarenta, y una sobrina\\n        que no llegaba a los veinte, y un mozo de campo y plaza, que as\\u00ed\\n        ensillaba el roc\\u00edn como tomaba la podadera. Frisaba la edad de nuestro\\n        hidalgo con los cincuenta a\\u00f1os, era de complexi\\u00f3n recia, seco de carnes,\\n        enjuto de rostro; gran madrugador y amigo de la caza. Quieren decir que\\n        ten\\u00eda el sobrenombre de Quijada o Quesada (que en esto hay alguna\\n        diferencia en los autores que deste caso escriben), aunque por\\n        conjeturas veros\\u00edmiles se deja entender que se llama Quijana; pero esto\\n        importa poco a nuestro cuento; basta que en la narraci\\u00f3n d\\u00e9l no se salga\\n        un punto de la verdad.\\n      </Text>\\n      <Text style={styles.text}>\\n        Es, pues, de saber, que este sobredicho hidalgo, los ratos que estaba\\n        ocioso (que eran los m\\u00e1s del a\\u00f1o) se daba a leer libros de caballer\\u00edas\\n        con tanta afici\\u00f3n y gusto, que olvid\\u00f3 casi de todo punto el ejercicio de\\n        la caza, y aun la administraci\\u00f3n de su hacienda; y lleg\\u00f3 a tanto su\\n        curiosidad y desatino en esto, que vendi\\u00f3 muchas hanegas de tierra de\\n        sembradura, para comprar libros de caballer\\u00edas en que leer; y as\\u00ed llev\\u00f3\\n        a su casa todos cuantos pudo haber dellos; y de todos ningunos le\\n        parec\\u00edan tan bien como los que compuso el famoso Feliciano de Silva:\\n        porque la claridad de su prosa, y aquellas intrincadas razones suyas, le\\n        parec\\u00edan de perlas; y m\\u00e1s cuando llegaba a leer aquellos requiebros y\\n        cartas de desaf\\u00edo, donde en muchas partes hallaba escrito: la raz\\u00f3n de\\n        la sinraz\\u00f3n que a mi raz\\u00f3n se hace, de tal manera mi raz\\u00f3n enflaquece,\\n        que con raz\\u00f3n me quejo.\\n      </Text>\\n      <Text style={styles.text}>\\n        Con estas y semejantes razones perd\\u00eda el pobre caballero el juicio, y\\n        desvel\\u00e1base por entenderlas, y desentra\\u00f1arles el sentido, que no se lo\\n        sacara, ni las entendiera el mismo Arist\\u00f3teles, si resucitara para s\\u00f3lo\\n        ello. No estaba muy bien con las heridas que don Belianis daba y\\n        recib\\u00eda, porque se imaginaba que por grandes maestros que le hubiesen\\n        curado, no dejar\\u00eda de tener el rostro y todo el cuerpo lleno de\\n        cicatrices y se\\u00f1ales; pero con todo alababa en su autor aquel acabar su\\n        libro con la promesa de aquella inacabable aventura, y muchas veces le\\n        vino deseo de tomar la pluma, y darle fin al pie de la letra como all\\u00ed\\n        se promete; y sin duda alguna lo hiciera, y aun saliera con ello, si\\n        otros mayores y continuos pensamientos no se lo estorbaran. Tuvo muchas\\n        veces competencia con el cura de su lugar (que era hombre docto graduado\\n        en Sig\\u00fcenza), sobre cu\\u00e1l hab\\u00eda sido mejor caballero, Palmer\\u00edn de\\n        Inglaterra o Amad\\u00eds de Gaula; mas maese Nicol\\u00e1s, barbero del mismo\\n        pueblo, dec\\u00eda que ninguno llegaba al caballero del Febo, y que si alguno\\n        se le pod\\u00eda comparar, era don Galaor, hermano de Amad\\u00eds de Gaula, porque\\n        ten\\u00eda muy acomodada condici\\u00f3n para todo; que no era caballero\\n        melindroso, ni tan llor\\u00f3n como su hermano, y que en lo de la valent\\u00eda no\\n        le iba en zaga.\\n      </Text>\\n      <Text style={styles.text}>\\n        En resoluci\\u00f3n, \\u00e9l se enfrasc\\u00f3 tanto en su lectura, que se le pasaban las\\n        noches leyendo de claro en claro, y los d\\u00edas de turbio en turbio, y as\\u00ed,\\n        del poco dormir y del mucho leer, se le sec\\u00f3 el cerebro, de manera que\\n        vino a perder el juicio. Llen\\u00f3sele la fantas\\u00eda de todo aquello que le\\u00eda\\n        en los libros, as\\u00ed de encantamientos, como de pendencias, batallas,\\n        desaf\\u00edos, heridas, requiebros, amores, tormentas y disparates\\n        imposibles, y asent\\u00f3sele de tal modo en la imaginaci\\u00f3n que era verdad\\n        toda aquella m\\u00e1quina de aquellas so\\u00f1adas invenciones que le\\u00eda, que para\\n        \\u00e9l no hab\\u00eda otra historia m\\u00e1s cierta en el mundo.\\n      </Text>\\n      <Subtitle break>\\n        Cap\\u00edtulo II: Que trata de la primera salida que de su tierra hizo el\\n        ingenioso Don Quijote\\n      </Subtitle>\\n      <Image\\n        style={styles.image}\\n        src=\\\"https://panampost.com/wp-content/uploads/don-quijote-lessons.jpg\\\"\\n      />\\n      <Text style={styles.text}>\\n        Hechas, pues, estas prevenciones, no quiso aguardar m\\u00e1s tiempo a poner\\n        en efeto su pensamiento, apret\\u00e1ndole a ello la falta que \\u00e9l pensaba que\\n        hac\\u00eda en el mundo su tardanza, seg\\u00fan eran los agravios que pensaba\\n        deshacer, tuertos que enderezar, sinrazones que emendar y abusos que\\n        mejorar y deudas que satisfacer. Y as\\u00ed, sin dar parte a persona alguna\\n        de su intenci\\u00f3n y sin que nadie le viese, una ma\\u00f1ana, antes del d\\u00eda, que\\n        era uno de los calurosos del mes de Julio, se arm\\u00f3 de todas sus armas,\\n        subi\\u00f3 sobre Rocinante, puesta su mal compuesta celada, embraz\\u00f3 su\\n        adarga, tom\\u00f3 su lanza y por la puerta falsa de un corral sali\\u00f3 al campo\\n        con grand\\u00edsimo contento y alborozo de ver con cu\\u00e1nta facilidad hab\\u00eda\\n        dado principio a su buen deseo. Mas apenas se vio en el campo cuando le\\n        asalt\\u00f3 un pensamiento terrible, y tal, que por poco le hiciera dejar la\\n        comenzada empresa; y fue que le vino a la memoria que no era armado\\n        caballero, y que, conforme a ley de caballer\\u00eda, ni pod\\u00eda ni deb\\u00eda tomar\\n        armas con ning\\u00fan caballero; y puesto que lo fuera, hab\\u00eda de llevar armas\\n        blancas, como novel caballero, sin empresa en el escudo, hasta que por\\n        su esfuerzo la ganase. Estos pensamientos le hicieron titubear en su\\n        prop\\u00f3sito; mas pudiendo m\\u00e1s su locura que otra raz\\u00f3n alguna, propuso de\\n        hacerse armar caballero del primero que topase, a imitaci\\u00f3n de otros\\n        muchos que as\\u00ed lo hicieron, seg\\u00fan \\u00e9l hab\\u00eda le\\u00eddo en los libros que tal\\n        le ten\\u00edan. En lo de las armas blancas, pensaba limpiarlas de manera, en\\n        teniendo lugar, que lo fuesen m\\u00e1s que un arminio; y con esto se quiet\\u00f3 y\\n        prosigui\\u00f3 su camino, sin llevar otro que aquel que su caballo quer\\u00eda,\\n        creyendo que en aquello consist\\u00eda la fuerza de las aventuras\\n      </Text>\\n      <Text style={styles.text}>\\n        Yendo, pues, caminando nuestro flamante aventurero, iba hablando consigo\\n        mesmo, y diciendo: \\u2014\\u00bfQui\\u00e9n duda, sino que en los venideros tiempos,\\n        cuando salga a luz la verdadera historia de mis famosos hechos, que el\\n        sabio que los escribiere no ponga, cuando llegue a contar esta mi\\n        primera salida tan de ma\\u00f1ana, desta manera?: Apenas hab\\u00eda el rubicundo\\n        Apolo tendido por la faz de la ancha y espaciosa tierra las doradas\\n        hebras de sus hermosos cabellos, y apenas los peque\\u00f1os y pintados\\n        pajarillos con sus arpadas lenguas hab\\u00edan saludado con dulce y meliflua\\n        armon\\u00eda la venida de la rosada Aurora, que, dejando la blanda cama del\\n        celoso marido, por las puertas y balcones del manchego horizonte a los\\n        mortales se mostraba, cuando el famoso caballero don Quijote de la\\n        Mancha, dejando las ociosas plumas, subi\\u00f3 sobre su famoso caballo\\n        Rocinante y comenz\\u00f3 a caminar por el antiguo y conocido Campo de\\n        Montiel.\\n      </Text>\\n      <Text style={styles.text}>\\n        Y era la verdad que por \\u00e9l caminaba; y a\\u00f1adi\\u00f3 diciendo: \\u2014Dichosa edad y\\n        siglo dichoso aquel adonde saldr\\u00e1n a luz las famosas haza\\u00f1as m\\u00edas,\\n        dignas de entallarse en bronces, esculpirse en m\\u00e1rmoles y pintarse en\\n        tablas, para memoria en lo futuro. \\u00a1Oh t\\u00fa, sabio encantador, quienquiera\\n        que seas, a quien ha de tocar el ser coronista desta peregrina historia!\\n        Ru\\u00e9gote que no te olvides de mi buen Rocinante, compa\\u00f1ero eterno m\\u00edo en\\n        todos mis caminos y carreras.\\n      </Text>\\n      <Text style={styles.text}>\\n        Luego volv\\u00eda diciendo, como si verdaderamente fuera enamorado: \\u2014\\u00a1Oh\\n        princesa Dulcinea, se\\u00f1ora deste cautivo coraz\\u00f3n! Mucho agravio me\\n        habedes fecho en despedirme y reprocharme con el riguroso afincamiento\\n        de mandarme no parecer ante la vuestra fermosura. Pl\\u00e9gaos, se\\u00f1ora, de\\n        membraros deste vuestro sujeto coraz\\u00f3n, que tantas cuitas por vuestro\\n        amor padece. Con estos iba ensartando otros disparates, todos al modo de\\n        los que sus libros le hab\\u00edan ense\\u00f1ado, imitando en cuanto pod\\u00eda su\\n        lenguaje. Con esto caminaba tan despacio, y el sol entraba tan apriesa y\\n        con tanto ardor, que fuera bastante a derretirle los sesos, si algunos\\n        tuviera\\n      </Text>\\n      <Text style={styles.text}>\\n        Casi todo aquel d\\u00eda camin\\u00f3 sin acontecerle cosa que de contar fuese, de\\n        lo cual se desesperaba, porque quisiera topar luego luego con quien\\n        hacer experiencia del valor de su fuerte brazo. Autores hay que dicen\\n        que la primera aventura que le avino fue la del Puerto L\\u00e1pice, otros\\n        dicen que la de los molinos de viento; pero lo que yo he podido\\n        averiguar en este caso, y lo que he hallado escrito en los anales de la\\n        Mancha, es que \\u00e9l anduvo todo aquel d\\u00eda, y, al anochecer, su roc\\u00edn y \\u00e9l\\n        se hallaron cansados y muertos de hambre, y que, mirando a todas partes\\n        por ver si descubrir\\u00eda alg\\u00fan castillo o alguna majada de pastores donde\\n        recogerse y adonde pudiese remediar su mucha hambre y necesidad, vio, no\\n        lejos del camino por donde iba, una venta, que fue como si viera una\\n        estrella que, no a los portales, sino a los alc\\u00e1zares de su redenci\\u00f3n le\\n        encaminaba. Diose priesa a caminar, y lleg\\u00f3 a ella a tiempo que\\n        anochec\\u00eda.\\n      </Text>\\n      <Text\\n        style={styles.pageNumber}\\n        render={({ pageNumber, totalPages }) => `${pageNumber} / ${totalPages}`}\\n        fixed\\n      />\\n    </Page>\\n  </Document>\\n);\\n\\n[end of index.js]\\n[start of Svg2.js]\\nimport React from 'react';\\nimport {\\n  Rect,\\n  Svg,\\n  G,\\n  Path,\\n  Text,\\n  Defs,\\n  ClipPath,\\n  Tspan,\\n  LinearGradient,\\n  Stop,\\n} from '@react-pdf/renderer';\\n\\nconst Svg2 = () => (\\n  <Svg width=\\\"400\\\" viewBox=\\\"0 0 600 400\\\">\\n    <Defs>\\n      <LinearGradient x1=\\\"0\\\" x2=\\\"0\\\" y1=\\\"0\\\" y2=\\\"1\\\" id=\\\"highcharts-5xj7ee9-2948\\\">\\n        <Stop offset=\\\"0\\\" stopColor=\\\"#B5E2D5\\\" stopOpacity=\\\"0.7\\\" />\\n        <Stop offset=\\\"0.5\\\" stopColor=\\\"rgb(225,243,239)\\\" stopOpacity=\\\"0.5\\\" />\\n        <Stop offset=\\\"1\\\" stopColor=\\\"#fff\\\" stopOpacity=\\\"1\\\" />\\n      </LinearGradient>\\n\\n      <ClipPath id=\\\"highcharts-5xj7ee9-2949\\\">\\n        <Rect x=\\\"0\\\" y=\\\"0\\\" width=\\\"544\\\" height=\\\"319\\\" fill=\\\"none\\\" />\\n      </ClipPath>\\n    </Defs>\\n\\n    <Rect fill=\\\"#ffffff\\\" x=\\\"0\\\" y=\\\"0\\\" width=\\\"600\\\" height=\\\"400\\\" rx=\\\"0\\\" ry=\\\"0\\\" />\\n    <Rect fill=\\\"none\\\" x=\\\"46\\\" y=\\\"45\\\" width=\\\"544\\\" height=\\\"319\\\" />\\n    <G>\\n      <Path fill=\\\"none\\\" d=\\\"M 58.5 45 L 58.5 364\\\" opacity=\\\"1\\\" />\\n      <Path fill=\\\"none\\\" d=\\\"M 167.5 45 L 167.5 364\\\" opacity=\\\"1\\\" />\\n      <Path fill=\\\"none\\\" d=\\\"M 276.5 45 L 276.5 364\\\" opacity=\\\"1\\\" />\\n      <Path fill=\\\"none\\\" d=\\\"M 384.5 45 L 384.5 364\\\" opacity=\\\"1\\\" />\\n      <Path fill=\\\"none\\\" d=\\\"M 492.5 45 L 492.5 364\\\" opacity=\\\"1\\\" />\\n    </G>\\n    <G>\\n      <Path\\n        fill=\\\"none\\\"\\n        stroke=\\\"#e6e6e6\\\"\\n        strokeWidth=\\\"1\\\"\\n        d=\\\"M 46 364.5 L 590 364.5\\\"\\n        opacity=\\\"1\\\"\\n      />\\n      <Path\\n        fill=\\\"none\\\"\\n        stroke=\\\"#e6e6e6\\\"\\n        strokeWidth=\\\"1\\\"\\n        d=\\\"M 46 318.5 L 590 318.5\\\"\\n        opacity=\\\"1\\\"\\n      />\\n      <Path\\n        fill=\\\"none\\\"\\n        stroke=\\\"#e6e6e6\\\"\\n        strokeWidth=\\\"1\\\"\\n        d=\\\"M 46 273.5 L 590 273.5\\\"\\n        opacity=\\\"1\\\"\\n      />\\n      <Path\\n        fill=\\\"none\\\"\\n        stroke=\\\"#e6e6e6\\\"\\n        strokeWidth=\\\"1\\\"\\n        d=\\\"M 46 227.5 L 590 227.5\\\"\\n        opacity=\\\"1\\\"\\n      />\\n      <Path\\n        fill=\\\"none\\\"\\n        stroke=\\\"#e6e6e6\\\"\\n        strokeWidth=\\\"1\\\"\\n        d=\\\"M 46 182.5 L 590 182.5\\\"\\n        opacity=\\\"1\\\"\\n      />\\n      <Path\\n        fill=\\\"none\\\"\\n        stroke=\\\"#e6e6e6\\\"\\n        strokeWidth=\\\"1\\\"\\n        d=\\\"M 46 136.5 L 590 136.5\\\"\\n        opacity=\\\"1\\\"\\n      />\\n      <Path\\n        fill=\\\"none\\\"\\n        stroke=\\\"#e6e6e6\\\"\\n        strokeWidth=\\\"1\\\"\\n        d=\\\"M 46 91.5 L 590 91.5\\\"\\n        opacity=\\\"1\\\"\\n      />\\n      <Path\\n        fill=\\\"none\\\"\\n        stroke=\\\"#e6e6e6\\\"\\n        strokeWidth=\\\"1\\\"\\n        d=\\\"M 46 44.5 L 590 44.5\\\"\\n        opacity=\\\"1\\\"\\n      />\\n    </G>\\n    <Rect\\n      fill=\\\"none\\\"\\n      stroke=\\\"#cccccc\\\"\\n      strokeWidth=\\\"1\\\"\\n      x=\\\"45.5\\\"\\n      y=\\\"44.5\\\"\\n      width=\\\"545\\\"\\n      height=\\\"320\\\"\\n    />\\n    <G>\\n      <Path\\n        fill=\\\"none\\\"\\n        stroke=\\\"#ccd6eb\\\"\\n        strokeWidth=\\\"1\\\"\\n        d=\\\"M 58.5 364 L 58.5 374\\\"\\n        opacity=\\\"1\\\"\\n      />\\n      <Path\\n        fill=\\\"none\\\"\\n        stroke=\\\"#ccd6eb\\\"\\n        strokeWidth=\\\"1\\\"\\n        d=\\\"M 167.5 364 L 167.5 374\\\"\\n        opacity=\\\"1\\\"\\n      />\\n      <Path\\n        fill=\\\"none\\\"\\n        stroke=\\\"#ccd6eb\\\"\\n        strokeWidth=\\\"1\\\"\\n        d=\\\"M 276.5 364 L 276.5 374\\\"\\n        opacity=\\\"1\\\"\\n      />\\n      <Path\\n        fill=\\\"none\\\"\\n        stroke=\\\"#ccd6eb\\\"\\n        strokeWidth=\\\"1\\\"\\n        d=\\\"M 384.5 364 L 384.5 374\\\"\\n        opacity=\\\"1\\\"\\n      />\\n      <Path\\n        fill=\\\"none\\\"\\n        stroke=\\\"#ccd6eb\\\"\\n        strokeWidth=\\\"1\\\"\\n        d=\\\"M 492.5 364 L 492.5 374\\\"\\n        opacity=\\\"1\\\"\\n      />\\n      <Path\\n        fill=\\\"none\\\"\\n        stroke=\\\"#ccd6eb\\\"\\n        strokeWidth=\\\"1\\\"\\n        d=\\\"M 46 364.5 L 590 364.5\\\"\\n      />\\n    </G>\\n    <G>\\n      <Path fill=\\\"none\\\" d=\\\"M 46 45 L 46 364\\\" />\\n    </G>\\n    <G>\\n      <G\\n        transform=\\\"translate(46,45) scale(1 1)\\\"\\n        clip-Path=\\\"url(#highcharts-5xj7ee9-2949)\\\"\\n      >\\n        <Path\\n          fill=\\\"url(#highcharts-5xj7ee9-2948)\\\"\\n          d=\\\"M 0 229.26985714285718 L 2.0797378481704 230.31799999999998 L 4.1594756963408 228.6014761904762 L 6.2392135445112 229.46125714285716 L 8.3189513926816 228.27640000000002 L 10.398689240852 226.6905142857143 L 12.478427089022 227.21914285714286 L 14.558164937193 230.3909142857143 L 16.637902785363 230.26331428571427 L 18.717640633534 229.35188571428571 L 20.797378481704 224.44840000000002 L 22.877116329874 210.4306285714286 L 24.956854178045 177.0358857142857 L 27.036592026215 166.08051428571426 L 29.116329874386 169.36165714285715 L 31.196067722556 175.3892380952381 L 33.275805570726 223.51874285714285 L 35.355543418897 233.1981142857143 L 37.435281267067 207.86040000000003 L 39.515019115238 190.16957142857143 L 41.594756963408 181.68417142857143 L 43.674494811578 162.9452 L 45.754232659749 165.57011428571428 L 47.833970507919 180.21980952380952 L 49.91370835609 183.41588571428574 L 51.99344620426 212.05297142857142 L 54.07318405243 217.15697142857144 L 56.152921900601 217.3757142857143 L 58.232659748771 223.1906285714286 L 60.312397596942 206.2562857142857 L 62.392135445112 197.06908571428573 L 64.471873293282 189.6865142857143 L 66.551611141453 188.33152380952382 L 68.631348989623 176.52548571428574 L 70.711086837794 152.8648 L 72.790824685964 160.33851428571433 L 74.870562534134 156.2872142857143 L 76.950300382305 154.97931428571428 L 79.030038230475 181.192 L 81.109776078646 191.10834285714287 L 83.189513926816 183.83514285714284 L 85.269251774986 188.26468571428572 L 87.348989623157 185.45748571428572 L 89.428727471327 188.17354285714288 L 91.508465319498 136.9330285714286 L 93.588203167668 111.66519047619047 L 95.667941015838 112.30622857142856 L 97.747678864009 90.55954285714287 L 99.827416712179 77.56257142857146 L 101.90715456035 101.60150000000002 L 103.98689240852 108.73342857142859 L 106.06663025669 112.8166285714286 L 108.14636810486 155.23451428571428 L 110.22610595303 172.6428 L 112.3058438012 193.19247619047619 L 114.38558164937 181.68417142857143 L 116.46531949754 174.83022857142856 L 118.54505734571 169.9632 L 120.62479519388 139.8131428571429 L 122.70453304205 104.68668571428569 L 124.78427089022 98.7806285714286 L 126.86400873839 77.32560000000001 L 128.94374658656 86.05708571428573 L 131.02348443474 106.01737142857141 L 133.10322228291 139.63085714285717 L 135.18296013108 165.64302857142857 L 137.26269797925 203.9959428571429 L 139.34243582742 225.0165238095238 L 141.42217367559 229.71645714285714 L 143.50191152376 214.53205714285716 L 145.58164937193 202.95691428571428 L 147.6613872201 202.40550000000002 L 149.74112506827 194.35302857142858 L 151.82086291644 199.6757714285714 L 153.90060076461 218.81577142857145 L 155.98033861278 170.11814285714283 L 158.06007646095 146.13845714285713 L 160.13981430912 143.02137142857143 L 162.21955215729 142.96668571428572 L 164.29929000546 170.91108571428572 L 166.37902785363 238.90821428571428 L 168.4587657018 247.50754285714288 L 170.53850354997 250.5517142857143 L 172.61824139814 248.1273142857143 L 174.69797924631 241.14880952380952 L 176.77771709448 239.7057142857143 L 178.85745494265 227.21914285714286 L 180.93719279082 220.74800000000005 L 183.016930639 218.67450000000002 L 185.09666848717 226.52645714285717 L 187.17640633534 225.87022857142858 L 189.25614418351 224.4484 L 191.33588203168 209.50097142857143 L 193.41561987985 210.79520000000002 L 195.49535772802 216.39137142857146 L 197.57509557619 216.08148571428572 L 199.65483342436 239.23177142857145 L 201.73457127253 260.1824761904762 L 203.8143091207 255.78331428571428 L 205.89404696887 258.0801142857143 L 207.97378481704 264.7882285714286 L 210.05352266521 268.3245714285714 L 212.13326051338 278.69207142857147 L 214.21299836155 260.8690857142857 L 216.29273620972 257.6426285714286 L 218.37247405789 247.74451428571427 L 220.45221190606 241.39185714285713 L 222.53194975423 247.8721142857143 L 224.6116876024 242.53114285714287 L 226.69142545057 237.15371428571427 L 228.77116329874 237.40435714285712 L 230.85090114691 230.24508571428572 L 232.93063899508 214.47737142857142 L 235.01037684326 214.25862857142857 L 237.09011469143 211.25091428571432 L 239.1698525396 211.92537142857145 L 241.24959038777 225.14108571428574 L 243.32932823594 222.46148571428571 L 245.40906608411 214.69611428571432 L 247.48880393228 210.9957142857143 L 249.56854178045 208.26142857142855 L 251.64827962862 208.4984 L 253.72801747679 222.58908571428572 L 255.80775532496 235.71821428571428 L 257.88749317313 248.94760000000002 L 259.9672310213 243.31497142857143 L 262.04696886947 243.18737142857142 L 264.12670671764 241.07285714285715 L 266.20644456581 199.35980952380953 L 268.28618241398 153.32051428571432 L 270.36592026215 153.9038285714286 L 272.44565811032 157.13028571428575 L 274.52539595849 157.03914285714288 L 276.60513380666 203.68605714285712 L 278.68487165483 236.33342857142856 L 280.764609503 193.58742857142857 L 282.84434735117 93.58852380952382 L 284.92408519934 82.84885714285713 L 287.00382304752 67.02645714285711 L 289.08356089569 63.39897142857143 L 291.16329874386 81.46348571428572 L 293.24303659203 48.89814285714283 L 295.3227744402 45.425599999999974 L 297.40251228837 48.34217142857142 L 299.48225013654 41.178342857142866 L 301.56198798471 88.39034285714288 L 303.64172583288 131.1363428571429 L 305.72146368105 144.57080000000002 L 307.80120152922 171.54908571428575 L 309.88093937739 182.49838095238098 L 311.96067722556 165.97114285714287 L 314.04041507373 158.35160000000002 L 316.1201529219 156.54697142857142 L 318.19989077007 139.50325714285717 L 320.27962861824 173.17142857142858 L 322.35936646641 184.49137142857145 L 324.43910431458 192.78537142857144 L 326.51884216275 205.89171428571427 L 328.59858001092 226.45961904761904 L 330.67831785909 226.14365714285714 L 332.75805570726 187.59022857142855 L 334.83779355543 136.82365714285714 L 336.9175314036 84.17042857142857 L 338.99726925177 71.20080000000002 L 341.07700709995 71.54714285714289 L 343.15674494812 107.36628571428571 L 345.23648279629 142.54742857142858 L 347.31622064446 219.472 L 349.39595849263 221.98754285714284 L 351.4756963408 232.12262857142858 L 353.55543418897 196.10297142857144 L 355.63517203714 189.8657619047619 L 357.71490988531 183.3612 L 359.79464773348 151.1695428571429 L 361.87438558165 147.56028571428575 L 363.95412342982 156.9252142857143 L 366.03386127799 161.23171428571428 L 368.11359912616 162.52594285714287 L 370.19333697433 192.11091428571427 L 372.2730748225 166.75497142857142 L 374.35281267067 140.78533333333337 L 376.43255051884 122.47777142857143 L 378.51228836701 57.63874285714286 L 380.59202621518 45.49851428571429 L 382.67176406335 48.282928571428556 L 384.75150191152 44.09491428571431 L 386.83123975969 50.456685714285754 L 388.91097760786 86.95028571428574 L 390.99071545603 65.01523809523815 L 393.07045330421 75.15639999999999 L 395.15019115238 87.05965714285716 L 397.22992900055 119.59765714285712 L 399.30966684872 228.58628571428574 L 401.38940469689 235.14857142857144 L 403.46914254506 189.12142857142857 L 405.54888039323 157.8412 L 407.6286182414 154.45068571428573 L 409.70835608957 154.396 L 411.78809393774 157.51308571428572 L 413.86783178591 220.71154285714286 L 415.94756963408 242.7498857142857 L 418.02730748225 241.69262857142857 L 420.10704533042 246.54142857142858 L 422.18678317859 243.4608 L 424.26652102676 229.26074285714287 L 426.34625887493 212.47222857142856 L 428.4259967231 208.7855 L 430.50573457127 207.75102857142858 L 432.58547241944 213.5659428571429 L 434.66521026761 214.9513142857143 L 436.74494811578 225.6697142857143 L 438.82468596395 217.53977142857144 L 440.90442381212 211.85245714285713 L 442.98416166029 213.67531428571428 L 445.06389950847 212.74565714285717 L 447.14363735664 216.1452857142857 L 449.22337520481 234.18245714285712 L 451.30311305298 237.66411428571428 L 453.38285090115 236.20582857142858 L 455.46258874932 248.3825142857143 L 457.54232659749 243.93474285714285 L 459.62206444566 242.31240000000003 L 461.70180229383 249.7678857142857 L 463.781540142 259.17990476190477 L 465.86127799017 266.84805714285716 L 467.94101583834 273.7566857142857 L 470.02075368651 267.0121142857143 L 472.10049153468 260.75971428571427 L 474.18022938285 256.18434285714284 L 476.25996723102 257.9889714285714 L 478.33970507919 258.99154285714286 L 480.41944292736 231.2112 L 482.49918077553 216.85923809523808 L 484.5789186237 214.09457142857144 L 486.65865647187 209.4098285714286 L 488.73839432004 211.70662857142855 L 490.81813216821 231.68514285714286 L 492.89787001638 225.81554285714287 L 494.97760786455 223.82862857142857 L 497.05734571273 218.76108571428574 L 499.1370835609 223.5005142857143 L 501.21682140907 235.13338095238095 L 503.29655925724 237.68234285714286 L 505.37629710541 244.08057142857143 L 507.45603495358 251.66365714285712 L 509.53577280175 248.6605 L 511.61551064992 247.01537142857143 L 513.69524849809 221.34954285714286 L 515.77498634626 149.43782857142855 L 517.85472419443 141.89120000000003 L 519.9344620426 143.51354285714288 L 522.01419989077 147.23217142857143 L 524.09393773894 188.06417142857143 L 526.17367558711 216.95645714285715 L 528.25341343528 197.30909523809524 L 530.33315128345 196.1941142857143 L 532.41288913162 204.21468571428574 L 534.49262697979 203.55845714285715 L 536.57236482796 228.65464285714285 L 538.65210267613 231.6486857142857 L 540.7318405243 219.83657142857146 L 542.81157837247 208.47409523809526 L 542.81157837247 319 L 540.7318405243 319 L 538.65210267613 319 L 536.57236482796 319 L 534.49262697979 319 L 532.41288913162 319 L 530.33315128345 319 L 528.25341343528 319 L 526.17367558711 319 L 524.09393773894 319 L 522.01419989077 319 L 519.9344620426 319 L 517.85472419443 319 L 515.77498634626 319 L 513.69524849809 319 L 511.61551064992 319 L 509.53577280175 319 L 507.45603495358 319 L 505.37629710541 319 L 503.29655925724 319 L 501.21682140907 319 L 499.1370835609 319 L 497.05734571273 319 L 494.97760786455 319 L 492.89787001638 319 L 490.81813216821 319 L 488.73839432004 319 L 486.65865647187 319 L 484.5789186237 319 L 482.49918077553 319 L 480.41944292736 319 L 478.33970507919 319 L 476.25996723102 319 L 474.18022938285 319 L 472.10049153468 319 L 470.02075368651 319 L 467.94101583834 319 L 465.86127799017 319 L 463.781540142 319 L 461.70180229383 319 L 459.62206444566 319 L 457.54232659749 319 L 455.46258874932 319 L 453.38285090115 319 L 451.30311305298 319 L 449.22337520481 319 L 447.14363735664 319 L 445.06389950847 319 L 442.98416166029 319 L 440.90442381212 319 L 438.82468596395 319 L 436.74494811578 319 L 434.66521026761 319 L 432.58547241944 319 L 430.50573457127 319 L 428.4259967231 319 L 426.34625887493 319 L 424.26652102676 319 L 422.18678317859 319 L 420.10704533042 319 L 418.02730748225 319 L 415.94756963408 319 L 413.86783178591 319 L 411.78809393774 319 L 409.70835608957 319 L 407.6286182414 319 L 405.54888039323 319 L 403.46914254506 319 L 401.38940469689 319 L 399.30966684872 319 L 397.22992900055 319 L 395.15019115238 319 L 393.07045330421 319 L 390.99071545603 319 L 388.91097760786 319 L 386.83123975969 319 L 384.75150191152 319 L 382.67176406335 319 L 380.59202621518 319 L 378.51228836701 319 L 376.43255051884 319 L 374.35281267067 319 L 372.2730748225 319 L 370.19333697433 319 L 368.11359912616 319 L 366.03386127799 319 L 363.95412342982 319 L 361.87438558165 319 L 359.79464773348 319 L 357.71490988531 319 L 355.63517203714 319 L 353.55543418897 319 L 351.4756963408 319 L 349.39595849263 319 L 347.31622064446 319 L 345.23648279629 319 L 343.15674494812 319 L 341.07700709995 319 L 338.99726925177 319 L 336.9175314036 319 L 334.83779355543 319 L 332.75805570726 319 L 330.67831785909 319 L 328.59858001092 319 L 326.51884216275 319 L 324.43910431458 319 L 322.35936646641 319 L 320.27962861824 319 L 318.19989077007 319 L 316.1201529219 319 L 314.04041507373 319 L 311.96067722556 319 L 309.88093937739 319 L 307.80120152922 319 L 305.72146368105 319 L 303.64172583288 319 L 301.56198798471 319 L 299.48225013654 319 L 297.40251228837 319 L 295.3227744402 319 L 293.24303659203 319 L 291.16329874386 319 L 289.08356089569 319 L 287.00382304752 319 L 284.92408519934 319 L 282.84434735117 319 L 280.764609503 319 L 278.68487165483 319 L 276.60513380666 319 L 274.52539595849 319 L 272.44565811032 319 L 270.36592026215 319 L 268.28618241398 319 L 266.20644456581 319 L 264.12670671764 319 L 262.04696886947 319 L 259.9672310213 319 L 257.88749317313 319 L 255.80775532496 319 L 253.72801747679 319 L 251.64827962862 319 L 249.56854178045 319 L 247.48880393228 319 L 245.40906608411 319 L 243.32932823594 319 L 241.24959038777 319 L 239.1698525396 319 L 237.09011469143 319 L 235.01037684326 319 L 232.93063899508 319 L 230.85090114691 319 L 228.77116329874 319 L 226.69142545057 319 L 224.6116876024 319 L 222.53194975423 319 L 220.45221190606 319 L 218.37247405789 319 L 216.29273620972 319 L 214.21299836155 319 L 212.13326051338 319 L 210.05352266521 319 L 207.97378481704 319 L 205.89404696887 319 L 203.8143091207 319 L 201.73457127253 319 L 199.65483342436 319 L 197.57509557619 319 L 195.49535772802 319 L 193.41561987985 319 L 191.33588203168 319 L 189.25614418351 319 L 187.17640633534 319 L 185.09666848717 319 L 183.016930639 319 L 180.93719279082 319 L 178.85745494265 319 L 176.77771709448 319 L 174.69797924631 319 L 172.61824139814 319 L 170.53850354997 319 L 168.4587657018 319 L 166.37902785363 319 L 164.29929000546 319 L 162.21955215729 319 L 160.13981430912 319 L 158.06007646095 319 L 155.98033861278 319 L 153.90060076461 319 L 151.82086291644 319 L 149.74112506827 319 L 147.6613872201 319 L 145.58164937193 319 L 143.50191152376 319 L 141.42217367559 319 L 139.34243582742 319 L 137.26269797925 319 L 135.18296013108 319 L 133.10322228291 319 L 131.02348443474 319 L 128.94374658656 319 L 126.86400873839 319 L 124.78427089022 319 L 122.70453304205 319 L 120.62479519388 319 L 118.54505734571 319 L 116.46531949754 319 L 114.38558164937 319 L 112.3058438012 319 L 110.22610595303 319 L 108.14636810486 319 L 106.06663025669 319 L 103.98689240852 319 L 101.90715456035 319 L 99.827416712179 319 L 97.747678864009 319 L 95.667941015838 319 L 93.588203167668 319 L 91.508465319498 319 L 89.428727471327 319 L 87.348989623157 319 L 85.269251774986 319 L 83.189513926816 319 L 81.109776078646 319 L 79.030038230475 319 L 76.950300382305 319 L 74.870562534134 319 L 72.790824685964 319 L 70.711086837794 319 L 68.631348989623 319 L 66.551611141453 319 L 64.471873293282 319 L 62.392135445112 319 L 60.312397596942 319 L 58.232659748771 319 L 56.152921900601 319 L 54.07318405243 319 L 51.99344620426 319 L 49.91370835609 319 L 47.833970507919 319 L 45.754232659749 319 L 43.674494811578 319 L 41.594756963408 319 L 39.515019115238 319 L 37.435281267067 319 L 35.355543418897 319 L 33.275805570726 319 L 31.196067722556 319 L 29.116329874386 319 L 27.036592026215 319 L 24.956854178045 319 L 22.877116329874 319 L 20.797378481704 319 L 18.717640633534 319 L 16.637902785363 319 L 14.558164937193 319 L 12.478427089022 319 L 10.398689240852 319 L 8.3189513926816 319 L 6.2392135445112 319 L 4.1594756963408 319 L 2.0797378481704 319 L 0 319\\\"\\n        />\\n        <Path\\n          fill=\\\"none\\\"\\n[end of Svg2.js]\\n[start of index.js]\\n/* eslint-disable jsx-a11y/anchor-is-valid */\\n\\nimport React from 'react';\\nimport {\\n  Document,\\n  Page,\\n  View,\\n  Text,\\n  Link,\\n  Font,\\n  StyleSheet,\\n} from '@react-pdf/renderer';\\n\\nconst styles = StyleSheet.create({\\n  title: {\\n    margin: 20,\\n    fontSize: 25,\\n    textAlign: 'center',\\n    backgroundColor: '#e4e4e4',\\n    textTransform: 'uppercase',\\n    fontFamily: 'Oswald',\\n  },\\n  body: {\\n    flexGrow: 1,\\n  },\\n  row: {\\n    flexGrow: 1,\\n    flexDirection: 'row',\\n  },\\n  block: {\\n    flexGrow: 1,\\n  },\\n  text: {\\n    width: '60%',\\n    margin: 10,\\n    fontFamily: 'Oswald',\\n    textAlign: 'justify',\\n  },\\n  fill1: {\\n    width: '40%',\\n    backgroundColor: '#e14427',\\n  },\\n  fill2: {\\n    flexGrow: 2,\\n    backgroundColor: '#e6672d',\\n  },\\n  fill3: {\\n    flexGrow: 2,\\n    backgroundColor: '#e78632',\\n  },\\n  fill4: {\\n    flexGrow: 2,\\n    backgroundColor: '#e29e37',\\n  },\\n});\\n\\nFont.register({\\n  family: 'Oswald',\\n  src: 'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\\n});\\n\\nexport default () => (\\n  <Document>\\n    <Page size=\\\"A4\\\">\\n      <Link\\n        style={styles.title}\\n        src=\\\"https://es.wikipedia.org/wiki/Lorem_ipsum\\\"\\n      >\\n        Lorem Ipsum\\n      </Link>\\n      <View style={styles.body}>\\n        <View style={styles.row}>\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n          <View style={styles.fill1} />\\n        </View>\\n        <View style={styles.row}>\\n          <View style={styles.fill2} />\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n        </View>\\n        <View style={styles.row}>\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n          <View style={styles.fill3} />\\n        </View>\\n      </View>\\n    </Page>\\n  </Document>\\n);\\n\\n[end of index.js]\\n[start of Fractal.js]\\nimport React from 'react';\\nimport { Text, View, StyleSheet } from '@react-pdf/renderer';\\n\\nconst palette = [\\n  '#781c81',\\n  '#521b80',\\n  '#442f8b',\\n  '#3f4c9f',\\n  '#4069b4',\\n  '#4582c1',\\n  '#4e96bd',\\n  '#5aa6a9',\\n  '#68b090',\\n  '#7ab878',\\n  '#8dbc64',\\n  '#a2be56',\\n  '#b7bd4b',\\n  '#c9b843',\\n  '#d8ae3d',\\n  '#e29e37',\\n  '#e78632',\\n  '#e6672d',\\n  '#e14427',\\n  '#d92120',\\n];\\n\\nconst styles = StyleSheet.create({\\n  row: {\\n    flexGrow: 1,\\n    width: '100%',\\n    flexDirection: 'row',\\n  },\\n  column: {\\n    flexGrow: 1,\\n    height: '100%',\\n    flexDirection: 'column',\\n  },\\n  text: {\\n    margin: 10,\\n    fontSize: 10,\\n    color: 'white',\\n  },\\n});\\n\\nconst toggle = direction => (direction === 'column' ? 'row' : 'column');\\n\\nconst Fractal = ({ steps, direction = 'column' }) => {\\n  if (steps === 0) {\\n    return null;\\n  }\\n\\n  const fractalStyle = {\\n    flexGrow: 1,\\n    minWidth: 40,\\n    minHeight: 40,\\n    alignItems: 'center',\\n    justifyContent: 'center',\\n    backgroundColor: palette[steps % palette.length],\\n  };\\n\\n  return (\\n    <View style={styles[direction]}>\\n      <Fractal direction={toggle(direction)} steps={steps - 1} />\\n      <View style={fractalStyle}>\\n        <Text style={styles.text}>{steps}</Text>\\n      </View>\\n    </View>\\n  );\\n};\\n\\nexport default Fractal;\\n\\n[end of Fractal.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "Svg2.js",
        "index.js",
        "Svg2.js",
        "index.js",
        "Fractal.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "700cbc8d-8833-4cbb-98d5-7b1857dbbd9e",
        "score": 0.01639344262295082,
        "payload": {
          "text": "          d=\"M 0 229.26985714285718 L 2.0797378481704 230.31799999999998 L 4.1594756963408 228.6014761904762 L 6.2392135445112 229.46125714285716 L 8.3189513926816 228.27640000000002 L 10.398689240852 226.6905142857143 L 12.478427089022 227.21914285714286 L 14.558164937193 230.3909142857143 L 16.637902785363 230.26331428571427 L 18.717640633534 229.35188571428571 L 20.797378481704 224.44840000000002 L 22.877116329874 210.4306285714286 L 24.956854178045 177.0358857142857 L 27.036592026215 166.08051428571426 L 29.116329874386 169.36165714285715 L 31.196067722556 175.3892380952381 L 33.275805570726 223.51874285714285 L 35.355543418897 233.1981142857143 L 37.435281267067 207.86040000000003 L 39.515019115238 190.16957142857143 L 41.594756963408 181.68417142857143 L 43.674494811578 162.9452 L 45.754232659749 165.57011428571428 L 47.833970507919 180.21980952380952 L 49.91370835609 183.41588571428574 L 51.99344620426 212.05297142857142 L 54.07318405243 217.15697142857144 L 56.152921900601 217.3757142857143 L 58.232659748771 223.1906285714286 L 60.312397596942 206.2562857142857 L 62.392135445112 197.06908571428573 L 64.471873293282 189.6865142857143 L 66.551611141453 188.33152380952382 L 68.631348989623 176.52548571428574 L 70.711086837794 152.8648 L 72.790824685964 160.33851428571433 L 74.870562534134 156.2872142857143 L 76.950300382305 154.97931428571428 L 79.030038230475 181.192 L 81.109776078646 191.10834285714287 L 83.189513926816 183.83514285714284 L 85.269251774986 188.26468571428572 L 87.348989623157 185.45748571428572 L 89.428727471327 188.17354285714288 L 91.508465319498 136.9330285714286 L 93.588203167668 111.66519047619047 L 95.667941015838 112.30622857142856 L 97.747678864009 90.55954285714287 L 99.827416712179 77.56257142857146 L 101.90715456035 101.60150000000002 L 103.98689240852 108.73342857142859 L 106.06663025669 112.8166285714286 L 108.14636810486 155.23451428571428 L 110.22610595303 172.6428 L 112.3058438012 193.19247619047619 L 114.38558164937 181.68417142857143 L 116.46531949754 174.83022857142856 L 118.54505734571 169.9632 L 120.62479519388 139.8131428571429 L 122.70453304205 104.68668571428569 L 124.78427089022 98.7806285714286 L 126.86400873839 77.32560000000001 L 128.94374658656 86.05708571428573 L 131.02348443474 106.01737142857141 L 133.10322228291 139.63085714285717 L 135.18296013108 165.64302857142857 L 137.26269797925 203.9959428571429 L 139.34243582742 225.0165238095238 L 141.42217367559 229.71645714285714 L 143.50191152376 214.53205714285716 L 145.58164937193 202.95691428571428 L 147.6613872201 202.40550000000002 L 149.74112506827 194.35302857142858 L 151.82086291644 199.6757714285714 L 153.90060076461 218.81577142857145 L 155.98033861278 170.11814285714283 L 158.06007646095 146.13845714285713 L 160.13981430912 143.02137142857143 L 162.21955215729 142.96668571428572 L 164.29929000546 170.91108571428572 L 166.37902785363 238.90821428571428 L 168.4587657018 247.50754285714288 L 170.53850354997 250.5517142857143 L 172.61824139814 248.1273142857143 L 174.69797924631 241.14880952380952 L 176.77771709448 239.7057142857143 L 178.85745494265 227.21914285714286 L 180.93719279082 220.74800000000005 L 183.016930639 218.67450000000002 L 185.09666848717 226.52645714285717 L 187.17640633534 225.87022857142858 L 189.25614418351 224.4484 L 191.33588203168 209.50097142857143 L 193.41561987985 210.79520000000002 L 195.49535772802 216.39137142857146 L 197.57509557619 216.08148571428572 L 199.65483342436 239.23177142857145 L 201.73457127253 260.1824761904762 L 203.8143091207 255.78331428571428 L 205.89404696887 258.0801142857143 L 207.97378481704 264.7882285714286 L 210.05352266521 268.3245714285714 L 212.13326051338 278.69207142857147 L 214.21299836155 260.8690857142857 L 216.29273620972 257.6426285714286 L 218.37247405789 247.74451428571427 L 220.45221190606 241.39185714285713 L 222.53194975423 247.8721142857143 L 224.6116876024 242.53114285714287 L 226.69142545057 237.15371428571427 L 228.77116329874 237.40435714285712 L 230.85090114691 230.24508571428572 L 232.93063899508 214.47737142857142 L 235.01037684326 214.25862857142857 L 237.09011469143 211.25091428571432 L 239.1698525396 211.92537142857145 L 241.24959038777 225.14108571428574 L 243.32932823594 222.46148571428571 L 245.40906608411 214.69611428571432 L 247.48880393228 210.9957142857143 L 249.56854178045 208.26142857142855 L 251.64827962862 208.4984 L 253.72801747679 222.58908571428572 L 255.80775532496 235.71821428571428 L 257.88749317313 248.94760000000002 L 259.9672310213 243.31497142857143 L 262.04696886947 243.18737142857142 L 264.12670671764 241.07285714285715 L 266.20644456581 199.35980952380953 L 268.28618241398 153.32051428571432 L 270.36592026215 153.9038285714286 L 272.44565811032 157.13028571428575 L 274.52539595849 157.03914285714288 L 276.60513380666 203.68605714285712 L 278.68487165483 236.33342857142856 L 280.764609503 193.58742857142857 L 282.84434735117 93.58852380952382 L 284.92408519934 82.84885714285713 L 287.00382304752 67.02645714285711 L 289.08356089569 63.39897142857143 L 291.16329874386 81.46348571428572 L 293.24303659203 48.89814285714283 L 295.3227744402 45.425599999999974 L 297.40251228837 48.34217142857142 L 299.48225013654 41.178342857142866 L 301.56198798471 88.39034285714288 L 303.64172583288 131.1363428571429 L 305.72146368105 144.57080000000002 L 307.80120152922 171.54908571428575 L 309.88093937739 182.49838095238098 L 311.96067722556 165.97114285714287 L 314.04041507373 158.35160000000002 L 316.1201529219 156.54697142857142 L 318.19989077007 139.50325714285717 L 320.27962861824 173.17142857142858 L 322.35936646641 184.49137142857145 L 324.43910431458 192.78537142857144 L 326.51884216275 205.89171428571427 L 328.59858001092 226.45961904761904 L 330.67831785909 226.14365714285714 L 332.75805570726 187.59022857142855 L 334.83779355543 136.82365714285714 L 336.9175314036 84.17042857142857 L 338.99726925177 71.20080000000002 L 341.07700709995 71.54714285714289 L 343.15674494812 107.36628571428571 L 345.23648279629 142.54742857142858 L 347.31622064446 219.472 L 349.39595849263 221.98754285714284 L 351.4756963408 232.12262857142858 L 353.55543418897 196.10297142857144 L 355.63517203714 189.8657619047619 L 357.71490988531 183.3612 L 359.79464773348 151.1695428571429 L 361.87438558165 147.56028571428575 L 363.95412342982 156.9252142857143 L 366.03386127799 161.23171428571428 L 368.11359912616 162.52594285714287 L 370.19333697433 192.11091428571427 L 372.2730748225 166.75497142857142 L 374.35281267067 140.78533333333337 L 376.43255051884 122.47777142857143 L 378.51228836701 57.63874285714286 L 380.59202621518 45.49851428571429 L 382.67176406335 48.282928571428556 L 384.75150191152 44.09491428571431 L 386.83123975969 50.456685714285754 L 388.91097760786 86.95028571428574 L 390.99071545603 65.01523809523815 L 393.07045330421 75.15639999999999 L 395.15019115238 87.05965714285716 L 397.22992900055 119.59765714285712 L 399.30966684872 228.58628571428574 L 401.38940469689 235.14857142857144 L 403.46914254506 189.12142857142857 L 405.54888039323 157.8412 L 407.6286182414 154.45068571428573 L 409.70835608957 154.396 L 411.78809393774 157.51308571428572 L 413.86783178591 220.71154285714286 L 415.94756963408 242.7498857142857 L 418.02730748225 241.69262857142857 L 420.10704533042 246.54142857142858 L 422.18678317859 243.4608 L 424.26652102676 229.26074285714287 L 426.34625887493 212.47222857142856 L 428.4259967231 208.7855 L 430.50573457127 207.75102857142858 L 432.58547241944 213.5659428571429 L 434.66521026761 214.9513142857143 L 436.74494811578 225.6697142857143 L 438.82468596395 217.53977142857144 L 440.90442381212 211.85245714285713 L 442.98416166029 213.67531428571428 L 445.06389950847 212.74565714285717 L 447.14363735664 216.1452857142857 L 449.22337520481 234.18245714285712 L 451.30311305298 237.66411428571428 L 453.38285090115 236.20582857142858 L 455.46258874932 248.3825142857143 L 457.54232659749 243.93474285714285 L 459.62206444566 242.31240000000003 L 461.70180229383 249.7678857142857 L 463.781540142 259.17990476190477 L 465.86127799017 266.84805714285716 L 467.94101583834 273.7566857142857 L 470.02075368651 267.0121142857143 L 472.10049153468 260.75971428571427 L 474.18022938285 256.18434285714284 L 476.25996723102 257.9889714285714 L 478.33970507919 258.99154285714286 L 480.41944292736 231.2112 L 482.49918077553 216.85923809523808 L 484.5789186237 214.09457142857144 L 486.65865647187 209.4098285714286 L 488.73839432004 211.70662857142855 L 490.81813216821 231.68514285714286 L 492.89787001638 225.81554285714287 L 494.97760786455 223.82862857142857 L 497.05734571273 218.76108571428574 L 499.1370835609 223.5005142857143 L 501.21682140907 235.13338095238095 L 503.29655925724 237.68234285714286 L 505.37629710541 244.08057142857143 L 507.45603495358 251.66365714285712 L 509.53577280175 248.6605 L 511.61551064992 247.01537142857143 L 513.69524849809 221.34954285714286 L 515.77498634626 149.43782857142855 L 517.85472419443 141.89120000000003 L 519.9344620426 143.51354285714288 L 522.01419989077 147.23217142857143 L 524.09393773894 188.06417142857143 L 526.17367558711 216.95645714285715 L 528.25341343528 197.30909523809524 L 530.33315128345 196.1941142857143 L 532.41288913162 204.21468571428574 L 534.49262697979 203.55845714285715 L 536.57236482796 228.65464285714285 L 538.65210267613 231.6486857142857 L 540.7318405243 219.83657142857146 L 542.81157837247 208.47409523809526\"\n          stroke=\"#56bd9f\"\n          strokeWidth=\"2\"\n          stroke-linejoin=\"round\"\n          stroke-linecap=\"round\"\n        />\n      </G>\n      <G transform=\"translate(46,45) scale(1 1)\" clip-Path=\"none\" />\n    </G>\n    <G>\n      <Text\n        x=\"59.369743309667\"\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\n        textAnchor=\"middle\"\n        transform=\"translate(0,0)\"\n        y=\"383\"\n        opacity=\"1\"\n      >\n        2015\n      </Text>\n      <Text\n        x=\"167.81321682141\"\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\n        textAnchor=\"middle\"\n        transform=\"translate(0,0)\"\n        y=\"383\"\n        opacity=\"1\"\n      >\n        2016\n      </Text>\n      <Text\n        x=\"276.55379574003\"\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\n        textAnchor=\"middle\"\n        transform=\"translate(0,0)\"\n        y=\"383\"\n        opacity=\"1\"\n      >\n        2017\n      </Text>\n      <Text\n        x=\"384.99726925177\"\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\n        textAnchor=\"middle\"\n        transform=\"translate(0,0)\"\n        y=\"383\"\n        opacity=\"1\"\n      >\n        2018\n      </Text>\n      <Text\n        x=\"493.44074276352\"\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\n        textAnchor=\"middle\"\n        transform=\"translate(0,0)\"\n        y=\"383\"\n        opacity=\"1\"\n      >\n        2019\n      </Text>\n    </G>\n    <G>\n      <Text\n        x=\"31\"\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\n        textAnchor=\"end\"\n        transform=\"translate(0,0)\"\n        y=\"362\"\n        opacity=\"1\"\n      >\n        0%\n      </Text>\n      <Text\n        x=\"31\"\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\n        textAnchor=\"end\"\n        transform=\"translate(0,0)\"\n        y=\"316\"\n        opacity=\"1\"\n      >\n        5%\n      </Text>\n      <Text\n        x=\"31\"\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\n        textAnchor=\"end\"\n        transform=\"translate(0,0)\"\n        y=\"271\"\n        opacity=\"1\"\n      >\n        10%\n      </Text>\n      <Text\n        x=\"31\"\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\n        textAnchor=\"end\"\n        transform=\"translate(0,0)\"\n        y=\"225\"\n        opacity=\"1\"\n      >\n        15%\n      </Text>\n      <Text\n        x=\"31\"\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\n        textAnchor=\"end\"\n        transform=\"translate(0,0)\"\n        y=\"180\"\n        opacity=\"1\"\n      >\n        20%\n      </Text>\n      <Text\n        x=\"31\"\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\n        textAnchor=\"end\"\n        transform=\"translate(0,0)\"\n        y=\"134\"\n        opacity=\"1\"\n      >\n        25%\n      </Text>\n      <Text\n        x=\"31\"\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\n        textAnchor=\"end\"\n        transform=\"translate(0,0)\"\n        y=\"89\"\n        opacity=\"1\"\n      >\n        30%\n      </Text>\n      <Text\n        x=\"0\"\n        style={{ color: '#666666', fontSize: '11', fill: '#666666' }}\n        textAnchor=\"end\"\n        transform=\"translate(0,0)\"\n        y=\"-9999\"\n      >\n        35%\n      </Text>\n    </G>\n    <G transform=\"translate(0,0)\">\n      <G transform=\"translate(0,10)\">\n        <Text x=\"46\" y=\"15\" style={{ color: '#666666', fill: '#666666' }}>\n          Zoom\n        </Text>\n        <G transform=\"translate(158,0)\">\n          <Rect fill=\"none\" x=\"0\" y=\"0\" width=\"32\" height=\"22\" rx=\"2\" ry=\"2\" />\n          <Text\n            x=\"4.59375\"\n            style={{ fontWeight: 'normal', color: '#333333', fill: '#333333' }}\n            y=\"14\"\n          >\n            YTD\n          </Text>\n        </G>\n        <G transform=\"translate(232,0)\">\n          <Rect\n            fill=\"rgb(225, 243, 239)\"\n            fillOpacity=\" .50\"\n            x=\"0\"\n            y=\"0\"\n            width=\"32\"\n            height=\"22\"\n            rx=\"2\"\n            ry=\"2\"\n          />\n          <Text\n            x=\"8.6640625\"\n            style={{ fontWeight: 'bold', fill: '#000000' }}\n            y=\"14\"\n          >\n            All\n          </Text>\n        </G>\n      </G>\n      <G transform=\"translate(331,10)\">\n        <G transform=\"translate(0,0)\" fill=\"#666666\">\n          <Text x=\"2\" y=\"14\" style={{ fontSize: '12', fill: '#666666' }}>\n            From\n          </Text>\n        </G>\n        <G transform=\"translate(38,0)\">\n          <Rect\n            fill=\"none\"\n            x=\"0.5\"\n            y=\"0.5\"\n            width=\"94\"\n            height=\"21\"\n            stroke=\"#cccccc\"\n            strokeWidth=\"1\"\n          />\n          <Text\n            x=\"11.9140625\"\n            y=\"14\"\n            style={{ fontSize: '12', fill: '#333333' }}\n          >\n            <Tspan>Nov 17, 2014</Tspan>\n          </Text>\n        </G>\n        <G transform=\"translate(142,0)\" fill=\"#666666\">\n          <Text x=\"2\" y=\"14\" style={{ fontSize: '12', fill: '#666666' }}>\n            To\n          </Text>\n        </G>\n        <G transform=\"translate(165,0)\">\n          <Rect\n            fill=\"none\"\n            x=\"0.5\"\n            y=\"0.5\"\n            width=\"94\"\n            height=\"21\"\n            stroke=\"#cccccc\"\n            strokeWidth=\"1\"\n          />\n          <Text\n            x=\"11.9140625\"\n            y=\"14\"\n            style={{ fontSize: '12', fill: '#333333' }}\n          >\n            <Tspan>Nov 22, 2019</Tspan>\n          </Text>\n        </G>\n      </G>\n    </G>\n  </Svg>\n);\n\nexport default Svg2;",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/examples/src/svg/Svg2.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 1
        }
      },
      {
        "id": "263d6735-aebb-414d-b268-3183636eacbf",
        "score": 0.016129032258064516,
        "payload": {
          "text": "import React from 'react';\nimport {\n  Document,\n  Font,\n  Page,\n  Text,\n  Image,\n  StyleSheet,\n} from '@react-pdf/renderer';\n\nconst styles = StyleSheet.create({\n  body: {\n    paddingTop: 35,\n    paddingBottom: 65,\n    paddingHorizontal: 35,\n  },\n  title: {\n    fontSize: 24,\n    textAlign: 'center',\n    fontFamily: 'Oswald',\n  },\n  author: {\n    fontSize: 12,\n    textAlign: 'center',\n    marginBottom: 40,\n  },\n  subtitle: {\n    fontSize: 18,\n    margin: 12,\n    fontFamily: 'Oswald',\n  },\n  text: {\n    margin: 12,\n    fontSize: 14,\n    textAlign: 'justify',\n    fontFamily: 'Times-Roman',\n  },\n  image: {\n    marginVertical: 15,\n    marginHorizontal: 100,\n  },\n  header: {\n    fontSize: 12,\n    marginBottom: 20,\n    textAlign: 'center',\n    color: 'grey',\n  },\n  pageNumber: {\n    position: 'absolute',\n    fontSize: 12,\n    bottom: 30,\n    left: 0,\n    right: 0,\n    textAlign: 'center',\n    color: 'grey',\n  },\n});\n\nFont.register({\n  family: 'Oswald',\n  src: 'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\n});\n\nconst Subtitle = ({ children, ...props }) => (\n  <Text style={styles.subtitle} {...props}>\n    {children}\n  </Text>\n);\n\nexport default () => (\n  <Document>\n    <Page style={styles.body} wrap>\n      <Text style={styles.header} fixed>\n        ~ Created with react-pdf ~\n      </Text>\n      <Text style={styles.title}>Don Quijote de la Mancha</Text>\n      <Text style={styles.author}>Miguel de Cervantes</Text>\n      <Image\n        style={styles.image}\n        src=\"http://static.donquijote.org/images/blogs/dq-reg/don-quijote-de-la-mancha.jpg\"\n      />\n      <Subtitle>\n        Cap\u00edtulo I: Que trata de la condici\u00f3n y ejercicio del famoso hidalgo D.\n        Quijote de la Mancha\n      </Subtitle>\n      <Text style={styles.text}>\n        En un lugar de la Mancha, de cuyo nombre no quiero acordarme, no ha\n        mucho tiempo que viv\u00eda un hidalgo de los de lanza en astillero, adarga\n        antigua, roc\u00edn flaco y galgo corredor. Una olla de algo m\u00e1s vaca que\n        carnero, salpic\u00f3n las m\u00e1s noches, duelos y quebrantos los s\u00e1bados,\n        lentejas los viernes, alg\u00fan palomino de a\u00f1adidura los domingos,\n        consum\u00edan las tres partes de su hacienda. El resto della conclu\u00edan sayo\n        de velarte, calzas de velludo para las fiestas con sus pantuflos de lo\n        mismo, los d\u00edas de entre semana se honraba con su vellori de lo m\u00e1s\n        fino. Ten\u00eda en su casa una ama que pasaba de los cuarenta, y una sobrina\n        que no llegaba a los veinte, y un mozo de campo y plaza, que as\u00ed\n        ensillaba el roc\u00edn como tomaba la podadera. Frisaba la edad de nuestro\n        hidalgo con los cincuenta a\u00f1os, era de complexi\u00f3n recia, seco de carnes,\n        enjuto de rostro; gran madrugador y amigo de la caza. Quieren decir que\n        ten\u00eda el sobrenombre de Quijada o Quesada (que en esto hay alguna\n        diferencia en los autores que deste caso escriben), aunque por\n        conjeturas veros\u00edmiles se deja entender que se llama Quijana; pero esto\n        importa poco a nuestro cuento; basta que en la narraci\u00f3n d\u00e9l no se salga\n        un punto de la verdad.\n      </Text>\n      <Text style={styles.text}>\n        Es, pues, de saber, que este sobredicho hidalgo, los ratos que estaba\n        ocioso (que eran los m\u00e1s del a\u00f1o) se daba a leer libros de caballer\u00edas\n        con tanta afici\u00f3n y gusto, que olvid\u00f3 casi de todo punto el ejercicio de\n        la caza, y aun la administraci\u00f3n de su hacienda; y lleg\u00f3 a tanto su\n        curiosidad y desatino en esto, que vendi\u00f3 muchas hanegas de tierra de\n        sembradura, para comprar libros de caballer\u00edas en que leer; y as\u00ed llev\u00f3\n        a su casa todos cuantos pudo haber dellos; y de todos ningunos le\n        parec\u00edan tan bien como los que compuso el famoso Feliciano de Silva:\n        porque la claridad de su prosa, y aquellas intrincadas razones suyas, le\n        parec\u00edan de perlas; y m\u00e1s cuando llegaba a leer aquellos requiebros y\n        cartas de desaf\u00edo, donde en muchas partes hallaba escrito: la raz\u00f3n de\n        la sinraz\u00f3n que a mi raz\u00f3n se hace, de tal manera mi raz\u00f3n enflaquece,\n        que con raz\u00f3n me quejo.\n      </Text>\n      <Text style={styles.text}>\n        Con estas y semejantes razones perd\u00eda el pobre caballero el juicio, y\n        desvel\u00e1base por entenderlas, y desentra\u00f1arles el sentido, que no se lo\n        sacara, ni las entendiera el mismo Arist\u00f3teles, si resucitara para s\u00f3lo\n        ello. No estaba muy bien con las heridas que don Belianis daba y\n        recib\u00eda, porque se imaginaba que por grandes maestros que le hubiesen\n        curado, no dejar\u00eda de tener el rostro y todo el cuerpo lleno de\n        cicatrices y se\u00f1ales; pero con todo alababa en su autor aquel acabar su\n        libro con la promesa de aquella inacabable aventura, y muchas veces le\n        vino deseo de tomar la pluma, y darle fin al pie de la letra como all\u00ed\n        se promete; y sin duda alguna lo hiciera, y aun saliera con ello, si\n        otros mayores y continuos pensamientos no se lo estorbaran. Tuvo muchas\n        veces competencia con el cura de su lugar (que era hombre docto graduado\n        en Sig\u00fcenza), sobre cu\u00e1l hab\u00eda sido mejor caballero, Palmer\u00edn de\n        Inglaterra o Amad\u00eds de Gaula; mas maese Nicol\u00e1s, barbero del mismo\n        pueblo, dec\u00eda que ninguno llegaba al caballero del Febo, y que si alguno\n        se le pod\u00eda comparar, era don Galaor, hermano de Amad\u00eds de Gaula, porque\n        ten\u00eda muy acomodada condici\u00f3n para todo; que no era caballero\n        melindroso, ni tan llor\u00f3n como su hermano, y que en lo de la valent\u00eda no\n        le iba en zaga.\n      </Text>\n      <Text style={styles.text}>\n        En resoluci\u00f3n, \u00e9l se enfrasc\u00f3 tanto en su lectura, que se le pasaban las\n        noches leyendo de claro en claro, y los d\u00edas de turbio en turbio, y as\u00ed,\n        del poco dormir y del mucho leer, se le sec\u00f3 el cerebro, de manera que\n        vino a perder el juicio. Llen\u00f3sele la fantas\u00eda de todo aquello que le\u00eda\n        en los libros, as\u00ed de encantamientos, como de pendencias, batallas,\n        desaf\u00edos, heridas, requiebros, amores, tormentas y disparates\n        imposibles, y asent\u00f3sele de tal modo en la imaginaci\u00f3n que era verdad\n        toda aquella m\u00e1quina de aquellas so\u00f1adas invenciones que le\u00eda, que para\n        \u00e9l no hab\u00eda otra historia m\u00e1s cierta en el mundo.\n      </Text>\n      <Subtitle break>\n        Cap\u00edtulo II: Que trata de la primera salida que de su tierra hizo el\n        ingenioso Don Quijote\n      </Subtitle>\n      <Image\n        style={styles.image}\n        src=\"https://panampost.com/wp-content/uploads/don-quijote-lessons.jpg\"\n      />\n      <Text style={styles.text}>\n        Hechas, pues, estas prevenciones, no quiso aguardar m\u00e1s tiempo a poner\n        en efeto su pensamiento, apret\u00e1ndole a ello la falta que \u00e9l pensaba que\n        hac\u00eda en el mundo su tardanza, seg\u00fan eran los agravios que pensaba\n        deshacer, tuertos que enderezar, sinrazones que emendar y abusos que\n        mejorar y deudas que satisfacer. Y as\u00ed, sin dar parte a persona alguna\n        de su intenci\u00f3n y sin que nadie le viese, una ma\u00f1ana, antes del d\u00eda, que\n        era uno de los calurosos del mes de Julio, se arm\u00f3 de todas sus armas,\n        subi\u00f3 sobre Rocinante, puesta su mal compuesta celada, embraz\u00f3 su\n        adarga, tom\u00f3 su lanza y por la puerta falsa de un corral sali\u00f3 al campo\n        con grand\u00edsimo contento y alborozo de ver con cu\u00e1nta facilidad hab\u00eda\n        dado principio a su buen deseo. Mas apenas se vio en el campo cuando le\n        asalt\u00f3 un pensamiento terrible, y tal, que por poco le hiciera dejar la\n        comenzada empresa; y fue que le vino a la memoria que no era armado\n        caballero, y que, conforme a ley de caballer\u00eda, ni pod\u00eda ni deb\u00eda tomar\n        armas con ning\u00fan caballero; y puesto que lo fuera, hab\u00eda de llevar armas\n        blancas, como novel caballero, sin empresa en el escudo, hasta que por\n        su esfuerzo la ganase. Estos pensamientos le hicieron titubear en su\n        prop\u00f3sito; mas pudiendo m\u00e1s su locura que otra raz\u00f3n alguna, propuso de\n        hacerse armar caballero del primero que topase, a imitaci\u00f3n de otros\n        muchos que as\u00ed lo hicieron, seg\u00fan \u00e9l hab\u00eda le\u00eddo en los libros que tal\n        le ten\u00edan. En lo de las armas blancas, pensaba limpiarlas de manera, en\n        teniendo lugar, que lo fuesen m\u00e1s que un arminio; y con esto se quiet\u00f3 y\n        prosigui\u00f3 su camino, sin llevar otro que aquel que su caballo quer\u00eda,\n        creyendo que en aquello consist\u00eda la fuerza de las aventuras\n      </Text>\n      <Text style={styles.text}>\n        Yendo, pues, caminando nuestro flamante aventurero, iba hablando consigo\n        mesmo, y diciendo: \u2014\u00bfQui\u00e9n duda, sino que en los venideros tiempos,\n        cuando salga a luz la verdadera historia de mis famosos hechos, que el\n        sabio que los escribiere no ponga, cuando llegue a contar esta mi\n        primera salida tan de ma\u00f1ana, desta manera?: Apenas hab\u00eda el rubicundo\n        Apolo tendido por la faz de la ancha y espaciosa tierra las doradas\n        hebras de sus hermosos cabellos, y apenas los peque\u00f1os y pintados\n        pajarillos con sus arpadas lenguas hab\u00edan saludado con dulce y meliflua\n        armon\u00eda la venida de la rosada Aurora, que, dejando la blanda cama del\n        celoso marido, por las puertas y balcones del manchego horizonte a los\n        mortales se mostraba, cuando el famoso caballero don Quijote de la\n        Mancha, dejando las ociosas plumas, subi\u00f3 sobre su famoso caballo\n        Rocinante y comenz\u00f3 a caminar por el antiguo y conocido Campo de\n        Montiel.\n      </Text>\n      <Text style={styles.text}>\n        Y era la verdad que por \u00e9l caminaba; y a\u00f1adi\u00f3 diciendo: \u2014Dichosa edad y\n        siglo dichoso aquel adonde saldr\u00e1n a luz las famosas haza\u00f1as m\u00edas,\n        dignas de entallarse en bronces, esculpirse en m\u00e1rmoles y pintarse en\n        tablas, para memoria en lo futuro. \u00a1Oh t\u00fa, sabio encantador, quienquiera\n        que seas, a quien ha de tocar el ser coronista desta peregrina historia!\n        Ru\u00e9gote que no te olvides de mi buen Rocinante, compa\u00f1ero eterno m\u00edo en\n        todos mis caminos y carreras.\n      </Text>\n      <Text style={styles.text}>\n        Luego volv\u00eda diciendo, como si verdaderamente fuera enamorado: \u2014\u00a1Oh\n        princesa Dulcinea, se\u00f1ora deste cautivo coraz\u00f3n! Mucho agravio me\n        habedes fecho en despedirme y reprocharme con el riguroso afincamiento\n        de mandarme no parecer ante la vuestra fermosura. Pl\u00e9gaos, se\u00f1ora, de\n        membraros deste vuestro sujeto coraz\u00f3n, que tantas cuitas por vuestro\n        amor padece. Con estos iba ensartando otros disparates, todos al modo de\n        los que sus libros le hab\u00edan ense\u00f1ado, imitando en cuanto pod\u00eda su\n        lenguaje. Con esto caminaba tan despacio, y el sol entraba tan apriesa y\n        con tanto ardor, que fuera bastante a derretirle los sesos, si algunos\n        tuviera\n      </Text>\n      <Text style={styles.text}>\n        Casi todo aquel d\u00eda camin\u00f3 sin acontecerle cosa que de contar fuese, de\n        lo cual se desesperaba, porque quisiera topar luego luego con quien\n        hacer experiencia del valor de su fuerte brazo. Autores hay que dicen\n        que la primera aventura que le avino fue la del Puerto L\u00e1pice, otros\n        dicen que la de los molinos de viento; pero lo que yo he podido\n        averiguar en este caso, y lo que he hallado escrito en los anales de la\n        Mancha, es que \u00e9l anduvo todo aquel d\u00eda, y, al anochecer, su roc\u00edn y \u00e9l\n        se hallaron cansados y muertos de hambre, y que, mirando a todas partes\n        por ver si descubrir\u00eda alg\u00fan castillo o alguna majada de pastores donde\n        recogerse y adonde pudiese remediar su mucha hambre y necesidad, vio, no\n        lejos del camino por donde iba, una venta, que fue como si viera una\n        estrella que, no a los portales, sino a los alc\u00e1zares de su redenci\u00f3n le\n        encaminaba. Diose priesa a caminar, y lleg\u00f3 a ella a tiempo que\n        anochec\u00eda.\n      </Text>\n      <Text\n        style={styles.pageNumber}\n        render={({ pageNumber, totalPages }) => `${pageNumber} / ${totalPages}`}\n        fixed\n      />\n    </Page>\n  </Document>\n);\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/examples/src/pageWrap/index.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "cfbf7b3f-aeb5-4de9-bb53-3f56ec5a9356",
        "score": 0.015873015873015872,
        "payload": {
          "text": "import React from 'react';\nimport {\n  Rect,\n  Svg,\n  G,\n  Path,\n  Text,\n  Defs,\n  ClipPath,\n  Tspan,\n  LinearGradient,\n  Stop,\n} from '@react-pdf/renderer';\n\nconst Svg2 = () => (\n  <Svg width=\"400\" viewBox=\"0 0 600 400\">\n    <Defs>\n      <LinearGradient x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\" id=\"highcharts-5xj7ee9-2948\">\n        <Stop offset=\"0\" stopColor=\"#B5E2D5\" stopOpacity=\"0.7\" />\n        <Stop offset=\"0.5\" stopColor=\"rgb(225,243,239)\" stopOpacity=\"0.5\" />\n        <Stop offset=\"1\" stopColor=\"#fff\" stopOpacity=\"1\" />\n      </LinearGradient>\n\n      <ClipPath id=\"highcharts-5xj7ee9-2949\">\n        <Rect x=\"0\" y=\"0\" width=\"544\" height=\"319\" fill=\"none\" />\n      </ClipPath>\n    </Defs>\n\n    <Rect fill=\"#ffffff\" x=\"0\" y=\"0\" width=\"600\" height=\"400\" rx=\"0\" ry=\"0\" />\n    <Rect fill=\"none\" x=\"46\" y=\"45\" width=\"544\" height=\"319\" />\n    <G>\n      <Path fill=\"none\" d=\"M 58.5 45 L 58.5 364\" opacity=\"1\" />\n      <Path fill=\"none\" d=\"M 167.5 45 L 167.5 364\" opacity=\"1\" />\n      <Path fill=\"none\" d=\"M 276.5 45 L 276.5 364\" opacity=\"1\" />\n      <Path fill=\"none\" d=\"M 384.5 45 L 384.5 364\" opacity=\"1\" />\n      <Path fill=\"none\" d=\"M 492.5 45 L 492.5 364\" opacity=\"1\" />\n    </G>\n    <G>\n      <Path\n        fill=\"none\"\n        stroke=\"#e6e6e6\"\n        strokeWidth=\"1\"\n        d=\"M 46 364.5 L 590 364.5\"\n        opacity=\"1\"\n      />\n      <Path\n        fill=\"none\"\n        stroke=\"#e6e6e6\"\n        strokeWidth=\"1\"\n        d=\"M 46 318.5 L 590 318.5\"\n        opacity=\"1\"\n      />\n      <Path\n        fill=\"none\"\n        stroke=\"#e6e6e6\"\n        strokeWidth=\"1\"\n        d=\"M 46 273.5 L 590 273.5\"\n        opacity=\"1\"\n      />\n      <Path\n        fill=\"none\"\n        stroke=\"#e6e6e6\"\n        strokeWidth=\"1\"\n        d=\"M 46 227.5 L 590 227.5\"\n        opacity=\"1\"\n      />\n      <Path\n        fill=\"none\"\n        stroke=\"#e6e6e6\"\n        strokeWidth=\"1\"\n        d=\"M 46 182.5 L 590 182.5\"\n        opacity=\"1\"\n      />\n      <Path\n        fill=\"none\"\n        stroke=\"#e6e6e6\"\n        strokeWidth=\"1\"\n        d=\"M 46 136.5 L 590 136.5\"\n        opacity=\"1\"\n      />\n      <Path\n        fill=\"none\"\n        stroke=\"#e6e6e6\"\n        strokeWidth=\"1\"\n        d=\"M 46 91.5 L 590 91.5\"\n        opacity=\"1\"\n      />\n      <Path\n        fill=\"none\"\n        stroke=\"#e6e6e6\"\n        strokeWidth=\"1\"\n        d=\"M 46 44.5 L 590 44.5\"\n        opacity=\"1\"\n      />\n    </G>\n    <Rect\n      fill=\"none\"\n      stroke=\"#cccccc\"\n      strokeWidth=\"1\"\n      x=\"45.5\"\n      y=\"44.5\"\n      width=\"545\"\n      height=\"320\"\n    />\n    <G>\n      <Path\n        fill=\"none\"\n        stroke=\"#ccd6eb\"\n        strokeWidth=\"1\"\n        d=\"M 58.5 364 L 58.5 374\"\n        opacity=\"1\"\n      />\n      <Path\n        fill=\"none\"\n        stroke=\"#ccd6eb\"\n        strokeWidth=\"1\"\n        d=\"M 167.5 364 L 167.5 374\"\n        opacity=\"1\"\n      />\n      <Path\n        fill=\"none\"\n        stroke=\"#ccd6eb\"\n        strokeWidth=\"1\"\n        d=\"M 276.5 364 L 276.5 374\"\n        opacity=\"1\"\n      />\n      <Path\n        fill=\"none\"\n        stroke=\"#ccd6eb\"\n        strokeWidth=\"1\"\n        d=\"M 384.5 364 L 384.5 374\"\n        opacity=\"1\"\n      />\n      <Path\n        fill=\"none\"\n        stroke=\"#ccd6eb\"\n        strokeWidth=\"1\"\n        d=\"M 492.5 364 L 492.5 374\"\n        opacity=\"1\"\n      />\n      <Path\n        fill=\"none\"\n        stroke=\"#ccd6eb\"\n        strokeWidth=\"1\"\n        d=\"M 46 364.5 L 590 364.5\"\n      />\n    </G>\n    <G>\n      <Path fill=\"none\" d=\"M 46 45 L 46 364\" />\n    </G>\n    <G>\n      <G\n        transform=\"translate(46,45) scale(1 1)\"\n        clip-Path=\"url(#highcharts-5xj7ee9-2949)\"\n      >\n        <Path\n          fill=\"url(#highcharts-5xj7ee9-2948)\"\n          d=\"M 0 229.26985714285718 L 2.0797378481704 230.31799999999998 L 4.1594756963408 228.6014761904762 L 6.2392135445112 229.46125714285716 L 8.3189513926816 228.27640000000002 L 10.398689240852 226.6905142857143 L 12.478427089022 227.21914285714286 L 14.558164937193 230.3909142857143 L 16.637902785363 230.26331428571427 L 18.717640633534 229.35188571428571 L 20.797378481704 224.44840000000002 L 22.877116329874 210.4306285714286 L 24.956854178045 177.0358857142857 L 27.036592026215 166.08051428571426 L 29.116329874386 169.36165714285715 L 31.196067722556 175.3892380952381 L 33.275805570726 223.51874285714285 L 35.355543418897 233.1981142857143 L 37.435281267067 207.86040000000003 L 39.515019115238 190.16957142857143 L 41.594756963408 181.68417142857143 L 43.674494811578 162.9452 L 45.754232659749 165.57011428571428 L 47.833970507919 180.21980952380952 L 49.91370835609 183.41588571428574 L 51.99344620426 212.05297142857142 L 54.07318405243 217.15697142857144 L 56.152921900601 217.3757142857143 L 58.232659748771 223.1906285714286 L 60.312397596942 206.2562857142857 L 62.392135445112 197.06908571428573 L 64.471873293282 189.6865142857143 L 66.551611141453 188.33152380952382 L 68.631348989623 176.52548571428574 L 70.711086837794 152.8648 L 72.790824685964 160.33851428571433 L 74.870562534134 156.2872142857143 L 76.950300382305 154.97931428571428 L 79.030038230475 181.192 L 81.109776078646 191.10834285714287 L 83.189513926816 183.83514285714284 L 85.269251774986 188.26468571428572 L 87.348989623157 185.45748571428572 L 89.428727471327 188.17354285714288 L 91.508465319498 136.9330285714286 L 93.588203167668 111.66519047619047 L 95.667941015838 112.30622857142856 L 97.747678864009 90.55954285714287 L 99.827416712179 77.56257142857146 L 101.90715456035 101.60150000000002 L 103.98689240852 108.73342857142859 L 106.06663025669 112.8166285714286 L 108.14636810486 155.23451428571428 L 110.22610595303 172.6428 L 112.3058438012 193.19247619047619 L 114.38558164937 181.68417142857143 L 116.46531949754 174.83022857142856 L 118.54505734571 169.9632 L 120.62479519388 139.8131428571429 L 122.70453304205 104.68668571428569 L 124.78427089022 98.7806285714286 L 126.86400873839 77.32560000000001 L 128.94374658656 86.05708571428573 L 131.02348443474 106.01737142857141 L 133.10322228291 139.63085714285717 L 135.18296013108 165.64302857142857 L 137.26269797925 203.9959428571429 L 139.34243582742 225.0165238095238 L 141.42217367559 229.71645714285714 L 143.50191152376 214.53205714285716 L 145.58164937193 202.95691428571428 L 147.6613872201 202.40550000000002 L 149.74112506827 194.35302857142858 L 151.82086291644 199.6757714285714 L 153.90060076461 218.81577142857145 L 155.98033861278 170.11814285714283 L 158.06007646095 146.13845714285713 L 160.13981430912 143.02137142857143 L 162.21955215729 142.96668571428572 L 164.29929000546 170.91108571428572 L 166.37902785363 238.90821428571428 L 168.4587657018 247.50754285714288 L 170.53850354997 250.5517142857143 L 172.61824139814 248.1273142857143 L 174.69797924631 241.14880952380952 L 176.77771709448 239.7057142857143 L 178.85745494265 227.21914285714286 L 180.93719279082 220.74800000000005 L 183.016930639 218.67450000000002 L 185.09666848717 226.52645714285717 L 187.17640633534 225.87022857142858 L 189.25614418351 224.4484 L 191.33588203168 209.50097142857143 L 193.41561987985 210.79520000000002 L 195.49535772802 216.39137142857146 L 197.57509557619 216.08148571428572 L 199.65483342436 239.23177142857145 L 201.73457127253 260.1824761904762 L 203.8143091207 255.78331428571428 L 205.89404696887 258.0801142857143 L 207.97378481704 264.7882285714286 L 210.05352266521 268.3245714285714 L 212.13326051338 278.69207142857147 L 214.21299836155 260.8690857142857 L 216.29273620972 257.6426285714286 L 218.37247405789 247.74451428571427 L 220.45221190606 241.39185714285713 L 222.53194975423 247.8721142857143 L 224.6116876024 242.53114285714287 L 226.69142545057 237.15371428571427 L 228.77116329874 237.40435714285712 L 230.85090114691 230.24508571428572 L 232.93063899508 214.47737142857142 L 235.01037684326 214.25862857142857 L 237.09011469143 211.25091428571432 L 239.1698525396 211.92537142857145 L 241.24959038777 225.14108571428574 L 243.32932823594 222.46148571428571 L 245.40906608411 214.69611428571432 L 247.48880393228 210.9957142857143 L 249.56854178045 208.26142857142855 L 251.64827962862 208.4984 L 253.72801747679 222.58908571428572 L 255.80775532496 235.71821428571428 L 257.88749317313 248.94760000000002 L 259.9672310213 243.31497142857143 L 262.04696886947 243.18737142857142 L 264.12670671764 241.07285714285715 L 266.20644456581 199.35980952380953 L 268.28618241398 153.32051428571432 L 270.36592026215 153.9038285714286 L 272.44565811032 157.13028571428575 L 274.52539595849 157.03914285714288 L 276.60513380666 203.68605714285712 L 278.68487165483 236.33342857142856 L 280.764609503 193.58742857142857 L 282.84434735117 93.58852380952382 L 284.92408519934 82.84885714285713 L 287.00382304752 67.02645714285711 L 289.08356089569 63.39897142857143 L 291.16329874386 81.46348571428572 L 293.24303659203 48.89814285714283 L 295.3227744402 45.425599999999974 L 297.40251228837 48.34217142857142 L 299.48225013654 41.178342857142866 L 301.56198798471 88.39034285714288 L 303.64172583288 131.1363428571429 L 305.72146368105 144.57080000000002 L 307.80120152922 171.54908571428575 L 309.88093937739 182.49838095238098 L 311.96067722556 165.97114285714287 L 314.04041507373 158.35160000000002 L 316.1201529219 156.54697142857142 L 318.19989077007 139.50325714285717 L 320.27962861824 173.17142857142858 L 322.35936646641 184.49137142857145 L 324.43910431458 192.78537142857144 L 326.51884216275 205.89171428571427 L 328.59858001092 226.45961904761904 L 330.67831785909 226.14365714285714 L 332.75805570726 187.59022857142855 L 334.83779355543 136.82365714285714 L 336.9175314036 84.17042857142857 L 338.99726925177 71.20080000000002 L 341.07700709995 71.54714285714289 L 343.15674494812 107.36628571428571 L 345.23648279629 142.54742857142858 L 347.31622064446 219.472 L 349.39595849263 221.98754285714284 L 351.4756963408 232.12262857142858 L 353.55543418897 196.10297142857144 L 355.63517203714 189.8657619047619 L 357.71490988531 183.3612 L 359.79464773348 151.1695428571429 L 361.87438558165 147.56028571428575 L 363.95412342982 156.9252142857143 L 366.03386127799 161.23171428571428 L 368.11359912616 162.52594285714287 L 370.19333697433 192.11091428571427 L 372.2730748225 166.75497142857142 L 374.35281267067 140.78533333333337 L 376.43255051884 122.47777142857143 L 378.51228836701 57.63874285714286 L 380.59202621518 45.49851428571429 L 382.67176406335 48.282928571428556 L 384.75150191152 44.09491428571431 L 386.83123975969 50.456685714285754 L 388.91097760786 86.95028571428574 L 390.99071545603 65.01523809523815 L 393.07045330421 75.15639999999999 L 395.15019115238 87.05965714285716 L 397.22992900055 119.59765714285712 L 399.30966684872 228.58628571428574 L 401.38940469689 235.14857142857144 L 403.46914254506 189.12142857142857 L 405.54888039323 157.8412 L 407.6286182414 154.45068571428573 L 409.70835608957 154.396 L 411.78809393774 157.51308571428572 L 413.86783178591 220.71154285714286 L 415.94756963408 242.7498857142857 L 418.02730748225 241.69262857142857 L 420.10704533042 246.54142857142858 L 422.18678317859 243.4608 L 424.26652102676 229.26074285714287 L 426.34625887493 212.47222857142856 L 428.4259967231 208.7855 L 430.50573457127 207.75102857142858 L 432.58547241944 213.5659428571429 L 434.66521026761 214.9513142857143 L 436.74494811578 225.6697142857143 L 438.82468596395 217.53977142857144 L 440.90442381212 211.85245714285713 L 442.98416166029 213.67531428571428 L 445.06389950847 212.74565714285717 L 447.14363735664 216.1452857142857 L 449.22337520481 234.18245714285712 L 451.30311305298 237.66411428571428 L 453.38285090115 236.20582857142858 L 455.46258874932 248.3825142857143 L 457.54232659749 243.93474285714285 L 459.62206444566 242.31240000000003 L 461.70180229383 249.7678857142857 L 463.781540142 259.17990476190477 L 465.86127799017 266.84805714285716 L 467.94101583834 273.7566857142857 L 470.02075368651 267.0121142857143 L 472.10049153468 260.75971428571427 L 474.18022938285 256.18434285714284 L 476.25996723102 257.9889714285714 L 478.33970507919 258.99154285714286 L 480.41944292736 231.2112 L 482.49918077553 216.85923809523808 L 484.5789186237 214.09457142857144 L 486.65865647187 209.4098285714286 L 488.73839432004 211.70662857142855 L 490.81813216821 231.68514285714286 L 492.89787001638 225.81554285714287 L 494.97760786455 223.82862857142857 L 497.05734571273 218.76108571428574 L 499.1370835609 223.5005142857143 L 501.21682140907 235.13338095238095 L 503.29655925724 237.68234285714286 L 505.37629710541 244.08057142857143 L 507.45603495358 251.66365714285712 L 509.53577280175 248.6605 L 511.61551064992 247.01537142857143 L 513.69524849809 221.34954285714286 L 515.77498634626 149.43782857142855 L 517.85472419443 141.89120000000003 L 519.9344620426 143.51354285714288 L 522.01419989077 147.23217142857143 L 524.09393773894 188.06417142857143 L 526.17367558711 216.95645714285715 L 528.25341343528 197.30909523809524 L 530.33315128345 196.1941142857143 L 532.41288913162 204.21468571428574 L 534.49262697979 203.55845714285715 L 536.57236482796 228.65464285714285 L 538.65210267613 231.6486857142857 L 540.7318405243 219.83657142857146 L 542.81157837247 208.47409523809526 L 542.81157837247 319 L 540.7318405243 319 L 538.65210267613 319 L 536.57236482796 319 L 534.49262697979 319 L 532.41288913162 319 L 530.33315128345 319 L 528.25341343528 319 L 526.17367558711 319 L 524.09393773894 319 L 522.01419989077 319 L 519.9344620426 319 L 517.85472419443 319 L 515.77498634626 319 L 513.69524849809 319 L 511.61551064992 319 L 509.53577280175 319 L 507.45603495358 319 L 505.37629710541 319 L 503.29655925724 319 L 501.21682140907 319 L 499.1370835609 319 L 497.05734571273 319 L 494.97760786455 319 L 492.89787001638 319 L 490.81813216821 319 L 488.73839432004 319 L 486.65865647187 319 L 484.5789186237 319 L 482.49918077553 319 L 480.41944292736 319 L 478.33970507919 319 L 476.25996723102 319 L 474.18022938285 319 L 472.10049153468 319 L 470.02075368651 319 L 467.94101583834 319 L 465.86127799017 319 L 463.781540142 319 L 461.70180229383 319 L 459.62206444566 319 L 457.54232659749 319 L 455.46258874932 319 L 453.38285090115 319 L 451.30311305298 319 L 449.22337520481 319 L 447.14363735664 319 L 445.06389950847 319 L 442.98416166029 319 L 440.90442381212 319 L 438.82468596395 319 L 436.74494811578 319 L 434.66521026761 319 L 432.58547241944 319 L 430.50573457127 319 L 428.4259967231 319 L 426.34625887493 319 L 424.26652102676 319 L 422.18678317859 319 L 420.10704533042 319 L 418.02730748225 319 L 415.94756963408 319 L 413.86783178591 319 L 411.78809393774 319 L 409.70835608957 319 L 407.6286182414 319 L 405.54888039323 319 L 403.46914254506 319 L 401.38940469689 319 L 399.30966684872 319 L 397.22992900055 319 L 395.15019115238 319 L 393.07045330421 319 L 390.99071545603 319 L 388.91097760786 319 L 386.83123975969 319 L 384.75150191152 319 L 382.67176406335 319 L 380.59202621518 319 L 378.51228836701 319 L 376.43255051884 319 L 374.35281267067 319 L 372.2730748225 319 L 370.19333697433 319 L 368.11359912616 319 L 366.03386127799 319 L 363.95412342982 319 L 361.87438558165 319 L 359.79464773348 319 L 357.71490988531 319 L 355.63517203714 319 L 353.55543418897 319 L 351.4756963408 319 L 349.39595849263 319 L 347.31622064446 319 L 345.23648279629 319 L 343.15674494812 319 L 341.07700709995 319 L 338.99726925177 319 L 336.9175314036 319 L 334.83779355543 319 L 332.75805570726 319 L 330.67831785909 319 L 328.59858001092 319 L 326.51884216275 319 L 324.43910431458 319 L 322.35936646641 319 L 320.27962861824 319 L 318.19989077007 319 L 316.1201529219 319 L 314.04041507373 319 L 311.96067722556 319 L 309.88093937739 319 L 307.80120152922 319 L 305.72146368105 319 L 303.64172583288 319 L 301.56198798471 319 L 299.48225013654 319 L 297.40251228837 319 L 295.3227744402 319 L 293.24303659203 319 L 291.16329874386 319 L 289.08356089569 319 L 287.00382304752 319 L 284.92408519934 319 L 282.84434735117 319 L 280.764609503 319 L 278.68487165483 319 L 276.60513380666 319 L 274.52539595849 319 L 272.44565811032 319 L 270.36592026215 319 L 268.28618241398 319 L 266.20644456581 319 L 264.12670671764 319 L 262.04696886947 319 L 259.9672310213 319 L 257.88749317313 319 L 255.80775532496 319 L 253.72801747679 319 L 251.64827962862 319 L 249.56854178045 319 L 247.48880393228 319 L 245.40906608411 319 L 243.32932823594 319 L 241.24959038777 319 L 239.1698525396 319 L 237.09011469143 319 L 235.01037684326 319 L 232.93063899508 319 L 230.85090114691 319 L 228.77116329874 319 L 226.69142545057 319 L 224.6116876024 319 L 222.53194975423 319 L 220.45221190606 319 L 218.37247405789 319 L 216.29273620972 319 L 214.21299836155 319 L 212.13326051338 319 L 210.05352266521 319 L 207.97378481704 319 L 205.89404696887 319 L 203.8143091207 319 L 201.73457127253 319 L 199.65483342436 319 L 197.57509557619 319 L 195.49535772802 319 L 193.41561987985 319 L 191.33588203168 319 L 189.25614418351 319 L 187.17640633534 319 L 185.09666848717 319 L 183.016930639 319 L 180.93719279082 319 L 178.85745494265 319 L 176.77771709448 319 L 174.69797924631 319 L 172.61824139814 319 L 170.53850354997 319 L 168.4587657018 319 L 166.37902785363 319 L 164.29929000546 319 L 162.21955215729 319 L 160.13981430912 319 L 158.06007646095 319 L 155.98033861278 319 L 153.90060076461 319 L 151.82086291644 319 L 149.74112506827 319 L 147.6613872201 319 L 145.58164937193 319 L 143.50191152376 319 L 141.42217367559 319 L 139.34243582742 319 L 137.26269797925 319 L 135.18296013108 319 L 133.10322228291 319 L 131.02348443474 319 L 128.94374658656 319 L 126.86400873839 319 L 124.78427089022 319 L 122.70453304205 319 L 120.62479519388 319 L 118.54505734571 319 L 116.46531949754 319 L 114.38558164937 319 L 112.3058438012 319 L 110.22610595303 319 L 108.14636810486 319 L 106.06663025669 319 L 103.98689240852 319 L 101.90715456035 319 L 99.827416712179 319 L 97.747678864009 319 L 95.667941015838 319 L 93.588203167668 319 L 91.508465319498 319 L 89.428727471327 319 L 87.348989623157 319 L 85.269251774986 319 L 83.189513926816 319 L 81.109776078646 319 L 79.030038230475 319 L 76.950300382305 319 L 74.870562534134 319 L 72.790824685964 319 L 70.711086837794 319 L 68.631348989623 319 L 66.551611141453 319 L 64.471873293282 319 L 62.392135445112 319 L 60.312397596942 319 L 58.232659748771 319 L 56.152921900601 319 L 54.07318405243 319 L 51.99344620426 319 L 49.91370835609 319 L 47.833970507919 319 L 45.754232659749 319 L 43.674494811578 319 L 41.594756963408 319 L 39.515019115238 319 L 37.435281267067 319 L 35.355543418897 319 L 33.275805570726 319 L 31.196067722556 319 L 29.116329874386 319 L 27.036592026215 319 L 24.956854178045 319 L 22.877116329874 319 L 20.797378481704 319 L 18.717640633534 319 L 16.637902785363 319 L 14.558164937193 319 L 12.478427089022 319 L 10.398689240852 319 L 8.3189513926816 319 L 6.2392135445112 319 L 4.1594756963408 319 L 2.0797378481704 319 L 0 319\"\n        />\n        <Path\n          fill=\"none\"",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/examples/src/svg/Svg2.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "8ac211c1-ff1c-463b-af48-ef648360ad95",
        "score": 0.015625,
        "payload": {
          "text": "/* eslint-disable jsx-a11y/anchor-is-valid */\n\nimport React from 'react';\nimport {\n  Document,\n  Page,\n  View,\n  Text,\n  Link,\n  Font,\n  StyleSheet,\n} from '@react-pdf/renderer';\n\nconst styles = StyleSheet.create({\n  title: {\n    margin: 20,\n    fontSize: 25,\n    textAlign: 'center',\n    backgroundColor: '#e4e4e4',\n    textTransform: 'uppercase',\n    fontFamily: 'Oswald',\n  },\n  body: {\n    flexGrow: 1,\n  },\n  row: {\n    flexGrow: 1,\n    flexDirection: 'row',\n  },\n  block: {\n    flexGrow: 1,\n  },\n  text: {\n    width: '60%',\n    margin: 10,\n    fontFamily: 'Oswald',\n    textAlign: 'justify',\n  },\n  fill1: {\n    width: '40%',\n    backgroundColor: '#e14427',\n  },\n  fill2: {\n    flexGrow: 2,\n    backgroundColor: '#e6672d',\n  },\n  fill3: {\n    flexGrow: 2,\n    backgroundColor: '#e78632',\n  },\n  fill4: {\n    flexGrow: 2,\n    backgroundColor: '#e29e37',\n  },\n});\n\nFont.register({\n  family: 'Oswald',\n  src: 'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\n});\n\nexport default () => (\n  <Document>\n    <Page size=\"A4\">\n      <Link\n        style={styles.title}\n        src=\"https://es.wikipedia.org/wiki/Lorem_ipsum\"\n      >\n        Lorem Ipsum\n      </Link>\n      <View style={styles.body}>\n        <View style={styles.row}>\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n          <View style={styles.fill1} />\n        </View>\n        <View style={styles.row}>\n          <View style={styles.fill2} />\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n        </View>\n        <View style={styles.row}>\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n          <View style={styles.fill3} />\n        </View>\n      </View>\n    </Page>\n  </Document>\n);\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/examples/src/text/index.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "e9126bb4-0527-4cb1-984e-b5af9c3707c6",
        "score": 0.015384615384615385,
        "payload": {
          "text": "import React from 'react';\nimport { Text, View, StyleSheet } from '@react-pdf/renderer';\n\nconst palette = [\n  '#781c81',\n  '#521b80',\n  '#442f8b',\n  '#3f4c9f',\n  '#4069b4',\n  '#4582c1',\n  '#4e96bd',\n  '#5aa6a9',\n  '#68b090',\n  '#7ab878',\n  '#8dbc64',\n  '#a2be56',\n  '#b7bd4b',\n  '#c9b843',\n  '#d8ae3d',\n  '#e29e37',\n  '#e78632',\n  '#e6672d',\n  '#e14427',\n  '#d92120',\n];\n\nconst styles = StyleSheet.create({\n  row: {\n    flexGrow: 1,\n    width: '100%',\n    flexDirection: 'row',\n  },\n  column: {\n    flexGrow: 1,\n    height: '100%',\n    flexDirection: 'column',\n  },\n  text: {\n    margin: 10,\n    fontSize: 10,\n    color: 'white',\n  },\n});\n\nconst toggle = direction => (direction === 'column' ? 'row' : 'column');\n\nconst Fractal = ({ steps, direction = 'column' }) => {\n  if (steps === 0) {\n    return null;\n  }\n\n  const fractalStyle = {\n    flexGrow: 1,\n    minWidth: 40,\n    minHeight: 40,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: palette[steps % palette.length],\n  };\n\n  return (\n    <View style={styles[direction]}>\n      <Fractal direction={toggle(direction)} steps={steps - 1} />\n      <View style={fractalStyle}>\n        <Text style={styles.text}>{steps}</Text>\n      </View>\n    </View>\n  );\n};\n\nexport default Fractal;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/examples/src/fractals/Fractal.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-1285",
    "model_patch": "diff --git a/index.js b/index.js\n--- a/index.js\n+++ b/index.js\n@@ -65,7 +65,7 @@\n   const toBuffer = async () => {\n     callOnRender();\n     return render();\n-  };\n+  }; \n \n   const toString = async () => {\n     let result = '';",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 120.64,
      "issue_embedding_time_ms": 120.64,
      "retrieval_time_ms_jina": 0.81,
      "retrieval_time_ms": 0.81,
      "total_retrieval_time_ms": 121.45,
      "generation_time_ms": 1424.97,
      "total_io_time_ms": 1546.41,
      "input_total_token_limit": null,
      "issue_text_tokens": 212,
      "vlm_tokens": 0,
      "retrieved_tokens": 5996,
      "prompt_template_tokens": 507,
      "total_input_prompt_tokens": 6715,
      "output_generated_tokens": 74,
      "total_io_tokens": 6789,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nNode DeprecationWarning: Buffer() is deprecated due to security and usability issues. Please use the Buffer.alloc(), Buffer.allocUnsafe(), or Buffer.from() methods instead.\\n**Describe the bug**\\r\\n\\r\\nA depreciation warning about `Buffer()` is shown when a pdf has been rendered. In the future `Node` versions, `Buffer()` will be removed. Which will broke the rendering process.\\r\\n\\r\\n**To Reproduce**\\r\\n\\r\\nHave `Node` `v10.15.3` or more.\\r\\n\\r\\n1. Render a new pdf.\\r\\n2. Open the browser console.\\r\\n3. See the warning.\\r\\n\\r\\n**Screenshots**\\r\\n![Untitled](https://user-images.githubusercontent.com/31422467/57094611-f5917180-6cde-11e9-9274-287aa4778cd8.png)\\r\\n\\r\\n**Desktop:**\\r\\n - OS: Windows\\r\\n - Browser: Chromium (Electron)\\r\\n - @react-pdf/renderer: 1.5.4,\\r\\n - @react-pdf/styled-components: 1.4.0\\n\\n</issue>\\n\\n<code>\\n[start of node.js]\\nimport fs from 'fs';\\nimport * as primitives from '@react-pdf/primitives';\\nimport { pdf, version, Font, StyleSheet } from './index';\\n\\nexport const renderToStream = async element => {\\n  const instance = pdf(element);\\n  const buffer = await instance.toBuffer();\\n  return buffer;\\n};\\n\\nexport const renderToString = element => {\\n  const instance = pdf(element);\\n  return instance.toString();\\n};\\n\\nexport const renderToFile = async (element, filePath, callback) => {\\n  const output = await renderToStream(element);\\n  const stream = fs.createWriteStream(filePath);\\n\\n  output.pipe(stream);\\n\\n  return new Promise((resolve, reject) => {\\n    stream.on('finish', () => {\\n      if (callback) callback(output, filePath);\\n      resolve(output);\\n    });\\n    stream.on('error', reject);\\n  });\\n};\\n\\nconst throwEnvironmentError = name => {\\n  throw new Error(\\n    `${name} is a web specific API. You're either using this component on Node, or your bundler is not loading react-pdf from the appropriate web build.`,\\n  );\\n};\\n\\nexport const usePDF = () => {\\n  throwEnvironmentError('usePDF');\\n};\\n\\nexport const PDFViewer = () => {\\n  throwEnvironmentError('PDFViewer');\\n};\\n\\nexport const PDFDownloadLink = () => {\\n  throwEnvironmentError('PDFDownloadLink');\\n};\\n\\nexport const BlobProvider = () => {\\n  throwEnvironmentError('BlobProvider');\\n};\\n\\nexport const render = renderToFile;\\n\\nexport * from './index';\\n\\nexport * from '@react-pdf/primitives';\\n\\nexport default {\\n  pdf,\\n  Font,\\n  version,\\n  StyleSheet,\\n  PDFViewer,\\n  BlobProvider,\\n  PDFDownloadLink,\\n  renderToStream,\\n  renderToString,\\n  renderToFile,\\n  render,\\n  ...primitives,\\n};\\n\\n[end of node.js]\\n[start of dom.js]\\n/* eslint-disable no-console */\\n/* eslint-disable react/jsx-props-no-spreading */\\n\\nimport * as primitives from '@react-pdf/primitives';\\nimport React, { useEffect, useRef, useState } from 'react';\\n\\nimport { pdf, version, Font, StyleSheet } from './index';\\n\\nconst queue = require('queue');\\n\\nexport const usePDF = ({ document }) => {\\n  const pdfInstance = useRef(null);\\n\\n  const previousUrl = useRef(null);\\n\\n  const [state, setState] = useState({\\n    url: null,\\n    blob: null,\\n    error: null,\\n    loading: false,\\n  });\\n\\n  // Setup rendering queue\\n  useEffect(() => {\\n    const renderQueue = queue({ autostart: true, concurrency: 1 });\\n\\n    const queueDocumentRender = () => {\\n      setState(prev => ({ ...prev, loading: true }));\\n\\n      renderQueue.splice(0, renderQueue.length, () =>\\n        state.error ? Promise.resolve() : pdfInstance.current.toBlob(),\\n      );\\n    };\\n\\n    const onRenderFailed = error => {\\n      console.error(error);\\n      setState(prev => ({ ...prev, error }));\\n    };\\n\\n    const onRenderSuccessful = blob => {\\n      previousUrl.current = state.url;\\n\\n      setState({\\n        blob,\\n        error: null,\\n        loading: false,\\n        url: URL.createObjectURL(blob),\\n      });\\n    };\\n\\n    pdfInstance.current = pdf(null, queueDocumentRender);\\n    pdfInstance.current.updateContainer(document);\\n\\n    renderQueue.on('error', onRenderFailed);\\n    renderQueue.on('success', onRenderSuccessful);\\n\\n    return () => {\\n      renderQueue.end();\\n    };\\n  }, []);\\n\\n  // Revoke old unused url instances\\n  useEffect(() => {\\n    if (previousUrl.current) URL.revokeObjectURL(previousUrl.current);\\n  }, [state.blob]);\\n\\n  const update = () => {\\n    pdfInstance.current.updateContainer(document);\\n  };\\n\\n  return [state, update];\\n};\\n\\nexport const BlobProvider = ({ document: doc, children }) => {\\n  const [instance, updateInstance] = usePDF({ document });\\n\\n  useEffect(updateInstance, [doc]);\\n\\n  if (!doc) {\\n    console.warn('You should pass a valid document to BlobProvider');\\n    return null;\\n  }\\n\\n  return children(instance);\\n};\\n\\nexport const PDFViewer = ({\\n  title,\\n  style,\\n  className,\\n  children,\\n  innerRef,\\n  ...props\\n}) => {\\n  const [instance, updateInstance] = usePDF({ document: children });\\n\\n  useEffect(updateInstance, [children]);\\n\\n  return (\\n    <iframe\\n      title={title}\\n      ref={innerRef}\\n      style={style}\\n      src={instance.url}\\n      className={className}\\n      {...props}\\n    />\\n  );\\n};\\n\\nexport const PDFDownloadLink = ({\\n  style,\\n  children,\\n  className,\\n  document: doc,\\n  fileName = 'document.pdf',\\n}) => {\\n  const [instance, updateInstance] = usePDF({ document: doc });\\n\\n  useEffect(updateInstance, [children]);\\n\\n  if (!doc) {\\n    console.warn('You should pass a valid document to PDFDownloadLink');\\n    return null;\\n  }\\n\\n  const handleDownloadIE = () => {\\n    if (window.navigator.msSaveBlob) {\\n      // IE\\n      window.navigator.msSaveBlob(instance.blob, fileName);\\n    }\\n  };\\n\\n  return (\\n    <a\\n      style={style}\\n      href={instance.url}\\n      download={fileName}\\n      className={className}\\n      onClick={handleDownloadIE}\\n    >\\n      {typeof children === 'function' ? children(instance) : children}\\n    </a>\\n  );\\n};\\n\\nconst throwEnvironmentError = name => {\\n  throw new Error(\\n    `${name} is a Node specific API. You're either using this method in a browser, or your bundler is not loading react-pdf from the appropriate web build.`,\\n  );\\n};\\n\\nexport const renderToStream = () => {\\n  throwEnvironmentError('renderToStream');\\n};\\n\\nexport const renderToString = () => {\\n  throwEnvironmentError('renderToString');\\n};\\n\\nexport const renderToFile = () => {\\n  throwEnvironmentError('renderToFile');\\n};\\n\\nexport const render = () => {\\n  throwEnvironmentError('render');\\n};\\n\\nexport * from './index';\\n\\nexport * from '@react-pdf/primitives';\\n\\nexport default {\\n  pdf,\\n  usePDF,\\n  Font,\\n  version,\\n  StyleSheet,\\n  PDFViewer,\\n  BlobProvider,\\n  PDFDownloadLink,\\n  renderToStream,\\n  renderToString,\\n  renderToFile,\\n  render,\\n  ...primitives,\\n};\\n\\n[end of dom.js]\\n[start of index.js]\\nimport BlobStream from 'blob-stream';\\nimport FontStore from '@react-pdf/font';\\nimport renderPDF from '@react-pdf/render';\\nimport PDFDocument from '@react-pdf/pdfkit';\\nimport layoutDocument from '@react-pdf/layout';\\n\\nimport createRenderer from './renderer';\\nimport { version } from '../package.json';\\n\\nconst fontStore = new FontStore();\\n\\nconst pdf = (initialValue, onChange) => {\\n  const container = { type: 'ROOT', document: null };\\n  const renderer = createRenderer({ onChange });\\n  const mountNode = renderer.createContainer(container);\\n\\n  const updateContainer = doc => {\\n    renderer.updateContainer(doc, mountNode, null);\\n  };\\n\\n  if (initialValue) updateContainer(initialValue);\\n\\n  const render = async () => {\\n    const ctx = new PDFDocument({ autoFirstPage: false });\\n    const layout = await layoutDocument(container.document, fontStore);\\n    return renderPDF(ctx, layout);\\n  };\\n\\n  const callOnRender = (params = {}) => {\\n    if (container.document.props.onRender) {\\n      container.document.props.onRender(params);\\n    }\\n  };\\n\\n  const toBlob = async () => {\\n    const instance = await render();\\n    const stream = instance.pipe(BlobStream());\\n\\n    return new Promise((resolve, reject) => {\\n      stream.on('finish', () => {\\n        try {\\n          const blob = stream.toBlob('application/pdf');\\n          callOnRender({ blob });\\n          resolve(blob);\\n        } catch (error) {\\n          reject(error);\\n        }\\n      });\\n\\n      stream.on('error', reject);\\n    });\\n  };\\n\\n  const toBuffer = async () => {\\n    callOnRender();\\n    return render();\\n  };\\n\\n  const toString = async () => {\\n    let result = '';\\n    const instance = await render();\\n\\n    return new Promise((resolve, reject) => {\\n      try {\\n        instance.on('data', buffer => {\\n          result += buffer;\\n        });\\n\\n        instance.on('end', () => {\\n          callOnRender();\\n          resolve(result);\\n        });\\n      } catch (error) {\\n        reject(error);\\n      }\\n    });\\n  };\\n\\n  return {\\n    container,\\n    toBlob,\\n    toBuffer,\\n    toString,\\n    updateContainer,\\n  };\\n};\\n\\nconst Font = fontStore;\\n\\nconst StyleSheet = {\\n  create: s => s,\\n};\\n\\nexport { version, Font, StyleSheet, pdf, createRenderer };\\n\\n[end of index.js]\\n[start of bug_report.md]\\n---\\nname: Bug report\\nabout: Create a report to help us improve\\ntitle: ''\\nlabels: ''\\nassignees: ''\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior including code snippet (if applies):\\n1. Go to '...'\\n2. Click on '....'\\n3. Scroll down to '....'\\n4. See error\\n\\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n**Screenshots**\\nIf applicable, add screenshots to help explain your problem.\\n\\n**Desktop (please complete the following information):**\\n - OS: [e.g. MacOS, Windows]\\n - Browser [e.g. chrome, safari]\\n - React-pdf version [e.g. v1.1.0]\\n\\n<!-- Love react-pdf? Please consider supporting our collective:\\n\\ud83d\\udc49  https://opencollective.com/react-pdf/donate -->\\n\\n[end of bug_report.md]\\n[start of index.d.ts]\\ndeclare module '@react-pdf/renderer' {\\n  import * as React from 'react';\\n  import {\\n    Style,\\n    PageSize,\\n    FontStore,\\n    Orientation,\\n    SourceObject,\\n    HyphenationCallback,\\n    SVGPresentationAttributes,\\n  } from '@react-pdf/types';\\n\\n  namespace ReactPDF {\\n    interface Styles {\\n      [key: string]: Style;\\n    }\\n\\n    interface OnRenderProps {\\n      blob?: Blob;\\n    }\\n\\n    interface DocumentProps {\\n      title?: string;\\n      author?: string;\\n      subject?: string;\\n      keywords?: string;\\n      creator?: string;\\n      producer?: string;\\n      onRender?: (props: OnRenderProps) => any;\\n    }\\n\\n    /**\\n     * This component represent the PDF document itself. It must be the root\\n     * of your tree element structure, and under no circumstances should it be\\n     * used as children of another react-pdf component. In addition, it should\\n     * only have childs of type <Page />.\\n     */\\n    class Document extends React.Component<DocumentProps> {}\\n\\n    interface NodeProps {\\n      id?: string;\\n      style?: Style | Style[];\\n      /**\\n       * Render component in all wrapped pages.\\n       * @see https://react-pdf.org/advanced#fixed-components\\n       */\\n      fixed?: boolean;\\n      /**\\n       * Force the wrapping algorithm to start a new page when rendering the\\n       * element.\\n       * @see https://react-pdf.org/advanced#page-breaks\\n       */\\n      break?: boolean;\\n      /**\\n       * Hint that no page wrapping should occur between all sibling elements following the element within n points\\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\\n       */\\n      minPresenceAhead?: number;\\n    }\\n\\n    interface PageProps extends NodeProps {\\n      /**\\n       * Enable page wrapping for this page.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      size?: PageSize;\\n      orientation?: Orientation;\\n    }\\n\\n    /**\\n     * Represents single page inside the PDF document, or a subset of them if\\n     * using the wrapping feature. A <Document /> can contain as many pages as\\n     * you want, but ensure not rendering a page inside any component besides\\n     * Document.\\n     */\\n    class Page extends React.Component<PageProps> {}\\n\\n    interface ViewProps extends NodeProps {\\n      id?: string;\\n      /**\\n       * Enable/disable page wrapping for element.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      render?: (props: {\\n        pageNumber: number;\\n        subPageNumber: number;\\n      }) => React.ReactNode;\\n      children?: React.ReactNode;\\n      id?: string;\\n    }\\n\\n    /**\\n     * The most fundamental component for building a UI and is designed to be\\n     * nested inside other views and can have 0 to many children.\\n     */\\n    class View extends React.Component<ViewProps> {}\\n\\n    interface BaseImageProps extends NodeProps {\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      cache?: boolean;\\n    }\\n\\n    interface ImageWithSrcProp extends BaseImageProps {\\n      src: SourceObject;\\n    }\\n\\n    interface ImageWithSourceProp extends BaseImageProps {\\n      source: SourceObject;\\n    }\\n\\n    type ImageProps = ImageWithSrcProp | ImageWithSourceProp;\\n\\n    /**\\n     * A React component for displaying network or local (Node only) JPG or\\n     * PNG images, as well as base64 encoded image strings.\\n     */\\n    class Image extends React.Component<ImageProps> {}\\n\\n    interface TextProps extends NodeProps {\\n      id?: string;\\n      /**\\n       * Enable/disable page wrapping for element.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      render?: (props: {\\n        pageNumber: number;\\n        totalPages: number;\\n        subPageNumber: number;\\n        subPageTotalPages: number;\\n      }) => React.ReactNode;\\n      children?: React.ReactNode;\\n      id?: string;\\n      /**\\n       * Override the default hyphenation-callback\\n       * @see https://react-pdf.org/fonts#registerhyphenationcallback\\n       */\\n      hyphenationCallback?: HyphenationCallback;\\n      /**\\n       * Specifies the minimum number of lines in a text element that must be shown at the bottom of a page or its container.\\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\\n       */\\n      orphans?: number;\\n      /**\\n       * Specifies the minimum number of lines in a text element that must be shown at the top of a page or its container..\\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\\n       */\\n      widows?: number;\\n    }\\n\\n    interface SVGTextProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      x: string | number;\\n      y: string | number;\\n      /**\\n       * Override the default hyphenation-callback\\n       * @see https://react-pdf.org/fonts#registerhyphenationcallback\\n       */\\n      hyphenationCallback?: HyphenationCallback;\\n    }\\n\\n    /**\\n     * A React component for displaying text. Text supports nesting of other\\n     * Text or Link components to create inline styling.\\n     */\\n    class Text extends React.Component<TextProps | SVGTextProps> {}\\n\\n    interface LinkProps extends NodeProps {\\n      /**\\n       * Enable/disable page wrapping for element.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      src: string;\\n      children?: React.ReactNode;\\n    }\\n\\n    /**\\n     * A React component for displaying a hyperlink. Link\\u2019s can be nested\\n     * inside a Text component, or being inside any other valid primitive.\\n     */\\n    class Link extends React.Component<LinkProps> {}\\n\\n    interface NoteProps extends NodeProps {\\n      children: string;\\n    }\\n\\n    class Note extends React.Component<NoteProps> {}\\n\\n    interface CanvasProps extends NodeProps {\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      paint: (\\n        painter: any,\\n        availableWidth: number,\\n        availableHeight: number,\\n      ) => null;\\n    }\\n\\n    class Canvas extends React.Component<CanvasProps> {}\\n\\n    interface SVGProps extends NodeProps {\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      width?: string | number;\\n      height?: string | number;\\n      viewBox?: string;\\n      preserveAspectRatio?: string;\\n    }\\n\\n    /**\\n     * The <SVG /> element is a container that defines a new coordinate system and viewport. It is used as the outermost element of SVG documents.\\n     */\\n    class Svg extends React.Component<SVGProps> {}\\n\\n    interface LineProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      x1: string | number;\\n      x2: string | number;\\n      y1: string | number;\\n      y2: string | number;\\n    }\\n\\n    /**\\n     * The <Line /> element is used to create a line.\\n     */\\n    class Line extends React.Component<LineProps> {}\\n\\n    interface PolylineProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      points: string;\\n    }\\n\\n    /**\\n     * The <Polyline /> element is used to create any shape that consists of only straight lines (that is connected at several points).\\n     */\\n    class Polyline extends React.Component<PolylineProps> {}\\n\\n    interface PolygonProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      points: string;\\n    }\\n\\n    /**\\n     * The <Polygon /> element is used to create a graphic that contains at least three sides.\\n     * Polygons are made of straight lines, and the shape is \\\"closed\\\" (all the lines connect up).\\n     */\\n    class Polygon extends React.Component<PolygonProps> {}\\n\\n    interface PathProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      d: string;\\n    }\\n\\n    /**\\n     * The <Path /> element is the most powerful element in the SVG library of basic shapes. It can be used to create lines, curves, arcs, and more.\\n     */\\n    class Path extends React.Component<PathProps> {}\\n\\n    interface RectProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      x: string | number;\\n      y: string | number;\\n      width: string | number;\\n      height: string | number;\\n      rx?: string | number;\\n      ry?: string | number;\\n    }\\n\\n    /**\\n     * The <Rect /> element is used to create a rectangle and variations of a rectangle shape.\\n     */\\n    class Rect extends React.Component<RectProps> {}\\n\\n    interface CircleProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      cx: string | number;\\n      cy: string | number;\\n      r: string | number;\\n    }\\n\\n    /**\\n     * The <Circle /> element is used to create a circle.\\n     */\\n    class Circle extends React.Component<CircleProps> {}\\n\\n    interface EllipseProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      cx: string | number;\\n      cy: string | number;\\n      rx: string | number;\\n      ry: string | number;\\n    }\\n\\n    /**\\n     * The <Ellipse /> element is used to create an ellipse.\\n     * An ellipse is closely related to a circle. The difference is that an ellipse has an x and a y radius that differs from each other, while a circle has equal x and y radius.\\n     */\\n    class Ellipse extends React.Component<EllipseProps> {}\\n\\n    interface GProps extends SVGPresentationAttributes {}\\n\\n    /**\\n     * The <G /> SVG element is a container used to group other SVG elements.\\n     * Transformations applied to the <G /> element are performed on its child elements, and its attributes are inherited by its children.\\n     */\\n    class G extends React.Component<GProps> {}\\n\\n    interface StopProps {\\n      offset: string | number;\\n      stopColor: string;\\n      stopOpacity?: string | number;\\n    }\\n\\n    /**\\n     * The SVG <Stop /> element defines a color and its position to use on a gradient. This element is always a child of a <LinearGradient /> or <RadialGradient /> element\\n     */\\n    class Stop extends React.Component<StopProps> {}\\n\\n    interface DefsProps {}\\n\\n    /**\\n     * The <Defs /> element is used to store graphical objects that will be used at a later time. Objects created inside a <Defs /> element are not rendered directly. To display them you have to reference them\\n     */\\n    class Defs extends React.Component<DefsProps> {}\\n\\n    interface ClipPathProps {\\n      id?: string;\\n    }\\n\\n    /**\\n     * The <ClipPath /> SVG element defines a clipping path, to be used by the clipPath property.\\n     * A clipping path restricts the region to which paint can be applied. Conceptually, parts of the drawing that lie outside of the region bounded by the clipping path are not drawn.\\n     */\\n    class ClipPath extends React.Component<ClipPathProps> {}\\n\\n    interface LinearGradientProps {\\n      x1: string | number;\\n      x2: string | number;\\n      y1: string | number;\\n      y2: string | number;\\n    }\\n\\n    /**\\n     * The <LinearGradient /> element lets authors define linear gradients that can be applied to fill or stroke of graphical elements.\\n     */\\n    class LinearGradient extends React.Component<LinearGradientProps> {}\\n\\n    interface RadialGradientProps {\\n      cx: string | number;\\n      cy: string | number;\\n      fr: string | number;\\n      fx: string | number;\\n      fy: string | number;\\n    }\\n\\n    /**\\n     * The <RadialGradient /> element lets authors define radial gradients that can be applied to fill or stroke of graphical elements.\\n     */\\n    class RadialGradient extends React.Component<RadialGradientProps> {}\\n\\n    interface BlobProviderParams {\\n      blob: Blob | null;\\n      url: string | null;\\n      loading: boolean;\\n      error: Error | null;\\n    }\\n    interface BlobProviderProps {\\n      document: React.ReactElement<DocumentProps>;\\n      children: (params: BlobProviderParams) => React.ReactNode;\\n    }\\n\\n    /**\\n     * Easy and declarative way of getting document's blob data without\\n     * showing it on screen.\\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\\n     * @platform web\\n     */\\n    class BlobProvider extends React.Component<BlobProviderProps> {}\\n\\n    interface PDFViewerProps {\\n      width?: number | string;\\n      height?: number | string;\\n      style?: Style | Style[];\\n      className?: string;\\n      children?: React.ReactElement<DocumentProps>;\\n      innerRef?: React.Ref<HTMLIFrameElement>;\\n    }\\n\\n    /**\\n     * Iframe PDF viewer for client-side generated documents.\\n     * @platform web\\n     */\\n    class PDFViewer extends React.Component<PDFViewerProps> {}\\n\\n    interface PDFDownloadLinkProps {\\n      document: React.ReactElement<DocumentProps>;\\n      fileName?: string;\\n      style?: Style | Style[];\\n      className?: string;\\n      children?:\\n        | React.ReactNode\\n        | ((params: BlobProviderParams) => React.ReactNode);\\n    }\\n\\n    /**\\n     * Anchor tag to enable generate and download PDF documents on the fly.\\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\\n     * @platform web\\n     */\\n    class PDFDownloadLink extends React.Component<PDFDownloadLinkProps> {}\\n\\n    interface UsePDFInstance {\\n      loading: boolean;\\n      blob: Blob | null;\\n      url: string | null;\\n      error: string | null;\\n    }\\n\\n    /**\\n     * React hook for creating and updating a PDF document instance\\n     * @platform web\\n     */\\n    function usePDF(options: {\\n      document: React.ReactElement<DocumentProps>;\\n    }): [UsePDFInstance, () => void];\\n\\n    const Font: FontStore;\\n\\n    const StyleSheet: {\\n      hairlineWidth: number;\\n      create: <T extends Styles>(styles: T) => T;\\n      resolve: (\\n        style: Style,\\n        container: {\\n          width: number;\\n          height: number;\\n          orientation: Orientation;\\n        },\\n      ) => Style;\\n      flatten: (...styles: (Style[] | Style | undefined)[]) => Style;\\n      absoluteFillObject: {\\n        position: 'absolute';\\n        left: 0;\\n        right: 0;\\n        top: 0;\\n        bottom: 0;\\n      };\\n    };\\n\\n    const version: any;\\n\\n    const PDFRenderer: any;\\n\\n    const pdf: (\\n      initialValue?: React.ReactElement<DocumentProps>,\\n      onChange?: () => {},\\n    ) => {\\n      container: any;\\n      isDirty: () => boolean;\\n      updateContainer: (document: React.ReactElement<any>) => void;\\n      toBuffer: () => Promise<NodeJS.ReadableStream>;\\n      toBlob: () => Promise<Blob>;\\n      toString: () => string;\\n    };\\n\\n    const renderToStream: (\\n      document: React.ReactElement<DocumentProps>,\\n    ) => Promise<NodeJS.ReadableStream>;\\n\\n    const renderToString: (\\n      document: React.ReactElement<DocumentProps>,\\n    ) => string;\\n\\n    const renderToFile: (\\n      document: React.ReactElement<DocumentProps>,\\n      filePath: string,\\n      callback?: (output: NodeJS.ReadableStream, filePath: string) => any,\\n    ) => Promise<NodeJS.ReadableStream>;\\n\\n    const render: typeof renderToFile;\\n  }\\n\\n  const pdf: typeof ReactPDF.pdf;\\n  const Document: typeof ReactPDF.Document;\\n  const Page: typeof ReactPDF.Page;\\n  const View: typeof ReactPDF.View;\\n  const Image: typeof ReactPDF.Image;\\n  const Text: typeof ReactPDF.Text;\\n  const Canvas: typeof ReactPDF.Canvas;\\n  const Link: typeof ReactPDF.Link;\\n  const Note: typeof ReactPDF.Note;\\n  const Svg: typeof ReactPDF.Svg;\\n  const Line: typeof ReactPDF.Line;\\n  const Polyline: typeof ReactPDF.Polyline;\\n  const Polygon: typeof ReactPDF.Polygon;\\n  const Path: typeof ReactPDF.Path;\\n  const Rect: typeof ReactPDF.Rect;\\n  const Circle: typeof ReactPDF.Circle;\\n  const Ellipse: typeof ReactPDF.Ellipse;\\n  const G: typeof ReactPDF.G;\\n  const Stop: typeof ReactPDF.Stop;\\n  const Defs: typeof ReactPDF.Defs;\\n  const ClipPath: typeof ReactPDF.ClipPath;\\n  const LinearGradient: typeof ReactPDF.LinearGradient;\\n  const RadialGradient: typeof ReactPDF.RadialGradient;\\n  const Font: typeof ReactPDF.Font;\\n  const StyleSheet: typeof ReactPDF.StyleSheet;\\n  const PDFRenderer: typeof ReactPDF.PDFRenderer;\\n  const version: typeof ReactPDF.version;\\n  const renderToFile: typeof ReactPDF.renderToFile;\\n  const renderToString: typeof ReactPDF.renderToString;\\n  const renderToStream: typeof ReactPDF.renderToStream;\\n  const usePDF: typeof ReactPDF.usePDF;\\n  const PDFViewer: typeof ReactPDF.PDFViewer;\\n  const BlobProvider: typeof ReactPDF.BlobProvider;\\n  const PDFDownloadLink: typeof ReactPDF.PDFDownloadLink;\\n\\n  export default ReactPDF;\\n\\n  export {\\n    pdf,\\n    Document,\\n    Page,\\n    View,\\n    Image,\\n    Text,\\n    Canvas,\\n    Link,\\n    Note,\\n    Svg,\\n    Line,\\n    Polyline,\\n    Polygon,\\n    Path,\\n    Rect,\\n    Circle,\\n    Ellipse,\\n    G,\\n    Stop,\\n    Defs,\\n    ClipPath,\\n    LinearGradient,\\n    RadialGradient,\\n    Font,\\n    StyleSheet,\\n    PDFRenderer,\\n    version,\\n    renderToFile,\\n    renderToStream,\\n    renderToString,\\n    usePDF,\\n    PDFViewer,\\n    BlobProvider,\\n    PDFDownloadLink,\\n  };\\n}\\n\\n[end of index.d.ts]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "node.js",
        "dom.js",
        "index.js",
        "bug_report.md",
        "index.d.ts"
      ]
    },
    "retrieved_documents": [
      {
        "id": "4ee4d19f-07e5-4f28-9298-9aec9a0613d1",
        "score": 0.01639344262295082,
        "payload": {
          "text": "import fs from 'fs';\nimport * as primitives from '@react-pdf/primitives';\nimport { pdf, version, Font, StyleSheet } from './index';\n\nexport const renderToStream = async element => {\n  const instance = pdf(element);\n  const buffer = await instance.toBuffer();\n  return buffer;\n};\n\nexport const renderToString = element => {\n  const instance = pdf(element);\n  return instance.toString();\n};\n\nexport const renderToFile = async (element, filePath, callback) => {\n  const output = await renderToStream(element);\n  const stream = fs.createWriteStream(filePath);\n\n  output.pipe(stream);\n\n  return new Promise((resolve, reject) => {\n    stream.on('finish', () => {\n      if (callback) callback(output, filePath);\n      resolve(output);\n    });\n    stream.on('error', reject);\n  });\n};\n\nconst throwEnvironmentError = name => {\n  throw new Error(\n    `${name} is a web specific API. You're either using this component on Node, or your bundler is not loading react-pdf from the appropriate web build.`,\n  );\n};\n\nexport const usePDF = () => {\n  throwEnvironmentError('usePDF');\n};\n\nexport const PDFViewer = () => {\n  throwEnvironmentError('PDFViewer');\n};\n\nexport const PDFDownloadLink = () => {\n  throwEnvironmentError('PDFDownloadLink');\n};\n\nexport const BlobProvider = () => {\n  throwEnvironmentError('BlobProvider');\n};\n\nexport const render = renderToFile;\n\nexport * from './index';\n\nexport * from '@react-pdf/primitives';\n\nexport default {\n  pdf,\n  Font,\n  version,\n  StyleSheet,\n  PDFViewer,\n  BlobProvider,\n  PDFDownloadLink,\n  renderToStream,\n  renderToString,\n  renderToFile,\n  render,\n  ...primitives,\n};\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/renderer/src/node.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "d0fe8628-a90b-448d-b11c-76cca2a4198c",
        "score": 0.016129032258064516,
        "payload": {
          "text": "/* eslint-disable no-console */\n/* eslint-disable react/jsx-props-no-spreading */\n\nimport * as primitives from '@react-pdf/primitives';\nimport React, { useEffect, useRef, useState } from 'react';\n\nimport { pdf, version, Font, StyleSheet } from './index';\n\nconst queue = require('queue');\n\nexport const usePDF = ({ document }) => {\n  const pdfInstance = useRef(null);\n\n  const previousUrl = useRef(null);\n\n  const [state, setState] = useState({\n    url: null,\n    blob: null,\n    error: null,\n    loading: false,\n  });\n\n  // Setup rendering queue\n  useEffect(() => {\n    const renderQueue = queue({ autostart: true, concurrency: 1 });\n\n    const queueDocumentRender = () => {\n      setState(prev => ({ ...prev, loading: true }));\n\n      renderQueue.splice(0, renderQueue.length, () =>\n        state.error ? Promise.resolve() : pdfInstance.current.toBlob(),\n      );\n    };\n\n    const onRenderFailed = error => {\n      console.error(error);\n      setState(prev => ({ ...prev, error }));\n    };\n\n    const onRenderSuccessful = blob => {\n      previousUrl.current = state.url;\n\n      setState({\n        blob,\n        error: null,\n        loading: false,\n        url: URL.createObjectURL(blob),\n      });\n    };\n\n    pdfInstance.current = pdf(null, queueDocumentRender);\n    pdfInstance.current.updateContainer(document);\n\n    renderQueue.on('error', onRenderFailed);\n    renderQueue.on('success', onRenderSuccessful);\n\n    return () => {\n      renderQueue.end();\n    };\n  }, []);\n\n  // Revoke old unused url instances\n  useEffect(() => {\n    if (previousUrl.current) URL.revokeObjectURL(previousUrl.current);\n  }, [state.blob]);\n\n  const update = () => {\n    pdfInstance.current.updateContainer(document);\n  };\n\n  return [state, update];\n};\n\nexport const BlobProvider = ({ document: doc, children }) => {\n  const [instance, updateInstance] = usePDF({ document });\n\n  useEffect(updateInstance, [doc]);\n\n  if (!doc) {\n    console.warn('You should pass a valid document to BlobProvider');\n    return null;\n  }\n\n  return children(instance);\n};\n\nexport const PDFViewer = ({\n  title,\n  style,\n  className,\n  children,\n  innerRef,\n  ...props\n}) => {\n  const [instance, updateInstance] = usePDF({ document: children });\n\n  useEffect(updateInstance, [children]);\n\n  return (\n    <iframe\n      title={title}\n      ref={innerRef}\n      style={style}\n      src={instance.url}\n      className={className}\n      {...props}\n    />\n  );\n};\n\nexport const PDFDownloadLink = ({\n  style,\n  children,\n  className,\n  document: doc,\n  fileName = 'document.pdf',\n}) => {\n  const [instance, updateInstance] = usePDF({ document: doc });\n\n  useEffect(updateInstance, [children]);\n\n  if (!doc) {\n    console.warn('You should pass a valid document to PDFDownloadLink');\n    return null;\n  }\n\n  const handleDownloadIE = () => {\n    if (window.navigator.msSaveBlob) {\n      // IE\n      window.navigator.msSaveBlob(instance.blob, fileName);\n    }\n  };\n\n  return (\n    <a\n      style={style}\n      href={instance.url}\n      download={fileName}\n      className={className}\n      onClick={handleDownloadIE}\n    >\n      {typeof children === 'function' ? children(instance) : children}\n    </a>\n  );\n};\n\nconst throwEnvironmentError = name => {\n  throw new Error(\n    `${name} is a Node specific API. You're either using this method in a browser, or your bundler is not loading react-pdf from the appropriate web build.`,\n  );\n};\n\nexport const renderToStream = () => {\n  throwEnvironmentError('renderToStream');\n};\n\nexport const renderToString = () => {\n  throwEnvironmentError('renderToString');\n};\n\nexport const renderToFile = () => {\n  throwEnvironmentError('renderToFile');\n};\n\nexport const render = () => {\n  throwEnvironmentError('render');\n};\n\nexport * from './index';\n\nexport * from '@react-pdf/primitives';\n\nexport default {\n  pdf,\n  usePDF,\n  Font,\n  version,\n  StyleSheet,\n  PDFViewer,\n  BlobProvider,\n  PDFDownloadLink,\n  renderToStream,\n  renderToString,\n  renderToFile,\n  render,\n  ...primitives,\n};\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/renderer/src/dom.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "9c3a5498-902b-4d14-9d6e-e7418298cf22",
        "score": 0.015873015873015872,
        "payload": {
          "text": "import BlobStream from 'blob-stream';\nimport FontStore from '@react-pdf/font';\nimport renderPDF from '@react-pdf/render';\nimport PDFDocument from '@react-pdf/pdfkit';\nimport layoutDocument from '@react-pdf/layout';\n\nimport createRenderer from './renderer';\nimport { version } from '../package.json';\n\nconst fontStore = new FontStore();\n\nconst pdf = (initialValue, onChange) => {\n  const container = { type: 'ROOT', document: null };\n  const renderer = createRenderer({ onChange });\n  const mountNode = renderer.createContainer(container);\n\n  const updateContainer = doc => {\n    renderer.updateContainer(doc, mountNode, null);\n  };\n\n  if (initialValue) updateContainer(initialValue);\n\n  const render = async () => {\n    const ctx = new PDFDocument({ autoFirstPage: false });\n    const layout = await layoutDocument(container.document, fontStore);\n    return renderPDF(ctx, layout);\n  };\n\n  const callOnRender = (params = {}) => {\n    if (container.document.props.onRender) {\n      container.document.props.onRender(params);\n    }\n  };\n\n  const toBlob = async () => {\n    const instance = await render();\n    const stream = instance.pipe(BlobStream());\n\n    return new Promise((resolve, reject) => {\n      stream.on('finish', () => {\n        try {\n          const blob = stream.toBlob('application/pdf');\n          callOnRender({ blob });\n          resolve(blob);\n        } catch (error) {\n          reject(error);\n        }\n      });\n\n      stream.on('error', reject);\n    });\n  };\n\n  const toBuffer = async () => {\n    callOnRender();\n    return render();\n  };\n\n  const toString = async () => {\n    let result = '';\n    const instance = await render();\n\n    return new Promise((resolve, reject) => {\n      try {\n        instance.on('data', buffer => {\n          result += buffer;\n        });\n\n        instance.on('end', () => {\n          callOnRender();\n          resolve(result);\n        });\n      } catch (error) {\n        reject(error);\n      }\n    });\n  };\n\n  return {\n    container,\n    toBlob,\n    toBuffer,\n    toString,\n    updateContainer,\n  };\n};\n\nconst Font = fontStore;\n\nconst StyleSheet = {\n  create: s => s,\n};\n\nexport { version, Font, StyleSheet, pdf, createRenderer };\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/renderer/src/index.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "62ec4b36-1585-49a0-895a-0ef0f44bd44e",
        "score": 0.015625,
        "payload": {
          "text": "---\nname: Bug report\nabout: Create a report to help us improve\ntitle: ''\nlabels: ''\nassignees: ''\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior including code snippet (if applies):\n1. Go to '...'\n2. Click on '....'\n3. Scroll down to '....'\n4. See error\n\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n\n**Screenshots**\nIf applicable, add screenshots to help explain your problem.\n\n**Desktop (please complete the following information):**\n - OS: [e.g. MacOS, Windows]\n - Browser [e.g. chrome, safari]\n - React-pdf version [e.g. v1.1.0]\n\n<!-- Love react-pdf? Please consider supporting our collective:\n\ud83d\udc49  https://opencollective.com/react-pdf/donate -->\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/.github/ISSUE_TEMPLATE/bug_report.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "0337b7eb-280b-42d4-99bd-6b34d7a62963",
        "score": 0.015384615384615385,
        "payload": {
          "text": "declare module '@react-pdf/renderer' {\n  import * as React from 'react';\n  import {\n    Style,\n    PageSize,\n    FontStore,\n    Orientation,\n    SourceObject,\n    HyphenationCallback,\n    SVGPresentationAttributes,\n  } from '@react-pdf/types';\n\n  namespace ReactPDF {\n    interface Styles {\n      [key: string]: Style;\n    }\n\n    interface OnRenderProps {\n      blob?: Blob;\n    }\n\n    interface DocumentProps {\n      title?: string;\n      author?: string;\n      subject?: string;\n      keywords?: string;\n      creator?: string;\n      producer?: string;\n      onRender?: (props: OnRenderProps) => any;\n    }\n\n    /**\n     * This component represent the PDF document itself. It must be the root\n     * of your tree element structure, and under no circumstances should it be\n     * used as children of another react-pdf component. In addition, it should\n     * only have childs of type <Page />.\n     */\n    class Document extends React.Component<DocumentProps> {}\n\n    interface NodeProps {\n      id?: string;\n      style?: Style | Style[];\n      /**\n       * Render component in all wrapped pages.\n       * @see https://react-pdf.org/advanced#fixed-components\n       */\n      fixed?: boolean;\n      /**\n       * Force the wrapping algorithm to start a new page when rendering the\n       * element.\n       * @see https://react-pdf.org/advanced#page-breaks\n       */\n      break?: boolean;\n      /**\n       * Hint that no page wrapping should occur between all sibling elements following the element within n points\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\n       */\n      minPresenceAhead?: number;\n    }\n\n    interface PageProps extends NodeProps {\n      /**\n       * Enable page wrapping for this page.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      size?: PageSize;\n      orientation?: Orientation;\n    }\n\n    /**\n     * Represents single page inside the PDF document, or a subset of them if\n     * using the wrapping feature. A <Document /> can contain as many pages as\n     * you want, but ensure not rendering a page inside any component besides\n     * Document.\n     */\n    class Page extends React.Component<PageProps> {}\n\n    interface ViewProps extends NodeProps {\n      id?: string;\n      /**\n       * Enable/disable page wrapping for element.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      render?: (props: {\n        pageNumber: number;\n        subPageNumber: number;\n      }) => React.ReactNode;\n      children?: React.ReactNode;\n      id?: string;\n    }\n\n    /**\n     * The most fundamental component for building a UI and is designed to be\n     * nested inside other views and can have 0 to many children.\n     */\n    class View extends React.Component<ViewProps> {}\n\n    interface BaseImageProps extends NodeProps {\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      cache?: boolean;\n    }\n\n    interface ImageWithSrcProp extends BaseImageProps {\n      src: SourceObject;\n    }\n\n    interface ImageWithSourceProp extends BaseImageProps {\n      source: SourceObject;\n    }\n\n    type ImageProps = ImageWithSrcProp | ImageWithSourceProp;\n\n    /**\n     * A React component for displaying network or local (Node only) JPG or\n     * PNG images, as well as base64 encoded image strings.\n     */\n    class Image extends React.Component<ImageProps> {}\n\n    interface TextProps extends NodeProps {\n      id?: string;\n      /**\n       * Enable/disable page wrapping for element.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      render?: (props: {\n        pageNumber: number;\n        totalPages: number;\n        subPageNumber: number;\n        subPageTotalPages: number;\n      }) => React.ReactNode;\n      children?: React.ReactNode;\n      id?: string;\n      /**\n       * Override the default hyphenation-callback\n       * @see https://react-pdf.org/fonts#registerhyphenationcallback\n       */\n      hyphenationCallback?: HyphenationCallback;\n      /**\n       * Specifies the minimum number of lines in a text element that must be shown at the bottom of a page or its container.\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\n       */\n      orphans?: number;\n      /**\n       * Specifies the minimum number of lines in a text element that must be shown at the top of a page or its container..\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\n       */\n      widows?: number;\n    }\n\n    interface SVGTextProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      x: string | number;\n      y: string | number;\n      /**\n       * Override the default hyphenation-callback\n       * @see https://react-pdf.org/fonts#registerhyphenationcallback\n       */\n      hyphenationCallback?: HyphenationCallback;\n    }\n\n    /**\n     * A React component for displaying text. Text supports nesting of other\n     * Text or Link components to create inline styling.\n     */\n    class Text extends React.Component<TextProps | SVGTextProps> {}\n\n    interface LinkProps extends NodeProps {\n      /**\n       * Enable/disable page wrapping for element.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      src: string;\n      children?: React.ReactNode;\n    }\n\n    /**\n     * A React component for displaying a hyperlink. Link\u2019s can be nested\n     * inside a Text component, or being inside any other valid primitive.\n     */\n    class Link extends React.Component<LinkProps> {}\n\n    interface NoteProps extends NodeProps {\n      children: string;\n    }\n\n    class Note extends React.Component<NoteProps> {}\n\n    interface CanvasProps extends NodeProps {\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      paint: (\n        painter: any,\n        availableWidth: number,\n        availableHeight: number,\n      ) => null;\n    }\n\n    class Canvas extends React.Component<CanvasProps> {}\n\n    interface SVGProps extends NodeProps {\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      width?: string | number;\n      height?: string | number;\n      viewBox?: string;\n      preserveAspectRatio?: string;\n    }\n\n    /**\n     * The <SVG /> element is a container that defines a new coordinate system and viewport. It is used as the outermost element of SVG documents.\n     */\n    class Svg extends React.Component<SVGProps> {}\n\n    interface LineProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      x1: string | number;\n      x2: string | number;\n      y1: string | number;\n      y2: string | number;\n    }\n\n    /**\n     * The <Line /> element is used to create a line.\n     */\n    class Line extends React.Component<LineProps> {}\n\n    interface PolylineProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      points: string;\n    }\n\n    /**\n     * The <Polyline /> element is used to create any shape that consists of only straight lines (that is connected at several points).\n     */\n    class Polyline extends React.Component<PolylineProps> {}\n\n    interface PolygonProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      points: string;\n    }\n\n    /**\n     * The <Polygon /> element is used to create a graphic that contains at least three sides.\n     * Polygons are made of straight lines, and the shape is \"closed\" (all the lines connect up).\n     */\n    class Polygon extends React.Component<PolygonProps> {}\n\n    interface PathProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      d: string;\n    }\n\n    /**\n     * The <Path /> element is the most powerful element in the SVG library of basic shapes. It can be used to create lines, curves, arcs, and more.\n     */\n    class Path extends React.Component<PathProps> {}\n\n    interface RectProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      x: string | number;\n      y: string | number;\n      width: string | number;\n      height: string | number;\n      rx?: string | number;\n      ry?: string | number;\n    }\n\n    /**\n     * The <Rect /> element is used to create a rectangle and variations of a rectangle shape.\n     */\n    class Rect extends React.Component<RectProps> {}\n\n    interface CircleProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      cx: string | number;\n      cy: string | number;\n      r: string | number;\n    }\n\n    /**\n     * The <Circle /> element is used to create a circle.\n     */\n    class Circle extends React.Component<CircleProps> {}\n\n    interface EllipseProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      cx: string | number;\n      cy: string | number;\n      rx: string | number;\n      ry: string | number;\n    }\n\n    /**\n     * The <Ellipse /> element is used to create an ellipse.\n     * An ellipse is closely related to a circle. The difference is that an ellipse has an x and a y radius that differs from each other, while a circle has equal x and y radius.\n     */\n    class Ellipse extends React.Component<EllipseProps> {}\n\n    interface GProps extends SVGPresentationAttributes {}\n\n    /**\n     * The <G /> SVG element is a container used to group other SVG elements.\n     * Transformations applied to the <G /> element are performed on its child elements, and its attributes are inherited by its children.\n     */\n    class G extends React.Component<GProps> {}\n\n    interface StopProps {\n      offset: string | number;\n      stopColor: string;\n      stopOpacity?: string | number;\n    }\n\n    /**\n     * The SVG <Stop /> element defines a color and its position to use on a gradient. This element is always a child of a <LinearGradient /> or <RadialGradient /> element\n     */\n    class Stop extends React.Component<StopProps> {}\n\n    interface DefsProps {}\n\n    /**\n     * The <Defs /> element is used to store graphical objects that will be used at a later time. Objects created inside a <Defs /> element are not rendered directly. To display them you have to reference them\n     */\n    class Defs extends React.Component<DefsProps> {}\n\n    interface ClipPathProps {\n      id?: string;\n    }\n\n    /**\n     * The <ClipPath /> SVG element defines a clipping path, to be used by the clipPath property.\n     * A clipping path restricts the region to which paint can be applied. Conceptually, parts of the drawing that lie outside of the region bounded by the clipping path are not drawn.\n     */\n    class ClipPath extends React.Component<ClipPathProps> {}\n\n    interface LinearGradientProps {\n      x1: string | number;\n      x2: string | number;\n      y1: string | number;\n      y2: string | number;\n    }\n\n    /**\n     * The <LinearGradient /> element lets authors define linear gradients that can be applied to fill or stroke of graphical elements.\n     */\n    class LinearGradient extends React.Component<LinearGradientProps> {}\n\n    interface RadialGradientProps {\n      cx: string | number;\n      cy: string | number;\n      fr: string | number;\n      fx: string | number;\n      fy: string | number;\n    }\n\n    /**\n     * The <RadialGradient /> element lets authors define radial gradients that can be applied to fill or stroke of graphical elements.\n     */\n    class RadialGradient extends React.Component<RadialGradientProps> {}\n\n    interface BlobProviderParams {\n      blob: Blob | null;\n      url: string | null;\n      loading: boolean;\n      error: Error | null;\n    }\n    interface BlobProviderProps {\n      document: React.ReactElement<DocumentProps>;\n      children: (params: BlobProviderParams) => React.ReactNode;\n    }\n\n    /**\n     * Easy and declarative way of getting document's blob data without\n     * showing it on screen.\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\n     * @platform web\n     */\n    class BlobProvider extends React.Component<BlobProviderProps> {}\n\n    interface PDFViewerProps {\n      width?: number | string;\n      height?: number | string;\n      style?: Style | Style[];\n      className?: string;\n      children?: React.ReactElement<DocumentProps>;\n      innerRef?: React.Ref<HTMLIFrameElement>;\n    }\n\n    /**\n     * Iframe PDF viewer for client-side generated documents.\n     * @platform web\n     */\n    class PDFViewer extends React.Component<PDFViewerProps> {}\n\n    interface PDFDownloadLinkProps {\n      document: React.ReactElement<DocumentProps>;\n      fileName?: string;\n      style?: Style | Style[];\n      className?: string;\n      children?:\n        | React.ReactNode\n        | ((params: BlobProviderParams) => React.ReactNode);\n    }\n\n    /**\n     * Anchor tag to enable generate and download PDF documents on the fly.\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\n     * @platform web\n     */\n    class PDFDownloadLink extends React.Component<PDFDownloadLinkProps> {}\n\n    interface UsePDFInstance {\n      loading: boolean;\n      blob: Blob | null;\n      url: string | null;\n      error: string | null;\n    }\n\n    /**\n     * React hook for creating and updating a PDF document instance\n     * @platform web\n     */\n    function usePDF(options: {\n      document: React.ReactElement<DocumentProps>;\n    }): [UsePDFInstance, () => void];\n\n    const Font: FontStore;\n\n    const StyleSheet: {\n      hairlineWidth: number;\n      create: <T extends Styles>(styles: T) => T;\n      resolve: (\n        style: Style,\n        container: {\n          width: number;\n          height: number;\n          orientation: Orientation;\n        },\n      ) => Style;\n      flatten: (...styles: (Style[] | Style | undefined)[]) => Style;\n      absoluteFillObject: {\n        position: 'absolute';\n        left: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n      };\n    };\n\n    const version: any;\n\n    const PDFRenderer: any;\n\n    const pdf: (\n      initialValue?: React.ReactElement<DocumentProps>,\n      onChange?: () => {},\n    ) => {\n      container: any;\n      isDirty: () => boolean;\n      updateContainer: (document: React.ReactElement<any>) => void;\n      toBuffer: () => Promise<NodeJS.ReadableStream>;\n      toBlob: () => Promise<Blob>;\n      toString: () => string;\n    };\n\n    const renderToStream: (\n      document: React.ReactElement<DocumentProps>,\n    ) => Promise<NodeJS.ReadableStream>;\n\n    const renderToString: (\n      document: React.ReactElement<DocumentProps>,\n    ) => string;\n\n    const renderToFile: (\n      document: React.ReactElement<DocumentProps>,\n      filePath: string,\n      callback?: (output: NodeJS.ReadableStream, filePath: string) => any,\n    ) => Promise<NodeJS.ReadableStream>;\n\n    const render: typeof renderToFile;\n  }\n\n  const pdf: typeof ReactPDF.pdf;\n  const Document: typeof ReactPDF.Document;\n  const Page: typeof ReactPDF.Page;\n  const View: typeof ReactPDF.View;\n  const Image: typeof ReactPDF.Image;\n  const Text: typeof ReactPDF.Text;\n  const Canvas: typeof ReactPDF.Canvas;\n  const Link: typeof ReactPDF.Link;\n  const Note: typeof ReactPDF.Note;\n  const Svg: typeof ReactPDF.Svg;\n  const Line: typeof ReactPDF.Line;\n  const Polyline: typeof ReactPDF.Polyline;\n  const Polygon: typeof ReactPDF.Polygon;\n  const Path: typeof ReactPDF.Path;\n  const Rect: typeof ReactPDF.Rect;\n  const Circle: typeof ReactPDF.Circle;\n  const Ellipse: typeof ReactPDF.Ellipse;\n  const G: typeof ReactPDF.G;\n  const Stop: typeof ReactPDF.Stop;\n  const Defs: typeof ReactPDF.Defs;\n  const ClipPath: typeof ReactPDF.ClipPath;\n  const LinearGradient: typeof ReactPDF.LinearGradient;\n  const RadialGradient: typeof ReactPDF.RadialGradient;\n  const Font: typeof ReactPDF.Font;\n  const StyleSheet: typeof ReactPDF.StyleSheet;\n  const PDFRenderer: typeof ReactPDF.PDFRenderer;\n  const version: typeof ReactPDF.version;\n  const renderToFile: typeof ReactPDF.renderToFile;\n  const renderToString: typeof ReactPDF.renderToString;\n  const renderToStream: typeof ReactPDF.renderToStream;\n  const usePDF: typeof ReactPDF.usePDF;\n  const PDFViewer: typeof ReactPDF.PDFViewer;\n  const BlobProvider: typeof ReactPDF.BlobProvider;\n  const PDFDownloadLink: typeof ReactPDF.PDFDownloadLink;\n\n  export default ReactPDF;\n\n  export {\n    pdf,\n    Document,\n    Page,\n    View,\n    Image,\n    Text,\n    Canvas,\n    Link,\n    Note,\n    Svg,\n    Line,\n    Polyline,\n    Polygon,\n    Path,\n    Rect,\n    Circle,\n    Ellipse,\n    G,\n    Stop,\n    Defs,\n    ClipPath,\n    LinearGradient,\n    RadialGradient,\n    Font,\n    StyleSheet,\n    PDFRenderer,\n    version,\n    renderToFile,\n    renderToStream,\n    renderToString,\n    usePDF,\n    PDFViewer,\n    BlobProvider,\n    PDFDownloadLink,\n  };\n}\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/renderer/index.d.ts",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-2400",
    "model_patch": "diff --git a/resolvePagination.js b/resolvePagination.js\nindex 1234567..89abcde 100644\n--- a/resolvePagination.js\n+++ b/resolvePagination.js\n@@ -17,6 +17,7 @@ const isText = R.propEq('type', P.Text);\n const SAFTY_THRESHOLD = 0.001;\n const assingChildren = R.assoc('children');\n const getTop = R.pathOr(0, ['box', 'top']);\n+const getHeight = R.path(['box', 'height']);\n const getChildren = R.propOr([], 'children');\n const isElementOutside = R.useWith(R.lte, [R.identity, getTop]);\n const isFixed = R.pathEq(['props', 'fixed'], true);\n@@ -87,6 +88,7 @@ const splitNodes = (height, nodes) => {\n       const next = R.evolve({\n         box: { top: R.subtract(R.__, height) },\n         props: R.evolve({ break: R.always(false) }),\n+        minPresenceAhead: R.always(0),\n       })(child);\n \n       currentChildren.push(...futureFixedNodes);\n@@ -98,6 +100,7 @@ const splitNodes = (height, nodes) => {\n       const [currentChild, nextChild] = split(child, height);\n \n       if (currentChild) currentChildren.push(currentChild);\n+      if (nextChild && !isFixed(nextChild)) nextChildren.push(nextChild);\n \n       continue;\n     }",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 2415.2,
      "issue_embedding_time_ms": 2415.2,
      "retrieval_time_ms_jina": 1.79,
      "retrieval_time_ms": 1.79,
      "total_retrieval_time_ms": 2416.99,
      "generation_time_ms": 3179.85,
      "total_io_time_ms": 5596.84,
      "input_total_token_limit": null,
      "issue_text_tokens": 2374,
      "vlm_tokens": 0,
      "retrieved_tokens": 9772,
      "prompt_template_tokens": 511,
      "total_input_prompt_tokens": 12657,
      "output_generated_tokens": 322,
      "total_io_tokens": 12979,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\n`fixed` in conjunction with `minPresenceAhead` does not work as expected\\n**Describe the bug**\\r\\nUsing `minPresenceAhead` on a `fixed` component does not work as expected.\\r\\n\\r\\n**To Reproduce**\\r\\n1. Create a document with two components: \\r\\n  * Some view that takes up most of the first page, e.g. `<View style={{height: 600}}/>`\\r\\n  * A component that consists of a header, and a large block of text. \\r\\n1. Try and style the second component so that the header is fixed above each page as the large block of text, but make sure it does not appear by itself. So add both `fixed` and `minPresenceAhead` to the header.\\r\\n3. See that the `minPresenceAhead` rule is not obeyed. But it _is_ obeyed if `fixed` is removed. \\r\\n\\r\\n[Repl link](https://react-pdf.org/repl?code=3187b0760ce02e00403207901281440b2302f0c04471004e02980b6300960038402b990098800da1304e6c0218945400d0c50908b028bc681189de9572118393001cc611261c04422f462355e4684122075892955a28533e8d30b06ac269c011a122ab62316c46094e4a609c52ea008e349c0074300072223041649c6111645a64bc305084d992425ae19cb0e4f4d100823294720aca59047250e4e11ef5b41009f1006644344ae4451460d1709cc0866cda591255ed8d60d676c53ac94d3499ade3ddbdfdc56052f644d1008a347214d4746c8694446032105a30344c50f5c044ed4a049c006e25c1325125d3a8677b44000a000b4e3115ec11f9a8a60419824ecc05512978d1001ab3d288e22878209c2aadc3ae8e25f4a08d768ad0a647f1303e117a3045ce4172dd6c490218c607f282703c6a522dca074728f1606226131c6c06fad32ad5450a96ee40c8d09128a2263a09c76a51610624adc889c21ac4e44c2bbc9645c655db6aecce5dd2e1f070bcdee40fa0cc498c9384ce9c1a28908d1002481c08dc9805968445f0f948e75a03198ac76140711c2154943b95516a434a3593c9c22716d379346880184246d3f114697e6607a7d520a28d9ec1d822606375958a3ecd688a09ce452f389eb2ee2819189e6d3368d26091a408a183a93904102a3e6827001422d998000555a8d66a78311e834c083ed2a1a723e644cc932fe07b04e60b7b01ee8be24c1fc41010109a84c81c100ded0bb282801c6010ec9d40d2ac4499a40bb499180e2361b0232cc9aef5a36e338ac899cdfb12591582522cba29ce58c0841811e13258794e888661a4825996fe048c1af465ae1638c0281ea82bb4fe088b703e94342b0b7c479803f324ea21a20026be121ec8423923485aea99378ac2e9e4024e014835a443800050767e4b039e1e96030000140025160001f079764c0300003c0008880630f0f60f901605c178201112500009e4ca6000379a5943483232800170c000230000c45400bea5745b16c5417623e800ee6c325a94659091053a42503e5001b095e5400f495555c16d5441d58350dc37d530274e40001e930908a382c4168f3110652b5d23a500332f53038d137052e6cdb034029510e95a5a00f8f9400e4c43d0b74089d38050000cae40005e443e5bb408597d0395280010880d4880243e5000b1951540012e6bd0899057d71d5001d554a32358d3144d415a318d0d69620a81a0a56e3434a304c5398f53876c5c4f20e8393f4d534409d84d63f541d28fc598a0d28d851158ad167900370390e520e6a88e08850018a44c41dc89bb9f8eb90378b92d0000)\\r\\n\\r\\n<details><summary>Click to see REPL Link if above link doesn't work</summary>\\r\\n<pre>\\r\\nhttps://react-pdf.org/repl?code=3187b0760ce02e00403207901281440b2302f0c04471004e02980b6300960038402b990098800da1304e6c0218945400d0c50908b028bc681189de9572118393001cc611261c04422f462355e4684122075892955a28533e8d30b06ac269c011a122ab62316c46094e4a609c52ea008e349c0074300072223041649c6111645a64bc305084d992425ae19cb0e4f4d100823294720aca59047250e4e11ef5b41009f1006644344ae4451460d1709cc0866cda591255ed8d60d676c53ac94d3499ade3ddbdfdc56052f644d1008a347214d4746c8694446032105a30344c50f5c044ed4a049c006e25c1325125d3a8677b44000a000b4e3115ec11f9a8a60419824ecc05512978d1001ab3d288e22878209c2aadc3ae8e25f4a08d768ad0a647f1303e117a3045ce4172dd6c490218c607f282703c6a522dca074728f1606226131c6c06fad32ad5450a96ee40c8d09128a2263a09c76a51610624adc889c21ac4e44c2bbc9645c655db6aecce5dd2e1f070bcdee40fa0cc498c9384ce9c1a28908d1002481c08dc9805968445f0f948e75a03198ac76140711c2154943b95516a434a3593c9c22716d379346880184246d3f114697e6607a7d520a28d9ec1d822606375958a3ecd688a09ce452f389eb2ee2819189e6d3368d26091a408a183a93904102a3e6827001422d998000555a8d66a78311e834c083ed2a1a723e644cc932fe07b04e60b7b01ee8be24c1fc41010109a84c81c100ded0bb282801c6010ec9d40d2ac4499a40bb499180e2361b0232cc9aef5a36e338ac899cdfb12591582522cba29ce58c0841811e13258794e888661a4825996fe048c1af465ae1638c0281ea82bb4fe088b703e94342b0b7c479803f324ea21a20026be121ec8423923485aea99378ac2e9e4024e014835a443800050767e4b039e1e96030000140025160001f079764c0300003c0008880630f0f60f901605c178201112500009e4ca6000379a5943483232800170c000230000c45400bea5745b16c5417623e800ee6c325a94659091053a42503e5001b095e5400f495555c16d5441d58350dc37d530274e40001e930908a382c4168f3110652b5d23a500332f53038d137052e6cdb034029510e95a5a00f8f9400e4c43d0b74089d38050000cae40005e443e5bb408597d0395280010880d4880243e5000b1951540012e6bd0899057d71d5001d554a32358d3144d415a318d0d69620a81a0a56e3434a304c5398f53876c5c4f20e8393f4d534409d84d63f541d28fc598a0d28d851158ad167900370390e520e6a88e08850018a44c41dc89bb9f8eb90378b92d0000\\r\\n</pre>\\r\\n</details> \\r\\n\\r\\n\\r\\n**Expected behavior**\\r\\n\\r\\nI want to be able to have fixed headers that appear above multi-page content. But which also does not appear by itself.\\r\\n\\r\\n**Screenshots**\\r\\nActual:\\r\\n![image](https://user-images.githubusercontent.com/896684/224213720-70a980a3-f4cc-4dea-9b9a-ab7dce7a1a87.png)\\r\\n\\r\\nExpected:\\r\\n![image](https://user-images.githubusercontent.com/896684/224213733-db3f0076-17e8-4f2c-930b-6659508fd8f6.png)\\r\\n\\r\\n\\r\\n**Desktop (please complete the following information):**\\r\\n - OS: Mac OS Monterey\\r\\n - Browser: Safari\\r\\n - React-pdf: v3.1.3\\r\\n\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of index.js]\\n/* eslint-disable jsx-a11y/anchor-is-valid */\\n\\nimport React from 'react';\\nimport {\\n  Document,\\n  Page,\\n  View,\\n  Text,\\n  Link,\\n  Font,\\n  StyleSheet,\\n} from '@react-pdf/renderer';\\n\\nconst styles = StyleSheet.create({\\n  title: {\\n    margin: 20,\\n    fontSize: 25,\\n    textAlign: 'center',\\n    backgroundColor: '#e4e4e4',\\n    textTransform: 'uppercase',\\n    fontFamily: 'Oswald',\\n  },\\n  body: {\\n    flexGrow: 1,\\n  },\\n  row: {\\n    flexGrow: 1,\\n    flexDirection: 'row',\\n  },\\n  block: {\\n    flexGrow: 1,\\n  },\\n  text: {\\n    width: '60%',\\n    margin: 10,\\n    fontFamily: 'Oswald',\\n    textAlign: 'justify',\\n  },\\n  fill1: {\\n    width: '40%',\\n    backgroundColor: '#e14427',\\n  },\\n  fill2: {\\n    flexGrow: 2,\\n    backgroundColor: '#e6672d',\\n  },\\n  fill3: {\\n    flexGrow: 2,\\n    backgroundColor: '#e78632',\\n  },\\n  fill4: {\\n    flexGrow: 2,\\n    backgroundColor: '#e29e37',\\n  },\\n});\\n\\nFont.register({\\n  family: 'Oswald',\\n  src: 'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\\n});\\n\\nexport default () => (\\n  <Document>\\n    <Page size=\\\"A4\\\">\\n      <Link\\n        style={styles.title}\\n        src=\\\"https://es.wikipedia.org/wiki/Lorem_ipsum\\\"\\n      >\\n        Lorem Ipsum\\n      </Link>\\n      <View style={styles.body}>\\n        <View style={styles.row}>\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n          <View style={styles.fill1} />\\n        </View>\\n        <View style={styles.row}>\\n          <View style={styles.fill2} />\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n        </View>\\n        <View style={styles.row}>\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n          <View style={styles.fill3} />\\n        </View>\\n      </View>\\n    </Page>\\n  </Document>\\n);\\n\\n[end of index.js]\\n[start of index.js]\\nimport React from 'react';\\nimport {\\n  Document,\\n  Font,\\n  Page,\\n  Text,\\n  Image,\\n  StyleSheet,\\n} from '@react-pdf/renderer';\\n\\nconst styles = StyleSheet.create({\\n  body: {\\n    paddingTop: 35,\\n    paddingBottom: 65,\\n    paddingHorizontal: 35,\\n  },\\n  title: {\\n    fontSize: 24,\\n    textAlign: 'center',\\n    fontFamily: 'Oswald',\\n  },\\n  author: {\\n    fontSize: 12,\\n    textAlign: 'center',\\n    marginBottom: 40,\\n  },\\n  subtitle: {\\n    fontSize: 18,\\n    margin: 12,\\n    fontFamily: 'Oswald',\\n  },\\n  text: {\\n    margin: 12,\\n    fontSize: 14,\\n    textAlign: 'justify',\\n    fontFamily: 'Times-Roman',\\n  },\\n  image: {\\n    marginVertical: 15,\\n    marginHorizontal: 100,\\n  },\\n  header: {\\n    fontSize: 12,\\n    marginBottom: 20,\\n    textAlign: 'center',\\n    color: 'grey',\\n  },\\n  pageNumber: {\\n    position: 'absolute',\\n    fontSize: 12,\\n    bottom: 30,\\n    left: 0,\\n    right: 0,\\n    textAlign: 'center',\\n    color: 'grey',\\n  },\\n});\\n\\nFont.register({\\n  family: 'Oswald',\\n  src: 'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\\n});\\n\\nconst Subtitle = ({ children, ...props }) => (\\n  <Text style={styles.subtitle} {...props}>\\n    {children}\\n  </Text>\\n);\\n\\nexport default () => (\\n  <Document>\\n    <Page style={styles.body} wrap>\\n      <Text style={styles.header} fixed>\\n        ~ Created with react-pdf ~\\n      </Text>\\n      <Text style={styles.title}>Don Quijote de la Mancha</Text>\\n      <Text style={styles.author}>Miguel de Cervantes</Text>\\n      <Image\\n        style={styles.image}\\n        src=\\\"http://static.donquijote.org/images/blogs/dq-reg/don-quijote-de-la-mancha.jpg\\\"\\n      />\\n      <Subtitle>\\n        Cap\\u00edtulo I: Que trata de la condici\\u00f3n y ejercicio del famoso hidalgo D.\\n        Quijote de la Mancha\\n      </Subtitle>\\n      <Text style={styles.text}>\\n        En un lugar de la Mancha, de cuyo nombre no quiero acordarme, no ha\\n        mucho tiempo que viv\\u00eda un hidalgo de los de lanza en astillero, adarga\\n        antigua, roc\\u00edn flaco y galgo corredor. Una olla de algo m\\u00e1s vaca que\\n        carnero, salpic\\u00f3n las m\\u00e1s noches, duelos y quebrantos los s\\u00e1bados,\\n        lentejas los viernes, alg\\u00fan palomino de a\\u00f1adidura los domingos,\\n        consum\\u00edan las tres partes de su hacienda. El resto della conclu\\u00edan sayo\\n        de velarte, calzas de velludo para las fiestas con sus pantuflos de lo\\n        mismo, los d\\u00edas de entre semana se honraba con su vellori de lo m\\u00e1s\\n        fino. Ten\\u00eda en su casa una ama que pasaba de los cuarenta, y una sobrina\\n        que no llegaba a los veinte, y un mozo de campo y plaza, que as\\u00ed\\n        ensillaba el roc\\u00edn como tomaba la podadera. Frisaba la edad de nuestro\\n        hidalgo con los cincuenta a\\u00f1os, era de complexi\\u00f3n recia, seco de carnes,\\n        enjuto de rostro; gran madrugador y amigo de la caza. Quieren decir que\\n        ten\\u00eda el sobrenombre de Quijada o Quesada (que en esto hay alguna\\n        diferencia en los autores que deste caso escriben), aunque por\\n        conjeturas veros\\u00edmiles se deja entender que se llama Quijana; pero esto\\n        importa poco a nuestro cuento; basta que en la narraci\\u00f3n d\\u00e9l no se salga\\n        un punto de la verdad.\\n      </Text>\\n      <Text style={styles.text}>\\n        Es, pues, de saber, que este sobredicho hidalgo, los ratos que estaba\\n        ocioso (que eran los m\\u00e1s del a\\u00f1o) se daba a leer libros de caballer\\u00edas\\n        con tanta afici\\u00f3n y gusto, que olvid\\u00f3 casi de todo punto el ejercicio de\\n        la caza, y aun la administraci\\u00f3n de su hacienda; y lleg\\u00f3 a tanto su\\n        curiosidad y desatino en esto, que vendi\\u00f3 muchas hanegas de tierra de\\n        sembradura, para comprar libros de caballer\\u00edas en que leer; y as\\u00ed llev\\u00f3\\n        a su casa todos cuantos pudo haber dellos; y de todos ningunos le\\n        parec\\u00edan tan bien como los que compuso el famoso Feliciano de Silva:\\n        porque la claridad de su prosa, y aquellas intrincadas razones suyas, le\\n        parec\\u00edan de perlas; y m\\u00e1s cuando llegaba a leer aquellos requiebros y\\n        cartas de desaf\\u00edo, donde en muchas partes hallaba escrito: la raz\\u00f3n de\\n        la sinraz\\u00f3n que a mi raz\\u00f3n se hace, de tal manera mi raz\\u00f3n enflaquece,\\n        que con raz\\u00f3n me quejo.\\n      </Text>\\n      <Text style={styles.text}>\\n        Con estas y semejantes razones perd\\u00eda el pobre caballero el juicio, y\\n        desvel\\u00e1base por entenderlas, y desentra\\u00f1arles el sentido, que no se lo\\n        sacara, ni las entendiera el mismo Arist\\u00f3teles, si resucitara para s\\u00f3lo\\n        ello. No estaba muy bien con las heridas que don Belianis daba y\\n        recib\\u00eda, porque se imaginaba que por grandes maestros que le hubiesen\\n        curado, no dejar\\u00eda de tener el rostro y todo el cuerpo lleno de\\n        cicatrices y se\\u00f1ales; pero con todo alababa en su autor aquel acabar su\\n        libro con la promesa de aquella inacabable aventura, y muchas veces le\\n        vino deseo de tomar la pluma, y darle fin al pie de la letra como all\\u00ed\\n        se promete; y sin duda alguna lo hiciera, y aun saliera con ello, si\\n        otros mayores y continuos pensamientos no se lo estorbaran. Tuvo muchas\\n        veces competencia con el cura de su lugar (que era hombre docto graduado\\n        en Sig\\u00fcenza), sobre cu\\u00e1l hab\\u00eda sido mejor caballero, Palmer\\u00edn de\\n        Inglaterra o Amad\\u00eds de Gaula; mas maese Nicol\\u00e1s, barbero del mismo\\n        pueblo, dec\\u00eda que ninguno llegaba al caballero del Febo, y que si alguno\\n        se le pod\\u00eda comparar, era don Galaor, hermano de Amad\\u00eds de Gaula, porque\\n        ten\\u00eda muy acomodada condici\\u00f3n para todo; que no era caballero\\n        melindroso, ni tan llor\\u00f3n como su hermano, y que en lo de la valent\\u00eda no\\n        le iba en zaga.\\n      </Text>\\n      <Text style={styles.text}>\\n        En resoluci\\u00f3n, \\u00e9l se enfrasc\\u00f3 tanto en su lectura, que se le pasaban las\\n        noches leyendo de claro en claro, y los d\\u00edas de turbio en turbio, y as\\u00ed,\\n        del poco dormir y del mucho leer, se le sec\\u00f3 el cerebro, de manera que\\n        vino a perder el juicio. Llen\\u00f3sele la fantas\\u00eda de todo aquello que le\\u00eda\\n        en los libros, as\\u00ed de encantamientos, como de pendencias, batallas,\\n        desaf\\u00edos, heridas, requiebros, amores, tormentas y disparates\\n        imposibles, y asent\\u00f3sele de tal modo en la imaginaci\\u00f3n que era verdad\\n        toda aquella m\\u00e1quina de aquellas so\\u00f1adas invenciones que le\\u00eda, que para\\n        \\u00e9l no hab\\u00eda otra historia m\\u00e1s cierta en el mundo.\\n      </Text>\\n      <Subtitle break>\\n        Cap\\u00edtulo II: Que trata de la primera salida que de su tierra hizo el\\n        ingenioso Don Quijote\\n      </Subtitle>\\n      <Image\\n        style={styles.image}\\n        src=\\\"https://panampost.com/wp-content/uploads/don-quijote-lessons.jpg\\\"\\n      />\\n      <Text style={styles.text}>\\n        Hechas, pues, estas prevenciones, no quiso aguardar m\\u00e1s tiempo a poner\\n        en efeto su pensamiento, apret\\u00e1ndole a ello la falta que \\u00e9l pensaba que\\n        hac\\u00eda en el mundo su tardanza, seg\\u00fan eran los agravios que pensaba\\n        deshacer, tuertos que enderezar, sinrazones que emendar y abusos que\\n        mejorar y deudas que satisfacer. Y as\\u00ed, sin dar parte a persona alguna\\n        de su intenci\\u00f3n y sin que nadie le viese, una ma\\u00f1ana, antes del d\\u00eda, que\\n        era uno de los calurosos del mes de Julio, se arm\\u00f3 de todas sus armas,\\n        subi\\u00f3 sobre Rocinante, puesta su mal compuesta celada, embraz\\u00f3 su\\n        adarga, tom\\u00f3 su lanza y por la puerta falsa de un corral sali\\u00f3 al campo\\n        con grand\\u00edsimo contento y alborozo de ver con cu\\u00e1nta facilidad hab\\u00eda\\n        dado principio a su buen deseo. Mas apenas se vio en el campo cuando le\\n        asalt\\u00f3 un pensamiento terrible, y tal, que por poco le hiciera dejar la\\n        comenzada empresa; y fue que le vino a la memoria que no era armado\\n        caballero, y que, conforme a ley de caballer\\u00eda, ni pod\\u00eda ni deb\\u00eda tomar\\n        armas con ning\\u00fan caballero; y puesto que lo fuera, hab\\u00eda de llevar armas\\n        blancas, como novel caballero, sin empresa en el escudo, hasta que por\\n        su esfuerzo la ganase. Estos pensamientos le hicieron titubear en su\\n        prop\\u00f3sito; mas pudiendo m\\u00e1s su locura que otra raz\\u00f3n alguna, propuso de\\n        hacerse armar caballero del primero que topase, a imitaci\\u00f3n de otros\\n        muchos que as\\u00ed lo hicieron, seg\\u00fan \\u00e9l hab\\u00eda le\\u00eddo en los libros que tal\\n        le ten\\u00edan. En lo de las armas blancas, pensaba limpiarlas de manera, en\\n        teniendo lugar, que lo fuesen m\\u00e1s que un arminio; y con esto se quiet\\u00f3 y\\n        prosigui\\u00f3 su camino, sin llevar otro que aquel que su caballo quer\\u00eda,\\n        creyendo que en aquello consist\\u00eda la fuerza de las aventuras\\n      </Text>\\n      <Text style={styles.text}>\\n        Yendo, pues, caminando nuestro flamante aventurero, iba hablando consigo\\n        mesmo, y diciendo: \\u2014\\u00bfQui\\u00e9n duda, sino que en los venideros tiempos,\\n        cuando salga a luz la verdadera historia de mis famosos hechos, que el\\n        sabio que los escribiere no ponga, cuando llegue a contar esta mi\\n        primera salida tan de ma\\u00f1ana, desta manera?: Apenas hab\\u00eda el rubicundo\\n        Apolo tendido por la faz de la ancha y espaciosa tierra las doradas\\n        hebras de sus hermosos cabellos, y apenas los peque\\u00f1os y pintados\\n        pajarillos con sus arpadas lenguas hab\\u00edan saludado con dulce y meliflua\\n        armon\\u00eda la venida de la rosada Aurora, que, dejando la blanda cama del\\n        celoso marido, por las puertas y balcones del manchego horizonte a los\\n        mortales se mostraba, cuando el famoso caballero don Quijote de la\\n        Mancha, dejando las ociosas plumas, subi\\u00f3 sobre su famoso caballo\\n        Rocinante y comenz\\u00f3 a caminar por el antiguo y conocido Campo de\\n        Montiel.\\n      </Text>\\n      <Text style={styles.text}>\\n        Y era la verdad que por \\u00e9l caminaba; y a\\u00f1adi\\u00f3 diciendo: \\u2014Dichosa edad y\\n        siglo dichoso aquel adonde saldr\\u00e1n a luz las famosas haza\\u00f1as m\\u00edas,\\n        dignas de entallarse en bronces, esculpirse en m\\u00e1rmoles y pintarse en\\n        tablas, para memoria en lo futuro. \\u00a1Oh t\\u00fa, sabio encantador, quienquiera\\n        que seas, a quien ha de tocar el ser coronista desta peregrina historia!\\n        Ru\\u00e9gote que no te olvides de mi buen Rocinante, compa\\u00f1ero eterno m\\u00edo en\\n        todos mis caminos y carreras.\\n      </Text>\\n      <Text style={styles.text}>\\n        Luego volv\\u00eda diciendo, como si verdaderamente fuera enamorado: \\u2014\\u00a1Oh\\n        princesa Dulcinea, se\\u00f1ora deste cautivo coraz\\u00f3n! Mucho agravio me\\n        habedes fecho en despedirme y reprocharme con el riguroso afincamiento\\n        de mandarme no parecer ante la vuestra fermosura. Pl\\u00e9gaos, se\\u00f1ora, de\\n        membraros deste vuestro sujeto coraz\\u00f3n, que tantas cuitas por vuestro\\n        amor padece. Con estos iba ensartando otros disparates, todos al modo de\\n        los que sus libros le hab\\u00edan ense\\u00f1ado, imitando en cuanto pod\\u00eda su\\n        lenguaje. Con esto caminaba tan despacio, y el sol entraba tan apriesa y\\n        con tanto ardor, que fuera bastante a derretirle los sesos, si algunos\\n        tuviera\\n      </Text>\\n      <Text style={styles.text}>\\n        Casi todo aquel d\\u00eda camin\\u00f3 sin acontecerle cosa que de contar fuese, de\\n        lo cual se desesperaba, porque quisiera topar luego luego con quien\\n        hacer experiencia del valor de su fuerte brazo. Autores hay que dicen\\n        que la primera aventura que le avino fue la del Puerto L\\u00e1pice, otros\\n        dicen que la de los molinos de viento; pero lo que yo he podido\\n        averiguar en este caso, y lo que he hallado escrito en los anales de la\\n        Mancha, es que \\u00e9l anduvo todo aquel d\\u00eda, y, al anochecer, su roc\\u00edn y \\u00e9l\\n        se hallaron cansados y muertos de hambre, y que, mirando a todas partes\\n        por ver si descubrir\\u00eda alg\\u00fan castillo o alguna majada de pastores donde\\n        recogerse y adonde pudiese remediar su mucha hambre y necesidad, vio, no\\n        lejos del camino por donde iba, una venta, que fue como si viera una\\n        estrella que, no a los portales, sino a los alc\\u00e1zares de su redenci\\u00f3n le\\n        encaminaba. Diose priesa a caminar, y lleg\\u00f3 a ella a tiempo que\\n        anochec\\u00eda.\\n      </Text>\\n      <Text\\n        style={styles.pageNumber}\\n        render={({ pageNumber, totalPages }) => `${pageNumber} / ${totalPages}`}\\n        fixed\\n      />\\n    </Page>\\n  </Document>\\n);\\n\\n[end of index.js]\\n[start of index.d.ts]\\ndeclare module '@react-pdf/renderer' {\\n  import * as React from 'react';\\n  import {\\n    Style,\\n    PageSize,\\n    FontStore,\\n    Orientation,\\n    SourceObject,\\n    HyphenationCallback,\\n    SVGPresentationAttributes,\\n  } from '@react-pdf/types';\\n\\n  namespace ReactPDF {\\n    interface Styles {\\n      [key: string]: Style;\\n    }\\n\\n    interface OnRenderProps {\\n      blob?: Blob;\\n    }\\n\\n    interface DocumentProps {\\n      title?: string;\\n      author?: string;\\n      subject?: string;\\n      keywords?: string;\\n      creator?: string;\\n      producer?: string;\\n      onRender?: (props: OnRenderProps) => any;\\n    }\\n\\n    /**\\n     * This component represent the PDF document itself. It must be the root\\n     * of your tree element structure, and under no circumstances should it be\\n     * used as children of another react-pdf component. In addition, it should\\n     * only have childs of type <Page />.\\n     */\\n    class Document extends React.Component<DocumentProps> {}\\n\\n    interface NodeProps {\\n      id?: string;\\n      style?: Style | Style[];\\n      /**\\n       * Render component in all wrapped pages.\\n       * @see https://react-pdf.org/advanced#fixed-components\\n       */\\n      fixed?: boolean;\\n      /**\\n       * Force the wrapping algorithm to start a new page when rendering the\\n       * element.\\n       * @see https://react-pdf.org/advanced#page-breaks\\n       */\\n      break?: boolean;\\n      /**\\n       * Hint that no page wrapping should occur between all sibling elements following the element within n points\\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\\n       */\\n      minPresenceAhead?: number;\\n    }\\n\\n    interface PageProps extends NodeProps {\\n      /**\\n       * Enable page wrapping for this page.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      size?: PageSize;\\n      orientation?: Orientation;\\n    }\\n\\n    /**\\n     * Represents single page inside the PDF document, or a subset of them if\\n     * using the wrapping feature. A <Document /> can contain as many pages as\\n     * you want, but ensure not rendering a page inside any component besides\\n     * Document.\\n     */\\n    class Page extends React.Component<PageProps> {}\\n\\n    interface ViewProps extends NodeProps {\\n      id?: string;\\n      /**\\n       * Enable/disable page wrapping for element.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      render?: (props: {\\n        pageNumber: number;\\n        subPageNumber: number;\\n      }) => React.ReactNode;\\n      children?: React.ReactNode;\\n      id?: string;\\n    }\\n\\n    /**\\n     * The most fundamental component for building a UI and is designed to be\\n     * nested inside other views and can have 0 to many children.\\n     */\\n    class View extends React.Component<ViewProps> {}\\n\\n    interface BaseImageProps extends NodeProps {\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      cache?: boolean;\\n    }\\n\\n    interface ImageWithSrcProp extends BaseImageProps {\\n      src: SourceObject;\\n    }\\n\\n    interface ImageWithSourceProp extends BaseImageProps {\\n      source: SourceObject;\\n    }\\n\\n    type ImageProps = ImageWithSrcProp | ImageWithSourceProp;\\n\\n    /**\\n     * A React component for displaying network or local (Node only) JPG or\\n     * PNG images, as well as base64 encoded image strings.\\n     */\\n    class Image extends React.Component<ImageProps> {}\\n\\n    interface TextProps extends NodeProps {\\n      id?: string;\\n      /**\\n       * Enable/disable page wrapping for element.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      render?: (props: {\\n        pageNumber: number;\\n        totalPages: number;\\n        subPageNumber: number;\\n        subPageTotalPages: number;\\n      }) => React.ReactNode;\\n      children?: React.ReactNode;\\n      id?: string;\\n      /**\\n       * Override the default hyphenation-callback\\n       * @see https://react-pdf.org/fonts#registerhyphenationcallback\\n       */\\n      hyphenationCallback?: HyphenationCallback;\\n      /**\\n       * Specifies the minimum number of lines in a text element that must be shown at the bottom of a page or its container.\\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\\n       */\\n      orphans?: number;\\n      /**\\n       * Specifies the minimum number of lines in a text element that must be shown at the top of a page or its container..\\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\\n       */\\n      widows?: number;\\n    }\\n\\n    interface SVGTextProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      x: string | number;\\n      y: string | number;\\n      /**\\n       * Override the default hyphenation-callback\\n       * @see https://react-pdf.org/fonts#registerhyphenationcallback\\n       */\\n      hyphenationCallback?: HyphenationCallback;\\n    }\\n\\n    /**\\n     * A React component for displaying text. Text supports nesting of other\\n     * Text or Link components to create inline styling.\\n     */\\n    class Text extends React.Component<TextProps | SVGTextProps> {}\\n\\n    interface LinkProps extends NodeProps {\\n      /**\\n       * Enable/disable page wrapping for element.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      src: string;\\n      children?: React.ReactNode;\\n    }\\n\\n    /**\\n     * A React component for displaying a hyperlink. Link\\u2019s can be nested\\n     * inside a Text component, or being inside any other valid primitive.\\n     */\\n    class Link extends React.Component<LinkProps> {}\\n\\n    interface NoteProps extends NodeProps {\\n      children: string;\\n    }\\n\\n    class Note extends React.Component<NoteProps> {}\\n\\n    interface CanvasProps extends NodeProps {\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      paint: (\\n        painter: any,\\n        availableWidth: number,\\n        availableHeight: number,\\n      ) => null;\\n    }\\n\\n    class Canvas extends React.Component<CanvasProps> {}\\n\\n    interface SVGProps extends NodeProps {\\n      /**\\n       * Enables debug mode on page bounding box.\\n       * @see https://react-pdf.org/advanced#debugging\\n       */\\n      debug?: boolean;\\n      width?: string | number;\\n      height?: string | number;\\n      viewBox?: string;\\n      preserveAspectRatio?: string;\\n    }\\n\\n    /**\\n     * The <SVG /> element is a container that defines a new coordinate system and viewport. It is used as the outermost element of SVG documents.\\n     */\\n    class Svg extends React.Component<SVGProps> {}\\n\\n    interface LineProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      x1: string | number;\\n      x2: string | number;\\n      y1: string | number;\\n      y2: string | number;\\n    }\\n\\n    /**\\n     * The <Line /> element is used to create a line.\\n     */\\n    class Line extends React.Component<LineProps> {}\\n\\n    interface PolylineProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      points: string;\\n    }\\n\\n    /**\\n     * The <Polyline /> element is used to create any shape that consists of only straight lines (that is connected at several points).\\n     */\\n    class Polyline extends React.Component<PolylineProps> {}\\n\\n    interface PolygonProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      points: string;\\n    }\\n\\n    /**\\n     * The <Polygon /> element is used to create a graphic that contains at least three sides.\\n     * Polygons are made of straight lines, and the shape is \\\"closed\\\" (all the lines connect up).\\n     */\\n    class Polygon extends React.Component<PolygonProps> {}\\n\\n    interface PathProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      d: string;\\n    }\\n\\n    /**\\n     * The <Path /> element is the most powerful element in the SVG library of basic shapes. It can be used to create lines, curves, arcs, and more.\\n     */\\n    class Path extends React.Component<PathProps> {}\\n\\n    interface RectProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      x: string | number;\\n      y: string | number;\\n      width: string | number;\\n      height: string | number;\\n      rx?: string | number;\\n      ry?: string | number;\\n    }\\n\\n    /**\\n     * The <Rect /> element is used to create a rectangle and variations of a rectangle shape.\\n     */\\n    class Rect extends React.Component<RectProps> {}\\n\\n    interface CircleProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      cx: string | number;\\n      cy: string | number;\\n      r: string | number;\\n    }\\n\\n    /**\\n     * The <Circle /> element is used to create a circle.\\n     */\\n    class Circle extends React.Component<CircleProps> {}\\n\\n    interface EllipseProps extends SVGPresentationAttributes {\\n      style?: SVGPresentationAttributes;\\n      cx: string | number;\\n      cy: string | number;\\n      rx: string | number;\\n      ry: string | number;\\n    }\\n\\n    /**\\n     * The <Ellipse /> element is used to create an ellipse.\\n     * An ellipse is closely related to a circle. The difference is that an ellipse has an x and a y radius that differs from each other, while a circle has equal x and y radius.\\n     */\\n    class Ellipse extends React.Component<EllipseProps> {}\\n\\n    interface GProps extends SVGPresentationAttributes {}\\n\\n    /**\\n     * The <G /> SVG element is a container used to group other SVG elements.\\n     * Transformations applied to the <G /> element are performed on its child elements, and its attributes are inherited by its children.\\n     */\\n    class G extends React.Component<GProps> {}\\n\\n    interface StopProps {\\n      offset: string | number;\\n      stopColor: string;\\n      stopOpacity?: string | number;\\n    }\\n\\n    /**\\n     * The SVG <Stop /> element defines a color and its position to use on a gradient. This element is always a child of a <LinearGradient /> or <RadialGradient /> element\\n     */\\n    class Stop extends React.Component<StopProps> {}\\n\\n    interface DefsProps {}\\n\\n    /**\\n     * The <Defs /> element is used to store graphical objects that will be used at a later time. Objects created inside a <Defs /> element are not rendered directly. To display them you have to reference them\\n     */\\n    class Defs extends React.Component<DefsProps> {}\\n\\n    interface ClipPathProps {\\n      id?: string;\\n    }\\n\\n    /**\\n     * The <ClipPath /> SVG element defines a clipping path, to be used by the clipPath property.\\n     * A clipping path restricts the region to which paint can be applied. Conceptually, parts of the drawing that lie outside of the region bounded by the clipping path are not drawn.\\n     */\\n    class ClipPath extends React.Component<ClipPathProps> {}\\n\\n    interface LinearGradientProps {\\n      x1: string | number;\\n      x2: string | number;\\n      y1: string | number;\\n      y2: string | number;\\n    }\\n\\n    /**\\n     * The <LinearGradient /> element lets authors define linear gradients that can be applied to fill or stroke of graphical elements.\\n     */\\n    class LinearGradient extends React.Component<LinearGradientProps> {}\\n\\n    interface RadialGradientProps {\\n      cx: string | number;\\n      cy: string | number;\\n      fr: string | number;\\n      fx: string | number;\\n      fy: string | number;\\n    }\\n\\n    /**\\n     * The <RadialGradient /> element lets authors define radial gradients that can be applied to fill or stroke of graphical elements.\\n     */\\n    class RadialGradient extends React.Component<RadialGradientProps> {}\\n\\n    interface BlobProviderParams {\\n      blob: Blob | null;\\n      url: string | null;\\n      loading: boolean;\\n      error: Error | null;\\n    }\\n    interface BlobProviderProps {\\n      document: React.ReactElement<DocumentProps>;\\n      children: (params: BlobProviderParams) => React.ReactNode;\\n    }\\n\\n    /**\\n     * Easy and declarative way of getting document's blob data without\\n     * showing it on screen.\\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\\n     * @platform web\\n     */\\n    class BlobProvider extends React.Component<BlobProviderProps> {}\\n\\n    interface PDFViewerProps {\\n      width?: number | string;\\n      height?: number | string;\\n      style?: Style | Style[];\\n      className?: string;\\n      children?: React.ReactElement<DocumentProps>;\\n      innerRef?: React.Ref<HTMLIFrameElement>;\\n    }\\n\\n    /**\\n     * Iframe PDF viewer for client-side generated documents.\\n     * @platform web\\n     */\\n    class PDFViewer extends React.Component<PDFViewerProps> {}\\n\\n    interface PDFDownloadLinkProps {\\n      document: React.ReactElement<DocumentProps>;\\n      fileName?: string;\\n      style?: Style | Style[];\\n      className?: string;\\n      children?:\\n        | React.ReactNode\\n        | ((params: BlobProviderParams) => React.ReactNode);\\n    }\\n\\n    /**\\n     * Anchor tag to enable generate and download PDF documents on the fly.\\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\\n     * @platform web\\n     */\\n    class PDFDownloadLink extends React.Component<PDFDownloadLinkProps> {}\\n\\n    interface UsePDFInstance {\\n      loading: boolean;\\n      blob: Blob | null;\\n      url: string | null;\\n      error: string | null;\\n    }\\n\\n    /**\\n     * React hook for creating and updating a PDF document instance\\n     * @platform web\\n     */\\n    function usePDF(options: {\\n      document: React.ReactElement<DocumentProps>;\\n    }): [UsePDFInstance, () => void];\\n\\n    const Font: FontStore;\\n\\n    const StyleSheet: {\\n      hairlineWidth: number;\\n      create: <T extends Styles>(styles: T) => T;\\n      resolve: (\\n        style: Style,\\n        container: {\\n          width: number;\\n          height: number;\\n          orientation: Orientation;\\n        },\\n      ) => Style;\\n      flatten: (...styles: (Style[] | Style | undefined)[]) => Style;\\n      absoluteFillObject: {\\n        position: 'absolute';\\n        left: 0;\\n        right: 0;\\n        top: 0;\\n        bottom: 0;\\n      };\\n    };\\n\\n    const version: any;\\n\\n    const PDFRenderer: any;\\n\\n    const pdf: (\\n      initialValue?: React.ReactElement<DocumentProps>,\\n      onChange?: () => {},\\n    ) => {\\n      container: any;\\n      isDirty: () => boolean;\\n      updateContainer: (document: React.ReactElement<any>) => void;\\n      toBuffer: () => Promise<NodeJS.ReadableStream>;\\n      toBlob: () => Promise<Blob>;\\n      toString: () => string;\\n    };\\n\\n    const renderToStream: (\\n      document: React.ReactElement<DocumentProps>,\\n    ) => Promise<NodeJS.ReadableStream>;\\n\\n    const renderToString: (\\n      document: React.ReactElement<DocumentProps>,\\n    ) => string;\\n\\n    const renderToFile: (\\n      document: React.ReactElement<DocumentProps>,\\n      filePath: string,\\n      callback?: (output: NodeJS.ReadableStream, filePath: string) => any,\\n    ) => Promise<NodeJS.ReadableStream>;\\n\\n    const render: typeof renderToFile;\\n  }\\n\\n  const pdf: typeof ReactPDF.pdf;\\n  const Document: typeof ReactPDF.Document;\\n  const Page: typeof ReactPDF.Page;\\n  const View: typeof ReactPDF.View;\\n  const Image: typeof ReactPDF.Image;\\n  const Text: typeof ReactPDF.Text;\\n  const Canvas: typeof ReactPDF.Canvas;\\n  const Link: typeof ReactPDF.Link;\\n  const Note: typeof ReactPDF.Note;\\n  const Svg: typeof ReactPDF.Svg;\\n  const Line: typeof ReactPDF.Line;\\n  const Polyline: typeof ReactPDF.Polyline;\\n  const Polygon: typeof ReactPDF.Polygon;\\n  const Path: typeof ReactPDF.Path;\\n  const Rect: typeof ReactPDF.Rect;\\n  const Circle: typeof ReactPDF.Circle;\\n  const Ellipse: typeof ReactPDF.Ellipse;\\n  const G: typeof ReactPDF.G;\\n  const Stop: typeof ReactPDF.Stop;\\n  const Defs: typeof ReactPDF.Defs;\\n  const ClipPath: typeof ReactPDF.ClipPath;\\n  const LinearGradient: typeof ReactPDF.LinearGradient;\\n  const RadialGradient: typeof ReactPDF.RadialGradient;\\n  const Font: typeof ReactPDF.Font;\\n  const StyleSheet: typeof ReactPDF.StyleSheet;\\n  const PDFRenderer: typeof ReactPDF.PDFRenderer;\\n  const version: typeof ReactPDF.version;\\n  const renderToFile: typeof ReactPDF.renderToFile;\\n  const renderToString: typeof ReactPDF.renderToString;\\n  const renderToStream: typeof ReactPDF.renderToStream;\\n  const usePDF: typeof ReactPDF.usePDF;\\n  const PDFViewer: typeof ReactPDF.PDFViewer;\\n  const BlobProvider: typeof ReactPDF.BlobProvider;\\n  const PDFDownloadLink: typeof ReactPDF.PDFDownloadLink;\\n\\n  export default ReactPDF;\\n\\n  export {\\n    pdf,\\n    Document,\\n    Page,\\n    View,\\n    Image,\\n    Text,\\n    Canvas,\\n    Link,\\n    Note,\\n    Svg,\\n    Line,\\n    Polyline,\\n    Polygon,\\n    Path,\\n    Rect,\\n    Circle,\\n    Ellipse,\\n    G,\\n    Stop,\\n    Defs,\\n    ClipPath,\\n    LinearGradient,\\n    RadialGradient,\\n    Font,\\n    StyleSheet,\\n    PDFRenderer,\\n    version,\\n    renderToFile,\\n    renderToStream,\\n    renderToString,\\n    usePDF,\\n    PDFViewer,\\n    BlobProvider,\\n    PDFDownloadLink,\\n  };\\n}\\n\\n[end of index.d.ts]\\n[start of resolvePagination.js]\\n/* eslint-disable no-continue */\\n/* eslint-disable prefer-destructuring */\\n\\nimport * as R from 'ramda';\\nimport * as P from '@react-pdf/primitives';\\n\\nimport splitText from '../text/splitText';\\nimport splitNode from '../node/splitNode';\\nimport createInstance from '../node/createInstance';\\nimport shouldNodeBreak from '../node/shouldBreak';\\nimport getContentArea from '../page/getContentArea';\\nimport resolveTextLayout from './resolveTextLayout';\\nimport resolveInheritance from './resolveInheritance';\\nimport { resolvePageDimensions } from './resolveDimensions';\\n\\nconst isText = R.propEq('type', P.Text);\\n\\n// Prevent splitting elements by low decimal numbers\\nconst SAFTY_THRESHOLD = 0.001;\\n\\nconst assingChildren = R.assoc('children');\\n\\nconst getTop = R.pathOr(0, ['box', 'top']);\\n\\nconst getHeight = R.path(['box', 'height']);\\n\\nconst getChildren = R.propOr([], 'children');\\n\\nconst isElementOutside = R.useWith(R.lte, [R.identity, getTop]);\\n\\nconst isFixed = R.pathEq(['props', 'fixed'], true);\\n\\nconst allFixed = R.all(isFixed);\\n\\nconst isDynamic = R.hasPath(['props', 'render']);\\n\\nconst compose = (...fns) => (value, ...args) => {\\n  let result = value;\\n  const reversedFns = R.reverse(fns);\\n\\n  for (let i = 0; i < reversedFns.length; i += 1) {\\n    const fn = reversedFns[i];\\n    result = fn(result, ...args);\\n  }\\n\\n  return result;\\n};\\n\\nconst relayoutPage = compose(\\n  resolveTextLayout,\\n  resolveInheritance,\\n  resolvePageDimensions,\\n);\\n\\nconst splitNodes = (height, nodes) => {\\n  const currentChildren = [];\\n  const nextChildren = [];\\n\\n  for (let i = 0; i < nodes.length; i += 1) {\\n    const child = nodes[i];\\n    const futureNodes = nodes.slice(i + 1);\\n    const futureFixedNodes = R.filter(isFixed, futureNodes);\\n\\n    const nodeTop = getTop(child);\\n    const nodeHeight = getHeight(child);\\n    const isOutside = isElementOutside(height, child);\\n    const shouldBreak = shouldNodeBreak(child, futureNodes, height);\\n    const shouldSplit = height + SAFTY_THRESHOLD < nodeTop + nodeHeight;\\n\\n    if (isFixed(child)) {\\n      nextChildren.push(child);\\n      currentChildren.push(child);\\n      continue;\\n    }\\n\\n    if (isOutside) {\\n      const next = R.evolve({ box: { top: R.subtract(R.__, height) } })(child);\\n      nextChildren.push(next);\\n      continue;\\n    }\\n\\n    if (shouldBreak) {\\n      const next = R.evolve({\\n        box: { top: R.subtract(R.__, height) },\\n        props: R.evolve({ break: R.always(false) }),\\n      })(child);\\n\\n      currentChildren.push(...futureFixedNodes);\\n      nextChildren.push(next, ...futureNodes);\\n      break;\\n    }\\n\\n    if (shouldSplit) {\\n      const [currentChild, nextChild] = split(child, height);\\n\\n      if (currentChild) currentChildren.push(currentChild);\\n      if (nextChild) nextChildren.push(nextChild);\\n\\n      continue;\\n    }\\n\\n    currentChildren.push(child);\\n  }\\n\\n  return [currentChildren, nextChildren];\\n};\\n\\nconst splitChildren = (height, node) => {\\n  const children = getChildren(node);\\n  const availableHeight = height - getTop(node);\\n  return splitNodes(availableHeight, children);\\n};\\n\\nconst splitView = (node, height) => {\\n  const [currentNode, nextNode] = splitNode(node, height);\\n  const [currentChilds, nextChildren] = splitChildren(height, node);\\n\\n  return [\\n    assingChildren(currentChilds)(currentNode),\\n    assingChildren(nextChildren)(nextNode),\\n  ];\\n};\\n\\nconst split = R.ifElse(isText, splitText, splitView);\\n\\nconst shouldResolveDynamicNodes = node => {\\n  const children = node.children || [];\\n  return isDynamic(node) || children.some(shouldResolveDynamicNodes);\\n};\\n\\nconst resolveDynamicNodes = (props, node) => {\\n  const isNodeDynamic = isDynamic(node);\\n\\n  // Call render prop on dynamic nodes and append result to children\\n  const resolveChildren = (children = []) => {\\n    if (isNodeDynamic) {\\n      const res = node.props.render(props);\\n      return [createInstance(res)].filter(Boolean);\\n    }\\n\\n    return children.map(c => resolveDynamicNodes(props, c));\\n  };\\n\\n  // We reset dynamic text box so it can be computed again later on\\n  const resolveBox = box => {\\n    return isNodeDynamic && isText(node) ? { ...box, height: 0 } : box;\\n  };\\n\\n  return R.evolve(\\n    {\\n      box: resolveBox,\\n      children: resolveChildren,\\n      lines: prev => (isNodeDynamic ? null : prev),\\n    },\\n    node,\\n  );\\n};\\n\\nconst resolveDynamicPage = (props, page, fontStore) => {\\n  if (shouldResolveDynamicNodes(page)) {\\n    const resolvedPage = resolveDynamicNodes(props, page);\\n    return relayoutPage(resolvedPage, fontStore);\\n  }\\n\\n  return page;\\n};\\n\\nconst splitPage = (page, pageNumber, fontStore) => {\\n  const contentArea = getContentArea(page);\\n  const height = R.path(['style', 'height'], page);\\n  const dynamicPage = resolveDynamicPage({ pageNumber }, page, fontStore);\\n\\n  const [currentChilds, nextChilds] = splitNodes(\\n    contentArea,\\n    dynamicPage.children,\\n  );\\n\\n  const relayout = node => relayoutPage(node, fontStore);\\n\\n  const currentPage = R.compose(\\n    relayout,\\n    assingChildren(currentChilds),\\n    R.assocPath(['box', 'height'], height),\\n  )(page);\\n\\n  if (R.isEmpty(nextChilds) || allFixed(nextChilds)) return [currentPage, null];\\n\\n  const nextPage = R.compose(\\n    relayout,\\n    assingChildren(nextChilds),\\n    R.dissocPath(['box', 'height']),\\n  )(page);\\n\\n  return [currentPage, nextPage];\\n};\\n\\nconst resolvePageIndices = fontStore => (page, pageNumber, pages) => {\\n  const totalPages = pages.length;\\n\\n  const props = {\\n    totalPages,\\n    pageNumber: pageNumber + 1,\\n    subPageNumber: page.subPageNumber + 1,\\n    subPageTotalPages: page.subPageTotalPages,\\n  };\\n\\n  return resolveDynamicPage(props, page, fontStore);\\n};\\n\\nconst assocSubPageData = subpages => {\\n  return subpages.map((page, i) => ({\\n    ...page,\\n    subPageNumber: i,\\n    subPageTotalPages: subpages.length,\\n  }));\\n};\\n\\nconst dissocSubPageData = page => {\\n  return R.compose(\\n    R.dissoc('subPageNumber'),\\n    R.dissoc('subPageTotalPages'),\\n  )(page);\\n};\\n\\nconst paginate = (page, pageNumber, fontStore) => {\\n  if (!page) return [];\\n\\n  let splittedPage = splitPage(page, pageNumber, fontStore);\\n\\n  const pages = [splittedPage[0]];\\n  let nextPage = splittedPage[1];\\n\\n  while (nextPage !== null) {\\n    splittedPage = splitPage(nextPage, pageNumber + pages.length, fontStore);\\n\\n    pages.push(splittedPage[0]);\\n    nextPage = splittedPage[1];\\n  }\\n\\n  return pages;\\n};\\n\\n/**\\n * Performs pagination. This is the step responsible of breaking the whole document\\n * into pages following pagiation rules, such as `fixed`, `break` and dynamic nodes.\\n *\\n * @param {Object} node\\n * @param {Object} fontStore font store\\n * @returns {Object} layout node\\n */\\nconst resolvePagination = (doc, fontStore) => {\\n  let pages = [];\\n  let pageNumber = 1;\\n\\n  for (let i = 0; i < doc.children.length; i += 1) {\\n    const page = doc.children[i];\\n    let subpages = paginate(page, pageNumber, fontStore);\\n\\n    subpages = assocSubPageData(subpages);\\n    pageNumber += subpages.length;\\n    pages = pages.concat(subpages);\\n  }\\n\\n  pages = pages.map(\\n    R.compose(dissocSubPageData, resolvePageIndices(fontStore)),\\n  );\\n\\n  return assingChildren(pages, doc);\\n};\\n\\nexport default resolvePagination;\\n\\n[end of resolvePagination.js]\\n[start of bug_report.md]\\n---\\nname: Bug report\\nabout: Create a report to help us improve\\ntitle: ''\\nlabels: ''\\nassignees: ''\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior including code snippet (if applies):\\n1. Go to '...'\\n2. Click on '....'\\n3. Scroll down to '....'\\n4. See error\\n\\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n**Screenshots**\\nIf applicable, add screenshots to help explain your problem.\\n\\n**Desktop (please complete the following information):**\\n - OS: [e.g. MacOS, Windows]\\n - Browser [e.g. chrome, safari]\\n - React-pdf version [e.g. v1.1.0]\\n\\n<!-- Love react-pdf? Please consider supporting our collective:\\n\\ud83d\\udc49  https://opencollective.com/react-pdf/donate -->\\n\\n[end of bug_report.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "index.js",
        "index.js",
        "index.d.ts",
        "resolvePagination.js",
        "bug_report.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "8ac211c1-ff1c-463b-af48-ef648360ad95",
        "score": 0.01639344262295082,
        "payload": {
          "text": "/* eslint-disable jsx-a11y/anchor-is-valid */\n\nimport React from 'react';\nimport {\n  Document,\n  Page,\n  View,\n  Text,\n  Link,\n  Font,\n  StyleSheet,\n} from '@react-pdf/renderer';\n\nconst styles = StyleSheet.create({\n  title: {\n    margin: 20,\n    fontSize: 25,\n    textAlign: 'center',\n    backgroundColor: '#e4e4e4',\n    textTransform: 'uppercase',\n    fontFamily: 'Oswald',\n  },\n  body: {\n    flexGrow: 1,\n  },\n  row: {\n    flexGrow: 1,\n    flexDirection: 'row',\n  },\n  block: {\n    flexGrow: 1,\n  },\n  text: {\n    width: '60%',\n    margin: 10,\n    fontFamily: 'Oswald',\n    textAlign: 'justify',\n  },\n  fill1: {\n    width: '40%',\n    backgroundColor: '#e14427',\n  },\n  fill2: {\n    flexGrow: 2,\n    backgroundColor: '#e6672d',\n  },\n  fill3: {\n    flexGrow: 2,\n    backgroundColor: '#e78632',\n  },\n  fill4: {\n    flexGrow: 2,\n    backgroundColor: '#e29e37',\n  },\n});\n\nFont.register({\n  family: 'Oswald',\n  src: 'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\n});\n\nexport default () => (\n  <Document>\n    <Page size=\"A4\">\n      <Link\n        style={styles.title}\n        src=\"https://es.wikipedia.org/wiki/Lorem_ipsum\"\n      >\n        Lorem Ipsum\n      </Link>\n      <View style={styles.body}>\n        <View style={styles.row}>\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n          <View style={styles.fill1} />\n        </View>\n        <View style={styles.row}>\n          <View style={styles.fill2} />\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n        </View>\n        <View style={styles.row}>\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n          <View style={styles.fill3} />\n        </View>\n      </View>\n    </Page>\n  </Document>\n);\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/examples/src/text/index.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "263d6735-aebb-414d-b268-3183636eacbf",
        "score": 0.016129032258064516,
        "payload": {
          "text": "import React from 'react';\nimport {\n  Document,\n  Font,\n  Page,\n  Text,\n  Image,\n  StyleSheet,\n} from '@react-pdf/renderer';\n\nconst styles = StyleSheet.create({\n  body: {\n    paddingTop: 35,\n    paddingBottom: 65,\n    paddingHorizontal: 35,\n  },\n  title: {\n    fontSize: 24,\n    textAlign: 'center',\n    fontFamily: 'Oswald',\n  },\n  author: {\n    fontSize: 12,\n    textAlign: 'center',\n    marginBottom: 40,\n  },\n  subtitle: {\n    fontSize: 18,\n    margin: 12,\n    fontFamily: 'Oswald',\n  },\n  text: {\n    margin: 12,\n    fontSize: 14,\n    textAlign: 'justify',\n    fontFamily: 'Times-Roman',\n  },\n  image: {\n    marginVertical: 15,\n    marginHorizontal: 100,\n  },\n  header: {\n    fontSize: 12,\n    marginBottom: 20,\n    textAlign: 'center',\n    color: 'grey',\n  },\n  pageNumber: {\n    position: 'absolute',\n    fontSize: 12,\n    bottom: 30,\n    left: 0,\n    right: 0,\n    textAlign: 'center',\n    color: 'grey',\n  },\n});\n\nFont.register({\n  family: 'Oswald',\n  src: 'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\n});\n\nconst Subtitle = ({ children, ...props }) => (\n  <Text style={styles.subtitle} {...props}>\n    {children}\n  </Text>\n);\n\nexport default () => (\n  <Document>\n    <Page style={styles.body} wrap>\n      <Text style={styles.header} fixed>\n        ~ Created with react-pdf ~\n      </Text>\n      <Text style={styles.title}>Don Quijote de la Mancha</Text>\n      <Text style={styles.author}>Miguel de Cervantes</Text>\n      <Image\n        style={styles.image}\n        src=\"http://static.donquijote.org/images/blogs/dq-reg/don-quijote-de-la-mancha.jpg\"\n      />\n      <Subtitle>\n        Cap\u00edtulo I: Que trata de la condici\u00f3n y ejercicio del famoso hidalgo D.\n        Quijote de la Mancha\n      </Subtitle>\n      <Text style={styles.text}>\n        En un lugar de la Mancha, de cuyo nombre no quiero acordarme, no ha\n        mucho tiempo que viv\u00eda un hidalgo de los de lanza en astillero, adarga\n        antigua, roc\u00edn flaco y galgo corredor. Una olla de algo m\u00e1s vaca que\n        carnero, salpic\u00f3n las m\u00e1s noches, duelos y quebrantos los s\u00e1bados,\n        lentejas los viernes, alg\u00fan palomino de a\u00f1adidura los domingos,\n        consum\u00edan las tres partes de su hacienda. El resto della conclu\u00edan sayo\n        de velarte, calzas de velludo para las fiestas con sus pantuflos de lo\n        mismo, los d\u00edas de entre semana se honraba con su vellori de lo m\u00e1s\n        fino. Ten\u00eda en su casa una ama que pasaba de los cuarenta, y una sobrina\n        que no llegaba a los veinte, y un mozo de campo y plaza, que as\u00ed\n        ensillaba el roc\u00edn como tomaba la podadera. Frisaba la edad de nuestro\n        hidalgo con los cincuenta a\u00f1os, era de complexi\u00f3n recia, seco de carnes,\n        enjuto de rostro; gran madrugador y amigo de la caza. Quieren decir que\n        ten\u00eda el sobrenombre de Quijada o Quesada (que en esto hay alguna\n        diferencia en los autores que deste caso escriben), aunque por\n        conjeturas veros\u00edmiles se deja entender que se llama Quijana; pero esto\n        importa poco a nuestro cuento; basta que en la narraci\u00f3n d\u00e9l no se salga\n        un punto de la verdad.\n      </Text>\n      <Text style={styles.text}>\n        Es, pues, de saber, que este sobredicho hidalgo, los ratos que estaba\n        ocioso (que eran los m\u00e1s del a\u00f1o) se daba a leer libros de caballer\u00edas\n        con tanta afici\u00f3n y gusto, que olvid\u00f3 casi de todo punto el ejercicio de\n        la caza, y aun la administraci\u00f3n de su hacienda; y lleg\u00f3 a tanto su\n        curiosidad y desatino en esto, que vendi\u00f3 muchas hanegas de tierra de\n        sembradura, para comprar libros de caballer\u00edas en que leer; y as\u00ed llev\u00f3\n        a su casa todos cuantos pudo haber dellos; y de todos ningunos le\n        parec\u00edan tan bien como los que compuso el famoso Feliciano de Silva:\n        porque la claridad de su prosa, y aquellas intrincadas razones suyas, le\n        parec\u00edan de perlas; y m\u00e1s cuando llegaba a leer aquellos requiebros y\n        cartas de desaf\u00edo, donde en muchas partes hallaba escrito: la raz\u00f3n de\n        la sinraz\u00f3n que a mi raz\u00f3n se hace, de tal manera mi raz\u00f3n enflaquece,\n        que con raz\u00f3n me quejo.\n      </Text>\n      <Text style={styles.text}>\n        Con estas y semejantes razones perd\u00eda el pobre caballero el juicio, y\n        desvel\u00e1base por entenderlas, y desentra\u00f1arles el sentido, que no se lo\n        sacara, ni las entendiera el mismo Arist\u00f3teles, si resucitara para s\u00f3lo\n        ello. No estaba muy bien con las heridas que don Belianis daba y\n        recib\u00eda, porque se imaginaba que por grandes maestros que le hubiesen\n        curado, no dejar\u00eda de tener el rostro y todo el cuerpo lleno de\n        cicatrices y se\u00f1ales; pero con todo alababa en su autor aquel acabar su\n        libro con la promesa de aquella inacabable aventura, y muchas veces le\n        vino deseo de tomar la pluma, y darle fin al pie de la letra como all\u00ed\n        se promete; y sin duda alguna lo hiciera, y aun saliera con ello, si\n        otros mayores y continuos pensamientos no se lo estorbaran. Tuvo muchas\n        veces competencia con el cura de su lugar (que era hombre docto graduado\n        en Sig\u00fcenza), sobre cu\u00e1l hab\u00eda sido mejor caballero, Palmer\u00edn de\n        Inglaterra o Amad\u00eds de Gaula; mas maese Nicol\u00e1s, barbero del mismo\n        pueblo, dec\u00eda que ninguno llegaba al caballero del Febo, y que si alguno\n        se le pod\u00eda comparar, era don Galaor, hermano de Amad\u00eds de Gaula, porque\n        ten\u00eda muy acomodada condici\u00f3n para todo; que no era caballero\n        melindroso, ni tan llor\u00f3n como su hermano, y que en lo de la valent\u00eda no\n        le iba en zaga.\n      </Text>\n      <Text style={styles.text}>\n        En resoluci\u00f3n, \u00e9l se enfrasc\u00f3 tanto en su lectura, que se le pasaban las\n        noches leyendo de claro en claro, y los d\u00edas de turbio en turbio, y as\u00ed,\n        del poco dormir y del mucho leer, se le sec\u00f3 el cerebro, de manera que\n        vino a perder el juicio. Llen\u00f3sele la fantas\u00eda de todo aquello que le\u00eda\n        en los libros, as\u00ed de encantamientos, como de pendencias, batallas,\n        desaf\u00edos, heridas, requiebros, amores, tormentas y disparates\n        imposibles, y asent\u00f3sele de tal modo en la imaginaci\u00f3n que era verdad\n        toda aquella m\u00e1quina de aquellas so\u00f1adas invenciones que le\u00eda, que para\n        \u00e9l no hab\u00eda otra historia m\u00e1s cierta en el mundo.\n      </Text>\n      <Subtitle break>\n        Cap\u00edtulo II: Que trata de la primera salida que de su tierra hizo el\n        ingenioso Don Quijote\n      </Subtitle>\n      <Image\n        style={styles.image}\n        src=\"https://panampost.com/wp-content/uploads/don-quijote-lessons.jpg\"\n      />\n      <Text style={styles.text}>\n        Hechas, pues, estas prevenciones, no quiso aguardar m\u00e1s tiempo a poner\n        en efeto su pensamiento, apret\u00e1ndole a ello la falta que \u00e9l pensaba que\n        hac\u00eda en el mundo su tardanza, seg\u00fan eran los agravios que pensaba\n        deshacer, tuertos que enderezar, sinrazones que emendar y abusos que\n        mejorar y deudas que satisfacer. Y as\u00ed, sin dar parte a persona alguna\n        de su intenci\u00f3n y sin que nadie le viese, una ma\u00f1ana, antes del d\u00eda, que\n        era uno de los calurosos del mes de Julio, se arm\u00f3 de todas sus armas,\n        subi\u00f3 sobre Rocinante, puesta su mal compuesta celada, embraz\u00f3 su\n        adarga, tom\u00f3 su lanza y por la puerta falsa de un corral sali\u00f3 al campo\n        con grand\u00edsimo contento y alborozo de ver con cu\u00e1nta facilidad hab\u00eda\n        dado principio a su buen deseo. Mas apenas se vio en el campo cuando le\n        asalt\u00f3 un pensamiento terrible, y tal, que por poco le hiciera dejar la\n        comenzada empresa; y fue que le vino a la memoria que no era armado\n        caballero, y que, conforme a ley de caballer\u00eda, ni pod\u00eda ni deb\u00eda tomar\n        armas con ning\u00fan caballero; y puesto que lo fuera, hab\u00eda de llevar armas\n        blancas, como novel caballero, sin empresa en el escudo, hasta que por\n        su esfuerzo la ganase. Estos pensamientos le hicieron titubear en su\n        prop\u00f3sito; mas pudiendo m\u00e1s su locura que otra raz\u00f3n alguna, propuso de\n        hacerse armar caballero del primero que topase, a imitaci\u00f3n de otros\n        muchos que as\u00ed lo hicieron, seg\u00fan \u00e9l hab\u00eda le\u00eddo en los libros que tal\n        le ten\u00edan. En lo de las armas blancas, pensaba limpiarlas de manera, en\n        teniendo lugar, que lo fuesen m\u00e1s que un arminio; y con esto se quiet\u00f3 y\n        prosigui\u00f3 su camino, sin llevar otro que aquel que su caballo quer\u00eda,\n        creyendo que en aquello consist\u00eda la fuerza de las aventuras\n      </Text>\n      <Text style={styles.text}>\n        Yendo, pues, caminando nuestro flamante aventurero, iba hablando consigo\n        mesmo, y diciendo: \u2014\u00bfQui\u00e9n duda, sino que en los venideros tiempos,\n        cuando salga a luz la verdadera historia de mis famosos hechos, que el\n        sabio que los escribiere no ponga, cuando llegue a contar esta mi\n        primera salida tan de ma\u00f1ana, desta manera?: Apenas hab\u00eda el rubicundo\n        Apolo tendido por la faz de la ancha y espaciosa tierra las doradas\n        hebras de sus hermosos cabellos, y apenas los peque\u00f1os y pintados\n        pajarillos con sus arpadas lenguas hab\u00edan saludado con dulce y meliflua\n        armon\u00eda la venida de la rosada Aurora, que, dejando la blanda cama del\n        celoso marido, por las puertas y balcones del manchego horizonte a los\n        mortales se mostraba, cuando el famoso caballero don Quijote de la\n        Mancha, dejando las ociosas plumas, subi\u00f3 sobre su famoso caballo\n        Rocinante y comenz\u00f3 a caminar por el antiguo y conocido Campo de\n        Montiel.\n      </Text>\n      <Text style={styles.text}>\n        Y era la verdad que por \u00e9l caminaba; y a\u00f1adi\u00f3 diciendo: \u2014Dichosa edad y\n        siglo dichoso aquel adonde saldr\u00e1n a luz las famosas haza\u00f1as m\u00edas,\n        dignas de entallarse en bronces, esculpirse en m\u00e1rmoles y pintarse en\n        tablas, para memoria en lo futuro. \u00a1Oh t\u00fa, sabio encantador, quienquiera\n        que seas, a quien ha de tocar el ser coronista desta peregrina historia!\n        Ru\u00e9gote que no te olvides de mi buen Rocinante, compa\u00f1ero eterno m\u00edo en\n        todos mis caminos y carreras.\n      </Text>\n      <Text style={styles.text}>\n        Luego volv\u00eda diciendo, como si verdaderamente fuera enamorado: \u2014\u00a1Oh\n        princesa Dulcinea, se\u00f1ora deste cautivo coraz\u00f3n! Mucho agravio me\n        habedes fecho en despedirme y reprocharme con el riguroso afincamiento\n        de mandarme no parecer ante la vuestra fermosura. Pl\u00e9gaos, se\u00f1ora, de\n        membraros deste vuestro sujeto coraz\u00f3n, que tantas cuitas por vuestro\n        amor padece. Con estos iba ensartando otros disparates, todos al modo de\n        los que sus libros le hab\u00edan ense\u00f1ado, imitando en cuanto pod\u00eda su\n        lenguaje. Con esto caminaba tan despacio, y el sol entraba tan apriesa y\n        con tanto ardor, que fuera bastante a derretirle los sesos, si algunos\n        tuviera\n      </Text>\n      <Text style={styles.text}>\n        Casi todo aquel d\u00eda camin\u00f3 sin acontecerle cosa que de contar fuese, de\n        lo cual se desesperaba, porque quisiera topar luego luego con quien\n        hacer experiencia del valor de su fuerte brazo. Autores hay que dicen\n        que la primera aventura que le avino fue la del Puerto L\u00e1pice, otros\n        dicen que la de los molinos de viento; pero lo que yo he podido\n        averiguar en este caso, y lo que he hallado escrito en los anales de la\n        Mancha, es que \u00e9l anduvo todo aquel d\u00eda, y, al anochecer, su roc\u00edn y \u00e9l\n        se hallaron cansados y muertos de hambre, y que, mirando a todas partes\n        por ver si descubrir\u00eda alg\u00fan castillo o alguna majada de pastores donde\n        recogerse y adonde pudiese remediar su mucha hambre y necesidad, vio, no\n        lejos del camino por donde iba, una venta, que fue como si viera una\n        estrella que, no a los portales, sino a los alc\u00e1zares de su redenci\u00f3n le\n        encaminaba. Diose priesa a caminar, y lleg\u00f3 a ella a tiempo que\n        anochec\u00eda.\n      </Text>\n      <Text\n        style={styles.pageNumber}\n        render={({ pageNumber, totalPages }) => `${pageNumber} / ${totalPages}`}\n        fixed\n      />\n    </Page>\n  </Document>\n);\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/examples/src/pageWrap/index.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "0337b7eb-280b-42d4-99bd-6b34d7a62963",
        "score": 0.015873015873015872,
        "payload": {
          "text": "declare module '@react-pdf/renderer' {\n  import * as React from 'react';\n  import {\n    Style,\n    PageSize,\n    FontStore,\n    Orientation,\n    SourceObject,\n    HyphenationCallback,\n    SVGPresentationAttributes,\n  } from '@react-pdf/types';\n\n  namespace ReactPDF {\n    interface Styles {\n      [key: string]: Style;\n    }\n\n    interface OnRenderProps {\n      blob?: Blob;\n    }\n\n    interface DocumentProps {\n      title?: string;\n      author?: string;\n      subject?: string;\n      keywords?: string;\n      creator?: string;\n      producer?: string;\n      onRender?: (props: OnRenderProps) => any;\n    }\n\n    /**\n     * This component represent the PDF document itself. It must be the root\n     * of your tree element structure, and under no circumstances should it be\n     * used as children of another react-pdf component. In addition, it should\n     * only have childs of type <Page />.\n     */\n    class Document extends React.Component<DocumentProps> {}\n\n    interface NodeProps {\n      id?: string;\n      style?: Style | Style[];\n      /**\n       * Render component in all wrapped pages.\n       * @see https://react-pdf.org/advanced#fixed-components\n       */\n      fixed?: boolean;\n      /**\n       * Force the wrapping algorithm to start a new page when rendering the\n       * element.\n       * @see https://react-pdf.org/advanced#page-breaks\n       */\n      break?: boolean;\n      /**\n       * Hint that no page wrapping should occur between all sibling elements following the element within n points\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\n       */\n      minPresenceAhead?: number;\n    }\n\n    interface PageProps extends NodeProps {\n      /**\n       * Enable page wrapping for this page.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      size?: PageSize;\n      orientation?: Orientation;\n    }\n\n    /**\n     * Represents single page inside the PDF document, or a subset of them if\n     * using the wrapping feature. A <Document /> can contain as many pages as\n     * you want, but ensure not rendering a page inside any component besides\n     * Document.\n     */\n    class Page extends React.Component<PageProps> {}\n\n    interface ViewProps extends NodeProps {\n      id?: string;\n      /**\n       * Enable/disable page wrapping for element.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      render?: (props: {\n        pageNumber: number;\n        subPageNumber: number;\n      }) => React.ReactNode;\n      children?: React.ReactNode;\n      id?: string;\n    }\n\n    /**\n     * The most fundamental component for building a UI and is designed to be\n     * nested inside other views and can have 0 to many children.\n     */\n    class View extends React.Component<ViewProps> {}\n\n    interface BaseImageProps extends NodeProps {\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      cache?: boolean;\n    }\n\n    interface ImageWithSrcProp extends BaseImageProps {\n      src: SourceObject;\n    }\n\n    interface ImageWithSourceProp extends BaseImageProps {\n      source: SourceObject;\n    }\n\n    type ImageProps = ImageWithSrcProp | ImageWithSourceProp;\n\n    /**\n     * A React component for displaying network or local (Node only) JPG or\n     * PNG images, as well as base64 encoded image strings.\n     */\n    class Image extends React.Component<ImageProps> {}\n\n    interface TextProps extends NodeProps {\n      id?: string;\n      /**\n       * Enable/disable page wrapping for element.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      render?: (props: {\n        pageNumber: number;\n        totalPages: number;\n        subPageNumber: number;\n        subPageTotalPages: number;\n      }) => React.ReactNode;\n      children?: React.ReactNode;\n      id?: string;\n      /**\n       * Override the default hyphenation-callback\n       * @see https://react-pdf.org/fonts#registerhyphenationcallback\n       */\n      hyphenationCallback?: HyphenationCallback;\n      /**\n       * Specifies the minimum number of lines in a text element that must be shown at the bottom of a page or its container.\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\n       */\n      orphans?: number;\n      /**\n       * Specifies the minimum number of lines in a text element that must be shown at the top of a page or its container..\n       * @see https://react-pdf.org/advanced#orphan-&-widow-protection\n       */\n      widows?: number;\n    }\n\n    interface SVGTextProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      x: string | number;\n      y: string | number;\n      /**\n       * Override the default hyphenation-callback\n       * @see https://react-pdf.org/fonts#registerhyphenationcallback\n       */\n      hyphenationCallback?: HyphenationCallback;\n    }\n\n    /**\n     * A React component for displaying text. Text supports nesting of other\n     * Text or Link components to create inline styling.\n     */\n    class Text extends React.Component<TextProps | SVGTextProps> {}\n\n    interface LinkProps extends NodeProps {\n      /**\n       * Enable/disable page wrapping for element.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      src: string;\n      children?: React.ReactNode;\n    }\n\n    /**\n     * A React component for displaying a hyperlink. Link\u2019s can be nested\n     * inside a Text component, or being inside any other valid primitive.\n     */\n    class Link extends React.Component<LinkProps> {}\n\n    interface NoteProps extends NodeProps {\n      children: string;\n    }\n\n    class Note extends React.Component<NoteProps> {}\n\n    interface CanvasProps extends NodeProps {\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      paint: (\n        painter: any,\n        availableWidth: number,\n        availableHeight: number,\n      ) => null;\n    }\n\n    class Canvas extends React.Component<CanvasProps> {}\n\n    interface SVGProps extends NodeProps {\n      /**\n       * Enables debug mode on page bounding box.\n       * @see https://react-pdf.org/advanced#debugging\n       */\n      debug?: boolean;\n      width?: string | number;\n      height?: string | number;\n      viewBox?: string;\n      preserveAspectRatio?: string;\n    }\n\n    /**\n     * The <SVG /> element is a container that defines a new coordinate system and viewport. It is used as the outermost element of SVG documents.\n     */\n    class Svg extends React.Component<SVGProps> {}\n\n    interface LineProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      x1: string | number;\n      x2: string | number;\n      y1: string | number;\n      y2: string | number;\n    }\n\n    /**\n     * The <Line /> element is used to create a line.\n     */\n    class Line extends React.Component<LineProps> {}\n\n    interface PolylineProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      points: string;\n    }\n\n    /**\n     * The <Polyline /> element is used to create any shape that consists of only straight lines (that is connected at several points).\n     */\n    class Polyline extends React.Component<PolylineProps> {}\n\n    interface PolygonProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      points: string;\n    }\n\n    /**\n     * The <Polygon /> element is used to create a graphic that contains at least three sides.\n     * Polygons are made of straight lines, and the shape is \"closed\" (all the lines connect up).\n     */\n    class Polygon extends React.Component<PolygonProps> {}\n\n    interface PathProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      d: string;\n    }\n\n    /**\n     * The <Path /> element is the most powerful element in the SVG library of basic shapes. It can be used to create lines, curves, arcs, and more.\n     */\n    class Path extends React.Component<PathProps> {}\n\n    interface RectProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      x: string | number;\n      y: string | number;\n      width: string | number;\n      height: string | number;\n      rx?: string | number;\n      ry?: string | number;\n    }\n\n    /**\n     * The <Rect /> element is used to create a rectangle and variations of a rectangle shape.\n     */\n    class Rect extends React.Component<RectProps> {}\n\n    interface CircleProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      cx: string | number;\n      cy: string | number;\n      r: string | number;\n    }\n\n    /**\n     * The <Circle /> element is used to create a circle.\n     */\n    class Circle extends React.Component<CircleProps> {}\n\n    interface EllipseProps extends SVGPresentationAttributes {\n      style?: SVGPresentationAttributes;\n      cx: string | number;\n      cy: string | number;\n      rx: string | number;\n      ry: string | number;\n    }\n\n    /**\n     * The <Ellipse /> element is used to create an ellipse.\n     * An ellipse is closely related to a circle. The difference is that an ellipse has an x and a y radius that differs from each other, while a circle has equal x and y radius.\n     */\n    class Ellipse extends React.Component<EllipseProps> {}\n\n    interface GProps extends SVGPresentationAttributes {}\n\n    /**\n     * The <G /> SVG element is a container used to group other SVG elements.\n     * Transformations applied to the <G /> element are performed on its child elements, and its attributes are inherited by its children.\n     */\n    class G extends React.Component<GProps> {}\n\n    interface StopProps {\n      offset: string | number;\n      stopColor: string;\n      stopOpacity?: string | number;\n    }\n\n    /**\n     * The SVG <Stop /> element defines a color and its position to use on a gradient. This element is always a child of a <LinearGradient /> or <RadialGradient /> element\n     */\n    class Stop extends React.Component<StopProps> {}\n\n    interface DefsProps {}\n\n    /**\n     * The <Defs /> element is used to store graphical objects that will be used at a later time. Objects created inside a <Defs /> element are not rendered directly. To display them you have to reference them\n     */\n    class Defs extends React.Component<DefsProps> {}\n\n    interface ClipPathProps {\n      id?: string;\n    }\n\n    /**\n     * The <ClipPath /> SVG element defines a clipping path, to be used by the clipPath property.\n     * A clipping path restricts the region to which paint can be applied. Conceptually, parts of the drawing that lie outside of the region bounded by the clipping path are not drawn.\n     */\n    class ClipPath extends React.Component<ClipPathProps> {}\n\n    interface LinearGradientProps {\n      x1: string | number;\n      x2: string | number;\n      y1: string | number;\n      y2: string | number;\n    }\n\n    /**\n     * The <LinearGradient /> element lets authors define linear gradients that can be applied to fill or stroke of graphical elements.\n     */\n    class LinearGradient extends React.Component<LinearGradientProps> {}\n\n    interface RadialGradientProps {\n      cx: string | number;\n      cy: string | number;\n      fr: string | number;\n      fx: string | number;\n      fy: string | number;\n    }\n\n    /**\n     * The <RadialGradient /> element lets authors define radial gradients that can be applied to fill or stroke of graphical elements.\n     */\n    class RadialGradient extends React.Component<RadialGradientProps> {}\n\n    interface BlobProviderParams {\n      blob: Blob | null;\n      url: string | null;\n      loading: boolean;\n      error: Error | null;\n    }\n    interface BlobProviderProps {\n      document: React.ReactElement<DocumentProps>;\n      children: (params: BlobProviderParams) => React.ReactNode;\n    }\n\n    /**\n     * Easy and declarative way of getting document's blob data without\n     * showing it on screen.\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\n     * @platform web\n     */\n    class BlobProvider extends React.Component<BlobProviderProps> {}\n\n    interface PDFViewerProps {\n      width?: number | string;\n      height?: number | string;\n      style?: Style | Style[];\n      className?: string;\n      children?: React.ReactElement<DocumentProps>;\n      innerRef?: React.Ref<HTMLIFrameElement>;\n    }\n\n    /**\n     * Iframe PDF viewer for client-side generated documents.\n     * @platform web\n     */\n    class PDFViewer extends React.Component<PDFViewerProps> {}\n\n    interface PDFDownloadLinkProps {\n      document: React.ReactElement<DocumentProps>;\n      fileName?: string;\n      style?: Style | Style[];\n      className?: string;\n      children?:\n        | React.ReactNode\n        | ((params: BlobProviderParams) => React.ReactNode);\n    }\n\n    /**\n     * Anchor tag to enable generate and download PDF documents on the fly.\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\n     * @platform web\n     */\n    class PDFDownloadLink extends React.Component<PDFDownloadLinkProps> {}\n\n    interface UsePDFInstance {\n      loading: boolean;\n      blob: Blob | null;\n      url: string | null;\n      error: string | null;\n    }\n\n    /**\n     * React hook for creating and updating a PDF document instance\n     * @platform web\n     */\n    function usePDF(options: {\n      document: React.ReactElement<DocumentProps>;\n    }): [UsePDFInstance, () => void];\n\n    const Font: FontStore;\n\n    const StyleSheet: {\n      hairlineWidth: number;\n      create: <T extends Styles>(styles: T) => T;\n      resolve: (\n        style: Style,\n        container: {\n          width: number;\n          height: number;\n          orientation: Orientation;\n        },\n      ) => Style;\n      flatten: (...styles: (Style[] | Style | undefined)[]) => Style;\n      absoluteFillObject: {\n        position: 'absolute';\n        left: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n      };\n    };\n\n    const version: any;\n\n    const PDFRenderer: any;\n\n    const pdf: (\n      initialValue?: React.ReactElement<DocumentProps>,\n      onChange?: () => {},\n    ) => {\n      container: any;\n      isDirty: () => boolean;\n      updateContainer: (document: React.ReactElement<any>) => void;\n      toBuffer: () => Promise<NodeJS.ReadableStream>;\n      toBlob: () => Promise<Blob>;\n      toString: () => string;\n    };\n\n    const renderToStream: (\n      document: React.ReactElement<DocumentProps>,\n    ) => Promise<NodeJS.ReadableStream>;\n\n    const renderToString: (\n      document: React.ReactElement<DocumentProps>,\n    ) => string;\n\n    const renderToFile: (\n      document: React.ReactElement<DocumentProps>,\n      filePath: string,\n      callback?: (output: NodeJS.ReadableStream, filePath: string) => any,\n    ) => Promise<NodeJS.ReadableStream>;\n\n    const render: typeof renderToFile;\n  }\n\n  const pdf: typeof ReactPDF.pdf;\n  const Document: typeof ReactPDF.Document;\n  const Page: typeof ReactPDF.Page;\n  const View: typeof ReactPDF.View;\n  const Image: typeof ReactPDF.Image;\n  const Text: typeof ReactPDF.Text;\n  const Canvas: typeof ReactPDF.Canvas;\n  const Link: typeof ReactPDF.Link;\n  const Note: typeof ReactPDF.Note;\n  const Svg: typeof ReactPDF.Svg;\n  const Line: typeof ReactPDF.Line;\n  const Polyline: typeof ReactPDF.Polyline;\n  const Polygon: typeof ReactPDF.Polygon;\n  const Path: typeof ReactPDF.Path;\n  const Rect: typeof ReactPDF.Rect;\n  const Circle: typeof ReactPDF.Circle;\n  const Ellipse: typeof ReactPDF.Ellipse;\n  const G: typeof ReactPDF.G;\n  const Stop: typeof ReactPDF.Stop;\n  const Defs: typeof ReactPDF.Defs;\n  const ClipPath: typeof ReactPDF.ClipPath;\n  const LinearGradient: typeof ReactPDF.LinearGradient;\n  const RadialGradient: typeof ReactPDF.RadialGradient;\n  const Font: typeof ReactPDF.Font;\n  const StyleSheet: typeof ReactPDF.StyleSheet;\n  const PDFRenderer: typeof ReactPDF.PDFRenderer;\n  const version: typeof ReactPDF.version;\n  const renderToFile: typeof ReactPDF.renderToFile;\n  const renderToString: typeof ReactPDF.renderToString;\n  const renderToStream: typeof ReactPDF.renderToStream;\n  const usePDF: typeof ReactPDF.usePDF;\n  const PDFViewer: typeof ReactPDF.PDFViewer;\n  const BlobProvider: typeof ReactPDF.BlobProvider;\n  const PDFDownloadLink: typeof ReactPDF.PDFDownloadLink;\n\n  export default ReactPDF;\n\n  export {\n    pdf,\n    Document,\n    Page,\n    View,\n    Image,\n    Text,\n    Canvas,\n    Link,\n    Note,\n    Svg,\n    Line,\n    Polyline,\n    Polygon,\n    Path,\n    Rect,\n    Circle,\n    Ellipse,\n    G,\n    Stop,\n    Defs,\n    ClipPath,\n    LinearGradient,\n    RadialGradient,\n    Font,\n    StyleSheet,\n    PDFRenderer,\n    version,\n    renderToFile,\n    renderToStream,\n    renderToString,\n    usePDF,\n    PDFViewer,\n    BlobProvider,\n    PDFDownloadLink,\n  };\n}\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/renderer/index.d.ts",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "65a4cfd0-509c-4e1a-9af0-0f266ba4876e",
        "score": 0.015625,
        "payload": {
          "text": "/* eslint-disable no-continue */\n/* eslint-disable prefer-destructuring */\n\nimport * as R from 'ramda';\nimport * as P from '@react-pdf/primitives';\n\nimport splitText from '../text/splitText';\nimport splitNode from '../node/splitNode';\nimport createInstance from '../node/createInstance';\nimport shouldNodeBreak from '../node/shouldBreak';\nimport getContentArea from '../page/getContentArea';\nimport resolveTextLayout from './resolveTextLayout';\nimport resolveInheritance from './resolveInheritance';\nimport { resolvePageDimensions } from './resolveDimensions';\n\nconst isText = R.propEq('type', P.Text);\n\n// Prevent splitting elements by low decimal numbers\nconst SAFTY_THRESHOLD = 0.001;\n\nconst assingChildren = R.assoc('children');\n\nconst getTop = R.pathOr(0, ['box', 'top']);\n\nconst getHeight = R.path(['box', 'height']);\n\nconst getChildren = R.propOr([], 'children');\n\nconst isElementOutside = R.useWith(R.lte, [R.identity, getTop]);\n\nconst isFixed = R.pathEq(['props', 'fixed'], true);\n\nconst allFixed = R.all(isFixed);\n\nconst isDynamic = R.hasPath(['props', 'render']);\n\nconst compose = (...fns) => (value, ...args) => {\n  let result = value;\n  const reversedFns = R.reverse(fns);\n\n  for (let i = 0; i < reversedFns.length; i += 1) {\n    const fn = reversedFns[i];\n    result = fn(result, ...args);\n  }\n\n  return result;\n};\n\nconst relayoutPage = compose(\n  resolveTextLayout,\n  resolveInheritance,\n  resolvePageDimensions,\n);\n\nconst splitNodes = (height, nodes) => {\n  const currentChildren = [];\n  const nextChildren = [];\n\n  for (let i = 0; i < nodes.length; i += 1) {\n    const child = nodes[i];\n    const futureNodes = nodes.slice(i + 1);\n    const futureFixedNodes = R.filter(isFixed, futureNodes);\n\n    const nodeTop = getTop(child);\n    const nodeHeight = getHeight(child);\n    const isOutside = isElementOutside(height, child);\n    const shouldBreak = shouldNodeBreak(child, futureNodes, height);\n    const shouldSplit = height + SAFTY_THRESHOLD < nodeTop + nodeHeight;\n\n    if (isFixed(child)) {\n      nextChildren.push(child);\n      currentChildren.push(child);\n      continue;\n    }\n\n    if (isOutside) {\n      const next = R.evolve({ box: { top: R.subtract(R.__, height) } })(child);\n      nextChildren.push(next);\n      continue;\n    }\n\n    if (shouldBreak) {\n      const next = R.evolve({\n        box: { top: R.subtract(R.__, height) },\n        props: R.evolve({ break: R.always(false) }),\n      })(child);\n\n      currentChildren.push(...futureFixedNodes);\n      nextChildren.push(next, ...futureNodes);\n      break;\n    }\n\n    if (shouldSplit) {\n      const [currentChild, nextChild] = split(child, height);\n\n      if (currentChild) currentChildren.push(currentChild);\n      if (nextChild) nextChildren.push(nextChild);\n\n      continue;\n    }\n\n    currentChildren.push(child);\n  }\n\n  return [currentChildren, nextChildren];\n};\n\nconst splitChildren = (height, node) => {\n  const children = getChildren(node);\n  const availableHeight = height - getTop(node);\n  return splitNodes(availableHeight, children);\n};\n\nconst splitView = (node, height) => {\n  const [currentNode, nextNode] = splitNode(node, height);\n  const [currentChilds, nextChildren] = splitChildren(height, node);\n\n  return [\n    assingChildren(currentChilds)(currentNode),\n    assingChildren(nextChildren)(nextNode),\n  ];\n};\n\nconst split = R.ifElse(isText, splitText, splitView);\n\nconst shouldResolveDynamicNodes = node => {\n  const children = node.children || [];\n  return isDynamic(node) || children.some(shouldResolveDynamicNodes);\n};\n\nconst resolveDynamicNodes = (props, node) => {\n  const isNodeDynamic = isDynamic(node);\n\n  // Call render prop on dynamic nodes and append result to children\n  const resolveChildren = (children = []) => {\n    if (isNodeDynamic) {\n      const res = node.props.render(props);\n      return [createInstance(res)].filter(Boolean);\n    }\n\n    return children.map(c => resolveDynamicNodes(props, c));\n  };\n\n  // We reset dynamic text box so it can be computed again later on\n  const resolveBox = box => {\n    return isNodeDynamic && isText(node) ? { ...box, height: 0 } : box;\n  };\n\n  return R.evolve(\n    {\n      box: resolveBox,\n      children: resolveChildren,\n      lines: prev => (isNodeDynamic ? null : prev),\n    },\n    node,\n  );\n};\n\nconst resolveDynamicPage = (props, page, fontStore) => {\n  if (shouldResolveDynamicNodes(page)) {\n    const resolvedPage = resolveDynamicNodes(props, page);\n    return relayoutPage(resolvedPage, fontStore);\n  }\n\n  return page;\n};\n\nconst splitPage = (page, pageNumber, fontStore) => {\n  const contentArea = getContentArea(page);\n  const height = R.path(['style', 'height'], page);\n  const dynamicPage = resolveDynamicPage({ pageNumber }, page, fontStore);\n\n  const [currentChilds, nextChilds] = splitNodes(\n    contentArea,\n    dynamicPage.children,\n  );\n\n  const relayout = node => relayoutPage(node, fontStore);\n\n  const currentPage = R.compose(\n    relayout,\n    assingChildren(currentChilds),\n    R.assocPath(['box', 'height'], height),\n  )(page);\n\n  if (R.isEmpty(nextChilds) || allFixed(nextChilds)) return [currentPage, null];\n\n  const nextPage = R.compose(\n    relayout,\n    assingChildren(nextChilds),\n    R.dissocPath(['box', 'height']),\n  )(page);\n\n  return [currentPage, nextPage];\n};\n\nconst resolvePageIndices = fontStore => (page, pageNumber, pages) => {\n  const totalPages = pages.length;\n\n  const props = {\n    totalPages,\n    pageNumber: pageNumber + 1,\n    subPageNumber: page.subPageNumber + 1,\n    subPageTotalPages: page.subPageTotalPages,\n  };\n\n  return resolveDynamicPage(props, page, fontStore);\n};\n\nconst assocSubPageData = subpages => {\n  return subpages.map((page, i) => ({\n    ...page,\n    subPageNumber: i,\n    subPageTotalPages: subpages.length,\n  }));\n};\n\nconst dissocSubPageData = page => {\n  return R.compose(\n    R.dissoc('subPageNumber'),\n    R.dissoc('subPageTotalPages'),\n  )(page);\n};\n\nconst paginate = (page, pageNumber, fontStore) => {\n  if (!page) return [];\n\n  let splittedPage = splitPage(page, pageNumber, fontStore);\n\n  const pages = [splittedPage[0]];\n  let nextPage = splittedPage[1];\n\n  while (nextPage !== null) {\n    splittedPage = splitPage(nextPage, pageNumber + pages.length, fontStore);\n\n    pages.push(splittedPage[0]);\n    nextPage = splittedPage[1];\n  }\n\n  return pages;\n};\n\n/**\n * Performs pagination. This is the step responsible of breaking the whole document\n * into pages following pagiation rules, such as `fixed`, `break` and dynamic nodes.\n *\n * @param {Object} node\n * @param {Object} fontStore font store\n * @returns {Object} layout node\n */\nconst resolvePagination = (doc, fontStore) => {\n  let pages = [];\n  let pageNumber = 1;\n\n  for (let i = 0; i < doc.children.length; i += 1) {\n    const page = doc.children[i];\n    let subpages = paginate(page, pageNumber, fontStore);\n\n    subpages = assocSubPageData(subpages);\n    pageNumber += subpages.length;\n    pages = pages.concat(subpages);\n  }\n\n  pages = pages.map(\n    R.compose(dissocSubPageData, resolvePageIndices(fontStore)),\n  );\n\n  return assingChildren(pages, doc);\n};\n\nexport default resolvePagination;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/src/steps/resolvePagination.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "62ec4b36-1585-49a0-895a-0ef0f44bd44e",
        "score": 0.015384615384615385,
        "payload": {
          "text": "---\nname: Bug report\nabout: Create a report to help us improve\ntitle: ''\nlabels: ''\nassignees: ''\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior including code snippet (if applies):\n1. Go to '...'\n2. Click on '....'\n3. Scroll down to '....'\n4. See error\n\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n\n**Screenshots**\nIf applicable, add screenshots to help explain your problem.\n\n**Desktop (please complete the following information):**\n - OS: [e.g. MacOS, Windows]\n - Browser [e.g. chrome, safari]\n - React-pdf version [e.g. v1.1.0]\n\n<!-- Love react-pdf? Please consider supporting our collective:\n\ud83d\udc49  https://opencollective.com/react-pdf/donate -->\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/.github/ISSUE_TEMPLATE/bug_report.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-1552",
    "model_patch": "diff --git a/splitText.js b/splitText.js\nindex 0a1b2c3..4d5e6f7 100644\n--- a/splitText.js\n+++ b/splitText.js\n@@ -9,7 +9,7 @@ const getOrphans = R.pathOr(2, ['props', 'orphans']);\n \n const getLineBreak = (node, height) => {\n   const top = getTop(node);\n-  const widows = getWidows(node);\n+  const widows = getWidows(node);\n   const orphans = getOrphans(node);\n   const linesQuantity = node.lines ? node.lines.length : 0;\n   const slicedLine = lineIndexAtHeight(node, height - top);\n \n@@ -43,7 +43,7 @@ const splitText = (node, height) => {\n \n   const current = R.evolve(\n     {\n-      lines: R.slice(0, slicedLineIndex),\n+      lines: R.slice(0, slicedLineIndex),\n       style: R.evolve({\n         marginBottom: zero,\n         paddingBottom: zero,\n@@ -57,7 +57,7 @@ const splitText = (node, height) => {\n \n   const next = R.evolve(\n     {\n-      lines: R.slice(slicedLineIndex, Infinity),\n+      lines: R.slice(slicedLineIndex, Infinity),\n       style: R.evolve({\n         marginTop: zero,\n         paddingTop: zero,\ndiff --git a/resolveTextLayout.js b/resolveTextLayout.js\nindex 1234567..89abcde 100644\n--- a/resolveTextLayout.js\n+++ b/resolveTextLayout.js\n@@ -21,7 +21,7 @@ const resolveTextLayout = (node, fontStore) => {\n   const mapChild = child => resolveTextLayout(child, fontStore);\n \n   return R.compose(\n-    R.evolve({\n+    R.evolve({\n       children: R.map(R.when(isNotSvg, mapChild)),\n     }),\n     R.when(",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 97.28,
      "issue_embedding_time_ms": 97.28,
      "retrieval_time_ms_jina": 0.83,
      "retrieval_time_ms": 0.83,
      "total_retrieval_time_ms": 98.11,
      "generation_time_ms": 3656.78,
      "total_io_time_ms": 3754.89,
      "input_total_token_limit": null,
      "issue_text_tokens": 172,
      "vlm_tokens": 0,
      "retrieved_tokens": 2068,
      "prompt_template_tokens": 523,
      "total_input_prompt_tokens": 2763,
      "output_generated_tokens": 440,
      "total_io_tokens": 3203,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nEmpty Text with defined height throw \\\"Cannot read property '0' of undefined\\\"\\n**Describe the bug**\\r\\n The following snippet throw a TypeError \\\"Cannot read property '0' of undefined\\\"\\r\\n```javascript\\r\\n<View>\\r\\n  <Text style={{ height: 12 }}>{''}</Text>\\r\\n</View>\\r\\n```\\r\\n\\r\\n![screen](https://user-images.githubusercontent.com/1511512/132485670-9c9653b2-e563-438d-b73b-461cc16ed88b.png)\\r\\n![code](https://user-images.githubusercontent.com/1511512/132486410-efc68c57-bc52-4ce3-80b5-c2a67a3e058d.png)\\r\\n\\r\\nMaybe add an extra check `node.lines?.[0]` or provide default array for `lines`  ?\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of splitText.js]\\nimport * as R from 'ramda';\\n\\nimport lineIndexAtHeight from './lineIndexAtHeight';\\nimport heightAtLineIndex from './heightAtLineIndex';\\n\\nconst zero = R.always(0);\\n\\nconst getTop = R.pathOr(0, ['box', 'top']);\\n\\nconst getWidows = R.pathOr(2, ['props', 'widows']);\\n\\nconst getOrphans = R.pathOr(2, ['props', 'orphans']);\\n\\nconst getLineBreak = (node, height) => {\\n  const top = getTop(node);\\n  const widows = getWidows(node);\\n  const orphans = getOrphans(node);\\n  const linesQuantity = node.lines.length;\\n  const slicedLine = lineIndexAtHeight(node, height - top);\\n\\n  if (slicedLine === 0) {\\n    return 0;\\n  }\\n\\n  if (linesQuantity < orphans) {\\n    return linesQuantity;\\n  }\\n\\n  if (slicedLine < orphans || linesQuantity < orphans + widows) {\\n    return 0;\\n  }\\n\\n  if (linesQuantity === orphans + widows) {\\n    return orphans;\\n  }\\n\\n  if (linesQuantity - slicedLine < widows) {\\n    return linesQuantity - widows;\\n  }\\n\\n  return slicedLine;\\n};\\n\\nconst splitText = (node, height) => {\\n  const slicedLineIndex = getLineBreak(node, height);\\n  const currentHeight = heightAtLineIndex(node, slicedLineIndex);\\n  const nextHeight = node.box.height - currentHeight;\\n\\n  const current = R.evolve(\\n    {\\n      lines: R.slice(0, slicedLineIndex),\\n      style: R.evolve({\\n        marginBottom: zero,\\n        paddingBottom: zero,\\n        borderBottomWidth: zero,\\n        borderBottomLeftRadius: zero,\\n        borderBottomRightRadius: zero,\\n      }),\\n      box: {\\n        height: R.always(currentHeight),\\n        borderBottomWidth: zero,\\n      },\\n    },\\n    node,\\n  );\\n\\n  const next = R.evolve(\\n    {\\n      lines: R.slice(slicedLineIndex, Infinity),\\n      style: R.evolve({\\n        marginTop: zero,\\n        paddingTop: zero,\\n        borderTopWidth: zero,\\n        borderTopLeftRadius: zero,\\n        borderTopRightRadius: zero,\\n      }),\\n      box: {\\n        top: zero,\\n        height: R.always(nextHeight),\\n        borderTopWidth: zero,\\n      },\\n    },\\n    node,\\n  );\\n\\n  return [current, next];\\n};\\n\\nexport default splitText;\\n\\n[end of splitText.js]\\n[start of resolveTextLayout.js]\\nimport * as R from 'ramda';\\nimport * as P from '@react-pdf/primitives';\\n\\nimport layoutText from '../text/layoutText';\\n\\nconst isType = R.propEq('type');\\n\\nconst isSvg = isType(P.Svg);\\n\\nconst isText = isType(P.Text);\\n\\nconst isNotSvg = R.complement(isSvg);\\n\\nconst shouldLayoutText = node => isText(node) && !node.lines;\\n\\n/**\\n * Performs text layout on text node if wasn't calculated before.\\n * Text layout is usually performed on Yoga's layout process (via setMeasureFunc),\\n * but we need to layout those nodes with fixed width and height.\\n *\\n * @param {Object} node\\n * @returns {Object} layout node\\n */\\nconst resolveTextLayout = (node, fontStore) => {\\n  const mapChild = child => resolveTextLayout(child, fontStore);\\n\\n  return R.compose(\\n    R.evolve({\\n      children: R.map(R.when(isNotSvg, mapChild)),\\n    }),\\n    R.when(\\n      shouldLayoutText,\\n      R.compose(\\n        R.converge(R.assoc('lines'), [\\n          R.converge(layoutText, [\\n            R.identity,\\n            R.path(['box', 'width']),\\n            R.path(['box', 'height']),\\n            R.always(fontStore),\\n          ]),\\n          R.identity,\\n        ]),\\n      ),\\n    ),\\n  )(node);\\n};\\n\\nexport default resolveTextLayout;\\n\\n[end of resolveTextLayout.js]\\n[start of heightAtLineIndex.js]\\n/**\\n * Get height for given text line index\\n *\\n * @param {Object} node\\n * @param {Number} index\\n */\\nconst heightAtLineIndex = (node, index) => {\\n  let counter = 0;\\n\\n  if (!node.lines) return counter;\\n\\n  for (let i = 0; i < index; i += 1) {\\n    const line = node.lines[i];\\n\\n    if (!line) break;\\n\\n    counter += line.box.height;\\n  }\\n\\n  return counter;\\n};\\n\\nexport default heightAtLineIndex;\\n\\n[end of heightAtLineIndex.js]\\n[start of measureText.js]\\n/* eslint-disable no-param-reassign */\\n\\nimport * as R from 'ramda';\\nimport Yoga from '@react-pdf/yoga';\\n\\nimport layoutText from './layoutText';\\nimport linesWidth from './linesWidth';\\nimport linesHeight from './linesHeight';\\n\\n/**\\n * Yoga text measure function\\n *\\n * @param {Object} page\\n * @param {Object} node\\n * @param {Number} width\\n * @param {Number} widthMode\\n * @param {Number} height\\n * @param {Number} heightMode\\n * @returns {Object} text width and height\\n */\\nconst measureText = (page, node, fontStore, width, widthMode, height) => {\\n  if (widthMode === Yoga.MEASURE_MODE_EXACTLY) {\\n    if (!node.lines) node.lines = layoutText(node, width, height, fontStore);\\n\\n    return { height: linesHeight(node) };\\n  }\\n\\n  if (widthMode === Yoga.MEASURE_MODE_AT_MOST) {\\n    if (!node.lines) node.lines = layoutText(node, width, height, fontStore);\\n\\n    return {\\n      height: linesHeight(node),\\n      width: Math.min(width, linesWidth(node)),\\n    };\\n  }\\n\\n  return {};\\n};\\n\\nexport default R.curryN(7, measureText);\\n\\n[end of measureText.js]\\n[start of layoutText.test.js]\\nimport * as P from '@react-pdf/primitives';\\nimport runWidth from '@react-pdf/textkit/run/advanceWidth';\\n\\nimport layoutText from '../../src/text/layoutText';\\n\\nconst TEXT =\\n  'Life can be much broader once you discover one simple fact: Everything around you that you call life was made up by people that were no smarter than you';\\n\\nconst createTextNode = (value, style = {}, props = {}) => ({\\n  style,\\n  props,\\n  type: P.Text,\\n  children: [{ type: P.TextInstance, value }],\\n});\\n\\ndescribe('text layoutText', () => {\\n  test('Should render empty text', async () => {\\n    const node = createTextNode('');\\n    const lines = layoutText(node, 1500, 200, null);\\n\\n    expect(lines).toHaveLength(0);\\n  });\\n\\n  test('Should render aligned left text by default', async () => {\\n    const node = createTextNode(TEXT);\\n    const lines = layoutText(node, 1500, 30, null);\\n\\n    expect(lines[0].box.x).toBe(0);\\n  });\\n\\n  test('Should render aligned left text', async () => {\\n    const node = createTextNode(TEXT, { textAlign: 'left' });\\n    const lines = layoutText(node, 1500, 30, null);\\n\\n    expect(lines[0].box.x).toBe(0);\\n  });\\n\\n  test('Should render aligned right text', async () => {\\n    const node = createTextNode(TEXT, { textAlign: 'right' });\\n    const lines = layoutText(node, 1500, 30, null);\\n    const textWidth = runWidth(lines[0].runs[0]);\\n\\n    expect(lines[0].box.x).toBe(1500 - textWidth);\\n  });\\n\\n  test('Should render aligned center text', async () => {\\n    const node = createTextNode(TEXT, { textAlign: 'center' });\\n    const lines = layoutText(node, 1500, 30, null);\\n    const textWidth = runWidth(lines[0].runs[0]);\\n\\n    expect(lines[0].box.x).toBe((1500 - textWidth) / 2);\\n  });\\n\\n  test('Should render single line justified text aligned to the left', async () => {\\n    const node = createTextNode(TEXT, { textAlign: 'justify' });\\n    const lines = layoutText(node, 1500, 30, null);\\n\\n    expect(lines[0].box.x).toBe(0);\\n  });\\n\\n  test('Should render multiline justified text correctly aligned', async () => {\\n    const containerWidth = 800;\\n    const node = createTextNode(TEXT, { textAlign: 'justify' });\\n    const lines = layoutText(node, containerWidth, 100, null);\\n\\n    const positions = lines[0].runs[0].positions;\\n    const spaceWidth = positions[positions.length - 1].xAdvance;\\n\\n    // First line justified. Last line aligned to the left\\n    expect(lines[0].box.width).toBe(containerWidth + spaceWidth);\\n    expect(lines[1].box.width).not.toBe(containerWidth + spaceWidth);\\n  });\\n\\n  test('Should render maxLines', async () => {\\n    const node = createTextNode(TEXT, { maxLines: 2 });\\n    const lines = layoutText(node, 300, 100, null);\\n\\n    expect(lines.length).toEqual(2);\\n  });\\n\\n  test('should allow hyphenation callback to be overriden', async () => {\\n    const text = 'reallylongtext';\\n    const hyphens = ['really', 'long', 'text'];\\n    const hyphenationCallback = jest.fn().mockReturnValue(hyphens);\\n\\n    const node = createTextNode(text, {}, { hyphenationCallback });\\n    const lines = layoutText(node, 50, 100, null);\\n\\n    expect(lines[0].string).toEqual('really');\\n    expect(lines[1].string).toEqual('long');\\n    expect(lines[2].string).toEqual('text');\\n    expect(hyphenationCallback).toHaveBeenCalledWith('reallylongtext');\\n  });\\n});\\n\\n[end of layoutText.test.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "splitText.js",
        "resolveTextLayout.js",
        "heightAtLineIndex.js",
        "measureText.js",
        "layoutText.test.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "7594da4b-7b73-48e6-8a06-d15267e4d36c",
        "score": 0.01639344262295082,
        "payload": {
          "text": "import * as R from 'ramda';\n\nimport lineIndexAtHeight from './lineIndexAtHeight';\nimport heightAtLineIndex from './heightAtLineIndex';\n\nconst zero = R.always(0);\n\nconst getTop = R.pathOr(0, ['box', 'top']);\n\nconst getWidows = R.pathOr(2, ['props', 'widows']);\n\nconst getOrphans = R.pathOr(2, ['props', 'orphans']);\n\nconst getLineBreak = (node, height) => {\n  const top = getTop(node);\n  const widows = getWidows(node);\n  const orphans = getOrphans(node);\n  const linesQuantity = node.lines.length;\n  const slicedLine = lineIndexAtHeight(node, height - top);\n\n  if (slicedLine === 0) {\n    return 0;\n  }\n\n  if (linesQuantity < orphans) {\n    return linesQuantity;\n  }\n\n  if (slicedLine < orphans || linesQuantity < orphans + widows) {\n    return 0;\n  }\n\n  if (linesQuantity === orphans + widows) {\n    return orphans;\n  }\n\n  if (linesQuantity - slicedLine < widows) {\n    return linesQuantity - widows;\n  }\n\n  return slicedLine;\n};\n\nconst splitText = (node, height) => {\n  const slicedLineIndex = getLineBreak(node, height);\n  const currentHeight = heightAtLineIndex(node, slicedLineIndex);\n  const nextHeight = node.box.height - currentHeight;\n\n  const current = R.evolve(\n    {\n      lines: R.slice(0, slicedLineIndex),\n      style: R.evolve({\n        marginBottom: zero,\n        paddingBottom: zero,\n        borderBottomWidth: zero,\n        borderBottomLeftRadius: zero,\n        borderBottomRightRadius: zero,\n      }),\n      box: {\n        height: R.always(currentHeight),\n        borderBottomWidth: zero,\n      },\n    },\n    node,\n  );\n\n  const next = R.evolve(\n    {\n      lines: R.slice(slicedLineIndex, Infinity),\n      style: R.evolve({\n        marginTop: zero,\n        paddingTop: zero,\n        borderTopWidth: zero,\n        borderTopLeftRadius: zero,\n        borderTopRightRadius: zero,\n      }),\n      box: {\n        top: zero,\n        height: R.always(nextHeight),\n        borderTopWidth: zero,\n      },\n    },\n    node,\n  );\n\n  return [current, next];\n};\n\nexport default splitText;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/src/text/splitText.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "1ef871f5-a381-4992-b4fb-dac18db094c5",
        "score": 0.016129032258064516,
        "payload": {
          "text": "import * as R from 'ramda';\nimport * as P from '@react-pdf/primitives';\n\nimport layoutText from '../text/layoutText';\n\nconst isType = R.propEq('type');\n\nconst isSvg = isType(P.Svg);\n\nconst isText = isType(P.Text);\n\nconst isNotSvg = R.complement(isSvg);\n\nconst shouldLayoutText = node => isText(node) && !node.lines;\n\n/**\n * Performs text layout on text node if wasn't calculated before.\n * Text layout is usually performed on Yoga's layout process (via setMeasureFunc),\n * but we need to layout those nodes with fixed width and height.\n *\n * @param {Object} node\n * @returns {Object} layout node\n */\nconst resolveTextLayout = (node, fontStore) => {\n  const mapChild = child => resolveTextLayout(child, fontStore);\n\n  return R.compose(\n    R.evolve({\n      children: R.map(R.when(isNotSvg, mapChild)),\n    }),\n    R.when(\n      shouldLayoutText,\n      R.compose(\n        R.converge(R.assoc('lines'), [\n          R.converge(layoutText, [\n            R.identity,\n            R.path(['box', 'width']),\n            R.path(['box', 'height']),\n            R.always(fontStore),\n          ]),\n          R.identity,\n        ]),\n      ),\n    ),\n  )(node);\n};\n\nexport default resolveTextLayout;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/src/steps/resolveTextLayout.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "6025095e-eff8-40f4-a22c-03a295e07ccf",
        "score": 0.015873015873015872,
        "payload": {
          "text": "/**\n * Get height for given text line index\n *\n * @param {Object} node\n * @param {Number} index\n */\nconst heightAtLineIndex = (node, index) => {\n  let counter = 0;\n\n  if (!node.lines) return counter;\n\n  for (let i = 0; i < index; i += 1) {\n    const line = node.lines[i];\n\n    if (!line) break;\n\n    counter += line.box.height;\n  }\n\n  return counter;\n};\n\nexport default heightAtLineIndex;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/src/text/heightAtLineIndex.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "26261f55-0af4-4ae5-acb3-ca24e892ccba",
        "score": 0.015625,
        "payload": {
          "text": "/* eslint-disable no-param-reassign */\n\nimport * as R from 'ramda';\nimport Yoga from '@react-pdf/yoga';\n\nimport layoutText from './layoutText';\nimport linesWidth from './linesWidth';\nimport linesHeight from './linesHeight';\n\n/**\n * Yoga text measure function\n *\n * @param {Object} page\n * @param {Object} node\n * @param {Number} width\n * @param {Number} widthMode\n * @param {Number} height\n * @param {Number} heightMode\n * @returns {Object} text width and height\n */\nconst measureText = (page, node, fontStore, width, widthMode, height) => {\n  if (widthMode === Yoga.MEASURE_MODE_EXACTLY) {\n    if (!node.lines) node.lines = layoutText(node, width, height, fontStore);\n\n    return { height: linesHeight(node) };\n  }\n\n  if (widthMode === Yoga.MEASURE_MODE_AT_MOST) {\n    if (!node.lines) node.lines = layoutText(node, width, height, fontStore);\n\n    return {\n      height: linesHeight(node),\n      width: Math.min(width, linesWidth(node)),\n    };\n  }\n\n  return {};\n};\n\nexport default R.curryN(7, measureText);\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/src/text/measureText.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "a6a86a30-8762-4236-8c69-f255544f6f84",
        "score": 0.015384615384615385,
        "payload": {
          "text": "import * as P from '@react-pdf/primitives';\nimport runWidth from '@react-pdf/textkit/run/advanceWidth';\n\nimport layoutText from '../../src/text/layoutText';\n\nconst TEXT =\n  'Life can be much broader once you discover one simple fact: Everything around you that you call life was made up by people that were no smarter than you';\n\nconst createTextNode = (value, style = {}, props = {}) => ({\n  style,\n  props,\n  type: P.Text,\n  children: [{ type: P.TextInstance, value }],\n});\n\ndescribe('text layoutText', () => {\n  test('Should render empty text', async () => {\n    const node = createTextNode('');\n    const lines = layoutText(node, 1500, 200, null);\n\n    expect(lines).toHaveLength(0);\n  });\n\n  test('Should render aligned left text by default', async () => {\n    const node = createTextNode(TEXT);\n    const lines = layoutText(node, 1500, 30, null);\n\n    expect(lines[0].box.x).toBe(0);\n  });\n\n  test('Should render aligned left text', async () => {\n    const node = createTextNode(TEXT, { textAlign: 'left' });\n    const lines = layoutText(node, 1500, 30, null);\n\n    expect(lines[0].box.x).toBe(0);\n  });\n\n  test('Should render aligned right text', async () => {\n    const node = createTextNode(TEXT, { textAlign: 'right' });\n    const lines = layoutText(node, 1500, 30, null);\n    const textWidth = runWidth(lines[0].runs[0]);\n\n    expect(lines[0].box.x).toBe(1500 - textWidth);\n  });\n\n  test('Should render aligned center text', async () => {\n    const node = createTextNode(TEXT, { textAlign: 'center' });\n    const lines = layoutText(node, 1500, 30, null);\n    const textWidth = runWidth(lines[0].runs[0]);\n\n    expect(lines[0].box.x).toBe((1500 - textWidth) / 2);\n  });\n\n  test('Should render single line justified text aligned to the left', async () => {\n    const node = createTextNode(TEXT, { textAlign: 'justify' });\n    const lines = layoutText(node, 1500, 30, null);\n\n    expect(lines[0].box.x).toBe(0);\n  });\n\n  test('Should render multiline justified text correctly aligned', async () => {\n    const containerWidth = 800;\n    const node = createTextNode(TEXT, { textAlign: 'justify' });\n    const lines = layoutText(node, containerWidth, 100, null);\n\n    const positions = lines[0].runs[0].positions;\n    const spaceWidth = positions[positions.length - 1].xAdvance;\n\n    // First line justified. Last line aligned to the left\n    expect(lines[0].box.width).toBe(containerWidth + spaceWidth);\n    expect(lines[1].box.width).not.toBe(containerWidth + spaceWidth);\n  });\n\n  test('Should render maxLines', async () => {\n    const node = createTextNode(TEXT, { maxLines: 2 });\n    const lines = layoutText(node, 300, 100, null);\n\n    expect(lines.length).toEqual(2);\n  });\n\n  test('should allow hyphenation callback to be overriden', async () => {\n    const text = 'reallylongtext';\n    const hyphens = ['really', 'long', 'text'];\n    const hyphenationCallback = jest.fn().mockReturnValue(hyphens);\n\n    const node = createTextNode(text, {}, { hyphenationCallback });\n    const lines = layoutText(node, 50, 100, null);\n\n    expect(lines[0].string).toEqual('really');\n    expect(lines[1].string).toEqual('long');\n    expect(lines[2].string).toEqual('text');\n    expect(hyphenationCallback).toHaveBeenCalledWith('reallylongtext');\n  });\n});\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/tests/text/layoutText.test.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-1541",
    "model_patch": "diff --git a/index.js b/index.js\n--- a/index.js\n+++ b/index.js\n@@ -20,6 +20,7 @@\n   },\n   body: {\n     flexGrow: 1,\n+    height: '100%',\n   },\n   row: {\n     flexGrow: 1,\n@@ -27,6 +28,7 @@\n   },\n   block: {\n     flexGrow: 1,\n+    height: '100%',\n   },\n   text: {\n     width: '60%',",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 318.23,
      "issue_embedding_time_ms": 318.23,
      "retrieval_time_ms_jina": 0.83,
      "retrieval_time_ms": 0.83,
      "total_retrieval_time_ms": 319.05,
      "generation_time_ms": 2807.69,
      "total_io_time_ms": 3126.75,
      "input_total_token_limit": null,
      "issue_text_tokens": 689,
      "vlm_tokens": 0,
      "retrieved_tokens": 3827,
      "prompt_template_tokens": 504,
      "total_input_prompt_tokens": 5020,
      "output_generated_tokens": 111,
      "total_io_tokens": 5131,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nflexbox elements doesn't stretch to full page size\\n**Describe the bug**\\r\\nflexbox elements doesn't stretch to full page size\\r\\n\\r\\n\\r\\n**To Reproduce**\\r\\nSteps to reproduce the behavior including code snippet (if applies):\\r\\n1. Go to [repl](https://react-pdf.org/repl?code=140630f60760ce02e004b027806c0a6538178e06518b51c00b5551803a1002754043195002806f60e39c64057016c200b8e2b76ec009804b28001d92d4482039003334003c1401a362256a550045c4d1031c644100893af0816b48b8008d68800d601cca982e11440613064302a4b0077127a3b6d005f2d6d2f50c16111096959793865354d6d765d032354133301380b04a8877c807104c100467b3858e06d2571646424dca7170f2f1f7f40e0cb1a514a9150f15118224b0016000600520996ed4f5252e4f667374f6f5f00a090b2cdd45b26e8e068804a006e56f0687800212e772c38465bac003e6fb68003cfa300817817181fc7a408002ad1dca8043e0d09866120d0504a2046cd168439d840801ab8950a164410d118f439012789e83989a4f2752a9289a7b53a78a0401e84964fc4121c0c91102002a7a2849d503c38388a4505e2f225aa2848b79fcd0a0b093cf862305bcd07827890e843d5a00253a09961fa0018ad22ea25415118ef772dd5a5ea00000)\\r\\n2. '....'\\r\\n3. '....'\\r\\n4. See error\\r\\n\\r\\nthe same layout in html , css \\r\\n[codesanbox](https://codesandbox.io/s/great-lumiere-j7fx0?file=/index.html)\\r\\n\\r\\n**Expected behavior**\\r\\nIt should work how browser does\\r\\n\\r\\n**Screenshots**\\r\\n\\r\\nHow it looks: \\r\\n<img width=\\\"599\\\" alt=\\\"\\u0421\\u043d\\u0438\\u043c\\u043e\\u043a \\u044d\\u043a\\u0440\\u0430\\u043d\\u0430 2021-09-16 \\u0432 11 19 41\\\" src=\\\"https://user-images.githubusercontent.com/6726016/133747387-36b0979e-13ca-46a8-88f9-d5f814b744fc.png\\\">\\r\\n\\r\\nHow it should be: \\r\\n<img width=\\\"600\\\" alt=\\\"\\u0421\\u043d\\u0438\\u043c\\u043e\\u043a \\u044d\\u043a\\u0440\\u0430\\u043d\\u0430 2021-09-16 \\u0432 11 19 32\\\" src=\\\"https://user-images.githubusercontent.com/6726016/133747413-879dda20-3a50-4163-ad6f-1f4d0a8a879b.png\\\">\\r\\n\\r\\n**Desktop (please complete the following information):**\\r\\n - React-pdf version: current\\r\\n\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of index.js]\\n/* eslint-disable jsx-a11y/anchor-is-valid */\\n\\nimport React from 'react';\\nimport {\\n  Document,\\n  Page,\\n  View,\\n  Text,\\n  Link,\\n  Font,\\n  StyleSheet,\\n} from '@react-pdf/renderer';\\n\\nconst styles = StyleSheet.create({\\n  title: {\\n    margin: 20,\\n    fontSize: 25,\\n    textAlign: 'center',\\n    backgroundColor: '#e4e4e4',\\n    textTransform: 'uppercase',\\n    fontFamily: 'Oswald',\\n  },\\n  body: {\\n    flexGrow: 1,\\n  },\\n  row: {\\n    flexGrow: 1,\\n    flexDirection: 'row',\\n  },\\n  block: {\\n    flexGrow: 1,\\n  },\\n  text: {\\n    width: '60%',\\n    margin: 10,\\n    fontFamily: 'Oswald',\\n    textAlign: 'justify',\\n  },\\n  fill1: {\\n    width: '40%',\\n    backgroundColor: '#e14427',\\n  },\\n  fill2: {\\n    flexGrow: 2,\\n    backgroundColor: '#e6672d',\\n  },\\n  fill3: {\\n    flexGrow: 2,\\n    backgroundColor: '#e78632',\\n  },\\n  fill4: {\\n    flexGrow: 2,\\n    backgroundColor: '#e29e37',\\n  },\\n});\\n\\nFont.register({\\n  family: 'Oswald',\\n  src: 'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\\n});\\n\\nexport default () => (\\n  <Document>\\n    <Page size=\\\"A4\\\">\\n      <Link\\n        style={styles.title}\\n        src=\\\"https://es.wikipedia.org/wiki/Lorem_ipsum\\\"\\n      >\\n        Lorem Ipsum\\n      </Link>\\n      <View style={styles.body}>\\n        <View style={styles.row}>\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n          <View style={styles.fill1} />\\n        </View>\\n        <View style={styles.row}>\\n          <View style={styles.fill2} />\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n        </View>\\n        <View style={styles.row}>\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n          <View style={styles.fill3} />\\n        </View>\\n      </View>\\n    </Page>\\n  </Document>\\n);\\n\\n[end of index.js]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n> React-pdf examples\\n\\n## Catalog\\n\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/text/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/text/\\\">Text</a>\\n      </td>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/images/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/images/\\\">Images</a>\\n      </td>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/resume/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/resume/\\\">Resume</a>\\n\\t\\t\\t</td>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/fractals/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/fractals/\\\">Fractals</a>\\n\\t\\t\\t</td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/knobs/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/knobs/\\\">Knobs</a>\\n\\t\\t\\t</td>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/pageWrap/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/pageWrap/\\\">Page wrap</a>\\n      </td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[end of README.md]\\n[start of index.js]\\nimport React from 'react';\\nimport {\\n  Text,\\n  Font,\\n  Page,\\n  View,\\n  Image,\\n  Document,\\n  StyleSheet,\\n} from '@react-pdf/renderer';\\n\\nimport Header from './Header';\\nimport Skills from './Skills';\\nimport Education from './Education';\\nimport Experience from './Experience';\\n\\nconst styles = StyleSheet.create({\\n  page: {\\n    padding: 30,\\n  },\\n  container: {\\n    flex: 1,\\n    flexDirection: 'row',\\n    '@media max-width: 400': {\\n      flexDirection: 'column',\\n    },\\n  },\\n  image: {\\n    marginBottom: 10,\\n  },\\n  leftColumn: {\\n    flexDirection: 'column',\\n    width: 170,\\n    paddingTop: 30,\\n    paddingRight: 15,\\n    '@media max-width: 400': {\\n      width: '100%',\\n      paddingRight: 0,\\n    },\\n    '@media orientation: landscape': {\\n      width: 200,\\n    },\\n  },\\n  footer: {\\n    fontSize: 12,\\n    fontFamily: 'Lato Bold',\\n    textAlign: 'center',\\n    marginTop: 15,\\n    paddingTop: 5,\\n    borderWidth: 3,\\n    borderColor: 'gray',\\n    borderStyle: 'dashed',\\n    '@media orientation: landscape': {\\n      marginTop: 10,\\n    },\\n  },\\n});\\n\\nFont.register({\\n  family: 'Open Sans',\\n  src: `https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFVZ0e.ttf`,\\n});\\n\\nFont.register({\\n  family: 'Lato',\\n  src: `https://fonts.gstatic.com/s/lato/v16/S6uyw4BMUTPHjx4wWw.ttf`,\\n});\\n\\nFont.register({\\n  family: 'Lato Italic',\\n  src: `https://fonts.gstatic.com/s/lato/v16/S6u8w4BMUTPHjxsAXC-v.ttf`,\\n});\\n\\nFont.register({\\n  family: 'Lato Bold',\\n  src: `https://fonts.gstatic.com/s/lato/v16/S6u9w4BMUTPHh6UVSwiPHA.ttf`,\\n});\\n\\nconst Resume = props => (\\n  <Page {...props} style={styles.page}>\\n    <Header />\\n    <View style={styles.container}>\\n      <View style={styles.leftColumn}>\\n        <Image\\n          src=\\\"https://react-pdf.org/static/images/luke.jpg\\\"\\n          style={styles.image}\\n        />\\n        <Education />\\n        <Skills />\\n      </View>\\n      <Experience />\\n    </View>\\n    <Text style={styles.footer}>This IS the candidate you are looking for</Text>\\n  </Page>\\n);\\n\\nexport default () => (\\n  <Document\\n    author=\\\"Luke Skywalker\\\"\\n    keywords=\\\"awesome, resume, start wars\\\"\\n    subject=\\\"The resume of Luke Skywalker\\\"\\n    title=\\\"Resume\\\"\\n  >\\n    <Resume size=\\\"A4\\\" />\\n    <Resume orientation=\\\"landscape\\\" size=\\\"A4\\\" />\\n    <Resume size={[380, 1250]} />\\n  </Document>\\n);\\n\\n[end of index.js]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n  <p align=\\\"center\\\">React renderer for creating PDF files on the browser and server<p>\\n  <p align=\\\"center\\\">\\n    <a href=\\\"https://www.npmjs.com/package/@react-pdf/renderer\\\">\\n      <img src=\\\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\\\" />\\n    </a>\\n    <a href=\\\"https://travis-ci.org/diegomura/react-pdf\\\">\\n      <img src=\\\"https://img.shields.io/travis/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\\\">\\n      <img src=\\\"https://img.shields.io/github/license/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://spectrum.chat/react-pdf\\\">\\n      <img src=\\\"https://withspectrum.github.io/badge/badge.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/prettier/prettier\\\">\\n      <img src=\\\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\\\" />\\n    </a>\\n    <a href=\\\"https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_shield\\\" alt=\\\"FOSSA Status\\\"><img src=\\\"https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=shield\\\"/></a>\\n  </p>\\n</p>\\n\\n## How to install\\n```sh\\nyarn add @react-pdf/renderer\\n```\\n\\n## How it works\\n\\n```jsx\\nimport React from 'react';\\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\\n\\n// Create styles\\nconst styles = StyleSheet.create({\\n  page: {\\n    flexDirection: 'row',\\n    backgroundColor: '#E4E4E4'\\n  },\\n  section: {\\n    margin: 10,\\n    padding: 10,\\n    flexGrow: 1\\n  }\\n});\\n\\n// Create Document Component\\nconst MyDocument = () => (\\n  <Document>\\n    <Page size=\\\"A4\\\" style={styles.page}>\\n      <View style={styles.section}>\\n        <Text>Section #1</Text>\\n      </View>\\n      <View style={styles.section}>\\n        <Text>Section #2</Text>\\n      </View>\\n    </Page>\\n  </Document>\\n);\\n```\\n\\n### `Web.` Render in DOM\\n```jsx\\nimport React from 'react';\\nimport ReactDOM from 'react-dom';\\nimport { PDFViewer } from '@react-pdf/renderer';\\n\\nconst App = () => (\\n  <PDFViewer>\\n    <MyDocument />\\n  </PDFViewer>\\n);\\n\\nReactDOM.render(<App />, document.getElementById('root'));\\n```\\n\\n### `Node.` Save in a file\\n```jsx\\nimport React from 'react';\\nimport ReactPDF from '@react-pdf/renderer';\\n\\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\\n```\\n\\n## Examples\\nFor each example, try opening `output.pdf` to see the result.\\n\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/text/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/text/\\\">Text</a>\\n      </td>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/resume/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/resume/\\\">Resume</a>\\n\\t\\t\\t</td>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/fractals/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/fractals/\\\">Fractals</a>\\n\\t\\t\\t</td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/knobs/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/knobs/\\\">Knobs</a>\\n\\t\\t\\t</td>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/pageWrap/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/pageWrap/\\\">Page wrap</a>\\n      </td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n\\n## Contributors\\n\\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\\n<a href=\\\"https://github.com/diegomura/react-pdf/graphs/contributors\\\"><img src=\\\"https://opencollective.com/react-pdf/contributors.svg?width=890\\\" /></a>\\n\\n## Sponsors\\n\\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#sponsors\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/sponsors.svg?width=890\\\"></a>\\n\\n## Backers\\n\\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#backers\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/backers.svg?width=890\\\"></a>\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_large)\\n\\n---\\n![](https://img.shields.io/npm/dt/@react-pdf/renderer.svg?style=flat)\\n\\n[end of README.md]\\n[start of index.js]\\nimport React from 'react';\\nimport ReactPDF, {\\n  Document,\\n  Page,\\n  Font,\\n  StyleSheet,\\n} from '@react-pdf/renderer';\\n\\nimport Svg0 from './svg';\\nimport Svg1 from './Svg1';\\nimport Svg2 from './Svg2';\\nimport Svg4 from './Svg4';\\nimport Heart from './Heart';\\n\\nconsole.log(`React version: ${React.version}`);\\nconsole.log(`React-pdf version: ${ReactPDF.version}`);\\n\\nFont.registerEmojiSource({\\n  format: 'png',\\n  url: 'https://twemoji.maxcdn.com/2/72x72/',\\n});\\n\\nFont.register({\\n  family: 'Roboto',\\n  src: '/Roboto-Regular.ttf',\\n});\\n\\nFont.register({\\n  src: `/Roboto-Bold.ttf`,\\n  family: 'Roboto',\\n  fontWeight: 'bold',\\n});\\n\\nFont.register({\\n  family: 'Noto Sans Tamil',\\n  src:\\n    'https://fonts.gstatic.com/ea/notosanstamil/v3/NotoSansTamil-Regular.ttf',\\n});\\n\\nconst styles = StyleSheet.create({\\n  page: {\\n    fontSize: 20,\\n    color: 'black',\\n    padding: '10',\\n  },\\n  image: {\\n    width: 100,\\n    borderRadius: 40,\\n    flexDirection: 'column',\\n  },\\n  text: {\\n    color: '#212121',\\n    fontFamily: 'Roboto',\\n    textAlign: 'justify',\\n  },\\n});\\n\\nconst App = () => {\\n  return (\\n    <Document title=\\\"Hey!\\\" subject=\\\"Test\\\">\\n      <Page size=\\\"A4\\\" style={styles.page}>\\n        <Svg0 />\\n        <Svg1 />\\n        <Svg2 />\\n        <Svg4 />\\n        <Heart />\\n      </Page>\\n    </Document>\\n  );\\n};\\n\\nexport default App;\\n\\n[end of index.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "index.js",
        "README.md",
        "index.js",
        "README.md",
        "index.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "8ac211c1-ff1c-463b-af48-ef648360ad95",
        "score": 0.01639344262295082,
        "payload": {
          "text": "/* eslint-disable jsx-a11y/anchor-is-valid */\n\nimport React from 'react';\nimport {\n  Document,\n  Page,\n  View,\n  Text,\n  Link,\n  Font,\n  StyleSheet,\n} from '@react-pdf/renderer';\n\nconst styles = StyleSheet.create({\n  title: {\n    margin: 20,\n    fontSize: 25,\n    textAlign: 'center',\n    backgroundColor: '#e4e4e4',\n    textTransform: 'uppercase',\n    fontFamily: 'Oswald',\n  },\n  body: {\n    flexGrow: 1,\n  },\n  row: {\n    flexGrow: 1,\n    flexDirection: 'row',\n  },\n  block: {\n    flexGrow: 1,\n  },\n  text: {\n    width: '60%',\n    margin: 10,\n    fontFamily: 'Oswald',\n    textAlign: 'justify',\n  },\n  fill1: {\n    width: '40%',\n    backgroundColor: '#e14427',\n  },\n  fill2: {\n    flexGrow: 2,\n    backgroundColor: '#e6672d',\n  },\n  fill3: {\n    flexGrow: 2,\n    backgroundColor: '#e78632',\n  },\n  fill4: {\n    flexGrow: 2,\n    backgroundColor: '#e29e37',\n  },\n});\n\nFont.register({\n  family: 'Oswald',\n  src: 'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\n});\n\nexport default () => (\n  <Document>\n    <Page size=\"A4\">\n      <Link\n        style={styles.title}\n        src=\"https://es.wikipedia.org/wiki/Lorem_ipsum\"\n      >\n        Lorem Ipsum\n      </Link>\n      <View style={styles.body}>\n        <View style={styles.row}>\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n          <View style={styles.fill1} />\n        </View>\n        <View style={styles.row}>\n          <View style={styles.fill2} />\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n        </View>\n        <View style={styles.row}>\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n          <View style={styles.fill3} />\n        </View>\n      </View>\n    </Page>\n  </Document>\n);\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/examples/src/text/index.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "c7d41578-65e1-44bd-8804-e9433e94fa2f",
        "score": 0.016129032258064516,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n> React-pdf examples\n\n## Catalog\n\n<table>\n\t<tbody>\n\t\t<tr>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/text/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/text/\">Text</a>\n      </td>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/images/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/images/\">Images</a>\n      </td>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/resume/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/resume/\">Resume</a>\n\t\t\t</td>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/fractals/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/fractals/\">Fractals</a>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n<table>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/knobs/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/knobs/\">Knobs</a>\n\t\t\t</td>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/pageWrap/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/pageWrap/\">Page wrap</a>\n      </td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/examples/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "822dff2f-1d62-4ab0-8c28-c6935174b893",
        "score": 0.015873015873015872,
        "payload": {
          "text": "import React from 'react';\nimport {\n  Text,\n  Font,\n  Page,\n  View,\n  Image,\n  Document,\n  StyleSheet,\n} from '@react-pdf/renderer';\n\nimport Header from './Header';\nimport Skills from './Skills';\nimport Education from './Education';\nimport Experience from './Experience';\n\nconst styles = StyleSheet.create({\n  page: {\n    padding: 30,\n  },\n  container: {\n    flex: 1,\n    flexDirection: 'row',\n    '@media max-width: 400': {\n      flexDirection: 'column',\n    },\n  },\n  image: {\n    marginBottom: 10,\n  },\n  leftColumn: {\n    flexDirection: 'column',\n    width: 170,\n    paddingTop: 30,\n    paddingRight: 15,\n    '@media max-width: 400': {\n      width: '100%',\n      paddingRight: 0,\n    },\n    '@media orientation: landscape': {\n      width: 200,\n    },\n  },\n  footer: {\n    fontSize: 12,\n    fontFamily: 'Lato Bold',\n    textAlign: 'center',\n    marginTop: 15,\n    paddingTop: 5,\n    borderWidth: 3,\n    borderColor: 'gray',\n    borderStyle: 'dashed',\n    '@media orientation: landscape': {\n      marginTop: 10,\n    },\n  },\n});\n\nFont.register({\n  family: 'Open Sans',\n  src: `https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFVZ0e.ttf`,\n});\n\nFont.register({\n  family: 'Lato',\n  src: `https://fonts.gstatic.com/s/lato/v16/S6uyw4BMUTPHjx4wWw.ttf`,\n});\n\nFont.register({\n  family: 'Lato Italic',\n  src: `https://fonts.gstatic.com/s/lato/v16/S6u8w4BMUTPHjxsAXC-v.ttf`,\n});\n\nFont.register({\n  family: 'Lato Bold',\n  src: `https://fonts.gstatic.com/s/lato/v16/S6u9w4BMUTPHh6UVSwiPHA.ttf`,\n});\n\nconst Resume = props => (\n  <Page {...props} style={styles.page}>\n    <Header />\n    <View style={styles.container}>\n      <View style={styles.leftColumn}>\n        <Image\n          src=\"https://react-pdf.org/static/images/luke.jpg\"\n          style={styles.image}\n        />\n        <Education />\n        <Skills />\n      </View>\n      <Experience />\n    </View>\n    <Text style={styles.footer}>This IS the candidate you are looking for</Text>\n  </Page>\n);\n\nexport default () => (\n  <Document\n    author=\"Luke Skywalker\"\n    keywords=\"awesome, resume, start wars\"\n    subject=\"The resume of Luke Skywalker\"\n    title=\"Resume\"\n  >\n    <Resume size=\"A4\" />\n    <Resume orientation=\"landscape\" size=\"A4\" />\n    <Resume size={[380, 1250]} />\n  </Document>\n);\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/examples/src/resume/index.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "adceb749-ad96-47f9-b286-0f8d059de07f",
        "score": 0.015625,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n  <p align=\"center\">React renderer for creating PDF files on the browser and server<p>\n  <p align=\"center\">\n    <a href=\"https://www.npmjs.com/package/@react-pdf/renderer\">\n      <img src=\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\" />\n    </a>\n    <a href=\"https://travis-ci.org/diegomura/react-pdf\">\n      <img src=\"https://img.shields.io/travis/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\">\n      <img src=\"https://img.shields.io/github/license/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://spectrum.chat/react-pdf\">\n      <img src=\"https://withspectrum.github.io/badge/badge.svg\" />\n    </a>\n    <a href=\"https://github.com/prettier/prettier\">\n      <img src=\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\" />\n    </a>\n    <a href=\"https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_shield\" alt=\"FOSSA Status\"><img src=\"https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=shield\"/></a>\n  </p>\n</p>\n\n## How to install\n```sh\nyarn add @react-pdf/renderer\n```\n\n## How it works\n\n```jsx\nimport React from 'react';\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\n\n// Create styles\nconst styles = StyleSheet.create({\n  page: {\n    flexDirection: 'row',\n    backgroundColor: '#E4E4E4'\n  },\n  section: {\n    margin: 10,\n    padding: 10,\n    flexGrow: 1\n  }\n});\n\n// Create Document Component\nconst MyDocument = () => (\n  <Document>\n    <Page size=\"A4\" style={styles.page}>\n      <View style={styles.section}>\n        <Text>Section #1</Text>\n      </View>\n      <View style={styles.section}>\n        <Text>Section #2</Text>\n      </View>\n    </Page>\n  </Document>\n);\n```\n\n### `Web.` Render in DOM\n```jsx\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { PDFViewer } from '@react-pdf/renderer';\n\nconst App = () => (\n  <PDFViewer>\n    <MyDocument />\n  </PDFViewer>\n);\n\nReactDOM.render(<App />, document.getElementById('root'));\n```\n\n### `Node.` Save in a file\n```jsx\nimport React from 'react';\nimport ReactPDF from '@react-pdf/renderer';\n\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\n```\n\n## Examples\nFor each example, try opening `output.pdf` to see the result.\n\n<table>\n\t<tbody>\n\t\t<tr>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/text/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/text/\">Text</a>\n      </td>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/resume/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/resume/\">Resume</a>\n\t\t\t</td>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/fractals/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/fractals/\">Fractals</a>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n<table>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/knobs/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/knobs/\">Knobs</a>\n\t\t\t</td>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/pageWrap/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/pageWrap/\">Page wrap</a>\n      </td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n## Contributors\n\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\n<a href=\"https://github.com/diegomura/react-pdf/graphs/contributors\"><img src=\"https://opencollective.com/react-pdf/contributors.svg?width=890\" /></a>\n\n## Sponsors\n\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\n\n<a href=\"https://opencollective.com/react-pdf#sponsors\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/sponsors.svg?width=890\"></a>\n\n## Backers\n\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\n\n<a href=\"https://opencollective.com/react-pdf#backers\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/backers.svg?width=890\"></a>\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n\n[![FOSSA Status](https://app.fossa.com/api/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf.svg?type=large)](https://app.fossa.com/projects/git%2Bgithub.com%2Ftaylorudell%2Freact-pdf?ref=badge_large)\n\n---\n![](https://img.shields.io/npm/dt/@react-pdf/renderer.svg?style=flat)\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/renderer/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "e8be0c13-9bc8-43de-9266-7c5ddf1aacd5",
        "score": 0.015384615384615385,
        "payload": {
          "text": "import React from 'react';\nimport ReactPDF, {\n  Document,\n  Page,\n  Font,\n  StyleSheet,\n} from '@react-pdf/renderer';\n\nimport Svg0 from './svg';\nimport Svg1 from './Svg1';\nimport Svg2 from './Svg2';\nimport Svg4 from './Svg4';\nimport Heart from './Heart';\n\nconsole.log(`React version: ${React.version}`);\nconsole.log(`React-pdf version: ${ReactPDF.version}`);\n\nFont.registerEmojiSource({\n  format: 'png',\n  url: 'https://twemoji.maxcdn.com/2/72x72/',\n});\n\nFont.register({\n  family: 'Roboto',\n  src: '/Roboto-Regular.ttf',\n});\n\nFont.register({\n  src: `/Roboto-Bold.ttf`,\n  family: 'Roboto',\n  fontWeight: 'bold',\n});\n\nFont.register({\n  family: 'Noto Sans Tamil',\n  src:\n    'https://fonts.gstatic.com/ea/notosanstamil/v3/NotoSansTamil-Regular.ttf',\n});\n\nconst styles = StyleSheet.create({\n  page: {\n    fontSize: 20,\n    color: 'black',\n    padding: '10',\n  },\n  image: {\n    width: 100,\n    borderRadius: 40,\n    flexDirection: 'column',\n  },\n  text: {\n    color: '#212121',\n    fontFamily: 'Roboto',\n    textAlign: 'justify',\n  },\n});\n\nconst App = () => {\n  return (\n    <Document title=\"Hey!\" subject=\"Test\">\n      <Page size=\"A4\" style={styles.page}>\n        <Svg0 />\n        <Svg1 />\n        <Svg2 />\n        <Svg4 />\n        <Heart />\n      </Page>\n    </Document>\n  );\n};\n\nexport default App;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/examples/src/svg/index.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-1306",
    "model_patch": "diff --git a/@react-pdf/types/image.d.ts b/@react-pdf/types/image.d.ts\n--- a/@react-pdf/types/image.d.ts\n+++ b/@react-pdf/types/image.d.ts\n@@ -1,6 +1,7 @@\n type HTTPMethod = 'GET' | 'HEAD' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\n\n export type SourceObject =\n   | string\n   | { data: Buffer; format: 'png' | 'jpg' }\n   | { uri: string; method: HTTPMethod; body: any; headers: any }\n+  | (() => Promise<string>);",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 291.66,
      "issue_embedding_time_ms": 291.66,
      "retrieval_time_ms_jina": 0.85,
      "retrieval_time_ms": 0.85,
      "total_retrieval_time_ms": 292.51,
      "generation_time_ms": 1395.26,
      "total_io_time_ms": 1687.77,
      "input_total_token_limit": null,
      "issue_text_tokens": 527,
      "vlm_tokens": 0,
      "retrieved_tokens": 1125,
      "prompt_template_tokens": 511,
      "total_input_prompt_tokens": 2163,
      "output_generated_tokens": 140,
      "total_io_tokens": 2303,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nType for Image SourceObject doesn't match documentation\\n**Describe the bug**\\r\\nThe documentation states that an Image source object can be a function that returns a string or promise string. \\r\\n\\r\\n() => String | Promise<String>\\r\\n\\r\\nHowever, the type definition in `@react-pdf/types/image.d.ts` does not support a promise\\r\\n\\r\\n```\\r\\nexport type SourceObject =\\r\\n  | string\\r\\n  | { data: Buffer; format: 'png' | 'jpg' }\\r\\n  | { uri: string; method: HTTPMethod; body: any; headers: any }\\r\\n```\\r\\n\\r\\nso I am getting a compilation error of\\r\\n```\\r\\n Overload 1 of 2, '(props: Readonly<ImageWithSrcProp> | Readonly<ImageWithSourceProp>): Image', gave the following error.\\r\\n    Type '() => Promise<string>' is not assignable to type 'SourceObject'.\\r\\n ```\\r\\n \\r\\n the type should be something like \\r\\n \\r\\n ```\\r\\n type HTTPMethod = 'GET' | 'HEAD' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\\r\\n\\r\\nexport type SourceObject =\\r\\n  | string\\r\\n  | { data: Buffer; format: 'png' | 'jpg' }\\r\\n  | { uri: string; method: HTTPMethod; body: any; headers: any }\\r\\n  | {(): Promise<string>};\\r\\n ```\\r\\n\\r\\n**To Reproduce**\\r\\nSteps to reproduce the behavior including code snippet (if applies):\\r\\n\\r\\n```\\r\\n<Image src={async (): Promise<string> => (await getDataUrl())} />\\r\\n```\\r\\n\\r\\n_You can make use of [react-pdf REPL](https://react-pdf/repl) to share the snippet_\\r\\n\\r\\n**Expected behavior**\\r\\nA clear and concise description of what you expected to happen.\\r\\n\\r\\nIt should not throw a compilation error. \\r\\n\\r\\n**Screenshots**\\r\\nIf applicable, add screenshots to help explain your problem.\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/51760107/114592075-8bb6cc00-9c58-11eb-9afc-dbc5c0e7a387.png)\\r\\n![image](https://user-images.githubusercontent.com/51760107/114592085-8fe2e980-9c58-11eb-8721-9703759129b3.png)\\r\\n\\r\\n**Desktop (please complete the following information):**\\r\\n - OS: [e.g. MacOS, Windows]\\r\\n - Browser [e.g. chrome, safari]\\r\\n - React-pdf version [e.g. v1.1.0]\\r\\n \\r\\n MacOS, chrome, v2.0.4\\r\\n\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of fetchImage.js]\\n/* eslint-disable no-param-reassign */\\n\\nimport resolveImage from '@react-pdf/image';\\n\\nimport getSource from './getSource';\\n\\n/**\\n * Resolves async src if passed\\n *\\n * @param {string | Function} src\\n * @returns {object} resolved src\\n */\\nconst resolveSrc = async src =>\\n  typeof src === 'function' ? { uri: await src() } : src;\\n\\n/**\\n * Fetches image and append data to node\\n * Ideally this fn should be immutable.\\n *\\n * @param {Object} node\\n */\\nconst fetchImage = async node => {\\n  const src = getSource(node);\\n  const { cache } = node.props;\\n\\n  if (!src) {\\n    console.warn(false, 'Image should receive either a \\\"src\\\" or \\\"source\\\" prop');\\n    return;\\n  }\\n\\n  try {\\n    const source = await resolveSrc(src);\\n    node.image = await resolveImage(source, { cache });\\n  } catch (e) {\\n    node.image = { width: 0, height: 0 };\\n    console.warn(e.message);\\n  }\\n};\\n\\nexport default fetchImage;\\n\\n[end of fetchImage.js]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n</p>\\n\\n# @react-pdf/image\\n\\n[end of README.md]\\n[start of getSource.js]\\n/**\\n * Get image source\\n *\\n * @param {Object} image node\\n * @returns {String} image src\\n */\\nconst getSource = node => {\\n  const value = node.props?.src || node.props?.source || node.props?.href;\\n  return typeof value === 'string' ? { uri: value } : value;\\n};\\n\\nexport default getSource;\\n\\n[end of getSource.js]\\n[start of resolveAssets.js]\\nimport * as R from 'ramda';\\nimport * as P from '@react-pdf/primitives';\\n\\nimport fetchEmojis from '../text/emoji';\\nimport fetchImage from '../image/fetchImage';\\n\\nconst isImage = R.propEq('type', P.Image);\\n\\n/**\\n * Get all asset promises that need to be resolved\\n *\\n * @param {Object} root node\\n * @returns {Array} asset promises\\n */\\nconst fetchAssets = (fontStore, node) => {\\n  const promises = [];\\n  const listToExplore = node.children?.slice(0) || [];\\n  const emojiSource = fontStore ? fontStore.getEmojiSource() : null;\\n\\n  while (listToExplore.length > 0) {\\n    const n = listToExplore.shift();\\n\\n    if (isImage(n)) {\\n      promises.push(fetchImage(n));\\n    }\\n\\n    if (fontStore && n.style?.fontFamily) {\\n      promises.push(fontStore.load(n.style));\\n    }\\n\\n    if (typeof n === 'string') {\\n      promises.push(...fetchEmojis(n, emojiSource));\\n    }\\n\\n    if (typeof n.value === 'string') {\\n      promises.push(...fetchEmojis(n.value, emojiSource));\\n    }\\n\\n    if (n.children) {\\n      n.children.forEach(childNode => {\\n        listToExplore.push(childNode);\\n      });\\n    }\\n  }\\n\\n  return promises;\\n};\\n\\n/**\\n * Fetch image, font and emoji assets in parallel.\\n * Layout process will not be resumed until promise resolves.\\n *\\n * @param {Object} root node\\n * @param {Object} fontStore font store\\n * @returns {Object} root node\\n */\\nconst resolveAssets = (node, fontStore) =>\\n  R.compose(\\n    R.then(R.always(node)),\\n    p => Promise.all(p),\\n    fetchAssets,\\n  )(fontStore, node);\\n\\nexport default resolveAssets;\\n\\n[end of resolveAssets.js]\\n[start of node.js]\\nimport fs from 'fs';\\nimport * as primitives from '@react-pdf/primitives';\\nimport { pdf, version, Font, StyleSheet } from './index';\\n\\nexport const renderToStream = async element => {\\n  const instance = pdf(element);\\n  const buffer = await instance.toBuffer();\\n  return buffer;\\n};\\n\\nexport const renderToString = element => {\\n  const instance = pdf(element);\\n  return instance.toString();\\n};\\n\\nexport const renderToFile = async (element, filePath, callback) => {\\n  const output = await renderToStream(element);\\n  const stream = fs.createWriteStream(filePath);\\n\\n  output.pipe(stream);\\n\\n  return new Promise((resolve, reject) => {\\n    stream.on('finish', () => {\\n      if (callback) callback(output, filePath);\\n      resolve(output);\\n    });\\n    stream.on('error', reject);\\n  });\\n};\\n\\nconst throwEnvironmentError = name => {\\n  throw new Error(\\n    `${name} is a web specific API. You're either using this component on Node, or your bundler is not loading react-pdf from the appropriate web build.`,\\n  );\\n};\\n\\nexport const usePDF = () => {\\n  throwEnvironmentError('usePDF');\\n};\\n\\nexport const PDFViewer = () => {\\n  throwEnvironmentError('PDFViewer');\\n};\\n\\nexport const PDFDownloadLink = () => {\\n  throwEnvironmentError('PDFDownloadLink');\\n};\\n\\nexport const BlobProvider = () => {\\n  throwEnvironmentError('BlobProvider');\\n};\\n\\nexport const render = renderToFile;\\n\\nexport * from './index';\\n\\nexport * from '@react-pdf/primitives';\\n\\nexport default {\\n  pdf,\\n  Font,\\n  version,\\n  StyleSheet,\\n  PDFViewer,\\n  BlobProvider,\\n  PDFDownloadLink,\\n  renderToStream,\\n  renderToString,\\n  renderToFile,\\n  render,\\n  ...primitives,\\n};\\n\\n[end of node.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "fetchImage.js",
        "README.md",
        "getSource.js",
        "resolveAssets.js",
        "node.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "74aa8236-f1b5-484f-aae6-76c82ea2a7ad",
        "score": 0.01639344262295082,
        "payload": {
          "text": "/* eslint-disable no-param-reassign */\n\nimport resolveImage from '@react-pdf/image';\n\nimport getSource from './getSource';\n\n/**\n * Resolves async src if passed\n *\n * @param {string | Function} src\n * @returns {object} resolved src\n */\nconst resolveSrc = async src =>\n  typeof src === 'function' ? { uri: await src() } : src;\n\n/**\n * Fetches image and append data to node\n * Ideally this fn should be immutable.\n *\n * @param {Object} node\n */\nconst fetchImage = async node => {\n  const src = getSource(node);\n  const { cache } = node.props;\n\n  if (!src) {\n    console.warn(false, 'Image should receive either a \"src\" or \"source\" prop');\n    return;\n  }\n\n  try {\n    const source = await resolveSrc(src);\n    node.image = await resolveImage(source, { cache });\n  } catch (e) {\n    node.image = { width: 0, height: 0 };\n    console.warn(e.message);\n  }\n};\n\nexport default fetchImage;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/src/image/fetchImage.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "c5a7a567-d45e-42d7-8f2b-ea02a1c8c800",
        "score": 0.016129032258064516,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n</p>\n\n# @react-pdf/image\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/image/README.md",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "407863be-951d-41fa-bbe0-10a8c3220ea6",
        "score": 0.015873015873015872,
        "payload": {
          "text": "/**\n * Get image source\n *\n * @param {Object} image node\n * @returns {String} image src\n */\nconst getSource = node => {\n  const value = node.props?.src || node.props?.source || node.props?.href;\n  return typeof value === 'string' ? { uri: value } : value;\n};\n\nexport default getSource;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/src/image/getSource.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "cd9ae290-9549-45ad-be89-7a9ddc20484e",
        "score": 0.015625,
        "payload": {
          "text": "import * as R from 'ramda';\nimport * as P from '@react-pdf/primitives';\n\nimport fetchEmojis from '../text/emoji';\nimport fetchImage from '../image/fetchImage';\n\nconst isImage = R.propEq('type', P.Image);\n\n/**\n * Get all asset promises that need to be resolved\n *\n * @param {Object} root node\n * @returns {Array} asset promises\n */\nconst fetchAssets = (fontStore, node) => {\n  const promises = [];\n  const listToExplore = node.children?.slice(0) || [];\n  const emojiSource = fontStore ? fontStore.getEmojiSource() : null;\n\n  while (listToExplore.length > 0) {\n    const n = listToExplore.shift();\n\n    if (isImage(n)) {\n      promises.push(fetchImage(n));\n    }\n\n    if (fontStore && n.style?.fontFamily) {\n      promises.push(fontStore.load(n.style));\n    }\n\n    if (typeof n === 'string') {\n      promises.push(...fetchEmojis(n, emojiSource));\n    }\n\n    if (typeof n.value === 'string') {\n      promises.push(...fetchEmojis(n.value, emojiSource));\n    }\n\n    if (n.children) {\n      n.children.forEach(childNode => {\n        listToExplore.push(childNode);\n      });\n    }\n  }\n\n  return promises;\n};\n\n/**\n * Fetch image, font and emoji assets in parallel.\n * Layout process will not be resumed until promise resolves.\n *\n * @param {Object} root node\n * @param {Object} fontStore font store\n * @returns {Object} root node\n */\nconst resolveAssets = (node, fontStore) =>\n  R.compose(\n    R.then(R.always(node)),\n    p => Promise.all(p),\n    fetchAssets,\n  )(fontStore, node);\n\nexport default resolveAssets;\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/layout/src/steps/resolveAssets.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "4ee4d19f-07e5-4f28-9298-9aec9a0613d1",
        "score": 0.015384615384615385,
        "payload": {
          "text": "import fs from 'fs';\nimport * as primitives from '@react-pdf/primitives';\nimport { pdf, version, Font, StyleSheet } from './index';\n\nexport const renderToStream = async element => {\n  const instance = pdf(element);\n  const buffer = await instance.toBuffer();\n  return buffer;\n};\n\nexport const renderToString = element => {\n  const instance = pdf(element);\n  return instance.toString();\n};\n\nexport const renderToFile = async (element, filePath, callback) => {\n  const output = await renderToStream(element);\n  const stream = fs.createWriteStream(filePath);\n\n  output.pipe(stream);\n\n  return new Promise((resolve, reject) => {\n    stream.on('finish', () => {\n      if (callback) callback(output, filePath);\n      resolve(output);\n    });\n    stream.on('error', reject);\n  });\n};\n\nconst throwEnvironmentError = name => {\n  throw new Error(\n    `${name} is a web specific API. You're either using this component on Node, or your bundler is not loading react-pdf from the appropriate web build.`,\n  );\n};\n\nexport const usePDF = () => {\n  throwEnvironmentError('usePDF');\n};\n\nexport const PDFViewer = () => {\n  throwEnvironmentError('PDFViewer');\n};\n\nexport const PDFDownloadLink = () => {\n  throwEnvironmentError('PDFDownloadLink');\n};\n\nexport const BlobProvider = () => {\n  throwEnvironmentError('BlobProvider');\n};\n\nexport const render = renderToFile;\n\nexport * from './index';\n\nexport * from '@react-pdf/primitives';\n\nexport default {\n  pdf,\n  Font,\n  version,\n  StyleSheet,\n  PDFViewer,\n  BlobProvider,\n  PDFDownloadLink,\n  renderToStream,\n  renderToString,\n  renderToFile,\n  render,\n  ...primitives,\n};\n",
          "filepath": "data/repos/diegomura/react-pdf-2.0/packages/renderer/src/node.js",
          "repo": "diegomura/react-pdf",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "processing__p5.js-4147",
    "model_patch": "diff --git a/src/webgl/p5.RendererGL.js b/src/webgl/p5.RendererGL.js\nindex 1234567..89abcde 100644\n--- a/src/webgl/p5.RendererGL.js\n+++ b/src/webgl/p5.RendererGL.js\n@@ -300,6 +300,7 @@ p5.RendererGL = function(elt, pInst, isMainCanvas, attr) {\n   this._defaultLightShader = undefined;\n   this._defaultImmediateModeShader = undefined;\n   this._defaultNormalShader = undefined;\n+  this._defaultColorShader = undefined;\n   this._defaultPointShader = undefined;\n \n   this._pointVertexBuffer = this.GL.createBuffer();\n@@ -600,6 +601,7 @@ p5.RendererGL.prototype._initContext = function() {\n   } catch (er) {\n     throw er;\n   }\n+  this._initShaders();\n };\n \n //This is helper function to reset the context anytime the attributes\n@@ -700,6 +702,7 @@ p5.RendererGL.prototype._resetContext = function(options, callback) {\n   const renderer = new p5.RendererGL(\n     this._pInst.canvas,\n     this._pInst,\n+    !isPGraphics\n   );\n   this._pInst._setProperty('_renderer', renderer);\n   renderer.resize(w, h);\n@@ -1100,6 +1103,7 @@ p5.RendererGL.prototype._update = function() {\n   this.spotLightConc.length = 0;\n \n   this._enableLighting = false;\n+  this._useVertexColorShader = false;\n \n   //reset tint value for new frame\n   this._tint = [255, 255, 255, 255];\n@@ -1500,6 +1504,7 @@ p5.RendererGL.prototype.fill = function(v1, v2, v3, a) {\n   this.curFillColor = color._array;\n   this.drawMode = constants.FILL;\n   this._useNormalMaterial = false;\n+  this._useVertexColorShader = true;\n   this._tex = null;\n };\n \n@@ -1600,6 +1605,7 @@ p5.RendererGL.prototype.stroke = function(r, g, b, a) {\n   arguments[3] = 255;\n   const color = p5.prototype.color.apply(this._pInst, arguments);\n   this.curStrokeColor = color._array;\n+  this._useVertexColorShader = true;\n };\n \n p5.RendererGL.prototype.strokeCap = cap => {\n@@ -2000,6 +2006,7 @@ p5.RendererGL.prototype._getPixel = function(x, y) {\n   imageData = new Uint8Array(4);\n   // prettier-ignore\n   this.drawingContext.readPixels(\n+      x, y, 1, 1,\n       this.drawingContext.RGBA, this.drawingContext.UNSIGNED_BYTE,\n       imageData\n     );",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 311.92,
      "issue_embedding_time_ms": 311.92,
      "retrieval_time_ms_jina": 1.91,
      "retrieval_time_ms": 1.91,
      "total_retrieval_time_ms": 313.83,
      "generation_time_ms": 5617.45,
      "total_io_time_ms": 5931.28,
      "input_total_token_limit": null,
      "issue_text_tokens": 635,
      "vlm_tokens": 0,
      "retrieved_tokens": 11000,
      "prompt_template_tokens": 525,
      "total_input_prompt_tokens": 12160,
      "output_generated_tokens": 632,
      "total_io_tokens": 12792,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nWEBGL vertex color no longer working as expected in 0.8.0\\nI read multiple issues related to WEBGL but I could not find this one. It seems something broke between 0.8.0 and 0.9.0. \\r\\n\\r\\n#### Nature of issue?\\r\\n\\r\\n- [x] Found a bug\\r\\n- [ ] Existing feature enhancement\\r\\n- [ ] New feature request\\r\\n\\r\\n#### Most appropriate sub-area of p5.js?\\r\\n\\r\\n- [x] Color\\r\\n- [ ] Core/Environment/Rendering\\r\\n- [ ] Data\\r\\n- [ ] Events\\r\\n- [ ] Image\\r\\n- [ ] IO\\r\\n- [ ] Math\\r\\n- [ ] Typography\\r\\n- [ ] Utilities\\r\\n- [x] WebGL\\r\\n- [ ] Other (specify if possible)\\r\\n\\r\\n#### Which platform were you using when you encountered this?\\r\\n\\r\\n- [ ] Mobile/Tablet (touch devices)\\r\\n- [x] Desktop/Laptop\\r\\n- [ ] Others (specify if possible)\\r\\n\\r\\n#### Details about the bug: \\r\\n\\r\\n- p5.js version: 0.9.0\\r\\n- Web browser and version: 78.0.3904.97\\r\\n- Operating System: Windows 10\\r\\n- Steps to reproduce this:\\r\\n\\r\\n1) Using the p4js editor, create a new sketch, and make sure the HTML has a reference to p5js version 0.9.0\\r\\n2) Paste the following code to the editor and hit play. A live version is available [here](https://editor.p5js.org/haschdl/sketches/tlmBNIdjR)\\r\\n\\r\\n```javascript\\r\\nfunction setup() {\\r\\n  createCanvas(500, 500, WEBGL);\\r\\n}\\r\\n\\r\\nfunction draw() {\\r\\n  beginShape();\\r\\n  fill(100,100,20);\\r\\n  vertex(-150, -150);\\r\\n  fill(250);\\r\\n  vertex(150, -150);\\r\\n  fill(200);\\r\\n  vertex(150, 150);\\r\\n  fill(100,50, 100);\\r\\n  vertex(-150, 150);\\r\\n  endShape(CLOSE);\\r\\n}\\r\\n```\\r\\n3) The output will be as follows (using p5.js version 0.9.0):\\r\\n![image](https://user-images.githubusercontent.com/9550197/68548929-8b2a5e00-03f2-11ea-9992-02cb1b185d81.png)\\r\\n\\r\\nChanging the `sketch.hmtl` to use the version **0.8.0**, we get the expected output. A live version is available [here](https://editor.p5js.org/haschdl/sketches/LNpN29qY4). Note the code in `sketch.js` is the same, but the reference inside `sketch.html` is to p5js 0.8.0\\r\\n![image](https://user-images.githubusercontent.com/9550197/68548937-ae550d80-03f2-11ea-9570-682b42bbd7e0.png)\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n#### Feature enhancement details:\\r\\n\\r\\n\\r\\n\\r\\n#### New feature details:\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of tanvi_gsoc_2018.md]\\n# Improvements to existing I/O Methods of p5.js \\n### by Tanvi Kumar ([@TanviKumar](https://github.com/TanviKumar))\\n\\n## Summary\\n\\nMy project for GSoC'18 initially revolved around looking into the I/O methods and trying to resolve the existing issues related to them. It later moved into closing issues related to WebGL and many old I/O issues were resolved.\\n\\nThroughout the three months, I've been able to modify code, add new features, add examples and make changes to documentation. A lot of my time was spent testing the methods on different browsers, replicating open issues to help resolve them and finding solutions for issues.\\n\\n## Contributions during GSoC'18 \\n\\n### Testing I/O methods\\n\\nThe first coding period of GSoC'18 was spent analysing and testing the I/O methods on different browsers and also testing their examples.\\nOn testing these methods, a common issue regarding the size of files to be fetched was found for the loading methods of p5.js. \\n[#2981](https://github.com/processing/p5.js/issues/2981) clearly encapsulated the other issues [#2661](https://github.com/processing/p5.js/issues/2661) and [#2216](https://github.com/processing/p5.js/issues/2216) regarding this. \\nIt was found that browsers like Chrome can easily fetch large files despite taking a lot of time, however old versions of browsers like Firefox can fetch files up to a maximum of 64MB in one request. A size allocation limit error would be reached if the file is too big.\\n\\nVarious ideas were looked into to try and find appropriate solutions to these issues.\\nThese included - \\nAdding the knowledge of the size limit of browsers to the documentation,\\nGenerating errors before fetching lare files\\nUsing HEAD requests to get the size of the file then producing an error if limit was exceeded and finally, \\nTo fetch the file anyway in case a certain browser can handle it and issue a warning to the user. \\nThe final discussions have led to [#3217](https://github.com/processing/p5.js/pull/3127).\\nThe documentation for the loading methods will now warn the users regarding the issue about size limit and also give the user a friendly error if a large file is being fetched just so they may be informed.\\nThe friendly error system (FES) of p5.js was used to do this. \\n\\nSome issues involved trying to replicate them so they may be fixed, including issue [#2842](https://github.com/processing/p5.js/issues/2842) and [#1829](https://github.com/processing/p5.js/issues/1829).\\n\\n### New feature\\n\\nA method to add the HTML DOM input color object was created and successfully merged in [#3089](https://github.com/processing/p5.js/pull/3089).\\nThis was done to close the [#2504](https://github.com/processing/p5.js/issues/2504).\\nIt can give the user the hex string color value of the input element and also a p5.Color object with the chosen color so that it may be easily integrated into sketches that use methods which accept p5.Color objects like lerpColor method in p5.js.\\n\\n### New examples and documentation\\n\\n- Added a new example and fixed the old example of the loadModel method in [#2968](https://github.com/processing/p5.js/pull/2968). This was to close the[#2904](https://github.com/processing/p5.js/issues/2904) .\\n- Changed the model() example in [#3074](https://github.com/processing/p5.js/pull/3074)\\n- Added the example and manual test example for createColorPicker method in [#3089](https://github.com/processing/p5.js/pull/3089)\\n\\n## Conclusion\\n\\nGSoC'18 was an incredibly enriching experience. I'm happy to know that I was able to successfully contribute to p5.js and close numerous issues and hope that my work will continue to do so in the future. I'd also like to add that I'd love to continue being a part of p5.js in the future after these fulfilling 3 months.\\n\\n## Acknowledgements\\n\\nI'd like to thank my mentor, [Alice Mira Chung](https://github.com/almchung) for her guidance, patience and support. I'd also like to thank Lauren McCarthy and others in the p5.js community who helped me successfuly close issues and guided me when I stumbled. Really grateful for having had this oppurtunity and such an encouraging environment.\\n[end of tanvi_gsoc_2018.md]\\n[start of setting.js]\\nsuite('color/Setting', function() {\\n  let myp5; // sketch without WEBGL Mode\\n  let my3D; // sketch with WEBGL mode\\n  setup(function(done) {\\n    new p5(function(p) {\\n      p.setup = function() {\\n        myp5 = p;\\n      };\\n    });\\n    new p5(function(p) {\\n      p.setup = function() {\\n        p.createCanvas(100, 100, p.WEBGL);\\n        my3D = p;\\n      };\\n    });\\n    done();\\n  });\\n\\n  teardown(function() {\\n    myp5.remove();\\n    my3D.remove();\\n  });\\n\\n  suite('p5.prototype.erase', function() {\\n    test('should be a function', function() {\\n      assert.ok(myp5.erase);\\n    });\\n\\n    test('should set renderer to erasing state', function() {\\n      myp5.erase();\\n      assert.isTrue(myp5._renderer._isErasing);\\n    });\\n\\n    test('should cache renderer fill', function() {\\n      myp5.fill(255, 0, 0);\\n      const fillStyle = myp5.drawingContext.fillStyle;\\n      myp5.erase();\\n      assert.deepEqual(myp5._renderer._cachedFillStyle, fillStyle);\\n    });\\n\\n    test('should cache renderer stroke', function() {\\n      myp5.stroke(255, 0, 0);\\n      const strokeStyle = myp5.drawingContext.strokeStyle;\\n      myp5.erase();\\n      assert.deepEqual(myp5._renderer._cachedStrokeStyle, strokeStyle);\\n    });\\n\\n    test('should cache renderer blend', function() {\\n      myp5.blendMode(myp5.SCREEN);\\n      myp5.erase();\\n      assert.deepEqual(myp5._renderer._cachedBlendMode, myp5.SCREEN);\\n    });\\n\\n    test('should set fill strength', function() {\\n      myp5.erase(125);\\n      assert.equal(\\n        myp5.color(myp5.drawingContext.fillStyle).array,\\n        myp5.color(255, 125).array\\n      );\\n    });\\n\\n    test('should set stroke strength', function() {\\n      myp5.erase(255, 50);\\n      assert.equal(\\n        myp5.color(myp5.drawingContext.strokeStyle).array,\\n        myp5.color(255, 50).array\\n      );\\n    });\\n  });\\n\\n  suite('p5.RendererGL.prototype.erase', function() {\\n    test('should set renderer to erasing state', function() {\\n      my3D.erase();\\n      assert.isTrue(my3D._renderer._isErasing);\\n    });\\n\\n    test('should cache renderer fill', function() {\\n      my3D.fill(255, 0, 0);\\n      const curFillColor = my3D._renderer.curFillColor;\\n      my3D.erase();\\n      assert.deepEqual(my3D._renderer._cachedFillStyle, curFillColor);\\n    });\\n\\n    test('should cache renderer stroke', function() {\\n      my3D.stroke(255, 0, 0);\\n      const strokeStyle = my3D._renderer.curStrokeColor;\\n      my3D.erase();\\n      assert.deepEqual(my3D._renderer._cachedStrokeStyle, strokeStyle);\\n    });\\n\\n    test('should cache renderer blend', function() {\\n      my3D.blendMode(my3D.SCREEN);\\n      my3D.erase();\\n      assert.deepEqual(my3D._renderer._cachedBlendMode, my3D.SCREEN);\\n    });\\n\\n    test('should set fill strength', function() {\\n      my3D.erase(125);\\n      assert.deepEqual(my3D._renderer.curFillColor, [1, 1, 1, 125 / 255]);\\n    });\\n\\n    test('should set stroke strength', function() {\\n      my3D.erase(255, 50);\\n      assert.deepEqual(my3D._renderer.curStrokeColor, [1, 1, 1, 50 / 255]);\\n    });\\n\\n    test('should set default values when no arguments', function() {\\n      my3D.erase();\\n      assert.deepEqual(my3D._renderer.curFillColor, [1, 1, 1, 1]);\\n      assert.deepEqual(my3D._renderer.curStrokeColor, [1, 1, 1, 1]);\\n    });\\n  });\\n\\n  suite('p5.prototype.noErase', function() {\\n    test('should be a function', function() {\\n      assert.ok(myp5.noErase);\\n    });\\n\\n    test('should turn off renderer erasing state', function() {\\n      myp5.erase();\\n      myp5.noErase();\\n      assert.isFalse(myp5._renderer._isErasing);\\n    });\\n\\n    test('should restore cached renderer fill', function() {\\n      myp5.fill(255, 0, 0);\\n      const fillStyle = myp5.drawingContext.fillStyle;\\n      myp5.erase();\\n      myp5.noErase();\\n      assert.deepEqual(myp5.drawingContext.fillStyle, fillStyle);\\n    });\\n\\n    test('should restore cached renderer stroke', function() {\\n      myp5.stroke(255, 0, 0);\\n      const strokeStyle = myp5.drawingContext.strokeStyle;\\n      myp5.erase();\\n      myp5.noErase();\\n      assert.deepEqual(myp5.drawingContext.strokeStyle, strokeStyle);\\n    });\\n  });\\n\\n  suite('p5.RendererGL.prototype.noErase', function() {\\n    test('should turn off renderer erasing state', function() {\\n      my3D.erase();\\n      my3D.noErase();\\n      assert.isFalse(my3D._renderer._isErasing);\\n    });\\n\\n    test('should restore cached renderer fill', function() {\\n      my3D.fill(255, 0, 0);\\n      const fillStyle = my3D._renderer.curFillColor.slice();\\n      my3D.erase();\\n      my3D.noErase();\\n      assert.deepEqual([1, 0, 0, 1], fillStyle);\\n    });\\n\\n    test('should restore cached renderer stroke', function() {\\n      my3D.stroke(255, 0, 0);\\n      const strokeStyle = my3D._renderer.curStrokeColor.slice();\\n      my3D.erase();\\n      my3D.noErase();\\n      assert.deepEqual([1, 0, 0, 1], strokeStyle);\\n    });\\n  });\\n\\n  suite('p5.prototype.colorMode', function() {\\n    test('should be a function', function() {\\n      assert.ok(myp5.colorMode);\\n    });\\n\\n    test('should set mode to RGB', function() {\\n      myp5.colorMode(myp5.RGB);\\n      assert.equal(myp5._colorMode, myp5.RGB);\\n    });\\n\\n    test('should correctly set color RGB maxes', function() {\\n      assert.deepEqual(myp5._colorMaxes[myp5.RGB], [255, 255, 255, 255]);\\n      myp5.colorMode(myp5.RGB, 1, 1, 1);\\n      assert.deepEqual(myp5._colorMaxes[myp5.RGB], [1, 1, 1, 255]);\\n      myp5.colorMode(myp5.RGB, 1);\\n      assert.deepEqual(myp5._colorMaxes[myp5.RGB], [1, 1, 1, 1]);\\n      myp5.colorMode(myp5.RGB, 255, 255, 255, 1);\\n      assert.deepEqual(myp5._colorMaxes[myp5.RGB], [255, 255, 255, 1]);\\n      myp5.colorMode(myp5.RGB, 255);\\n    });\\n\\n    test('should set mode to HSL', function() {\\n      myp5.colorMode(myp5.HSL);\\n      assert.equal(myp5._colorMode, myp5.HSL);\\n    });\\n\\n    test('should correctly set color HSL maxes', function() {\\n      assert.deepEqual(myp5._colorMaxes[myp5.HSL], [360, 100, 100, 1]);\\n      myp5.colorMode(myp5.HSL, 255, 255, 255);\\n      assert.deepEqual(myp5._colorMaxes[myp5.HSL], [255, 255, 255, 1]);\\n      myp5.colorMode(myp5.HSL, 360);\\n      assert.deepEqual(myp5._colorMaxes[myp5.HSL], [360, 360, 360, 360]);\\n      myp5.colorMode(myp5.HSL, 360, 100, 100, 1);\\n      assert.deepEqual(myp5._colorMaxes[myp5.HSL], [360, 100, 100, 1]);\\n    });\\n\\n    test('should set mode to HSB', function() {\\n      myp5.colorMode(myp5.HSB);\\n      assert.equal(myp5._colorMode, myp5.HSB);\\n    });\\n\\n    test('should correctly set color HSB maxes', function() {\\n      assert.deepEqual(myp5._colorMaxes[myp5.HSB], [360, 100, 100, 1]);\\n      myp5.colorMode(myp5.HSB, 255, 255, 255);\\n      assert.deepEqual(myp5._colorMaxes[myp5.HSB], [255, 255, 255, 1]);\\n      myp5.colorMode(myp5.HSB, 360);\\n      assert.deepEqual(myp5._colorMaxes[myp5.HSB], [360, 360, 360, 360]);\\n      myp5.colorMode(myp5.HSB, 360, 100, 100, 1);\\n      assert.deepEqual(myp5._colorMaxes[myp5.HSB], [360, 100, 100, 1]);\\n    });\\n  });\\n});\\n\\n[end of setting.js]\\n[start of p5.RendererGL.js]\\nimport p5 from '../core/main';\\nimport * as constants from '../core/constants';\\nimport libtess from 'libtess';\\nimport './p5.Shader';\\nimport './p5.Camera';\\nimport '../core/p5.Renderer';\\nimport './p5.Matrix';\\nimport { readFileSync } from 'fs';\\nimport { join } from 'path';\\n\\nconst lightingShader = readFileSync(\\n  join(__dirname, '/shaders/lighting.glsl'),\\n  'utf-8'\\n);\\n\\nconst defaultShaders = {\\n  immediateVert: readFileSync(\\n    join(__dirname, '/shaders/immediate.vert'),\\n    'utf-8'\\n  ),\\n  vertexColorVert: readFileSync(\\n    join(__dirname, '/shaders/vertexColor.vert'),\\n    'utf-8'\\n  ),\\n  vertexColorFrag: readFileSync(\\n    join(__dirname, '/shaders/vertexColor.frag'),\\n    'utf-8'\\n  ),\\n  normalVert: readFileSync(join(__dirname, '/shaders/normal.vert'), 'utf-8'),\\n  normalFrag: readFileSync(join(__dirname, '/shaders/normal.frag'), 'utf-8'),\\n  basicFrag: readFileSync(join(__dirname, '/shaders/basic.frag'), 'utf-8'),\\n  lightVert:\\n    lightingShader +\\n    readFileSync(join(__dirname, '/shaders/light.vert'), 'utf-8'),\\n  lightTextureFrag: readFileSync(\\n    join(__dirname, '/shaders/light_texture.frag'),\\n    'utf-8'\\n  ),\\n  phongVert: readFileSync(join(__dirname, '/shaders/phong.vert'), 'utf-8'),\\n  phongFrag:\\n    lightingShader +\\n    readFileSync(join(__dirname, '/shaders/phong.frag'), 'utf-8'),\\n  fontVert: readFileSync(join(__dirname, '/shaders/font.vert'), 'utf-8'),\\n  fontFrag: readFileSync(join(__dirname, '/shaders/font.frag'), 'utf-8'),\\n  lineVert: readFileSync(join(__dirname, '/shaders/line.vert'), 'utf-8'),\\n  lineFrag: readFileSync(join(__dirname, '/shaders/line.frag'), 'utf-8'),\\n  pointVert: readFileSync(join(__dirname, '/shaders/point.vert'), 'utf-8'),\\n  pointFrag: readFileSync(join(__dirname, '/shaders/point.frag'), 'utf-8')\\n};\\n\\n/**\\n * 3D graphics class\\n * @private\\n * @class p5.RendererGL\\n * @constructor\\n * @extends p5.Renderer\\n * @todo extend class to include public method for offscreen\\n * rendering (FBO).\\n *\\n */\\np5.RendererGL = function(elt, pInst, isMainCanvas, attr) {\\n  p5.Renderer.call(this, elt, pInst, isMainCanvas);\\n  this._setAttributeDefaults(pInst);\\n  this._initContext();\\n  this.isP3D = true; //lets us know we're in 3d mode\\n  this.GL = this.drawingContext;\\n\\n  // erasing\\n  this._isErasing = false;\\n\\n  // lights\\n  this._enableLighting = false;\\n\\n  this.ambientLightColors = [];\\n  this.specularColors = [1, 1, 1];\\n\\n  this.directionalLightDirections = [];\\n  this.directionalLightDiffuseColors = [];\\n  this.directionalLightSpecularColors = [];\\n\\n  this.pointLightPositions = [];\\n  this.pointLightDiffuseColors = [];\\n  this.pointLightSpecularColors = [];\\n\\n  this.spotLightPositions = [];\\n  this.spotLightDirections = [];\\n  this.spotLightDiffuseColors = [];\\n  this.spotLightSpecularColors = [];\\n  this.spotLightAngle = [];\\n  this.spotLightConc = [];\\n\\n  this.drawMode = constants.FILL;\\n\\n  this.curFillColor = this._cachedFillStyle = [1, 1, 1, 1];\\n  this.curStrokeColor = this._cachedStrokeStyle = [0, 0, 0, 1];\\n\\n  this.curBlendMode = this._cachedBlendMode = constants.BLEND;\\n  this.blendExt = this.GL.getExtension('EXT_blend_minmax');\\n\\n  this._useSpecularMaterial = false;\\n  this._useEmissiveMaterial = false;\\n  this._useNormalMaterial = false;\\n  this._useShininess = 1;\\n\\n  this._tint = [255, 255, 255, 255];\\n\\n  // lightFalloff variables\\n  this.constantAttenuation = 1;\\n  this.linearAttenuation = 0;\\n  this.quadraticAttenuation = 0;\\n\\n  /**\\n   * model view, projection, & normal\\n   * matrices\\n   */\\n  this.uMVMatrix = new p5.Matrix();\\n  this.uPMatrix = new p5.Matrix();\\n  this.uNMatrix = new p5.Matrix('mat3');\\n\\n  // Camera\\n  this._curCamera = new p5.Camera(this);\\n  this._curCamera._computeCameraDefaultSettings();\\n  this._curCamera._setDefaultCamera();\\n\\n  //Geometry & Material hashes\\n  this.gHash = {};\\n\\n  this._defaultLightShader = undefined;\\n  this._defaultImmediateModeShader = undefined;\\n  this._defaultNormalShader = undefined;\\n  this._defaultColorShader = undefined;\\n  this._defaultPointShader = undefined;\\n\\n  this._pointVertexBuffer = this.GL.createBuffer();\\n\\n  this.userFillShader = undefined;\\n  this.userStrokeShader = undefined;\\n  this.userPointShader = undefined;\\n\\n  //Imediate Mode\\n  //default drawing is done in Retained Mode\\n  this.isImmediateDrawing = false;\\n  this.immediateMode = {};\\n\\n  this.pointSize = 5.0; //default point size\\n  this.curStrokeWeight = 1;\\n\\n  // array of textures created in this gl context via this.getTexture(src)\\n  this.textures = [];\\n\\n  this.textureMode = constants.IMAGE;\\n  // default wrap settings\\n  this.textureWrapX = constants.CLAMP;\\n  this.textureWrapY = constants.CLAMP;\\n  this._tex = null;\\n  this._curveTightness = 6;\\n\\n  // lookUpTable for coefficients needed to be calculated for bezierVertex, same are used for curveVertex\\n  this._lookUpTableBezier = [];\\n  // lookUpTable for coefficients needed to be calculated for quadraticVertex\\n  this._lookUpTableQuadratic = [];\\n\\n  // current curveDetail in the Bezier lookUpTable\\n  this._lutBezierDetail = 0;\\n  // current curveDetail in the Quadratic lookUpTable\\n  this._lutQuadraticDetail = 0;\\n\\n  this._tessy = this._initTessy();\\n\\n  this.fontInfos = {};\\n\\n  return this;\\n};\\n\\np5.RendererGL.prototype = Object.create(p5.Renderer.prototype);\\n\\n//////////////////////////////////////////////\\n// Setting\\n//////////////////////////////////////////////\\n\\np5.RendererGL.prototype._setAttributeDefaults = pInst => {\\n  const defaults = {\\n    alpha: true,\\n    depth: true,\\n    stencil: true,\\n    antialias: false,\\n    premultipliedAlpha: false,\\n    preserveDrawingBuffer: true,\\n    perPixelLighting: false\\n  };\\n  if (pInst._glAttributes === null) {\\n    pInst._glAttributes = defaults;\\n  } else {\\n    pInst._glAttributes = Object.assign(defaults, pInst._glAttributes);\\n  }\\n  return;\\n};\\n\\np5.RendererGL.prototype._initContext = function() {\\n  try {\\n    this.drawingContext =\\n      this.canvas.getContext('webgl', this._pInst._glAttributes) ||\\n      this.canvas.getContext('experimental-webgl', this._pInst._glAttributes);\\n    if (this.drawingContext === null) {\\n      throw new Error('Error creating webgl context');\\n    } else {\\n      const gl = this.drawingContext;\\n      gl.enable(gl.DEPTH_TEST);\\n      gl.depthFunc(gl.LEQUAL);\\n      gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\\n      this._viewport = this.drawingContext.getParameter(\\n        this.drawingContext.VIEWPORT\\n      );\\n    }\\n  } catch (er) {\\n    throw er;\\n  }\\n};\\n\\n//This is helper function to reset the context anytime the attributes\\n//are changed with setAttributes()\\n\\np5.RendererGL.prototype._resetContext = function(options, callback) {\\n  const w = this.width;\\n  const h = this.height;\\n  const defaultId = this.canvas.id;\\n  const isPGraphics = this._pInst instanceof p5.Graphics;\\n\\n  if (isPGraphics) {\\n    const pg = this._pInst;\\n    pg.canvas.parentNode.removeChild(pg.canvas);\\n    pg.canvas = document.createElement('canvas');\\n    const node = pg._pInst._userNode || document.body;\\n    node.appendChild(pg.canvas);\\n    p5.Element.call(pg, pg.canvas, pg._pInst);\\n    pg.width = w;\\n    pg.height = h;\\n  } else {\\n    let c = this.canvas;\\n    if (c) {\\n      c.parentNode.removeChild(c);\\n    }\\n    c = document.createElement('canvas');\\n    c.id = defaultId;\\n    if (this._pInst._userNode) {\\n      this._pInst._userNode.appendChild(c);\\n    } else {\\n      document.body.appendChild(c);\\n    }\\n    this._pInst.canvas = c;\\n  }\\n\\n  const renderer = new p5.RendererGL(\\n    this._pInst.canvas,\\n    this._pInst,\\n    !isPGraphics\\n  );\\n  this._pInst._setProperty('_renderer', renderer);\\n  renderer.resize(w, h);\\n  renderer._applyDefaults();\\n\\n  if (!isPGraphics) {\\n    this._pInst._elements.push(renderer);\\n  }\\n\\n  if (typeof callback === 'function') {\\n    //setTimeout with 0 forces the task to the back of the queue, this ensures that\\n    //we finish switching out the renderer\\n    setTimeout(() => {\\n      callback.apply(window._renderer, options);\\n    }, 0);\\n  }\\n};\\n/**\\n * @module Rendering\\n * @submodule Rendering\\n * @for p5\\n */\\n/**\\n * Set attributes for the WebGL Drawing context.\\n * This is a way of adjusting how the WebGL\\n * renderer works to fine-tune the display and performance.\\n * <br><br>\\n * Note that this will reinitialize the drawing context\\n * if called after the WebGL canvas is made.\\n * <br><br>\\n * If an object is passed as the parameter, all attributes\\n * not declared in the object will be set to defaults.\\n * <br><br>\\n * The available attributes are:\\n * <br>\\n * alpha - indicates if the canvas contains an alpha buffer\\n * default is true\\n * <br><br>\\n * depth - indicates whether the drawing buffer has a depth buffer\\n * of at least 16 bits - default is true\\n * <br><br>\\n * stencil - indicates whether the drawing buffer has a stencil buffer\\n * of at least 8 bits\\n * <br><br>\\n * antialias - indicates whether or not to perform anti-aliasing\\n * default is false\\n * <br><br>\\n * premultipliedAlpha - indicates that the page compositor will assume\\n * the drawing buffer contains colors with pre-multiplied alpha\\n * default is false\\n * <br><br>\\n * preserveDrawingBuffer - if true the buffers will not be cleared and\\n * and will preserve their values until cleared or overwritten by author\\n * (note that p5 clears automatically on draw loop)\\n * default is true\\n * <br><br>\\n * perPixelLighting - if true, per-pixel lighting will be used in the\\n * lighting shader.\\n * default is false\\n * <br><br>\\n * @method setAttributes\\n * @for p5\\n * @param  {String}  key Name of attribute\\n * @param  {Boolean}        value New value of named attribute\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(255);\\n *   push();\\n *   rotateZ(frameCount * 0.02);\\n *   rotateX(frameCount * 0.02);\\n *   rotateY(frameCount * 0.02);\\n *   fill(0, 0, 0);\\n *   box(50);\\n *   pop();\\n * }\\n * </code>\\n * </div>\\n * <br>\\n * Now with the antialias attribute set to true.\\n * <br>\\n * <div>\\n * <code>\\n * function setup() {\\n *   setAttributes('antialias', true);\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(255);\\n *   push();\\n *   rotateZ(frameCount * 0.02);\\n *   rotateX(frameCount * 0.02);\\n *   rotateY(frameCount * 0.02);\\n *   fill(0, 0, 0);\\n *   box(50);\\n *   pop();\\n * }\\n * </code>\\n * </div>\\n *\\n * <div>\\n * <code>\\n * // press the mouse button to enable perPixelLighting\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n *   noStroke();\\n *   fill(255);\\n * }\\n *\\n * let lights = [\\n *   { c: '#f00', t: 1.12, p: 1.91, r: 0.2 },\\n *   { c: '#0f0', t: 1.21, p: 1.31, r: 0.2 },\\n *   { c: '#00f', t: 1.37, p: 1.57, r: 0.2 },\\n *   { c: '#ff0', t: 1.12, p: 1.91, r: 0.7 },\\n *   { c: '#0ff', t: 1.21, p: 1.31, r: 0.7 },\\n *   { c: '#f0f', t: 1.37, p: 1.57, r: 0.7 }\\n * ];\\n *\\n * function draw() {\\n *   let t = millis() / 1000 + 1000;\\n *   background(0);\\n *   directionalLight(color('#222'), 1, 1, 1);\\n *\\n *   for (let i = 0; i < lights.length; i++) {\\n *     let light = lights[i];\\n *     pointLight(\\n *       color(light.c),\\n *       p5.Vector.fromAngles(t * light.t, t * light.p, width * light.r)\\n *     );\\n *   }\\n *\\n *   specularMaterial(255);\\n *   sphere(width * 0.1);\\n *\\n *   rotateX(t * 0.77);\\n *   rotateY(t * 0.83);\\n *   rotateZ(t * 0.91);\\n *   torus(width * 0.3, width * 0.07, 24, 10);\\n * }\\n *\\n * function mousePressed() {\\n *   setAttributes('perPixelLighting', true);\\n *   noStroke();\\n *   fill(255);\\n * }\\n * function mouseReleased() {\\n *   setAttributes('perPixelLighting', false);\\n *   noStroke();\\n *   fill(255);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt a rotating cube with smoother edges\\n */\\n/**\\n * @method setAttributes\\n * @for p5\\n * @param  {Object}  obj object with key-value pairs\\n */\\n\\np5.prototype.setAttributes = function(key, value) {\\n  if (typeof this._glAttributes === 'undefined') {\\n    console.log(\\n      'You are trying to use setAttributes on a p5.Graphics object ' +\\n        'that does not use a WEBGL renderer.'\\n    );\\n    return;\\n  }\\n  let unchanged = true;\\n  if (typeof value !== 'undefined') {\\n    //first time modifying the attributes\\n    if (this._glAttributes === null) {\\n      this._glAttributes = {};\\n    }\\n    if (this._glAttributes[key] !== value) {\\n      //changing value of previously altered attribute\\n      this._glAttributes[key] = value;\\n      unchanged = false;\\n    }\\n    //setting all attributes with some change\\n  } else if (key instanceof Object) {\\n    if (this._glAttributes !== key) {\\n      this._glAttributes = key;\\n      unchanged = false;\\n    }\\n  }\\n  //@todo_FES\\n  if (!this._renderer.isP3D || unchanged) {\\n    return;\\n  }\\n\\n  if (!this._setupDone) {\\n    for (const x in this._renderer.gHash) {\\n      if (this._renderer.gHash.hasOwnProperty(x)) {\\n        console.error(\\n          'Sorry, Could not set the attributes, you need to call setAttributes() ' +\\n            'before calling the other drawing methods in setup()'\\n        );\\n        return;\\n      }\\n    }\\n  }\\n\\n  this.push();\\n  this._renderer._resetContext();\\n  this.pop();\\n\\n  if (this._renderer._curCamera) {\\n    this._renderer._curCamera._renderer = this._renderer;\\n  }\\n};\\n\\n/**\\n * @class p5.RendererGL\\n */\\n\\np5.RendererGL.prototype._update = function() {\\n  // reset model view and apply initial camera transform\\n  // (containing only look at info; no projection).\\n  this.uMVMatrix.set(\\n    this._curCamera.cameraMatrix.mat4[0],\\n    this._curCamera.cameraMatrix.mat4[1],\\n    this._curCamera.cameraMatrix.mat4[2],\\n    this._curCamera.cameraMatrix.mat4[3],\\n    this._curCamera.cameraMatrix.mat4[4],\\n    this._curCamera.cameraMatrix.mat4[5],\\n    this._curCamera.cameraMatrix.mat4[6],\\n    this._curCamera.cameraMatrix.mat4[7],\\n    this._curCamera.cameraMatrix.mat4[8],\\n    this._curCamera.cameraMatrix.mat4[9],\\n    this._curCamera.cameraMatrix.mat4[10],\\n    this._curCamera.cameraMatrix.mat4[11],\\n    this._curCamera.cameraMatrix.mat4[12],\\n    this._curCamera.cameraMatrix.mat4[13],\\n    this._curCamera.cameraMatrix.mat4[14],\\n    this._curCamera.cameraMatrix.mat4[15]\\n  );\\n\\n  // reset light data for new frame.\\n\\n  this.ambientLightColors.length = 0;\\n  this.specularColors = [1, 1, 1];\\n\\n  this.directionalLightDirections.length = 0;\\n  this.directionalLightDiffuseColors.length = 0;\\n  this.directionalLightSpecularColors.length = 0;\\n\\n  this.pointLightPositions.length = 0;\\n  this.pointLightDiffuseColors.length = 0;\\n  this.pointLightSpecularColors.length = 0;\\n\\n  this.spotLightPositions.length = 0;\\n  this.spotLightDirections.length = 0;\\n  this.spotLightDiffuseColors.length = 0;\\n  this.spotLightSpecularColors.length = 0;\\n  this.spotLightAngle.length = 0;\\n  this.spotLightConc.length = 0;\\n\\n  this._enableLighting = false;\\n\\n  //reset tint value for new frame\\n  this._tint = [255, 255, 255, 255];\\n\\n  //Clear depth every frame\\n  this.GL.clear(this.GL.DEPTH_BUFFER_BIT);\\n};\\n\\n/**\\n * [background description]\\n */\\np5.RendererGL.prototype.background = function(...args) {\\n  const _col = this._pInst.color(...args);\\n  const _r = _col.levels[0] / 255;\\n  const _g = _col.levels[1] / 255;\\n  const _b = _col.levels[2] / 255;\\n  const _a = _col.levels[3] / 255;\\n  this.GL.clearColor(_r, _g, _b, _a);\\n  this.GL.depthMask(true);\\n  this.GL.clear(this.GL.COLOR_BUFFER_BIT | this.GL.DEPTH_BUFFER_BIT);\\n};\\n\\n//////////////////////////////////////////////\\n// COLOR\\n//////////////////////////////////////////////\\n/**\\n * Basic fill material for geometry with a given color\\n * @method  fill\\n * @class p5.RendererGL\\n * @param  {Number|Number[]|String|p5.Color} v1  gray value,\\n * red or hue value (depending on the current color mode),\\n * or color Array, or CSS color string\\n * @param  {Number}            [v2] green or saturation value\\n * @param  {Number}            [v3] blue or brightness value\\n * @param  {Number}            [a]  opacity\\n * @chainable\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(200, 200, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(0);\\n *   noStroke();\\n *   fill(100, 100, 240);\\n *   rotateX(frameCount * 0.01);\\n *   rotateY(frameCount * 0.01);\\n *   box(75, 75, 75);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * black canvas with purple cube spinning\\n *\\n */\\np5.RendererGL.prototype.fill = function(v1, v2, v3, a) {\\n  //see material.js for more info on color blending in webgl\\n  const color = p5.prototype.color.apply(this._pInst, arguments);\\n  this.curFillColor = color._array;\\n  this.drawMode = constants.FILL;\\n  this._useNormalMaterial = false;\\n  this._tex = null;\\n};\\n\\n/**\\n * Basic stroke material for geometry with a given color\\n * @method  stroke\\n * @param  {Number|Number[]|String|p5.Color} v1  gray value,\\n * red or hue value (depending on the current color mode),\\n * or color Array, or CSS color string\\n * @param  {Number}            [v2] green or saturation value\\n * @param  {Number}            [v3] blue or brightness value\\n * @param  {Number}            [a]  opacity\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(200, 200, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(0);\\n *   stroke(240, 150, 150);\\n *   fill(100, 100, 240);\\n *   rotateX(frameCount * 0.01);\\n *   rotateY(frameCount * 0.01);\\n *   box(75, 75, 75);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * black canvas with purple cube with pink outline spinning\\n *\\n */\\np5.RendererGL.prototype.stroke = function(r, g, b, a) {\\n  //@todo allow transparency in stroking currently doesn't have\\n  //any impact and causes problems with specularMaterial\\n  arguments[3] = 255;\\n  const color = p5.prototype.color.apply(this._pInst, arguments);\\n  this.curStrokeColor = color._array;\\n};\\n\\np5.RendererGL.prototype.strokeCap = cap => {\\n  // @TODO : to be implemented\\n  console.error('Sorry, strokeCap() is not yet implemented in WEBGL mode');\\n};\\n\\np5.RendererGL.prototype.strokeJoin = join => {\\n  // @TODO : to be implemented\\n  // https://processing.org/reference/strokeJoin_.html\\n  console.error('Sorry, strokeJoin() is not yet implemented in WEBGL mode');\\n};\\n\\np5.RendererGL.prototype.blendMode = function(mode) {\\n  if (\\n    mode === constants.DARKEST ||\\n    mode === constants.LIGHTEST ||\\n    mode === constants.ADD ||\\n    mode === constants.BLEND ||\\n    mode === constants.SUBTRACT ||\\n    mode === constants.SCREEN ||\\n    mode === constants.EXCLUSION ||\\n    mode === constants.REPLACE ||\\n    mode === constants.MULTIPLY ||\\n    mode === constants.REMOVE\\n  )\\n    this.curBlendMode = mode;\\n  else if (\\n    mode === constants.BURN ||\\n    mode === constants.OVERLAY ||\\n    mode === constants.HARD_LIGHT ||\\n    mode === constants.SOFT_LIGHT ||\\n    mode === constants.DODGE\\n  ) {\\n    console.warn(\\n      'BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.'\\n    );\\n  }\\n};\\n\\np5.RendererGL.prototype.erase = function(opacityFill, opacityStroke) {\\n  if (!this._isErasing) {\\n    this._cachedBlendMode = this.curBlendMode;\\n    this.blendMode(constants.REMOVE);\\n\\n    this._cachedFillStyle = this.curFillColor.slice();\\n    this.curFillColor = [1, 1, 1, opacityFill / 255];\\n\\n    this._cachedStrokeStyle = this.curStrokeColor.slice();\\n    this.curStrokeColor = [1, 1, 1, opacityStroke / 255];\\n\\n    this._isErasing = true;\\n  }\\n};\\n\\np5.RendererGL.prototype.noErase = function() {\\n  if (this._isErasing) {\\n    this.curFillColor = this._cachedFillStyle.slice();\\n    this.curStrokeColor = this._cachedStrokeStyle.slice();\\n\\n    this.blendMode(this._cachedBlendMode);\\n    this._isErasing = false;\\n  }\\n};\\n\\n/**\\n * Change weight of stroke\\n * @method  strokeWeight\\n * @param  {Number} stroke weight to be used for drawing\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(200, 400, WEBGL);\\n *   setAttributes('antialias', true);\\n * }\\n *\\n * function draw() {\\n *   background(0);\\n *   noStroke();\\n *   translate(0, -100, 0);\\n *   stroke(240, 150, 150);\\n *   fill(100, 100, 240);\\n *   push();\\n *   strokeWeight(8);\\n *   rotateX(frameCount * 0.01);\\n *   rotateY(frameCount * 0.01);\\n *   sphere(75);\\n *   pop();\\n *   push();\\n *   translate(0, 200, 0);\\n *   strokeWeight(1);\\n *   rotateX(frameCount * 0.01);\\n *   rotateY(frameCount * 0.01);\\n *   sphere(75);\\n *   pop();\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * black canvas with two purple rotating spheres with pink\\n * outlines the sphere on top has much heavier outlines,\\n *\\n */\\np5.RendererGL.prototype.strokeWeight = function(w) {\\n  if (this.curStrokeWeight !== w) {\\n    this.pointSize = w;\\n    this.curStrokeWeight = w;\\n  }\\n};\\n\\n// x,y are canvas-relative (pre-scaled by _pixelDensity)\\np5.RendererGL.prototype._getPixel = function(x, y) {\\n  let imageData, index;\\n  imageData = new Uint8Array(4);\\n  // prettier-ignore\\n  this.drawingContext.readPixels(\\n      x, y, 1, 1,\\n      this.drawingContext.RGBA, this.drawingContext.UNSIGNED_BYTE,\\n      imageData\\n    );\\n  index = 0;\\n  return [\\n    imageData[index + 0],\\n    imageData[index + 1],\\n    imageData[index + 2],\\n    imageData[index + 3]\\n  ];\\n};\\n\\n/**\\n * Loads the pixels data for this canvas into the pixels[] attribute.\\n * Note that updatePixels() and set() do not work.\\n * Any pixel manipulation must be done directly to the pixels[] array.\\n *\\n * @private\\n * @method loadPixels\\n *\\n */\\n\\np5.RendererGL.prototype.loadPixels = function() {\\n  const pixelsState = this._pixelsState;\\n\\n  //@todo_FES\\n  if (this._pInst._glAttributes.preserveDrawingBuffer !== true) {\\n    console.log(\\n      'loadPixels only works in WebGL when preserveDrawingBuffer ' + 'is true.'\\n    );\\n    return;\\n  }\\n\\n  //if there isn't a renderer-level temporary pixels buffer\\n  //make a new one\\n  let pixels = pixelsState.pixels;\\n  const len = this.GL.drawingBufferWidth * this.GL.drawingBufferHeight * 4;\\n  if (!(pixels instanceof Uint8Array) || pixels.length !== len) {\\n    pixels = new Uint8Array(len);\\n    this._pixelsState._setProperty('pixels', pixels);\\n  }\\n\\n  const pd = this._pInst._pixelDensity;\\n  // prettier-ignore\\n  this.GL.readPixels(\\n    0, 0, this.width * pd, this.height * pd,\\n    this.GL.RGBA, this.GL.UNSIGNED_BYTE,\\n    pixels\\n  );\\n};\\n\\n//////////////////////////////////////////////\\n// HASH | for geometry\\n//////////////////////////////////////////////\\n\\np5.RendererGL.prototype.geometryInHash = function(gId) {\\n  return this.gHash[gId] !== undefined;\\n};\\n\\n/**\\n * [resize description]\\n * @private\\n * @param  {Number} w [description]\\n * @param  {Number} h [description]\\n */\\np5.RendererGL.prototype.resize = function(w, h) {\\n  p5.Renderer.prototype.resize.call(this, w, h);\\n  this.GL.viewport(\\n    0,\\n    0,\\n    this.GL.drawingBufferWidth,\\n    this.GL.drawingBufferHeight\\n  );\\n  this._viewport = this.GL.getParameter(this.GL.VIEWPORT);\\n\\n  this._curCamera._resize();\\n\\n  //resize pixels buffer\\n  const pixelsState = this._pixelsState;\\n  if (typeof pixelsState.pixels !== 'undefined') {\\n    pixelsState._setProperty(\\n      'pixels',\\n      new Uint8Array(\\n        this.GL.drawingBufferWidth * this.GL.drawingBufferHeight * 4\\n      )\\n    );\\n  }\\n};\\n\\n/**\\n * clears color and depth buffers\\n * with r,g,b,a\\n * @private\\n * @param {Number} r normalized red val.\\n * @param {Number} g normalized green val.\\n * @param {Number} b normalized blue val.\\n * @param {Number} a normalized alpha val.\\n */\\np5.RendererGL.prototype.clear = function(...args) {\\n  const _r = args[0] || 0;\\n[end of p5.RendererGL.js]\\n[start of vertex.js]\\n * </div>\\n *\\n * <div>\\n * <code>\\n * createCanvas(100, 100, WEBGL);\\n * background(240, 240, 240);\\n * fill(237, 34, 93);\\n * noStroke();\\n * beginShape();\\n * vertex(0, 35);\\n * vertex(35, 0);\\n * vertex(0, -35);\\n * vertex(-35, 0);\\n * endShape();\\n * </code>\\n * </div>\\n *\\n * <div>\\n * <code>\\n * createCanvas(100, 100, WEBGL);\\n * background(240, 240, 240);\\n * fill(237, 34, 93);\\n * noStroke();\\n * beginShape();\\n * vertex(-10, 10);\\n * vertex(0, 35);\\n * vertex(10, 10);\\n * vertex(35, 0);\\n * vertex(10, -8);\\n * vertex(0, -35);\\n * vertex(-10, -8);\\n * vertex(-35, 0);\\n * endShape();\\n * </code>\\n * </div>\\n *\\n * <div>\\n * <code>\\n * strokeWeight(3);\\n * stroke(237, 34, 93);\\n * beginShape(LINES);\\n * vertex(10, 35);\\n * vertex(90, 35);\\n * vertex(10, 65);\\n * vertex(90, 65);\\n * vertex(35, 10);\\n * vertex(35, 90);\\n * vertex(65, 10);\\n * vertex(65, 90);\\n * endShape();\\n * </code>\\n * </div>\\n *\\n * <div>\\n * <code>\\n * // Click to change the number of sides.\\n * // In WebGL mode, custom shapes will only\\n * // display hollow fill sections when\\n * // all calls to vertex() use the same z-value.\\n *\\n * let sides = 3;\\n * let angle, px, py;\\n *\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n *   setAttributes('antialias', true);\\n *   fill(237, 34, 93);\\n *   strokeWeight(3);\\n * }\\n *\\n * function draw() {\\n *   background(200);\\n *   rotateX(frameCount * 0.01);\\n *   rotateZ(frameCount * 0.01);\\n *   ngon(sides, 0, 0, 80);\\n * }\\n *\\n * function mouseClicked() {\\n *   if (sides > 6) {\\n *     sides = 3;\\n *   } else {\\n *     sides++;\\n *   }\\n * }\\n *\\n * function ngon(n, x, y, d) {\\n *   beginShape();\\n *   for (let i = 0; i < n + 1; i++) {\\n *     angle = TWO_PI / n * i;\\n *     px = x + sin(angle) * d / 2;\\n *     py = y - cos(angle) * d / 2;\\n *     vertex(px, py, 0);\\n *   }\\n *   for (let i = 0; i < n + 1; i++) {\\n *     angle = TWO_PI / n * i;\\n *     px = x + sin(angle) * d / 4;\\n *     py = y - cos(angle) * d / 4;\\n *     vertex(px, py, 0);\\n *   }\\n *   endShape();\\n * }\\n * </code>\\n * </div>\\n * @alt\\n * 4 black points in a square shape in middle-right of canvas.\\n * 4 points making a diamond shape.\\n * 8 points making a star.\\n * 8 points making 4 lines.\\n * A rotating 3D shape with a hollow section in the middle.\\n *\\n */\\n/**\\n * @method vertex\\n * @param  {Number} x\\n * @param  {Number} y\\n * @param  {Number} z   z-coordinate of the vertex\\n * @param  {Number} [u] the vertex's texture u-coordinate\\n * @param  {Number} [v] the vertex's texture v-coordinate\\n * @chainable\\n */\\np5.prototype.vertex = function(x, y, moveTo, u, v) {\\n  if (this._renderer.isP3D) {\\n    this._renderer.vertex(...arguments);\\n  } else {\\n    const vert = [];\\n    vert.isVert = true;\\n    vert[0] = x;\\n    vert[1] = y;\\n    vert[2] = 0;\\n    vert[3] = 0;\\n    vert[4] = 0;\\n    vert[5] = this._renderer._getFill();\\n    vert[6] = this._renderer._getStroke();\\n\\n    if (moveTo) {\\n      vert.moveTo = moveTo;\\n    }\\n    if (isContour) {\\n      if (contourVertices.length === 0) {\\n        vert.moveTo = true;\\n      }\\n      contourVertices.push(vert);\\n    } else {\\n      vertices.push(vert);\\n    }\\n  }\\n  return this;\\n};\\n\\nexport default p5;\\n[end of vertex.js]\\n[start of ISSUE_TEMPLATE.md]\\n<!--\\nHi there! \\n\\nPLEASE NOTE: The github issues are for bugs and feature requests for the p5.js library itself. If you have a general question or bug programming with p5.js please post it in the p5.js forum: https://discourse.processing.org\\n\\nTo check any option, replace the \\\"[ ]\\\" with a \\\"[x]\\\". Be sure to check out how it looks in the Preview tab! Feel free to remove any portion of the template that is not relevant for your issue.\\n-->\\n\\n#### Nature of issue?\\n\\n- [ ] Found a bug\\n- [ ] Existing feature enhancement\\n- [ ] New feature request\\n\\n#### Most appropriate sub-area of p5.js?\\n\\n- [ ] Color\\n- [ ] Core/Environment/Rendering\\n- [ ] Data\\n- [ ] Events\\n- [ ] Image\\n- [ ] IO\\n- [ ] Math\\n- [ ] Typography\\n- [ ] Utilities\\n- [ ] WebGL\\n- [ ] Other (specify if possible)\\n\\n#### Which platform were you using when you encountered this?\\n\\n- [ ] Mobile/Tablet (touch devices)\\n- [ ] Desktop/Laptop\\n- [ ] Others (specify if possible)\\n\\n#### Details about the bug: \\n\\n- p5.js version: <!-- You can first this in the first line of the p5.js file -->\\n- Web browser and version: <!-- In the address bar, on Chrome enter \\\"chrome://version\\\", on Firefox enter \\\"about:support\\\". On Safari, use \\\"About Safari\\\". -->\\n- Operating System: <!-- Ex: Windows/MacOSX/Linux along with version -->\\n- Steps to reproduce this:\\n<!-- Include a simple code snippet that demonstrates the problem, along with any console errors produced. If this isn't possible, then simply describe the issue as best you can! -->\\n\\n<!-- If you want to enhance an existing feature, please describe here, otherwise remove this section -->\\n#### Feature enhancement details:\\n\\n\\n<!-- If you want to request a new feature, please describe here, otherwise remove this section -->\\n#### New feature details:\\n\\n\\n[end of ISSUE_TEMPLATE.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "tanvi_gsoc_2018.md",
        "setting.js",
        "p5.RendererGL.js",
        "vertex.js",
        "ISSUE_TEMPLATE.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "c39d5c14-69df-429f-a1ee-1b7bc6692c03",
        "score": 0.01639344262295082,
        "payload": {
          "text": "# Improvements to existing I/O Methods of p5.js \n### by Tanvi Kumar ([@TanviKumar](https://github.com/TanviKumar))\n\n## Summary\n\nMy project for GSoC'18 initially revolved around looking into the I/O methods and trying to resolve the existing issues related to them. It later moved into closing issues related to WebGL and many old I/O issues were resolved.\n\nThroughout the three months, I've been able to modify code, add new features, add examples and make changes to documentation. A lot of my time was spent testing the methods on different browsers, replicating open issues to help resolve them and finding solutions for issues.\n\n## Contributions during GSoC'18 \n\n### Testing I/O methods\n\nThe first coding period of GSoC'18 was spent analysing and testing the I/O methods on different browsers and also testing their examples.\nOn testing these methods, a common issue regarding the size of files to be fetched was found for the loading methods of p5.js. \n[#2981](https://github.com/processing/p5.js/issues/2981) clearly encapsulated the other issues [#2661](https://github.com/processing/p5.js/issues/2661) and [#2216](https://github.com/processing/p5.js/issues/2216) regarding this. \nIt was found that browsers like Chrome can easily fetch large files despite taking a lot of time, however old versions of browsers like Firefox can fetch files up to a maximum of 64MB in one request. A size allocation limit error would be reached if the file is too big.\n\nVarious ideas were looked into to try and find appropriate solutions to these issues.\nThese included - \nAdding the knowledge of the size limit of browsers to the documentation,\nGenerating errors before fetching lare files\nUsing HEAD requests to get the size of the file then producing an error if limit was exceeded and finally, \nTo fetch the file anyway in case a certain browser can handle it and issue a warning to the user. \nThe final discussions have led to [#3217](https://github.com/processing/p5.js/pull/3127).\nThe documentation for the loading methods will now warn the users regarding the issue about size limit and also give the user a friendly error if a large file is being fetched just so they may be informed.\nThe friendly error system (FES) of p5.js was used to do this. \n\nSome issues involved trying to replicate them so they may be fixed, including issue [#2842](https://github.com/processing/p5.js/issues/2842) and [#1829](https://github.com/processing/p5.js/issues/1829).\n\n### New feature\n\nA method to add the HTML DOM input color object was created and successfully merged in [#3089](https://github.com/processing/p5.js/pull/3089).\nThis was done to close the [#2504](https://github.com/processing/p5.js/issues/2504).\nIt can give the user the hex string color value of the input element and also a p5.Color object with the chosen color so that it may be easily integrated into sketches that use methods which accept p5.Color objects like lerpColor method in p5.js.\n\n### New examples and documentation\n\n- Added a new example and fixed the old example of the loadModel method in [#2968](https://github.com/processing/p5.js/pull/2968). This was to close the[#2904](https://github.com/processing/p5.js/issues/2904) .\n- Changed the model() example in [#3074](https://github.com/processing/p5.js/pull/3074)\n- Added the example and manual test example for createColorPicker method in [#3089](https://github.com/processing/p5.js/pull/3089)\n\n## Conclusion\n\nGSoC'18 was an incredibly enriching experience. I'm happy to know that I was able to successfully contribute to p5.js and close numerous issues and hope that my work will continue to do so in the future. I'd also like to add that I'd love to continue being a part of p5.js in the future after these fulfilling 3 months.\n\n## Acknowledgements\n\nI'd like to thank my mentor, [Alice Mira Chung](https://github.com/almchung) for her guidance, patience and support. I'd also like to thank Lauren McCarthy and others in the p5.js community who helped me successfuly close issues and guided me when I stumbled. Really grateful for having had this oppurtunity and such an encouraging environment.",
          "filepath": "data/repos/processing/p5.js-0.10/developer_docs/project_wrapups/tanvi_gsoc_2018.md",
          "repo": "processing/p5.js",
          "version": "0.10",
          "chunk_index": 0
        }
      },
      {
        "id": "ddc7ee72-4178-4529-9b7e-347298161abd",
        "score": 0.016129032258064516,
        "payload": {
          "text": "suite('color/Setting', function() {\n  let myp5; // sketch without WEBGL Mode\n  let my3D; // sketch with WEBGL mode\n  setup(function(done) {\n    new p5(function(p) {\n      p.setup = function() {\n        myp5 = p;\n      };\n    });\n    new p5(function(p) {\n      p.setup = function() {\n        p.createCanvas(100, 100, p.WEBGL);\n        my3D = p;\n      };\n    });\n    done();\n  });\n\n  teardown(function() {\n    myp5.remove();\n    my3D.remove();\n  });\n\n  suite('p5.prototype.erase', function() {\n    test('should be a function', function() {\n      assert.ok(myp5.erase);\n    });\n\n    test('should set renderer to erasing state', function() {\n      myp5.erase();\n      assert.isTrue(myp5._renderer._isErasing);\n    });\n\n    test('should cache renderer fill', function() {\n      myp5.fill(255, 0, 0);\n      const fillStyle = myp5.drawingContext.fillStyle;\n      myp5.erase();\n      assert.deepEqual(myp5._renderer._cachedFillStyle, fillStyle);\n    });\n\n    test('should cache renderer stroke', function() {\n      myp5.stroke(255, 0, 0);\n      const strokeStyle = myp5.drawingContext.strokeStyle;\n      myp5.erase();\n      assert.deepEqual(myp5._renderer._cachedStrokeStyle, strokeStyle);\n    });\n\n    test('should cache renderer blend', function() {\n      myp5.blendMode(myp5.SCREEN);\n      myp5.erase();\n      assert.deepEqual(myp5._renderer._cachedBlendMode, myp5.SCREEN);\n    });\n\n    test('should set fill strength', function() {\n      myp5.erase(125);\n      assert.equal(\n        myp5.color(myp5.drawingContext.fillStyle).array,\n        myp5.color(255, 125).array\n      );\n    });\n\n    test('should set stroke strength', function() {\n      myp5.erase(255, 50);\n      assert.equal(\n        myp5.color(myp5.drawingContext.strokeStyle).array,\n        myp5.color(255, 50).array\n      );\n    });\n  });\n\n  suite('p5.RendererGL.prototype.erase', function() {\n    test('should set renderer to erasing state', function() {\n      my3D.erase();\n      assert.isTrue(my3D._renderer._isErasing);\n    });\n\n    test('should cache renderer fill', function() {\n      my3D.fill(255, 0, 0);\n      const curFillColor = my3D._renderer.curFillColor;\n      my3D.erase();\n      assert.deepEqual(my3D._renderer._cachedFillStyle, curFillColor);\n    });\n\n    test('should cache renderer stroke', function() {\n      my3D.stroke(255, 0, 0);\n      const strokeStyle = my3D._renderer.curStrokeColor;\n      my3D.erase();\n      assert.deepEqual(my3D._renderer._cachedStrokeStyle, strokeStyle);\n    });\n\n    test('should cache renderer blend', function() {\n      my3D.blendMode(my3D.SCREEN);\n      my3D.erase();\n      assert.deepEqual(my3D._renderer._cachedBlendMode, my3D.SCREEN);\n    });\n\n    test('should set fill strength', function() {\n      my3D.erase(125);\n      assert.deepEqual(my3D._renderer.curFillColor, [1, 1, 1, 125 / 255]);\n    });\n\n    test('should set stroke strength', function() {\n      my3D.erase(255, 50);\n      assert.deepEqual(my3D._renderer.curStrokeColor, [1, 1, 1, 50 / 255]);\n    });\n\n    test('should set default values when no arguments', function() {\n      my3D.erase();\n      assert.deepEqual(my3D._renderer.curFillColor, [1, 1, 1, 1]);\n      assert.deepEqual(my3D._renderer.curStrokeColor, [1, 1, 1, 1]);\n    });\n  });\n\n  suite('p5.prototype.noErase', function() {\n    test('should be a function', function() {\n      assert.ok(myp5.noErase);\n    });\n\n    test('should turn off renderer erasing state', function() {\n      myp5.erase();\n      myp5.noErase();\n      assert.isFalse(myp5._renderer._isErasing);\n    });\n\n    test('should restore cached renderer fill', function() {\n      myp5.fill(255, 0, 0);\n      const fillStyle = myp5.drawingContext.fillStyle;\n      myp5.erase();\n      myp5.noErase();\n      assert.deepEqual(myp5.drawingContext.fillStyle, fillStyle);\n    });\n\n    test('should restore cached renderer stroke', function() {\n      myp5.stroke(255, 0, 0);\n      const strokeStyle = myp5.drawingContext.strokeStyle;\n      myp5.erase();\n      myp5.noErase();\n      assert.deepEqual(myp5.drawingContext.strokeStyle, strokeStyle);\n    });\n  });\n\n  suite('p5.RendererGL.prototype.noErase', function() {\n    test('should turn off renderer erasing state', function() {\n      my3D.erase();\n      my3D.noErase();\n      assert.isFalse(my3D._renderer._isErasing);\n    });\n\n    test('should restore cached renderer fill', function() {\n      my3D.fill(255, 0, 0);\n      const fillStyle = my3D._renderer.curFillColor.slice();\n      my3D.erase();\n      my3D.noErase();\n      assert.deepEqual([1, 0, 0, 1], fillStyle);\n    });\n\n    test('should restore cached renderer stroke', function() {\n      my3D.stroke(255, 0, 0);\n      const strokeStyle = my3D._renderer.curStrokeColor.slice();\n      my3D.erase();\n      my3D.noErase();\n      assert.deepEqual([1, 0, 0, 1], strokeStyle);\n    });\n  });\n\n  suite('p5.prototype.colorMode', function() {\n    test('should be a function', function() {\n      assert.ok(myp5.colorMode);\n    });\n\n    test('should set mode to RGB', function() {\n      myp5.colorMode(myp5.RGB);\n      assert.equal(myp5._colorMode, myp5.RGB);\n    });\n\n    test('should correctly set color RGB maxes', function() {\n      assert.deepEqual(myp5._colorMaxes[myp5.RGB], [255, 255, 255, 255]);\n      myp5.colorMode(myp5.RGB, 1, 1, 1);\n      assert.deepEqual(myp5._colorMaxes[myp5.RGB], [1, 1, 1, 255]);\n      myp5.colorMode(myp5.RGB, 1);\n      assert.deepEqual(myp5._colorMaxes[myp5.RGB], [1, 1, 1, 1]);\n      myp5.colorMode(myp5.RGB, 255, 255, 255, 1);\n      assert.deepEqual(myp5._colorMaxes[myp5.RGB], [255, 255, 255, 1]);\n      myp5.colorMode(myp5.RGB, 255);\n    });\n\n    test('should set mode to HSL', function() {\n      myp5.colorMode(myp5.HSL);\n      assert.equal(myp5._colorMode, myp5.HSL);\n    });\n\n    test('should correctly set color HSL maxes', function() {\n      assert.deepEqual(myp5._colorMaxes[myp5.HSL], [360, 100, 100, 1]);\n      myp5.colorMode(myp5.HSL, 255, 255, 255);\n      assert.deepEqual(myp5._colorMaxes[myp5.HSL], [255, 255, 255, 1]);\n      myp5.colorMode(myp5.HSL, 360);\n      assert.deepEqual(myp5._colorMaxes[myp5.HSL], [360, 360, 360, 360]);\n      myp5.colorMode(myp5.HSL, 360, 100, 100, 1);\n      assert.deepEqual(myp5._colorMaxes[myp5.HSL], [360, 100, 100, 1]);\n    });\n\n    test('should set mode to HSB', function() {\n      myp5.colorMode(myp5.HSB);\n      assert.equal(myp5._colorMode, myp5.HSB);\n    });\n\n    test('should correctly set color HSB maxes', function() {\n      assert.deepEqual(myp5._colorMaxes[myp5.HSB], [360, 100, 100, 1]);\n      myp5.colorMode(myp5.HSB, 255, 255, 255);\n      assert.deepEqual(myp5._colorMaxes[myp5.HSB], [255, 255, 255, 1]);\n      myp5.colorMode(myp5.HSB, 360);\n      assert.deepEqual(myp5._colorMaxes[myp5.HSB], [360, 360, 360, 360]);\n      myp5.colorMode(myp5.HSB, 360, 100, 100, 1);\n      assert.deepEqual(myp5._colorMaxes[myp5.HSB], [360, 100, 100, 1]);\n    });\n  });\n});\n",
          "filepath": "data/repos/processing/p5.js-0.10/test/unit/color/setting.js",
          "repo": "processing/p5.js",
          "version": "0.10",
          "chunk_index": 0
        }
      },
      {
        "id": "60302be6-5194-4631-8973-e400c86e2e65",
        "score": 0.015873015873015872,
        "payload": {
          "text": "import p5 from '../core/main';\nimport * as constants from '../core/constants';\nimport libtess from 'libtess';\nimport './p5.Shader';\nimport './p5.Camera';\nimport '../core/p5.Renderer';\nimport './p5.Matrix';\nimport { readFileSync } from 'fs';\nimport { join } from 'path';\n\nconst lightingShader = readFileSync(\n  join(__dirname, '/shaders/lighting.glsl'),\n  'utf-8'\n);\n\nconst defaultShaders = {\n  immediateVert: readFileSync(\n    join(__dirname, '/shaders/immediate.vert'),\n    'utf-8'\n  ),\n  vertexColorVert: readFileSync(\n    join(__dirname, '/shaders/vertexColor.vert'),\n    'utf-8'\n  ),\n  vertexColorFrag: readFileSync(\n    join(__dirname, '/shaders/vertexColor.frag'),\n    'utf-8'\n  ),\n  normalVert: readFileSync(join(__dirname, '/shaders/normal.vert'), 'utf-8'),\n  normalFrag: readFileSync(join(__dirname, '/shaders/normal.frag'), 'utf-8'),\n  basicFrag: readFileSync(join(__dirname, '/shaders/basic.frag'), 'utf-8'),\n  lightVert:\n    lightingShader +\n    readFileSync(join(__dirname, '/shaders/light.vert'), 'utf-8'),\n  lightTextureFrag: readFileSync(\n    join(__dirname, '/shaders/light_texture.frag'),\n    'utf-8'\n  ),\n  phongVert: readFileSync(join(__dirname, '/shaders/phong.vert'), 'utf-8'),\n  phongFrag:\n    lightingShader +\n    readFileSync(join(__dirname, '/shaders/phong.frag'), 'utf-8'),\n  fontVert: readFileSync(join(__dirname, '/shaders/font.vert'), 'utf-8'),\n  fontFrag: readFileSync(join(__dirname, '/shaders/font.frag'), 'utf-8'),\n  lineVert: readFileSync(join(__dirname, '/shaders/line.vert'), 'utf-8'),\n  lineFrag: readFileSync(join(__dirname, '/shaders/line.frag'), 'utf-8'),\n  pointVert: readFileSync(join(__dirname, '/shaders/point.vert'), 'utf-8'),\n  pointFrag: readFileSync(join(__dirname, '/shaders/point.frag'), 'utf-8')\n};\n\n/**\n * 3D graphics class\n * @private\n * @class p5.RendererGL\n * @constructor\n * @extends p5.Renderer\n * @todo extend class to include public method for offscreen\n * rendering (FBO).\n *\n */\np5.RendererGL = function(elt, pInst, isMainCanvas, attr) {\n  p5.Renderer.call(this, elt, pInst, isMainCanvas);\n  this._setAttributeDefaults(pInst);\n  this._initContext();\n  this.isP3D = true; //lets us know we're in 3d mode\n  this.GL = this.drawingContext;\n\n  // erasing\n  this._isErasing = false;\n\n  // lights\n  this._enableLighting = false;\n\n  this.ambientLightColors = [];\n  this.specularColors = [1, 1, 1];\n\n  this.directionalLightDirections = [];\n  this.directionalLightDiffuseColors = [];\n  this.directionalLightSpecularColors = [];\n\n  this.pointLightPositions = [];\n  this.pointLightDiffuseColors = [];\n  this.pointLightSpecularColors = [];\n\n  this.spotLightPositions = [];\n  this.spotLightDirections = [];\n  this.spotLightDiffuseColors = [];\n  this.spotLightSpecularColors = [];\n  this.spotLightAngle = [];\n  this.spotLightConc = [];\n\n  this.drawMode = constants.FILL;\n\n  this.curFillColor = this._cachedFillStyle = [1, 1, 1, 1];\n  this.curStrokeColor = this._cachedStrokeStyle = [0, 0, 0, 1];\n\n  this.curBlendMode = this._cachedBlendMode = constants.BLEND;\n  this.blendExt = this.GL.getExtension('EXT_blend_minmax');\n\n  this._useSpecularMaterial = false;\n  this._useEmissiveMaterial = false;\n  this._useNormalMaterial = false;\n  this._useShininess = 1;\n\n  this._tint = [255, 255, 255, 255];\n\n  // lightFalloff variables\n  this.constantAttenuation = 1;\n  this.linearAttenuation = 0;\n  this.quadraticAttenuation = 0;\n\n  /**\n   * model view, projection, & normal\n   * matrices\n   */\n  this.uMVMatrix = new p5.Matrix();\n  this.uPMatrix = new p5.Matrix();\n  this.uNMatrix = new p5.Matrix('mat3');\n\n  // Camera\n  this._curCamera = new p5.Camera(this);\n  this._curCamera._computeCameraDefaultSettings();\n  this._curCamera._setDefaultCamera();\n\n  //Geometry & Material hashes\n  this.gHash = {};\n\n  this._defaultLightShader = undefined;\n  this._defaultImmediateModeShader = undefined;\n  this._defaultNormalShader = undefined;\n  this._defaultColorShader = undefined;\n  this._defaultPointShader = undefined;\n\n  this._pointVertexBuffer = this.GL.createBuffer();\n\n  this.userFillShader = undefined;\n  this.userStrokeShader = undefined;\n  this.userPointShader = undefined;\n\n  //Imediate Mode\n  //default drawing is done in Retained Mode\n  this.isImmediateDrawing = false;\n  this.immediateMode = {};\n\n  this.pointSize = 5.0; //default point size\n  this.curStrokeWeight = 1;\n\n  // array of textures created in this gl context via this.getTexture(src)\n  this.textures = [];\n\n  this.textureMode = constants.IMAGE;\n  // default wrap settings\n  this.textureWrapX = constants.CLAMP;\n  this.textureWrapY = constants.CLAMP;\n  this._tex = null;\n  this._curveTightness = 6;\n\n  // lookUpTable for coefficients needed to be calculated for bezierVertex, same are used for curveVertex\n  this._lookUpTableBezier = [];\n  // lookUpTable for coefficients needed to be calculated for quadraticVertex\n  this._lookUpTableQuadratic = [];\n\n  // current curveDetail in the Bezier lookUpTable\n  this._lutBezierDetail = 0;\n  // current curveDetail in the Quadratic lookUpTable\n  this._lutQuadraticDetail = 0;\n\n  this._tessy = this._initTessy();\n\n  this.fontInfos = {};\n\n  return this;\n};\n\np5.RendererGL.prototype = Object.create(p5.Renderer.prototype);\n\n//////////////////////////////////////////////\n// Setting\n//////////////////////////////////////////////\n\np5.RendererGL.prototype._setAttributeDefaults = pInst => {\n  const defaults = {\n    alpha: true,\n    depth: true,\n    stencil: true,\n    antialias: false,\n    premultipliedAlpha: false,\n    preserveDrawingBuffer: true,\n    perPixelLighting: false\n  };\n  if (pInst._glAttributes === null) {\n    pInst._glAttributes = defaults;\n  } else {\n    pInst._glAttributes = Object.assign(defaults, pInst._glAttributes);\n  }\n  return;\n};\n\np5.RendererGL.prototype._initContext = function() {\n  try {\n    this.drawingContext =\n      this.canvas.getContext('webgl', this._pInst._glAttributes) ||\n      this.canvas.getContext('experimental-webgl', this._pInst._glAttributes);\n    if (this.drawingContext === null) {\n      throw new Error('Error creating webgl context');\n    } else {\n      const gl = this.drawingContext;\n      gl.enable(gl.DEPTH_TEST);\n      gl.depthFunc(gl.LEQUAL);\n      gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n      this._viewport = this.drawingContext.getParameter(\n        this.drawingContext.VIEWPORT\n      );\n    }\n  } catch (er) {\n    throw er;\n  }\n};\n\n//This is helper function to reset the context anytime the attributes\n//are changed with setAttributes()\n\np5.RendererGL.prototype._resetContext = function(options, callback) {\n  const w = this.width;\n  const h = this.height;\n  const defaultId = this.canvas.id;\n  const isPGraphics = this._pInst instanceof p5.Graphics;\n\n  if (isPGraphics) {\n    const pg = this._pInst;\n    pg.canvas.parentNode.removeChild(pg.canvas);\n    pg.canvas = document.createElement('canvas');\n    const node = pg._pInst._userNode || document.body;\n    node.appendChild(pg.canvas);\n    p5.Element.call(pg, pg.canvas, pg._pInst);\n    pg.width = w;\n    pg.height = h;\n  } else {\n    let c = this.canvas;\n    if (c) {\n      c.parentNode.removeChild(c);\n    }\n    c = document.createElement('canvas');\n    c.id = defaultId;\n    if (this._pInst._userNode) {\n      this._pInst._userNode.appendChild(c);\n    } else {\n      document.body.appendChild(c);\n    }\n    this._pInst.canvas = c;\n  }\n\n  const renderer = new p5.RendererGL(\n    this._pInst.canvas,\n    this._pInst,\n    !isPGraphics\n  );\n  this._pInst._setProperty('_renderer', renderer);\n  renderer.resize(w, h);\n  renderer._applyDefaults();\n\n  if (!isPGraphics) {\n    this._pInst._elements.push(renderer);\n  }\n\n  if (typeof callback === 'function') {\n    //setTimeout with 0 forces the task to the back of the queue, this ensures that\n    //we finish switching out the renderer\n    setTimeout(() => {\n      callback.apply(window._renderer, options);\n    }, 0);\n  }\n};\n/**\n * @module Rendering\n * @submodule Rendering\n * @for p5\n */\n/**\n * Set attributes for the WebGL Drawing context.\n * This is a way of adjusting how the WebGL\n * renderer works to fine-tune the display and performance.\n * <br><br>\n * Note that this will reinitialize the drawing context\n * if called after the WebGL canvas is made.\n * <br><br>\n * If an object is passed as the parameter, all attributes\n * not declared in the object will be set to defaults.\n * <br><br>\n * The available attributes are:\n * <br>\n * alpha - indicates if the canvas contains an alpha buffer\n * default is true\n * <br><br>\n * depth - indicates whether the drawing buffer has a depth buffer\n * of at least 16 bits - default is true\n * <br><br>\n * stencil - indicates whether the drawing buffer has a stencil buffer\n * of at least 8 bits\n * <br><br>\n * antialias - indicates whether or not to perform anti-aliasing\n * default is false\n * <br><br>\n * premultipliedAlpha - indicates that the page compositor will assume\n * the drawing buffer contains colors with pre-multiplied alpha\n * default is false\n * <br><br>\n * preserveDrawingBuffer - if true the buffers will not be cleared and\n * and will preserve their values until cleared or overwritten by author\n * (note that p5 clears automatically on draw loop)\n * default is true\n * <br><br>\n * perPixelLighting - if true, per-pixel lighting will be used in the\n * lighting shader.\n * default is false\n * <br><br>\n * @method setAttributes\n * @for p5\n * @param  {String}  key Name of attribute\n * @param  {Boolean}        value New value of named attribute\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n *\n * function draw() {\n *   background(255);\n *   push();\n *   rotateZ(frameCount * 0.02);\n *   rotateX(frameCount * 0.02);\n *   rotateY(frameCount * 0.02);\n *   fill(0, 0, 0);\n *   box(50);\n *   pop();\n * }\n * </code>\n * </div>\n * <br>\n * Now with the antialias attribute set to true.\n * <br>\n * <div>\n * <code>\n * function setup() {\n *   setAttributes('antialias', true);\n *   createCanvas(100, 100, WEBGL);\n * }\n *\n * function draw() {\n *   background(255);\n *   push();\n *   rotateZ(frameCount * 0.02);\n *   rotateX(frameCount * 0.02);\n *   rotateY(frameCount * 0.02);\n *   fill(0, 0, 0);\n *   box(50);\n *   pop();\n * }\n * </code>\n * </div>\n *\n * <div>\n * <code>\n * // press the mouse button to enable perPixelLighting\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n *   noStroke();\n *   fill(255);\n * }\n *\n * let lights = [\n *   { c: '#f00', t: 1.12, p: 1.91, r: 0.2 },\n *   { c: '#0f0', t: 1.21, p: 1.31, r: 0.2 },\n *   { c: '#00f', t: 1.37, p: 1.57, r: 0.2 },\n *   { c: '#ff0', t: 1.12, p: 1.91, r: 0.7 },\n *   { c: '#0ff', t: 1.21, p: 1.31, r: 0.7 },\n *   { c: '#f0f', t: 1.37, p: 1.57, r: 0.7 }\n * ];\n *\n * function draw() {\n *   let t = millis() / 1000 + 1000;\n *   background(0);\n *   directionalLight(color('#222'), 1, 1, 1);\n *\n *   for (let i = 0; i < lights.length; i++) {\n *     let light = lights[i];\n *     pointLight(\n *       color(light.c),\n *       p5.Vector.fromAngles(t * light.t, t * light.p, width * light.r)\n *     );\n *   }\n *\n *   specularMaterial(255);\n *   sphere(width * 0.1);\n *\n *   rotateX(t * 0.77);\n *   rotateY(t * 0.83);\n *   rotateZ(t * 0.91);\n *   torus(width * 0.3, width * 0.07, 24, 10);\n * }\n *\n * function mousePressed() {\n *   setAttributes('perPixelLighting', true);\n *   noStroke();\n *   fill(255);\n * }\n * function mouseReleased() {\n *   setAttributes('perPixelLighting', false);\n *   noStroke();\n *   fill(255);\n * }\n * </code>\n * </div>\n *\n * @alt a rotating cube with smoother edges\n */\n/**\n * @method setAttributes\n * @for p5\n * @param  {Object}  obj object with key-value pairs\n */\n\np5.prototype.setAttributes = function(key, value) {\n  if (typeof this._glAttributes === 'undefined') {\n    console.log(\n      'You are trying to use setAttributes on a p5.Graphics object ' +\n        'that does not use a WEBGL renderer.'\n    );\n    return;\n  }\n  let unchanged = true;\n  if (typeof value !== 'undefined') {\n    //first time modifying the attributes\n    if (this._glAttributes === null) {\n      this._glAttributes = {};\n    }\n    if (this._glAttributes[key] !== value) {\n      //changing value of previously altered attribute\n      this._glAttributes[key] = value;\n      unchanged = false;\n    }\n    //setting all attributes with some change\n  } else if (key instanceof Object) {\n    if (this._glAttributes !== key) {\n      this._glAttributes = key;\n      unchanged = false;\n    }\n  }\n  //@todo_FES\n  if (!this._renderer.isP3D || unchanged) {\n    return;\n  }\n\n  if (!this._setupDone) {\n    for (const x in this._renderer.gHash) {\n      if (this._renderer.gHash.hasOwnProperty(x)) {\n        console.error(\n          'Sorry, Could not set the attributes, you need to call setAttributes() ' +\n            'before calling the other drawing methods in setup()'\n        );\n        return;\n      }\n    }\n  }\n\n  this.push();\n  this._renderer._resetContext();\n  this.pop();\n\n  if (this._renderer._curCamera) {\n    this._renderer._curCamera._renderer = this._renderer;\n  }\n};\n\n/**\n * @class p5.RendererGL\n */\n\np5.RendererGL.prototype._update = function() {\n  // reset model view and apply initial camera transform\n  // (containing only look at info; no projection).\n  this.uMVMatrix.set(\n    this._curCamera.cameraMatrix.mat4[0],\n    this._curCamera.cameraMatrix.mat4[1],\n    this._curCamera.cameraMatrix.mat4[2],\n    this._curCamera.cameraMatrix.mat4[3],\n    this._curCamera.cameraMatrix.mat4[4],\n    this._curCamera.cameraMatrix.mat4[5],\n    this._curCamera.cameraMatrix.mat4[6],\n    this._curCamera.cameraMatrix.mat4[7],\n    this._curCamera.cameraMatrix.mat4[8],\n    this._curCamera.cameraMatrix.mat4[9],\n    this._curCamera.cameraMatrix.mat4[10],\n    this._curCamera.cameraMatrix.mat4[11],\n    this._curCamera.cameraMatrix.mat4[12],\n    this._curCamera.cameraMatrix.mat4[13],\n    this._curCamera.cameraMatrix.mat4[14],\n    this._curCamera.cameraMatrix.mat4[15]\n  );\n\n  // reset light data for new frame.\n\n  this.ambientLightColors.length = 0;\n  this.specularColors = [1, 1, 1];\n\n  this.directionalLightDirections.length = 0;\n  this.directionalLightDiffuseColors.length = 0;\n  this.directionalLightSpecularColors.length = 0;\n\n  this.pointLightPositions.length = 0;\n  this.pointLightDiffuseColors.length = 0;\n  this.pointLightSpecularColors.length = 0;\n\n  this.spotLightPositions.length = 0;\n  this.spotLightDirections.length = 0;\n  this.spotLightDiffuseColors.length = 0;\n  this.spotLightSpecularColors.length = 0;\n  this.spotLightAngle.length = 0;\n  this.spotLightConc.length = 0;\n\n  this._enableLighting = false;\n\n  //reset tint value for new frame\n  this._tint = [255, 255, 255, 255];\n\n  //Clear depth every frame\n  this.GL.clear(this.GL.DEPTH_BUFFER_BIT);\n};\n\n/**\n * [background description]\n */\np5.RendererGL.prototype.background = function(...args) {\n  const _col = this._pInst.color(...args);\n  const _r = _col.levels[0] / 255;\n  const _g = _col.levels[1] / 255;\n  const _b = _col.levels[2] / 255;\n  const _a = _col.levels[3] / 255;\n  this.GL.clearColor(_r, _g, _b, _a);\n  this.GL.depthMask(true);\n  this.GL.clear(this.GL.COLOR_BUFFER_BIT | this.GL.DEPTH_BUFFER_BIT);\n};\n\n//////////////////////////////////////////////\n// COLOR\n//////////////////////////////////////////////\n/**\n * Basic fill material for geometry with a given color\n * @method  fill\n * @class p5.RendererGL\n * @param  {Number|Number[]|String|p5.Color} v1  gray value,\n * red or hue value (depending on the current color mode),\n * or color Array, or CSS color string\n * @param  {Number}            [v2] green or saturation value\n * @param  {Number}            [v3] blue or brightness value\n * @param  {Number}            [a]  opacity\n * @chainable\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(200, 200, WEBGL);\n * }\n *\n * function draw() {\n *   background(0);\n *   noStroke();\n *   fill(100, 100, 240);\n *   rotateX(frameCount * 0.01);\n *   rotateY(frameCount * 0.01);\n *   box(75, 75, 75);\n * }\n * </code>\n * </div>\n *\n * @alt\n * black canvas with purple cube spinning\n *\n */\np5.RendererGL.prototype.fill = function(v1, v2, v3, a) {\n  //see material.js for more info on color blending in webgl\n  const color = p5.prototype.color.apply(this._pInst, arguments);\n  this.curFillColor = color._array;\n  this.drawMode = constants.FILL;\n  this._useNormalMaterial = false;\n  this._tex = null;\n};\n\n/**\n * Basic stroke material for geometry with a given color\n * @method  stroke\n * @param  {Number|Number[]|String|p5.Color} v1  gray value,\n * red or hue value (depending on the current color mode),\n * or color Array, or CSS color string\n * @param  {Number}            [v2] green or saturation value\n * @param  {Number}            [v3] blue or brightness value\n * @param  {Number}            [a]  opacity\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(200, 200, WEBGL);\n * }\n *\n * function draw() {\n *   background(0);\n *   stroke(240, 150, 150);\n *   fill(100, 100, 240);\n *   rotateX(frameCount * 0.01);\n *   rotateY(frameCount * 0.01);\n *   box(75, 75, 75);\n * }\n * </code>\n * </div>\n *\n * @alt\n * black canvas with purple cube with pink outline spinning\n *\n */\np5.RendererGL.prototype.stroke = function(r, g, b, a) {\n  //@todo allow transparency in stroking currently doesn't have\n  //any impact and causes problems with specularMaterial\n  arguments[3] = 255;\n  const color = p5.prototype.color.apply(this._pInst, arguments);\n  this.curStrokeColor = color._array;\n};\n\np5.RendererGL.prototype.strokeCap = cap => {\n  // @TODO : to be implemented\n  console.error('Sorry, strokeCap() is not yet implemented in WEBGL mode');\n};\n\np5.RendererGL.prototype.strokeJoin = join => {\n  // @TODO : to be implemented\n  // https://processing.org/reference/strokeJoin_.html\n  console.error('Sorry, strokeJoin() is not yet implemented in WEBGL mode');\n};\n\np5.RendererGL.prototype.blendMode = function(mode) {\n  if (\n    mode === constants.DARKEST ||\n    mode === constants.LIGHTEST ||\n    mode === constants.ADD ||\n    mode === constants.BLEND ||\n    mode === constants.SUBTRACT ||\n    mode === constants.SCREEN ||\n    mode === constants.EXCLUSION ||\n    mode === constants.REPLACE ||\n    mode === constants.MULTIPLY ||\n    mode === constants.REMOVE\n  )\n    this.curBlendMode = mode;\n  else if (\n    mode === constants.BURN ||\n    mode === constants.OVERLAY ||\n    mode === constants.HARD_LIGHT ||\n    mode === constants.SOFT_LIGHT ||\n    mode === constants.DODGE\n  ) {\n    console.warn(\n      'BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.'\n    );\n  }\n};\n\np5.RendererGL.prototype.erase = function(opacityFill, opacityStroke) {\n  if (!this._isErasing) {\n    this._cachedBlendMode = this.curBlendMode;\n    this.blendMode(constants.REMOVE);\n\n    this._cachedFillStyle = this.curFillColor.slice();\n    this.curFillColor = [1, 1, 1, opacityFill / 255];\n\n    this._cachedStrokeStyle = this.curStrokeColor.slice();\n    this.curStrokeColor = [1, 1, 1, opacityStroke / 255];\n\n    this._isErasing = true;\n  }\n};\n\np5.RendererGL.prototype.noErase = function() {\n  if (this._isErasing) {\n    this.curFillColor = this._cachedFillStyle.slice();\n    this.curStrokeColor = this._cachedStrokeStyle.slice();\n\n    this.blendMode(this._cachedBlendMode);\n    this._isErasing = false;\n  }\n};\n\n/**\n * Change weight of stroke\n * @method  strokeWeight\n * @param  {Number} stroke weight to be used for drawing\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(200, 400, WEBGL);\n *   setAttributes('antialias', true);\n * }\n *\n * function draw() {\n *   background(0);\n *   noStroke();\n *   translate(0, -100, 0);\n *   stroke(240, 150, 150);\n *   fill(100, 100, 240);\n *   push();\n *   strokeWeight(8);\n *   rotateX(frameCount * 0.01);\n *   rotateY(frameCount * 0.01);\n *   sphere(75);\n *   pop();\n *   push();\n *   translate(0, 200, 0);\n *   strokeWeight(1);\n *   rotateX(frameCount * 0.01);\n *   rotateY(frameCount * 0.01);\n *   sphere(75);\n *   pop();\n * }\n * </code>\n * </div>\n *\n * @alt\n * black canvas with two purple rotating spheres with pink\n * outlines the sphere on top has much heavier outlines,\n *\n */\np5.RendererGL.prototype.strokeWeight = function(w) {\n  if (this.curStrokeWeight !== w) {\n    this.pointSize = w;\n    this.curStrokeWeight = w;\n  }\n};\n\n// x,y are canvas-relative (pre-scaled by _pixelDensity)\np5.RendererGL.prototype._getPixel = function(x, y) {\n  let imageData, index;\n  imageData = new Uint8Array(4);\n  // prettier-ignore\n  this.drawingContext.readPixels(\n      x, y, 1, 1,\n      this.drawingContext.RGBA, this.drawingContext.UNSIGNED_BYTE,\n      imageData\n    );\n  index = 0;\n  return [\n    imageData[index + 0],\n    imageData[index + 1],\n    imageData[index + 2],\n    imageData[index + 3]\n  ];\n};\n\n/**\n * Loads the pixels data for this canvas into the pixels[] attribute.\n * Note that updatePixels() and set() do not work.\n * Any pixel manipulation must be done directly to the pixels[] array.\n *\n * @private\n * @method loadPixels\n *\n */\n\np5.RendererGL.prototype.loadPixels = function() {\n  const pixelsState = this._pixelsState;\n\n  //@todo_FES\n  if (this._pInst._glAttributes.preserveDrawingBuffer !== true) {\n    console.log(\n      'loadPixels only works in WebGL when preserveDrawingBuffer ' + 'is true.'\n    );\n    return;\n  }\n\n  //if there isn't a renderer-level temporary pixels buffer\n  //make a new one\n  let pixels = pixelsState.pixels;\n  const len = this.GL.drawingBufferWidth * this.GL.drawingBufferHeight * 4;\n  if (!(pixels instanceof Uint8Array) || pixels.length !== len) {\n    pixels = new Uint8Array(len);\n    this._pixelsState._setProperty('pixels', pixels);\n  }\n\n  const pd = this._pInst._pixelDensity;\n  // prettier-ignore\n  this.GL.readPixels(\n    0, 0, this.width * pd, this.height * pd,\n    this.GL.RGBA, this.GL.UNSIGNED_BYTE,\n    pixels\n  );\n};\n\n//////////////////////////////////////////////\n// HASH | for geometry\n//////////////////////////////////////////////\n\np5.RendererGL.prototype.geometryInHash = function(gId) {\n  return this.gHash[gId] !== undefined;\n};\n\n/**\n * [resize description]\n * @private\n * @param  {Number} w [description]\n * @param  {Number} h [description]\n */\np5.RendererGL.prototype.resize = function(w, h) {\n  p5.Renderer.prototype.resize.call(this, w, h);\n  this.GL.viewport(\n    0,\n    0,\n    this.GL.drawingBufferWidth,\n    this.GL.drawingBufferHeight\n  );\n  this._viewport = this.GL.getParameter(this.GL.VIEWPORT);\n\n  this._curCamera._resize();\n\n  //resize pixels buffer\n  const pixelsState = this._pixelsState;\n  if (typeof pixelsState.pixels !== 'undefined') {\n    pixelsState._setProperty(\n      'pixels',\n      new Uint8Array(\n        this.GL.drawingBufferWidth * this.GL.drawingBufferHeight * 4\n      )\n    );\n  }\n};\n\n/**\n * clears color and depth buffers\n * with r,g,b,a\n * @private\n * @param {Number} r normalized red val.\n * @param {Number} g normalized green val.\n * @param {Number} b normalized blue val.\n * @param {Number} a normalized alpha val.\n */\np5.RendererGL.prototype.clear = function(...args) {\n  const _r = args[0] || 0;",
          "filepath": "data/repos/processing/p5.js-0.10/src/webgl/p5.RendererGL.js",
          "repo": "processing/p5.js",
          "version": "0.10",
          "chunk_index": 0
        }
      },
      {
        "id": "bb9c86dc-85d7-42e3-915a-457b80bba75b",
        "score": 0.015625,
        "payload": {
          "text": " * </div>\n *\n * <div>\n * <code>\n * createCanvas(100, 100, WEBGL);\n * background(240, 240, 240);\n * fill(237, 34, 93);\n * noStroke();\n * beginShape();\n * vertex(0, 35);\n * vertex(35, 0);\n * vertex(0, -35);\n * vertex(-35, 0);\n * endShape();\n * </code>\n * </div>\n *\n * <div>\n * <code>\n * createCanvas(100, 100, WEBGL);\n * background(240, 240, 240);\n * fill(237, 34, 93);\n * noStroke();\n * beginShape();\n * vertex(-10, 10);\n * vertex(0, 35);\n * vertex(10, 10);\n * vertex(35, 0);\n * vertex(10, -8);\n * vertex(0, -35);\n * vertex(-10, -8);\n * vertex(-35, 0);\n * endShape();\n * </code>\n * </div>\n *\n * <div>\n * <code>\n * strokeWeight(3);\n * stroke(237, 34, 93);\n * beginShape(LINES);\n * vertex(10, 35);\n * vertex(90, 35);\n * vertex(10, 65);\n * vertex(90, 65);\n * vertex(35, 10);\n * vertex(35, 90);\n * vertex(65, 10);\n * vertex(65, 90);\n * endShape();\n * </code>\n * </div>\n *\n * <div>\n * <code>\n * // Click to change the number of sides.\n * // In WebGL mode, custom shapes will only\n * // display hollow fill sections when\n * // all calls to vertex() use the same z-value.\n *\n * let sides = 3;\n * let angle, px, py;\n *\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n *   setAttributes('antialias', true);\n *   fill(237, 34, 93);\n *   strokeWeight(3);\n * }\n *\n * function draw() {\n *   background(200);\n *   rotateX(frameCount * 0.01);\n *   rotateZ(frameCount * 0.01);\n *   ngon(sides, 0, 0, 80);\n * }\n *\n * function mouseClicked() {\n *   if (sides > 6) {\n *     sides = 3;\n *   } else {\n *     sides++;\n *   }\n * }\n *\n * function ngon(n, x, y, d) {\n *   beginShape();\n *   for (let i = 0; i < n + 1; i++) {\n *     angle = TWO_PI / n * i;\n *     px = x + sin(angle) * d / 2;\n *     py = y - cos(angle) * d / 2;\n *     vertex(px, py, 0);\n *   }\n *   for (let i = 0; i < n + 1; i++) {\n *     angle = TWO_PI / n * i;\n *     px = x + sin(angle) * d / 4;\n *     py = y - cos(angle) * d / 4;\n *     vertex(px, py, 0);\n *   }\n *   endShape();\n * }\n * </code>\n * </div>\n * @alt\n * 4 black points in a square shape in middle-right of canvas.\n * 4 points making a diamond shape.\n * 8 points making a star.\n * 8 points making 4 lines.\n * A rotating 3D shape with a hollow section in the middle.\n *\n */\n/**\n * @method vertex\n * @param  {Number} x\n * @param  {Number} y\n * @param  {Number} z   z-coordinate of the vertex\n * @param  {Number} [u] the vertex's texture u-coordinate\n * @param  {Number} [v] the vertex's texture v-coordinate\n * @chainable\n */\np5.prototype.vertex = function(x, y, moveTo, u, v) {\n  if (this._renderer.isP3D) {\n    this._renderer.vertex(...arguments);\n  } else {\n    const vert = [];\n    vert.isVert = true;\n    vert[0] = x;\n    vert[1] = y;\n    vert[2] = 0;\n    vert[3] = 0;\n    vert[4] = 0;\n    vert[5] = this._renderer._getFill();\n    vert[6] = this._renderer._getStroke();\n\n    if (moveTo) {\n      vert.moveTo = moveTo;\n    }\n    if (isContour) {\n      if (contourVertices.length === 0) {\n        vert.moveTo = true;\n      }\n      contourVertices.push(vert);\n    } else {\n      vertices.push(vert);\n    }\n  }\n  return this;\n};\n\nexport default p5;",
          "filepath": "data/repos/processing/p5.js-0.10/src/core/shape/vertex.js",
          "repo": "processing/p5.js",
          "version": "0.10",
          "chunk_index": 1
        }
      },
      {
        "id": "5b7f0357-460a-43b8-a762-88379166175d",
        "score": 0.015384615384615385,
        "payload": {
          "text": "<!--\nHi there! \n\nPLEASE NOTE: The github issues are for bugs and feature requests for the p5.js library itself. If you have a general question or bug programming with p5.js please post it in the p5.js forum: https://discourse.processing.org\n\nTo check any option, replace the \"[ ]\" with a \"[x]\". Be sure to check out how it looks in the Preview tab! Feel free to remove any portion of the template that is not relevant for your issue.\n-->\n\n#### Nature of issue?\n\n- [ ] Found a bug\n- [ ] Existing feature enhancement\n- [ ] New feature request\n\n#### Most appropriate sub-area of p5.js?\n\n- [ ] Color\n- [ ] Core/Environment/Rendering\n- [ ] Data\n- [ ] Events\n- [ ] Image\n- [ ] IO\n- [ ] Math\n- [ ] Typography\n- [ ] Utilities\n- [ ] WebGL\n- [ ] Other (specify if possible)\n\n#### Which platform were you using when you encountered this?\n\n- [ ] Mobile/Tablet (touch devices)\n- [ ] Desktop/Laptop\n- [ ] Others (specify if possible)\n\n#### Details about the bug: \n\n- p5.js version: <!-- You can first this in the first line of the p5.js file -->\n- Web browser and version: <!-- In the address bar, on Chrome enter \"chrome://version\", on Firefox enter \"about:support\". On Safari, use \"About Safari\". -->\n- Operating System: <!-- Ex: Windows/MacOSX/Linux along with version -->\n- Steps to reproduce this:\n<!-- Include a simple code snippet that demonstrates the problem, along with any console errors produced. If this isn't possible, then simply describe the issue as best you can! -->\n\n<!-- If you want to enhance an existing feature, please describe here, otherwise remove this section -->\n#### Feature enhancement details:\n\n\n<!-- If you want to request a new feature, please describe here, otherwise remove this section -->\n#### New feature details:\n\n",
          "filepath": "data/repos/processing/p5.js-0.10/ISSUE_TEMPLATE.md",
          "repo": "processing/p5.js",
          "version": "0.10",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-433",
    "model_patch": "diff --git a/src/elements/View.js b/src/elements/View.js\n--- a/src/elements/View.js\n+++ b/src/elements/View.js\n@@ -1,5 +1,6 @@\n import React, { Component } from 'react';\n import { View as PDFView } from '@react-pdf/renderer';\n+import { StyleSheet } from '@react-pdf/renderer';\n \n class View extends Component {\n   render() {\n@@ -7,7 +8,13 @@\n     const { children, style } = this.props;\n \n     return (\n-      <PDFView style={style}>\n+      <PDFView\n+        style={StyleSheet.flatten([\n+          style,\n+          style.borderRadius && {\n+            borderRadius: style.width / 2,\n+          },\n+        ])}\n+      >\n         {children}\n       </PDFView>\n     );\ndiff --git a/src/elements/Document.js b/src/elements/Document.js\n--- a/src/elements/Document.js\n+++ b/src/elements/Document.js\n@@ -1,5 +1,6 @@\n import React, { Component } from 'react';\n import { Document as PDFDocument } from '@react-pdf/renderer';\n+import { StyleSheet } from '@react-pdf/renderer';\n \n class Document extends Component {\n   render() {\n@@ -7,7 +8,13 @@\n     const { children, style } = this.props;\n \n     return (\n-      <PDFDocument style={style}>\n+      <PDFDocument\n+        style={StyleSheet.flatten([\n+          style,\n+          style.borderRadius && {\n+            borderRadius: style.width / 2,\n+          },\n+        ])}\n+      >\n         {children}\n       </PDFDocument>\n     );",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 258.21,
      "issue_embedding_time_ms": 258.21,
      "retrieval_time_ms_jina": 1.1,
      "retrieval_time_ms": 1.1,
      "total_retrieval_time_ms": 259.31,
      "generation_time_ms": 4997.06,
      "total_io_time_ms": 5256.37,
      "input_total_token_limit": null,
      "issue_text_tokens": 529,
      "vlm_tokens": 0,
      "retrieved_tokens": 4177,
      "prompt_template_tokens": 508,
      "total_input_prompt_tokens": 5214,
      "output_generated_tokens": 376,
      "total_io_tokens": 5590,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nSetting a border on a rounded <View> causes unexpected results\\n\\r\\n**OS:**\\r\\nmacOS 10.13 High Sierra\\r\\n\\r\\n**React-pdf version:**\\r\\n@react-pdf/renderer@^1.0.0-alpha.25\\r\\n\\r\\n**Description:**\\r\\nI am attempting to draw a circle with a border by rounding a `<View />` and adding a border. \\r\\n\\r\\n```\\r\\nconst Quixote = () => (\\r\\n  <Document>\\r\\n    <Page style={styles.body}>\\r\\n      <View style={styles.circle}></View>\\r\\n    </Page>\\r\\n  </Document>\\r\\n);\\r\\n\\r\\nconst styles = StyleSheet.create({\\r\\n  body: {\\r\\n    paddingTop: 35,\\r\\n    paddingBottom: 65,\\r\\n    paddingHorizontal: 35,\\r\\n  },\\r\\n  circle: {\\r\\n    width: 50,\\r\\n    height: 50,\\r\\n    backgroundColor: 'green',\\r\\n    borderRadius: 50,\\r\\n    border: '2 solid red'\\r\\n  }\\r\\n\\r\\n});\\r\\n\\r\\nReactPDF.render(<Quixote />);\\r\\n```\\r\\n\\r\\nWhen I set the `borderRadius` to 1, the border drawn mostly goes around the view. \\r\\n![screen shot 2018-11-29 at 12 14 46 pm](https://user-images.githubusercontent.com/4199296/49249306-b037e380-f3d0-11e8-96cd-29eee986683b.png)\\r\\n\\r\\nWhen I set `borderRadius` to 3, the border drawn already starts to have issues.\\r\\n![screen shot 2018-11-29 at 12 14 51 pm](https://user-images.githubusercontent.com/4199296/49249354-c5ad0d80-f3d0-11e8-8e2d-393dee2530e1.png)\\r\\n\\r\\nAs I increase the borderRadius to make the view more circular the rendering gets really strange.\\r\\n`borderRadius @ 20`\\r\\n![screen shot 2018-11-29 at 12 14 58 pm](https://user-images.githubusercontent.com/4199296/49249430-f42ae880-f3d0-11e8-9272-cefd5bca1b0d.png)\\r\\n\\r\\n`borderRadius @ 30`\\r\\n![screen shot 2018-11-29 at 12 15 02 pm](https://user-images.githubusercontent.com/4199296/49249444-fb51f680-f3d0-11e8-8f24-49d22bc27962.png)\\r\\n\\r\\nI would love the border implementation to better support rounded views! Thanks a bunch!\\n\\n</issue>\\n\\n<code>\\n[start of background.test.js]\\nimport Document from '../src/elements/Document';\\nimport Page from '../src/elements/Page';\\nimport View from '../src/elements/View';\\nimport root from './utils/dummyRoot';\\n\\nlet dummyRoot;\\n\\ndescribe('Background', () => {\\n  beforeEach(() => {\\n    dummyRoot = root.reset();\\n  });\\n\\n  test('Should render sharp background correctly', async () => {\\n    const doc = new Document(dummyRoot, {});\\n    const page = new Page(dummyRoot, {});\\n    const view = new View(dummyRoot, {\\n      style: { width: 50, height: 50, backgroundColor: 'tomato' },\\n    });\\n\\n    doc.appendChild(page);\\n    page.appendChild(view);\\n\\n    await doc.render();\\n\\n    expect(dummyRoot.instance.fillColor.mock.calls).toHaveLength(1);\\n    expect(dummyRoot.instance.fillColor.mock.calls[0][0]).toBe('tomato');\\n    expect(dummyRoot.instance.roundedRect.mock.calls[0]).toEqual([\\n      0,\\n      0,\\n      50,\\n      50,\\n      0,\\n    ]);\\n    expect(dummyRoot.instance.fill.mock.calls).toHaveLength(1);\\n  });\\n\\n  test('Should render sharp background correctly ignoring margins', async () => {\\n    const doc = new Document(dummyRoot, {});\\n    const page = new Page(dummyRoot, {});\\n    const view = new View(dummyRoot, {\\n      style: { width: 50, height: 50, margin: 40, backgroundColor: 'tomato' },\\n    });\\n\\n    doc.appendChild(page);\\n    page.appendChild(view);\\n\\n    await doc.render();\\n\\n    expect(dummyRoot.instance.fillColor.mock.calls).toHaveLength(1);\\n    expect(dummyRoot.instance.fillColor.mock.calls[0][0]).toBe('tomato');\\n    expect(dummyRoot.instance.roundedRect.mock.calls[0]).toEqual([\\n      40,\\n      40,\\n      50,\\n      50,\\n      0,\\n    ]);\\n    expect(dummyRoot.instance.fill.mock.calls).toHaveLength(1);\\n  });\\n\\n  test('Should render sharp background correctly including paddings', async () => {\\n    const doc = new Document(dummyRoot, {});\\n    const page = new Page(dummyRoot, {});\\n    const view = new View(dummyRoot, {\\n      style: { width: 50, height: 50, padding: 20, backgroundColor: 'tomato' },\\n    });\\n\\n    doc.appendChild(page);\\n    page.appendChild(view);\\n\\n    await doc.render();\\n\\n    expect(dummyRoot.instance.fillColor.mock.calls).toHaveLength(1);\\n    expect(dummyRoot.instance.fillColor.mock.calls[0][0]).toBe('tomato');\\n    expect(dummyRoot.instance.roundedRect.mock.calls[0]).toEqual([\\n      0,\\n      0,\\n      50,\\n      50,\\n      0,\\n    ]);\\n    expect(dummyRoot.instance.fill.mock.calls).toHaveLength(1);\\n  });\\n\\n  test('Should render rounded background correctly', async () => {\\n    const doc = new Document(dummyRoot, {});\\n    const page = new Page(dummyRoot, {});\\n    const view = new View(dummyRoot, {\\n      style: {\\n        width: 50,\\n        height: 50,\\n        backgroundColor: 'tomato',\\n        borderRadius: 5,\\n      },\\n    });\\n\\n    doc.appendChild(page);\\n    page.appendChild(view);\\n\\n    await doc.render();\\n\\n    expect(dummyRoot.instance.fillColor.mock.calls).toHaveLength(1);\\n    expect(dummyRoot.instance.fillColor.mock.calls[0][0]).toBe('tomato');\\n    expect(dummyRoot.instance.roundedRect.mock.calls[0]).toEqual([\\n      0,\\n      0,\\n      50,\\n      50,\\n      5,\\n    ]);\\n    expect(dummyRoot.instance.fill.mock.calls).toHaveLength(1);\\n  });\\n});\\n\\n[end of background.test.js]\\n[start of index.js]\\n/* eslint react/prop-types: 0 */\\n/* eslint react/jsx-sort-props: 0 */\\n\\nimport React from 'react';\\nimport ReactPDF, {\\n  Document,\\n  Page,\\n  View,\\n  Text,\\n  StyleSheet,\\n} from '../../dist/react-pdf.es.js';\\n\\nconst styles = StyleSheet.create({\\n  select: {\\n    height: '9%',\\n    alignItems: 'center',\\n    flexDirection: 'row',\\n    paddingHorizontal: '30px',\\n  },\\n  bar: {\\n    flexGrow: 1,\\n    height: '10px',\\n    backgroundColor: 'gray',\\n  },\\n  barMiddle: {\\n    width: '50%',\\n    height: '100%',\\n    backgroundColor: 'lightgray',\\n    margin: 'auto',\\n  },\\n  knob: {\\n    alignItems: 'center',\\n    justifyContent: 'center',\\n    width: '20px',\\n    height: '20px',\\n    borderRadius: 10,\\n    borderWidth: 3,\\n    borderColor: 'orange',\\n    position: 'absolute',\\n    backgroundColor: 'white',\\n    fontSize: 8,\\n    top: -6,\\n  },\\n  text: {\\n    fontSize: 10,\\n  },\\n});\\n\\nconst Knob = ({ value }) => (\\n  <View style={[styles.knob, { left: `${value - 3}%` }]}>\\n    <Text style={{ fontSize: 8, marginTop: 4 }}>{value}</Text>\\n  </View>\\n);\\n\\nconst Select = props => (\\n  <View style={styles.select}>\\n    <Text style={[styles.text, { marginRight: '15px' }]}>0%</Text>\\n    <View style={styles.bar}>\\n      <View style={styles.barMiddle} />\\n      <Knob {...props} />\\n    </View>\\n    <Text style={[styles.text, { marginLeft: '15px' }]}>100%</Text>\\n  </View>\\n);\\n\\nconst doc = (\\n  <Document>\\n    <Page size=\\\"A5\\\">\\n      <Select value={0} />\\n      <Select value={10} />\\n      <Select value={20} />\\n      <Select value={30} />\\n      <Select value={40} />\\n      <Select value={50} />\\n      <Select value={60} />\\n      <Select value={70} />\\n      <Select value={80} />\\n      <Select value={90} />\\n      <Select value={100} />\\n    </Page>\\n  </Document>\\n);\\n\\nReactPDF.render(doc, `${__dirname}/output.pdf`);\\n\\n[end of index.js]\\n[start of borders.test.js]\\nimport Document from '../src/elements/Document';\\nimport Page from '../src/elements/Page';\\nimport View from '../src/elements/View';\\nimport root from './utils/dummyRoot';\\n\\nlet dummyRoot;\\n\\ndescribe('Borders', () => {\\n  beforeEach(() => {\\n    dummyRoot = root.reset();\\n  });\\n\\n  test('Should render solid border', async () => {\\n    const doc = new Document(dummyRoot, {});\\n    const page = new Page(dummyRoot, {});\\n    const view = new View(dummyRoot, {\\n      style: { width: 50, height: 50, borderBottom: '2 solid red' },\\n    });\\n\\n    doc.appendChild(page);\\n    page.appendChild(view);\\n\\n    await doc.render();\\n\\n    expect(dummyRoot.instance.lineWidth.mock.calls).toHaveLength(1);\\n    expect(dummyRoot.instance.lineWidth.mock.calls[0][0]).toBe(2);\\n    expect(dummyRoot.instance.stroke.mock.calls).toHaveLength(1);\\n    expect(dummyRoot.instance.dash.mock.calls).toHaveLength(0);\\n  });\\n\\n  test('Should render dashed border', async () => {\\n    const doc = new Document(dummyRoot, {});\\n    const page = new Page(dummyRoot, {});\\n    const view = new View(dummyRoot, {\\n      style: { width: 50, height: 50, borderBottom: '2 dashed red' },\\n    });\\n\\n    doc.appendChild(page);\\n    page.appendChild(view);\\n\\n    await doc.render();\\n\\n    expect(dummyRoot.instance.lineWidth.mock.calls).toHaveLength(1);\\n    expect(dummyRoot.instance.lineWidth.mock.calls[0][0]).toBe(2);\\n    expect(dummyRoot.instance.stroke.mock.calls).toHaveLength(1);\\n    expect(dummyRoot.instance.dash.mock.calls).toHaveLength(1);\\n    expect(dummyRoot.instance.dash.mock.calls[0][0]).toBe(4);\\n  });\\n\\n  test('Should render dotted border', async () => {\\n    const doc = new Document(dummyRoot, {});\\n    const page = new Page(dummyRoot, {});\\n    const view = new View(dummyRoot, {\\n      style: { width: 50, height: 50, borderBottom: '2 dotted red' },\\n    });\\n\\n    doc.appendChild(page);\\n    page.appendChild(view);\\n\\n    await doc.render();\\n\\n    expect(dummyRoot.instance.lineWidth.mock.calls).toHaveLength(1);\\n    expect(dummyRoot.instance.lineWidth.mock.calls[0][0]).toBe(2);\\n    expect(dummyRoot.instance.stroke.mock.calls).toHaveLength(1);\\n    expect(dummyRoot.instance.dash.mock.calls).toHaveLength(1);\\n    expect(dummyRoot.instance.dash.mock.calls[0][0]).toBe(2);\\n  });\\n});\\n\\n[end of borders.test.js]\\n[start of index.js]\\n/* eslint react/prop-types: 0 */\\n/* eslint react/jsx-sort-props: 0 */\\n\\nimport React from 'react';\\nimport ReactPDF, {\\n  Document,\\n  Page,\\n  View,\\n  Text,\\n  Link,\\n  Font,\\n  StyleSheet,\\n} from '../../dist/react-pdf.es.js';\\n\\nconst styles = StyleSheet.create({\\n  title: {\\n    margin: 20,\\n    fontSize: 25,\\n    textAlign: 'center',\\n    backgroundColor: '#e4e4e4',\\n    textTransform: 'uppercase',\\n    fontFamily: 'Roboto',\\n  },\\n  body: {\\n    flexGrow: 1,\\n  },\\n  row: {\\n    flexGrow: 1,\\n    flexDirection: 'row',\\n  },\\n  block: {\\n    flexGrow: 1,\\n  },\\n  text: {\\n    width: '60%',\\n    margin: 10,\\n    fontFamily: 'Oswald',\\n    textAlign: 'justify',\\n  },\\n  fill1: {\\n    width: '40%',\\n    backgroundColor: '#e14427',\\n  },\\n  fill2: {\\n    flexGrow: 2,\\n    backgroundColor: '#e6672d',\\n  },\\n  fill3: {\\n    flexGrow: 2,\\n    backgroundColor: '#e78632',\\n  },\\n  fill4: {\\n    flexGrow: 2,\\n    backgroundColor: '#e29e37',\\n  },\\n});\\n\\nFont.register(`${__dirname}/fonts/Roboto-Regular.ttf`, { family: 'Roboto' });\\nFont.register(\\n  'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\\n  { family: 'Oswald' },\\n);\\n\\nconst doc = (\\n  <Document>\\n    <Page size=\\\"A4\\\">\\n      <Link\\n        style={styles.title}\\n        src=\\\"https://es.wikipedia.org/wiki/Lorem_ipsum\\\"\\n      >\\n        Lorem Ipsum\\n      </Link>\\n      <View style={styles.body}>\\n        <View style={styles.row}>\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n          <View style={styles.fill1} />\\n        </View>\\n        <View style={styles.row}>\\n          <View style={styles.fill2} />\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n        </View>\\n        <View style={styles.row}>\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n          <View style={styles.fill3} />\\n        </View>\\n        <View style={styles.row}>\\n          <View style={styles.fill4} />\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n        </View>\\n      </View>\\n    </Page>\\n  </Document>\\n);\\n\\nReactPDF.render(doc, `${__dirname}/output.pdf`);\\n\\n[end of index.js]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n  <p align=\\\"center\\\">React renderer for creating PDF files on the browser and server<p>\\n  <p align=\\\"center\\\">\\n    <a href=\\\"https://www.npmjs.com/package/@react-pdf/renderer\\\">\\n      <img src=\\\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\\\" />\\n    </a>\\n    <a href=\\\"https://travis-ci.org/diegomura/react-pdf\\\">\\n      <img src=\\\"https://img.shields.io/travis/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\\\">\\n      <img src=\\\"https://img.shields.io/github/license/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://spectrum.chat/react-pdf\\\">\\n      <img src=\\\"https://withspectrum.github.io/badge/badge.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/prettier/prettier\\\">\\n      <img src=\\\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\\\" />\\n    </a>\\n  </p>\\n</p>\\n\\n## How to install\\n```sh\\nyarn add @react-pdf/renderer\\n```\\n\\n## How it works\\n\\n```jsx\\nimport React from 'react';\\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\\n\\n// Create styles\\nconst styles = StyleSheet.create({\\n  page: {\\n    flexDirection: 'row',\\n    backgroundColor: '#E4E4E4'\\n  },\\n  section: {\\n    margin: 10,\\n    padding: 10,\\n    flexGrow: 1\\n  }\\n});\\n\\n// Create Document Component\\nconst MyDocument = () => (\\n  <Document>\\n    <Page size=\\\"A4\\\" style={styles.page}>\\n      <View style={styles.section}>\\n        <Text>Section #1</Text>\\n      </View>\\n      <View style={styles.section}>\\n        <Text>Section #2</Text>\\n      </View>\\n    </Page>\\n  </Document>\\n);\\n```\\n\\n### `Web.` Render in DOM\\n```jsx\\nimport React from 'react';\\nimport ReactDOM from 'react-dom';\\n\\nReactDOM.render(<MyDocument />, document.getElementById('root'));\\n```\\n\\n### `Node.` Save in a file\\n```jsx\\nimport React from 'react';\\nimport ReactPDF from '@react-pdf/renderer';\\n\\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\\n```\\n\\n### `Native.` Render in mobile\\n> Coming soon\\n\\n## Examples\\nFor each example, try opening `output.pdf` to see the result.\\n\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/text/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/text/\\\">Text</a>\\n      </td>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/images/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/images/\\\">Images</a>\\n      </td>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/resume/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/resume/\\\">Resume</a>\\n\\t\\t\\t</td>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/fractals/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/fractals/\\\">Fractals</a>\\n\\t\\t\\t</td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/knobs/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/knobs/\\\">Knobs</a>\\n\\t\\t\\t</td>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/pageWrap/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/pageWrap/\\\">Page wrap</a>\\n      </td>  \\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n\\nTo run the examples, first clone the project and install the dependencies:\\n```sh\\ngit clone https://github.com/diegomura/react-pdf.git\\ncd react-pdf\\nyarn install\\n```\\nThen, run `yarn example -- <example-name>`\\n```sh\\nyarn example -- fractals\\n```\\n\\n## Contributors\\n\\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\\n<a href=\\\"https://github.com/diegomura/react-pdf/graphs/contributors\\\"><img src=\\\"https://opencollective.com/react-pdf/contributors.svg?width=890\\\" /></a>\\n\\n## Sponsors\\n\\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#sponsors\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/sponsors.svg?width=890\\\"></a>\\n\\n## Backers\\n\\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#backers\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/backers.svg?width=890\\\"></a>\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[end of README.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "background.test.js",
        "index.js",
        "borders.test.js",
        "index.js",
        "README.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "09d0a8a2-06bc-4bc0-9761-778a3dc98f03",
        "score": 0.01639344262295082,
        "payload": {
          "text": "import Document from '../src/elements/Document';\nimport Page from '../src/elements/Page';\nimport View from '../src/elements/View';\nimport root from './utils/dummyRoot';\n\nlet dummyRoot;\n\ndescribe('Background', () => {\n  beforeEach(() => {\n    dummyRoot = root.reset();\n  });\n\n  test('Should render sharp background correctly', async () => {\n    const doc = new Document(dummyRoot, {});\n    const page = new Page(dummyRoot, {});\n    const view = new View(dummyRoot, {\n      style: { width: 50, height: 50, backgroundColor: 'tomato' },\n    });\n\n    doc.appendChild(page);\n    page.appendChild(view);\n\n    await doc.render();\n\n    expect(dummyRoot.instance.fillColor.mock.calls).toHaveLength(1);\n    expect(dummyRoot.instance.fillColor.mock.calls[0][0]).toBe('tomato');\n    expect(dummyRoot.instance.roundedRect.mock.calls[0]).toEqual([\n      0,\n      0,\n      50,\n      50,\n      0,\n    ]);\n    expect(dummyRoot.instance.fill.mock.calls).toHaveLength(1);\n  });\n\n  test('Should render sharp background correctly ignoring margins', async () => {\n    const doc = new Document(dummyRoot, {});\n    const page = new Page(dummyRoot, {});\n    const view = new View(dummyRoot, {\n      style: { width: 50, height: 50, margin: 40, backgroundColor: 'tomato' },\n    });\n\n    doc.appendChild(page);\n    page.appendChild(view);\n\n    await doc.render();\n\n    expect(dummyRoot.instance.fillColor.mock.calls).toHaveLength(1);\n    expect(dummyRoot.instance.fillColor.mock.calls[0][0]).toBe('tomato');\n    expect(dummyRoot.instance.roundedRect.mock.calls[0]).toEqual([\n      40,\n      40,\n      50,\n      50,\n      0,\n    ]);\n    expect(dummyRoot.instance.fill.mock.calls).toHaveLength(1);\n  });\n\n  test('Should render sharp background correctly including paddings', async () => {\n    const doc = new Document(dummyRoot, {});\n    const page = new Page(dummyRoot, {});\n    const view = new View(dummyRoot, {\n      style: { width: 50, height: 50, padding: 20, backgroundColor: 'tomato' },\n    });\n\n    doc.appendChild(page);\n    page.appendChild(view);\n\n    await doc.render();\n\n    expect(dummyRoot.instance.fillColor.mock.calls).toHaveLength(1);\n    expect(dummyRoot.instance.fillColor.mock.calls[0][0]).toBe('tomato');\n    expect(dummyRoot.instance.roundedRect.mock.calls[0]).toEqual([\n      0,\n      0,\n      50,\n      50,\n      0,\n    ]);\n    expect(dummyRoot.instance.fill.mock.calls).toHaveLength(1);\n  });\n\n  test('Should render rounded background correctly', async () => {\n    const doc = new Document(dummyRoot, {});\n    const page = new Page(dummyRoot, {});\n    const view = new View(dummyRoot, {\n      style: {\n        width: 50,\n        height: 50,\n        backgroundColor: 'tomato',\n        borderRadius: 5,\n      },\n    });\n\n    doc.appendChild(page);\n    page.appendChild(view);\n\n    await doc.render();\n\n    expect(dummyRoot.instance.fillColor.mock.calls).toHaveLength(1);\n    expect(dummyRoot.instance.fillColor.mock.calls[0][0]).toBe('tomato');\n    expect(dummyRoot.instance.roundedRect.mock.calls[0]).toEqual([\n      0,\n      0,\n      50,\n      50,\n      5,\n    ]);\n    expect(dummyRoot.instance.fill.mock.calls).toHaveLength(1);\n  });\n});\n",
          "filepath": "data/repos/diegomura/react-pdf-1.1/tests/background.test.js",
          "repo": "diegomura/react-pdf",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "2b85fde6-3c55-42b8-b695-6f03f00e76ab",
        "score": 0.016129032258064516,
        "payload": {
          "text": "/* eslint react/prop-types: 0 */\n/* eslint react/jsx-sort-props: 0 */\n\nimport React from 'react';\nimport ReactPDF, {\n  Document,\n  Page,\n  View,\n  Text,\n  StyleSheet,\n} from '../../dist/react-pdf.es.js';\n\nconst styles = StyleSheet.create({\n  select: {\n    height: '9%',\n    alignItems: 'center',\n    flexDirection: 'row',\n    paddingHorizontal: '30px',\n  },\n  bar: {\n    flexGrow: 1,\n    height: '10px',\n    backgroundColor: 'gray',\n  },\n  barMiddle: {\n    width: '50%',\n    height: '100%',\n    backgroundColor: 'lightgray',\n    margin: 'auto',\n  },\n  knob: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '20px',\n    height: '20px',\n    borderRadius: 10,\n    borderWidth: 3,\n    borderColor: 'orange',\n    position: 'absolute',\n    backgroundColor: 'white',\n    fontSize: 8,\n    top: -6,\n  },\n  text: {\n    fontSize: 10,\n  },\n});\n\nconst Knob = ({ value }) => (\n  <View style={[styles.knob, { left: `${value - 3}%` }]}>\n    <Text style={{ fontSize: 8, marginTop: 4 }}>{value}</Text>\n  </View>\n);\n\nconst Select = props => (\n  <View style={styles.select}>\n    <Text style={[styles.text, { marginRight: '15px' }]}>0%</Text>\n    <View style={styles.bar}>\n      <View style={styles.barMiddle} />\n      <Knob {...props} />\n    </View>\n    <Text style={[styles.text, { marginLeft: '15px' }]}>100%</Text>\n  </View>\n);\n\nconst doc = (\n  <Document>\n    <Page size=\"A5\">\n      <Select value={0} />\n      <Select value={10} />\n      <Select value={20} />\n      <Select value={30} />\n      <Select value={40} />\n      <Select value={50} />\n      <Select value={60} />\n      <Select value={70} />\n      <Select value={80} />\n      <Select value={90} />\n      <Select value={100} />\n    </Page>\n  </Document>\n);\n\nReactPDF.render(doc, `${__dirname}/output.pdf`);\n",
          "filepath": "data/repos/diegomura/react-pdf-1.1/examples/knobs/index.js",
          "repo": "diegomura/react-pdf",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "e06d3754-bd71-416e-92ff-bd506bc5c13f",
        "score": 0.015873015873015872,
        "payload": {
          "text": "import Document from '../src/elements/Document';\nimport Page from '../src/elements/Page';\nimport View from '../src/elements/View';\nimport root from './utils/dummyRoot';\n\nlet dummyRoot;\n\ndescribe('Borders', () => {\n  beforeEach(() => {\n    dummyRoot = root.reset();\n  });\n\n  test('Should render solid border', async () => {\n    const doc = new Document(dummyRoot, {});\n    const page = new Page(dummyRoot, {});\n    const view = new View(dummyRoot, {\n      style: { width: 50, height: 50, borderBottom: '2 solid red' },\n    });\n\n    doc.appendChild(page);\n    page.appendChild(view);\n\n    await doc.render();\n\n    expect(dummyRoot.instance.lineWidth.mock.calls).toHaveLength(1);\n    expect(dummyRoot.instance.lineWidth.mock.calls[0][0]).toBe(2);\n    expect(dummyRoot.instance.stroke.mock.calls).toHaveLength(1);\n    expect(dummyRoot.instance.dash.mock.calls).toHaveLength(0);\n  });\n\n  test('Should render dashed border', async () => {\n    const doc = new Document(dummyRoot, {});\n    const page = new Page(dummyRoot, {});\n    const view = new View(dummyRoot, {\n      style: { width: 50, height: 50, borderBottom: '2 dashed red' },\n    });\n\n    doc.appendChild(page);\n    page.appendChild(view);\n\n    await doc.render();\n\n    expect(dummyRoot.instance.lineWidth.mock.calls).toHaveLength(1);\n    expect(dummyRoot.instance.lineWidth.mock.calls[0][0]).toBe(2);\n    expect(dummyRoot.instance.stroke.mock.calls).toHaveLength(1);\n    expect(dummyRoot.instance.dash.mock.calls).toHaveLength(1);\n    expect(dummyRoot.instance.dash.mock.calls[0][0]).toBe(4);\n  });\n\n  test('Should render dotted border', async () => {\n    const doc = new Document(dummyRoot, {});\n    const page = new Page(dummyRoot, {});\n    const view = new View(dummyRoot, {\n      style: { width: 50, height: 50, borderBottom: '2 dotted red' },\n    });\n\n    doc.appendChild(page);\n    page.appendChild(view);\n\n    await doc.render();\n\n    expect(dummyRoot.instance.lineWidth.mock.calls).toHaveLength(1);\n    expect(dummyRoot.instance.lineWidth.mock.calls[0][0]).toBe(2);\n    expect(dummyRoot.instance.stroke.mock.calls).toHaveLength(1);\n    expect(dummyRoot.instance.dash.mock.calls).toHaveLength(1);\n    expect(dummyRoot.instance.dash.mock.calls[0][0]).toBe(2);\n  });\n});\n",
          "filepath": "data/repos/diegomura/react-pdf-1.1/tests/borders.test.js",
          "repo": "diegomura/react-pdf",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "1b4b0891-c310-488a-a8db-6613151d4eb4",
        "score": 0.015625,
        "payload": {
          "text": "/* eslint react/prop-types: 0 */\n/* eslint react/jsx-sort-props: 0 */\n\nimport React from 'react';\nimport ReactPDF, {\n  Document,\n  Page,\n  View,\n  Text,\n  Link,\n  Font,\n  StyleSheet,\n} from '../../dist/react-pdf.es.js';\n\nconst styles = StyleSheet.create({\n  title: {\n    margin: 20,\n    fontSize: 25,\n    textAlign: 'center',\n    backgroundColor: '#e4e4e4',\n    textTransform: 'uppercase',\n    fontFamily: 'Roboto',\n  },\n  body: {\n    flexGrow: 1,\n  },\n  row: {\n    flexGrow: 1,\n    flexDirection: 'row',\n  },\n  block: {\n    flexGrow: 1,\n  },\n  text: {\n    width: '60%',\n    margin: 10,\n    fontFamily: 'Oswald',\n    textAlign: 'justify',\n  },\n  fill1: {\n    width: '40%',\n    backgroundColor: '#e14427',\n  },\n  fill2: {\n    flexGrow: 2,\n    backgroundColor: '#e6672d',\n  },\n  fill3: {\n    flexGrow: 2,\n    backgroundColor: '#e78632',\n  },\n  fill4: {\n    flexGrow: 2,\n    backgroundColor: '#e29e37',\n  },\n});\n\nFont.register(`${__dirname}/fonts/Roboto-Regular.ttf`, { family: 'Roboto' });\nFont.register(\n  'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\n  { family: 'Oswald' },\n);\n\nconst doc = (\n  <Document>\n    <Page size=\"A4\">\n      <Link\n        style={styles.title}\n        src=\"https://es.wikipedia.org/wiki/Lorem_ipsum\"\n      >\n        Lorem Ipsum\n      </Link>\n      <View style={styles.body}>\n        <View style={styles.row}>\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n          <View style={styles.fill1} />\n        </View>\n        <View style={styles.row}>\n          <View style={styles.fill2} />\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n        </View>\n        <View style={styles.row}>\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n          <View style={styles.fill3} />\n        </View>\n        <View style={styles.row}>\n          <View style={styles.fill4} />\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n        </View>\n      </View>\n    </Page>\n  </Document>\n);\n\nReactPDF.render(doc, `${__dirname}/output.pdf`);\n",
          "filepath": "data/repos/diegomura/react-pdf-1.1/examples/text/index.js",
          "repo": "diegomura/react-pdf",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "21d70c72-04db-4967-934b-8eb2a31aa56f",
        "score": 0.015384615384615385,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n  <p align=\"center\">React renderer for creating PDF files on the browser and server<p>\n  <p align=\"center\">\n    <a href=\"https://www.npmjs.com/package/@react-pdf/renderer\">\n      <img src=\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\" />\n    </a>\n    <a href=\"https://travis-ci.org/diegomura/react-pdf\">\n      <img src=\"https://img.shields.io/travis/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\">\n      <img src=\"https://img.shields.io/github/license/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://spectrum.chat/react-pdf\">\n      <img src=\"https://withspectrum.github.io/badge/badge.svg\" />\n    </a>\n    <a href=\"https://github.com/prettier/prettier\">\n      <img src=\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\" />\n    </a>\n  </p>\n</p>\n\n## How to install\n```sh\nyarn add @react-pdf/renderer\n```\n\n## How it works\n\n```jsx\nimport React from 'react';\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\n\n// Create styles\nconst styles = StyleSheet.create({\n  page: {\n    flexDirection: 'row',\n    backgroundColor: '#E4E4E4'\n  },\n  section: {\n    margin: 10,\n    padding: 10,\n    flexGrow: 1\n  }\n});\n\n// Create Document Component\nconst MyDocument = () => (\n  <Document>\n    <Page size=\"A4\" style={styles.page}>\n      <View style={styles.section}>\n        <Text>Section #1</Text>\n      </View>\n      <View style={styles.section}>\n        <Text>Section #2</Text>\n      </View>\n    </Page>\n  </Document>\n);\n```\n\n### `Web.` Render in DOM\n```jsx\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nReactDOM.render(<MyDocument />, document.getElementById('root'));\n```\n\n### `Node.` Save in a file\n```jsx\nimport React from 'react';\nimport ReactPDF from '@react-pdf/renderer';\n\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\n```\n\n### `Native.` Render in mobile\n> Coming soon\n\n## Examples\nFor each example, try opening `output.pdf` to see the result.\n\n<table>\n\t<tbody>\n\t\t<tr>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/text/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/text/\">Text</a>\n      </td>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/images/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/images/\">Images</a>\n      </td>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/resume/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/resume/\">Resume</a>\n\t\t\t</td>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/fractals/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/fractals/\">Fractals</a>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n<table>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/knobs/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/knobs/\">Knobs</a>\n\t\t\t</td>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/pageWrap/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/pageWrap/\">Page wrap</a>\n      </td>  \n\t\t</tr>\n\t</tbody>\n</table>\n\nTo run the examples, first clone the project and install the dependencies:\n```sh\ngit clone https://github.com/diegomura/react-pdf.git\ncd react-pdf\nyarn install\n```\nThen, run `yarn example -- <example-name>`\n```sh\nyarn example -- fractals\n```\n\n## Contributors\n\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\n<a href=\"https://github.com/diegomura/react-pdf/graphs/contributors\"><img src=\"https://opencollective.com/react-pdf/contributors.svg?width=890\" /></a>\n\n## Sponsors\n\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\n\n<a href=\"https://opencollective.com/react-pdf#sponsors\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/sponsors.svg?width=890\"></a>\n\n## Backers\n\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\n\n<a href=\"https://opencollective.com/react-pdf#backers\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/backers.svg?width=890\"></a>\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n",
          "filepath": "data/repos/diegomura/react-pdf-1.1/README.md",
          "repo": "diegomura/react-pdf",
          "version": "1.1",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1435",
    "model_patch": "diff --git a/marked.min.js b/marked.min.js\n--- a/marked.min.js\n+++ b/marked.min.js\n@@ -1,6 +1,7 @@\n /**\n  * marked - a markdown parser\n  * Copyright (c) 2011-2018, Christopher Jeffrey. (MIT Licensed)\n+ * Modified to handle unescaped parentheses in markdown links\n  * https://github.com/markedjs/marked\n  */\n \n@@ -10,6 +11,7 @@\n  * marked - a markdown parser\n  * Copyright (c) 2011-2018, Christopher Jeffrey. (MIT Licensed)\n  * https://github.com/markedjs/marked\n+ * Modified to handle unescaped parentheses in markdown links\n  */\n \n (function() {\n@@ -20,6 +22,7 @@\n   var block = {\n     newline: /^\\n+/,\n     code: /^( {4}[^\\n]+\\n*)+/,\n+    fences: noop,\n     hr: /^( *[-*_]){3,} *(?:\\n+|$)/,\n     heading: /^ *(#{1,6}) *([^\\n]+?) *#* *(?:\\n+|$)/,\n     nptable: noop,\n@@ -27,6 +30,7 @@\n     blockquote: /^( *>[^\\n]+(\\n[^\\n]+)*\\n*)+/,\n     list: /^( *)(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n     html: /^ *(?:comment *(?:\\n|\\s*$)|closed *(?:\\n{2,}|\\s*$)|closing *(?:\\n{2,}|\\s*$))/,\n+    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +[\"(]([^\\n]+)[\")])? *(?:\\n+|$)/,\n     paragraph: /^((?:[^\\n]+\\n?(?!hr|heading|lheading|blockquote|tag|def))+)\\n*/,\n     text: /^[^\\n]+/\n   };\n@@ -34,6 +38,7 @@\n   block.bullet = /(?:[*+-]|\\d+\\.)/;\n   block.item = /^( *)(bull) [^\\n]*(?:\\n(?!\\1bull )[^\\n]*)*/;\n   block.item = replace(block.item, 'gm')\n+    (/bull/g, block.bullet)\n     ();\n \n   block.list = replace(block.list)\n@@ -41,6 +46,7 @@\n     (/def/g, '\\\\n+(?=\\\\1?(?:[-*_] *){3,}(?:\\\\n+|$))')\n     ();\n \n+  block.def = replace(block.def)(/[\"(]/g, '(?:\\\\(|\\\\))')();\n   block._tag = '(?!(?:'\n     + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code'\n     + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo'",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 99.05,
      "issue_embedding_time_ms": 99.05,
      "retrieval_time_ms_jina": 0.76,
      "retrieval_time_ms": 0.76,
      "total_retrieval_time_ms": 99.81,
      "generation_time_ms": 8768.49,
      "total_io_time_ms": 8868.3,
      "input_total_token_limit": null,
      "issue_text_tokens": 127,
      "vlm_tokens": 0,
      "retrieved_tokens": 422,
      "prompt_template_tokens": 532,
      "total_input_prompt_tokens": 1081,
      "output_generated_tokens": 692,
      "total_io_tokens": 1773,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\n[Bug] We have to use '\\\\' to add the '('\\n![image](https://user-images.githubusercontent.com/40081831/53847026-28263300-3fea-11e9-8c93-9acc880bde90.png)\\r\\n\\r\\nNotice that we have to add '\\\\' in front of \\\"(\\\", otherwises this won't be analyzed out.\\r\\n\\r\\nThe original words are in the attached sample:\\r\\n[Sample.txt](https://github.com/markedjs/marked/files/2933754/Sample.txt).\\r\\n\\r\\nFor more\\uff0cplease refer to\\uff1ahttps://github.com/nodejs/nodejs.org/issues/2119\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of marked.min.js]\\n/**\\n * marked - a markdown parser\\n * Copyright (c) 2011-2018, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n[end of marked.min.js]\\n[start of strong_and_em_together.md]\\n***This is strong and em.***\\n\\nSo is ***this*** word.\\n\\n___This is strong and em.___\\n\\nSo is ___this___ word.\\n\\n[end of strong_and_em_together.md]\\n[start of blockquote_list_item.md]\\nThis fails in markdown.pl and upskirt:\\n\\n* hello\\n  > world\\n\\n[end of blockquote_list_item.md]\\n[start of Bug_report.md]\\n---\\nname: Bug report\\nabout: Marked says it does this thing but does not\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior:\\n\\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\\n<!--\\n1. [Marked Demo](https://marked.js.org/demo/)\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\\n-->\\n\\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\\n<!--\\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\\n3. Actual output (or error) is...\\n-->\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n[end of Bug_report.md]\\n[start of toplevel_paragraphs.md]\\n---\\ngfm: true\\n---\\nhello world\\n    text after spaces\\n    text after spaces\\n\\nparagraph before code\\n```\\ntext inside block code\\n```\\n\\nparagraph before hr\\n* * *\\n\\nparagraph before head with hash\\n# how are you\\n\\nparagraph before head with equals\\nhow are you again\\n===========\\n\\nparagraph before blockquote\\n> text for blockquote\\n\\nparagraph before list\\n* text inside list\\n\\nparagraph before div\\n<div>text inside div</div>\\n\\nparagraph with span\\n<span>text inside span</span>\\n\\nhello [world][how]\\n\\n[how]: /are/you\\n\\n<div>hello</div>\\n\\n<span>hello</span>\\n\\n[end of toplevel_paragraphs.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "marked.min.js",
        "strong_and_em_together.md",
        "blockquote_list_item.md",
        "Bug_report.md",
        "toplevel_paragraphs.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "d2f51f8d-5f7f-4c38-9657-cc1d9a95399b",
        "score": 0.01639344262295082,
        "payload": {
          "text": "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2018, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */",
          "filepath": "data/repos/markedjs/marked-0.6/marked.min.js",
          "repo": "markedjs/marked",
          "version": "0.6",
          "chunk_index": 0
        }
      },
      {
        "id": "d43641f3-3ec2-4a02-b01f-118f525a9c43",
        "score": 0.016129032258064516,
        "payload": {
          "text": "***This is strong and em.***\n\nSo is ***this*** word.\n\n___This is strong and em.___\n\nSo is ___this___ word.\n",
          "filepath": "data/repos/markedjs/marked-0.6/test/original/strong_and_em_together.md",
          "repo": "markedjs/marked",
          "version": "0.6",
          "chunk_index": 0
        }
      },
      {
        "id": "f3c40440-1640-4f07-93f9-65d2e6d6759d",
        "score": 0.015873015873015872,
        "payload": {
          "text": "This fails in markdown.pl and upskirt:\n\n* hello\n  > world\n",
          "filepath": "data/repos/markedjs/marked-0.6/test/new/blockquote_list_item.md",
          "repo": "markedjs/marked",
          "version": "0.6",
          "chunk_index": 0
        }
      },
      {
        "id": "8fb32650-7573-4509-a489-7ff3dc5e662a",
        "score": 0.015625,
        "payload": {
          "text": "---\nname: Bug report\nabout: Marked says it does this thing but does not\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\n<!--\n1. [Marked Demo](https://marked.js.org/demo/)\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\n-->\n\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\n<!--\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\n3. Actual output (or error) is...\n-->\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n",
          "filepath": "data/repos/markedjs/marked-0.6/.github/ISSUE_TEMPLATE/Bug_report.md",
          "repo": "markedjs/marked",
          "version": "0.6",
          "chunk_index": 0
        }
      },
      {
        "id": "0b2117c9-f636-43b4-846c-6d73a5e21c8b",
        "score": 0.015384615384615385,
        "payload": {
          "text": "---\ngfm: true\n---\nhello world\n    text after spaces\n    text after spaces\n\nparagraph before code\n```\ntext inside block code\n```\n\nparagraph before hr\n* * *\n\nparagraph before head with hash\n# how are you\n\nparagraph before head with equals\nhow are you again\n===========\n\nparagraph before blockquote\n> text for blockquote\n\nparagraph before list\n* text inside list\n\nparagraph before div\n<div>text inside div</div>\n\nparagraph with span\n<span>text inside span</span>\n\nhello [world][how]\n\n[how]: /are/you\n\n<div>hello</div>\n\n<span>hello</span>\n",
          "filepath": "data/repos/markedjs/marked-0.6/test/new/toplevel_paragraphs.md",
          "repo": "markedjs/marked",
          "version": "0.6",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "processing__p5.js-4561",
    "model_patch": "diff --git a/src/core/error_helpers.js b/src/core/error_helpers.js\nindex 1234567..89abcde 100644\n--- a/src/core/error_helpers.js\n+++ b/src/core/error_helpers.js\n@@ -1,6 +1,7 @@\n /**\n  * @for p5\n  * @requires core\n+ * @requires lodash\n  *\n  * This is the main file for the Friendly Error System (FES). Here is a\n  * brief outline of the functions called in this system.\n@@ -44,6 +45,7 @@ import { translator } from './internationalization';\n \n // p5.js blue, p5.js orange, auto dark green; fallback p5.js darkened magenta\n // See testColors below for all the color codes and names\n+import _ from 'lodash';\n const typeColors = ['#2D7BB6', '#EE9900', '#4DB200', '#C83C00'];\n \n if (typeof IS_MINIFIED !== 'undefined') {\n@@ -174,6 +176,7 @@ const defineMisusedAtTopLevelCode = () => {\n   misusedAtTopLevelCode.sort((a, b) => b.name.length - a.name.length);\n };\n \n+const paramCache = new Map();\n const helpForMisusedAtTopLevelCode = (e, log) => {\n   if (!log) {\n     log = console.log.bind(console);\n@@ -489,6 +492,7 @@ p5._friendlyFileLoadError = function(errorType, filePath) {\n    * param  {String}               func    the name of the function\n    * param  {Array}                args    user input arguments\n    *\n+   * Uses caching to improve performance on repeated calls.\n    * example:\n    *  const a;\n    *  ellipse(10,10,a,5);\n@@ -497,6 +501,7 @@ p5._friendlyFileLoadError = function(errorType, filePath) {\n    *  \"It looks like ellipse received an empty variable in spot #2.\"\n    *\n    * example:\n+   *  ellipse(10,\"foo\",5,5);\n    * console output:\n    *  \"ellipse was expecting a number for parameter #1,\n    *           received \"foo\" instead.\"\n@@ -504,6 +509,7 @@ p5._friendlyFileLoadError = function(errorType, filePath) {\n   p5._validateParameters = function validateParameters(func, args) {\n     if (p5.disableFriendlyErrors) {\n       return; // skip FES\n+    }\n \n     // lookup the docs in the 'data.json' file\n     const docs = docCache[func] || (docCache[func] = lookupParamDoc(func));\n@@ -511,6 +517,18 @@ p5._friendlyFileLoadError = function(errorType, filePath) {\n \n     // ignore any trailing `undefined` arguments\n     let argCount = args.length;\n+    const argTypes = args.map(getType);\n+    const cacheKey = `${func}:${argTypes.join(',')}`;\n+\n+    if (paramCache.has(cacheKey)) {\n+      return; // Cached result, skip validation\n+    }\n+\n+    // Cache the result to avoid repetitive logging\n+    paramCache.set(cacheKey, true);\n+\n+    // '== null' checks for 'null' and typeof 'undefined'\n     while (argCount > 0 && args[argCount - 1] == null) argCount--;\n \n     // find the overload with the best score",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 189.17,
      "issue_embedding_time_ms": 189.17,
      "retrieval_time_ms_jina": 1.51,
      "retrieval_time_ms": 1.51,
      "total_retrieval_time_ms": 190.68,
      "generation_time_ms": 6998.7,
      "total_io_time_ms": 7189.38,
      "input_total_token_limit": null,
      "issue_text_tokens": 355,
      "vlm_tokens": 0,
      "retrieved_tokens": 11580,
      "prompt_template_tokens": 536,
      "total_input_prompt_tokens": 12471,
      "output_generated_tokens": 754,
      "total_io_tokens": 13225,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nFES: validateParameters speed + repetitive logging\\n#### Most appropriate sub-area of p5.js?\\r\\n- [x] Other (Friendly errors)\\r\\n\\r\\n#### Feature enhancement details:\\r\\nI am working on the FES as part of my GSoC project and I will be starting by addressing the known issues in `validateParameters`. \\r\\n\\r\\nvalidateParameters is responsible for a slowdown as it runs every time a p5 function is called. I had first thought that this must largely be due to `lookupParamDocs` but this isn't entirely the case. `lookupParamDocs` runs a linear search on `data.json`, and it can be done in constant time using object lookups. Moreover the contents of data.json take up about 1.7 MB. Removing the unnecessary stuff cuts it to 400 KB, thus reducing the final library size by 1.3 MB. \\r\\n\\r\\nDoing all this only speeds up the first run. Over subsequent runs, scoring and matching the formats repeatedly is redundant if the same sequence of arguments repeats. This can be prevented by caching the argument types and returning if an earlier sequence of types repeats. In repeated calls, this should improve performance as long as the type sequence lookup is faster than scoring. This is the case for functions with a lot of formats and overloads. This would also solve the problem of the FES flooding the console in repeated runs of a function. \\r\\n<img src=\\\"https://user-images.githubusercontent.com/38867671/82134746-9bdfe480-9818-11ea-8a3d-59e4205a24b8.png\\\" width=\\\"300\\\">\\r\\nAlso, trailing undefined arguments are not accounted for by validateParamters, but I think that needs a separate issue? @stalgiag\\n\\n</issue>\\n\\n<code>\\n[start of error_helpers.js]\\n/**\\n * @for p5\\n * @requires core\\n *\\n * This is the main file for the Friendly Error System (FES). Here is a\\n * brief outline of the functions called in this system.\\n *\\n * The FES may be invoked by a call to either (1) _validateParameters,\\n * (2) _friendlyFileLoadError, (3) _friendlyError, or (4) helpForMisusedAtTopLevelCode.\\n *\\n * helpForMisusedAtTopLevelCode is called by this file on window load to check for use\\n * of p5.js functions outside of setup() or draw()\\n * Items 1-3 above are called by functions in the p5 library located in other files.\\n *\\n * _friendlyFileLoadError is called by the loadX() methods.\\n * _friendlyError can be called by any function to offer a helpful error message.\\n *\\n * _validateParameters is called by functions in the p5.js API to help users ensure\\n * ther are calling p5 function with the right parameter types. The property\\n * disableFriendlyErrors = false can be set from a p5.js sketch to turn off parameter\\n * checking. The call sequence from _validateParameters looks something like this:\\n *\\n * _validateParameters\\n *   lookupParamDoc\\n *   scoreOverload\\n *     testParamTypes\\n *     testParamType\\n *   getOverloadErrors\\n *   _friendlyParamError\\n *     ValidationError\\n *     report\\n *       friendlyWelcome\\n *\\n * The call sequences to _friendlyFileLoadError and _friendlyError are like this:\\n * _friendlyFileLoadError\\n *   report\\n *\\n * _friendlyError\\n *   report\\n *\\n * report() is the main function that prints directly to console with the output\\n * of the error helper message. Note: friendlyWelcome() also prints to console directly.\\n */\\nimport p5 from './main';\\nimport * as constants from './constants';\\nimport { translator } from './internationalization';\\n\\n// p5.js blue, p5.js orange, auto dark green; fallback p5.js darkened magenta\\n// See testColors below for all the color codes and names\\nconst typeColors = ['#2D7BB6', '#EE9900', '#4DB200', '#C83C00'];\\n\\nif (typeof IS_MINIFIED !== 'undefined') {\\n  p5._validateParameters = p5._friendlyFileLoadError = p5._friendlyError = () => {};\\n} else {\\n  let doFriendlyWelcome = false; // TEMP until we get it all working LM\\n  // for parameter validation\\n  const dataDoc = require('../../docs/reference/data.json');\\n  const arrDoc = JSON.parse(JSON.stringify(dataDoc));\\n\\n  // -- Borrowed from jQuery 1.11.3 --\\n  const class2type = {};\\n  const toString = class2type.toString;\\n  const names = [\\n    'Boolean',\\n    'Number',\\n    'String',\\n    'Function',\\n    'Array',\\n    'Date',\\n    'RegExp',\\n    'Object',\\n    'Error'\\n  ];\\n  for (let n = 0; n < names.length; n++) {\\n    class2type[`[object ${names[n]}]`] = names[n].toLowerCase();\\n  }\\n  const getType = obj => {\\n    if (obj == null) {\\n      return `${obj}`;\\n    }\\n    return typeof obj === 'object' || typeof obj === 'function'\\n      ? class2type[toString.call(obj)] || 'object'\\n      : typeof obj;\\n  };\\n\\n  // -- End borrow --\\n\\n  const friendlyWelcome = () => {\\n    // p5.js brand - magenta: #ED225D\\n    //const astrixBgColor = 'transparent';\\n    //const astrixTxtColor = '#ED225D';\\n    //const welcomeBgColor = '#ED225D';\\n    //const welcomeTextColor = 'white';\\n    const welcomeMessage = translator('fes.pre', {\\n      message: translator('fes.welcome')\\n    });\\n    console.log(\\n      '    _ \\\\n' +\\n        ' /\\\\\\\\| |/\\\\\\\\ \\\\n' +\\n        \\\" \\\\\\\\ ` ' /  \\\\n\\\" +\\n        ' / , . \\\\\\\\  \\\\n' +\\n        ' \\\\\\\\/|_|\\\\\\\\/ ' +\\n        '\\\\n\\\\n' +\\n        welcomeMessage\\n    );\\n  };\\n\\n  /**\\n   * Prints out a fancy, colorful message to the console log\\n   *\\n   * @method report\\n   * @private\\n   * @param  {String}               message the words to be said\\n   * @param  {String}               func    the name of the function to link\\n   * @param  {Number|String} color   CSS color string or error type\\n   *\\n   * @return console logs\\n   */\\n  const report = (message, func, color) => {\\n    if (doFriendlyWelcome) {\\n      friendlyWelcome();\\n      doFriendlyWelcome = false;\\n    }\\n    if ('undefined' === getType(color)) {\\n      color = '#B40033'; // dark magenta\\n    } else if (getType(color) === 'number') {\\n      // Type to color\\n      color = typeColors[color];\\n    }\\n    if (func.substring(0, 4) === 'load') {\\n      console.log(translator('fes.pre', { message }));\\n    } else {\\n      console.log(\\n        translator('fes.pre', {\\n          message: `${message} (http://p5js.org/reference/#p5/${func})`\\n        })\\n      );\\n    }\\n  };\\n\\n  // mapping used by `_friendlyFileLoadError`\\n  const fileLoadErrorCases = (num, filePath) => {\\n    const suggestion = translator('fes.fileLoadError.suggestion', {\\n      filePath,\\n      link: 'https://github.com/processing/p5.js/wiki/Local-server'\\n    });\\n    switch (num) {\\n      case 0:\\n        return {\\n          message: translator('fes.fileLoadError.image', {\\n            suggestion\\n          }),\\n          method: 'loadImage'\\n        };\\n      case 1:\\n        return {\\n          message: translator('fes.fileLoadError.xml', {\\n            suggestion\\n          }),\\n          method: 'loadXML'\\n        };\\n      case 2:\\n        return {\\n          message: translator('fes.fileLoadError.table', {\\n            suggestion\\n          }),\\n          method: 'loadTable'\\n        };\\n      case 3:\\n        return {\\n          message: translator('fes.fileLoadError.strings', {\\n            suggestion\\n          }),\\n          method: 'loadStrings'\\n        };\\n      case 4:\\n        return {\\n          message: translator('fes.fileLoadError.font', {\\n            suggestion\\n          }),\\n          method: 'loadFont'\\n        };\\n      case 5:\\n        return {\\n          message: translator('fes.fileLoadError.json', {\\n            suggestion\\n          }),\\n          method: 'loadJSON'\\n        };\\n      case 6:\\n        return {\\n          message: translator('fes.fileLoadError.bytes', {\\n            suggestion\\n          }),\\n          method: 'loadBytes'\\n        };\\n      case 7:\\n        return {\\n          message: translator('fes.fileLoadError.large'),\\n          method: 'loadX'\\n        };\\n      case 8:\\n        return {\\n          message: translator('fes.fileLoadError.gif'),\\n          method: 'loadImage'\\n        };\\n    }\\n  };\\n\\n  /**\\n   * This is called internally if there is a error during file loading.\\n   *\\n   * @method _friendlyFileLoadError\\n   * @private\\n   * @param  {Number} errorType\\n   * @param  {String} filePath\\n   */\\n  p5._friendlyFileLoadError = function(errorType, filePath) {\\n    const { message, method } = fileLoadErrorCases(errorType, filePath);\\n    report(message, method, 3);\\n  };\\n\\n  /**\\n   * This is a generic method that can be called from anywhere in the p5\\n   * library to alert users to a common error.\\n   *\\n   * @method _friendlyError\\n   * @private\\n   * @param  {Number} message message to be printed\\n   * @param  {String} method name of method\\n   */\\n  p5._friendlyError = function(message, method) {\\n    report(message, method);\\n  };\\n\\n  /**\\n   * This is called internally if there is a error with autoplay.\\n   *\\n   * @method _friendlyAutoplayError\\n   * @private\\n   */\\n  p5._friendlyAutoplayError = function(src) {\\n    const message = translator('fes.autoplay', {\\n      src,\\n      link: 'https://developer.mozilla.org/docs/Web/Media/Autoplay_guide'\\n    });\\n    console.log(translator('fes.pre', { message }));\\n  };\\n\\n  const docCache = {};\\n  const builtinTypes = [\\n    'null',\\n    'number',\\n    'string',\\n    'boolean',\\n    'constant',\\n    'function',\\n    'any',\\n    'integer'\\n  ];\\n\\n  // validateParameters() helper functions:\\n  // lookupParamDoc() for querying data.json\\n  const lookupParamDoc = func => {\\n    // look for the docs in the `data.json` datastructure\\n\\n    const ichDot = func.lastIndexOf('.');\\n    const funcName = func.substr(ichDot + 1);\\n    const funcClass = func.substr(0, ichDot) || 'p5';\\n\\n    let queryResult;\\n    const classitems = arrDoc.classitems;\\n\\n    for (const x of classitems) {\\n      if (x.name === funcName && x.class === funcClass) {\\n        queryResult = x;\\n        break;\\n      }\\n    }\\n\\n    // different JSON structure for funct with multi-format\\n    const overloads = [];\\n    if (queryResult.hasOwnProperty('overloads')) {\\n      // add all the overloads\\n      for (let i = 0; i < queryResult.overloads.length; i++) {\\n        overloads.push({ formats: queryResult.overloads[i].params });\\n      }\\n    } else {\\n      // no overloads, just add the main method definition\\n      overloads.push({ formats: queryResult.params || [] });\\n    }\\n\\n    // parse the parameter types for each overload\\n    const mapConstants = {};\\n    let maxParams = 0;\\n    overloads.forEach(overload => {\\n      const formats = overload.formats;\\n\\n      // keep a record of the maximum number of arguments\\n      // this method requires.\\n      if (maxParams < formats.length) {\\n        maxParams = formats.length;\\n      }\\n\\n      // calculate the minimum number of arguments\\n      // this overload requires.\\n      let minParams = formats.length;\\n      while (minParams > 0 && formats[minParams - 1].optional) {\\n        minParams--;\\n      }\\n      overload.minParams = minParams;\\n\\n      // loop through each parameter position, and parse its types\\n      formats.forEach(format => {\\n        // split this parameter's types\\n        format.types = format.type.split('|').map(function ct(type) {\\n          // array\\n          if (type.substr(type.length - 2, 2) === '[]') {\\n            return {\\n              name: type,\\n              array: ct(type.substr(0, type.length - 2))\\n            };\\n          }\\n\\n          let lowerType = type.toLowerCase();\\n\\n          // contant\\n          if (lowerType === 'constant') {\\n            let constant;\\n            if (mapConstants.hasOwnProperty(format.name)) {\\n              constant = mapConstants[format.name];\\n            } else {\\n              // parse possible constant values from description\\n              const myRe = /either\\\\s+(?:[A-Z0-9_]+\\\\s*,?\\\\s*(?:or)?\\\\s*)+/g;\\n              const values = {};\\n              const names = [];\\n\\n              constant = mapConstants[format.name] = {\\n                values,\\n                names\\n              };\\n\\n              const myArray = myRe.exec(format.description);\\n              if (func === 'endShape' && format.name === 'mode') {\\n                values[constants.CLOSE] = true;\\n                names.push('CLOSE');\\n              } else {\\n                const match = myArray[0];\\n                const reConst = /[A-Z0-9_]+/g;\\n                let matchConst;\\n                while ((matchConst = reConst.exec(match)) !== null) {\\n                  const name = matchConst[0];\\n                  if (constants.hasOwnProperty(name)) {\\n                    values[constants[name]] = true;\\n                    names.push(name);\\n                  }\\n                }\\n              }\\n            }\\n            return {\\n              name: type,\\n              builtin: lowerType,\\n              names: constant.names,\\n              values: constant.values\\n            };\\n          }\\n\\n          // function\\n          if (lowerType.substr(0, 'function'.length) === 'function') {\\n            lowerType = 'function';\\n          }\\n          // builtin\\n          if (builtinTypes.includes(lowerType)) {\\n            return { name: type, builtin: lowerType };\\n          }\\n\\n          // find type's prototype\\n          let t = window;\\n          const typeParts = type.split('.');\\n\\n          // special-case 'p5' since it may be non-global\\n          if (typeParts[0] === 'p5') {\\n            t = p5;\\n            typeParts.shift();\\n          }\\n\\n          typeParts.forEach(p => {\\n            t = t && t[p];\\n          });\\n          if (t) {\\n            return { name: type, prototype: t };\\n          }\\n\\n          return { name: type, type: lowerType };\\n        });\\n      });\\n    });\\n    return {\\n      overloads,\\n      maxParams\\n    };\\n  };\\n\\n  const isNumber = param => {\\n    switch (typeof param) {\\n      case 'number':\\n        return true;\\n      case 'string':\\n        return !isNaN(param);\\n      default:\\n        return false;\\n    }\\n  };\\n\\n  const testParamType = (param, type) => {\\n    const isArray = param instanceof Array;\\n    let matches = true;\\n    if (type.array && isArray) {\\n      for (let i = 0; i < param.length; i++) {\\n        const error = testParamType(param[i], type.array);\\n        if (error) return error / 2; // half error for elements\\n      }\\n    } else if (type.prototype) {\\n      matches = param instanceof type.prototype;\\n    } else if (type.builtin) {\\n      switch (type.builtin) {\\n        case 'number':\\n          matches = isNumber(param);\\n          break;\\n        case 'integer':\\n          matches = isNumber(param) && Number(param) === Math.floor(param);\\n          break;\\n        case 'boolean':\\n        case 'any':\\n          matches = true;\\n          break;\\n        case 'array':\\n          matches = isArray;\\n          break;\\n        case 'string':\\n          matches = /*typeof param === 'number' ||*/ typeof param === 'string';\\n          break;\\n        case 'constant':\\n          matches = type.values.hasOwnProperty(param);\\n          break;\\n        case 'function':\\n          matches = param instanceof Function;\\n          break;\\n        case 'null':\\n          matches = param === null;\\n          break;\\n      }\\n    } else {\\n      matches = typeof param === type.t;\\n    }\\n    return matches ? 0 : 1;\\n  };\\n\\n  // testType() for non-object type parameter validation\\n  const testParamTypes = (param, types) => {\\n    let minScore = 9999;\\n    for (let i = 0; minScore > 0 && i < types.length; i++) {\\n      const score = testParamType(param, types[i]);\\n      if (minScore > score) minScore = score;\\n    }\\n    return minScore;\\n  };\\n\\n  // generate a score (higher is worse) for applying these args to\\n  // this overload.\\n  const scoreOverload = (args, argCount, overload, minScore) => {\\n    let score = 0;\\n    const formats = overload.formats;\\n    const minParams = overload.minParams;\\n\\n    // check for too few/many args\\n    // the score is double number of extra/missing args\\n    if (argCount < minParams) {\\n      score = (minParams - argCount) * 2;\\n    } else if (argCount > formats.length) {\\n      score = (argCount - formats.length) * 2;\\n    }\\n\\n    // loop through the formats, adding up the error score for each arg.\\n    // quit early if the score gets higher than the previous best overload.\\n    for (let p = 0; score <= minScore && p < formats.length; p++) {\\n      const arg = args[p];\\n      const format = formats[p];\\n      // '== null' checks for 'null' and typeof 'undefined'\\n      if (arg == null) {\\n        // handle non-optional and non-trailing undefined args\\n        if (!format.optional || p < minParams || p < argCount) {\\n          score += 1;\\n        }\\n      } else {\\n        score += testParamTypes(arg, format.types);\\n      }\\n    }\\n    return score;\\n  };\\n\\n  // gets a list of errors for this overload\\n  const getOverloadErrors = (args, argCount, overload) => {\\n    const formats = overload.formats;\\n    const minParams = overload.minParams;\\n\\n    // check for too few/many args\\n    if (argCount < minParams) {\\n      return [\\n        {\\n          type: 'TOO_FEW_ARGUMENTS',\\n          argCount,\\n          minParams\\n        }\\n      ];\\n    } else if (argCount > formats.length) {\\n      return [\\n        {\\n          type: 'TOO_MANY_ARGUMENTS',\\n          argCount,\\n          maxParams: formats.length\\n        }\\n      ];\\n    }\\n\\n    const errorArray = [];\\n    for (let p = 0; p < formats.length; p++) {\\n      const arg = args[p];\\n      const format = formats[p];\\n      // '== null' checks for 'null' and typeof 'undefined'\\n      if (arg == null) {\\n        // handle non-optional and non-trailing undefined args\\n        if (!format.optional || p < minParams || p < argCount) {\\n          errorArray.push({\\n            type: 'EMPTY_VAR',\\n            position: p,\\n            format\\n          });\\n        }\\n      } else if (testParamTypes(arg, format.types) > 0) {\\n        errorArray.push({\\n          type: 'WRONG_TYPE',\\n          position: p,\\n          format,\\n          arg\\n        });\\n      }\\n    }\\n\\n    return errorArray;\\n  };\\n\\n  // a custom error type, used by the mocha\\n  // tests when expecting validation errors\\n  p5.ValidationError = (name => {\\n    class err extends Error {\\n      constructor(message, func) {\\n        super();\\n        this.message = message;\\n        this.func = func;\\n        if ('captureStackTrace' in Error) Error.captureStackTrace(this, err);\\n        else this.stack = new Error().stack;\\n      }\\n    }\\n\\n    err.prototype.name = name;\\n    return err;\\n  })('ValidationError');\\n\\n  // function for generating console.log() msg\\n  p5._friendlyParamError = function(errorObj, func) {\\n    let message;\\n\\n    function formatType() {\\n      const format = errorObj.format;\\n      return format.types\\n        .map(type => (type.names ? type.names.join('|') : type.name))\\n        .join('|');\\n    }\\n\\n    switch (errorObj.type) {\\n      case 'EMPTY_VAR': {\\n        message = `${func}() was expecting ${formatType()} for parameter #${\\n          errorObj.position\\n        } (zero-based index), received an empty variable instead. If not intentional, this is often a problem with scope: [https://p5js.org/examples/data-variable-scope.html]`;\\n        break;\\n      }\\n      case 'WRONG_TYPE': {\\n        const arg = errorObj.arg;\\n        const argType =\\n          arg instanceof Array\\n            ? 'array'\\n            : arg === null ? 'null' : arg.name || typeof arg;\\n        message = `${func}() was expecting ${formatType()} for parameter #${\\n          errorObj.position\\n        } (zero-based index), received ${argType} instead`;\\n        break;\\n      }\\n      case 'TOO_FEW_ARGUMENTS': {\\n        message = `${func}() was expecting at least ${\\n          errorObj.minParams\\n        } arguments, but received only ${errorObj.argCount}`;\\n        break;\\n      }\\n      case 'TOO_MANY_ARGUMENTS': {\\n        message = `${func}() was expecting no more than ${\\n          errorObj.maxParams\\n        } arguments, but received ${errorObj.argCount}`;\\n        break;\\n      }\\n    }\\n\\n    if (message) {\\n      if (p5._throwValidationErrors) {\\n        throw new p5.ValidationError(message);\\n      }\\n\\n      try {\\n        const re = /Function\\\\.validateParameters.*[\\\\r\\\\n].*[\\\\r\\\\n].*\\\\(([^)]*)/;\\n        const location = re.exec(new Error().stack)[1];\\n        if (location) {\\n          message += ` at ${location}`;\\n        }\\n      } catch (err) {}\\n\\n      report(`${message}.`, func, 3);\\n    }\\n  };\\n\\n  /**\\n   * Validates parameters\\n   * param  {String}               func    the name of the function\\n   * param  {Array}                args    user input arguments\\n   *\\n   * example:\\n   *  const a;\\n   *  ellipse(10,10,a,5);\\n   * console ouput:\\n   *  \\\"It looks like ellipse received an empty variable in spot #2.\\\"\\n   *\\n   * example:\\n   *  ellipse(10,\\\"foo\\\",5,5);\\n   * console output:\\n   *  \\\"ellipse was expecting a number for parameter #1,\\n   *           received \\\"foo\\\" instead.\\\"\\n   */\\n  p5._validateParameters = function validateParameters(func, args) {\\n    if (p5.disableFriendlyErrors) {\\n      return; // skip FES\\n    }\\n\\n    // lookup the docs in the 'data.json' file\\n    const docs = docCache[func] || (docCache[func] = lookupParamDoc(func));\\n    const overloads = docs.overloads;\\n\\n    // ignore any trailing `undefined` arguments\\n    let argCount = args.length;\\n    // '== null' checks for 'null' and typeof 'undefined'\\n    while (argCount > 0 && args[argCount - 1] == null) argCount--;\\n\\n    // find the overload with the best score\\n    let minScore = 99999;\\n    let minOverload;\\n    for (let i = 0; i < overloads.length; i++) {\\n      const score = scoreOverload(args, argCount, overloads[i], minScore);\\n      if (score === 0) {\\n        return; // done!\\n      } else if (minScore > score) {\\n        // this score is better that what we have so far...\\n        minScore = score;\\n        minOverload = i;\\n      }\\n    }\\n\\n    // this should _always_ be true here...\\n    if (minScore > 0) {\\n      // get the errors for the best overload\\n      const errorArray = getOverloadErrors(\\n        args,\\n        argCount,\\n        overloads[minOverload]\\n      );\\n\\n      // generate err msg\\n      for (let n = 0; n < errorArray.length; n++) {\\n        p5._friendlyParamError(errorArray[n], func);\\n      }\\n    }\\n  };\\n\\n  /**\\n   * Prints out all the colors in the color pallete with white text.\\n   * For color blindness testing.\\n   */\\n  /* function testColors() {\\n    const str = 'A box of biscuits, a box of mixed biscuits and a biscuit mixer';\\n    report(str, 'print', '#ED225D'); // p5.js magenta\\n    report(str, 'print', '#2D7BB6'); // p5.js blue\\n    report(str, 'print', '#EE9900'); // p5.js orange\\n    report(str, 'print', '#A67F59'); // p5.js light brown\\n    report(str, 'print', '#704F21'); // p5.js gold\\n    report(str, 'print', '#1CC581'); // auto cyan\\n    report(str, 'print', '#FF6625'); // auto orange\\n    report(str, 'print', '#79EB22'); // auto green\\n    report(str, 'print', '#B40033'); // p5.js darkened magenta\\n    report(str, 'print', '#084B7F'); // p5.js darkened blue\\n    report(str, 'print', '#945F00'); // p5.js darkened orange\\n    report(str, 'print', '#6B441D'); // p5.js darkened brown\\n    report(str, 'print', '#2E1B00'); // p5.js darkened gold\\n    report(str, 'print', '#008851'); // auto dark cyan\\n    report(str, 'print', '#C83C00'); // auto dark orange\\n    report(str, 'print', '#4DB200'); // auto dark green\\n  } */\\n\\n  p5.prototype._validateParameters = p5.validateParameters;\\n}\\n\\n// This is a lazily-defined list of p5 symbols that may be\\n// misused by beginners at top-level code, outside of setup/draw. We'd like\\n// to detect these errors and help the user by suggesting they move them\\n// into setup/draw.\\n//\\n// For more details, see https://github.com/processing/p5.js/issues/1121.\\nlet misusedAtTopLevelCode = null;\\nconst FAQ_URL =\\n  'https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup';\\n\\nconst defineMisusedAtTopLevelCode = () => {\\n  const uniqueNamesFound = {};\\n\\n  const getSymbols = obj =>\\n    Object.getOwnPropertyNames(obj)\\n      .filter(name => {\\n        if (name[0] === '_') {\\n          return false;\\n        }\\n        if (name in uniqueNamesFound) {\\n          return false;\\n        }\\n\\n        uniqueNamesFound[name] = true;\\n\\n        return true;\\n      })\\n      .map(name => {\\n        let type;\\n\\n        if (typeof obj[name] === 'function') {\\n          type = 'function';\\n        } else if (name === name.toUpperCase()) {\\n          type = 'constant';\\n        } else {\\n          type = 'variable';\\n        }\\n\\n        return { name, type };\\n      });\\n\\n  misusedAtTopLevelCode = [].concat(\\n    getSymbols(p5.prototype),\\n    // At present, p5 only adds its constants to p5.prototype during\\n    // construction, which may not have happened at the time a\\n    // ReferenceError is thrown, so we'll manually add them to our list.\\n    getSymbols(require('./constants'))\\n  );\\n\\n  // This will ultimately ensure that we report the most specific error\\n  // possible to the user, e.g. advising them about HALF_PI instead of PI\\n  // when their code misuses the former.\\n  misusedAtTopLevelCode.sort((a, b) => b.name.length - a.name.length);\\n};\\n\\nconst helpForMisusedAtTopLevelCode = (e, log) => {\\n  if (!log) {\\n    log = console.log.bind(console);\\n  }\\n\\n  if (!misusedAtTopLevelCode) {\\n    defineMisusedAtTopLevelCode();\\n  }\\n\\n  // If we find that we're logging lots of false positives, we can\\n  // uncomment the following code to avoid displaying anything if the\\n  // user's code isn't likely to be using p5's global mode. (Note that\\n  // setup/draw are more likely to be defined due to JS function hoisting.)\\n  //\\n  //if (!('setup' in window || 'draw' in window)) {\\n  //  return;\\n  //}\\n\\n  misusedAtTopLevelCode.some(symbol => {\\n    // Note that while just checking for the occurrence of the\\n    // symbol name in the error message could result in false positives,\\n    // a more rigorous test is difficult because different browsers\\n    // log different messages, and the format of those messages may\\n    // change over time.\\n    //\\n    // For example, if the user uses 'PI' in their code, it may result\\n    // in any one of the following messages:\\n    //\\n    //   * 'PI' is undefined                           (Microsoft Edge)\\n    //   * ReferenceError: PI is undefined             (Firefox)\\n    //   * Uncaught ReferenceError: PI is not defined  (Chrome)\\n\\n    if (e.message && e.message.match(`\\\\\\\\W?${symbol.name}\\\\\\\\W`) !== null) {\\n      const symbolName =\\n        symbol.type === 'function' ? `${symbol.name}()` : symbol.name;\\n      log(\\n        translator('fes.misusedTopLevel', {\\n          symbolName,\\n          symbolType: symbol.type,\\n          link: FAQ_URL\\n        })\\n      );\\n      return true;\\n    }\\n  });\\n};\\n\\n// Exposing this primarily for unit testing.\\np5.prototype._helpForMisusedAtTopLevelCode = helpForMisusedAtTopLevelCode;\\n\\nif (document.readyState !== 'complete') {\\n  window.addEventListener('error', helpForMisusedAtTopLevelCode, false);\\n\\n  // Our job is only to catch ReferenceErrors that are thrown when\\n  // global (non-instance mode) p5 APIs are used at the top-level\\n  // scope of a file, so we'll unbind our error listener now to make\\n  // sure we don't log false positives later.\\n  window.addEventListener('load', () => {\\n    window.removeEventListener('error', helpForMisusedAtTopLevelCode, false);\\n  });\\n}\\n\\nexport default p5;\\n\\n[end of error_helpers.js]\\n[start of friendly_error_system.md]\\n# p5.js Friendly Error System (FES)\\n\\n## Overview\\n\\nThe Friendly Error System (FES) is a system designed to help new programmers with common user errors as they get started learning. It catches common beginning errors and provides clear language and links to help a user resolve the error. FES is only applied to functions that are ones a user might encounter when they are just starting. An exception is made for particular common gotchas such as trying to load files without running a server, or calling loadImage() with a URL, etc.\\n\\nThe goal is to create accessible error messages to supplement the often cryptic console errors. For example, Javascript has no support for type checking as default making errors in parameter entry was harder to detect for new Javascript developers.\\n\\nMessages generated by FES are written in natural language, linked to documentation, and assume a beginner level. The errors are triggered in multiple files through out p5.js, but most of the work and error writing happens in `src/core/error_helpers.js`.  \\n\\nBy default, FES is enabled for `p5.js`, whereas completely disabled in `p5.min.js`. It is possible to disable FES by setting `p5.disableFriendlyErrors = true;`.\\n\\nSo far FES is able to detect and print messages for four kinds of errors: \\n\\n1. `validateParameters()` checks a function\\u2019s input parameters based on inline documentations\\n\\n2. `friendlyFileLoadError()` catches file loading errors. These two kinds of error checking have been integrated into an existing (selected set of) p5 functions, but developers can add them to more p5 functions, or their own libraries, by calling `p5._validateParameters()`\\n\\n3. `friendlyError()` can be called by any function to offer a helpful error message\\n\\n4. `helpForMisusedAtTopLevelCode()` is called on window load to check for use of p5.js functions outside of setup() or draw()\\n\\nPlease also see inline notes in [src/core/error_helper.js](https://github.com/processing/p5.js/blob/master/src/core/error_helpers.js) for more technical information.\\n\\n### `core/error_helpers/friendlyFileLoadError()`: \\n* This function generates and displays friendly error messages if a file fails to load correctly. It also checks if the size of a file might be too large to load and produces a warning. \\n* This can be called through : `p5._friendlyFileLoadError(ERROR_TYPE, FILE_PATH)`.\\n* file loading error example:\\n````javascript\\n/// missing font file\\nlet myFont;\\nfunction preload() {\\n  myFont = loadFont('assets/OpenSans-Regular.ttf');\\n};\\nfunction setup() {\\n  fill('#ED225D');\\n  textFont(myFont);\\n  textSize(36);\\n  text('p5*js', 10, 50);\\n};\\nfunction draw() {};\\n/// FES will generate the following message in the console:\\n/// > p5.js says: It looks like there was a problem loading your font. Try checking if the file path [assets/OpenSans-Regular.ttf] is correct, hosting the font online, or running a local server.[https://github.com/processing/p5.js/wiki/Local-server]\\n````\\n* Currently version contains templates for generating error messages for `image`, `XML`, `table`, `text`, `json` and `font` files.\\n* Implemented to `image/loading_displaying/loadImage()`, `io/files/loadFont()`, `io/files/loadTable()`, `io/files/loadJSON()`, `io/files/loadStrings()`, `io/files/loadXML()`, `io/files/loadBytes()`.\\n* Error while loading a file due to its large size is implemented to all loadX methods.\\n\\n### `core/error_helpers/validateParameters()`:\\n* This function runs parameter validation by matching the input parameters with information from `docs/reference/data.json`, which is created from the function's inline documentation. It checks that a function call contains the correct number and the correct type of parameters. \\n* missing parameter example:\\n````javascript\\narc(1, 1, 10.5, 10);\\n/// FES will generate the following message in the console:\\n/// > p5.js says: It looks like arc() received an empty variable in spot #4 (zero-based index). If not intentional, this is often a problem with scope: [https://p5js.org/examples/data-variable-scope.html]. [http://p5js.org/reference/#p5/arc]\\n/// > p5.js says: It looks like arc() received an empty variable in spot #5 (zero-based index). If not intentional, this is often a problem with scope: [https://p5js.org/examples/data-variable-scope.html]. [http://p5js.org/reference/#p5/arc]\\n\\n````\\n* wrong type example:\\n````javascript\\narc('1', 1, 10.5, 10, 0, Math.PI, 'pie');\\n/// FES will generate the following message in the console:\\n/// > p5.js says: arc() was expecting Number for parameter #0 (zero-based index), received string instead. [http://p5js.org/reference/#p5/arc]\\n````\\n* This can be called through: `p5._validateParameters(FUNCT_NAME, ARGUMENTS)` \\nor, `p5.prototype._validateParameters(FUNCT_NAME, ARGUMENTS)` inside the function that requires parameter validation. It is recommended to use static version, `p5._validateParameters` for general purposes. `p5.prototype._validateParameters(FUNCT_NAME, ARGUMENTS)` mainly remained for debugging and unit testing purposes.\\n* Implemented to functions in `color/creating_reading`, `core/2d_primitives`, `core/curves`, and `utilities/string_functions`. \\n\\n## Additional Features\\n* The FES welcomes the developer to p5 and the friendly debugger. \\n* The FES works in the IDE and the web editor. \\n\\n## Notes for Developers\\n* When creating p5.js Objects: any p5.js objects that will be used for parameters will need to assign value for `name` parameter (name of the object) within the class declaration. e.g.: \\n````javascript \\np5.newObject = function(parameter) {\\n   this.parameter = 'some parameter';\\n   this.name = 'p5.newObject';\\n};\\n````\\n* Inline documentation: allowed parameter types are `Boolean`, `Number`, `String`, and name of the object (see the above bullet point). Use `Array` for any types of Array parameters. If needed, explain what kind of the specific types of array parameter are allowed (e.g. `Number[]`, `String[]`) in the description section.\\n* Currently supported class types (have their `name` parameter): `p5.Color`, `p5.Element`, `p5.Graphics`, `p5.Renderer`, `p5.Renderer2D`, `p5.Image`, `p5.Table`, `p5.TableRow`, `p5.XML`, `p5.Vector`, `p5.Font`, `p5.Geometry`, `p5.Matrix`, `p5.RendererGL`.\\n\\n## Disable the FES\\n\\nBy default, FES is enabled for p5.js, and disabled in p5.min.js to prevent FES functions slowing down the process. The error checking system can significantly slow down your code (up to ~10x in some cases). See the [friendly error performance test](https://github.com/processing/p5.js-website/blob/master/dist/assets/learn/performance/code/friendly-error-system/).\\n\\nYou can disable this with one line of code at the top of your sketch:\\n\\n```javascript\\np5.disableFriendlyErrors = true; // disables FES\\n\\nfunction setup() {\\n  // Do setup stuff\\n}\\n\\nfunction draw() {\\n  // Do drawing stuff\\n}\\n```\\n\\nNote that this will disable the parts of the FES that cause performance slowdown (like argument checking). Friendly errors that have no performance cost (like giving an descriptive error if a file load fails, or warning you if you try to override p5.js functions in the global space), will remain in place. \\n\\n## Known Limitations\\n* The friendly error system slows the program down, so there is an option to turn it off via setting `p5.disableFriendlyErrors = true;`. In addition, the friendly error system is omitted by default in the minified (`p5.min.js`) version.\\n* FES may still result in false negative cases. These are usually caused by the mismatch between designs of the  functions (e.g. drawing functions those are originally designed to be used interchangeably in both 2D and 3D settings) with actual usage cases. For example, drawing a 3D line with \\n```javascript \\nconst x3; // undefined\\nline(0, 0, 100, 100, x3, Math.PI);\\n```\\n will escape FES, because there is an acceptable parameter pattern (`Number`, `Number`, `Number`, `Number`) in `line()`'s inline documentation for drawing in 2D setting. This also means the current version of FES doesn't check for the environmental variables such as `_renderer.isP3D`.\\n * FES is only able to detect global variables overwritten when declared using `const` or `var`. If `let` is used, they go undetected. This is not currently solvable due to the way `let` instantiates variables.\\n\\n## In The Works\\n* Identify more common error types and generalize with FES (e.g. `bezierVertex()`, `quadraticVertex()` - required object not initiated; checking Number parameters positive for `nf()` `nfc()` `nfp()` `nfs()`)\\n\\n## Thoughts for the Future\\n* re-introduce color coding for the Web Editor.\\n* More unit testings.\\n* More intuitive and narrowed down output messages.\\n* Having a Spanish translation available.\\n* All the colors are checked for being color blind friendly.\\n* More elaborate ascii is always welcome! \\n* Global Error catching. It would be very helpful to catch the errors the browser is throwing to the console, so we can match them up with friendly comments. \\n\\n```javascript\\n// this snippet wraps window.console methods with a new function to modify their functionality\\n// it is not currently implemented, but could be to give nicer formatted error messages\\nconst original = window.console;\\nconst original_functions  = {\\n  log: original.log,\\n  warn:  original.warn,\\n  error: original.error\\n}\\n\\n[\\\"log\\\", \\\"warn\\\", \\\"error\\\"].forEach(function(func){\\nwindow.console[func] = function(msg) {\\n//do something with the msg caught by the wrapper function, then call the original function\\noriginal_functions[func].apply(original, arguments)\\n};\\n});\\n```\\n\\n[end of friendly_error_system.md]\\n[start of error_helpers.js]\\nsuite('Error Helpers', function() {\\n  var myp5;\\n\\n  setup(function(done) {\\n    new p5(function(p) {\\n      p.setup = function() {\\n        myp5 = p;\\n        done();\\n      };\\n    });\\n  });\\n\\n  teardown(function() {\\n    myp5.remove();\\n  });\\n\\n  suite('friendly error logger', function() {\\n    test('basic', function() {\\n      assert.doesNotThrow(\\n        function() {\\n          p5._friendlyError('basic');\\n        },\\n        Error,\\n        'got unwanted exception'\\n      );\\n    });\\n  });\\n\\n  // unit tests for validateParameters\\n  suite('validateParameters: Numbers + optional Constant', function() {\\n    test('arc(): no friendly-err-msg', function() {\\n      assert.doesNotThrow(\\n        function() {\\n          p5._validateParameters('arc', [1, 1, 10.5, 10, 0, Math.PI, 'pie']);\\n        },\\n        Error,\\n        'got unwanted exception'\\n      );\\n    });\\n    test('arc(): missing param #4, #5', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('arc', [1, 1, 10.5, 10]);\\n      });\\n    });\\n    test('arc(): missing param #0', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('arc', [\\n          undefined,\\n          1,\\n          10.5,\\n          10,\\n          0,\\n          Math.PI,\\n          'pie'\\n        ]);\\n      });\\n    });\\n    test('arc(): missing param #4', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('arc', [\\n          1,\\n          1,\\n          10.5,\\n          10,\\n          undefined,\\n          Math.PI,\\n          'pie'\\n        ]);\\n      });\\n    });\\n    test('arc(): missing param #5', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('arc', [1, 1, 10.5, 10, 0, undefined, 'pie']);\\n      });\\n    });\\n    test('arc(): missing param #6, no friendly-err-msg', function() {\\n      assert.doesNotThrow(\\n        function() {\\n          p5._validateParameters('arc', [1, 1, 10.5, 10, 0, Math.PI]);\\n        },\\n        Error,\\n        'got unwanted exception'\\n      );\\n    });\\n    test('arc(): wrong param type at #0', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('arc', ['a', 1, 10.5, 10, 0, Math.PI, 'pie']);\\n      });\\n    });\\n  });\\n\\n  suite('validateParameters: Numbers + optional Constant', function() {\\n    test('rect(): no friendly-err-msg', function() {\\n      assert.doesNotThrow(\\n        function() {\\n          p5._validateParameters('rect', [1, 1, 10.5, 10]);\\n        },\\n        Error,\\n        'got unwanted exception'\\n      );\\n    });\\n    test('rect(): wrong param type at #0', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('rect', ['a', 1, 10.5, 10, 0, Math.PI]);\\n      });\\n    });\\n  });\\n\\n  suite(\\n    'validateParameters: class, multi-types + optional Numbers',\\n    function() {\\n      test('ambientLight(): no friendly-err-msg', function() {\\n        assert.doesNotThrow(\\n          function() {\\n            var c = myp5.color(255, 204, 0);\\n            p5._validateParameters('ambientLight', [c]);\\n          },\\n          Error,\\n          'got unwanted exception'\\n        );\\n      });\\n    }\\n  );\\n\\n  suite('validateParameters: multi-format', function() {\\n    test('color(): no friendly-err-msg', function() {\\n      assert.doesNotThrow(\\n        function() {\\n          p5._validateParameters('color', [65]);\\n        },\\n        Error,\\n        'got unwanted exception'\\n      );\\n    });\\n    test('color(): no friendly-err-msg', function() {\\n      assert.doesNotThrow(\\n        function() {\\n          p5._validateParameters('color', [65, 0.5]);\\n        },\\n        Error,\\n        'got unwanted exception'\\n      );\\n    });\\n    test('color(): no friendly-err-msg', function() {\\n      assert.doesNotThrow(\\n        function() {\\n          p5._validateParameters('color', [255, 204, 0]);\\n        },\\n        Error,\\n        'got unwanted exception'\\n      );\\n    });\\n    test('color(): optional parameter, incorrect type', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('color', [0, 0, 0, 'A']);\\n      });\\n    });\\n    test('color(): extra parameter', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('color', [[0, 0, 0], 0]);\\n      });\\n    });\\n    test('color(): incorrect element type', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('color', [['A', 'B', 'C']]);\\n      });\\n    });\\n    test('color(): incorrect parameter count', function() {\\n      assert.validationError(function() {\\n        p5._validateParameters('color', ['A', 'A', 0, 0, 0, 0, 0, 0]);\\n      });\\n    });\\n  });\\n\\n  suite('helpForMisusedAtTopLevelCode', function() {\\n    var help = function(msg) {\\n      var log = [];\\n      var logger = function(msg) {\\n        log.push(msg);\\n      };\\n\\n      p5.prototype._helpForMisusedAtTopLevelCode({ message: msg }, logger);\\n      assert.equal(log.length, 1);\\n      return log[0];\\n    };\\n\\n    test('help for constants is shown', function() {\\n      assert.match(\\n        help(\\\"'HALF_PI' is undefined\\\"),\\n        /Did you just try to use p5\\\\.js's HALF_PI constant\\\\?/\\n      );\\n    });\\n\\n    test('help for functions is shown', function() {\\n      assert.match(\\n        help(\\\"'smooth' is undefined\\\"),\\n        /Did you just try to use p5\\\\.js's smooth\\\\(\\\\) function\\\\?/\\n      );\\n    });\\n\\n    test('help for variables is shown', function() {\\n      assert.match(\\n        help(\\\"'focused' is undefined\\\"),\\n        /Did you just try to use p5\\\\.js's focused variable\\\\?/\\n      );\\n    });\\n  });\\n});\\n\\n[end of error_helpers.js]\\n[start of tanvi_gsoc_2018.md]\\n# Improvements to existing I/O Methods of p5.js \\n### by Tanvi Kumar ([@TanviKumar](https://github.com/TanviKumar))\\n\\n## Summary\\n\\nMy project for GSoC'18 initially revolved around looking into the I/O methods and trying to resolve the existing issues related to them. It later moved into closing issues related to WebGL and many old I/O issues were resolved.\\n\\nThroughout the three months, I've been able to modify code, add new features, add examples and make changes to documentation. A lot of my time was spent testing the methods on different browsers, replicating open issues to help resolve them and finding solutions for issues.\\n\\n## Contributions during GSoC'18 \\n\\n### Testing I/O methods\\n\\nThe first coding period of GSoC'18 was spent analysing and testing the I/O methods on different browsers and also testing their examples.\\nOn testing these methods, a common issue regarding the size of files to be fetched was found for the loading methods of p5.js. \\n[#2981](https://github.com/processing/p5.js/issues/2981) clearly encapsulated the other issues [#2661](https://github.com/processing/p5.js/issues/2661) and [#2216](https://github.com/processing/p5.js/issues/2216) regarding this. \\nIt was found that browsers like Chrome can easily fetch large files despite taking a lot of time, however old versions of browsers like Firefox can fetch files up to a maximum of 64MB in one request. A size allocation limit error would be reached if the file is too big.\\n\\nVarious ideas were looked into to try and find appropriate solutions to these issues.\\nThese included - \\nAdding the knowledge of the size limit of browsers to the documentation,\\nGenerating errors before fetching lare files\\nUsing HEAD requests to get the size of the file then producing an error if limit was exceeded and finally, \\nTo fetch the file anyway in case a certain browser can handle it and issue a warning to the user. \\nThe final discussions have led to [#3217](https://github.com/processing/p5.js/pull/3127).\\nThe documentation for the loading methods will now warn the users regarding the issue about size limit and also give the user a friendly error if a large file is being fetched just so they may be informed.\\nThe friendly error system (FES) of p5.js was used to do this. \\n\\nSome issues involved trying to replicate them so they may be fixed, including issue [#2842](https://github.com/processing/p5.js/issues/2842) and [#1829](https://github.com/processing/p5.js/issues/1829).\\n\\n### New feature\\n\\nA method to add the HTML DOM input color object was created and successfully merged in [#3089](https://github.com/processing/p5.js/pull/3089).\\nThis was done to close the [#2504](https://github.com/processing/p5.js/issues/2504).\\nIt can give the user the hex string color value of the input element and also a p5.Color object with the chosen color so that it may be easily integrated into sketches that use methods which accept p5.Color objects like lerpColor method in p5.js.\\n\\n### New examples and documentation\\n\\n- Added a new example and fixed the old example of the loadModel method in [#2968](https://github.com/processing/p5.js/pull/2968). This was to close the[#2904](https://github.com/processing/p5.js/issues/2904) .\\n- Changed the model() example in [#3074](https://github.com/processing/p5.js/pull/3074)\\n- Added the example and manual test example for createColorPicker method in [#3089](https://github.com/processing/p5.js/pull/3089)\\n\\n## Conclusion\\n\\nGSoC'18 was an incredibly enriching experience. I'm happy to know that I was able to successfully contribute to p5.js and close numerous issues and hope that my work will continue to do so in the future. I'd also like to add that I'd love to continue being a part of p5.js in the future after these fulfilling 3 months.\\n\\n## Acknowledgements\\n\\nI'd like to thank my mentor, [Alice Mira Chung](https://github.com/almchung) for her guidance, patience and support. I'd also like to thank Lauren McCarthy and others in the p5.js community who helped me successfuly close issues and guided me when I stumbled. Really grateful for having had this oppurtunity and such an encouraging environment.\\n[end of tanvi_gsoc_2018.md]\\n[start of urvashi_gsoc_2019.md]\\n\\n# Improve p5.js unit tests\\n### by Urvashi Verma ([@ihsavru](https://github.com/ihsavru))\\n\\n## Overview\\nThis project focused on improving the unit tests for different modules of p5.js. I spent my summer writing unit tests for different modules. I also worked on integrating the code coverage reports with Codecov through Travis CI. \\n\\n## Contributions during GSoC'19\\nI divided the timeline into smaller periods of a week or two to handle unit tests for each module. Following is a list of PRs submitted:\\n#### Core\\n- https://github.com/processing/p5.js/pull/3772\\n- https://github.com/processing/p5.js/pull/3865\\n\\n#### Events\\n- https://github.com/processing/p5.js/pull/3824\\n- https://github.com/processing/p5.js/pull/3814\\n- https://github.com/processing/p5.js/pull/3810\\n- https://github.com/processing/p5.js/pull/3809\\n\\n#### Image\\n- https://github.com/processing/p5.js/pull/3828\\n- https://github.com/processing/p5.js/pull/3829\\n- https://github.com/processing/p5.js/pull/3838\\n\\n#### Typography\\n- https://github.com/processing/p5.js/pull/3839\\n- https://github.com/processing/p5.js/pull/3844\\n\\n#### Utilities\\n- https://github.com/processing/p5.js/pull/3864\\n\\n#### WebGL\\n- https://github.com/processing/p5.js/pull/3896\\n- https://github.com/processing/p5.js/pull/3902\\n\\n## Code Coverage\\nAs of writing this report, the code coverage has been increased to 62.52% (along with an increase of total lines of code) from 50.41%. A summary is given below:\\nBefore summer of code:\\n```\\n=============================== Coverage summary ===============================  \\nStatements   : 50.41% ( 4598/9122 )  \\nBranches     : 36.51% ( 1375/3766 )  \\nFunctions    : 56.49% ( 509/901 )  \\nLines        : 50.95% ( 4541/8912 )  \\n================================================================================\\n```\\nAfter summer of code:\\n```\\n=============================== Coverage summary ===============================  \\nStatements   : 62.04% ( 6579/10604 )  \\nBranches     : 49.86% ( 2252/4517 )  \\nFunctions    : 66.82% ( 707/1058 )  \\nLines        : 62.53% ( 6444/10306 )  \\n================================================================================\\n```\\nYou can find more detailed coverage reports for p5.js on [Codecov](https://codecov.io/gh/processing/p5.js)\\n\\n### Documentation\\nI have documented about how to approach writing a unit test in the [developer docs for unit testing](https://github.com/processing/p5.js/blob/master/contributor_docs/unit_testing.md) which was created by my mentor [Evelyn](https://github.com/outofambit).\\n\\n## Acknowledgements\\nI am glad to be able to spend my summer contributing to p5.js. I would like to thank my mentor [Evelyn Masso](https://github.com/outofambit), for her support throughout the summer and for making sure that I had enough opportunities to grow during the project. I would also like to thank other members of the Processing Foundation for this opportunity and their help in making this project successful.\\n\\n[end of urvashi_gsoc_2019.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "error_helpers.js",
        "friendly_error_system.md",
        "error_helpers.js",
        "tanvi_gsoc_2018.md",
        "urvashi_gsoc_2019.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "3b249d3a-24f3-4fed-ba15-1aa062f87898",
        "score": 0.01639344262295082,
        "payload": {
          "text": "/**\n * @for p5\n * @requires core\n *\n * This is the main file for the Friendly Error System (FES). Here is a\n * brief outline of the functions called in this system.\n *\n * The FES may be invoked by a call to either (1) _validateParameters,\n * (2) _friendlyFileLoadError, (3) _friendlyError, or (4) helpForMisusedAtTopLevelCode.\n *\n * helpForMisusedAtTopLevelCode is called by this file on window load to check for use\n * of p5.js functions outside of setup() or draw()\n * Items 1-3 above are called by functions in the p5 library located in other files.\n *\n * _friendlyFileLoadError is called by the loadX() methods.\n * _friendlyError can be called by any function to offer a helpful error message.\n *\n * _validateParameters is called by functions in the p5.js API to help users ensure\n * ther are calling p5 function with the right parameter types. The property\n * disableFriendlyErrors = false can be set from a p5.js sketch to turn off parameter\n * checking. The call sequence from _validateParameters looks something like this:\n *\n * _validateParameters\n *   lookupParamDoc\n *   scoreOverload\n *     testParamTypes\n *     testParamType\n *   getOverloadErrors\n *   _friendlyParamError\n *     ValidationError\n *     report\n *       friendlyWelcome\n *\n * The call sequences to _friendlyFileLoadError and _friendlyError are like this:\n * _friendlyFileLoadError\n *   report\n *\n * _friendlyError\n *   report\n *\n * report() is the main function that prints directly to console with the output\n * of the error helper message. Note: friendlyWelcome() also prints to console directly.\n */\nimport p5 from './main';\nimport * as constants from './constants';\nimport { translator } from './internationalization';\n\n// p5.js blue, p5.js orange, auto dark green; fallback p5.js darkened magenta\n// See testColors below for all the color codes and names\nconst typeColors = ['#2D7BB6', '#EE9900', '#4DB200', '#C83C00'];\n\nif (typeof IS_MINIFIED !== 'undefined') {\n  p5._validateParameters = p5._friendlyFileLoadError = p5._friendlyError = () => {};\n} else {\n  let doFriendlyWelcome = false; // TEMP until we get it all working LM\n  // for parameter validation\n  const dataDoc = require('../../docs/reference/data.json');\n  const arrDoc = JSON.parse(JSON.stringify(dataDoc));\n\n  // -- Borrowed from jQuery 1.11.3 --\n  const class2type = {};\n  const toString = class2type.toString;\n  const names = [\n    'Boolean',\n    'Number',\n    'String',\n    'Function',\n    'Array',\n    'Date',\n    'RegExp',\n    'Object',\n    'Error'\n  ];\n  for (let n = 0; n < names.length; n++) {\n    class2type[`[object ${names[n]}]`] = names[n].toLowerCase();\n  }\n  const getType = obj => {\n    if (obj == null) {\n      return `${obj}`;\n    }\n    return typeof obj === 'object' || typeof obj === 'function'\n      ? class2type[toString.call(obj)] || 'object'\n      : typeof obj;\n  };\n\n  // -- End borrow --\n\n  const friendlyWelcome = () => {\n    // p5.js brand - magenta: #ED225D\n    //const astrixBgColor = 'transparent';\n    //const astrixTxtColor = '#ED225D';\n    //const welcomeBgColor = '#ED225D';\n    //const welcomeTextColor = 'white';\n    const welcomeMessage = translator('fes.pre', {\n      message: translator('fes.welcome')\n    });\n    console.log(\n      '    _ \\n' +\n        ' /\\\\| |/\\\\ \\n' +\n        \" \\\\ ` ' /  \\n\" +\n        ' / , . \\\\  \\n' +\n        ' \\\\/|_|\\\\/ ' +\n        '\\n\\n' +\n        welcomeMessage\n    );\n  };\n\n  /**\n   * Prints out a fancy, colorful message to the console log\n   *\n   * @method report\n   * @private\n   * @param  {String}               message the words to be said\n   * @param  {String}               func    the name of the function to link\n   * @param  {Number|String} color   CSS color string or error type\n   *\n   * @return console logs\n   */\n  const report = (message, func, color) => {\n    if (doFriendlyWelcome) {\n      friendlyWelcome();\n      doFriendlyWelcome = false;\n    }\n    if ('undefined' === getType(color)) {\n      color = '#B40033'; // dark magenta\n    } else if (getType(color) === 'number') {\n      // Type to color\n      color = typeColors[color];\n    }\n    if (func.substring(0, 4) === 'load') {\n      console.log(translator('fes.pre', { message }));\n    } else {\n      console.log(\n        translator('fes.pre', {\n          message: `${message} (http://p5js.org/reference/#p5/${func})`\n        })\n      );\n    }\n  };\n\n  // mapping used by `_friendlyFileLoadError`\n  const fileLoadErrorCases = (num, filePath) => {\n    const suggestion = translator('fes.fileLoadError.suggestion', {\n      filePath,\n      link: 'https://github.com/processing/p5.js/wiki/Local-server'\n    });\n    switch (num) {\n      case 0:\n        return {\n          message: translator('fes.fileLoadError.image', {\n            suggestion\n          }),\n          method: 'loadImage'\n        };\n      case 1:\n        return {\n          message: translator('fes.fileLoadError.xml', {\n            suggestion\n          }),\n          method: 'loadXML'\n        };\n      case 2:\n        return {\n          message: translator('fes.fileLoadError.table', {\n            suggestion\n          }),\n          method: 'loadTable'\n        };\n      case 3:\n        return {\n          message: translator('fes.fileLoadError.strings', {\n            suggestion\n          }),\n          method: 'loadStrings'\n        };\n      case 4:\n        return {\n          message: translator('fes.fileLoadError.font', {\n            suggestion\n          }),\n          method: 'loadFont'\n        };\n      case 5:\n        return {\n          message: translator('fes.fileLoadError.json', {\n            suggestion\n          }),\n          method: 'loadJSON'\n        };\n      case 6:\n        return {\n          message: translator('fes.fileLoadError.bytes', {\n            suggestion\n          }),\n          method: 'loadBytes'\n        };\n      case 7:\n        return {\n          message: translator('fes.fileLoadError.large'),\n          method: 'loadX'\n        };\n      case 8:\n        return {\n          message: translator('fes.fileLoadError.gif'),\n          method: 'loadImage'\n        };\n    }\n  };\n\n  /**\n   * This is called internally if there is a error during file loading.\n   *\n   * @method _friendlyFileLoadError\n   * @private\n   * @param  {Number} errorType\n   * @param  {String} filePath\n   */\n  p5._friendlyFileLoadError = function(errorType, filePath) {\n    const { message, method } = fileLoadErrorCases(errorType, filePath);\n    report(message, method, 3);\n  };\n\n  /**\n   * This is a generic method that can be called from anywhere in the p5\n   * library to alert users to a common error.\n   *\n   * @method _friendlyError\n   * @private\n   * @param  {Number} message message to be printed\n   * @param  {String} method name of method\n   */\n  p5._friendlyError = function(message, method) {\n    report(message, method);\n  };\n\n  /**\n   * This is called internally if there is a error with autoplay.\n   *\n   * @method _friendlyAutoplayError\n   * @private\n   */\n  p5._friendlyAutoplayError = function(src) {\n    const message = translator('fes.autoplay', {\n      src,\n      link: 'https://developer.mozilla.org/docs/Web/Media/Autoplay_guide'\n    });\n    console.log(translator('fes.pre', { message }));\n  };\n\n  const docCache = {};\n  const builtinTypes = [\n    'null',\n    'number',\n    'string',\n    'boolean',\n    'constant',\n    'function',\n    'any',\n    'integer'\n  ];\n\n  // validateParameters() helper functions:\n  // lookupParamDoc() for querying data.json\n  const lookupParamDoc = func => {\n    // look for the docs in the `data.json` datastructure\n\n    const ichDot = func.lastIndexOf('.');\n    const funcName = func.substr(ichDot + 1);\n    const funcClass = func.substr(0, ichDot) || 'p5';\n\n    let queryResult;\n    const classitems = arrDoc.classitems;\n\n    for (const x of classitems) {\n      if (x.name === funcName && x.class === funcClass) {\n        queryResult = x;\n        break;\n      }\n    }\n\n    // different JSON structure for funct with multi-format\n    const overloads = [];\n    if (queryResult.hasOwnProperty('overloads')) {\n      // add all the overloads\n      for (let i = 0; i < queryResult.overloads.length; i++) {\n        overloads.push({ formats: queryResult.overloads[i].params });\n      }\n    } else {\n      // no overloads, just add the main method definition\n      overloads.push({ formats: queryResult.params || [] });\n    }\n\n    // parse the parameter types for each overload\n    const mapConstants = {};\n    let maxParams = 0;\n    overloads.forEach(overload => {\n      const formats = overload.formats;\n\n      // keep a record of the maximum number of arguments\n      // this method requires.\n      if (maxParams < formats.length) {\n        maxParams = formats.length;\n      }\n\n      // calculate the minimum number of arguments\n      // this overload requires.\n      let minParams = formats.length;\n      while (minParams > 0 && formats[minParams - 1].optional) {\n        minParams--;\n      }\n      overload.minParams = minParams;\n\n      // loop through each parameter position, and parse its types\n      formats.forEach(format => {\n        // split this parameter's types\n        format.types = format.type.split('|').map(function ct(type) {\n          // array\n          if (type.substr(type.length - 2, 2) === '[]') {\n            return {\n              name: type,\n              array: ct(type.substr(0, type.length - 2))\n            };\n          }\n\n          let lowerType = type.toLowerCase();\n\n          // contant\n          if (lowerType === 'constant') {\n            let constant;\n            if (mapConstants.hasOwnProperty(format.name)) {\n              constant = mapConstants[format.name];\n            } else {\n              // parse possible constant values from description\n              const myRe = /either\\s+(?:[A-Z0-9_]+\\s*,?\\s*(?:or)?\\s*)+/g;\n              const values = {};\n              const names = [];\n\n              constant = mapConstants[format.name] = {\n                values,\n                names\n              };\n\n              const myArray = myRe.exec(format.description);\n              if (func === 'endShape' && format.name === 'mode') {\n                values[constants.CLOSE] = true;\n                names.push('CLOSE');\n              } else {\n                const match = myArray[0];\n                const reConst = /[A-Z0-9_]+/g;\n                let matchConst;\n                while ((matchConst = reConst.exec(match)) !== null) {\n                  const name = matchConst[0];\n                  if (constants.hasOwnProperty(name)) {\n                    values[constants[name]] = true;\n                    names.push(name);\n                  }\n                }\n              }\n            }\n            return {\n              name: type,\n              builtin: lowerType,\n              names: constant.names,\n              values: constant.values\n            };\n          }\n\n          // function\n          if (lowerType.substr(0, 'function'.length) === 'function') {\n            lowerType = 'function';\n          }\n          // builtin\n          if (builtinTypes.includes(lowerType)) {\n            return { name: type, builtin: lowerType };\n          }\n\n          // find type's prototype\n          let t = window;\n          const typeParts = type.split('.');\n\n          // special-case 'p5' since it may be non-global\n          if (typeParts[0] === 'p5') {\n            t = p5;\n            typeParts.shift();\n          }\n\n          typeParts.forEach(p => {\n            t = t && t[p];\n          });\n          if (t) {\n            return { name: type, prototype: t };\n          }\n\n          return { name: type, type: lowerType };\n        });\n      });\n    });\n    return {\n      overloads,\n      maxParams\n    };\n  };\n\n  const isNumber = param => {\n    switch (typeof param) {\n      case 'number':\n        return true;\n      case 'string':\n        return !isNaN(param);\n      default:\n        return false;\n    }\n  };\n\n  const testParamType = (param, type) => {\n    const isArray = param instanceof Array;\n    let matches = true;\n    if (type.array && isArray) {\n      for (let i = 0; i < param.length; i++) {\n        const error = testParamType(param[i], type.array);\n        if (error) return error / 2; // half error for elements\n      }\n    } else if (type.prototype) {\n      matches = param instanceof type.prototype;\n    } else if (type.builtin) {\n      switch (type.builtin) {\n        case 'number':\n          matches = isNumber(param);\n          break;\n        case 'integer':\n          matches = isNumber(param) && Number(param) === Math.floor(param);\n          break;\n        case 'boolean':\n        case 'any':\n          matches = true;\n          break;\n        case 'array':\n          matches = isArray;\n          break;\n        case 'string':\n          matches = /*typeof param === 'number' ||*/ typeof param === 'string';\n          break;\n        case 'constant':\n          matches = type.values.hasOwnProperty(param);\n          break;\n        case 'function':\n          matches = param instanceof Function;\n          break;\n        case 'null':\n          matches = param === null;\n          break;\n      }\n    } else {\n      matches = typeof param === type.t;\n    }\n    return matches ? 0 : 1;\n  };\n\n  // testType() for non-object type parameter validation\n  const testParamTypes = (param, types) => {\n    let minScore = 9999;\n    for (let i = 0; minScore > 0 && i < types.length; i++) {\n      const score = testParamType(param, types[i]);\n      if (minScore > score) minScore = score;\n    }\n    return minScore;\n  };\n\n  // generate a score (higher is worse) for applying these args to\n  // this overload.\n  const scoreOverload = (args, argCount, overload, minScore) => {\n    let score = 0;\n    const formats = overload.formats;\n    const minParams = overload.minParams;\n\n    // check for too few/many args\n    // the score is double number of extra/missing args\n    if (argCount < minParams) {\n      score = (minParams - argCount) * 2;\n    } else if (argCount > formats.length) {\n      score = (argCount - formats.length) * 2;\n    }\n\n    // loop through the formats, adding up the error score for each arg.\n    // quit early if the score gets higher than the previous best overload.\n    for (let p = 0; score <= minScore && p < formats.length; p++) {\n      const arg = args[p];\n      const format = formats[p];\n      // '== null' checks for 'null' and typeof 'undefined'\n      if (arg == null) {\n        // handle non-optional and non-trailing undefined args\n        if (!format.optional || p < minParams || p < argCount) {\n          score += 1;\n        }\n      } else {\n        score += testParamTypes(arg, format.types);\n      }\n    }\n    return score;\n  };\n\n  // gets a list of errors for this overload\n  const getOverloadErrors = (args, argCount, overload) => {\n    const formats = overload.formats;\n    const minParams = overload.minParams;\n\n    // check for too few/many args\n    if (argCount < minParams) {\n      return [\n        {\n          type: 'TOO_FEW_ARGUMENTS',\n          argCount,\n          minParams\n        }\n      ];\n    } else if (argCount > formats.length) {\n      return [\n        {\n          type: 'TOO_MANY_ARGUMENTS',\n          argCount,\n          maxParams: formats.length\n        }\n      ];\n    }\n\n    const errorArray = [];\n    for (let p = 0; p < formats.length; p++) {\n      const arg = args[p];\n      const format = formats[p];\n      // '== null' checks for 'null' and typeof 'undefined'\n      if (arg == null) {\n        // handle non-optional and non-trailing undefined args\n        if (!format.optional || p < minParams || p < argCount) {\n          errorArray.push({\n            type: 'EMPTY_VAR',\n            position: p,\n            format\n          });\n        }\n      } else if (testParamTypes(arg, format.types) > 0) {\n        errorArray.push({\n          type: 'WRONG_TYPE',\n          position: p,\n          format,\n          arg\n        });\n      }\n    }\n\n    return errorArray;\n  };\n\n  // a custom error type, used by the mocha\n  // tests when expecting validation errors\n  p5.ValidationError = (name => {\n    class err extends Error {\n      constructor(message, func) {\n        super();\n        this.message = message;\n        this.func = func;\n        if ('captureStackTrace' in Error) Error.captureStackTrace(this, err);\n        else this.stack = new Error().stack;\n      }\n    }\n\n    err.prototype.name = name;\n    return err;\n  })('ValidationError');\n\n  // function for generating console.log() msg\n  p5._friendlyParamError = function(errorObj, func) {\n    let message;\n\n    function formatType() {\n      const format = errorObj.format;\n      return format.types\n        .map(type => (type.names ? type.names.join('|') : type.name))\n        .join('|');\n    }\n\n    switch (errorObj.type) {\n      case 'EMPTY_VAR': {\n        message = `${func}() was expecting ${formatType()} for parameter #${\n          errorObj.position\n        } (zero-based index), received an empty variable instead. If not intentional, this is often a problem with scope: [https://p5js.org/examples/data-variable-scope.html]`;\n        break;\n      }\n      case 'WRONG_TYPE': {\n        const arg = errorObj.arg;\n        const argType =\n          arg instanceof Array\n            ? 'array'\n            : arg === null ? 'null' : arg.name || typeof arg;\n        message = `${func}() was expecting ${formatType()} for parameter #${\n          errorObj.position\n        } (zero-based index), received ${argType} instead`;\n        break;\n      }\n      case 'TOO_FEW_ARGUMENTS': {\n        message = `${func}() was expecting at least ${\n          errorObj.minParams\n        } arguments, but received only ${errorObj.argCount}`;\n        break;\n      }\n      case 'TOO_MANY_ARGUMENTS': {\n        message = `${func}() was expecting no more than ${\n          errorObj.maxParams\n        } arguments, but received ${errorObj.argCount}`;\n        break;\n      }\n    }\n\n    if (message) {\n      if (p5._throwValidationErrors) {\n        throw new p5.ValidationError(message);\n      }\n\n      try {\n        const re = /Function\\.validateParameters.*[\\r\\n].*[\\r\\n].*\\(([^)]*)/;\n        const location = re.exec(new Error().stack)[1];\n        if (location) {\n          message += ` at ${location}`;\n        }\n      } catch (err) {}\n\n      report(`${message}.`, func, 3);\n    }\n  };\n\n  /**\n   * Validates parameters\n   * param  {String}               func    the name of the function\n   * param  {Array}                args    user input arguments\n   *\n   * example:\n   *  const a;\n   *  ellipse(10,10,a,5);\n   * console ouput:\n   *  \"It looks like ellipse received an empty variable in spot #2.\"\n   *\n   * example:\n   *  ellipse(10,\"foo\",5,5);\n   * console output:\n   *  \"ellipse was expecting a number for parameter #1,\n   *           received \"foo\" instead.\"\n   */\n  p5._validateParameters = function validateParameters(func, args) {\n    if (p5.disableFriendlyErrors) {\n      return; // skip FES\n    }\n\n    // lookup the docs in the 'data.json' file\n    const docs = docCache[func] || (docCache[func] = lookupParamDoc(func));\n    const overloads = docs.overloads;\n\n    // ignore any trailing `undefined` arguments\n    let argCount = args.length;\n    // '== null' checks for 'null' and typeof 'undefined'\n    while (argCount > 0 && args[argCount - 1] == null) argCount--;\n\n    // find the overload with the best score\n    let minScore = 99999;\n    let minOverload;\n    for (let i = 0; i < overloads.length; i++) {\n      const score = scoreOverload(args, argCount, overloads[i], minScore);\n      if (score === 0) {\n        return; // done!\n      } else if (minScore > score) {\n        // this score is better that what we have so far...\n        minScore = score;\n        minOverload = i;\n      }\n    }\n\n    // this should _always_ be true here...\n    if (minScore > 0) {\n      // get the errors for the best overload\n      const errorArray = getOverloadErrors(\n        args,\n        argCount,\n        overloads[minOverload]\n      );\n\n      // generate err msg\n      for (let n = 0; n < errorArray.length; n++) {\n        p5._friendlyParamError(errorArray[n], func);\n      }\n    }\n  };\n\n  /**\n   * Prints out all the colors in the color pallete with white text.\n   * For color blindness testing.\n   */\n  /* function testColors() {\n    const str = 'A box of biscuits, a box of mixed biscuits and a biscuit mixer';\n    report(str, 'print', '#ED225D'); // p5.js magenta\n    report(str, 'print', '#2D7BB6'); // p5.js blue\n    report(str, 'print', '#EE9900'); // p5.js orange\n    report(str, 'print', '#A67F59'); // p5.js light brown\n    report(str, 'print', '#704F21'); // p5.js gold\n    report(str, 'print', '#1CC581'); // auto cyan\n    report(str, 'print', '#FF6625'); // auto orange\n    report(str, 'print', '#79EB22'); // auto green\n    report(str, 'print', '#B40033'); // p5.js darkened magenta\n    report(str, 'print', '#084B7F'); // p5.js darkened blue\n    report(str, 'print', '#945F00'); // p5.js darkened orange\n    report(str, 'print', '#6B441D'); // p5.js darkened brown\n    report(str, 'print', '#2E1B00'); // p5.js darkened gold\n    report(str, 'print', '#008851'); // auto dark cyan\n    report(str, 'print', '#C83C00'); // auto dark orange\n    report(str, 'print', '#4DB200'); // auto dark green\n  } */\n\n  p5.prototype._validateParameters = p5.validateParameters;\n}\n\n// This is a lazily-defined list of p5 symbols that may be\n// misused by beginners at top-level code, outside of setup/draw. We'd like\n// to detect these errors and help the user by suggesting they move them\n// into setup/draw.\n//\n// For more details, see https://github.com/processing/p5.js/issues/1121.\nlet misusedAtTopLevelCode = null;\nconst FAQ_URL =\n  'https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup';\n\nconst defineMisusedAtTopLevelCode = () => {\n  const uniqueNamesFound = {};\n\n  const getSymbols = obj =>\n    Object.getOwnPropertyNames(obj)\n      .filter(name => {\n        if (name[0] === '_') {\n          return false;\n        }\n        if (name in uniqueNamesFound) {\n          return false;\n        }\n\n        uniqueNamesFound[name] = true;\n\n        return true;\n      })\n      .map(name => {\n        let type;\n\n        if (typeof obj[name] === 'function') {\n          type = 'function';\n        } else if (name === name.toUpperCase()) {\n          type = 'constant';\n        } else {\n          type = 'variable';\n        }\n\n        return { name, type };\n      });\n\n  misusedAtTopLevelCode = [].concat(\n    getSymbols(p5.prototype),\n    // At present, p5 only adds its constants to p5.prototype during\n    // construction, which may not have happened at the time a\n    // ReferenceError is thrown, so we'll manually add them to our list.\n    getSymbols(require('./constants'))\n  );\n\n  // This will ultimately ensure that we report the most specific error\n  // possible to the user, e.g. advising them about HALF_PI instead of PI\n  // when their code misuses the former.\n  misusedAtTopLevelCode.sort((a, b) => b.name.length - a.name.length);\n};\n\nconst helpForMisusedAtTopLevelCode = (e, log) => {\n  if (!log) {\n    log = console.log.bind(console);\n  }\n\n  if (!misusedAtTopLevelCode) {\n    defineMisusedAtTopLevelCode();\n  }\n\n  // If we find that we're logging lots of false positives, we can\n  // uncomment the following code to avoid displaying anything if the\n  // user's code isn't likely to be using p5's global mode. (Note that\n  // setup/draw are more likely to be defined due to JS function hoisting.)\n  //\n  //if (!('setup' in window || 'draw' in window)) {\n  //  return;\n  //}\n\n  misusedAtTopLevelCode.some(symbol => {\n    // Note that while just checking for the occurrence of the\n    // symbol name in the error message could result in false positives,\n    // a more rigorous test is difficult because different browsers\n    // log different messages, and the format of those messages may\n    // change over time.\n    //\n    // For example, if the user uses 'PI' in their code, it may result\n    // in any one of the following messages:\n    //\n    //   * 'PI' is undefined                           (Microsoft Edge)\n    //   * ReferenceError: PI is undefined             (Firefox)\n    //   * Uncaught ReferenceError: PI is not defined  (Chrome)\n\n    if (e.message && e.message.match(`\\\\W?${symbol.name}\\\\W`) !== null) {\n      const symbolName =\n        symbol.type === 'function' ? `${symbol.name}()` : symbol.name;\n      log(\n        translator('fes.misusedTopLevel', {\n          symbolName,\n          symbolType: symbol.type,\n          link: FAQ_URL\n        })\n      );\n      return true;\n    }\n  });\n};\n\n// Exposing this primarily for unit testing.\np5.prototype._helpForMisusedAtTopLevelCode = helpForMisusedAtTopLevelCode;\n\nif (document.readyState !== 'complete') {\n  window.addEventListener('error', helpForMisusedAtTopLevelCode, false);\n\n  // Our job is only to catch ReferenceErrors that are thrown when\n  // global (non-instance mode) p5 APIs are used at the top-level\n  // scope of a file, so we'll unbind our error listener now to make\n  // sure we don't log false positives later.\n  window.addEventListener('load', () => {\n    window.removeEventListener('error', helpForMisusedAtTopLevelCode, false);\n  });\n}\n\nexport default p5;\n",
          "filepath": "data/repos/processing/p5.js-1.0/src/core/error_helpers.js",
          "repo": "processing/p5.js",
          "version": "1.0",
          "chunk_index": 0
        }
      },
      {
        "id": "8d40f023-d158-418e-a855-3a20f5c6e733",
        "score": 0.016129032258064516,
        "payload": {
          "text": "# p5.js Friendly Error System (FES)\n\n## Overview\n\nThe Friendly Error System (FES) is a system designed to help new programmers with common user errors as they get started learning. It catches common beginning errors and provides clear language and links to help a user resolve the error. FES is only applied to functions that are ones a user might encounter when they are just starting. An exception is made for particular common gotchas such as trying to load files without running a server, or calling loadImage() with a URL, etc.\n\nThe goal is to create accessible error messages to supplement the often cryptic console errors. For example, Javascript has no support for type checking as default making errors in parameter entry was harder to detect for new Javascript developers.\n\nMessages generated by FES are written in natural language, linked to documentation, and assume a beginner level. The errors are triggered in multiple files through out p5.js, but most of the work and error writing happens in `src/core/error_helpers.js`.  \n\nBy default, FES is enabled for `p5.js`, whereas completely disabled in `p5.min.js`. It is possible to disable FES by setting `p5.disableFriendlyErrors = true;`.\n\nSo far FES is able to detect and print messages for four kinds of errors: \n\n1. `validateParameters()` checks a function\u2019s input parameters based on inline documentations\n\n2. `friendlyFileLoadError()` catches file loading errors. These two kinds of error checking have been integrated into an existing (selected set of) p5 functions, but developers can add them to more p5 functions, or their own libraries, by calling `p5._validateParameters()`\n\n3. `friendlyError()` can be called by any function to offer a helpful error message\n\n4. `helpForMisusedAtTopLevelCode()` is called on window load to check for use of p5.js functions outside of setup() or draw()\n\nPlease also see inline notes in [src/core/error_helper.js](https://github.com/processing/p5.js/blob/master/src/core/error_helpers.js) for more technical information.\n\n### `core/error_helpers/friendlyFileLoadError()`: \n* This function generates and displays friendly error messages if a file fails to load correctly. It also checks if the size of a file might be too large to load and produces a warning. \n* This can be called through : `p5._friendlyFileLoadError(ERROR_TYPE, FILE_PATH)`.\n* file loading error example:\n````javascript\n/// missing font file\nlet myFont;\nfunction preload() {\n  myFont = loadFont('assets/OpenSans-Regular.ttf');\n};\nfunction setup() {\n  fill('#ED225D');\n  textFont(myFont);\n  textSize(36);\n  text('p5*js', 10, 50);\n};\nfunction draw() {};\n/// FES will generate the following message in the console:\n/// > p5.js says: It looks like there was a problem loading your font. Try checking if the file path [assets/OpenSans-Regular.ttf] is correct, hosting the font online, or running a local server.[https://github.com/processing/p5.js/wiki/Local-server]\n````\n* Currently version contains templates for generating error messages for `image`, `XML`, `table`, `text`, `json` and `font` files.\n* Implemented to `image/loading_displaying/loadImage()`, `io/files/loadFont()`, `io/files/loadTable()`, `io/files/loadJSON()`, `io/files/loadStrings()`, `io/files/loadXML()`, `io/files/loadBytes()`.\n* Error while loading a file due to its large size is implemented to all loadX methods.\n\n### `core/error_helpers/validateParameters()`:\n* This function runs parameter validation by matching the input parameters with information from `docs/reference/data.json`, which is created from the function's inline documentation. It checks that a function call contains the correct number and the correct type of parameters. \n* missing parameter example:\n````javascript\narc(1, 1, 10.5, 10);\n/// FES will generate the following message in the console:\n/// > p5.js says: It looks like arc() received an empty variable in spot #4 (zero-based index). If not intentional, this is often a problem with scope: [https://p5js.org/examples/data-variable-scope.html]. [http://p5js.org/reference/#p5/arc]\n/// > p5.js says: It looks like arc() received an empty variable in spot #5 (zero-based index). If not intentional, this is often a problem with scope: [https://p5js.org/examples/data-variable-scope.html]. [http://p5js.org/reference/#p5/arc]\n\n````\n* wrong type example:\n````javascript\narc('1', 1, 10.5, 10, 0, Math.PI, 'pie');\n/// FES will generate the following message in the console:\n/// > p5.js says: arc() was expecting Number for parameter #0 (zero-based index), received string instead. [http://p5js.org/reference/#p5/arc]\n````\n* This can be called through: `p5._validateParameters(FUNCT_NAME, ARGUMENTS)` \nor, `p5.prototype._validateParameters(FUNCT_NAME, ARGUMENTS)` inside the function that requires parameter validation. It is recommended to use static version, `p5._validateParameters` for general purposes. `p5.prototype._validateParameters(FUNCT_NAME, ARGUMENTS)` mainly remained for debugging and unit testing purposes.\n* Implemented to functions in `color/creating_reading`, `core/2d_primitives`, `core/curves`, and `utilities/string_functions`. \n\n## Additional Features\n* The FES welcomes the developer to p5 and the friendly debugger. \n* The FES works in the IDE and the web editor. \n\n## Notes for Developers\n* When creating p5.js Objects: any p5.js objects that will be used for parameters will need to assign value for `name` parameter (name of the object) within the class declaration. e.g.: \n````javascript \np5.newObject = function(parameter) {\n   this.parameter = 'some parameter';\n   this.name = 'p5.newObject';\n};\n````\n* Inline documentation: allowed parameter types are `Boolean`, `Number`, `String`, and name of the object (see the above bullet point). Use `Array` for any types of Array parameters. If needed, explain what kind of the specific types of array parameter are allowed (e.g. `Number[]`, `String[]`) in the description section.\n* Currently supported class types (have their `name` parameter): `p5.Color`, `p5.Element`, `p5.Graphics`, `p5.Renderer`, `p5.Renderer2D`, `p5.Image`, `p5.Table`, `p5.TableRow`, `p5.XML`, `p5.Vector`, `p5.Font`, `p5.Geometry`, `p5.Matrix`, `p5.RendererGL`.\n\n## Disable the FES\n\nBy default, FES is enabled for p5.js, and disabled in p5.min.js to prevent FES functions slowing down the process. The error checking system can significantly slow down your code (up to ~10x in some cases). See the [friendly error performance test](https://github.com/processing/p5.js-website/blob/master/dist/assets/learn/performance/code/friendly-error-system/).\n\nYou can disable this with one line of code at the top of your sketch:\n\n```javascript\np5.disableFriendlyErrors = true; // disables FES\n\nfunction setup() {\n  // Do setup stuff\n}\n\nfunction draw() {\n  // Do drawing stuff\n}\n```\n\nNote that this will disable the parts of the FES that cause performance slowdown (like argument checking). Friendly errors that have no performance cost (like giving an descriptive error if a file load fails, or warning you if you try to override p5.js functions in the global space), will remain in place. \n\n## Known Limitations\n* The friendly error system slows the program down, so there is an option to turn it off via setting `p5.disableFriendlyErrors = true;`. In addition, the friendly error system is omitted by default in the minified (`p5.min.js`) version.\n* FES may still result in false negative cases. These are usually caused by the mismatch between designs of the  functions (e.g. drawing functions those are originally designed to be used interchangeably in both 2D and 3D settings) with actual usage cases. For example, drawing a 3D line with \n```javascript \nconst x3; // undefined\nline(0, 0, 100, 100, x3, Math.PI);\n```\n will escape FES, because there is an acceptable parameter pattern (`Number`, `Number`, `Number`, `Number`) in `line()`'s inline documentation for drawing in 2D setting. This also means the current version of FES doesn't check for the environmental variables such as `_renderer.isP3D`.\n * FES is only able to detect global variables overwritten when declared using `const` or `var`. If `let` is used, they go undetected. This is not currently solvable due to the way `let` instantiates variables.\n\n## In The Works\n* Identify more common error types and generalize with FES (e.g. `bezierVertex()`, `quadraticVertex()` - required object not initiated; checking Number parameters positive for `nf()` `nfc()` `nfp()` `nfs()`)\n\n## Thoughts for the Future\n* re-introduce color coding for the Web Editor.\n* More unit testings.\n* More intuitive and narrowed down output messages.\n* Having a Spanish translation available.\n* All the colors are checked for being color blind friendly.\n* More elaborate ascii is always welcome! \n* Global Error catching. It would be very helpful to catch the errors the browser is throwing to the console, so we can match them up with friendly comments. \n\n```javascript\n// this snippet wraps window.console methods with a new function to modify their functionality\n// it is not currently implemented, but could be to give nicer formatted error messages\nconst original = window.console;\nconst original_functions  = {\n  log: original.log,\n  warn:  original.warn,\n  error: original.error\n}\n\n[\"log\", \"warn\", \"error\"].forEach(function(func){\nwindow.console[func] = function(msg) {\n//do something with the msg caught by the wrapper function, then call the original function\noriginal_functions[func].apply(original, arguments)\n};\n});\n```\n",
          "filepath": "data/repos/processing/p5.js-1.0/contributor_docs/friendly_error_system.md",
          "repo": "processing/p5.js",
          "version": "1.0",
          "chunk_index": 0
        }
      },
      {
        "id": "992b4e28-26f2-43ce-ab4a-4a3673049781",
        "score": 0.015873015873015872,
        "payload": {
          "text": "suite('Error Helpers', function() {\n  var myp5;\n\n  setup(function(done) {\n    new p5(function(p) {\n      p.setup = function() {\n        myp5 = p;\n        done();\n      };\n    });\n  });\n\n  teardown(function() {\n    myp5.remove();\n  });\n\n  suite('friendly error logger', function() {\n    test('basic', function() {\n      assert.doesNotThrow(\n        function() {\n          p5._friendlyError('basic');\n        },\n        Error,\n        'got unwanted exception'\n      );\n    });\n  });\n\n  // unit tests for validateParameters\n  suite('validateParameters: Numbers + optional Constant', function() {\n    test('arc(): no friendly-err-msg', function() {\n      assert.doesNotThrow(\n        function() {\n          p5._validateParameters('arc', [1, 1, 10.5, 10, 0, Math.PI, 'pie']);\n        },\n        Error,\n        'got unwanted exception'\n      );\n    });\n    test('arc(): missing param #4, #5', function() {\n      assert.validationError(function() {\n        p5._validateParameters('arc', [1, 1, 10.5, 10]);\n      });\n    });\n    test('arc(): missing param #0', function() {\n      assert.validationError(function() {\n        p5._validateParameters('arc', [\n          undefined,\n          1,\n          10.5,\n          10,\n          0,\n          Math.PI,\n          'pie'\n        ]);\n      });\n    });\n    test('arc(): missing param #4', function() {\n      assert.validationError(function() {\n        p5._validateParameters('arc', [\n          1,\n          1,\n          10.5,\n          10,\n          undefined,\n          Math.PI,\n          'pie'\n        ]);\n      });\n    });\n    test('arc(): missing param #5', function() {\n      assert.validationError(function() {\n        p5._validateParameters('arc', [1, 1, 10.5, 10, 0, undefined, 'pie']);\n      });\n    });\n    test('arc(): missing param #6, no friendly-err-msg', function() {\n      assert.doesNotThrow(\n        function() {\n          p5._validateParameters('arc', [1, 1, 10.5, 10, 0, Math.PI]);\n        },\n        Error,\n        'got unwanted exception'\n      );\n    });\n    test('arc(): wrong param type at #0', function() {\n      assert.validationError(function() {\n        p5._validateParameters('arc', ['a', 1, 10.5, 10, 0, Math.PI, 'pie']);\n      });\n    });\n  });\n\n  suite('validateParameters: Numbers + optional Constant', function() {\n    test('rect(): no friendly-err-msg', function() {\n      assert.doesNotThrow(\n        function() {\n          p5._validateParameters('rect', [1, 1, 10.5, 10]);\n        },\n        Error,\n        'got unwanted exception'\n      );\n    });\n    test('rect(): wrong param type at #0', function() {\n      assert.validationError(function() {\n        p5._validateParameters('rect', ['a', 1, 10.5, 10, 0, Math.PI]);\n      });\n    });\n  });\n\n  suite(\n    'validateParameters: class, multi-types + optional Numbers',\n    function() {\n      test('ambientLight(): no friendly-err-msg', function() {\n        assert.doesNotThrow(\n          function() {\n            var c = myp5.color(255, 204, 0);\n            p5._validateParameters('ambientLight', [c]);\n          },\n          Error,\n          'got unwanted exception'\n        );\n      });\n    }\n  );\n\n  suite('validateParameters: multi-format', function() {\n    test('color(): no friendly-err-msg', function() {\n      assert.doesNotThrow(\n        function() {\n          p5._validateParameters('color', [65]);\n        },\n        Error,\n        'got unwanted exception'\n      );\n    });\n    test('color(): no friendly-err-msg', function() {\n      assert.doesNotThrow(\n        function() {\n          p5._validateParameters('color', [65, 0.5]);\n        },\n        Error,\n        'got unwanted exception'\n      );\n    });\n    test('color(): no friendly-err-msg', function() {\n      assert.doesNotThrow(\n        function() {\n          p5._validateParameters('color', [255, 204, 0]);\n        },\n        Error,\n        'got unwanted exception'\n      );\n    });\n    test('color(): optional parameter, incorrect type', function() {\n      assert.validationError(function() {\n        p5._validateParameters('color', [0, 0, 0, 'A']);\n      });\n    });\n    test('color(): extra parameter', function() {\n      assert.validationError(function() {\n        p5._validateParameters('color', [[0, 0, 0], 0]);\n      });\n    });\n    test('color(): incorrect element type', function() {\n      assert.validationError(function() {\n        p5._validateParameters('color', [['A', 'B', 'C']]);\n      });\n    });\n    test('color(): incorrect parameter count', function() {\n      assert.validationError(function() {\n        p5._validateParameters('color', ['A', 'A', 0, 0, 0, 0, 0, 0]);\n      });\n    });\n  });\n\n  suite('helpForMisusedAtTopLevelCode', function() {\n    var help = function(msg) {\n      var log = [];\n      var logger = function(msg) {\n        log.push(msg);\n      };\n\n      p5.prototype._helpForMisusedAtTopLevelCode({ message: msg }, logger);\n      assert.equal(log.length, 1);\n      return log[0];\n    };\n\n    test('help for constants is shown', function() {\n      assert.match(\n        help(\"'HALF_PI' is undefined\"),\n        /Did you just try to use p5\\.js's HALF_PI constant\\?/\n      );\n    });\n\n    test('help for functions is shown', function() {\n      assert.match(\n        help(\"'smooth' is undefined\"),\n        /Did you just try to use p5\\.js's smooth\\(\\) function\\?/\n      );\n    });\n\n    test('help for variables is shown', function() {\n      assert.match(\n        help(\"'focused' is undefined\"),\n        /Did you just try to use p5\\.js's focused variable\\?/\n      );\n    });\n  });\n});\n",
          "filepath": "data/repos/processing/p5.js-1.0/test/unit/core/error_helpers.js",
          "repo": "processing/p5.js",
          "version": "1.0",
          "chunk_index": 0
        }
      },
      {
        "id": "541168a0-e1d8-407a-917d-d238476331ed",
        "score": 0.015625,
        "payload": {
          "text": "# Improvements to existing I/O Methods of p5.js \n### by Tanvi Kumar ([@TanviKumar](https://github.com/TanviKumar))\n\n## Summary\n\nMy project for GSoC'18 initially revolved around looking into the I/O methods and trying to resolve the existing issues related to them. It later moved into closing issues related to WebGL and many old I/O issues were resolved.\n\nThroughout the three months, I've been able to modify code, add new features, add examples and make changes to documentation. A lot of my time was spent testing the methods on different browsers, replicating open issues to help resolve them and finding solutions for issues.\n\n## Contributions during GSoC'18 \n\n### Testing I/O methods\n\nThe first coding period of GSoC'18 was spent analysing and testing the I/O methods on different browsers and also testing their examples.\nOn testing these methods, a common issue regarding the size of files to be fetched was found for the loading methods of p5.js. \n[#2981](https://github.com/processing/p5.js/issues/2981) clearly encapsulated the other issues [#2661](https://github.com/processing/p5.js/issues/2661) and [#2216](https://github.com/processing/p5.js/issues/2216) regarding this. \nIt was found that browsers like Chrome can easily fetch large files despite taking a lot of time, however old versions of browsers like Firefox can fetch files up to a maximum of 64MB in one request. A size allocation limit error would be reached if the file is too big.\n\nVarious ideas were looked into to try and find appropriate solutions to these issues.\nThese included - \nAdding the knowledge of the size limit of browsers to the documentation,\nGenerating errors before fetching lare files\nUsing HEAD requests to get the size of the file then producing an error if limit was exceeded and finally, \nTo fetch the file anyway in case a certain browser can handle it and issue a warning to the user. \nThe final discussions have led to [#3217](https://github.com/processing/p5.js/pull/3127).\nThe documentation for the loading methods will now warn the users regarding the issue about size limit and also give the user a friendly error if a large file is being fetched just so they may be informed.\nThe friendly error system (FES) of p5.js was used to do this. \n\nSome issues involved trying to replicate them so they may be fixed, including issue [#2842](https://github.com/processing/p5.js/issues/2842) and [#1829](https://github.com/processing/p5.js/issues/1829).\n\n### New feature\n\nA method to add the HTML DOM input color object was created and successfully merged in [#3089](https://github.com/processing/p5.js/pull/3089).\nThis was done to close the [#2504](https://github.com/processing/p5.js/issues/2504).\nIt can give the user the hex string color value of the input element and also a p5.Color object with the chosen color so that it may be easily integrated into sketches that use methods which accept p5.Color objects like lerpColor method in p5.js.\n\n### New examples and documentation\n\n- Added a new example and fixed the old example of the loadModel method in [#2968](https://github.com/processing/p5.js/pull/2968). This was to close the[#2904](https://github.com/processing/p5.js/issues/2904) .\n- Changed the model() example in [#3074](https://github.com/processing/p5.js/pull/3074)\n- Added the example and manual test example for createColorPicker method in [#3089](https://github.com/processing/p5.js/pull/3089)\n\n## Conclusion\n\nGSoC'18 was an incredibly enriching experience. I'm happy to know that I was able to successfully contribute to p5.js and close numerous issues and hope that my work will continue to do so in the future. I'd also like to add that I'd love to continue being a part of p5.js in the future after these fulfilling 3 months.\n\n## Acknowledgements\n\nI'd like to thank my mentor, [Alice Mira Chung](https://github.com/almchung) for her guidance, patience and support. I'd also like to thank Lauren McCarthy and others in the p5.js community who helped me successfuly close issues and guided me when I stumbled. Really grateful for having had this oppurtunity and such an encouraging environment.",
          "filepath": "data/repos/processing/p5.js-1.0/contributor_docs/project_wrapups/tanvi_gsoc_2018.md",
          "repo": "processing/p5.js",
          "version": "1.0",
          "chunk_index": 0
        }
      },
      {
        "id": "bf1b5314-13b4-422f-9020-467a46d26948",
        "score": 0.015384615384615385,
        "payload": {
          "text": "\n# Improve p5.js unit tests\n### by Urvashi Verma ([@ihsavru](https://github.com/ihsavru))\n\n## Overview\nThis project focused on improving the unit tests for different modules of p5.js. I spent my summer writing unit tests for different modules. I also worked on integrating the code coverage reports with Codecov through Travis CI. \n\n## Contributions during GSoC'19\nI divided the timeline into smaller periods of a week or two to handle unit tests for each module. Following is a list of PRs submitted:\n#### Core\n- https://github.com/processing/p5.js/pull/3772\n- https://github.com/processing/p5.js/pull/3865\n\n#### Events\n- https://github.com/processing/p5.js/pull/3824\n- https://github.com/processing/p5.js/pull/3814\n- https://github.com/processing/p5.js/pull/3810\n- https://github.com/processing/p5.js/pull/3809\n\n#### Image\n- https://github.com/processing/p5.js/pull/3828\n- https://github.com/processing/p5.js/pull/3829\n- https://github.com/processing/p5.js/pull/3838\n\n#### Typography\n- https://github.com/processing/p5.js/pull/3839\n- https://github.com/processing/p5.js/pull/3844\n\n#### Utilities\n- https://github.com/processing/p5.js/pull/3864\n\n#### WebGL\n- https://github.com/processing/p5.js/pull/3896\n- https://github.com/processing/p5.js/pull/3902\n\n## Code Coverage\nAs of writing this report, the code coverage has been increased to 62.52% (along with an increase of total lines of code) from 50.41%. A summary is given below:\nBefore summer of code:\n```\n=============================== Coverage summary ===============================  \nStatements   : 50.41% ( 4598/9122 )  \nBranches     : 36.51% ( 1375/3766 )  \nFunctions    : 56.49% ( 509/901 )  \nLines        : 50.95% ( 4541/8912 )  \n================================================================================\n```\nAfter summer of code:\n```\n=============================== Coverage summary ===============================  \nStatements   : 62.04% ( 6579/10604 )  \nBranches     : 49.86% ( 2252/4517 )  \nFunctions    : 66.82% ( 707/1058 )  \nLines        : 62.53% ( 6444/10306 )  \n================================================================================\n```\nYou can find more detailed coverage reports for p5.js on [Codecov](https://codecov.io/gh/processing/p5.js)\n\n### Documentation\nI have documented about how to approach writing a unit test in the [developer docs for unit testing](https://github.com/processing/p5.js/blob/master/contributor_docs/unit_testing.md) which was created by my mentor [Evelyn](https://github.com/outofambit).\n\n## Acknowledgements\nI am glad to be able to spend my summer contributing to p5.js. I would like to thank my mentor [Evelyn Masso](https://github.com/outofambit), for her support throughout the summer and for making sure that I had enough opportunities to grow during the project. I would also like to thank other members of the Processing Foundation for this opportunity and their help in making this project successful.\n",
          "filepath": "data/repos/processing/p5.js-1.0/contributor_docs/project_wrapups/urvashi_gsoc_2019.md",
          "repo": "processing/p5.js",
          "version": "1.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "diegomura__react-pdf-471",
    "model_patch": "diff --git a/index.js b/index.js\n--- a/index.js\n+++ b/index.js\n@@ -1,6 +1,7 @@\n import React, { Component } from 'react';\n import { Page, Text, Image, View, Document, StyleSheet } from '@react-pdf/renderer';\n import { PDFViewer, PDFDownloadLink } from '@react-pdf/renderer';\n+import { StyleSheet as StyledStyleSheet } from '@react-pdf/styled-components';\n \n const DefaultPage = styled.Page`\n   flex-direction: row;\n@@ -8,7 +9,7 @@\n `\n const ExampleText1 = styled.Text`\n   border-left-width: 1pt;\n-  border-right-width: 1pt;\n+  border-right-width: 1pt;\n   border-style: solid;\n   border-color: #000;\n   border-collapse: collapse;\n@@ -16,7 +17,7 @@\n `\n const ExampleText2 = styled(ExampleText1)`\n   border-top-width: 1pt;\n-  border-bottom-width: 1pt;\n+  border-bottom-width: 1pt;\n   color: #0f0;\n `\n const ExampleText3 = styled(ExampleText2)`\n@@ -43,7 +44,7 @@\n     )\n   }\n }\n \n-export default PrintBase",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 365.15,
      "issue_embedding_time_ms": 365.15,
      "retrieval_time_ms_jina": 0.94,
      "retrieval_time_ms": 0.94,
      "total_retrieval_time_ms": 366.09,
      "generation_time_ms": 2794.46,
      "total_io_time_ms": 3160.55,
      "input_total_token_limit": null,
      "issue_text_tokens": 686,
      "vlm_tokens": 0,
      "retrieved_tokens": 5477,
      "prompt_template_tokens": 506,
      "total_input_prompt_tokens": 6669,
      "output_generated_tokens": 289,
      "total_io_tokens": 6958,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nProblems with Extending Styled Components\\nI am trying to use the styled components api as described at https://react-pdf.org/styling#styled-components and further extending styles according to https://www.styled-components.com/docs/basics#extending-styles. However I don't see the overridden styles being applied.\\r\\n\\r\\nThis is a simple example that explains things a little better.\\r\\n\\r\\n    import React, { Component } from 'react';\\r\\n    import { Page, Text, Image, View, Document, StyleSheet } from '@react-pdf/renderer';\\r\\n    import { PDFViewer, PDFDownloadLink } from '@react-pdf/renderer';\\r\\n    import styled from '@react-pdf/styled-components';\\r\\n\\r\\n    const DefaultPage = styled.Page`\\r\\n      flex-direction: row;\\r\\n      flex-wrap: wrap;\\r\\n    `\\r\\n    const ExampleText1 = styled.Text`\\r\\n      border-left-width: 1pt;\\r\\n      border-right-width: 1pt;\\r\\n      border-style: solid;\\r\\n      border-color: #000;\\r\\n      border-collapse: collapse;\\r\\n      min-height: 14pt;\\r\\n      color: #f00;\\r\\n    `\\r\\n    const ExampleText2 = styled(ExampleText1)`\\r\\n      border-top-width: 1pt;\\r\\n      border-bottom-width: 1pt;\\r\\n      color: #0f0;\\r\\n    `\\r\\n    const ExampleText3 = styled(ExampleText2)`\\r\\n      border-color: #888;\\r\\n      color: #00f;\\r\\n    `\\r\\n    class ExamplePrint extends Component {\\r\\n      render() {\\r\\n        return (\\r\\n          <Document title=\\\"Example\\\" onRender={blob=>console.log( \\\"Blob\\\", blob )}>\\r\\n            <DefaultPage size=\\\"A4\\\">\\r\\n              <ExampleText1>Text1</ExampleText1>\\r\\n              <ExampleText2>Text2</ExampleText2>\\r\\n              <ExampleText3>Text3</ExampleText3>\\r\\n            </DefaultPage>\\r\\n          </Document>\\r\\n        )\\r\\n      }\\r\\n    }\\r\\n\\r\\n    class PrintBase extends Component {\\r\\n      render() {\\r\\n        const document = <ExamplePrint/>\\r\\n        return(\\r\\n          <div>\\r\\n            <PDFViewer width=\\\"100%\\\" height=\\\"1000\\\">\\r\\n              {document}\\r\\n            </PDFViewer>\\r\\n          </div>\\r\\n        )\\r\\n      }\\r\\n    }\\r\\n\\r\\n    export default PrintBase```\\r\\n\\r\\nI would expect the first text to be red and have borders left and right, the second one to be green with borders all round and the last one to be blue and have lighter borders. However they all come out exactly the same.\\r\\n\\r\\n[Rendered PDF](https://user-images.githubusercontent.com/383834/51480329-aefbb500-1d88-11e9-8b58-3dd8ee9462b6.png)\\r\\n\\r\\nLooking at the layout data in the blob I can see all the various style elements in there but I don't know if they are in the correct format since the structure is an object with a mixture of css property keys and numeric indices mixed in with undefined values.\\r\\n\\r\\n[Chrome Console](https://user-images.githubusercontent.com/383834/51480494-187bc380-1d89-11e9-8955-2f2c8f03f554.png)\\r\\n\\r\\nThis is with react-pdf/renderer and styled components v1.2.0. Unfortunately I can't find any sandbox that seems to working with react-pdf when using styled components.\\n\\n</issue>\\n\\n<code>\\n[start of index.d.ts]\\n/// <reference types=\\\"node\\\" />\\n\\ndeclare module '@react-pdf/renderer' {\\n  import * as React from 'react';\\n\\n  namespace ReactPDF {\\n    interface Style {\\n      [property: string]: any;\\n    }\\n    interface Styles {\\n      [key: string]: Style;\\n    }\\n    type Orientation = 'portrait' | 'landscape';\\n\\n    interface DocumentProps {\\n      title?: string;\\n      author?: string;\\n      subject?: string;\\n      keywords?: string;\\n      creator?: string;\\n      producer?: string;\\n      onRender?: () => any;\\n    }\\n\\n    /**\\n     * This component represent the PDF document itself. It must be the root\\n     * of your tree element structure, and under no circumstances should it be\\n     * used as children of another react-pdf component. In addition, it should\\n     * only have childs of type <Page />.\\n     */\\n    class Document extends React.Component<DocumentProps> {}\\n\\n    interface NodeProps {\\n      style?: Style | Style[];\\n      /**\\n       * Render component in all wrapped pages.\\n       * @see https://react-pdf.org/advanced#fixed-components\\n       */\\n      fixed?: boolean;\\n      /**\\n       * Force the wrapping algorithm to start a new page when rendering the\\n       * element.\\n       * @see https://react-pdf.org/advanced#page-breaks\\n       */\\n      break?: boolean;\\n    }\\n\\n    interface PageProps extends NodeProps {\\n      /**\\n       * Enable page wrapping for this page.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      debug?: boolean;\\n      size?: string | [number, number] | {width: number; height: number};\\n      orientation?: Orientation;\\n      ruler?: boolean;\\n      rulerSteps?: number;\\n      verticalRuler?: boolean;\\n      verticalRulerSteps?: number;\\n      horizontalRuler?: boolean;\\n      horizontalRulerSteps?: number;\\n    }\\n\\n    /**\\n     * Represents single page inside the PDF document, or a subset of them if\\n     * using the wrapping feature. A <Document /> can contain as many pages as\\n     * you want, but ensure not rendering a page inside any component besides\\n     * Document.\\n     */\\n    class Page extends React.Component<PageProps> {}\\n\\n    interface ViewProps extends NodeProps {\\n      /**\\n       * Enable/disable page wrapping for element.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      debug?: boolean;\\n      render?: (props: {pageNumber: number}) => React.ReactNode;\\n      children?: React.ReactNode;\\n    }\\n\\n    /**\\n     * The most fundamental component for building a UI and is designed to be\\n     * nested inside other views and can have 0 to many children.\\n     */\\n    class View extends React.Component<ViewProps> {}\\n\\n    interface ImageProps extends NodeProps {\\n      debug?: boolean;\\n      src: string | {data: Buffer; format: 'png' | 'jpg'};\\n      cache?: boolean;\\n    }\\n\\n    /**\\n     * A React component for displaying network or local (Node only) JPG or\\n     * PNG images, as well as base64 encoded image strings.\\n     */\\n    class Image extends React.Component<ImageProps> {}\\n\\n    interface TextProps extends NodeProps {\\n      /**\\n       * Enable/disable page wrapping for element.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      debug?: boolean;\\n      render?: (\\n        props: {pageNumber: number; totalPages: number},\\n      ) => React.ReactNode;\\n      children?: React.ReactNode;\\n      /**\\n       * How much hyphenated breaks should be avoided.\\n       */\\n      hyphenationCallback?: number;\\n    }\\n\\n    /**\\n     * A React component for displaying text. Text supports nesting of other\\n     * Text or Link components to create inline styling.\\n     */\\n    class Text extends React.Component<TextProps> {}\\n\\n    interface LinkProps extends NodeProps {\\n      /**\\n       * Enable/disable page wrapping for element.\\n       * @see https://react-pdf.org/components#page-wrapping\\n       */\\n      wrap?: boolean;\\n      debug?: boolean;\\n      src: string;\\n      children?: React.ReactNode;\\n    }\\n\\n    /**\\n     * A React component for displaying an hyperlink. Link\\u2019s can be nested\\n     * inside a Text component, or being inside any other valid primitive.\\n     */\\n    class Link extends React.Component<LinkProps> {}\\n\\n    interface NoteProps extends NodeProps {\\n      children: string;\\n    }\\n\\n    class Note extends React.Component<NoteProps> {}\\n\\n    interface BlobProviderParams {\\n      blob: Blob | null;\\n      url: string | null;\\n      loading: boolean;\\n      error: Error | null;\\n    }\\n    interface BlobProviderProps {\\n      document: React.ReactElement<DocumentProps>;\\n      children: (params: BlobProviderParams) => React.ReactNode;\\n    }\\n\\n    /**\\n     * Easy and declarative way of getting document's blob data without\\n     * showing it on screen.\\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\\n     * @platform web\\n     */\\n    class BlobProvider extends React.Component<BlobProviderProps> {}\\n\\n    interface PDFViewerProps {\\n      width?: number;\\n      height?: number;\\n      style?: Style | Style[];\\n      className?: string;\\n      children?: React.ReactElement<DocumentProps>;\\n    }\\n\\n    /**\\n     * Iframe PDF viewer for client-side generated documents.\\n     * @platform web\\n     */\\n    class PDFViewer extends React.Component<PDFViewerProps> {}\\n\\n    interface PDFDownloadLinkProps {\\n      document: React.ReactElement<DocumentProps>;\\n      fileName?: string;\\n      style?: Style | Style[];\\n      className?: string;\\n      children?:\\n        | React.ReactNode\\n        | ((params: BlobProviderParams) => React.ReactNode);\\n    }\\n\\n    /**\\n     * Anchor tag to enable generate and download PDF documents on the fly.\\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\\n     * @platform web\\n     */\\n    class PDFDownloadLink extends React.Component<PDFDownloadLinkProps> {}\\n\\n    interface EmojiSource {\\n      url: string;\\n      format: string;\\n    }\\n    interface RegisteredFont {\\n      src: string;\\n      loaded: boolean;\\n      loading: boolean;\\n      data: any;\\n      [key: string]: any;\\n    }\\n    type HyphenationCallback = (\\n      words: string[],\\n      glyphString: {[key: string]: any},\\n    ) => string[];\\n\\n    const Font: {\\n      register: (\\n        src: string,\\n        options: {family: string; [key: string]: any},\\n      ) => void;\\n      getEmojiSource: () => EmojiSource;\\n      getRegisteredFonts: () => string[];\\n      registerEmojiSource: (emojiSource: EmojiSource) => void;\\n      registerHyphenationCallback: (\\n        hyphenationCallback: HyphenationCallback,\\n      ) => void;\\n      getHyphenationCallback: () => HyphenationCallback;\\n      getFont: (fontFamily: string) => RegisteredFont | undefined;\\n      load: (\\n        fontFamily: string,\\n        document: React.ReactElement<DocumentProps>,\\n      ) => Promise<void>;\\n      clear: () => void;\\n      reset: () => void;\\n    };\\n\\n    const StyleSheet: {\\n      hairlineWidth: number;\\n      create: <TStyles>(styles: TStyles) => TStyles;\\n      resolve: (\\n        style: Style,\\n        container: {\\n          width: number;\\n          height: number;\\n          orientation: Orientation;\\n        },\\n      ) => Style;\\n      flatten: (...style: (Style[] | Style | undefined)[]) => Style\\n      absoluteFillObject: {\\n        position: 'absolute';\\n        left: 0;\\n        right: 0;\\n        top: 0;\\n        bottom: 0;\\n      };\\n    };\\n\\n    const version: any;\\n\\n    const PDFRenderer: any;\\n\\n    const createInstance: (\\n      element: {\\n        type: string;\\n        props: {[key: string]: any};\\n      },\\n      root?: any,\\n    ) => any;\\n\\n    const pdf: (\\n      document: React.ReactElement<DocumentProps>,\\n    ) => {\\n      isDirty: () => boolean;\\n      updateContainer: (document: React.ReactElement<any>) => void;\\n      toBuffer: () => NodeJS.ReadableStream;\\n      toBlob: () => Blob;\\n      toString: () => string;\\n    };\\n\\n    const renderToStream: (\\n      document: React.ReactElement<DocumentProps>,\\n    ) => NodeJS.ReadableStream;\\n\\n    const renderToFile: (\\n      document: React.ReactElement<DocumentProps>,\\n      filePath: string,\\n      callback?: (output: NodeJS.ReadableStream, filePath: string) => any,\\n    ) => Promise<NodeJS.ReadableStream>;\\n\\n    const render: typeof renderToFile;\\n  }\\n\\n  const Document: typeof ReactPDF.Document;\\n  const Page: typeof ReactPDF.Page;\\n  const View: typeof ReactPDF.View;\\n  const Image: typeof ReactPDF.Image;\\n  const Text: typeof ReactPDF.Text;\\n  const Link: typeof ReactPDF.Link;\\n  const Note: typeof ReactPDF.Note;\\n  const Font: typeof ReactPDF.Font;\\n  const StyleSheet: typeof ReactPDF.StyleSheet;\\n  const createInstance: typeof ReactPDF.createInstance;\\n  const PDFRenderer: typeof ReactPDF.PDFRenderer;\\n  const version: typeof ReactPDF.version;\\n  const pdf: typeof ReactPDF.pdf;\\n\\n  export default ReactPDF;\\n  export {\\n    Document,\\n    Page,\\n    View,\\n    Image,\\n    Text,\\n    Link,\\n    Note,\\n    Font,\\n    StyleSheet,\\n    createInstance,\\n    PDFRenderer,\\n    version,\\n    pdf,\\n  };\\n}\\n\\n[end of index.d.ts]\\n[start of index.js]\\n/* eslint react/prop-types: 0 */\\n/* eslint react/jsx-sort-props: 0 */\\n\\nimport React from 'react';\\nimport ReactPDF, {\\n  Document,\\n  Page,\\n  Text,\\n  Image,\\n  StyleSheet,\\n  Font,\\n} from '../../dist/react-pdf.es.js';\\n\\nconst styles = StyleSheet.create({\\n  page: {\\n    flexDirection: 'row',\\n  },\\n  image: {\\n    width: '60%',\\n    padding: 10,\\n    backgroundColor: 'grey',\\n  },\\n  text: {\\n    width: '40%',\\n    backgroundColor: '#f0f0f0',\\n    paddingHorizontal: 50,\\n    paddingVertical: 30,\\n    fontFamily: 'Oswald',\\n    color: '#212121',\\n  },\\n});\\n\\nFont.register(\\n  'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\\n  { family: 'Oswald' },\\n);\\n\\nconst doc = (\\n  <Document>\\n    <Page style={styles.page} size={[1500, 600]} page>\\n      <Image\\n        style={styles.image}\\n        src=\\\"http://blog.oxforddictionaries.com/wp-content/uploads/mountain-names.jpg\\\"\\n      />\\n      <Text style={styles.text}>\\n        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod\\n        tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim\\n        veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea\\n        commodo consequat. Duis aute irure dolor in reprehenderit in voluptate\\n        velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint\\n        occaecat cupidatat non proident, sunt in culpa qui officia deserunt\\n        mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur\\n        adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore\\n        magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco\\n        laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor\\n        in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla\\n        pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa\\n        qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit\\n        amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut\\n        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud\\n        exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\\n        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum\\n        dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non\\n        proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\\n      </Text>\\n    </Page>\\n  </Document>\\n);\\n\\n// Renders document and save it\\nReactPDF.render(doc, `${__dirname}/output.pdf`);\\n\\n[end of index.js]\\n[start of index.js]\\n/* eslint react/prop-types: 0 */\\n/* eslint react/jsx-sort-props: 0 */\\n\\nimport React from 'react';\\nimport ReactPDF, {\\n  Document,\\n  Page,\\n  View,\\n  Text,\\n  Link,\\n  Font,\\n  StyleSheet,\\n} from '../../dist/react-pdf.es.js';\\n\\nconst styles = StyleSheet.create({\\n  title: {\\n    margin: 20,\\n    fontSize: 25,\\n    textAlign: 'center',\\n    backgroundColor: '#e4e4e4',\\n    textTransform: 'uppercase',\\n    fontFamily: 'Roboto',\\n  },\\n  body: {\\n    flexGrow: 1,\\n  },\\n  row: {\\n    flexGrow: 1,\\n    flexDirection: 'row',\\n  },\\n  block: {\\n    flexGrow: 1,\\n  },\\n  text: {\\n    width: '60%',\\n    margin: 10,\\n    fontFamily: 'Oswald',\\n    textAlign: 'justify',\\n  },\\n  fill1: {\\n    width: '40%',\\n    backgroundColor: '#e14427',\\n  },\\n  fill2: {\\n    flexGrow: 2,\\n    backgroundColor: '#e6672d',\\n  },\\n  fill3: {\\n    flexGrow: 2,\\n    backgroundColor: '#e78632',\\n  },\\n  fill4: {\\n    flexGrow: 2,\\n    backgroundColor: '#e29e37',\\n  },\\n});\\n\\nFont.register(`${__dirname}/fonts/Roboto-Regular.ttf`, { family: 'Roboto' });\\nFont.register(\\n  'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\\n  { family: 'Oswald' },\\n);\\n\\nconst doc = (\\n  <Document>\\n    <Page size=\\\"A4\\\">\\n      <Link\\n        style={styles.title}\\n        src=\\\"https://es.wikipedia.org/wiki/Lorem_ipsum\\\"\\n      >\\n        Lorem Ipsum\\n      </Link>\\n      <View style={styles.body}>\\n        <View style={styles.row}>\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n          <View style={styles.fill1} />\\n        </View>\\n        <View style={styles.row}>\\n          <View style={styles.fill2} />\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n        </View>\\n        <View style={styles.row}>\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n          <View style={styles.fill3} />\\n        </View>\\n        <View style={styles.row}>\\n          <View style={styles.fill4} />\\n          <Text style={styles.text}>\\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\\n            reprehenderit in voluptate velit esse cillum.\\n          </Text>\\n        </View>\\n      </View>\\n    </Page>\\n  </Document>\\n);\\n\\nReactPDF.render(doc, `${__dirname}/output.pdf`);\\n\\n[end of index.js]\\n[start of README.md]\\n<p align=\\\"center\\\">\\n  <img src=\\\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\\\" height=\\\"280px\\\">\\n  <p align=\\\"center\\\">React renderer for creating PDF files on the browser and server<p>\\n  <p align=\\\"center\\\">\\n    <a href=\\\"https://www.npmjs.com/package/@react-pdf/renderer\\\">\\n      <img src=\\\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\\\" />\\n    </a>\\n    <a href=\\\"https://travis-ci.org/diegomura/react-pdf\\\">\\n      <img src=\\\"https://img.shields.io/travis/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\\\">\\n      <img src=\\\"https://img.shields.io/github/license/diegomura/react-pdf.svg\\\" />\\n    </a>\\n    <a href=\\\"https://spectrum.chat/react-pdf\\\">\\n      <img src=\\\"https://withspectrum.github.io/badge/badge.svg\\\" />\\n    </a>\\n    <a href=\\\"https://github.com/prettier/prettier\\\">\\n      <img src=\\\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\\\" />\\n    </a>\\n  </p>\\n</p>\\n\\n## How to install\\n```sh\\nyarn add @react-pdf/renderer\\n```\\n\\n## How it works\\n\\n```jsx\\nimport React from 'react';\\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\\n\\n// Create styles\\nconst styles = StyleSheet.create({\\n  page: {\\n    flexDirection: 'row',\\n    backgroundColor: '#E4E4E4'\\n  },\\n  section: {\\n    margin: 10,\\n    padding: 10,\\n    flexGrow: 1\\n  }\\n});\\n\\n// Create Document Component\\nconst MyDocument = () => (\\n  <Document>\\n    <Page size=\\\"A4\\\" style={styles.page}>\\n      <View style={styles.section}>\\n        <Text>Section #1</Text>\\n      </View>\\n      <View style={styles.section}>\\n        <Text>Section #2</Text>\\n      </View>\\n    </Page>\\n  </Document>\\n);\\n```\\n\\n### `Web.` Render in DOM\\n```jsx\\nimport React from 'react';\\nimport ReactDOM from 'react-dom';\\n\\nReactDOM.render(<MyDocument />, document.getElementById('root'));\\n```\\n\\n### `Node.` Save in a file\\n```jsx\\nimport React from 'react';\\nimport ReactPDF from '@react-pdf/renderer';\\n\\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\\n```\\n\\n## Examples\\nFor each example, try opening `output.pdf` to see the result.\\n\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/text/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/text/\\\">Text</a>\\n      </td>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/images/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/images/\\\">Images</a>\\n      </td>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/resume/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/resume/\\\">Resume</a>\\n\\t\\t\\t</td>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/fractals/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/fractals/\\\">Fractals</a>\\n\\t\\t\\t</td>\\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n<table>\\n\\t<tbody>\\n\\t\\t<tr>\\n\\t\\t\\t<td align=\\\"center\\\" valign=\\\"top\\\">\\n\\t\\t\\t\\t<img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/knobs/thumb.png\\\">\\n\\t\\t\\t\\t<br>\\n\\t\\t\\t\\t<a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/knobs/\\\">Knobs</a>\\n\\t\\t\\t</td>\\n      <td align=\\\"center\\\" valign=\\\"top\\\">\\n        <img width=\\\"150\\\" height=\\\"150\\\" src=\\\"https://github.com/diegomura/react-pdf/blob/master/examples/pageWrap/thumb.png\\\">\\n        <br>\\n        <a href=\\\"https://github.com/diegomura/react-pdf/tree/master/examples/pageWrap/\\\">Page wrap</a>\\n      </td>  \\n\\t\\t</tr>\\n\\t</tbody>\\n</table>\\n\\nTo run the examples, first clone the project and install the dependencies:\\n```sh\\ngit clone https://github.com/diegomura/react-pdf.git\\ncd react-pdf\\nyarn install\\n```\\nThen, run `yarn example -- <example-name>`\\n```sh\\nyarn example -- fractals\\n```\\n\\n## Contributors\\n\\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\\n<a href=\\\"https://github.com/diegomura/react-pdf/graphs/contributors\\\"><img src=\\\"https://opencollective.com/react-pdf/contributors.svg?width=890\\\" /></a>\\n\\n## Sponsors\\n\\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#sponsors\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/sponsors.svg?width=890\\\"></a>\\n\\n## Backers\\n\\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\\n\\n<a href=\\\"https://opencollective.com/react-pdf#backers\\\" target=\\\"_blank\\\"><img src=\\\"https://opencollective.com/react-pdf/backers.svg?width=890\\\"></a>\\n\\n## License\\n\\nMIT \\u00a9 [Diego Muracciole](http://github.com/diegomura)\\n\\n[end of README.md]\\n[start of renderer.js]\\n'use strict';\\n\\nimport ReactFiberReconciler from 'react-reconciler';\\nimport emptyObject from 'fbjs/lib/emptyObject';\\nimport { createInstance } from './elements';\\nimport propsEqual from './utils/propsEqual';\\n\\n// If the Link has a strign child or render prop, substitute the instance by a Text,\\n// that will ultimately render the inline Link via the textkit PDF renderer.\\nconst shouldReplaceLink = (type, props) =>\\n  type === 'LINK' &&\\n  (typeof props.children === 'string' ||\\n    Array.isArray(props.children) ||\\n    props.render);\\n\\nconst PDFRenderer = ReactFiberReconciler({\\n  supportsMutation: true,\\n  appendInitialChild(parentInstance, child) {\\n    parentInstance.appendChild(child);\\n  },\\n\\n  createInstance(type, props, internalInstanceHandle) {\\n    const instanceType = shouldReplaceLink(type, props) ? 'TEXT' : type;\\n    return createInstance(\\n      { type: instanceType, props },\\n      internalInstanceHandle,\\n    );\\n  },\\n\\n  createTextInstance(text, rootContainerInstance) {\\n    return createInstance(\\n      { type: 'TEXT_INSTANCE', props: text },\\n      rootContainerInstance,\\n    );\\n  },\\n\\n  finalizeInitialChildren(element, type, props) {\\n    return false;\\n  },\\n\\n  getPublicInstance(instance) {\\n    return instance;\\n  },\\n\\n  prepareForCommit() {\\n    // Noop\\n  },\\n\\n  prepareUpdate(element, type, oldProps, newProps) {\\n    return !propsEqual(oldProps, newProps);\\n  },\\n\\n  resetAfterCommit() {\\n    // Noop\\n  },\\n\\n  resetTextContent(element) {\\n    // Noop\\n  },\\n\\n  getRootHostContext() {\\n    return emptyObject;\\n  },\\n\\n  getChildHostContext() {\\n    return emptyObject;\\n  },\\n\\n  shouldSetTextContent(type, props) {\\n    return false;\\n  },\\n\\n  now: Date.now,\\n\\n  useSyncScheduling: true,\\n\\n  appendChild(parentInstance, child) {\\n    parentInstance.appendChild(child);\\n  },\\n\\n  appendChildToContainer(parentInstance, child) {\\n    parentInstance.appendChild(child);\\n  },\\n\\n  insertBefore(parentInstance, child, beforeChild) {\\n    parentInstance.appendChildBefore(child, beforeChild);\\n  },\\n\\n  removeChild(parentInstance, child) {\\n    parentInstance.removeChild(child);\\n  },\\n\\n  removeChildFromContainer(parentInstance, child) {\\n    parentInstance.removeChild(child);\\n  },\\n\\n  commitTextUpdate(textInstance, oldText, newText) {\\n    textInstance.update(newText);\\n  },\\n\\n  commitUpdate(instance, updatePayload, type, oldProps, newProps) {\\n    instance.update(newProps);\\n  },\\n});\\n\\nexport default PDFRenderer;\\n\\n[end of renderer.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "index.d.ts",
        "index.js",
        "index.js",
        "README.md",
        "renderer.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "d3801cbf-c1aa-4fab-8f50-908d26ab9c19",
        "score": 0.01639344262295082,
        "payload": {
          "text": "/// <reference types=\"node\" />\n\ndeclare module '@react-pdf/renderer' {\n  import * as React from 'react';\n\n  namespace ReactPDF {\n    interface Style {\n      [property: string]: any;\n    }\n    interface Styles {\n      [key: string]: Style;\n    }\n    type Orientation = 'portrait' | 'landscape';\n\n    interface DocumentProps {\n      title?: string;\n      author?: string;\n      subject?: string;\n      keywords?: string;\n      creator?: string;\n      producer?: string;\n      onRender?: () => any;\n    }\n\n    /**\n     * This component represent the PDF document itself. It must be the root\n     * of your tree element structure, and under no circumstances should it be\n     * used as children of another react-pdf component. In addition, it should\n     * only have childs of type <Page />.\n     */\n    class Document extends React.Component<DocumentProps> {}\n\n    interface NodeProps {\n      style?: Style | Style[];\n      /**\n       * Render component in all wrapped pages.\n       * @see https://react-pdf.org/advanced#fixed-components\n       */\n      fixed?: boolean;\n      /**\n       * Force the wrapping algorithm to start a new page when rendering the\n       * element.\n       * @see https://react-pdf.org/advanced#page-breaks\n       */\n      break?: boolean;\n    }\n\n    interface PageProps extends NodeProps {\n      /**\n       * Enable page wrapping for this page.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      debug?: boolean;\n      size?: string | [number, number] | {width: number; height: number};\n      orientation?: Orientation;\n      ruler?: boolean;\n      rulerSteps?: number;\n      verticalRuler?: boolean;\n      verticalRulerSteps?: number;\n      horizontalRuler?: boolean;\n      horizontalRulerSteps?: number;\n    }\n\n    /**\n     * Represents single page inside the PDF document, or a subset of them if\n     * using the wrapping feature. A <Document /> can contain as many pages as\n     * you want, but ensure not rendering a page inside any component besides\n     * Document.\n     */\n    class Page extends React.Component<PageProps> {}\n\n    interface ViewProps extends NodeProps {\n      /**\n       * Enable/disable page wrapping for element.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      debug?: boolean;\n      render?: (props: {pageNumber: number}) => React.ReactNode;\n      children?: React.ReactNode;\n    }\n\n    /**\n     * The most fundamental component for building a UI and is designed to be\n     * nested inside other views and can have 0 to many children.\n     */\n    class View extends React.Component<ViewProps> {}\n\n    interface ImageProps extends NodeProps {\n      debug?: boolean;\n      src: string | {data: Buffer; format: 'png' | 'jpg'};\n      cache?: boolean;\n    }\n\n    /**\n     * A React component for displaying network or local (Node only) JPG or\n     * PNG images, as well as base64 encoded image strings.\n     */\n    class Image extends React.Component<ImageProps> {}\n\n    interface TextProps extends NodeProps {\n      /**\n       * Enable/disable page wrapping for element.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      debug?: boolean;\n      render?: (\n        props: {pageNumber: number; totalPages: number},\n      ) => React.ReactNode;\n      children?: React.ReactNode;\n      /**\n       * How much hyphenated breaks should be avoided.\n       */\n      hyphenationCallback?: number;\n    }\n\n    /**\n     * A React component for displaying text. Text supports nesting of other\n     * Text or Link components to create inline styling.\n     */\n    class Text extends React.Component<TextProps> {}\n\n    interface LinkProps extends NodeProps {\n      /**\n       * Enable/disable page wrapping for element.\n       * @see https://react-pdf.org/components#page-wrapping\n       */\n      wrap?: boolean;\n      debug?: boolean;\n      src: string;\n      children?: React.ReactNode;\n    }\n\n    /**\n     * A React component for displaying an hyperlink. Link\u2019s can be nested\n     * inside a Text component, or being inside any other valid primitive.\n     */\n    class Link extends React.Component<LinkProps> {}\n\n    interface NoteProps extends NodeProps {\n      children: string;\n    }\n\n    class Note extends React.Component<NoteProps> {}\n\n    interface BlobProviderParams {\n      blob: Blob | null;\n      url: string | null;\n      loading: boolean;\n      error: Error | null;\n    }\n    interface BlobProviderProps {\n      document: React.ReactElement<DocumentProps>;\n      children: (params: BlobProviderParams) => React.ReactNode;\n    }\n\n    /**\n     * Easy and declarative way of getting document's blob data without\n     * showing it on screen.\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\n     * @platform web\n     */\n    class BlobProvider extends React.Component<BlobProviderProps> {}\n\n    interface PDFViewerProps {\n      width?: number;\n      height?: number;\n      style?: Style | Style[];\n      className?: string;\n      children?: React.ReactElement<DocumentProps>;\n    }\n\n    /**\n     * Iframe PDF viewer for client-side generated documents.\n     * @platform web\n     */\n    class PDFViewer extends React.Component<PDFViewerProps> {}\n\n    interface PDFDownloadLinkProps {\n      document: React.ReactElement<DocumentProps>;\n      fileName?: string;\n      style?: Style | Style[];\n      className?: string;\n      children?:\n        | React.ReactNode\n        | ((params: BlobProviderParams) => React.ReactNode);\n    }\n\n    /**\n     * Anchor tag to enable generate and download PDF documents on the fly.\n     * @see https://react-pdf.org/advanced#on-the-fly-rendering\n     * @platform web\n     */\n    class PDFDownloadLink extends React.Component<PDFDownloadLinkProps> {}\n\n    interface EmojiSource {\n      url: string;\n      format: string;\n    }\n    interface RegisteredFont {\n      src: string;\n      loaded: boolean;\n      loading: boolean;\n      data: any;\n      [key: string]: any;\n    }\n    type HyphenationCallback = (\n      words: string[],\n      glyphString: {[key: string]: any},\n    ) => string[];\n\n    const Font: {\n      register: (\n        src: string,\n        options: {family: string; [key: string]: any},\n      ) => void;\n      getEmojiSource: () => EmojiSource;\n      getRegisteredFonts: () => string[];\n      registerEmojiSource: (emojiSource: EmojiSource) => void;\n      registerHyphenationCallback: (\n        hyphenationCallback: HyphenationCallback,\n      ) => void;\n      getHyphenationCallback: () => HyphenationCallback;\n      getFont: (fontFamily: string) => RegisteredFont | undefined;\n      load: (\n        fontFamily: string,\n        document: React.ReactElement<DocumentProps>,\n      ) => Promise<void>;\n      clear: () => void;\n      reset: () => void;\n    };\n\n    const StyleSheet: {\n      hairlineWidth: number;\n      create: <TStyles>(styles: TStyles) => TStyles;\n      resolve: (\n        style: Style,\n        container: {\n          width: number;\n          height: number;\n          orientation: Orientation;\n        },\n      ) => Style;\n      flatten: (...style: (Style[] | Style | undefined)[]) => Style\n      absoluteFillObject: {\n        position: 'absolute';\n        left: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n      };\n    };\n\n    const version: any;\n\n    const PDFRenderer: any;\n\n    const createInstance: (\n      element: {\n        type: string;\n        props: {[key: string]: any};\n      },\n      root?: any,\n    ) => any;\n\n    const pdf: (\n      document: React.ReactElement<DocumentProps>,\n    ) => {\n      isDirty: () => boolean;\n      updateContainer: (document: React.ReactElement<any>) => void;\n      toBuffer: () => NodeJS.ReadableStream;\n      toBlob: () => Blob;\n      toString: () => string;\n    };\n\n    const renderToStream: (\n      document: React.ReactElement<DocumentProps>,\n    ) => NodeJS.ReadableStream;\n\n    const renderToFile: (\n      document: React.ReactElement<DocumentProps>,\n      filePath: string,\n      callback?: (output: NodeJS.ReadableStream, filePath: string) => any,\n    ) => Promise<NodeJS.ReadableStream>;\n\n    const render: typeof renderToFile;\n  }\n\n  const Document: typeof ReactPDF.Document;\n  const Page: typeof ReactPDF.Page;\n  const View: typeof ReactPDF.View;\n  const Image: typeof ReactPDF.Image;\n  const Text: typeof ReactPDF.Text;\n  const Link: typeof ReactPDF.Link;\n  const Note: typeof ReactPDF.Note;\n  const Font: typeof ReactPDF.Font;\n  const StyleSheet: typeof ReactPDF.StyleSheet;\n  const createInstance: typeof ReactPDF.createInstance;\n  const PDFRenderer: typeof ReactPDF.PDFRenderer;\n  const version: typeof ReactPDF.version;\n  const pdf: typeof ReactPDF.pdf;\n\n  export default ReactPDF;\n  export {\n    Document,\n    Page,\n    View,\n    Image,\n    Text,\n    Link,\n    Note,\n    Font,\n    StyleSheet,\n    createInstance,\n    PDFRenderer,\n    version,\n    pdf,\n  };\n}\n",
          "filepath": "data/repos/diegomura/react-pdf-1.2/index.d.ts",
          "repo": "diegomura/react-pdf",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "82e9f05a-9d65-4ab9-baf2-5ca0e28711ee",
        "score": 0.016129032258064516,
        "payload": {
          "text": "/* eslint react/prop-types: 0 */\n/* eslint react/jsx-sort-props: 0 */\n\nimport React from 'react';\nimport ReactPDF, {\n  Document,\n  Page,\n  Text,\n  Image,\n  StyleSheet,\n  Font,\n} from '../../dist/react-pdf.es.js';\n\nconst styles = StyleSheet.create({\n  page: {\n    flexDirection: 'row',\n  },\n  image: {\n    width: '60%',\n    padding: 10,\n    backgroundColor: 'grey',\n  },\n  text: {\n    width: '40%',\n    backgroundColor: '#f0f0f0',\n    paddingHorizontal: 50,\n    paddingVertical: 30,\n    fontFamily: 'Oswald',\n    color: '#212121',\n  },\n});\n\nFont.register(\n  'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\n  { family: 'Oswald' },\n);\n\nconst doc = (\n  <Document>\n    <Page style={styles.page} size={[1500, 600]} page>\n      <Image\n        style={styles.image}\n        src=\"http://blog.oxforddictionaries.com/wp-content/uploads/mountain-names.jpg\"\n      />\n      <Text style={styles.text}>\n        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod\n        tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim\n        veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea\n        commodo consequat. Duis aute irure dolor in reprehenderit in voluptate\n        velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint\n        occaecat cupidatat non proident, sunt in culpa qui officia deserunt\n        mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur\n        adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore\n        magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco\n        laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor\n        in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla\n        pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa\n        qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit\n        amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut\n        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud\n        exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\n        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum\n        dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non\n        proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n      </Text>\n    </Page>\n  </Document>\n);\n\n// Renders document and save it\nReactPDF.render(doc, `${__dirname}/output.pdf`);\n",
          "filepath": "data/repos/diegomura/react-pdf-1.2/examples/images/index.js",
          "repo": "diegomura/react-pdf",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "12068a9c-c557-44bd-b685-8faaf264e911",
        "score": 0.015873015873015872,
        "payload": {
          "text": "/* eslint react/prop-types: 0 */\n/* eslint react/jsx-sort-props: 0 */\n\nimport React from 'react';\nimport ReactPDF, {\n  Document,\n  Page,\n  View,\n  Text,\n  Link,\n  Font,\n  StyleSheet,\n} from '../../dist/react-pdf.es.js';\n\nconst styles = StyleSheet.create({\n  title: {\n    margin: 20,\n    fontSize: 25,\n    textAlign: 'center',\n    backgroundColor: '#e4e4e4',\n    textTransform: 'uppercase',\n    fontFamily: 'Roboto',\n  },\n  body: {\n    flexGrow: 1,\n  },\n  row: {\n    flexGrow: 1,\n    flexDirection: 'row',\n  },\n  block: {\n    flexGrow: 1,\n  },\n  text: {\n    width: '60%',\n    margin: 10,\n    fontFamily: 'Oswald',\n    textAlign: 'justify',\n  },\n  fill1: {\n    width: '40%',\n    backgroundColor: '#e14427',\n  },\n  fill2: {\n    flexGrow: 2,\n    backgroundColor: '#e6672d',\n  },\n  fill3: {\n    flexGrow: 2,\n    backgroundColor: '#e78632',\n  },\n  fill4: {\n    flexGrow: 2,\n    backgroundColor: '#e29e37',\n  },\n});\n\nFont.register(`${__dirname}/fonts/Roboto-Regular.ttf`, { family: 'Roboto' });\nFont.register(\n  'https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf',\n  { family: 'Oswald' },\n);\n\nconst doc = (\n  <Document>\n    <Page size=\"A4\">\n      <Link\n        style={styles.title}\n        src=\"https://es.wikipedia.org/wiki/Lorem_ipsum\"\n      >\n        Lorem Ipsum\n      </Link>\n      <View style={styles.body}>\n        <View style={styles.row}>\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n          <View style={styles.fill1} />\n        </View>\n        <View style={styles.row}>\n          <View style={styles.fill2} />\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n        </View>\n        <View style={styles.row}>\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n          <View style={styles.fill3} />\n        </View>\n        <View style={styles.row}>\n          <View style={styles.fill4} />\n          <Text style={styles.text}>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do\n            eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim\n            ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n            aliquip ex ea commodo consequat. Duis aute irure dolor in\n            reprehenderit in voluptate velit esse cillum.\n          </Text>\n        </View>\n      </View>\n    </Page>\n  </Document>\n);\n\nReactPDF.render(doc, `${__dirname}/output.pdf`);\n",
          "filepath": "data/repos/diegomura/react-pdf-1.2/examples/text/index.js",
          "repo": "diegomura/react-pdf",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "3e6390d3-2c5c-40d8-aff3-1635f2cc4b4b",
        "score": 0.015625,
        "payload": {
          "text": "<p align=\"center\">\n  <img src=\"https://user-images.githubusercontent.com/5600341/27505816-c8bc37aa-587f-11e7-9a86-08a2d081a8b9.png\" height=\"280px\">\n  <p align=\"center\">React renderer for creating PDF files on the browser and server<p>\n  <p align=\"center\">\n    <a href=\"https://www.npmjs.com/package/@react-pdf/renderer\">\n      <img src=\"https://img.shields.io/npm/v/@react-pdf/renderer.svg\" />\n    </a>\n    <a href=\"https://travis-ci.org/diegomura/react-pdf\">\n      <img src=\"https://img.shields.io/travis/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://github.com/diegomura/react-pdf/blob/master/LICENSE\">\n      <img src=\"https://img.shields.io/github/license/diegomura/react-pdf.svg\" />\n    </a>\n    <a href=\"https://spectrum.chat/react-pdf\">\n      <img src=\"https://withspectrum.github.io/badge/badge.svg\" />\n    </a>\n    <a href=\"https://github.com/prettier/prettier\">\n      <img src=\"https://img.shields.io/badge/styled_with-prettier-ff69b4.svg\" />\n    </a>\n  </p>\n</p>\n\n## How to install\n```sh\nyarn add @react-pdf/renderer\n```\n\n## How it works\n\n```jsx\nimport React from 'react';\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\n\n// Create styles\nconst styles = StyleSheet.create({\n  page: {\n    flexDirection: 'row',\n    backgroundColor: '#E4E4E4'\n  },\n  section: {\n    margin: 10,\n    padding: 10,\n    flexGrow: 1\n  }\n});\n\n// Create Document Component\nconst MyDocument = () => (\n  <Document>\n    <Page size=\"A4\" style={styles.page}>\n      <View style={styles.section}>\n        <Text>Section #1</Text>\n      </View>\n      <View style={styles.section}>\n        <Text>Section #2</Text>\n      </View>\n    </Page>\n  </Document>\n);\n```\n\n### `Web.` Render in DOM\n```jsx\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nReactDOM.render(<MyDocument />, document.getElementById('root'));\n```\n\n### `Node.` Save in a file\n```jsx\nimport React from 'react';\nimport ReactPDF from '@react-pdf/renderer';\n\nReactPDF.render(<MyDocument />, `${__dirname}/example.pdf`);\n```\n\n## Examples\nFor each example, try opening `output.pdf` to see the result.\n\n<table>\n\t<tbody>\n\t\t<tr>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/text/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/text/\">Text</a>\n      </td>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/images/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/images/\">Images</a>\n      </td>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/resume/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/resume/\">Resume</a>\n\t\t\t</td>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/fractals/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/fractals/\">Fractals</a>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n<table>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td align=\"center\" valign=\"top\">\n\t\t\t\t<img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/knobs/thumb.png\">\n\t\t\t\t<br>\n\t\t\t\t<a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/knobs/\">Knobs</a>\n\t\t\t</td>\n      <td align=\"center\" valign=\"top\">\n        <img width=\"150\" height=\"150\" src=\"https://github.com/diegomura/react-pdf/blob/master/examples/pageWrap/thumb.png\">\n        <br>\n        <a href=\"https://github.com/diegomura/react-pdf/tree/master/examples/pageWrap/\">Page wrap</a>\n      </td>  \n\t\t</tr>\n\t</tbody>\n</table>\n\nTo run the examples, first clone the project and install the dependencies:\n```sh\ngit clone https://github.com/diegomura/react-pdf.git\ncd react-pdf\nyarn install\n```\nThen, run `yarn example -- <example-name>`\n```sh\nyarn example -- fractals\n```\n\n## Contributors\n\nThis project exists thanks to all the people who contribute. [[Contribute]](CONTRIBUTING.md).\n<a href=\"https://github.com/diegomura/react-pdf/graphs/contributors\"><img src=\"https://opencollective.com/react-pdf/contributors.svg?width=890\" /></a>\n\n## Sponsors\n\nThank you to all our sponsors! [[Become a sponsors](https://opencollective.com/react-pdf#sponsors)]\n\n<a href=\"https://opencollective.com/react-pdf#sponsors\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/sponsors.svg?width=890\"></a>\n\n## Backers\n\nThank you to all our backers! [[Become a backer](https://opencollective.com/react-pdf#backer)]\n\n<a href=\"https://opencollective.com/react-pdf#backers\" target=\"_blank\"><img src=\"https://opencollective.com/react-pdf/backers.svg?width=890\"></a>\n\n## License\n\nMIT \u00a9 [Diego Muracciole](http://github.com/diegomura)\n",
          "filepath": "data/repos/diegomura/react-pdf-1.2/README.md",
          "repo": "diegomura/react-pdf",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "128e41a7-4165-4721-8f77-9f11d38b2771",
        "score": 0.015384615384615385,
        "payload": {
          "text": "'use strict';\n\nimport ReactFiberReconciler from 'react-reconciler';\nimport emptyObject from 'fbjs/lib/emptyObject';\nimport { createInstance } from './elements';\nimport propsEqual from './utils/propsEqual';\n\n// If the Link has a strign child or render prop, substitute the instance by a Text,\n// that will ultimately render the inline Link via the textkit PDF renderer.\nconst shouldReplaceLink = (type, props) =>\n  type === 'LINK' &&\n  (typeof props.children === 'string' ||\n    Array.isArray(props.children) ||\n    props.render);\n\nconst PDFRenderer = ReactFiberReconciler({\n  supportsMutation: true,\n  appendInitialChild(parentInstance, child) {\n    parentInstance.appendChild(child);\n  },\n\n  createInstance(type, props, internalInstanceHandle) {\n    const instanceType = shouldReplaceLink(type, props) ? 'TEXT' : type;\n    return createInstance(\n      { type: instanceType, props },\n      internalInstanceHandle,\n    );\n  },\n\n  createTextInstance(text, rootContainerInstance) {\n    return createInstance(\n      { type: 'TEXT_INSTANCE', props: text },\n      rootContainerInstance,\n    );\n  },\n\n  finalizeInitialChildren(element, type, props) {\n    return false;\n  },\n\n  getPublicInstance(instance) {\n    return instance;\n  },\n\n  prepareForCommit() {\n    // Noop\n  },\n\n  prepareUpdate(element, type, oldProps, newProps) {\n    return !propsEqual(oldProps, newProps);\n  },\n\n  resetAfterCommit() {\n    // Noop\n  },\n\n  resetTextContent(element) {\n    // Noop\n  },\n\n  getRootHostContext() {\n    return emptyObject;\n  },\n\n  getChildHostContext() {\n    return emptyObject;\n  },\n\n  shouldSetTextContent(type, props) {\n    return false;\n  },\n\n  now: Date.now,\n\n  useSyncScheduling: true,\n\n  appendChild(parentInstance, child) {\n    parentInstance.appendChild(child);\n  },\n\n  appendChildToContainer(parentInstance, child) {\n    parentInstance.appendChild(child);\n  },\n\n  insertBefore(parentInstance, child, beforeChild) {\n    parentInstance.appendChildBefore(child, beforeChild);\n  },\n\n  removeChild(parentInstance, child) {\n    parentInstance.removeChild(child);\n  },\n\n  removeChildFromContainer(parentInstance, child) {\n    parentInstance.removeChild(child);\n  },\n\n  commitTextUpdate(textInstance, oldText, newText) {\n    textInstance.update(newText);\n  },\n\n  commitUpdate(instance, updatePayload, type, oldProps, newProps) {\n    instance.update(newProps);\n  },\n});\n\nexport default PDFRenderer;\n",
          "filepath": "data/repos/diegomura/react-pdf-1.2/src/renderer.js",
          "repo": "diegomura/react-pdf",
          "version": "1.2",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-2483",
    "model_patch": "diff --git a/marked.esm.js b/marked.esm.js\nindex 5d6f7a8..c3b9e1f 100644\n--- a/marked.esm.js\n+++ b/marked.esm.js\n@@ -420,7 +420,7 @@ class Tokenizer {\n           // Until we encounter a blank line, item contents do not need indentation\n           if (!blankLine) {\n             if (!line.trim()) { // Check if current line is empty\n-              blankLine = true;\n+              blankLine = true; // Allow blank lines in code blocks within lists\n             }\n \n             // Dedent if possible\n@@ -429,7 +429,7 @@ class Tokenizer {\n               itemContents += '\\n' + line;\n             }\n             continue;\n-          }\n+          } // End of blank line handling\n \n           // Dedent this line\n           if (line.search(/[^ ]/) >= indent || !line.trim()) {\ndiff --git a/Tokenizer.js b/Tokenizer.js\nindex 5d6f7a8..c3b9e1f 100644\n--- a/Tokenizer.js\n+++ b/Tokenizer.js\n@@ -429,7 +429,7 @@ export class Tokenizer {\n               itemContents += '\\n' + line;\n             }\n             continue;\n-          }\n+          } // End of blank line handling\n \n           // Dedent this line\n           if (line.search(/[^ ]/) >= indent || !line.trim()) {",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 582.11,
      "issue_embedding_time_ms": 582.11,
      "retrieval_time_ms_jina": 0.98,
      "retrieval_time_ms": 0.98,
      "total_retrieval_time_ms": 583.09,
      "generation_time_ms": 7025.74,
      "total_io_time_ms": 7608.83,
      "input_total_token_limit": null,
      "issue_text_tokens": 1097,
      "vlm_tokens": 0,
      "retrieved_tokens": 26456,
      "prompt_template_tokens": 515,
      "total_input_prompt_tokens": 28068,
      "output_generated_tokens": 321,
      "total_io_tokens": 28389,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\n[BUG] The fenced code block that follows the list is strange.\\n**Marked version:**\\r\\n4.0.16\\r\\n\\r\\n**Describe the bug**\\r\\nThe fenced code block that follows the list is strange.\\r\\nIf code block contains blankline, it is not judged as code block.\\r\\n\\r\\n**To Reproduce**\\r\\n\\r\\n![repro1](https://user-images.githubusercontent.com/80378/169825319-7f786584-0be3-4694-8962-530731a28ad0.png)\\r\\n\\r\\n[Marked Demo permalink](https://marked.js.org/demo/?outputType=html&text=-%20abc%0A%60%60%60ruby%0Aa%0A%0Ab%0A%60%60%60%0A&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20false%2C%0A%20%22extensions%22%3A%20null%2C%0A%20%22gfm%22%3A%20true%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22walkTokens%22%3A%20null%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=4.0.16)\\r\\n\\r\\n[CommonMark Dingus permalink](https://spec.commonmark.org/dingus/?text=-%20abc%0A%60%60%60ruby%0Aa%0A%0Ab%0A%60%60%60%0A)\\r\\n\\r\\n----\\r\\n\\r\\n**If there is no blankline, no problem.**\\r\\n\\r\\n[Marked Demo permalink](https://marked.js.org/demo/?outputType=html&text=-%20abc%0A%60%60%60ruby%0Aa%0Ab%0A%60%60%60%0A&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20false%2C%0A%20%22extensions%22%3A%20null%2C%0A%20%22gfm%22%3A%20true%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22walkTokens%22%3A%20null%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=4.0.16)\\r\\n\\r\\n**Expected behavior**\\r\\nFences that follow the list should ignore blank lines.\\r\\nI want the following HTML output.\\r\\n\\r\\n```html\\r\\n<ul>\\r\\n<li>abc<pre><code class=\\\"language-ruby\\\">a\\r\\n\\r\\nb\\r\\n</code></pre>\\r\\n</li>\\r\\n</ul>\\r\\n```\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of broken.md]\\n# Markdown is broken\\n\\nI have a lot of scraps of markdown engine oddities that I've collected over the\\nyears. What you see below is slightly messy, but it's what I've managed to\\ncobble together to illustrate the differences between markdown engines, and\\nwhy, if there ever is a markdown specification, it has to be absolutely\\nthorough. There are a lot more of these little differences I have documented\\nelsewhere. I know I will find them lingering on my disk one day, but until\\nthen, I'll continue to add whatever strange nonsensical things I find.\\n\\nSome of these examples may only mention a particular engine compared to marked.\\nHowever, the examples with markdown.pl could easily be swapped out for\\ndiscount, upskirt, or markdown.js, and you would very easily see even more\\ninconsistencies.\\n\\nA lot of this was written when I was very unsatisfied with the inconsistencies\\nbetween markdown engines. Please excuse the frustration noticeable in my\\nwriting.\\n\\n## Examples of markdown's \\\"stupid\\\" list parsing\\n\\n```\\n$ markdown.pl\\n\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n\\n<ul>\\n<li>item2</li>\\n</ul>\\n\\n<p><p>text</p></li>\\n</ul></p>\\n```\\n\\n\\n```\\n$ marked\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n<ul>\\n<li>item2</li>\\n</ul>\\n<p>text</p>\\n</li>\\n</ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\n```\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\n```\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello<blockquote>\\n<p>world</p>\\n</blockquote>\\n</li>\\n</ul>\\n```\\n\\nAgain, which looks correct to you?\\n\\n- - -\\n\\nEXAMPLE:\\n\\n```\\n$ markdown.pl\\n* hello\\n  * world\\n    * hi\\n          code\\n^D\\n<ul>\\n<li>hello\\n<ul>\\n<li>world</li>\\n<li>hi\\n  code</li>\\n</ul></li>\\n</ul>\\n```\\n\\nThe code isn't a code block even though it's after the bullet margin. I know,\\nlets give it two more spaces, effectively making it 8 spaces past the bullet.\\n\\n```\\n$ markdown.pl\\n* hello\\n  * world\\n    * hi\\n            code\\n^D\\n<ul>\\n<li>hello\\n<ul>\\n<li>world</li>\\n<li>hi\\n    code</li>\\n</ul></li>\\n</ul>\\n```\\n\\nAnd, it's still not a code block. Did you also notice that the 3rd item isn't\\neven its own list? Markdown screws that up too because of its indentation\\nunaware parsing.\\n\\n- - -\\n\\nLet's look at some more examples of markdown's list parsing:\\n\\n```\\n$ markdown.pl\\n\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n\\n<ul>\\n<li>item2</li>\\n</ul>\\n\\n<p><p>text</p></li>\\n</ul></p>\\n```\\n\\nMisnested tags.\\n\\n\\n```\\n$ marked\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n<ul>\\n<li>item2</li>\\n</ul>\\n<p>text</p>\\n</li>\\n</ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\n```\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\nMore misnested tags.\\n\\n\\n```\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello<blockquote>\\n<p>world</p>\\n</blockquote>\\n</li>\\n</ul>\\n```\\n\\nAgain, which looks correct to you?\\n\\n- - -\\n\\n# Why quality matters - Part 2\\n\\n``` bash\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\n``` bash\\n$ sundown # upskirt\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello\\n&gt; world</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul><li>hello <blockquote><p>world</p></blockquote></li></ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/23\\n\\n``` bash\\n$ markdown.pl # upskirt/markdown.js/discount\\n* hello\\n      var a = 1;\\n* world\\n^D\\n<ul>\\n<li>hello\\nvar a = 1;</li>\\n<li>world</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n      var a = 1;\\n* world\\n^D\\n<ul><li>hello\\n<pre>code>var a = 1;</code></pre></li>\\n<li>world</li></ul>\\n```\\n\\nWhich looks more reasonable? Why shouldn't code blocks be able to appear in\\nlist items in a sane way?\\n\\n- - -\\n\\n``` bash\\n$ markdown.js\\n<div>hello</div>\\n\\n<span>hello</span>\\n^D\\n<p>&lt;div&gt;hello&lt;/div&gt;</p>\\n\\n<p>&lt;span&gt;hello&lt;/span&gt;</p>\\n```\\n\\n``` bash\\n$ marked\\n<div>hello</div>\\n\\n<span>hello</span>\\n^D\\n<div>hello</div>\\n\\n\\n<p><span>hello</span>\\n</p>\\n```\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/27\\n\\n``` bash\\n$ markdown.js\\n[![an image](/image)](/link)\\n^D\\n<p><a href=\\\"/image)](/link\\\">![an image</a></p>\\n```\\n\\n``` bash\\n$ marked\\n[![an image](/image)](/link)\\n^D\\n<p><a href=\\\"/link\\\"><img src=\\\"/image\\\" alt=\\\"an image\\\"></a>\\n</p>\\n```\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/24\\n\\n``` bash\\n$ markdown.js\\n> a\\n\\n> b\\n\\n> c\\n^D\\n<blockquote><p>a</p><p>bundefined&gt; c</p></blockquote>\\n```\\n\\n``` bash\\n$ marked\\n> a\\n\\n> b\\n\\n> c\\n^D\\n<blockquote><p>a\\n\\n</p></blockquote>\\n<blockquote><p>b\\n\\n</p></blockquote>\\n<blockquote><p>c\\n</p></blockquote>\\n```\\n\\n- - -\\n\\n``` bash\\n$ markdown.pl\\n* hello\\n  * world\\n    how\\n\\n    are\\n    you\\n\\n  * today\\n* hi\\n^D\\n<ul>\\n<li><p>hello</p>\\n\\n<ul>\\n<li>world\\nhow</li>\\n</ul>\\n\\n<p>are\\nyou</p>\\n\\n<ul>\\n<li>today</li>\\n</ul></li>\\n<li>hi</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n  * world\\n    how\\n\\n    are\\n    you\\n\\n  * today\\n* hi\\n^D\\n<ul>\\n<li><p>hello</p>\\n<ul>\\n<li><p>world\\nhow</p>\\n<p>are\\nyou</p>\\n</li>\\n<li><p>today</p>\\n</li>\\n</ul>\\n</li>\\n<li>hi</li>\\n</ul>\\n```\\n\\n[end of broken.md]\\n[start of marked.esm.js]\\n/**\\n * marked - a markdown parser\\n * Copyright (c) 2011-2021, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n\\n/**\\n * DO NOT EDIT THIS FILE\\n * The code in this file is generated from files in ./src/\\n */\\n\\nfunction getDefaults() {\\n  return {\\n    baseUrl: null,\\n    breaks: false,\\n    extensions: null,\\n    gfm: true,\\n    headerIds: true,\\n    headerPrefix: '',\\n    highlight: null,\\n    langPrefix: 'language-',\\n    mangle: true,\\n    pedantic: false,\\n    renderer: null,\\n    sanitize: false,\\n    sanitizer: null,\\n    silent: false,\\n    smartLists: false,\\n    smartypants: false,\\n    tokenizer: null,\\n    walkTokens: null,\\n    xhtml: false\\n  };\\n}\\n\\nlet defaults = getDefaults();\\n\\nfunction changeDefaults(newDefaults) {\\n  defaults = newDefaults;\\n}\\n\\n/**\\n * Helpers\\n */\\nconst escapeTest = /[&<>\\\"']/;\\nconst escapeReplace = /[&<>\\\"']/g;\\nconst escapeTestNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/;\\nconst escapeReplaceNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/g;\\nconst escapeReplacements = {\\n  '&': '&amp;',\\n  '<': '&lt;',\\n  '>': '&gt;',\\n  '\\\"': '&quot;',\\n  \\\"'\\\": '&#39;'\\n};\\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\\nfunction escape(html, encode) {\\n  if (encode) {\\n    if (escapeTest.test(html)) {\\n      return html.replace(escapeReplace, getEscapeReplacement);\\n    }\\n  } else {\\n    if (escapeTestNoEncode.test(html)) {\\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\\n    }\\n  }\\n\\n  return html;\\n}\\n\\nconst unescapeTest = /&(#(?:\\\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\\\w+));?/ig;\\n\\nfunction unescape(html) {\\n  // explicitly match decimal, hex, and named HTML entities\\n  return html.replace(unescapeTest, (_, n) => {\\n    n = n.toLowerCase();\\n    if (n === 'colon') return ':';\\n    if (n.charAt(0) === '#') {\\n      return n.charAt(1) === 'x'\\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\\n        : String.fromCharCode(+n.substring(1));\\n    }\\n    return '';\\n  });\\n}\\n\\nconst caret = /(^|[^\\\\[])\\\\^/g;\\nfunction edit(regex, opt) {\\n  regex = regex.source || regex;\\n  opt = opt || '';\\n  const obj = {\\n    replace: (name, val) => {\\n      val = val.source || val;\\n      val = val.replace(caret, '$1');\\n      regex = regex.replace(name, val);\\n      return obj;\\n    },\\n    getRegex: () => {\\n      return new RegExp(regex, opt);\\n    }\\n  };\\n  return obj;\\n}\\n\\nconst nonWordAndColonTest = /[^\\\\w:]/g;\\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\\nfunction cleanUrl(sanitize, base, href) {\\n  if (sanitize) {\\n    let prot;\\n    try {\\n      prot = decodeURIComponent(unescape(href))\\n        .replace(nonWordAndColonTest, '')\\n        .toLowerCase();\\n    } catch (e) {\\n      return null;\\n    }\\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\\n      return null;\\n    }\\n  }\\n  if (base && !originIndependentUrl.test(href)) {\\n    href = resolveUrl(base, href);\\n  }\\n  try {\\n    href = encodeURI(href).replace(/%25/g, '%');\\n  } catch (e) {\\n    return null;\\n  }\\n  return href;\\n}\\n\\nconst baseUrls = {};\\nconst justDomain = /^[^:]+:\\\\/*[^/]*$/;\\nconst protocol = /^([^:]+:)[\\\\s\\\\S]*$/;\\nconst domain = /^([^:]+:\\\\/*[^/]*)[\\\\s\\\\S]*$/;\\n\\nfunction resolveUrl(base, href) {\\n  if (!baseUrls[' ' + base]) {\\n    // we can ignore everything in base after the last slash of its path component,\\n    // but we might need to add _that_\\n    // https://tools.ietf.org/html/rfc3986#section-3\\n    if (justDomain.test(base)) {\\n      baseUrls[' ' + base] = base + '/';\\n    } else {\\n      baseUrls[' ' + base] = rtrim(base, '/', true);\\n    }\\n  }\\n  base = baseUrls[' ' + base];\\n  const relativeBase = base.indexOf(':') === -1;\\n\\n  if (href.substring(0, 2) === '//') {\\n    if (relativeBase) {\\n      return href;\\n    }\\n    return base.replace(protocol, '$1') + href;\\n  } else if (href.charAt(0) === '/') {\\n    if (relativeBase) {\\n      return href;\\n    }\\n    return base.replace(domain, '$1') + href;\\n  } else {\\n    return base + href;\\n  }\\n}\\n\\nconst noopTest = { exec: function noopTest() {} };\\n\\nfunction merge(obj) {\\n  let i = 1,\\n    target,\\n    key;\\n\\n  for (; i < arguments.length; i++) {\\n    target = arguments[i];\\n    for (key in target) {\\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\\n        obj[key] = target[key];\\n      }\\n    }\\n  }\\n\\n  return obj;\\n}\\n\\nfunction splitCells(tableRow, count) {\\n  // ensure that every cell-delimiting pipe has a space\\n  // before it to distinguish it from an escaped pipe\\n  const row = tableRow.replace(/\\\\|/g, (match, offset, str) => {\\n      let escaped = false,\\n        curr = offset;\\n      while (--curr >= 0 && str[curr] === '\\\\\\\\') escaped = !escaped;\\n      if (escaped) {\\n        // odd number of slashes means | is escaped\\n        // so we leave it alone\\n        return '|';\\n      } else {\\n        // add space before unescaped |\\n        return ' |';\\n      }\\n    }),\\n    cells = row.split(/ \\\\|/);\\n  let i = 0;\\n\\n  // First/last cell in a row cannot be empty if it has no leading/trailing pipe\\n  if (!cells[0].trim()) { cells.shift(); }\\n  if (!cells[cells.length - 1].trim()) { cells.pop(); }\\n\\n  if (cells.length > count) {\\n    cells.splice(count);\\n  } else {\\n    while (cells.length < count) cells.push('');\\n  }\\n\\n  for (; i < cells.length; i++) {\\n    // leading or trailing whitespace is ignored per the gfm spec\\n    cells[i] = cells[i].trim().replace(/\\\\\\\\\\\\|/g, '|');\\n  }\\n  return cells;\\n}\\n\\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\\n// /c*$/ is vulnerable to REDOS.\\n// invert: Remove suffix of non-c chars instead. Default falsey.\\nfunction rtrim(str, c, invert) {\\n  const l = str.length;\\n  if (l === 0) {\\n    return '';\\n  }\\n\\n  // Length of suffix matching the invert condition.\\n  let suffLen = 0;\\n\\n  // Step left until we fail to match the invert condition.\\n  while (suffLen < l) {\\n    const currChar = str.charAt(l - suffLen - 1);\\n    if (currChar === c && !invert) {\\n      suffLen++;\\n    } else if (currChar !== c && invert) {\\n      suffLen++;\\n    } else {\\n      break;\\n    }\\n  }\\n\\n  return str.substr(0, l - suffLen);\\n}\\n\\nfunction findClosingBracket(str, b) {\\n  if (str.indexOf(b[1]) === -1) {\\n    return -1;\\n  }\\n  const l = str.length;\\n  let level = 0,\\n    i = 0;\\n  for (; i < l; i++) {\\n    if (str[i] === '\\\\\\\\') {\\n      i++;\\n    } else if (str[i] === b[0]) {\\n      level++;\\n    } else if (str[i] === b[1]) {\\n      level--;\\n      if (level < 0) {\\n        return i;\\n      }\\n    }\\n  }\\n  return -1;\\n}\\n\\nfunction checkSanitizeDeprecation(opt) {\\n  if (opt && opt.sanitize && !opt.silent) {\\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\\n  }\\n}\\n\\n// copied from https://stackoverflow.com/a/5450113/806777\\nfunction repeatString(pattern, count) {\\n  if (count < 1) {\\n    return '';\\n  }\\n  let result = '';\\n  while (count > 1) {\\n    if (count & 1) {\\n      result += pattern;\\n    }\\n    count >>= 1;\\n    pattern += pattern;\\n  }\\n  return result + pattern;\\n}\\n\\nfunction outputLink(cap, link, raw, lexer) {\\n  const href = link.href;\\n  const title = link.title ? escape(link.title) : null;\\n  const text = cap[1].replace(/\\\\\\\\([\\\\[\\\\]])/g, '$1');\\n\\n  if (cap[0].charAt(0) !== '!') {\\n    lexer.state.inLink = true;\\n    const token = {\\n      type: 'link',\\n      raw,\\n      href,\\n      title,\\n      text,\\n      tokens: lexer.inlineTokens(text, [])\\n    };\\n    lexer.state.inLink = false;\\n    return token;\\n  } else {\\n    return {\\n      type: 'image',\\n      raw,\\n      href,\\n      title,\\n      text: escape(text)\\n    };\\n  }\\n}\\n\\nfunction indentCodeCompensation(raw, text) {\\n  const matchIndentToCode = raw.match(/^(\\\\s+)(?:```)/);\\n\\n  if (matchIndentToCode === null) {\\n    return text;\\n  }\\n\\n  const indentToCode = matchIndentToCode[1];\\n\\n  return text\\n    .split('\\\\n')\\n    .map(node => {\\n      const matchIndentInNode = node.match(/^\\\\s+/);\\n      if (matchIndentInNode === null) {\\n        return node;\\n      }\\n\\n      const [indentInNode] = matchIndentInNode;\\n\\n      if (indentInNode.length >= indentToCode.length) {\\n        return node.slice(indentToCode.length);\\n      }\\n\\n      return node;\\n    })\\n    .join('\\\\n');\\n}\\n\\n/**\\n * Tokenizer\\n */\\nclass Tokenizer {\\n  constructor(options) {\\n    this.options = options || defaults;\\n  }\\n\\n  space(src) {\\n    const cap = this.rules.block.newline.exec(src);\\n    if (cap) {\\n      if (cap[0].length > 1) {\\n        return {\\n          type: 'space',\\n          raw: cap[0]\\n        };\\n      }\\n      return { raw: '\\\\n' };\\n    }\\n  }\\n\\n  code(src) {\\n    const cap = this.rules.block.code.exec(src);\\n    if (cap) {\\n      const text = cap[0].replace(/^ {1,4}/gm, '');\\n      return {\\n        type: 'code',\\n        raw: cap[0],\\n        codeBlockStyle: 'indented',\\n        text: !this.options.pedantic\\n          ? rtrim(text, '\\\\n')\\n          : text\\n      };\\n    }\\n  }\\n\\n  fences(src) {\\n    const cap = this.rules.block.fences.exec(src);\\n    if (cap) {\\n      const raw = cap[0];\\n      const text = indentCodeCompensation(raw, cap[3] || '');\\n\\n      return {\\n        type: 'code',\\n        raw,\\n        lang: cap[2] ? cap[2].trim() : cap[2],\\n        text\\n      };\\n    }\\n  }\\n\\n  heading(src) {\\n    const cap = this.rules.block.heading.exec(src);\\n    if (cap) {\\n      let text = cap[2].trim();\\n\\n      // remove trailing #s\\n      if (/#$/.test(text)) {\\n        const trimmed = rtrim(text, '#');\\n        if (this.options.pedantic) {\\n          text = trimmed.trim();\\n        } else if (!trimmed || / $/.test(trimmed)) {\\n          // CommonMark requires space before trailing #s\\n          text = trimmed.trim();\\n        }\\n      }\\n\\n      const token = {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[1].length,\\n        text: text,\\n        tokens: []\\n      };\\n      this.lexer.inline(token.text, token.tokens);\\n      return token;\\n    }\\n  }\\n\\n  hr(src) {\\n    const cap = this.rules.block.hr.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'hr',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  blockquote(src) {\\n    const cap = this.rules.block.blockquote.exec(src);\\n    if (cap) {\\n      const text = cap[0].replace(/^ *> ?/gm, '');\\n\\n      return {\\n        type: 'blockquote',\\n        raw: cap[0],\\n        tokens: this.lexer.blockTokens(text, []),\\n        text\\n      };\\n    }\\n  }\\n\\n  list(src) {\\n    let cap = this.rules.block.list.exec(src);\\n    if (cap) {\\n      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine,\\n        line, lines, itemContents;\\n\\n      let bull = cap[1].trim();\\n      const isordered = bull.length > 1;\\n\\n      const list = {\\n        type: 'list',\\n        raw: '',\\n        ordered: isordered,\\n        start: isordered ? +bull.slice(0, -1) : '',\\n        loose: false,\\n        items: []\\n      };\\n\\n      bull = isordered ? `\\\\\\\\d{1,9}\\\\\\\\${bull.slice(-1)}` : `\\\\\\\\${bull}`;\\n\\n      if (this.options.pedantic) {\\n        bull = isordered ? bull : '[*+-]';\\n      }\\n\\n      // Get next list item\\n      const itemRegex = new RegExp(`^( {0,3}${bull})((?: [^\\\\\\\\n]*| *)(?:\\\\\\\\n[^\\\\\\\\n]*)*(?:\\\\\\\\n|$))`);\\n\\n      // Get each top-level item\\n      while (src) {\\n        if (this.rules.block.hr.test(src)) { // End list if we encounter an HR (possibly move into itemRegex?)\\n          break;\\n        }\\n\\n        if (!(cap = itemRegex.exec(src))) {\\n          break;\\n        }\\n\\n        lines = cap[2].split('\\\\n');\\n\\n        if (this.options.pedantic) {\\n          indent = 2;\\n          itemContents = lines[0].trimLeft();\\n        } else {\\n          indent = cap[2].search(/[^ ]/); // Find first non-space char\\n          indent = cap[1].length + (indent > 4 ? 1 : indent); // intented code blocks after 4 spaces; indent is always 1\\n          itemContents = lines[0].slice(indent - cap[1].length);\\n        }\\n\\n        blankLine = false;\\n        raw = cap[0];\\n\\n        if (!lines[0] && /^ *$/.test(lines[1])) { // items begin with at most one blank line\\n          raw = cap[1] + lines.slice(0, 2).join('\\\\n') + '\\\\n';\\n          list.loose = true;\\n          lines = [];\\n        }\\n\\n        const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\\\\\d{1,9}[.)])`);\\n\\n        for (i = 1; i < lines.length; i++) {\\n          line = lines[i];\\n\\n          if (this.options.pedantic) { // Re-align to follow commonmark nesting rules\\n            line = line.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\\n          }\\n\\n          // End list item if found start of new bullet\\n          if (nextBulletRegex.test(line)) {\\n            raw = cap[1] + lines.slice(0, i).join('\\\\n') + '\\\\n';\\n            break;\\n          }\\n\\n          // Until we encounter a blank line, item contents do not need indentation\\n          if (!blankLine) {\\n            if (!line.trim()) { // Check if current line is empty\\n              blankLine = true;\\n            }\\n\\n            // Dedent if possible\\n            if (line.search(/[^ ]/) >= indent) {\\n              itemContents += '\\\\n' + line.slice(indent);\\n            } else {\\n              itemContents += '\\\\n' + line;\\n            }\\n            continue;\\n          }\\n\\n          // Dedent this line\\n          if (line.search(/[^ ]/) >= indent || !line.trim()) {\\n            itemContents += '\\\\n' + line.slice(indent);\\n            continue;\\n          } else { // Line was not properly indented; end of this item\\n            raw = cap[1] + lines.slice(0, i).join('\\\\n') + '\\\\n';\\n            break;\\n          }\\n        }\\n\\n        if (!list.loose) {\\n          // If the previous item ended with a blank line, the list is loose\\n          if (endsWithBlankLine) {\\n            list.loose = true;\\n          } else if (/\\\\n *\\\\n *$/.test(raw)) {\\n            endsWithBlankLine = true;\\n          }\\n        }\\n\\n        // Check for task list items\\n        if (this.options.gfm) {\\n          istask = /^\\\\[[ xX]\\\\] /.exec(itemContents);\\n          if (istask) {\\n            ischecked = istask[0] !== '[ ] ';\\n            itemContents = itemContents.replace(/^\\\\[[ xX]\\\\] +/, '');\\n          }\\n        }\\n\\n        list.items.push({\\n          type: 'list_item',\\n          raw: raw,\\n          task: !!istask,\\n          checked: ischecked,\\n          loose: false,\\n          text: itemContents\\n        });\\n\\n        list.raw += raw;\\n        src = src.slice(raw.length);\\n      }\\n\\n      // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\\n      list.items[list.items.length - 1].raw = raw.trimRight();\\n      list.items[list.items.length - 1].text = itemContents.trimRight();\\n      list.raw = list.raw.trimRight();\\n\\n      const l = list.items.length;\\n\\n      // Item child tokens handled here at end because we needed to have the final item to trim it first\\n      for (i = 0; i < l; i++) {\\n        this.lexer.state.top = false;\\n        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\\n        if (list.items[i].tokens.some(t => t.type === 'space')) {\\n          list.loose = true;\\n          list.items[i].loose = true;\\n        }\\n      }\\n\\n      return list;\\n    }\\n  }\\n\\n  html(src) {\\n    const cap = this.rules.block.html.exec(src);\\n    if (cap) {\\n      const token = {\\n        type: 'html',\\n        raw: cap[0],\\n        pre: !this.options.sanitizer\\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\\n        text: cap[0]\\n      };\\n      if (this.options.sanitize) {\\n        token.type = 'paragraph';\\n        token.text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\\n        token.tokens = [];\\n        this.lexer.inline(token.text, token.tokens);\\n      }\\n      return token;\\n    }\\n  }\\n\\n  def(src) {\\n    const cap = this.rules.block.def.exec(src);\\n    if (cap) {\\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\\n      const tag = cap[1].toLowerCase().replace(/\\\\s+/g, ' ');\\n      return {\\n        type: 'def',\\n        tag,\\n        raw: cap[0],\\n        href: cap[2],\\n        title: cap[3]\\n      };\\n    }\\n  }\\n\\n  table(src) {\\n    const cap = this.rules.block.table.exec(src);\\n    if (cap) {\\n      const item = {\\n        type: 'table',\\n        header: splitCells(cap[1]).map(c => { return { text: c }; }),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        rows: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : []\\n      };\\n\\n      if (item.header.length === item.align.length) {\\n        item.raw = cap[0];\\n\\n        let l = item.align.length;\\n        let i, j, k, row;\\n        for (i = 0; i < l; i++) {\\n          if (/^ *-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'right';\\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'center';\\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\\n            item.align[i] = 'left';\\n          } else {\\n            item.align[i] = null;\\n          }\\n        }\\n\\n        l = item.rows.length;\\n        for (i = 0; i < l; i++) {\\n          item.rows[i] = splitCells(item.rows[i], item.header.length).map(c => { return { text: c }; });\\n        }\\n\\n        // parse child tokens inside headers and cells\\n\\n        // header child tokens\\n        l = item.header.length;\\n        for (j = 0; j < l; j++) {\\n          item.header[j].tokens = [];\\n          this.lexer.inlineTokens(item.header[j].text, item.header[j].tokens);\\n        }\\n\\n        // cell child tokens\\n        l = item.rows.length;\\n        for (j = 0; j < l; j++) {\\n          row = item.rows[j];\\n          for (k = 0; k < row.length; k++) {\\n            row[k].tokens = [];\\n            this.lexer.inlineTokens(row[k].text, row[k].tokens);\\n          }\\n        }\\n\\n        return item;\\n      }\\n    }\\n  }\\n\\n  lheading(src) {\\n    const cap = this.rules.block.lheading.exec(src);\\n    if (cap) {\\n      const token = {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\\n        text: cap[1],\\n        tokens: []\\n      };\\n      this.lexer.inline(token.text, token.tokens);\\n      return token;\\n    }\\n  }\\n\\n  paragraph(src) {\\n    const cap = this.rules.block.paragraph.exec(src);\\n    if (cap) {\\n      const token = {\\n        type: 'paragraph',\\n        raw: cap[0],\\n        text: cap[1].charAt(cap[1].length - 1) === '\\\\n'\\n          ? cap[1].slice(0, -1)\\n          : cap[1],\\n        tokens: []\\n      };\\n      this.lexer.inline(token.text, token.tokens);\\n      return token;\\n    }\\n  }\\n\\n  text(src) {\\n    const cap = this.rules.block.text.exec(src);\\n    if (cap) {\\n      const token = {\\n        type: 'text',\\n        raw: cap[0],\\n        text: cap[0],\\n        tokens: []\\n      };\\n      this.lexer.inline(token.text, token.tokens);\\n      return token;\\n    }\\n  }\\n\\n  escape(src) {\\n    const cap = this.rules.inline.escape.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'escape',\\n        raw: cap[0],\\n        text: escape(cap[1])\\n      };\\n    }\\n  }\\n\\n  tag(src) {\\n    const cap = this.rules.inline.tag.exec(src);\\n    if (cap) {\\n      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\\n        this.lexer.state.inLink = true;\\n      } else if (this.lexer.state.inLink && /^<\\\\/a>/i.test(cap[0])) {\\n        this.lexer.state.inLink = false;\\n      }\\n      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        this.lexer.state.inRawBlock = true;\\n      } else if (this.lexer.state.inRawBlock && /^<\\\\/(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        this.lexer.state.inRawBlock = false;\\n      }\\n\\n      return {\\n        type: this.options.sanitize\\n          ? 'text'\\n          : 'html',\\n        raw: cap[0],\\n        inLink: this.lexer.state.inLink,\\n        inRawBlock: this.lexer.state.inRawBlock,\\n        text: this.options.sanitize\\n          ? (this.options.sanitizer\\n            ? this.options.sanitizer(cap[0])\\n            : escape(cap[0]))\\n          : cap[0]\\n      };\\n    }\\n  }\\n\\n  link(src) {\\n    const cap = this.rules.inline.link.exec(src);\\n    if (cap) {\\n      const trimmedUrl = cap[2].trim();\\n      if (!this.options.pedantic && /^</.test(trimmedUrl)) {\\n        // commonmark requires matching angle brackets\\n        if (!(/>$/.test(trimmedUrl))) {\\n          return;\\n        }\\n\\n        // ending angle bracket cannot be escaped\\n        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\\\\\');\\n        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\\n          return;\\n        }\\n      } else {\\n        // find closing parenthesis\\n        const lastParenIndex = findClosingBracket(cap[2], '()');\\n        if (lastParenIndex > -1) {\\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\\n          const linkLen = start + cap[1].length + lastParenIndex;\\n          cap[2] = cap[2].substring(0, lastParenIndex);\\n          cap[0] = cap[0].substring(0, linkLen).trim();\\n          cap[3] = '';\\n        }\\n      }\\n      let href = cap[2];\\n      let title = '';\\n      if (this.options.pedantic) {\\n        // split pedantic href and title\\n        const link = /^([^'\\\"]*[^\\\\s])\\\\s+(['\\\"])(.*)\\\\2/.exec(href);\\n\\n        if (link) {\\n          href = link[1];\\n          title = link[3];\\n        }\\n      } else {\\n        title = cap[3] ? cap[3].slice(1, -1) : '';\\n      }\\n\\n      href = href.trim();\\n      if (/^</.test(href)) {\\n        if (this.options.pedantic && !(/>$/.test(trimmedUrl))) {\\n          // pedantic allows starting angle bracket without ending angle bracket\\n          href = href.slice(1);\\n        } else {\\n          href = href.slice(1, -1);\\n        }\\n      }\\n      return outputLink(cap, {\\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\\n      }, cap[0], this.lexer);\\n    }\\n  }\\n\\n  reflink(src, links) {\\n    let cap;\\n    if ((cap = this.rules.inline.reflink.exec(src))\\n        || (cap = this.rules.inline.nolink.exec(src))) {\\n      let link = (cap[2] || cap[1]).replace(/\\\\s+/g, ' ');\\n      link = links[link.toLowerCase()];\\n      if (!link || !link.href) {\\n        const text = cap[0].charAt(0);\\n        return {\\n          type: 'text',\\n          raw: text,\\n          text\\n        };\\n      }\\n      return outputLink(cap, link, cap[0], this.lexer);\\n    }\\n  }\\n\\n  emStrong(src, maskedSrc, prevChar = '') {\\n    let match = this.rules.inline.emStrong.lDelim.exec(src);\\n    if (!match) return;\\n\\n    // _ can't be between two alphanumerics. \\\\p{L}\\\\p{N} includes non-english alphabet/numbers as well\\n    if (match[3] && prevChar.match(/[\\\\p{L}\\\\p{N}]/u)) return;\\n\\n    const nextChar = match[1] || match[2] || '';\\n\\n[end of marked.esm.js]\\n[start of marked.js]\\n/**\\n * marked - a markdown parser\\n * Copyright (c) 2011-2021, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n\\n/**\\n * DO NOT EDIT THIS FILE\\n * The code in this file is generated from files in ./src/\\n */\\n\\n(function (global, factory) {\\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.marked = {}));\\n})(this, (function (exports) { 'use strict';\\n\\n  function _defineProperties(target, props) {\\n    for (var i = 0; i < props.length; i++) {\\n      var descriptor = props[i];\\n      descriptor.enumerable = descriptor.enumerable || false;\\n      descriptor.configurable = true;\\n      if (\\\"value\\\" in descriptor) descriptor.writable = true;\\n      Object.defineProperty(target, descriptor.key, descriptor);\\n    }\\n  }\\n\\n  function _createClass(Constructor, protoProps, staticProps) {\\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\\n    if (staticProps) _defineProperties(Constructor, staticProps);\\n    return Constructor;\\n  }\\n\\n  function _unsupportedIterableToArray(o, minLen) {\\n    if (!o) return;\\n    if (typeof o === \\\"string\\\") return _arrayLikeToArray(o, minLen);\\n    var n = Object.prototype.toString.call(o).slice(8, -1);\\n    if (n === \\\"Object\\\" && o.constructor) n = o.constructor.name;\\n    if (n === \\\"Map\\\" || n === \\\"Set\\\") return Array.from(o);\\n    if (n === \\\"Arguments\\\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\\n  }\\n\\n  function _arrayLikeToArray(arr, len) {\\n    if (len == null || len > arr.length) len = arr.length;\\n\\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\\n\\n    return arr2;\\n  }\\n\\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) {\\n    var it = typeof Symbol !== \\\"undefined\\\" && o[Symbol.iterator] || o[\\\"@@iterator\\\"];\\n    if (it) return (it = it.call(o)).next.bind(it);\\n\\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \\\"number\\\") {\\n      if (it) o = it;\\n      var i = 0;\\n      return function () {\\n        if (i >= o.length) return {\\n          done: true\\n        };\\n        return {\\n          done: false,\\n          value: o[i++]\\n        };\\n      };\\n    }\\n\\n    throw new TypeError(\\\"Invalid attempt to iterate non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\");\\n  }\\n\\n  function getDefaults() {\\n    return {\\n      baseUrl: null,\\n      breaks: false,\\n      extensions: null,\\n      gfm: true,\\n      headerIds: true,\\n      headerPrefix: '',\\n      highlight: null,\\n      langPrefix: 'language-',\\n      mangle: true,\\n      pedantic: false,\\n      renderer: null,\\n      sanitize: false,\\n      sanitizer: null,\\n      silent: false,\\n      smartLists: false,\\n      smartypants: false,\\n      tokenizer: null,\\n      walkTokens: null,\\n      xhtml: false\\n    };\\n  }\\n  exports.defaults = getDefaults();\\n  function changeDefaults(newDefaults) {\\n    exports.defaults = newDefaults;\\n  }\\n\\n  /**\\n   * Helpers\\n   */\\n  var escapeTest = /[&<>\\\"']/;\\n  var escapeReplace = /[&<>\\\"']/g;\\n  var escapeTestNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/;\\n  var escapeReplaceNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/g;\\n  var escapeReplacements = {\\n    '&': '&amp;',\\n    '<': '&lt;',\\n    '>': '&gt;',\\n    '\\\"': '&quot;',\\n    \\\"'\\\": '&#39;'\\n  };\\n\\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\\n    return escapeReplacements[ch];\\n  };\\n\\n  function escape(html, encode) {\\n    if (encode) {\\n      if (escapeTest.test(html)) {\\n        return html.replace(escapeReplace, getEscapeReplacement);\\n      }\\n    } else {\\n      if (escapeTestNoEncode.test(html)) {\\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\\n      }\\n    }\\n\\n    return html;\\n  }\\n  var unescapeTest = /&(#(?:\\\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\\\w+));?/ig;\\n  function unescape(html) {\\n    // explicitly match decimal, hex, and named HTML entities\\n    return html.replace(unescapeTest, function (_, n) {\\n      n = n.toLowerCase();\\n      if (n === 'colon') return ':';\\n\\n      if (n.charAt(0) === '#') {\\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\\n      }\\n\\n      return '';\\n    });\\n  }\\n  var caret = /(^|[^\\\\[])\\\\^/g;\\n  function edit(regex, opt) {\\n    regex = regex.source || regex;\\n    opt = opt || '';\\n    var obj = {\\n      replace: function replace(name, val) {\\n        val = val.source || val;\\n        val = val.replace(caret, '$1');\\n        regex = regex.replace(name, val);\\n        return obj;\\n      },\\n      getRegex: function getRegex() {\\n        return new RegExp(regex, opt);\\n      }\\n    };\\n    return obj;\\n  }\\n  var nonWordAndColonTest = /[^\\\\w:]/g;\\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\\n  function cleanUrl(sanitize, base, href) {\\n    if (sanitize) {\\n      var prot;\\n\\n      try {\\n        prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, '').toLowerCase();\\n      } catch (e) {\\n        return null;\\n      }\\n\\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\\n        return null;\\n      }\\n    }\\n\\n    if (base && !originIndependentUrl.test(href)) {\\n      href = resolveUrl(base, href);\\n    }\\n\\n    try {\\n      href = encodeURI(href).replace(/%25/g, '%');\\n    } catch (e) {\\n      return null;\\n    }\\n\\n    return href;\\n  }\\n  var baseUrls = {};\\n  var justDomain = /^[^:]+:\\\\/*[^/]*$/;\\n  var protocol = /^([^:]+:)[\\\\s\\\\S]*$/;\\n  var domain = /^([^:]+:\\\\/*[^/]*)[\\\\s\\\\S]*$/;\\n  function resolveUrl(base, href) {\\n    if (!baseUrls[' ' + base]) {\\n      // we can ignore everything in base after the last slash of its path component,\\n      // but we might need to add _that_\\n      // https://tools.ietf.org/html/rfc3986#section-3\\n      if (justDomain.test(base)) {\\n        baseUrls[' ' + base] = base + '/';\\n      } else {\\n        baseUrls[' ' + base] = rtrim(base, '/', true);\\n      }\\n    }\\n\\n    base = baseUrls[' ' + base];\\n    var relativeBase = base.indexOf(':') === -1;\\n\\n    if (href.substring(0, 2) === '//') {\\n      if (relativeBase) {\\n        return href;\\n      }\\n\\n      return base.replace(protocol, '$1') + href;\\n    } else if (href.charAt(0) === '/') {\\n      if (relativeBase) {\\n        return href;\\n      }\\n\\n      return base.replace(domain, '$1') + href;\\n    } else {\\n      return base + href;\\n    }\\n  }\\n  var noopTest = {\\n    exec: function noopTest() {}\\n  };\\n  function merge(obj) {\\n    var i = 1,\\n        target,\\n        key;\\n\\n    for (; i < arguments.length; i++) {\\n      target = arguments[i];\\n\\n      for (key in target) {\\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\\n          obj[key] = target[key];\\n        }\\n      }\\n    }\\n\\n    return obj;\\n  }\\n  function splitCells(tableRow, count) {\\n    // ensure that every cell-delimiting pipe has a space\\n    // before it to distinguish it from an escaped pipe\\n    var row = tableRow.replace(/\\\\|/g, function (match, offset, str) {\\n      var escaped = false,\\n          curr = offset;\\n\\n      while (--curr >= 0 && str[curr] === '\\\\\\\\') {\\n        escaped = !escaped;\\n      }\\n\\n      if (escaped) {\\n        // odd number of slashes means | is escaped\\n        // so we leave it alone\\n        return '|';\\n      } else {\\n        // add space before unescaped |\\n        return ' |';\\n      }\\n    }),\\n        cells = row.split(/ \\\\|/);\\n    var i = 0; // First/last cell in a row cannot be empty if it has no leading/trailing pipe\\n\\n    if (!cells[0].trim()) {\\n      cells.shift();\\n    }\\n\\n    if (!cells[cells.length - 1].trim()) {\\n      cells.pop();\\n    }\\n\\n    if (cells.length > count) {\\n      cells.splice(count);\\n    } else {\\n      while (cells.length < count) {\\n        cells.push('');\\n      }\\n    }\\n\\n    for (; i < cells.length; i++) {\\n      // leading or trailing whitespace is ignored per the gfm spec\\n      cells[i] = cells[i].trim().replace(/\\\\\\\\\\\\|/g, '|');\\n    }\\n\\n    return cells;\\n  } // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\\n  // /c*$/ is vulnerable to REDOS.\\n  // invert: Remove suffix of non-c chars instead. Default falsey.\\n\\n  function rtrim(str, c, invert) {\\n    var l = str.length;\\n\\n    if (l === 0) {\\n      return '';\\n    } // Length of suffix matching the invert condition.\\n\\n\\n    var suffLen = 0; // Step left until we fail to match the invert condition.\\n\\n    while (suffLen < l) {\\n      var currChar = str.charAt(l - suffLen - 1);\\n\\n      if (currChar === c && !invert) {\\n        suffLen++;\\n      } else if (currChar !== c && invert) {\\n        suffLen++;\\n      } else {\\n        break;\\n      }\\n    }\\n\\n    return str.substr(0, l - suffLen);\\n  }\\n  function findClosingBracket(str, b) {\\n    if (str.indexOf(b[1]) === -1) {\\n      return -1;\\n    }\\n\\n    var l = str.length;\\n    var level = 0,\\n        i = 0;\\n\\n    for (; i < l; i++) {\\n      if (str[i] === '\\\\\\\\') {\\n        i++;\\n      } else if (str[i] === b[0]) {\\n        level++;\\n      } else if (str[i] === b[1]) {\\n        level--;\\n\\n        if (level < 0) {\\n          return i;\\n        }\\n      }\\n    }\\n\\n    return -1;\\n  }\\n  function checkSanitizeDeprecation(opt) {\\n    if (opt && opt.sanitize && !opt.silent) {\\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\\n    }\\n  } // copied from https://stackoverflow.com/a/5450113/806777\\n\\n  function repeatString(pattern, count) {\\n    if (count < 1) {\\n      return '';\\n    }\\n\\n    var result = '';\\n\\n    while (count > 1) {\\n      if (count & 1) {\\n        result += pattern;\\n      }\\n\\n      count >>= 1;\\n      pattern += pattern;\\n    }\\n\\n    return result + pattern;\\n  }\\n\\n  function outputLink(cap, link, raw, lexer) {\\n    var href = link.href;\\n    var title = link.title ? escape(link.title) : null;\\n    var text = cap[1].replace(/\\\\\\\\([\\\\[\\\\]])/g, '$1');\\n\\n    if (cap[0].charAt(0) !== '!') {\\n      lexer.state.inLink = true;\\n      var token = {\\n        type: 'link',\\n        raw: raw,\\n        href: href,\\n        title: title,\\n        text: text,\\n        tokens: lexer.inlineTokens(text, [])\\n      };\\n      lexer.state.inLink = false;\\n      return token;\\n    } else {\\n      return {\\n        type: 'image',\\n        raw: raw,\\n        href: href,\\n        title: title,\\n        text: escape(text)\\n      };\\n    }\\n  }\\n\\n  function indentCodeCompensation(raw, text) {\\n    var matchIndentToCode = raw.match(/^(\\\\s+)(?:```)/);\\n\\n    if (matchIndentToCode === null) {\\n      return text;\\n    }\\n\\n    var indentToCode = matchIndentToCode[1];\\n    return text.split('\\\\n').map(function (node) {\\n      var matchIndentInNode = node.match(/^\\\\s+/);\\n\\n      if (matchIndentInNode === null) {\\n        return node;\\n      }\\n\\n      var indentInNode = matchIndentInNode[0];\\n\\n      if (indentInNode.length >= indentToCode.length) {\\n        return node.slice(indentToCode.length);\\n      }\\n\\n      return node;\\n    }).join('\\\\n');\\n  }\\n  /**\\n   * Tokenizer\\n   */\\n\\n\\n  var Tokenizer = /*#__PURE__*/function () {\\n    function Tokenizer(options) {\\n      this.options = options || exports.defaults;\\n    }\\n\\n    var _proto = Tokenizer.prototype;\\n\\n    _proto.space = function space(src) {\\n      var cap = this.rules.block.newline.exec(src);\\n\\n      if (cap) {\\n        if (cap[0].length > 1) {\\n          return {\\n            type: 'space',\\n            raw: cap[0]\\n          };\\n        }\\n\\n        return {\\n          raw: '\\\\n'\\n        };\\n      }\\n    };\\n\\n    _proto.code = function code(src) {\\n      var cap = this.rules.block.code.exec(src);\\n\\n      if (cap) {\\n        var text = cap[0].replace(/^ {1,4}/gm, '');\\n        return {\\n          type: 'code',\\n          raw: cap[0],\\n          codeBlockStyle: 'indented',\\n          text: !this.options.pedantic ? rtrim(text, '\\\\n') : text\\n        };\\n      }\\n    };\\n\\n    _proto.fences = function fences(src) {\\n      var cap = this.rules.block.fences.exec(src);\\n\\n      if (cap) {\\n        var raw = cap[0];\\n        var text = indentCodeCompensation(raw, cap[3] || '');\\n        return {\\n          type: 'code',\\n          raw: raw,\\n          lang: cap[2] ? cap[2].trim() : cap[2],\\n          text: text\\n        };\\n      }\\n    };\\n\\n    _proto.heading = function heading(src) {\\n      var cap = this.rules.block.heading.exec(src);\\n\\n      if (cap) {\\n        var text = cap[2].trim(); // remove trailing #s\\n\\n        if (/#$/.test(text)) {\\n          var trimmed = rtrim(text, '#');\\n\\n          if (this.options.pedantic) {\\n            text = trimmed.trim();\\n          } else if (!trimmed || / $/.test(trimmed)) {\\n            // CommonMark requires space before trailing #s\\n            text = trimmed.trim();\\n          }\\n        }\\n\\n        var token = {\\n          type: 'heading',\\n          raw: cap[0],\\n          depth: cap[1].length,\\n          text: text,\\n          tokens: []\\n        };\\n        this.lexer.inline(token.text, token.tokens);\\n        return token;\\n      }\\n    };\\n\\n    _proto.hr = function hr(src) {\\n      var cap = this.rules.block.hr.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'hr',\\n          raw: cap[0]\\n        };\\n      }\\n    };\\n\\n    _proto.blockquote = function blockquote(src) {\\n      var cap = this.rules.block.blockquote.exec(src);\\n\\n      if (cap) {\\n        var text = cap[0].replace(/^ *> ?/gm, '');\\n        return {\\n          type: 'blockquote',\\n          raw: cap[0],\\n          tokens: this.lexer.blockTokens(text, []),\\n          text: text\\n        };\\n      }\\n    };\\n\\n    _proto.list = function list(src) {\\n      var cap = this.rules.block.list.exec(src);\\n\\n      if (cap) {\\n        var raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine, line, lines, itemContents;\\n        var bull = cap[1].trim();\\n        var isordered = bull.length > 1;\\n        var list = {\\n          type: 'list',\\n          raw: '',\\n          ordered: isordered,\\n          start: isordered ? +bull.slice(0, -1) : '',\\n          loose: false,\\n          items: []\\n        };\\n        bull = isordered ? \\\"\\\\\\\\d{1,9}\\\\\\\\\\\" + bull.slice(-1) : \\\"\\\\\\\\\\\" + bull;\\n\\n        if (this.options.pedantic) {\\n          bull = isordered ? bull : '[*+-]';\\n        } // Get next list item\\n\\n\\n        var itemRegex = new RegExp(\\\"^( {0,3}\\\" + bull + \\\")((?: [^\\\\\\\\n]*| *)(?:\\\\\\\\n[^\\\\\\\\n]*)*(?:\\\\\\\\n|$))\\\"); // Get each top-level item\\n\\n        while (src) {\\n          if (this.rules.block.hr.test(src)) {\\n            // End list if we encounter an HR (possibly move into itemRegex?)\\n            break;\\n          }\\n\\n          if (!(cap = itemRegex.exec(src))) {\\n            break;\\n          }\\n\\n          lines = cap[2].split('\\\\n');\\n\\n          if (this.options.pedantic) {\\n            indent = 2;\\n            itemContents = lines[0].trimLeft();\\n          } else {\\n            indent = cap[2].search(/[^ ]/); // Find first non-space char\\n\\n            indent = cap[1].length + (indent > 4 ? 1 : indent); // intented code blocks after 4 spaces; indent is always 1\\n\\n            itemContents = lines[0].slice(indent - cap[1].length);\\n          }\\n\\n          blankLine = false;\\n          raw = cap[0];\\n\\n          if (!lines[0] && /^ *$/.test(lines[1])) {\\n            // items begin with at most one blank line\\n            raw = cap[1] + lines.slice(0, 2).join('\\\\n') + '\\\\n';\\n            list.loose = true;\\n            lines = [];\\n          }\\n\\n          var nextBulletRegex = new RegExp(\\\"^ {0,\\\" + Math.min(3, indent - 1) + \\\"}(?:[*+-]|\\\\\\\\d{1,9}[.)])\\\");\\n\\n          for (i = 1; i < lines.length; i++) {\\n            line = lines[i];\\n\\n            if (this.options.pedantic) {\\n              // Re-align to follow commonmark nesting rules\\n              line = line.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\\n            } // End list item if found start of new bullet\\n\\n\\n            if (nextBulletRegex.test(line)) {\\n              raw = cap[1] + lines.slice(0, i).join('\\\\n') + '\\\\n';\\n              break;\\n            } // Until we encounter a blank line, item contents do not need indentation\\n\\n\\n            if (!blankLine) {\\n              if (!line.trim()) {\\n                // Check if current line is empty\\n                blankLine = true;\\n              } // Dedent if possible\\n\\n\\n              if (line.search(/[^ ]/) >= indent) {\\n                itemContents += '\\\\n' + line.slice(indent);\\n              } else {\\n                itemContents += '\\\\n' + line;\\n              }\\n\\n              continue;\\n            } // Dedent this line\\n\\n\\n            if (line.search(/[^ ]/) >= indent || !line.trim()) {\\n              itemContents += '\\\\n' + line.slice(indent);\\n              continue;\\n            } else {\\n              // Line was not properly indented; end of this item\\n              raw = cap[1] + lines.slice(0, i).join('\\\\n') + '\\\\n';\\n              break;\\n            }\\n          }\\n\\n          if (!list.loose) {\\n            // If the previous item ended with a blank line, the list is loose\\n            if (endsWithBlankLine) {\\n              list.loose = true;\\n            } else if (/\\\\n *\\\\n *$/.test(raw)) {\\n              endsWithBlankLine = true;\\n            }\\n          } // Check for task list items\\n\\n\\n          if (this.options.gfm) {\\n            istask = /^\\\\[[ xX]\\\\] /.exec(itemContents);\\n\\n            if (istask) {\\n              ischecked = istask[0] !== '[ ] ';\\n              itemContents = itemContents.replace(/^\\\\[[ xX]\\\\] +/, '');\\n            }\\n          }\\n\\n          list.items.push({\\n            type: 'list_item',\\n            raw: raw,\\n            task: !!istask,\\n            checked: ischecked,\\n            loose: false,\\n            text: itemContents\\n          });\\n          list.raw += raw;\\n          src = src.slice(raw.length);\\n        } // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\\n\\n\\n        list.items[list.items.length - 1].raw = raw.trimRight();\\n        list.items[list.items.length - 1].text = itemContents.trimRight();\\n        list.raw = list.raw.trimRight();\\n        var l = list.items.length; // Item child tokens handled here at end because we needed to have the final item to trim it first\\n\\n        for (i = 0; i < l; i++) {\\n          this.lexer.state.top = false;\\n          list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\\n\\n          if (list.items[i].tokens.some(function (t) {\\n            return t.type === 'space';\\n          })) {\\n            list.loose = true;\\n            list.items[i].loose = true;\\n          }\\n        }\\n\\n        return list;\\n      }\\n    };\\n\\n    _proto.html = function html(src) {\\n      var cap = this.rules.block.html.exec(src);\\n\\n      if (cap) {\\n        var token = {\\n          type: 'html',\\n          raw: cap[0],\\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\\n          text: cap[0]\\n        };\\n\\n        if (this.options.sanitize) {\\n          token.type = 'paragraph';\\n          token.text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\\n          token.tokens = [];\\n          this.lexer.inline(token.text, token.tokens);\\n        }\\n\\n        return token;\\n      }\\n    };\\n\\n    _proto.def = function def(src) {\\n      var cap = this.rules.block.def.exec(src);\\n\\n      if (cap) {\\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\\n        var tag = cap[1].toLowerCase().replace(/\\\\s+/g, ' ');\\n        return {\\n          type: 'def',\\n          tag: tag,\\n          raw: cap[0],\\n          href: cap[2],\\n          title: cap[3]\\n        };\\n      }\\n    };\\n\\n    _proto.table = function table(src) {\\n      var cap = this.rules.block.table.exec(src);\\n\\n      if (cap) {\\n        var item = {\\n          type: 'table',\\n          header: splitCells(cap[1]).map(function (c) {\\n            return {\\n              text: c\\n            };\\n          }),\\n          align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n          rows: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : []\\n        };\\n\\n        if (item.header.length === item.align.length) {\\n          item.raw = cap[0];\\n          var l = item.align.length;\\n          var i, j, k, row;\\n\\n          for (i = 0; i < l; i++) {\\n            if (/^ *-+: *$/.test(item.align[i])) {\\n              item.align[i] = 'right';\\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\\n              item.align[i] = 'center';\\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\\n              item.align[i] = 'left';\\n            } else {\\n              item.align[i] = null;\\n            }\\n          }\\n\\n          l = item.rows.length;\\n\\n          for (i = 0; i < l; i++) {\\n            item.rows[i] = splitCells(item.rows[i], item.header.length).map(function (c) {\\n              return {\\n                text: c\\n              };\\n            });\\n          } // parse child tokens inside headers and cells\\n          // header child tokens\\n\\n\\n          l = item.header.length;\\n\\n          for (j = 0; j < l; j++) {\\n            item.header[j].tokens = [];\\n            this.lexer.inlineTokens(item.header[j].text, item.header[j].tokens);\\n          } // cell child tokens\\n\\n\\n          l = item.rows.length;\\n\\n          for (j = 0; j < l; j++) {\\n            row = item.rows[j];\\n\\n            for (k = 0; k < row.length; k++) {\\n              row[k].tokens = [];\\n              this.lexer.inlineTokens(row[k].text, row[k].tokens);\\n            }\\n          }\\n\\n          return item;\\n        }\\n      }\\n    };\\n\\n    _proto.lheading = function lheading(src) {\\n      var cap = this.rules.block.lheading.exec(src);\\n\\n      if (cap) {\\n        var token = {\\n          type: 'heading',\\n          raw: cap[0],\\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\\n          text: cap[1],\\n          tokens: []\\n        };\\n        this.lexer.inline(token.text, token.tokens);\\n        return token;\\n      }\\n    };\\n\\n    _proto.paragraph = function paragraph(src) {\\n      var cap = this.rules.block.paragraph.exec(src);\\n\\n      if (cap) {\\n        var token = {\\n          type: 'paragraph',\\n          raw: cap[0],\\n          text: cap[1].charAt(cap[1].length - 1) === '\\\\n' ? cap[1].slice(0, -1) : cap[1],\\n          tokens: []\\n        };\\n        this.lexer.inline(token.text, token.tokens);\\n        return token;\\n      }\\n    };\\n\\n    _proto.text = function text(src) {\\n      var cap = this.rules.block.text.exec(src);\\n\\n      if (cap) {\\n        var token = {\\n          type: 'text',\\n          raw: cap[0],\\n          text: cap[0],\\n          tokens: []\\n        };\\n        this.lexer.inline(token.text, token.tokens);\\n        return token;\\n      }\\n    };\\n\\n    _proto.escape = function escape$1(src) {\\n      var cap = this.rules.inline.escape.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'escape',\\n          raw: cap[0],\\n          text: escape(cap[1])\\n        };\\n      }\\n    };\\n\\n    _proto.tag = function tag(src) {\\n      var cap = this.rules.inline.tag.exec(src);\\n\\n      if (cap) {\\n        if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\\n          this.lexer.state.inLink = true;\\n        } else if (this.lexer.state.inLink && /^<\\\\/a>/i.test(cap[0])) {\\n          this.lexer.state.inLink = false;\\n        }\\n\\n        if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n          this.lexer.state.inRawBlock = true;\\n        } else if (this.lexer.state.inRawBlock && /^<\\\\/(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n          this.lexer.state.inRawBlock = false;\\n        }\\n\\n        return {\\n          type: this.options.sanitize ? 'text' : 'html',\\n          raw: cap[0],\\n[end of marked.js]\\n[start of Tokenizer.js]\\nimport { defaults } from './defaults.js';\\nimport {\\n  rtrim,\\n  splitCells,\\n  escape,\\n  findClosingBracket\\n} from './helpers.js';\\n\\nfunction outputLink(cap, link, raw, lexer) {\\n  const href = link.href;\\n  const title = link.title ? escape(link.title) : null;\\n  const text = cap[1].replace(/\\\\\\\\([\\\\[\\\\]])/g, '$1');\\n\\n  if (cap[0].charAt(0) !== '!') {\\n    lexer.state.inLink = true;\\n    const token = {\\n      type: 'link',\\n      raw,\\n      href,\\n      title,\\n      text,\\n      tokens: lexer.inlineTokens(text, [])\\n    };\\n    lexer.state.inLink = false;\\n    return token;\\n  } else {\\n    return {\\n      type: 'image',\\n      raw,\\n      href,\\n      title,\\n      text: escape(text)\\n    };\\n  }\\n}\\n\\nfunction indentCodeCompensation(raw, text) {\\n  const matchIndentToCode = raw.match(/^(\\\\s+)(?:```)/);\\n\\n  if (matchIndentToCode === null) {\\n    return text;\\n  }\\n\\n  const indentToCode = matchIndentToCode[1];\\n\\n  return text\\n    .split('\\\\n')\\n    .map(node => {\\n      const matchIndentInNode = node.match(/^\\\\s+/);\\n      if (matchIndentInNode === null) {\\n        return node;\\n      }\\n\\n      const [indentInNode] = matchIndentInNode;\\n\\n      if (indentInNode.length >= indentToCode.length) {\\n        return node.slice(indentToCode.length);\\n      }\\n\\n      return node;\\n    })\\n    .join('\\\\n');\\n}\\n\\n/**\\n * Tokenizer\\n */\\nexport class Tokenizer {\\n  constructor(options) {\\n    this.options = options || defaults;\\n  }\\n\\n  space(src) {\\n    const cap = this.rules.block.newline.exec(src);\\n    if (cap) {\\n      if (cap[0].length > 1) {\\n        return {\\n          type: 'space',\\n          raw: cap[0]\\n        };\\n      }\\n      return { raw: '\\\\n' };\\n    }\\n  }\\n\\n  code(src) {\\n    const cap = this.rules.block.code.exec(src);\\n    if (cap) {\\n      const text = cap[0].replace(/^ {1,4}/gm, '');\\n      return {\\n        type: 'code',\\n        raw: cap[0],\\n        codeBlockStyle: 'indented',\\n        text: !this.options.pedantic\\n          ? rtrim(text, '\\\\n')\\n          : text\\n      };\\n    }\\n  }\\n\\n  fences(src) {\\n    const cap = this.rules.block.fences.exec(src);\\n    if (cap) {\\n      const raw = cap[0];\\n      const text = indentCodeCompensation(raw, cap[3] || '');\\n\\n      return {\\n        type: 'code',\\n        raw,\\n        lang: cap[2] ? cap[2].trim() : cap[2],\\n        text\\n      };\\n    }\\n  }\\n\\n  heading(src) {\\n    const cap = this.rules.block.heading.exec(src);\\n    if (cap) {\\n      let text = cap[2].trim();\\n\\n      // remove trailing #s\\n      if (/#$/.test(text)) {\\n        const trimmed = rtrim(text, '#');\\n        if (this.options.pedantic) {\\n          text = trimmed.trim();\\n        } else if (!trimmed || / $/.test(trimmed)) {\\n          // CommonMark requires space before trailing #s\\n          text = trimmed.trim();\\n        }\\n      }\\n\\n      const token = {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[1].length,\\n        text: text,\\n        tokens: []\\n      };\\n      this.lexer.inline(token.text, token.tokens);\\n      return token;\\n    }\\n  }\\n\\n  hr(src) {\\n    const cap = this.rules.block.hr.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'hr',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  blockquote(src) {\\n    const cap = this.rules.block.blockquote.exec(src);\\n    if (cap) {\\n      const text = cap[0].replace(/^ *> ?/gm, '');\\n\\n      return {\\n        type: 'blockquote',\\n        raw: cap[0],\\n        tokens: this.lexer.blockTokens(text, []),\\n        text\\n      };\\n    }\\n  }\\n\\n  list(src) {\\n    let cap = this.rules.block.list.exec(src);\\n    if (cap) {\\n      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine,\\n        line, lines, itemContents;\\n\\n      let bull = cap[1].trim();\\n      const isordered = bull.length > 1;\\n\\n      const list = {\\n        type: 'list',\\n        raw: '',\\n        ordered: isordered,\\n        start: isordered ? +bull.slice(0, -1) : '',\\n        loose: false,\\n        items: []\\n      };\\n\\n      bull = isordered ? `\\\\\\\\d{1,9}\\\\\\\\${bull.slice(-1)}` : `\\\\\\\\${bull}`;\\n\\n      if (this.options.pedantic) {\\n        bull = isordered ? bull : '[*+-]';\\n      }\\n\\n      // Get next list item\\n      const itemRegex = new RegExp(`^( {0,3}${bull})((?: [^\\\\\\\\n]*| *)(?:\\\\\\\\n[^\\\\\\\\n]*)*(?:\\\\\\\\n|$))`);\\n\\n      // Get each top-level item\\n      while (src) {\\n        if (this.rules.block.hr.test(src)) { // End list if we encounter an HR (possibly move into itemRegex?)\\n          break;\\n        }\\n\\n        if (!(cap = itemRegex.exec(src))) {\\n          break;\\n        }\\n\\n        lines = cap[2].split('\\\\n');\\n\\n        if (this.options.pedantic) {\\n          indent = 2;\\n          itemContents = lines[0].trimLeft();\\n        } else {\\n          indent = cap[2].search(/[^ ]/); // Find first non-space char\\n          indent = cap[1].length + (indent > 4 ? 1 : indent); // intented code blocks after 4 spaces; indent is always 1\\n          itemContents = lines[0].slice(indent - cap[1].length);\\n        }\\n\\n        blankLine = false;\\n        raw = cap[0];\\n\\n        if (!lines[0] && /^ *$/.test(lines[1])) { // items begin with at most one blank line\\n          raw = cap[1] + lines.slice(0, 2).join('\\\\n') + '\\\\n';\\n          list.loose = true;\\n          lines = [];\\n        }\\n\\n        const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\\\\\d{1,9}[.)])`);\\n\\n        for (i = 1; i < lines.length; i++) {\\n          line = lines[i];\\n\\n          if (this.options.pedantic) { // Re-align to follow commonmark nesting rules\\n            line = line.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\\n          }\\n\\n          // End list item if found start of new bullet\\n          if (nextBulletRegex.test(line)) {\\n            raw = cap[1] + lines.slice(0, i).join('\\\\n') + '\\\\n';\\n            break;\\n          }\\n\\n          // Until we encounter a blank line, item contents do not need indentation\\n          if (!blankLine) {\\n            if (!line.trim()) { // Check if current line is empty\\n              blankLine = true;\\n            }\\n\\n            // Dedent if possible\\n            if (line.search(/[^ ]/) >= indent) {\\n              itemContents += '\\\\n' + line.slice(indent);\\n            } else {\\n              itemContents += '\\\\n' + line;\\n            }\\n            continue;\\n          }\\n\\n          // Dedent this line\\n          if (line.search(/[^ ]/) >= indent || !line.trim()) {\\n            itemContents += '\\\\n' + line.slice(indent);\\n            continue;\\n          } else { // Line was not properly indented; end of this item\\n            raw = cap[1] + lines.slice(0, i).join('\\\\n') + '\\\\n';\\n            break;\\n          }\\n        }\\n\\n        if (!list.loose) {\\n          // If the previous item ended with a blank line, the list is loose\\n          if (endsWithBlankLine) {\\n            list.loose = true;\\n          } else if (/\\\\n *\\\\n *$/.test(raw)) {\\n            endsWithBlankLine = true;\\n          }\\n        }\\n\\n        // Check for task list items\\n        if (this.options.gfm) {\\n          istask = /^\\\\[[ xX]\\\\] /.exec(itemContents);\\n          if (istask) {\\n            ischecked = istask[0] !== '[ ] ';\\n            itemContents = itemContents.replace(/^\\\\[[ xX]\\\\] +/, '');\\n          }\\n        }\\n\\n        list.items.push({\\n          type: 'list_item',\\n          raw: raw,\\n          task: !!istask,\\n          checked: ischecked,\\n          loose: false,\\n          text: itemContents\\n        });\\n\\n        list.raw += raw;\\n        src = src.slice(raw.length);\\n      }\\n\\n      // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\\n      list.items[list.items.length - 1].raw = raw.trimRight();\\n      list.items[list.items.length - 1].text = itemContents.trimRight();\\n      list.raw = list.raw.trimRight();\\n\\n      const l = list.items.length;\\n\\n      // Item child tokens handled here at end because we needed to have the final item to trim it first\\n      for (i = 0; i < l; i++) {\\n        this.lexer.state.top = false;\\n        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\\n        if (list.items[i].tokens.some(t => t.type === 'space')) {\\n          list.loose = true;\\n          list.items[i].loose = true;\\n        }\\n      }\\n\\n      return list;\\n    }\\n  }\\n\\n  html(src) {\\n    const cap = this.rules.block.html.exec(src);\\n    if (cap) {\\n      const token = {\\n        type: 'html',\\n        raw: cap[0],\\n        pre: !this.options.sanitizer\\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\\n        text: cap[0]\\n      };\\n      if (this.options.sanitize) {\\n        token.type = 'paragraph';\\n        token.text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\\n        token.tokens = [];\\n        this.lexer.inline(token.text, token.tokens);\\n      }\\n      return token;\\n    }\\n  }\\n\\n  def(src) {\\n    const cap = this.rules.block.def.exec(src);\\n    if (cap) {\\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\\n      const tag = cap[1].toLowerCase().replace(/\\\\s+/g, ' ');\\n      return {\\n        type: 'def',\\n        tag,\\n        raw: cap[0],\\n        href: cap[2],\\n        title: cap[3]\\n      };\\n    }\\n  }\\n\\n  table(src) {\\n    const cap = this.rules.block.table.exec(src);\\n    if (cap) {\\n      const item = {\\n        type: 'table',\\n        header: splitCells(cap[1]).map(c => { return { text: c }; }),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        rows: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : []\\n      };\\n\\n      if (item.header.length === item.align.length) {\\n        item.raw = cap[0];\\n\\n        let l = item.align.length;\\n        let i, j, k, row;\\n        for (i = 0; i < l; i++) {\\n          if (/^ *-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'right';\\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'center';\\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\\n            item.align[i] = 'left';\\n          } else {\\n            item.align[i] = null;\\n          }\\n        }\\n\\n        l = item.rows.length;\\n        for (i = 0; i < l; i++) {\\n          item.rows[i] = splitCells(item.rows[i], item.header.length).map(c => { return { text: c }; });\\n        }\\n\\n        // parse child tokens inside headers and cells\\n\\n        // header child tokens\\n        l = item.header.length;\\n        for (j = 0; j < l; j++) {\\n          item.header[j].tokens = [];\\n          this.lexer.inlineTokens(item.header[j].text, item.header[j].tokens);\\n        }\\n\\n        // cell child tokens\\n        l = item.rows.length;\\n        for (j = 0; j < l; j++) {\\n          row = item.rows[j];\\n          for (k = 0; k < row.length; k++) {\\n            row[k].tokens = [];\\n            this.lexer.inlineTokens(row[k].text, row[k].tokens);\\n          }\\n        }\\n\\n        return item;\\n      }\\n    }\\n  }\\n\\n  lheading(src) {\\n    const cap = this.rules.block.lheading.exec(src);\\n    if (cap) {\\n      const token = {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\\n        text: cap[1],\\n        tokens: []\\n      };\\n      this.lexer.inline(token.text, token.tokens);\\n      return token;\\n    }\\n  }\\n\\n  paragraph(src) {\\n    const cap = this.rules.block.paragraph.exec(src);\\n    if (cap) {\\n      const token = {\\n        type: 'paragraph',\\n        raw: cap[0],\\n        text: cap[1].charAt(cap[1].length - 1) === '\\\\n'\\n          ? cap[1].slice(0, -1)\\n          : cap[1],\\n        tokens: []\\n      };\\n      this.lexer.inline(token.text, token.tokens);\\n      return token;\\n    }\\n  }\\n\\n  text(src) {\\n    const cap = this.rules.block.text.exec(src);\\n    if (cap) {\\n      const token = {\\n        type: 'text',\\n        raw: cap[0],\\n        text: cap[0],\\n        tokens: []\\n      };\\n      this.lexer.inline(token.text, token.tokens);\\n      return token;\\n    }\\n  }\\n\\n  escape(src) {\\n    const cap = this.rules.inline.escape.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'escape',\\n        raw: cap[0],\\n        text: escape(cap[1])\\n      };\\n    }\\n  }\\n\\n  tag(src) {\\n    const cap = this.rules.inline.tag.exec(src);\\n    if (cap) {\\n      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\\n        this.lexer.state.inLink = true;\\n      } else if (this.lexer.state.inLink && /^<\\\\/a>/i.test(cap[0])) {\\n        this.lexer.state.inLink = false;\\n      }\\n      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        this.lexer.state.inRawBlock = true;\\n      } else if (this.lexer.state.inRawBlock && /^<\\\\/(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        this.lexer.state.inRawBlock = false;\\n      }\\n\\n      return {\\n        type: this.options.sanitize\\n          ? 'text'\\n          : 'html',\\n        raw: cap[0],\\n        inLink: this.lexer.state.inLink,\\n        inRawBlock: this.lexer.state.inRawBlock,\\n        text: this.options.sanitize\\n          ? (this.options.sanitizer\\n            ? this.options.sanitizer(cap[0])\\n            : escape(cap[0]))\\n          : cap[0]\\n      };\\n    }\\n  }\\n\\n  link(src) {\\n    const cap = this.rules.inline.link.exec(src);\\n    if (cap) {\\n      const trimmedUrl = cap[2].trim();\\n      if (!this.options.pedantic && /^</.test(trimmedUrl)) {\\n        // commonmark requires matching angle brackets\\n        if (!(/>$/.test(trimmedUrl))) {\\n          return;\\n        }\\n\\n        // ending angle bracket cannot be escaped\\n        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\\\\\');\\n        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\\n          return;\\n        }\\n      } else {\\n        // find closing parenthesis\\n        const lastParenIndex = findClosingBracket(cap[2], '()');\\n        if (lastParenIndex > -1) {\\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\\n          const linkLen = start + cap[1].length + lastParenIndex;\\n          cap[2] = cap[2].substring(0, lastParenIndex);\\n          cap[0] = cap[0].substring(0, linkLen).trim();\\n          cap[3] = '';\\n        }\\n      }\\n      let href = cap[2];\\n      let title = '';\\n      if (this.options.pedantic) {\\n        // split pedantic href and title\\n        const link = /^([^'\\\"]*[^\\\\s])\\\\s+(['\\\"])(.*)\\\\2/.exec(href);\\n\\n        if (link) {\\n          href = link[1];\\n          title = link[3];\\n        }\\n      } else {\\n        title = cap[3] ? cap[3].slice(1, -1) : '';\\n      }\\n\\n      href = href.trim();\\n      if (/^</.test(href)) {\\n        if (this.options.pedantic && !(/>$/.test(trimmedUrl))) {\\n          // pedantic allows starting angle bracket without ending angle bracket\\n          href = href.slice(1);\\n        } else {\\n          href = href.slice(1, -1);\\n        }\\n      }\\n      return outputLink(cap, {\\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\\n      }, cap[0], this.lexer);\\n    }\\n  }\\n\\n  reflink(src, links) {\\n    let cap;\\n    if ((cap = this.rules.inline.reflink.exec(src))\\n        || (cap = this.rules.inline.nolink.exec(src))) {\\n      let link = (cap[2] || cap[1]).replace(/\\\\s+/g, ' ');\\n      link = links[link.toLowerCase()];\\n      if (!link || !link.href) {\\n        const text = cap[0].charAt(0);\\n        return {\\n          type: 'text',\\n          raw: text,\\n          text\\n        };\\n      }\\n      return outputLink(cap, link, cap[0], this.lexer);\\n    }\\n  }\\n\\n  emStrong(src, maskedSrc, prevChar = '') {\\n    let match = this.rules.inline.emStrong.lDelim.exec(src);\\n    if (!match) return;\\n\\n    // _ can't be between two alphanumerics. \\\\p{L}\\\\p{N} includes non-english alphabet/numbers as well\\n    if (match[3] && prevChar.match(/[\\\\p{L}\\\\p{N}]/u)) return;\\n\\n    const nextChar = match[1] || match[2] || '';\\n\\n    if (!nextChar || (nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar)))) {\\n      const lLength = match[0].length - 1;\\n      let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;\\n\\n      const endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\\n      endReg.lastIndex = 0;\\n\\n      // Clip maskedSrc to same section of string as src (move to lexer?)\\n      maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\\n\\n      while ((match = endReg.exec(maskedSrc)) != null) {\\n        rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\\n\\n        if (!rDelim) continue; // skip single * in __abc*abc__\\n\\n        rLength = rDelim.length;\\n\\n        if (match[3] || match[4]) { // found another Left Delim\\n          delimTotal += rLength;\\n          continue;\\n        } else if (match[5] || match[6]) { // either Left or Right Delim\\n          if (lLength % 3 && !((lLength + rLength) % 3)) {\\n            midDelimTotal += rLength;\\n            continue; // CommonMark Emphasis Rules 9-10\\n          }\\n        }\\n\\n        delimTotal -= rLength;\\n\\n        if (delimTotal > 0) continue; // Haven't found enough closing delimiters\\n\\n        // Remove extra characters. *a*** -> *a*\\n        rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);\\n\\n        // Create `em` if smallest delimiter has odd char count. *a***\\n        if (Math.min(lLength, rLength) % 2) {\\n          const text = src.slice(1, lLength + match.index + rLength);\\n          return {\\n            type: 'em',\\n            raw: src.slice(0, lLength + match.index + rLength + 1),\\n            text,\\n            tokens: this.lexer.inlineTokens(text, [])\\n          };\\n        }\\n\\n        // Create 'strong' if smallest delimiter has even char count. **a***\\n        const text = src.slice(2, lLength + match.index + rLength - 1);\\n        return {\\n          type: 'strong',\\n          raw: src.slice(0, lLength + match.index + rLength + 1),\\n          text,\\n          tokens: this.lexer.inlineTokens(text, [])\\n        };\\n      }\\n    }\\n  }\\n\\n  codespan(src) {\\n    const cap = this.rules.inline.code.exec(src);\\n    if (cap) {\\n      let text = cap[2].replace(/\\\\n/g, ' ');\\n      const hasNonSpaceChars = /[^ ]/.test(text);\\n      const hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\\n        text = text.substring(1, text.length - 1);\\n      }\\n      text = escape(text, true);\\n      return {\\n        type: 'codespan',\\n        raw: cap[0],\\n        text\\n      };\\n    }\\n  }\\n\\n  br(src) {\\n    const cap = this.rules.inline.br.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'br',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  del(src) {\\n    const cap = this.rules.inline.del.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'del',\\n        raw: cap[0],\\n        text: cap[2],\\n        tokens: this.lexer.inlineTokens(cap[2], [])\\n      };\\n    }\\n  }\\n\\n  autolink(src, mangle) {\\n    const cap = this.rules.inline.autolink.exec(src);\\n    if (cap) {\\n      let text, href;\\n      if (cap[2] === '@') {\\n        text = escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\\n        href = 'mailto:' + text;\\n      } else {\\n        text = escape(cap[1]);\\n        href = text;\\n      }\\n\\n      return {\\n        type: 'link',\\n        raw: cap[0],\\n        text,\\n        href,\\n        tokens: [\\n          {\\n            type: 'text',\\n            raw: text,\\n            text\\n          }\\n        ]\\n      };\\n    }\\n  }\\n\\n  url(src, mangle) {\\n    let cap;\\n    if (cap = this.rules.inline.url.exec(src)) {\\n      let text, href;\\n      if (cap[2] === '@') {\\n        text = escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\\n        href = 'mailto:' + text;\\n      } else {\\n        // do extended autolink path validation\\n        let prevCapZero;\\n        do {\\n          prevCapZero = cap[0];\\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\\n        } while (prevCapZero !== cap[0]);\\n        text = escape(cap[0]);\\n        if (cap[1] === 'www.') {\\n          href = 'http://' + text;\\n        } else {\\n          href = text;\\n        }\\n      }\\n      return {\\n        type: 'link',\\n        raw: cap[0],\\n        text,\\n        href,\\n        tokens: [\\n          {\\n            type: 'text',\\n            raw: text,\\n            text\\n          }\\n        ]\\n      };\\n    }\\n  }\\n\\n  inlineText(src, smartypants) {\\n    const cap = this.rules.inline.text.exec(src);\\n    if (cap) {\\n      let text;\\n      if (this.lexer.state.inRawBlock) {\\n        text = this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0];\\n      } else {\\n        text = escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\\n      }\\n      return {\\n        type: 'text',\\n        raw: cap[0],\\n        text\\n      };\\n    }\\n  }\\n}\\n\\n[end of Tokenizer.js]\\n[start of marked.esm.js]\\n    if (!nextChar || (nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar)))) {\\n      const lLength = match[0].length - 1;\\n      let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;\\n\\n      const endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\\n      endReg.lastIndex = 0;\\n\\n      // Clip maskedSrc to same section of string as src (move to lexer?)\\n      maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\\n\\n      while ((match = endReg.exec(maskedSrc)) != null) {\\n        rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\\n\\n        if (!rDelim) continue; // skip single * in __abc*abc__\\n\\n        rLength = rDelim.length;\\n\\n        if (match[3] || match[4]) { // found another Left Delim\\n          delimTotal += rLength;\\n          continue;\\n        } else if (match[5] || match[6]) { // either Left or Right Delim\\n          if (lLength % 3 && !((lLength + rLength) % 3)) {\\n            midDelimTotal += rLength;\\n            continue; // CommonMark Emphasis Rules 9-10\\n          }\\n        }\\n\\n        delimTotal -= rLength;\\n\\n        if (delimTotal > 0) continue; // Haven't found enough closing delimiters\\n\\n        // Remove extra characters. *a*** -> *a*\\n        rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);\\n\\n        // Create `em` if smallest delimiter has odd char count. *a***\\n        if (Math.min(lLength, rLength) % 2) {\\n          const text = src.slice(1, lLength + match.index + rLength);\\n          return {\\n            type: 'em',\\n            raw: src.slice(0, lLength + match.index + rLength + 1),\\n            text,\\n            tokens: this.lexer.inlineTokens(text, [])\\n          };\\n        }\\n\\n        // Create 'strong' if smallest delimiter has even char count. **a***\\n        const text = src.slice(2, lLength + match.index + rLength - 1);\\n        return {\\n          type: 'strong',\\n          raw: src.slice(0, lLength + match.index + rLength + 1),\\n          text,\\n          tokens: this.lexer.inlineTokens(text, [])\\n        };\\n      }\\n    }\\n  }\\n\\n  codespan(src) {\\n    const cap = this.rules.inline.code.exec(src);\\n    if (cap) {\\n      let text = cap[2].replace(/\\\\n/g, ' ');\\n      const hasNonSpaceChars = /[^ ]/.test(text);\\n      const hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\\n        text = text.substring(1, text.length - 1);\\n      }\\n      text = escape(text, true);\\n      return {\\n        type: 'codespan',\\n        raw: cap[0],\\n        text\\n      };\\n    }\\n  }\\n\\n  br(src) {\\n    const cap = this.rules.inline.br.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'br',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  del(src) {\\n    const cap = this.rules.inline.del.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'del',\\n        raw: cap[0],\\n        text: cap[2],\\n        tokens: this.lexer.inlineTokens(cap[2], [])\\n      };\\n    }\\n  }\\n\\n  autolink(src, mangle) {\\n    const cap = this.rules.inline.autolink.exec(src);\\n    if (cap) {\\n      let text, href;\\n      if (cap[2] === '@') {\\n        text = escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\\n        href = 'mailto:' + text;\\n      } else {\\n        text = escape(cap[1]);\\n        href = text;\\n      }\\n\\n      return {\\n        type: 'link',\\n        raw: cap[0],\\n        text,\\n        href,\\n        tokens: [\\n          {\\n            type: 'text',\\n            raw: text,\\n            text\\n          }\\n        ]\\n      };\\n    }\\n  }\\n\\n  url(src, mangle) {\\n    let cap;\\n    if (cap = this.rules.inline.url.exec(src)) {\\n      let text, href;\\n      if (cap[2] === '@') {\\n        text = escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\\n        href = 'mailto:' + text;\\n      } else {\\n        // do extended autolink path validation\\n        let prevCapZero;\\n        do {\\n          prevCapZero = cap[0];\\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\\n        } while (prevCapZero !== cap[0]);\\n        text = escape(cap[0]);\\n        if (cap[1] === 'www.') {\\n          href = 'http://' + text;\\n        } else {\\n          href = text;\\n        }\\n      }\\n      return {\\n        type: 'link',\\n        raw: cap[0],\\n        text,\\n        href,\\n        tokens: [\\n          {\\n            type: 'text',\\n            raw: text,\\n            text\\n          }\\n        ]\\n      };\\n    }\\n  }\\n\\n  inlineText(src, smartypants) {\\n    const cap = this.rules.inline.text.exec(src);\\n    if (cap) {\\n      let text;\\n      if (this.lexer.state.inRawBlock) {\\n        text = this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0];\\n      } else {\\n        text = escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\\n      }\\n      return {\\n        type: 'text',\\n        raw: cap[0],\\n        text\\n      };\\n    }\\n  }\\n}\\n\\n/**\\n * Block-Level Grammar\\n */\\nconst block = {\\n  newline: /^(?: *(?:\\\\n|$))+/,\\n  code: /^( {4}[^\\\\n]+(?:\\\\n(?: *(?:\\\\n|$))*)?)+/,\\n  fences: /^ {0,3}(`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})([^\\\\n]*)\\\\n(?:|([\\\\s\\\\S]*?)\\\\n)(?: {0,3}\\\\1[~`]* *(?=\\\\n|$)|$)/,\\n  hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)/,\\n  heading: /^ {0,3}(#{1,6})(?=\\\\s|$)(.*)(?:\\\\n+|$)/,\\n  blockquote: /^( {0,3}> ?(paragraph|[^\\\\n]*)(?:\\\\n|$))+/,\\n  list: /^( {0,3}bull)( [^\\\\n]+?)?(?:\\\\n|$)/,\\n  html: '^ {0,3}(?:' // optional indentation\\n    + '<(script|pre|style|textarea)[\\\\\\\\s>][\\\\\\\\s\\\\\\\\S]*?(?:</\\\\\\\\1>[^\\\\\\\\n]*\\\\\\\\n+|$)' // (1)\\n    + '|comment[^\\\\\\\\n]*(\\\\\\\\n+|$)' // (2)\\n    + '|<\\\\\\\\?[\\\\\\\\s\\\\\\\\S]*?(?:\\\\\\\\?>\\\\\\\\n*|$)' // (3)\\n    + '|<![A-Z][\\\\\\\\s\\\\\\\\S]*?(?:>\\\\\\\\n*|$)' // (4)\\n    + '|<!\\\\\\\\[CDATA\\\\\\\\[[\\\\\\\\s\\\\\\\\S]*?(?:\\\\\\\\]\\\\\\\\]>\\\\\\\\n*|$)' // (5)\\n    + '|</?(tag)(?: +|\\\\\\\\n|/?>)[\\\\\\\\s\\\\\\\\S]*?(?:(?:\\\\\\\\n *)+\\\\\\\\n|$)' // (6)\\n    + '|<(?!script|pre|style|textarea)([a-z][\\\\\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\\\\\t]*(?:\\\\\\\\n|$))[\\\\\\\\s\\\\\\\\S]*?(?:(?:\\\\\\\\n *)+\\\\\\\\n|$)' // (7) open tag\\n    + '|</(?!script|pre|style|textarea)[a-z][\\\\\\\\w-]*\\\\\\\\s*>(?=[ \\\\\\\\t]*(?:\\\\\\\\n|$))[\\\\\\\\s\\\\\\\\S]*?(?:(?:\\\\\\\\n *)+\\\\\\\\n|$)' // (7) closing tag\\n    + ')',\\n  def: /^ {0,3}\\\\[(label)\\\\]: *\\\\n? *<?([^\\\\s>]+)>?(?:(?: +\\\\n? *| *\\\\n *)(title))? *(?:\\\\n+|$)/,\\n  table: noopTest,\\n  lheading: /^([^\\\\n]+)\\\\n {0,3}(=+|-+) *(?:\\\\n+|$)/,\\n  // regex template, placeholders will be replaced according to different paragraph\\n  // interruption rules of commonmark and the original markdown spec:\\n  _paragraph: /^([^\\\\n]+(?:\\\\n(?!hr|heading|lheading|blockquote|fences|list|html| +\\\\n)[^\\\\n]+)*)/,\\n  text: /^[^\\\\n]+/\\n};\\n\\nblock._label = /(?!\\\\s*\\\\])(?:\\\\\\\\[\\\\[\\\\]]|[^\\\\[\\\\]])+/;\\nblock._title = /(?:\\\"(?:\\\\\\\\\\\"?|[^\\\"\\\\\\\\])*\\\"|'[^'\\\\n]*(?:\\\\n[^'\\\\n]+)*\\\\n?'|\\\\([^()]*\\\\))/;\\nblock.def = edit(block.def)\\n  .replace('label', block._label)\\n  .replace('title', block._title)\\n  .getRegex();\\n\\nblock.bullet = /(?:[*+-]|\\\\d{1,9}[.)])/;\\nblock.listItemStart = edit(/^( *)(bull) */)\\n  .replace('bull', block.bullet)\\n  .getRegex();\\n\\nblock.list = edit(block.list)\\n  .replace(/bull/g, block.bullet)\\n  .replace('hr', '\\\\\\\\n+(?=\\\\\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\\\\\* *){3,})(?:\\\\\\\\n+|$))')\\n  .replace('def', '\\\\\\\\n+(?=' + block.def.source + ')')\\n  .getRegex();\\n\\nblock._tag = 'address|article|aside|base|basefont|blockquote|body|caption'\\n  + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\\n  + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\\n  + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\\n  + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'\\n  + '|track|ul';\\nblock._comment = /<!--(?!-?>)[\\\\s\\\\S]*?(?:-->|$)/;\\nblock.html = edit(block.html, 'i')\\n  .replace('comment', block._comment)\\n  .replace('tag', block._tag)\\n  .replace('attribute', / +[a-zA-Z:_][\\\\w.:-]*(?: *= *\\\"[^\\\"\\\\n]*\\\"| *= *'[^'\\\\n]*'| *= *[^\\\\s\\\"'=<>`]+)?/)\\n  .getRegex();\\n\\nblock.paragraph = edit(block._paragraph)\\n  .replace('hr', block.hr)\\n  .replace('heading', ' {0,3}#{1,6} ')\\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\\n  .replace('blockquote', ' {0,3}>')\\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\\\\\n]*\\\\\\\\n)|~{3,})[^\\\\\\\\n]*\\\\\\\\n')\\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\\n  .replace('html', '</?(?:tag)(?: +|\\\\\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\\n  .getRegex();\\n\\nblock.blockquote = edit(block.blockquote)\\n  .replace('paragraph', block.paragraph)\\n  .getRegex();\\n\\n/**\\n * Normal Block Grammar\\n */\\n\\nblock.normal = merge({}, block);\\n\\n/**\\n * GFM Block Grammar\\n */\\n\\nblock.gfm = merge({}, block.normal, {\\n  table: '^ *([^\\\\\\\\n ].*\\\\\\\\|.*)\\\\\\\\n' // Header\\n    + ' {0,3}(?:\\\\\\\\| *)?(:?-+:? *(?:\\\\\\\\| *:?-+:? *)*)(?:\\\\\\\\| *)?' // Align\\n    + '(?:\\\\\\\\n((?:(?! *\\\\\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\\\\\n|$))*)\\\\\\\\n*|$)' // Cells\\n});\\n\\nblock.gfm.table = edit(block.gfm.table)\\n  .replace('hr', block.hr)\\n  .replace('heading', ' {0,3}#{1,6} ')\\n  .replace('blockquote', ' {0,3}>')\\n  .replace('code', ' {4}[^\\\\\\\\n]')\\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\\\\\n]*\\\\\\\\n)|~{3,})[^\\\\\\\\n]*\\\\\\\\n')\\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\\n  .replace('html', '</?(?:tag)(?: +|\\\\\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\\n  .replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\\n  .getRegex();\\n\\n/**\\n * Pedantic grammar (original John Gruber's loose markdown specification)\\n */\\n\\nblock.pedantic = merge({}, block.normal, {\\n  html: edit(\\n    '^ *(?:comment *(?:\\\\\\\\n|\\\\\\\\s*$)'\\n    + '|<(tag)[\\\\\\\\s\\\\\\\\S]+?</\\\\\\\\1> *(?:\\\\\\\\n{2,}|\\\\\\\\s*$)' // closed tag\\n    + '|<tag(?:\\\"[^\\\"]*\\\"|\\\\'[^\\\\']*\\\\'|\\\\\\\\s[^\\\\'\\\"/>\\\\\\\\s]*)*?/?> *(?:\\\\\\\\n{2,}|\\\\\\\\s*$))')\\n    .replace('comment', block._comment)\\n    .replace(/tag/g, '(?!(?:'\\n      + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\\n      + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\\n      + '\\\\\\\\b)\\\\\\\\w+(?!:|[^\\\\\\\\w\\\\\\\\s@]*@)\\\\\\\\b')\\n    .getRegex(),\\n  def: /^ *\\\\[([^\\\\]]+)\\\\]: *<?([^\\\\s>]+)>?(?: +([\\\"(][^\\\\n]+[\\\")]))? *(?:\\\\n+|$)/,\\n  heading: /^(#{1,6})(.*)(?:\\\\n+|$)/,\\n  fences: noopTest, // fences not supported\\n  paragraph: edit(block.normal._paragraph)\\n    .replace('hr', block.hr)\\n    .replace('heading', ' *#{1,6} *[^\\\\n]')\\n    .replace('lheading', block.lheading)\\n    .replace('blockquote', ' {0,3}>')\\n    .replace('|fences', '')\\n    .replace('|list', '')\\n    .replace('|html', '')\\n    .getRegex()\\n});\\n\\n/**\\n * Inline-Level Grammar\\n */\\nconst inline = {\\n  escape: /^\\\\\\\\([!\\\"#$%&'()*+,\\\\-./:;<=>?@\\\\[\\\\]\\\\\\\\^_`{|}~])/,\\n  autolink: /^<(scheme:[^\\\\s\\\\x00-\\\\x1f<>]*|email)>/,\\n  url: noopTest,\\n  tag: '^comment'\\n    + '|^</[a-zA-Z][\\\\\\\\w:-]*\\\\\\\\s*>' // self-closing tag\\n    + '|^<[a-zA-Z][\\\\\\\\w-]*(?:attribute)*?\\\\\\\\s*/?>' // open tag\\n    + '|^<\\\\\\\\?[\\\\\\\\s\\\\\\\\S]*?\\\\\\\\?>' // processing instruction, e.g. <?php ?>\\n    + '|^<![a-zA-Z]+\\\\\\\\s[\\\\\\\\s\\\\\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\\n    + '|^<!\\\\\\\\[CDATA\\\\\\\\[[\\\\\\\\s\\\\\\\\S]*?\\\\\\\\]\\\\\\\\]>', // CDATA section\\n  link: /^!?\\\\[(label)\\\\]\\\\(\\\\s*(href)(?:\\\\s+(title))?\\\\s*\\\\)/,\\n  reflink: /^!?\\\\[(label)\\\\]\\\\[(?!\\\\s*\\\\])((?:\\\\\\\\[\\\\[\\\\]]?|[^\\\\[\\\\]\\\\\\\\])+)\\\\]/,\\n  nolink: /^!?\\\\[(?!\\\\s*\\\\])((?:\\\\[[^\\\\[\\\\]]*\\\\]|\\\\\\\\[\\\\[\\\\]]|[^\\\\[\\\\]])*)\\\\](?:\\\\[\\\\])?/,\\n  reflinkSearch: 'reflink|nolink(?!\\\\\\\\()',\\n  emStrong: {\\n    lDelim: /^(?:\\\\*+(?:([punct_])|[^\\\\s*]))|^_+(?:([punct*])|([^\\\\s_]))/,\\n    //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.\\n    //        () Skip orphan delim inside strong    (1) #***                (2) a***#, a***                   (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a\\n    rDelimAst: /^[^_*]*?\\\\_\\\\_[^_*]*?\\\\*[^_*]*?(?=\\\\_\\\\_)|[punct_](\\\\*+)(?=[\\\\s]|$)|[^punct*_\\\\s](\\\\*+)(?=[punct_\\\\s]|$)|[punct_\\\\s](\\\\*+)(?=[^punct*_\\\\s])|[\\\\s](\\\\*+)(?=[punct_])|[punct_](\\\\*+)(?=[punct_])|[^punct*_\\\\s](\\\\*+)(?=[^punct*_\\\\s])/,\\n    rDelimUnd: /^[^_*]*?\\\\*\\\\*[^_*]*?\\\\_[^_*]*?(?=\\\\*\\\\*)|[punct*](\\\\_+)(?=[\\\\s]|$)|[^punct*_\\\\s](\\\\_+)(?=[punct*\\\\s]|$)|[punct*\\\\s](\\\\_+)(?=[^punct*_\\\\s])|[\\\\s](\\\\_+)(?=[punct*])|[punct*](\\\\_+)(?=[punct*])/ // ^- Not allowed for _\\n  },\\n  code: /^(`+)([^`]|[^`][\\\\s\\\\S]*?[^`])\\\\1(?!`)/,\\n  br: /^( {2,}|\\\\\\\\)\\\\n(?!\\\\s*$)/,\\n  del: noopTest,\\n  text: /^(`+|[^`])(?:(?= {2,}\\\\n)|[\\\\s\\\\S]*?(?:(?=[\\\\\\\\<!\\\\[`*_]|\\\\b_|$)|[^ ](?= {2,}\\\\n)))/,\\n  punctuation: /^([\\\\spunctuation])/\\n};\\n\\n// list of punctuation marks from CommonMark spec\\n// without * and _ to handle the different emphasis markers * and _\\ninline._punctuation = '!\\\"#$%&\\\\'()+\\\\\\\\-.,/:;<=>?@\\\\\\\\[\\\\\\\\]`^{|}~';\\ninline.punctuation = edit(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex();\\n\\n// sequences em should skip over [title](link), `code`, <html>\\ninline.blockSkip = /\\\\[[^\\\\]]*?\\\\]\\\\([^\\\\)]*?\\\\)|`[^`]*?`|<[^>]*?>/g;\\ninline.escapedEmSt = /\\\\\\\\\\\\*|\\\\\\\\_/g;\\n\\ninline._comment = edit(block._comment).replace('(?:-->|$)', '-->').getRegex();\\n\\ninline.emStrong.lDelim = edit(inline.emStrong.lDelim)\\n  .replace(/punct/g, inline._punctuation)\\n  .getRegex();\\n\\ninline.emStrong.rDelimAst = edit(inline.emStrong.rDelimAst, 'g')\\n  .replace(/punct/g, inline._punctuation)\\n  .getRegex();\\n\\ninline.emStrong.rDelimUnd = edit(inline.emStrong.rDelimUnd, 'g')\\n  .replace(/punct/g, inline._punctuation)\\n  .getRegex();\\n\\ninline._escapes = /\\\\\\\\([!\\\"#$%&'()*+,\\\\-./:;<=>?@\\\\[\\\\]\\\\\\\\^_`{|}~])/g;\\n\\ninline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\\ninline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\\ninline.autolink = edit(inline.autolink)\\n  .replace('scheme', inline._scheme)\\n  .replace('email', inline._email)\\n  .getRegex();\\n\\ninline._attribute = /\\\\s+[a-zA-Z:_][\\\\w.:-]*(?:\\\\s*=\\\\s*\\\"[^\\\"]*\\\"|\\\\s*=\\\\s*'[^']*'|\\\\s*=\\\\s*[^\\\\s\\\"'=<>`]+)?/;\\n\\ninline.tag = edit(inline.tag)\\n  .replace('comment', inline._comment)\\n  .replace('attribute', inline._attribute)\\n  .getRegex();\\n\\ninline._label = /(?:\\\\[(?:\\\\\\\\.|[^\\\\[\\\\]\\\\\\\\])*\\\\]|\\\\\\\\.|`[^`]*`|[^\\\\[\\\\]\\\\\\\\`])*?/;\\ninline._href = /<(?:\\\\\\\\.|[^\\\\n<>\\\\\\\\])+>|[^\\\\s\\\\x00-\\\\x1f]*/;\\ninline._title = /\\\"(?:\\\\\\\\\\\"?|[^\\\"\\\\\\\\])*\\\"|'(?:\\\\\\\\'?|[^'\\\\\\\\])*'|\\\\((?:\\\\\\\\\\\\)?|[^)\\\\\\\\])*\\\\)/;\\n\\ninline.link = edit(inline.link)\\n  .replace('label', inline._label)\\n  .replace('href', inline._href)\\n  .replace('title', inline._title)\\n  .getRegex();\\n\\ninline.reflink = edit(inline.reflink)\\n  .replace('label', inline._label)\\n  .getRegex();\\n\\ninline.reflinkSearch = edit(inline.reflinkSearch, 'g')\\n  .replace('reflink', inline.reflink)\\n  .replace('nolink', inline.nolink)\\n  .getRegex();\\n\\n/**\\n * Normal Inline Grammar\\n */\\n\\ninline.normal = merge({}, inline);\\n\\n/**\\n * Pedantic Inline Grammar\\n */\\n\\ninline.pedantic = merge({}, inline.normal, {\\n  strong: {\\n    start: /^__|\\\\*\\\\*/,\\n    middle: /^__(?=\\\\S)([\\\\s\\\\S]*?\\\\S)__(?!_)|^\\\\*\\\\*(?=\\\\S)([\\\\s\\\\S]*?\\\\S)\\\\*\\\\*(?!\\\\*)/,\\n    endAst: /\\\\*\\\\*(?!\\\\*)/g,\\n    endUnd: /__(?!_)/g\\n  },\\n  em: {\\n    start: /^_|\\\\*/,\\n    middle: /^()\\\\*(?=\\\\S)([\\\\s\\\\S]*?\\\\S)\\\\*(?!\\\\*)|^_(?=\\\\S)([\\\\s\\\\S]*?\\\\S)_(?!_)/,\\n    endAst: /\\\\*(?!\\\\*)/g,\\n    endUnd: /_(?!_)/g\\n  },\\n  link: edit(/^!?\\\\[(label)\\\\]\\\\((.*?)\\\\)/)\\n    .replace('label', inline._label)\\n    .getRegex(),\\n  reflink: edit(/^!?\\\\[(label)\\\\]\\\\s*\\\\[([^\\\\]]*)\\\\]/)\\n    .replace('label', inline._label)\\n    .getRegex()\\n});\\n\\n/**\\n * GFM Inline Grammar\\n */\\n\\ninline.gfm = merge({}, inline.normal, {\\n  escape: edit(inline.escape).replace('])', '~|])').getRegex(),\\n  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\\n  url: /^((?:ftp|https?):\\\\/\\\\/|www\\\\.)(?:[a-zA-Z0-9\\\\-]+\\\\.?)+[^\\\\s<]*|^email/,\\n  _backpedal: /(?:[^?!.,:;*_~()&]+|\\\\([^)]*\\\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\\n  del: /^(~~?)(?=[^\\\\s~])([\\\\s\\\\S]*?[^\\\\s~])\\\\1(?=[^~]|$)/,\\n  text: /^([`~]+|[^`~])(?:(?= {2,}\\\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\\\/=?_`{\\\\|}~-]+@)|[\\\\s\\\\S]*?(?:(?=[\\\\\\\\<!\\\\[`*~_]|\\\\b_|https?:\\\\/\\\\/|ftp:\\\\/\\\\/|www\\\\.|$)|[^ ](?= {2,}\\\\n)|[^a-zA-Z0-9.!#$%&'*+\\\\/=?_`{\\\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\\\/=?_`{\\\\|}~-]+@)))/\\n});\\n\\ninline.gfm.url = edit(inline.gfm.url, 'i')\\n  .replace('email', inline.gfm._extended_email)\\n  .getRegex();\\n/**\\n * GFM + Line Breaks Inline Grammar\\n */\\n\\ninline.breaks = merge({}, inline.gfm, {\\n  br: edit(inline.br).replace('{2,}', '*').getRegex(),\\n  text: edit(inline.gfm.text)\\n    .replace('\\\\\\\\b_', '\\\\\\\\b_| {2,}\\\\\\\\n')\\n    .replace(/\\\\{2,\\\\}/g, '*')\\n    .getRegex()\\n});\\n\\n/**\\n * smartypants text replacement\\n */\\nfunction smartypants(text) {\\n  return text\\n    // em-dashes\\n    .replace(/---/g, '\\\\u2014')\\n    // en-dashes\\n    .replace(/--/g, '\\\\u2013')\\n    // opening singles\\n    .replace(/(^|[-\\\\u2014/(\\\\[{\\\"\\\\s])'/g, '$1\\\\u2018')\\n    // closing singles & apostrophes\\n    .replace(/'/g, '\\\\u2019')\\n    // opening doubles\\n    .replace(/(^|[-\\\\u2014/(\\\\[{\\\\u2018\\\\s])\\\"/g, '$1\\\\u201c')\\n    // closing doubles\\n    .replace(/\\\"/g, '\\\\u201d')\\n    // ellipses\\n    .replace(/\\\\.{3}/g, '\\\\u2026');\\n}\\n\\n/**\\n * mangle email addresses\\n */\\nfunction mangle(text) {\\n  let out = '',\\n    i,\\n    ch;\\n\\n  const l = text.length;\\n  for (i = 0; i < l; i++) {\\n    ch = text.charCodeAt(i);\\n    if (Math.random() > 0.5) {\\n      ch = 'x' + ch.toString(16);\\n    }\\n    out += '&#' + ch + ';';\\n  }\\n\\n  return out;\\n}\\n\\n/**\\n * Block Lexer\\n */\\nclass Lexer {\\n  constructor(options) {\\n    this.tokens = [];\\n    this.tokens.links = Object.create(null);\\n    this.options = options || defaults;\\n    this.options.tokenizer = this.options.tokenizer || new Tokenizer();\\n    this.tokenizer = this.options.tokenizer;\\n    this.tokenizer.options = this.options;\\n    this.tokenizer.lexer = this;\\n    this.inlineQueue = [];\\n    this.state = {\\n      inLink: false,\\n      inRawBlock: false,\\n      top: true\\n    };\\n\\n    const rules = {\\n      block: block.normal,\\n      inline: inline.normal\\n    };\\n\\n    if (this.options.pedantic) {\\n      rules.block = block.pedantic;\\n      rules.inline = inline.pedantic;\\n    } else if (this.options.gfm) {\\n      rules.block = block.gfm;\\n      if (this.options.breaks) {\\n        rules.inline = inline.breaks;\\n      } else {\\n        rules.inline = inline.gfm;\\n      }\\n    }\\n    this.tokenizer.rules = rules;\\n  }\\n\\n  /**\\n   * Expose Rules\\n   */\\n  static get rules() {\\n    return {\\n      block,\\n      inline\\n    };\\n  }\\n\\n  /**\\n   * Static Lex Method\\n   */\\n  static lex(src, options) {\\n    const lexer = new Lexer(options);\\n    return lexer.lex(src);\\n  }\\n\\n  /**\\n   * Static Lex Inline Method\\n   */\\n  static lexInline(src, options) {\\n    const lexer = new Lexer(options);\\n    return lexer.inlineTokens(src);\\n  }\\n\\n  /**\\n   * Preprocessing\\n   */\\n  lex(src) {\\n    src = src\\n      .replace(/\\\\r\\\\n|\\\\r/g, '\\\\n')\\n      .replace(/\\\\t/g, '    ');\\n\\n    this.blockTokens(src, this.tokens);\\n\\n    let next;\\n    while (next = this.inlineQueue.shift()) {\\n      this.inlineTokens(next.src, next.tokens);\\n    }\\n\\n    return this.tokens;\\n  }\\n\\n  /**\\n   * Lexing\\n   */\\n  blockTokens(src, tokens = []) {\\n    if (this.options.pedantic) {\\n      src = src.replace(/^ +$/gm, '');\\n    }\\n    let token, lastToken, cutSrc, lastParagraphClipped;\\n\\n    while (src) {\\n      if (this.options.extensions\\n        && this.options.extensions.block\\n        && this.options.extensions.block.some((extTokenizer) => {\\n          if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\\n            src = src.substring(token.raw.length);\\n            tokens.push(token);\\n            return true;\\n          }\\n          return false;\\n        })) {\\n        continue;\\n      }\\n\\n      // newline\\n      if (token = this.tokenizer.space(src)) {\\n        src = src.substring(token.raw.length);\\n        if (token.type) {\\n          tokens.push(token);\\n        }\\n        continue;\\n      }\\n\\n      // code\\n      if (token = this.tokenizer.code(src)) {\\n        src = src.substring(token.raw.length);\\n        lastToken = tokens[tokens.length - 1];\\n        // An indented code block cannot interrupt a paragraph.\\n        if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\\n          lastToken.raw += '\\\\n' + token.raw;\\n          lastToken.text += '\\\\n' + token.text;\\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\\n        } else {\\n          tokens.push(token);\\n        }\\n        continue;\\n      }\\n\\n      // fences\\n      if (token = this.tokenizer.fences(src)) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // heading\\n      if (token = this.tokenizer.heading(src)) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n[end of marked.esm.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "broken.md",
        "marked.esm.js",
        "marked.js",
        "Tokenizer.js",
        "marked.esm.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "13fc44ef-ed9b-47f4-b606-c0e19eac12f1",
        "score": 0.01639344262295082,
        "payload": {
          "text": "# Markdown is broken\n\nI have a lot of scraps of markdown engine oddities that I've collected over the\nyears. What you see below is slightly messy, but it's what I've managed to\ncobble together to illustrate the differences between markdown engines, and\nwhy, if there ever is a markdown specification, it has to be absolutely\nthorough. There are a lot more of these little differences I have documented\nelsewhere. I know I will find them lingering on my disk one day, but until\nthen, I'll continue to add whatever strange nonsensical things I find.\n\nSome of these examples may only mention a particular engine compared to marked.\nHowever, the examples with markdown.pl could easily be swapped out for\ndiscount, upskirt, or markdown.js, and you would very easily see even more\ninconsistencies.\n\nA lot of this was written when I was very unsatisfied with the inconsistencies\nbetween markdown engines. Please excuse the frustration noticeable in my\nwriting.\n\n## Examples of markdown's \"stupid\" list parsing\n\n```\n$ markdown.pl\n\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n\n<ul>\n<li>item2</li>\n</ul>\n\n<p><p>text</p></li>\n</ul></p>\n```\n\n\n```\n$ marked\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n<ul>\n<li>item2</li>\n</ul>\n<p>text</p>\n</li>\n</ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\n```\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\n```\n$ marked\n* hello\n  > world\n^D\n<ul>\n<li>hello<blockquote>\n<p>world</p>\n</blockquote>\n</li>\n</ul>\n```\n\nAgain, which looks correct to you?\n\n- - -\n\nEXAMPLE:\n\n```\n$ markdown.pl\n* hello\n  * world\n    * hi\n          code\n^D\n<ul>\n<li>hello\n<ul>\n<li>world</li>\n<li>hi\n  code</li>\n</ul></li>\n</ul>\n```\n\nThe code isn't a code block even though it's after the bullet margin. I know,\nlets give it two more spaces, effectively making it 8 spaces past the bullet.\n\n```\n$ markdown.pl\n* hello\n  * world\n    * hi\n            code\n^D\n<ul>\n<li>hello\n<ul>\n<li>world</li>\n<li>hi\n    code</li>\n</ul></li>\n</ul>\n```\n\nAnd, it's still not a code block. Did you also notice that the 3rd item isn't\neven its own list? Markdown screws that up too because of its indentation\nunaware parsing.\n\n- - -\n\nLet's look at some more examples of markdown's list parsing:\n\n```\n$ markdown.pl\n\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n\n<ul>\n<li>item2</li>\n</ul>\n\n<p><p>text</p></li>\n</ul></p>\n```\n\nMisnested tags.\n\n\n```\n$ marked\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n<ul>\n<li>item2</li>\n</ul>\n<p>text</p>\n</li>\n</ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\n```\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\nMore misnested tags.\n\n\n```\n$ marked\n* hello\n  > world\n^D\n<ul>\n<li>hello<blockquote>\n<p>world</p>\n</blockquote>\n</li>\n</ul>\n```\n\nAgain, which looks correct to you?\n\n- - -\n\n# Why quality matters - Part 2\n\n``` bash\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\n``` bash\n$ sundown # upskirt\n* hello\n  > world\n^D\n<ul>\n<li>hello\n&gt; world</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n  > world\n^D\n<ul><li>hello <blockquote><p>world</p></blockquote></li></ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/23\n\n``` bash\n$ markdown.pl # upskirt/markdown.js/discount\n* hello\n      var a = 1;\n* world\n^D\n<ul>\n<li>hello\nvar a = 1;</li>\n<li>world</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n      var a = 1;\n* world\n^D\n<ul><li>hello\n<pre>code>var a = 1;</code></pre></li>\n<li>world</li></ul>\n```\n\nWhich looks more reasonable? Why shouldn't code blocks be able to appear in\nlist items in a sane way?\n\n- - -\n\n``` bash\n$ markdown.js\n<div>hello</div>\n\n<span>hello</span>\n^D\n<p>&lt;div&gt;hello&lt;/div&gt;</p>\n\n<p>&lt;span&gt;hello&lt;/span&gt;</p>\n```\n\n``` bash\n$ marked\n<div>hello</div>\n\n<span>hello</span>\n^D\n<div>hello</div>\n\n\n<p><span>hello</span>\n</p>\n```\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/27\n\n``` bash\n$ markdown.js\n[![an image](/image)](/link)\n^D\n<p><a href=\"/image)](/link\">![an image</a></p>\n```\n\n``` bash\n$ marked\n[![an image](/image)](/link)\n^D\n<p><a href=\"/link\"><img src=\"/image\" alt=\"an image\"></a>\n</p>\n```\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/24\n\n``` bash\n$ markdown.js\n> a\n\n> b\n\n> c\n^D\n<blockquote><p>a</p><p>bundefined&gt; c</p></blockquote>\n```\n\n``` bash\n$ marked\n> a\n\n> b\n\n> c\n^D\n<blockquote><p>a\n\n</p></blockquote>\n<blockquote><p>b\n\n</p></blockquote>\n<blockquote><p>c\n</p></blockquote>\n```\n\n- - -\n\n``` bash\n$ markdown.pl\n* hello\n  * world\n    how\n\n    are\n    you\n\n  * today\n* hi\n^D\n<ul>\n<li><p>hello</p>\n\n<ul>\n<li>world\nhow</li>\n</ul>\n\n<p>are\nyou</p>\n\n<ul>\n<li>today</li>\n</ul></li>\n<li>hi</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n  * world\n    how\n\n    are\n    you\n\n  * today\n* hi\n^D\n<ul>\n<li><p>hello</p>\n<ul>\n<li><p>world\nhow</p>\n<p>are\nyou</p>\n</li>\n<li><p>today</p>\n</li>\n</ul>\n</li>\n<li>hi</li>\n</ul>\n```\n",
          "filepath": "data/repos/markedjs/marked-4.0/docs/broken.md",
          "repo": "markedjs/marked",
          "version": "4.0",
          "chunk_index": 0
        }
      },
      {
        "id": "29e37d87-4001-4f2c-9cf8-7e858743ea7c",
        "score": 0.016129032258064516,
        "payload": {
          "text": "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2021, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\nfunction getDefaults() {\n  return {\n    baseUrl: null,\n    breaks: false,\n    extensions: null,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: null,\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartLists: false,\n    smartypants: false,\n    tokenizer: null,\n    walkTokens: null,\n    xhtml: false\n  };\n}\n\nlet defaults = getDefaults();\n\nfunction changeDefaults(newDefaults) {\n  defaults = newDefaults;\n}\n\n/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = /[&<>\"']/g;\nconst escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\nconst escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\nconst escapeReplacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape(html, encode) {\n  if (encode) {\n    if (escapeTest.test(html)) {\n      return html.replace(escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (escapeTestNoEncode.test(html)) {\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nconst caret = /(^|[^\\[])\\^/g;\nfunction edit(regex, opt) {\n  regex = regex.source || regex;\n  opt = opt || '';\n  const obj = {\n    replace: (name, val) => {\n      val = val.source || val;\n      val = val.replace(caret, '$1');\n      regex = regex.replace(name, val);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(regex, opt);\n    }\n  };\n  return obj;\n}\n\nconst nonWordAndColonTest = /[^\\w:]/g;\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    let prot;\n    try {\n      prot = decodeURIComponent(unescape(href))\n        .replace(nonWordAndColonTest, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nconst baseUrls = {};\nconst justDomain = /^[^:]+:\\/*[^/]*$/;\nconst protocol = /^([^:]+:)[\\s\\S]*$/;\nconst domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (justDomain.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n  const relativeBase = base.indexOf(':') === -1;\n\n  if (href.substring(0, 2) === '//') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(protocol, '$1') + href;\n  } else if (href.charAt(0) === '/') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(domain, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\n\nconst noopTest = { exec: function noopTest() {} };\n\nfunction merge(obj) {\n  let i = 1,\n    target,\n    key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n      let escaped = false,\n        curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(/ \\|/);\n  let i = 0;\n\n  // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n  if (!cells[0].trim()) { cells.shift(); }\n  if (!cells[cells.length - 1].trim()) { cells.pop(); }\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n// /c*$/ is vulnerable to REDOS.\n// invert: Remove suffix of non-c chars instead. Default falsey.\nfunction rtrim(str, c, invert) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.substr(0, l - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  const l = str.length;\n  let level = 0,\n    i = 0;\n  for (; i < l; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkSanitizeDeprecation(opt) {\n  if (opt && opt.sanitize && !opt.silent) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n}\n\n// copied from https://stackoverflow.com/a/5450113/806777\nfunction repeatString(pattern, count) {\n  if (count < 1) {\n    return '';\n  }\n  let result = '';\n  while (count > 1) {\n    if (count & 1) {\n      result += pattern;\n    }\n    count >>= 1;\n    pattern += pattern;\n  }\n  return result + pattern;\n}\n\nfunction outputLink(cap, link, raw, lexer) {\n  const href = link.href;\n  const title = link.title ? escape(link.title) : null;\n  const text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n  if (cap[0].charAt(0) !== '!') {\n    lexer.state.inLink = true;\n    const token = {\n      type: 'link',\n      raw,\n      href,\n      title,\n      text,\n      tokens: lexer.inlineTokens(text, [])\n    };\n    lexer.state.inLink = false;\n    return token;\n  } else {\n    return {\n      type: 'image',\n      raw,\n      href,\n      title,\n      text: escape(text)\n    };\n  }\n}\n\nfunction indentCodeCompensation(raw, text) {\n  const matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n  if (matchIndentToCode === null) {\n    return text;\n  }\n\n  const indentToCode = matchIndentToCode[1];\n\n  return text\n    .split('\\n')\n    .map(node => {\n      const matchIndentInNode = node.match(/^\\s+/);\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      const [indentInNode] = matchIndentInNode;\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    })\n    .join('\\n');\n}\n\n/**\n * Tokenizer\n */\nclass Tokenizer {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  space(src) {\n    const cap = this.rules.block.newline.exec(src);\n    if (cap) {\n      if (cap[0].length > 1) {\n        return {\n          type: 'space',\n          raw: cap[0]\n        };\n      }\n      return { raw: '\\n' };\n    }\n  }\n\n  code(src) {\n    const cap = this.rules.block.code.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ {1,4}/gm, '');\n      return {\n        type: 'code',\n        raw: cap[0],\n        codeBlockStyle: 'indented',\n        text: !this.options.pedantic\n          ? rtrim(text, '\\n')\n          : text\n      };\n    }\n  }\n\n  fences(src) {\n    const cap = this.rules.block.fences.exec(src);\n    if (cap) {\n      const raw = cap[0];\n      const text = indentCodeCompensation(raw, cap[3] || '');\n\n      return {\n        type: 'code',\n        raw,\n        lang: cap[2] ? cap[2].trim() : cap[2],\n        text\n      };\n    }\n  }\n\n  heading(src) {\n    const cap = this.rules.block.heading.exec(src);\n    if (cap) {\n      let text = cap[2].trim();\n\n      // remove trailing #s\n      if (/#$/.test(text)) {\n        const trimmed = rtrim(text, '#');\n        if (this.options.pedantic) {\n          text = trimmed.trim();\n        } else if (!trimmed || / $/.test(trimmed)) {\n          // CommonMark requires space before trailing #s\n          text = trimmed.trim();\n        }\n      }\n\n      const token = {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[1].length,\n        text: text,\n        tokens: []\n      };\n      this.lexer.inline(token.text, token.tokens);\n      return token;\n    }\n  }\n\n  hr(src) {\n    const cap = this.rules.block.hr.exec(src);\n    if (cap) {\n      return {\n        type: 'hr',\n        raw: cap[0]\n      };\n    }\n  }\n\n  blockquote(src) {\n    const cap = this.rules.block.blockquote.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ *> ?/gm, '');\n\n      return {\n        type: 'blockquote',\n        raw: cap[0],\n        tokens: this.lexer.blockTokens(text, []),\n        text\n      };\n    }\n  }\n\n  list(src) {\n    let cap = this.rules.block.list.exec(src);\n    if (cap) {\n      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine,\n        line, lines, itemContents;\n\n      let bull = cap[1].trim();\n      const isordered = bull.length > 1;\n\n      const list = {\n        type: 'list',\n        raw: '',\n        ordered: isordered,\n        start: isordered ? +bull.slice(0, -1) : '',\n        loose: false,\n        items: []\n      };\n\n      bull = isordered ? `\\\\d{1,9}\\\\${bull.slice(-1)}` : `\\\\${bull}`;\n\n      if (this.options.pedantic) {\n        bull = isordered ? bull : '[*+-]';\n      }\n\n      // Get next list item\n      const itemRegex = new RegExp(`^( {0,3}${bull})((?: [^\\\\n]*| *)(?:\\\\n[^\\\\n]*)*(?:\\\\n|$))`);\n\n      // Get each top-level item\n      while (src) {\n        if (this.rules.block.hr.test(src)) { // End list if we encounter an HR (possibly move into itemRegex?)\n          break;\n        }\n\n        if (!(cap = itemRegex.exec(src))) {\n          break;\n        }\n\n        lines = cap[2].split('\\n');\n\n        if (this.options.pedantic) {\n          indent = 2;\n          itemContents = lines[0].trimLeft();\n        } else {\n          indent = cap[2].search(/[^ ]/); // Find first non-space char\n          indent = cap[1].length + (indent > 4 ? 1 : indent); // intented code blocks after 4 spaces; indent is always 1\n          itemContents = lines[0].slice(indent - cap[1].length);\n        }\n\n        blankLine = false;\n        raw = cap[0];\n\n        if (!lines[0] && /^ *$/.test(lines[1])) { // items begin with at most one blank line\n          raw = cap[1] + lines.slice(0, 2).join('\\n') + '\\n';\n          list.loose = true;\n          lines = [];\n        }\n\n        const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\d{1,9}[.)])`);\n\n        for (i = 1; i < lines.length; i++) {\n          line = lines[i];\n\n          if (this.options.pedantic) { // Re-align to follow commonmark nesting rules\n            line = line.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n          }\n\n          // End list item if found start of new bullet\n          if (nextBulletRegex.test(line)) {\n            raw = cap[1] + lines.slice(0, i).join('\\n') + '\\n';\n            break;\n          }\n\n          // Until we encounter a blank line, item contents do not need indentation\n          if (!blankLine) {\n            if (!line.trim()) { // Check if current line is empty\n              blankLine = true;\n            }\n\n            // Dedent if possible\n            if (line.search(/[^ ]/) >= indent) {\n              itemContents += '\\n' + line.slice(indent);\n            } else {\n              itemContents += '\\n' + line;\n            }\n            continue;\n          }\n\n          // Dedent this line\n          if (line.search(/[^ ]/) >= indent || !line.trim()) {\n            itemContents += '\\n' + line.slice(indent);\n            continue;\n          } else { // Line was not properly indented; end of this item\n            raw = cap[1] + lines.slice(0, i).join('\\n') + '\\n';\n            break;\n          }\n        }\n\n        if (!list.loose) {\n          // If the previous item ended with a blank line, the list is loose\n          if (endsWithBlankLine) {\n            list.loose = true;\n          } else if (/\\n *\\n *$/.test(raw)) {\n            endsWithBlankLine = true;\n          }\n        }\n\n        // Check for task list items\n        if (this.options.gfm) {\n          istask = /^\\[[ xX]\\] /.exec(itemContents);\n          if (istask) {\n            ischecked = istask[0] !== '[ ] ';\n            itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n          }\n        }\n\n        list.items.push({\n          type: 'list_item',\n          raw: raw,\n          task: !!istask,\n          checked: ischecked,\n          loose: false,\n          text: itemContents\n        });\n\n        list.raw += raw;\n        src = src.slice(raw.length);\n      }\n\n      // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n      list.items[list.items.length - 1].raw = raw.trimRight();\n      list.items[list.items.length - 1].text = itemContents.trimRight();\n      list.raw = list.raw.trimRight();\n\n      const l = list.items.length;\n\n      // Item child tokens handled here at end because we needed to have the final item to trim it first\n      for (i = 0; i < l; i++) {\n        this.lexer.state.top = false;\n        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n        if (list.items[i].tokens.some(t => t.type === 'space')) {\n          list.loose = true;\n          list.items[i].loose = true;\n        }\n      }\n\n      return list;\n    }\n  }\n\n  html(src) {\n    const cap = this.rules.block.html.exec(src);\n    if (cap) {\n      const token = {\n        type: 'html',\n        raw: cap[0],\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: cap[0]\n      };\n      if (this.options.sanitize) {\n        token.type = 'paragraph';\n        token.text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\n        token.tokens = [];\n        this.lexer.inline(token.text, token.tokens);\n      }\n      return token;\n    }\n  }\n\n  def(src) {\n    const cap = this.rules.block.def.exec(src);\n    if (cap) {\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n      const tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n      return {\n        type: 'def',\n        tag,\n        raw: cap[0],\n        href: cap[2],\n        title: cap[3]\n      };\n    }\n  }\n\n  table(src) {\n    const cap = this.rules.block.table.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells(cap[1]).map(c => { return { text: c }; }),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        rows: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        item.raw = cap[0];\n\n        let l = item.align.length;\n        let i, j, k, row;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.rows.length;\n        for (i = 0; i < l; i++) {\n          item.rows[i] = splitCells(item.rows[i], item.header.length).map(c => { return { text: c }; });\n        }\n\n        // parse child tokens inside headers and cells\n\n        // header child tokens\n        l = item.header.length;\n        for (j = 0; j < l; j++) {\n          item.header[j].tokens = [];\n          this.lexer.inlineTokens(item.header[j].text, item.header[j].tokens);\n        }\n\n        // cell child tokens\n        l = item.rows.length;\n        for (j = 0; j < l; j++) {\n          row = item.rows[j];\n          for (k = 0; k < row.length; k++) {\n            row[k].tokens = [];\n            this.lexer.inlineTokens(row[k].text, row[k].tokens);\n          }\n        }\n\n        return item;\n      }\n    }\n  }\n\n  lheading(src) {\n    const cap = this.rules.block.lheading.exec(src);\n    if (cap) {\n      const token = {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1],\n        tokens: []\n      };\n      this.lexer.inline(token.text, token.tokens);\n      return token;\n    }\n  }\n\n  paragraph(src) {\n    const cap = this.rules.block.paragraph.exec(src);\n    if (cap) {\n      const token = {\n        type: 'paragraph',\n        raw: cap[0],\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1],\n        tokens: []\n      };\n      this.lexer.inline(token.text, token.tokens);\n      return token;\n    }\n  }\n\n  text(src) {\n    const cap = this.rules.block.text.exec(src);\n    if (cap) {\n      const token = {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0],\n        tokens: []\n      };\n      this.lexer.inline(token.text, token.tokens);\n      return token;\n    }\n  }\n\n  escape(src) {\n    const cap = this.rules.inline.escape.exec(src);\n    if (cap) {\n      return {\n        type: 'escape',\n        raw: cap[0],\n        text: escape(cap[1])\n      };\n    }\n  }\n\n  tag(src) {\n    const cap = this.rules.inline.tag.exec(src);\n    if (cap) {\n      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\n        this.lexer.state.inLink = true;\n      } else if (this.lexer.state.inLink && /^<\\/a>/i.test(cap[0])) {\n        this.lexer.state.inLink = false;\n      }\n      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = true;\n      } else if (this.lexer.state.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = false;\n      }\n\n      return {\n        type: this.options.sanitize\n          ? 'text'\n          : 'html',\n        raw: cap[0],\n        inLink: this.lexer.state.inLink,\n        inRawBlock: this.lexer.state.inRawBlock,\n        text: this.options.sanitize\n          ? (this.options.sanitizer\n            ? this.options.sanitizer(cap[0])\n            : escape(cap[0]))\n          : cap[0]\n      };\n    }\n  }\n\n  link(src) {\n    const cap = this.rules.inline.link.exec(src);\n    if (cap) {\n      const trimmedUrl = cap[2].trim();\n      if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n        // commonmark requires matching angle brackets\n        if (!(/>$/.test(trimmedUrl))) {\n          return;\n        }\n\n        // ending angle bracket cannot be escaped\n        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n          return;\n        }\n      } else {\n        // find closing parenthesis\n        const lastParenIndex = findClosingBracket(cap[2], '()');\n        if (lastParenIndex > -1) {\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          const linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n      }\n      let href = cap[2];\n      let title = '';\n      if (this.options.pedantic) {\n        // split pedantic href and title\n        const link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n\n      href = href.trim();\n      if (/^</.test(href)) {\n        if (this.options.pedantic && !(/>$/.test(trimmedUrl))) {\n          // pedantic allows starting angle bracket without ending angle bracket\n          href = href.slice(1);\n        } else {\n          href = href.slice(1, -1);\n        }\n      }\n      return outputLink(cap, {\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n      }, cap[0], this.lexer);\n    }\n  }\n\n  reflink(src, links) {\n    let cap;\n    if ((cap = this.rules.inline.reflink.exec(src))\n        || (cap = this.rules.inline.nolink.exec(src))) {\n      let link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = links[link.toLowerCase()];\n      if (!link || !link.href) {\n        const text = cap[0].charAt(0);\n        return {\n          type: 'text',\n          raw: text,\n          text\n        };\n      }\n      return outputLink(cap, link, cap[0], this.lexer);\n    }\n  }\n\n  emStrong(src, maskedSrc, prevChar = '') {\n    let match = this.rules.inline.emStrong.lDelim.exec(src);\n    if (!match) return;\n\n    // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n    if (match[3] && prevChar.match(/[\\p{L}\\p{N}]/u)) return;\n\n    const nextChar = match[1] || match[2] || '';\n",
          "filepath": "data/repos/markedjs/marked-4.0/lib/marked.esm.js",
          "repo": "markedjs/marked",
          "version": "4.0",
          "chunk_index": 0
        }
      },
      {
        "id": "23971d8c-9a3e-4a06-a241-65fd0102fd2e",
        "score": 0.015873015873015872,
        "payload": {
          "text": "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2021, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.marked = {}));\n})(this, (function (exports) { 'use strict';\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) {\n    var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n    if (it) return (it = it.call(o)).next.bind(it);\n\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function getDefaults() {\n    return {\n      baseUrl: null,\n      breaks: false,\n      extensions: null,\n      gfm: true,\n      headerIds: true,\n      headerPrefix: '',\n      highlight: null,\n      langPrefix: 'language-',\n      mangle: true,\n      pedantic: false,\n      renderer: null,\n      sanitize: false,\n      sanitizer: null,\n      silent: false,\n      smartLists: false,\n      smartypants: false,\n      tokenizer: null,\n      walkTokens: null,\n      xhtml: false\n    };\n  }\n  exports.defaults = getDefaults();\n  function changeDefaults(newDefaults) {\n    exports.defaults = newDefaults;\n  }\n\n  /**\n   * Helpers\n   */\n  var escapeTest = /[&<>\"']/;\n  var escapeReplace = /[&<>\"']/g;\n  var escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\n  var escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n  var escapeReplacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\n    return escapeReplacements[ch];\n  };\n\n  function escape(html, encode) {\n    if (encode) {\n      if (escapeTest.test(html)) {\n        return html.replace(escapeReplace, getEscapeReplacement);\n      }\n    } else {\n      if (escapeTestNoEncode.test(html)) {\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n      }\n    }\n\n    return html;\n  }\n  var unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n  function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(unescapeTest, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n\n      return '';\n    });\n  }\n  var caret = /(^|[^\\[])\\^/g;\n  function edit(regex, opt) {\n    regex = regex.source || regex;\n    opt = opt || '';\n    var obj = {\n      replace: function replace(name, val) {\n        val = val.source || val;\n        val = val.replace(caret, '$1');\n        regex = regex.replace(name, val);\n        return obj;\n      },\n      getRegex: function getRegex() {\n        return new RegExp(regex, opt);\n      }\n    };\n    return obj;\n  }\n  var nonWordAndColonTest = /[^\\w:]/g;\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n  function cleanUrl(sanitize, base, href) {\n    if (sanitize) {\n      var prot;\n\n      try {\n        prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, '').toLowerCase();\n      } catch (e) {\n        return null;\n      }\n\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return null;\n      }\n    }\n\n    if (base && !originIndependentUrl.test(href)) {\n      href = resolveUrl(base, href);\n    }\n\n    try {\n      href = encodeURI(href).replace(/%25/g, '%');\n    } catch (e) {\n      return null;\n    }\n\n    return href;\n  }\n  var baseUrls = {};\n  var justDomain = /^[^:]+:\\/*[^/]*$/;\n  var protocol = /^([^:]+:)[\\s\\S]*$/;\n  var domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n  function resolveUrl(base, href) {\n    if (!baseUrls[' ' + base]) {\n      // we can ignore everything in base after the last slash of its path component,\n      // but we might need to add _that_\n      // https://tools.ietf.org/html/rfc3986#section-3\n      if (justDomain.test(base)) {\n        baseUrls[' ' + base] = base + '/';\n      } else {\n        baseUrls[' ' + base] = rtrim(base, '/', true);\n      }\n    }\n\n    base = baseUrls[' ' + base];\n    var relativeBase = base.indexOf(':') === -1;\n\n    if (href.substring(0, 2) === '//') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(protocol, '$1') + href;\n    } else if (href.charAt(0) === '/') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(domain, '$1') + href;\n    } else {\n      return base + href;\n    }\n  }\n  var noopTest = {\n    exec: function noopTest() {}\n  };\n  function merge(obj) {\n    var i = 1,\n        target,\n        key;\n\n    for (; i < arguments.length; i++) {\n      target = arguments[i];\n\n      for (key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n          obj[key] = target[key];\n        }\n      }\n    }\n\n    return obj;\n  }\n  function splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n      var escaped = false,\n          curr = offset;\n\n      while (--curr >= 0 && str[curr] === '\\\\') {\n        escaped = !escaped;\n      }\n\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n        cells = row.split(/ \\|/);\n    var i = 0; // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n\n    if (!cells[0].trim()) {\n      cells.shift();\n    }\n\n    if (!cells[cells.length - 1].trim()) {\n      cells.pop();\n    }\n\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) {\n        cells.push('');\n      }\n    }\n\n    for (; i < cells.length; i++) {\n      // leading or trailing whitespace is ignored per the gfm spec\n      cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n\n    return cells;\n  } // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n  // /c*$/ is vulnerable to REDOS.\n  // invert: Remove suffix of non-c chars instead. Default falsey.\n\n  function rtrim(str, c, invert) {\n    var l = str.length;\n\n    if (l === 0) {\n      return '';\n    } // Length of suffix matching the invert condition.\n\n\n    var suffLen = 0; // Step left until we fail to match the invert condition.\n\n    while (suffLen < l) {\n      var currChar = str.charAt(l - suffLen - 1);\n\n      if (currChar === c && !invert) {\n        suffLen++;\n      } else if (currChar !== c && invert) {\n        suffLen++;\n      } else {\n        break;\n      }\n    }\n\n    return str.substr(0, l - suffLen);\n  }\n  function findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n      return -1;\n    }\n\n    var l = str.length;\n    var level = 0,\n        i = 0;\n\n    for (; i < l; i++) {\n      if (str[i] === '\\\\') {\n        i++;\n      } else if (str[i] === b[0]) {\n        level++;\n      } else if (str[i] === b[1]) {\n        level--;\n\n        if (level < 0) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n  function checkSanitizeDeprecation(opt) {\n    if (opt && opt.sanitize && !opt.silent) {\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n    }\n  } // copied from https://stackoverflow.com/a/5450113/806777\n\n  function repeatString(pattern, count) {\n    if (count < 1) {\n      return '';\n    }\n\n    var result = '';\n\n    while (count > 1) {\n      if (count & 1) {\n        result += pattern;\n      }\n\n      count >>= 1;\n      pattern += pattern;\n    }\n\n    return result + pattern;\n  }\n\n  function outputLink(cap, link, raw, lexer) {\n    var href = link.href;\n    var title = link.title ? escape(link.title) : null;\n    var text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n    if (cap[0].charAt(0) !== '!') {\n      lexer.state.inLink = true;\n      var token = {\n        type: 'link',\n        raw: raw,\n        href: href,\n        title: title,\n        text: text,\n        tokens: lexer.inlineTokens(text, [])\n      };\n      lexer.state.inLink = false;\n      return token;\n    } else {\n      return {\n        type: 'image',\n        raw: raw,\n        href: href,\n        title: title,\n        text: escape(text)\n      };\n    }\n  }\n\n  function indentCodeCompensation(raw, text) {\n    var matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n    if (matchIndentToCode === null) {\n      return text;\n    }\n\n    var indentToCode = matchIndentToCode[1];\n    return text.split('\\n').map(function (node) {\n      var matchIndentInNode = node.match(/^\\s+/);\n\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      var indentInNode = matchIndentInNode[0];\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    }).join('\\n');\n  }\n  /**\n   * Tokenizer\n   */\n\n\n  var Tokenizer = /*#__PURE__*/function () {\n    function Tokenizer(options) {\n      this.options = options || exports.defaults;\n    }\n\n    var _proto = Tokenizer.prototype;\n\n    _proto.space = function space(src) {\n      var cap = this.rules.block.newline.exec(src);\n\n      if (cap) {\n        if (cap[0].length > 1) {\n          return {\n            type: 'space',\n            raw: cap[0]\n          };\n        }\n\n        return {\n          raw: '\\n'\n        };\n      }\n    };\n\n    _proto.code = function code(src) {\n      var cap = this.rules.block.code.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ {1,4}/gm, '');\n        return {\n          type: 'code',\n          raw: cap[0],\n          codeBlockStyle: 'indented',\n          text: !this.options.pedantic ? rtrim(text, '\\n') : text\n        };\n      }\n    };\n\n    _proto.fences = function fences(src) {\n      var cap = this.rules.block.fences.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var text = indentCodeCompensation(raw, cap[3] || '');\n        return {\n          type: 'code',\n          raw: raw,\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: text\n        };\n      }\n    };\n\n    _proto.heading = function heading(src) {\n      var cap = this.rules.block.heading.exec(src);\n\n      if (cap) {\n        var text = cap[2].trim(); // remove trailing #s\n\n        if (/#$/.test(text)) {\n          var trimmed = rtrim(text, '#');\n\n          if (this.options.pedantic) {\n            text = trimmed.trim();\n          } else if (!trimmed || / $/.test(trimmed)) {\n            // CommonMark requires space before trailing #s\n            text = trimmed.trim();\n          }\n        }\n\n        var token = {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[1].length,\n          text: text,\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.hr = function hr(src) {\n      var cap = this.rules.block.hr.exec(src);\n\n      if (cap) {\n        return {\n          type: 'hr',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.blockquote = function blockquote(src) {\n      var cap = this.rules.block.blockquote.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ *> ?/gm, '');\n        return {\n          type: 'blockquote',\n          raw: cap[0],\n          tokens: this.lexer.blockTokens(text, []),\n          text: text\n        };\n      }\n    };\n\n    _proto.list = function list(src) {\n      var cap = this.rules.block.list.exec(src);\n\n      if (cap) {\n        var raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine, line, lines, itemContents;\n        var bull = cap[1].trim();\n        var isordered = bull.length > 1;\n        var list = {\n          type: 'list',\n          raw: '',\n          ordered: isordered,\n          start: isordered ? +bull.slice(0, -1) : '',\n          loose: false,\n          items: []\n        };\n        bull = isordered ? \"\\\\d{1,9}\\\\\" + bull.slice(-1) : \"\\\\\" + bull;\n\n        if (this.options.pedantic) {\n          bull = isordered ? bull : '[*+-]';\n        } // Get next list item\n\n\n        var itemRegex = new RegExp(\"^( {0,3}\" + bull + \")((?: [^\\\\n]*| *)(?:\\\\n[^\\\\n]*)*(?:\\\\n|$))\"); // Get each top-level item\n\n        while (src) {\n          if (this.rules.block.hr.test(src)) {\n            // End list if we encounter an HR (possibly move into itemRegex?)\n            break;\n          }\n\n          if (!(cap = itemRegex.exec(src))) {\n            break;\n          }\n\n          lines = cap[2].split('\\n');\n\n          if (this.options.pedantic) {\n            indent = 2;\n            itemContents = lines[0].trimLeft();\n          } else {\n            indent = cap[2].search(/[^ ]/); // Find first non-space char\n\n            indent = cap[1].length + (indent > 4 ? 1 : indent); // intented code blocks after 4 spaces; indent is always 1\n\n            itemContents = lines[0].slice(indent - cap[1].length);\n          }\n\n          blankLine = false;\n          raw = cap[0];\n\n          if (!lines[0] && /^ *$/.test(lines[1])) {\n            // items begin with at most one blank line\n            raw = cap[1] + lines.slice(0, 2).join('\\n') + '\\n';\n            list.loose = true;\n            lines = [];\n          }\n\n          var nextBulletRegex = new RegExp(\"^ {0,\" + Math.min(3, indent - 1) + \"}(?:[*+-]|\\\\d{1,9}[.)])\");\n\n          for (i = 1; i < lines.length; i++) {\n            line = lines[i];\n\n            if (this.options.pedantic) {\n              // Re-align to follow commonmark nesting rules\n              line = line.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n            } // End list item if found start of new bullet\n\n\n            if (nextBulletRegex.test(line)) {\n              raw = cap[1] + lines.slice(0, i).join('\\n') + '\\n';\n              break;\n            } // Until we encounter a blank line, item contents do not need indentation\n\n\n            if (!blankLine) {\n              if (!line.trim()) {\n                // Check if current line is empty\n                blankLine = true;\n              } // Dedent if possible\n\n\n              if (line.search(/[^ ]/) >= indent) {\n                itemContents += '\\n' + line.slice(indent);\n              } else {\n                itemContents += '\\n' + line;\n              }\n\n              continue;\n            } // Dedent this line\n\n\n            if (line.search(/[^ ]/) >= indent || !line.trim()) {\n              itemContents += '\\n' + line.slice(indent);\n              continue;\n            } else {\n              // Line was not properly indented; end of this item\n              raw = cap[1] + lines.slice(0, i).join('\\n') + '\\n';\n              break;\n            }\n          }\n\n          if (!list.loose) {\n            // If the previous item ended with a blank line, the list is loose\n            if (endsWithBlankLine) {\n              list.loose = true;\n            } else if (/\\n *\\n *$/.test(raw)) {\n              endsWithBlankLine = true;\n            }\n          } // Check for task list items\n\n\n          if (this.options.gfm) {\n            istask = /^\\[[ xX]\\] /.exec(itemContents);\n\n            if (istask) {\n              ischecked = istask[0] !== '[ ] ';\n              itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n            }\n          }\n\n          list.items.push({\n            type: 'list_item',\n            raw: raw,\n            task: !!istask,\n            checked: ischecked,\n            loose: false,\n            text: itemContents\n          });\n          list.raw += raw;\n          src = src.slice(raw.length);\n        } // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n\n\n        list.items[list.items.length - 1].raw = raw.trimRight();\n        list.items[list.items.length - 1].text = itemContents.trimRight();\n        list.raw = list.raw.trimRight();\n        var l = list.items.length; // Item child tokens handled here at end because we needed to have the final item to trim it first\n\n        for (i = 0; i < l; i++) {\n          this.lexer.state.top = false;\n          list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n\n          if (list.items[i].tokens.some(function (t) {\n            return t.type === 'space';\n          })) {\n            list.loose = true;\n            list.items[i].loose = true;\n          }\n        }\n\n        return list;\n      }\n    };\n\n    _proto.html = function html(src) {\n      var cap = this.rules.block.html.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'html',\n          raw: cap[0],\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: cap[0]\n        };\n\n        if (this.options.sanitize) {\n          token.type = 'paragraph';\n          token.text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\n          token.tokens = [];\n          this.lexer.inline(token.text, token.tokens);\n        }\n\n        return token;\n      }\n    };\n\n    _proto.def = function def(src) {\n      var cap = this.rules.block.def.exec(src);\n\n      if (cap) {\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        var tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n        return {\n          type: 'def',\n          tag: tag,\n          raw: cap[0],\n          href: cap[2],\n          title: cap[3]\n        };\n      }\n    };\n\n    _proto.table = function table(src) {\n      var cap = this.rules.block.table.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells(cap[1]).map(function (c) {\n            return {\n              text: c\n            };\n          }),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          rows: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          item.raw = cap[0];\n          var l = item.align.length;\n          var i, j, k, row;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.rows.length;\n\n          for (i = 0; i < l; i++) {\n            item.rows[i] = splitCells(item.rows[i], item.header.length).map(function (c) {\n              return {\n                text: c\n              };\n            });\n          } // parse child tokens inside headers and cells\n          // header child tokens\n\n\n          l = item.header.length;\n\n          for (j = 0; j < l; j++) {\n            item.header[j].tokens = [];\n            this.lexer.inlineTokens(item.header[j].text, item.header[j].tokens);\n          } // cell child tokens\n\n\n          l = item.rows.length;\n\n          for (j = 0; j < l; j++) {\n            row = item.rows[j];\n\n            for (k = 0; k < row.length; k++) {\n              row[k].tokens = [];\n              this.lexer.inlineTokens(row[k].text, row[k].tokens);\n            }\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.lheading = function lheading(src) {\n      var cap = this.rules.block.lheading.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1],\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.paragraph = function paragraph(src) {\n      var cap = this.rules.block.paragraph.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'paragraph',\n          raw: cap[0],\n          text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1],\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.text = function text(src) {\n      var cap = this.rules.block.text.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'text',\n          raw: cap[0],\n          text: cap[0],\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.escape = function escape$1(src) {\n      var cap = this.rules.inline.escape.exec(src);\n\n      if (cap) {\n        return {\n          type: 'escape',\n          raw: cap[0],\n          text: escape(cap[1])\n        };\n      }\n    };\n\n    _proto.tag = function tag(src) {\n      var cap = this.rules.inline.tag.exec(src);\n\n      if (cap) {\n        if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\n          this.lexer.state.inLink = true;\n        } else if (this.lexer.state.inLink && /^<\\/a>/i.test(cap[0])) {\n          this.lexer.state.inLink = false;\n        }\n\n        if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.lexer.state.inRawBlock = true;\n        } else if (this.lexer.state.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.lexer.state.inRawBlock = false;\n        }\n\n        return {\n          type: this.options.sanitize ? 'text' : 'html',\n          raw: cap[0],",
          "filepath": "data/repos/markedjs/marked-4.0/lib/marked.js",
          "repo": "markedjs/marked",
          "version": "4.0",
          "chunk_index": 0
        }
      },
      {
        "id": "876991b4-0664-456e-accb-051341a02f15",
        "score": 0.015625,
        "payload": {
          "text": "import { defaults } from './defaults.js';\nimport {\n  rtrim,\n  splitCells,\n  escape,\n  findClosingBracket\n} from './helpers.js';\n\nfunction outputLink(cap, link, raw, lexer) {\n  const href = link.href;\n  const title = link.title ? escape(link.title) : null;\n  const text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n  if (cap[0].charAt(0) !== '!') {\n    lexer.state.inLink = true;\n    const token = {\n      type: 'link',\n      raw,\n      href,\n      title,\n      text,\n      tokens: lexer.inlineTokens(text, [])\n    };\n    lexer.state.inLink = false;\n    return token;\n  } else {\n    return {\n      type: 'image',\n      raw,\n      href,\n      title,\n      text: escape(text)\n    };\n  }\n}\n\nfunction indentCodeCompensation(raw, text) {\n  const matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n  if (matchIndentToCode === null) {\n    return text;\n  }\n\n  const indentToCode = matchIndentToCode[1];\n\n  return text\n    .split('\\n')\n    .map(node => {\n      const matchIndentInNode = node.match(/^\\s+/);\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      const [indentInNode] = matchIndentInNode;\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    })\n    .join('\\n');\n}\n\n/**\n * Tokenizer\n */\nexport class Tokenizer {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  space(src) {\n    const cap = this.rules.block.newline.exec(src);\n    if (cap) {\n      if (cap[0].length > 1) {\n        return {\n          type: 'space',\n          raw: cap[0]\n        };\n      }\n      return { raw: '\\n' };\n    }\n  }\n\n  code(src) {\n    const cap = this.rules.block.code.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ {1,4}/gm, '');\n      return {\n        type: 'code',\n        raw: cap[0],\n        codeBlockStyle: 'indented',\n        text: !this.options.pedantic\n          ? rtrim(text, '\\n')\n          : text\n      };\n    }\n  }\n\n  fences(src) {\n    const cap = this.rules.block.fences.exec(src);\n    if (cap) {\n      const raw = cap[0];\n      const text = indentCodeCompensation(raw, cap[3] || '');\n\n      return {\n        type: 'code',\n        raw,\n        lang: cap[2] ? cap[2].trim() : cap[2],\n        text\n      };\n    }\n  }\n\n  heading(src) {\n    const cap = this.rules.block.heading.exec(src);\n    if (cap) {\n      let text = cap[2].trim();\n\n      // remove trailing #s\n      if (/#$/.test(text)) {\n        const trimmed = rtrim(text, '#');\n        if (this.options.pedantic) {\n          text = trimmed.trim();\n        } else if (!trimmed || / $/.test(trimmed)) {\n          // CommonMark requires space before trailing #s\n          text = trimmed.trim();\n        }\n      }\n\n      const token = {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[1].length,\n        text: text,\n        tokens: []\n      };\n      this.lexer.inline(token.text, token.tokens);\n      return token;\n    }\n  }\n\n  hr(src) {\n    const cap = this.rules.block.hr.exec(src);\n    if (cap) {\n      return {\n        type: 'hr',\n        raw: cap[0]\n      };\n    }\n  }\n\n  blockquote(src) {\n    const cap = this.rules.block.blockquote.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ *> ?/gm, '');\n\n      return {\n        type: 'blockquote',\n        raw: cap[0],\n        tokens: this.lexer.blockTokens(text, []),\n        text\n      };\n    }\n  }\n\n  list(src) {\n    let cap = this.rules.block.list.exec(src);\n    if (cap) {\n      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine,\n        line, lines, itemContents;\n\n      let bull = cap[1].trim();\n      const isordered = bull.length > 1;\n\n      const list = {\n        type: 'list',\n        raw: '',\n        ordered: isordered,\n        start: isordered ? +bull.slice(0, -1) : '',\n        loose: false,\n        items: []\n      };\n\n      bull = isordered ? `\\\\d{1,9}\\\\${bull.slice(-1)}` : `\\\\${bull}`;\n\n      if (this.options.pedantic) {\n        bull = isordered ? bull : '[*+-]';\n      }\n\n      // Get next list item\n      const itemRegex = new RegExp(`^( {0,3}${bull})((?: [^\\\\n]*| *)(?:\\\\n[^\\\\n]*)*(?:\\\\n|$))`);\n\n      // Get each top-level item\n      while (src) {\n        if (this.rules.block.hr.test(src)) { // End list if we encounter an HR (possibly move into itemRegex?)\n          break;\n        }\n\n        if (!(cap = itemRegex.exec(src))) {\n          break;\n        }\n\n        lines = cap[2].split('\\n');\n\n        if (this.options.pedantic) {\n          indent = 2;\n          itemContents = lines[0].trimLeft();\n        } else {\n          indent = cap[2].search(/[^ ]/); // Find first non-space char\n          indent = cap[1].length + (indent > 4 ? 1 : indent); // intented code blocks after 4 spaces; indent is always 1\n          itemContents = lines[0].slice(indent - cap[1].length);\n        }\n\n        blankLine = false;\n        raw = cap[0];\n\n        if (!lines[0] && /^ *$/.test(lines[1])) { // items begin with at most one blank line\n          raw = cap[1] + lines.slice(0, 2).join('\\n') + '\\n';\n          list.loose = true;\n          lines = [];\n        }\n\n        const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\d{1,9}[.)])`);\n\n        for (i = 1; i < lines.length; i++) {\n          line = lines[i];\n\n          if (this.options.pedantic) { // Re-align to follow commonmark nesting rules\n            line = line.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n          }\n\n          // End list item if found start of new bullet\n          if (nextBulletRegex.test(line)) {\n            raw = cap[1] + lines.slice(0, i).join('\\n') + '\\n';\n            break;\n          }\n\n          // Until we encounter a blank line, item contents do not need indentation\n          if (!blankLine) {\n            if (!line.trim()) { // Check if current line is empty\n              blankLine = true;\n            }\n\n            // Dedent if possible\n            if (line.search(/[^ ]/) >= indent) {\n              itemContents += '\\n' + line.slice(indent);\n            } else {\n              itemContents += '\\n' + line;\n            }\n            continue;\n          }\n\n          // Dedent this line\n          if (line.search(/[^ ]/) >= indent || !line.trim()) {\n            itemContents += '\\n' + line.slice(indent);\n            continue;\n          } else { // Line was not properly indented; end of this item\n            raw = cap[1] + lines.slice(0, i).join('\\n') + '\\n';\n            break;\n          }\n        }\n\n        if (!list.loose) {\n          // If the previous item ended with a blank line, the list is loose\n          if (endsWithBlankLine) {\n            list.loose = true;\n          } else if (/\\n *\\n *$/.test(raw)) {\n            endsWithBlankLine = true;\n          }\n        }\n\n        // Check for task list items\n        if (this.options.gfm) {\n          istask = /^\\[[ xX]\\] /.exec(itemContents);\n          if (istask) {\n            ischecked = istask[0] !== '[ ] ';\n            itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n          }\n        }\n\n        list.items.push({\n          type: 'list_item',\n          raw: raw,\n          task: !!istask,\n          checked: ischecked,\n          loose: false,\n          text: itemContents\n        });\n\n        list.raw += raw;\n        src = src.slice(raw.length);\n      }\n\n      // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n      list.items[list.items.length - 1].raw = raw.trimRight();\n      list.items[list.items.length - 1].text = itemContents.trimRight();\n      list.raw = list.raw.trimRight();\n\n      const l = list.items.length;\n\n      // Item child tokens handled here at end because we needed to have the final item to trim it first\n      for (i = 0; i < l; i++) {\n        this.lexer.state.top = false;\n        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n        if (list.items[i].tokens.some(t => t.type === 'space')) {\n          list.loose = true;\n          list.items[i].loose = true;\n        }\n      }\n\n      return list;\n    }\n  }\n\n  html(src) {\n    const cap = this.rules.block.html.exec(src);\n    if (cap) {\n      const token = {\n        type: 'html',\n        raw: cap[0],\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: cap[0]\n      };\n      if (this.options.sanitize) {\n        token.type = 'paragraph';\n        token.text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\n        token.tokens = [];\n        this.lexer.inline(token.text, token.tokens);\n      }\n      return token;\n    }\n  }\n\n  def(src) {\n    const cap = this.rules.block.def.exec(src);\n    if (cap) {\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n      const tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n      return {\n        type: 'def',\n        tag,\n        raw: cap[0],\n        href: cap[2],\n        title: cap[3]\n      };\n    }\n  }\n\n  table(src) {\n    const cap = this.rules.block.table.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells(cap[1]).map(c => { return { text: c }; }),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        rows: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        item.raw = cap[0];\n\n        let l = item.align.length;\n        let i, j, k, row;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.rows.length;\n        for (i = 0; i < l; i++) {\n          item.rows[i] = splitCells(item.rows[i], item.header.length).map(c => { return { text: c }; });\n        }\n\n        // parse child tokens inside headers and cells\n\n        // header child tokens\n        l = item.header.length;\n        for (j = 0; j < l; j++) {\n          item.header[j].tokens = [];\n          this.lexer.inlineTokens(item.header[j].text, item.header[j].tokens);\n        }\n\n        // cell child tokens\n        l = item.rows.length;\n        for (j = 0; j < l; j++) {\n          row = item.rows[j];\n          for (k = 0; k < row.length; k++) {\n            row[k].tokens = [];\n            this.lexer.inlineTokens(row[k].text, row[k].tokens);\n          }\n        }\n\n        return item;\n      }\n    }\n  }\n\n  lheading(src) {\n    const cap = this.rules.block.lheading.exec(src);\n    if (cap) {\n      const token = {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1],\n        tokens: []\n      };\n      this.lexer.inline(token.text, token.tokens);\n      return token;\n    }\n  }\n\n  paragraph(src) {\n    const cap = this.rules.block.paragraph.exec(src);\n    if (cap) {\n      const token = {\n        type: 'paragraph',\n        raw: cap[0],\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1],\n        tokens: []\n      };\n      this.lexer.inline(token.text, token.tokens);\n      return token;\n    }\n  }\n\n  text(src) {\n    const cap = this.rules.block.text.exec(src);\n    if (cap) {\n      const token = {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0],\n        tokens: []\n      };\n      this.lexer.inline(token.text, token.tokens);\n      return token;\n    }\n  }\n\n  escape(src) {\n    const cap = this.rules.inline.escape.exec(src);\n    if (cap) {\n      return {\n        type: 'escape',\n        raw: cap[0],\n        text: escape(cap[1])\n      };\n    }\n  }\n\n  tag(src) {\n    const cap = this.rules.inline.tag.exec(src);\n    if (cap) {\n      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\n        this.lexer.state.inLink = true;\n      } else if (this.lexer.state.inLink && /^<\\/a>/i.test(cap[0])) {\n        this.lexer.state.inLink = false;\n      }\n      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = true;\n      } else if (this.lexer.state.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = false;\n      }\n\n      return {\n        type: this.options.sanitize\n          ? 'text'\n          : 'html',\n        raw: cap[0],\n        inLink: this.lexer.state.inLink,\n        inRawBlock: this.lexer.state.inRawBlock,\n        text: this.options.sanitize\n          ? (this.options.sanitizer\n            ? this.options.sanitizer(cap[0])\n            : escape(cap[0]))\n          : cap[0]\n      };\n    }\n  }\n\n  link(src) {\n    const cap = this.rules.inline.link.exec(src);\n    if (cap) {\n      const trimmedUrl = cap[2].trim();\n      if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n        // commonmark requires matching angle brackets\n        if (!(/>$/.test(trimmedUrl))) {\n          return;\n        }\n\n        // ending angle bracket cannot be escaped\n        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n          return;\n        }\n      } else {\n        // find closing parenthesis\n        const lastParenIndex = findClosingBracket(cap[2], '()');\n        if (lastParenIndex > -1) {\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          const linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n      }\n      let href = cap[2];\n      let title = '';\n      if (this.options.pedantic) {\n        // split pedantic href and title\n        const link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n\n      href = href.trim();\n      if (/^</.test(href)) {\n        if (this.options.pedantic && !(/>$/.test(trimmedUrl))) {\n          // pedantic allows starting angle bracket without ending angle bracket\n          href = href.slice(1);\n        } else {\n          href = href.slice(1, -1);\n        }\n      }\n      return outputLink(cap, {\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n      }, cap[0], this.lexer);\n    }\n  }\n\n  reflink(src, links) {\n    let cap;\n    if ((cap = this.rules.inline.reflink.exec(src))\n        || (cap = this.rules.inline.nolink.exec(src))) {\n      let link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = links[link.toLowerCase()];\n      if (!link || !link.href) {\n        const text = cap[0].charAt(0);\n        return {\n          type: 'text',\n          raw: text,\n          text\n        };\n      }\n      return outputLink(cap, link, cap[0], this.lexer);\n    }\n  }\n\n  emStrong(src, maskedSrc, prevChar = '') {\n    let match = this.rules.inline.emStrong.lDelim.exec(src);\n    if (!match) return;\n\n    // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n    if (match[3] && prevChar.match(/[\\p{L}\\p{N}]/u)) return;\n\n    const nextChar = match[1] || match[2] || '';\n\n    if (!nextChar || (nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar)))) {\n      const lLength = match[0].length - 1;\n      let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;\n\n      const endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\n      endReg.lastIndex = 0;\n\n      // Clip maskedSrc to same section of string as src (move to lexer?)\n      maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n\n      while ((match = endReg.exec(maskedSrc)) != null) {\n        rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n\n        if (!rDelim) continue; // skip single * in __abc*abc__\n\n        rLength = rDelim.length;\n\n        if (match[3] || match[4]) { // found another Left Delim\n          delimTotal += rLength;\n          continue;\n        } else if (match[5] || match[6]) { // either Left or Right Delim\n          if (lLength % 3 && !((lLength + rLength) % 3)) {\n            midDelimTotal += rLength;\n            continue; // CommonMark Emphasis Rules 9-10\n          }\n        }\n\n        delimTotal -= rLength;\n\n        if (delimTotal > 0) continue; // Haven't found enough closing delimiters\n\n        // Remove extra characters. *a*** -> *a*\n        rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);\n\n        // Create `em` if smallest delimiter has odd char count. *a***\n        if (Math.min(lLength, rLength) % 2) {\n          const text = src.slice(1, lLength + match.index + rLength);\n          return {\n            type: 'em',\n            raw: src.slice(0, lLength + match.index + rLength + 1),\n            text,\n            tokens: this.lexer.inlineTokens(text, [])\n          };\n        }\n\n        // Create 'strong' if smallest delimiter has even char count. **a***\n        const text = src.slice(2, lLength + match.index + rLength - 1);\n        return {\n          type: 'strong',\n          raw: src.slice(0, lLength + match.index + rLength + 1),\n          text,\n          tokens: this.lexer.inlineTokens(text, [])\n        };\n      }\n    }\n  }\n\n  codespan(src) {\n    const cap = this.rules.inline.code.exec(src);\n    if (cap) {\n      let text = cap[2].replace(/\\n/g, ' ');\n      const hasNonSpaceChars = /[^ ]/.test(text);\n      const hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n        text = text.substring(1, text.length - 1);\n      }\n      text = escape(text, true);\n      return {\n        type: 'codespan',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n\n  br(src) {\n    const cap = this.rules.inline.br.exec(src);\n    if (cap) {\n      return {\n        type: 'br',\n        raw: cap[0]\n      };\n    }\n  }\n\n  del(src) {\n    const cap = this.rules.inline.del.exec(src);\n    if (cap) {\n      return {\n        type: 'del',\n        raw: cap[0],\n        text: cap[2],\n        tokens: this.lexer.inlineTokens(cap[2], [])\n      };\n    }\n  }\n\n  autolink(src, mangle) {\n    const cap = this.rules.inline.autolink.exec(src);\n    if (cap) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\n        href = 'mailto:' + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n\n  url(src, mangle) {\n    let cap;\n    if (cap = this.rules.inline.url.exec(src)) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\n        href = 'mailto:' + text;\n      } else {\n        // do extended autolink path validation\n        let prevCapZero;\n        do {\n          prevCapZero = cap[0];\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n        } while (prevCapZero !== cap[0]);\n        text = escape(cap[0]);\n        if (cap[1] === 'www.') {\n          href = 'http://' + text;\n        } else {\n          href = text;\n        }\n      }\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n\n  inlineText(src, smartypants) {\n    const cap = this.rules.inline.text.exec(src);\n    if (cap) {\n      let text;\n      if (this.lexer.state.inRawBlock) {\n        text = this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0];\n      } else {\n        text = escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\n      }\n      return {\n        type: 'text',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n}\n",
          "filepath": "data/repos/markedjs/marked-4.0/src/Tokenizer.js",
          "repo": "markedjs/marked",
          "version": "4.0",
          "chunk_index": 0
        }
      },
      {
        "id": "307aa398-025f-4f15-939b-ca49d12f13e3",
        "score": 0.015384615384615385,
        "payload": {
          "text": "    if (!nextChar || (nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar)))) {\n      const lLength = match[0].length - 1;\n      let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;\n\n      const endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\n      endReg.lastIndex = 0;\n\n      // Clip maskedSrc to same section of string as src (move to lexer?)\n      maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n\n      while ((match = endReg.exec(maskedSrc)) != null) {\n        rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n\n        if (!rDelim) continue; // skip single * in __abc*abc__\n\n        rLength = rDelim.length;\n\n        if (match[3] || match[4]) { // found another Left Delim\n          delimTotal += rLength;\n          continue;\n        } else if (match[5] || match[6]) { // either Left or Right Delim\n          if (lLength % 3 && !((lLength + rLength) % 3)) {\n            midDelimTotal += rLength;\n            continue; // CommonMark Emphasis Rules 9-10\n          }\n        }\n\n        delimTotal -= rLength;\n\n        if (delimTotal > 0) continue; // Haven't found enough closing delimiters\n\n        // Remove extra characters. *a*** -> *a*\n        rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);\n\n        // Create `em` if smallest delimiter has odd char count. *a***\n        if (Math.min(lLength, rLength) % 2) {\n          const text = src.slice(1, lLength + match.index + rLength);\n          return {\n            type: 'em',\n            raw: src.slice(0, lLength + match.index + rLength + 1),\n            text,\n            tokens: this.lexer.inlineTokens(text, [])\n          };\n        }\n\n        // Create 'strong' if smallest delimiter has even char count. **a***\n        const text = src.slice(2, lLength + match.index + rLength - 1);\n        return {\n          type: 'strong',\n          raw: src.slice(0, lLength + match.index + rLength + 1),\n          text,\n          tokens: this.lexer.inlineTokens(text, [])\n        };\n      }\n    }\n  }\n\n  codespan(src) {\n    const cap = this.rules.inline.code.exec(src);\n    if (cap) {\n      let text = cap[2].replace(/\\n/g, ' ');\n      const hasNonSpaceChars = /[^ ]/.test(text);\n      const hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n        text = text.substring(1, text.length - 1);\n      }\n      text = escape(text, true);\n      return {\n        type: 'codespan',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n\n  br(src) {\n    const cap = this.rules.inline.br.exec(src);\n    if (cap) {\n      return {\n        type: 'br',\n        raw: cap[0]\n      };\n    }\n  }\n\n  del(src) {\n    const cap = this.rules.inline.del.exec(src);\n    if (cap) {\n      return {\n        type: 'del',\n        raw: cap[0],\n        text: cap[2],\n        tokens: this.lexer.inlineTokens(cap[2], [])\n      };\n    }\n  }\n\n  autolink(src, mangle) {\n    const cap = this.rules.inline.autolink.exec(src);\n    if (cap) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\n        href = 'mailto:' + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n\n  url(src, mangle) {\n    let cap;\n    if (cap = this.rules.inline.url.exec(src)) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\n        href = 'mailto:' + text;\n      } else {\n        // do extended autolink path validation\n        let prevCapZero;\n        do {\n          prevCapZero = cap[0];\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n        } while (prevCapZero !== cap[0]);\n        text = escape(cap[0]);\n        if (cap[1] === 'www.') {\n          href = 'http://' + text;\n        } else {\n          href = text;\n        }\n      }\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n\n  inlineText(src, smartypants) {\n    const cap = this.rules.inline.text.exec(src);\n    if (cap) {\n      let text;\n      if (this.lexer.state.inRawBlock) {\n        text = this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0];\n      } else {\n        text = escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\n      }\n      return {\n        type: 'text',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n}\n\n/**\n * Block-Level Grammar\n */\nconst block = {\n  newline: /^(?: *(?:\\n|$))+/,\n  code: /^( {4}[^\\n]+(?:\\n(?: *(?:\\n|$))*)?)+/,\n  fences: /^ {0,3}(`{3,}(?=[^`\\n]*\\n)|~{3,})([^\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/,\n  hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,\n  heading: /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,\n  blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n  list: /^( {0,3}bull)( [^\\n]+?)?(?:\\n|$)/,\n  html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (6)\n    + '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) open tag\n    + '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) closing tag\n    + ')',\n  def: /^ {0,3}\\[(label)\\]: *\\n? *<?([^\\s>]+)>?(?:(?: +\\n? *| *\\n *)(title))? *(?:\\n+|$)/,\n  table: noopTest,\n  lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n  // regex template, placeholders will be replaced according to different paragraph\n  // interruption rules of commonmark and the original markdown spec:\n  _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html| +\\n)[^\\n]+)*)/,\n  text: /^[^\\n]+/\n};\n\nblock._label = /(?!\\s*\\])(?:\\\\[\\[\\]]|[^\\[\\]])+/;\nblock._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\nblock.def = edit(block.def)\n  .replace('label', block._label)\n  .replace('title', block._title)\n  .getRegex();\n\nblock.bullet = /(?:[*+-]|\\d{1,9}[.)])/;\nblock.listItemStart = edit(/^( *)(bull) */)\n  .replace('bull', block.bullet)\n  .getRegex();\n\nblock.list = edit(block.list)\n  .replace(/bull/g, block.bullet)\n  .replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))')\n  .replace('def', '\\\\n+(?=' + block.def.source + ')')\n  .getRegex();\n\nblock._tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n  + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n  + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n  + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n  + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'\n  + '|track|ul';\nblock._comment = /<!--(?!-?>)[\\s\\S]*?(?:-->|$)/;\nblock.html = edit(block.html, 'i')\n  .replace('comment', block._comment)\n  .replace('tag', block._tag)\n  .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n  .getRegex();\n\nblock.paragraph = edit(block._paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.blockquote = edit(block.blockquote)\n  .replace('paragraph', block.paragraph)\n  .getRegex();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  table: '^ *([^\\\\n ].*\\\\|.*)\\\\n' // Header\n    + ' {0,3}(?:\\\\| *)?(:?-+:? *(?:\\\\| *:?-+:? *)*)(?:\\\\| *)?' // Align\n    + '(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)' // Cells\n});\n\nblock.gfm.table = edit(block.gfm.table)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('blockquote', ' {0,3}>')\n  .replace('code', ' {4}[^\\\\n]')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n\n/**\n * Pedantic grammar (original John Gruber's loose markdown specification)\n */\n\nblock.pedantic = merge({}, block.normal, {\n  html: edit(\n    '^ *(?:comment *(?:\\\\n|\\\\s*$)'\n    + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n    .replace('comment', block._comment)\n    .replace(/tag/g, '(?!(?:'\n      + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n      + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n      + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n    .getRegex(),\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n  heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n  fences: noopTest, // fences not supported\n  paragraph: edit(block.normal._paragraph)\n    .replace('hr', block.hr)\n    .replace('heading', ' *#{1,6} *[^\\n]')\n    .replace('lheading', block.lheading)\n    .replace('blockquote', ' {0,3}>')\n    .replace('|fences', '')\n    .replace('|list', '')\n    .replace('|html', '')\n    .getRegex()\n});\n\n/**\n * Inline-Level Grammar\n */\nconst inline = {\n  escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n  autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n  url: noopTest,\n  tag: '^comment'\n    + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>', // CDATA section\n  link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n  reflink: /^!?\\[(label)\\]\\[(?!\\s*\\])((?:\\\\[\\[\\]]?|[^\\[\\]\\\\])+)\\]/,\n  nolink: /^!?\\[(?!\\s*\\])((?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]|[^\\[\\]])*)\\](?:\\[\\])?/,\n  reflinkSearch: 'reflink|nolink(?!\\\\()',\n  emStrong: {\n    lDelim: /^(?:\\*+(?:([punct_])|[^\\s*]))|^_+(?:([punct*])|([^\\s_]))/,\n    //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.\n    //        () Skip orphan delim inside strong    (1) #***                (2) a***#, a***                   (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a\n    rDelimAst: /^[^_*]*?\\_\\_[^_*]*?\\*[^_*]*?(?=\\_\\_)|[punct_](\\*+)(?=[\\s]|$)|[^punct*_\\s](\\*+)(?=[punct_\\s]|$)|[punct_\\s](\\*+)(?=[^punct*_\\s])|[\\s](\\*+)(?=[punct_])|[punct_](\\*+)(?=[punct_])|[^punct*_\\s](\\*+)(?=[^punct*_\\s])/,\n    rDelimUnd: /^[^_*]*?\\*\\*[^_*]*?\\_[^_*]*?(?=\\*\\*)|[punct*](\\_+)(?=[\\s]|$)|[^punct*_\\s](\\_+)(?=[punct*\\s]|$)|[punct*\\s](\\_+)(?=[^punct*_\\s])|[\\s](\\_+)(?=[punct*])|[punct*](\\_+)(?=[punct*])/ // ^- Not allowed for _\n  },\n  code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n  br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n  del: noopTest,\n  text: /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,\n  punctuation: /^([\\spunctuation])/\n};\n\n// list of punctuation marks from CommonMark spec\n// without * and _ to handle the different emphasis markers * and _\ninline._punctuation = '!\"#$%&\\'()+\\\\-.,/:;<=>?@\\\\[\\\\]`^{|}~';\ninline.punctuation = edit(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex();\n\n// sequences em should skip over [title](link), `code`, <html>\ninline.blockSkip = /\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>/g;\ninline.escapedEmSt = /\\\\\\*|\\\\_/g;\n\ninline._comment = edit(block._comment).replace('(?:-->|$)', '-->').getRegex();\n\ninline.emStrong.lDelim = edit(inline.emStrong.lDelim)\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline.emStrong.rDelimAst = edit(inline.emStrong.rDelimAst, 'g')\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline.emStrong.rDelimUnd = edit(inline.emStrong.rDelimUnd, 'g')\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n\ninline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\ninline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\ninline.autolink = edit(inline.autolink)\n  .replace('scheme', inline._scheme)\n  .replace('email', inline._email)\n  .getRegex();\n\ninline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n\ninline.tag = edit(inline.tag)\n  .replace('comment', inline._comment)\n  .replace('attribute', inline._attribute)\n  .getRegex();\n\ninline._label = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\ninline._href = /<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/;\ninline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n\ninline.link = edit(inline.link)\n  .replace('label', inline._label)\n  .replace('href', inline._href)\n  .replace('title', inline._title)\n  .getRegex();\n\ninline.reflink = edit(inline.reflink)\n  .replace('label', inline._label)\n  .getRegex();\n\ninline.reflinkSearch = edit(inline.reflinkSearch, 'g')\n  .replace('reflink', inline.reflink)\n  .replace('nolink', inline.nolink)\n  .getRegex();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: {\n    start: /^__|\\*\\*/,\n    middle: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n    endAst: /\\*\\*(?!\\*)/g,\n    endUnd: /__(?!_)/g\n  },\n  em: {\n    start: /^_|\\*/,\n    middle: /^()\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)|^_(?=\\S)([\\s\\S]*?\\S)_(?!_)/,\n    endAst: /\\*(?!\\*)/g,\n    endUnd: /_(?!_)/g\n  },\n  link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n    .replace('label', inline._label)\n    .getRegex(),\n  reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n    .replace('label', inline._label)\n    .getRegex()\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n  url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n  _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n  del: /^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,\n  text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/\n});\n\ninline.gfm.url = edit(inline.gfm.url, 'i')\n  .replace('email', inline.gfm._extended_email)\n  .getRegex();\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: edit(inline.br).replace('{2,}', '*').getRegex(),\n  text: edit(inline.gfm.text)\n    .replace('\\\\b_', '\\\\b_| {2,}\\\\n')\n    .replace(/\\{2,\\}/g, '*')\n    .getRegex()\n});\n\n/**\n * smartypants text replacement\n */\nfunction smartypants(text) {\n  return text\n    // em-dashes\n    .replace(/---/g, '\\u2014')\n    // en-dashes\n    .replace(/--/g, '\\u2013')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n}\n\n/**\n * mangle email addresses\n */\nfunction mangle(text) {\n  let out = '',\n    i,\n    ch;\n\n  const l = text.length;\n  for (i = 0; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n}\n\n/**\n * Block Lexer\n */\nclass Lexer {\n  constructor(options) {\n    this.tokens = [];\n    this.tokens.links = Object.create(null);\n    this.options = options || defaults;\n    this.options.tokenizer = this.options.tokenizer || new Tokenizer();\n    this.tokenizer = this.options.tokenizer;\n    this.tokenizer.options = this.options;\n    this.tokenizer.lexer = this;\n    this.inlineQueue = [];\n    this.state = {\n      inLink: false,\n      inRawBlock: false,\n      top: true\n    };\n\n    const rules = {\n      block: block.normal,\n      inline: inline.normal\n    };\n\n    if (this.options.pedantic) {\n      rules.block = block.pedantic;\n      rules.inline = inline.pedantic;\n    } else if (this.options.gfm) {\n      rules.block = block.gfm;\n      if (this.options.breaks) {\n        rules.inline = inline.breaks;\n      } else {\n        rules.inline = inline.gfm;\n      }\n    }\n    this.tokenizer.rules = rules;\n  }\n\n  /**\n   * Expose Rules\n   */\n  static get rules() {\n    return {\n      block,\n      inline\n    };\n  }\n\n  /**\n   * Static Lex Method\n   */\n  static lex(src, options) {\n    const lexer = new Lexer(options);\n    return lexer.lex(src);\n  }\n\n  /**\n   * Static Lex Inline Method\n   */\n  static lexInline(src, options) {\n    const lexer = new Lexer(options);\n    return lexer.inlineTokens(src);\n  }\n\n  /**\n   * Preprocessing\n   */\n  lex(src) {\n    src = src\n      .replace(/\\r\\n|\\r/g, '\\n')\n      .replace(/\\t/g, '    ');\n\n    this.blockTokens(src, this.tokens);\n\n    let next;\n    while (next = this.inlineQueue.shift()) {\n      this.inlineTokens(next.src, next.tokens);\n    }\n\n    return this.tokens;\n  }\n\n  /**\n   * Lexing\n   */\n  blockTokens(src, tokens = []) {\n    if (this.options.pedantic) {\n      src = src.replace(/^ +$/gm, '');\n    }\n    let token, lastToken, cutSrc, lastParagraphClipped;\n\n    while (src) {\n      if (this.options.extensions\n        && this.options.extensions.block\n        && this.options.extensions.block.some((extTokenizer) => {\n          if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n          return false;\n        })) {\n        continue;\n      }\n\n      // newline\n      if (token = this.tokenizer.space(src)) {\n        src = src.substring(token.raw.length);\n        if (token.type) {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // code\n      if (token = this.tokenizer.code(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        // An indented code block cannot interrupt a paragraph.\n        if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // fences\n      if (token = this.tokenizer.fences(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // heading\n      if (token = this.tokenizer.heading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;",
          "filepath": "data/repos/markedjs/marked-4.0/lib/marked.esm.js",
          "repo": "markedjs/marked",
          "version": "4.0",
          "chunk_index": 1
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1535",
    "model_patch": "diff --git a/worker.js b/worker.js\n--- a/worker.js\n+++ b/worker.js\n@@ -57,7 +57,7 @@\n       var lexed = marked.lexer(e.data.markdown, e.data.options);\n       var lexedList = [];\n       for (var i = 0; i < lexed.length; i++) {\n-        var lexedLine = [];\n+        var lexedLine = ['type:' + jsonString(lexed[i].type)];\n         for (var j in lexed[i]) {\n           lexedLine.push(j + ':' + jsonString(lexed[i][j]));\n         }\n@@ -66,7 +66,7 @@\n       var parsed = marked.parser(lexed, e.data.options);\n       var endTime = new Date();\n       // setTimeout(function () {\n-      postMessage({\n+      postMessage({ \n         task: e.data.task,\n         lexed: lexedList.join('\\n'),\n         parsed: parsed,",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 263.86,
      "issue_embedding_time_ms": 263.86,
      "retrieval_time_ms_jina": 1.1,
      "retrieval_time_ms": 1.1,
      "total_retrieval_time_ms": 264.96,
      "generation_time_ms": 2000.96,
      "total_io_time_ms": 2265.92,
      "input_total_token_limit": null,
      "issue_text_tokens": 575,
      "vlm_tokens": 0,
      "retrieved_tokens": 4776,
      "prompt_template_tokens": 510,
      "total_input_prompt_tokens": 5861,
      "output_generated_tokens": 214,
      "total_io_tokens": 6075,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nCheckbox rendering bug\\n**Describe the bug**\\r\\nIf newline exists between checkbox list, it looks like doesn't render well\\r\\n\\r\\n**To Reproduce**\\r\\n```\\r\\n- Tasks\\r\\n- [x] Task1\\r\\n- [ ] Task2\\r\\n\\r\\n- [ ] Another Task\\r\\n\\r\\n```\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/520523/62999436-5f5a1380-bea9-11e9-8b34-c233b31800bf.png)\\r\\n\\r\\n1. [Marked Demo](https://marked.js.org/demo/?text=-%20Tasks%0A-%20%5Bx%5D%20Task1%0A-%20%5B%20%5D%20Task2%0A%0A-%20%5B%20%5D%20Another%20Task%0A&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20false%2C%0A%20%22gfm%22%3A%20true%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=0.7.0)\\r\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/?text=-%20Tasks%0A-%20%5Bx%5D%20Task1%0A-%20%5B%20%5D%20Task2%0A%0A-%20%5B%20%5D%20Another%20Task%0A)\\r\\n\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of Bug_report.md]\\n---\\nname: Bug report\\nabout: Marked says it does this thing but does not\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior:\\n\\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\\n<!--\\n1. [Marked Demo](https://marked.js.org/demo/)\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\\n-->\\n\\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\\n<!--\\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\\n3. Actual output (or error) is...\\n-->\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n[end of Bug_report.md]\\n[start of worker.js]\\n/* globals marked, unfetch, ES6Promise, Promise */\\nif (!self.Promise) {\\n  self.importScripts('https://cdn.jsdelivr.net/npm/es6-promise/dist/es6-promise.js');\\n  self.Promise = ES6Promise;\\n}\\nif (!self.fetch) {\\n  self.importScripts('https://cdn.jsdelivr.net/npm/unfetch/dist/unfetch.umd.js');\\n  self.fetch = unfetch;\\n}\\n\\nvar versionCache = {};\\nvar currentVersion;\\n\\nonunhandledrejection = function(e) {\\n  throw e.reason;\\n};\\n\\nonmessage = function(e) {\\n  if (e.data.version === currentVersion) {\\n    parse(e);\\n  } else {\\n    loadVersion(e.data.version).then(function() {\\n      parse(e);\\n    });\\n  }\\n};\\n\\nfunction parse(e) {\\n  switch (e.data.task) {\\n    case 'defaults':\\n\\n      var defaults = {};\\n      if (typeof marked.getDefaults === 'function') {\\n        defaults = marked.getDefaults();\\n        delete defaults.renderer;\\n      } else if ('defaults' in marked) {\\n        for (var prop in marked.defaults) {\\n          if (prop !== 'renderer') {\\n            defaults[prop] = marked.defaults[prop];\\n          }\\n        }\\n      }\\n      postMessage({\\n        task: e.data.task,\\n        defaults: defaults\\n      });\\n      break;\\n    case 'parse':\\n      var startTime = new Date();\\n      var lexed = marked.lexer(e.data.markdown, e.data.options);\\n      var lexedList = [];\\n      for (var i = 0; i < lexed.length; i++) {\\n        var lexedLine = [];\\n        for (var j in lexed[i]) {\\n          lexedLine.push(j + ':' + jsonString(lexed[i][j]));\\n        }\\n        lexedList.push('{' + lexedLine.join(', ') + '}');\\n      }\\n      var parsed = marked.parser(lexed, e.data.options);\\n      var endTime = new Date();\\n      // setTimeout(function () {\\n      postMessage({\\n        task: e.data.task,\\n        lexed: lexedList.join('\\\\n'),\\n        parsed: parsed,\\n        time: endTime - startTime\\n      });\\n      // }, 10000);\\n      break;\\n  }\\n}\\n\\nfunction jsonString(input) {\\n  var output = (input + '')\\n    .replace(/\\\\n/g, '\\\\\\\\n')\\n    .replace(/\\\\r/g, '\\\\\\\\r')\\n    .replace(/\\\\t/g, '\\\\\\\\t')\\n    .replace(/\\\\f/g, '\\\\\\\\f')\\n    .replace(/[\\\\\\\\\\\"']/g, '\\\\\\\\$&')\\n    .replace(/\\\\u0000/g, '\\\\\\\\0');\\n  return '\\\"' + output + '\\\"';\\n};\\n\\nfunction loadVersion(ver) {\\n  var promise;\\n  if (versionCache[ver]) {\\n    promise = Promise.resolve(versionCache[ver]);\\n  } else {\\n    promise = fetch(ver)\\n      .then(function(res) { return res.text(); })\\n      .then(function(text) {\\n        versionCache[ver] = text;\\n        return text;\\n      });\\n  }\\n  return promise.then(function(text) {\\n    try {\\n      // eslint-disable-next-line no-new-func\\n      Function(text)();\\n    } catch (err) {\\n      throw new Error('Cannot load that version of marked');\\n    }\\n    currentVersion = ver;\\n  });\\n}\\n\\n[end of worker.js]\\n[start of bench.js]\\nconst path = require('path');\\nconst htmlDiffer = require('./helpers/html-differ.js');\\nconst { loadFiles } = require('./helpers/load.js');\\n\\nlet marked = require('../');\\n\\n/**\\n * Load specs\\n */\\nfunction load() {\\n  const dir = path.resolve(__dirname, './specs/commonmark');\\n  const sections = loadFiles(dir);\\n  let specs = [];\\n\\n  for (const section in sections) {\\n    specs = specs.concat(sections[section].specs);\\n  }\\n\\n  return specs;\\n}\\n\\n/**\\n * Run all benchmarks\\n */\\nfunction runBench(options) {\\n  options = options || {};\\n  const specs = load();\\n\\n  // Non-GFM, Non-pedantic\\n  marked.setOptions({\\n    gfm: false,\\n    breaks: false,\\n    pedantic: false,\\n    sanitize: false,\\n    smartLists: false\\n  });\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked', specs, marked);\\n\\n  // GFM\\n  marked.setOptions({\\n    gfm: true,\\n    breaks: false,\\n    pedantic: false,\\n    sanitize: false,\\n    smartLists: false\\n  });\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked (gfm)', specs, marked);\\n\\n  // Pedantic\\n  marked.setOptions({\\n    gfm: false,\\n    breaks: false,\\n    pedantic: true,\\n    sanitize: false,\\n    smartLists: false\\n  });\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked (pedantic)', specs, marked);\\n\\n  try {\\n    bench('commonmark', specs, (() => {\\n      const commonmark = require('commonmark');\\n      const parser = new commonmark.Parser();\\n      const writer = new commonmark.HtmlRenderer();\\n      return function(text) {\\n        return writer.render(parser.parse(text));\\n      };\\n    })());\\n  } catch (e) {\\n    console.error('Could not bench commonmark. (Error: %s)', e.message);\\n  }\\n\\n  try {\\n    bench('markdown-it', specs, (() => {\\n      const MarkdownIt = require('markdown-it');\\n      const md = new MarkdownIt();\\n      return md.render.bind(md);\\n    })());\\n  } catch (e) {\\n    console.error('Could not bench markdown-it. (Error: %s)', e.message);\\n  }\\n\\n  try {\\n    bench('markdown.js', specs, (() => {\\n      const md = require('markdown').markdown;\\n      return md.toHTML.bind(md);\\n    })());\\n  } catch (e) {\\n    console.error('Could not bench markdown.js. (Error: %s)', e.message);\\n  }\\n}\\n\\nfunction bench(name, specs, engine) {\\n  const before = process.hrtime();\\n  for (let i = 0; i < 1e3; i++) {\\n    for (const spec of specs) {\\n      engine(spec.markdown);\\n    }\\n  }\\n  const elapsed = process.hrtime(before);\\n  const ms = prettyElapsedTime(elapsed).toFixed();\\n\\n  const results = [];\\n  for (const spec of specs) {\\n    results.push({\\n      expected: spec.html,\\n      actual: engine(spec.markdown)\\n    });\\n  }\\n  const correct = results.reduce((num, result) => num + (htmlDiffer.isEqual(result.expected, result.actual) ? 1 : 0), 0);\\n  const percent = (correct / results.length * 100).toFixed(2);\\n\\n  console.log('%s completed in %sms and passed %s%', name, ms, percent);\\n}\\n\\n/**\\n * A simple one-time benchmark\\n */\\nfunction time(options) {\\n  options = options || {};\\n  const specs = load();\\n  if (options.marked) {\\n    marked.setOptions(options.marked);\\n  }\\n  bench('marked', specs, marked);\\n}\\n\\n/**\\n * Argument Parsing\\n */\\nfunction parseArg(argv) {\\n  argv = argv.slice(2);\\n\\n  const options = {};\\n  const orphans = [];\\n\\n  function getarg() {\\n    let arg = argv.shift();\\n\\n    if (arg.indexOf('--') === 0) {\\n      // e.g. --opt\\n      arg = arg.split('=');\\n      if (arg.length > 1) {\\n        // e.g. --opt=val\\n        argv.unshift(arg.slice(1).join('='));\\n      }\\n      arg = arg[0];\\n    } else if (arg[0] === '-') {\\n      if (arg.length > 2) {\\n        // e.g. -abc\\n        argv = arg.substring(1).split('').map(ch => {\\n          return `-${ch}`;\\n        }).concat(argv);\\n        arg = argv.shift();\\n      } else {\\n        // e.g. -a\\n      }\\n    } else {\\n      // e.g. foo\\n    }\\n\\n    return arg;\\n  }\\n\\n  const defaults = marked.getDefaults();\\n\\n  while (argv.length) {\\n    const arg = getarg();\\n    switch (arg) {\\n      case '-t':\\n      case '--time':\\n        options.time = true;\\n        break;\\n      case '-m':\\n      case '--minified':\\n        options.minified = true;\\n        break;\\n      default:\\n        if (arg.indexOf('--') === 0) {\\n          const opt = camelize(arg.replace(/^--(no-)?/, ''));\\n          if (!defaults.hasOwnProperty(opt)) {\\n            continue;\\n          }\\n          options.marked = options.marked || {};\\n          if (arg.indexOf('--no-') === 0) {\\n            options.marked[opt] = typeof defaults[opt] !== 'boolean'\\n              ? null\\n              : false;\\n          } else {\\n            options.marked[opt] = typeof defaults[opt] !== 'boolean'\\n              ? argv.shift()\\n              : true;\\n          }\\n        } else {\\n          orphans.push(arg);\\n        }\\n        break;\\n    }\\n  }\\n\\n  if (orphans.length > 0) {\\n    console.error();\\n    console.error('The following arguments are not used:');\\n    orphans.forEach(arg => console.error(`  ${arg}`));\\n    console.error();\\n  }\\n\\n  return options;\\n}\\n\\n/**\\n * Helpers\\n */\\nfunction camelize(text) {\\n  return text.replace(/(\\\\w)-(\\\\w)/g, (_, a, b) => a + b.toUpperCase());\\n}\\n\\n/**\\n * Main\\n */\\nfunction main(argv) {\\n  const opt = parseArg(argv);\\n\\n  if (opt.minified) {\\n    marked = require('../marked.min.js');\\n  }\\n\\n  if (opt.time) {\\n    time(opt);\\n  } else {\\n    runBench(opt);\\n  }\\n}\\n\\n/**\\n * returns time to millisecond granularity\\n */\\nfunction prettyElapsedTime(hrtimeElapsed) {\\n  const seconds = hrtimeElapsed[0];\\n  const frac = Math.round(hrtimeElapsed[1] / 1e3) / 1e3;\\n  return seconds * 1e3 + frac;\\n}\\n\\nif (!module.parent) {\\n  process.title = 'marked bench';\\n  main(process.argv.slice());\\n} else {\\n  exports = main;\\n  exports.main = main;\\n  exports.time = time;\\n  exports.runBench = runBench;\\n  exports.load = load;\\n  exports.bench = bench;\\n  module.exports = exports;\\n}\\n\\n[end of bench.js]\\n[start of broken.md]\\n# Markdown is broken\\n\\nI have a lot of scraps of markdown engine oddities that I've collected over the\\nyears. What you see below is slightly messy, but it's what I've managed to\\ncobble together to illustrate the differences between markdown engines, and\\nwhy, if there ever is a markdown specification, it has to be absolutely\\nthorough. There are a lot more of these little differences I have documented\\nelsewhere. I know I will find them lingering on my disk one day, but until\\nthen, I'll continue to add whatever strange nonsensical things I find.\\n\\nSome of these examples may only mention a particular engine compared to marked.\\nHowever, the examples with markdown.pl could easily be swapped out for\\ndiscount, upskirt, or markdown.js, and you would very easily see even more\\ninconsistencies.\\n\\nA lot of this was written when I was very unsatisfied with the inconsistencies\\nbetween markdown engines. Please excuse the frustration noticeable in my\\nwriting.\\n\\n## Examples of markdown's \\\"stupid\\\" list parsing\\n\\n```\\n$ markdown.pl\\n\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n\\n<ul>\\n<li>item2</li>\\n</ul>\\n\\n<p><p>text</p></li>\\n</ul></p>\\n```\\n\\n\\n```\\n$ marked\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n<ul>\\n<li>item2</li>\\n</ul>\\n<p>text</p>\\n</li>\\n</ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\n```\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\n```\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello<blockquote>\\n<p>world</p>\\n</blockquote>\\n</li>\\n</ul>\\n```\\n\\nAgain, which looks correct to you?\\n\\n- - -\\n\\nEXAMPLE:\\n\\n```\\n$ markdown.pl\\n* hello\\n  * world\\n    * hi\\n          code\\n^D\\n<ul>\\n<li>hello\\n<ul>\\n<li>world</li>\\n<li>hi\\n  code</li>\\n</ul></li>\\n</ul>\\n```\\n\\nThe code isn't a code block even though it's after the bullet margin. I know,\\nlets give it two more spaces, effectively making it 8 spaces past the bullet.\\n\\n```\\n$ markdown.pl\\n* hello\\n  * world\\n    * hi\\n            code\\n^D\\n<ul>\\n<li>hello\\n<ul>\\n<li>world</li>\\n<li>hi\\n    code</li>\\n</ul></li>\\n</ul>\\n```\\n\\nAnd, it's still not a code block. Did you also notice that the 3rd item isn't\\neven its own list? Markdown screws that up too because of its indentation\\nunaware parsing.\\n\\n- - -\\n\\nLet's look at some more examples of markdown's list parsing:\\n\\n```\\n$ markdown.pl\\n\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n\\n<ul>\\n<li>item2</li>\\n</ul>\\n\\n<p><p>text</p></li>\\n</ul></p>\\n```\\n\\nMisnested tags.\\n\\n\\n```\\n$ marked\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n<ul>\\n<li>item2</li>\\n</ul>\\n<p>text</p>\\n</li>\\n</ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\n```\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\nMore misnested tags.\\n\\n\\n```\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello<blockquote>\\n<p>world</p>\\n</blockquote>\\n</li>\\n</ul>\\n```\\n\\nAgain, which looks correct to you?\\n\\n- - -\\n\\n# Why quality matters - Part 2\\n\\n``` bash\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\n``` bash\\n$ sundown # upskirt\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello\\n&gt; world</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul><li>hello <blockquote><p>world</p></blockquote></li></ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/23\\n\\n``` bash\\n$ markdown.pl # upskirt/markdown.js/discount\\n* hello\\n      var a = 1;\\n* world\\n^D\\n<ul>\\n<li>hello\\nvar a = 1;</li>\\n<li>world</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n      var a = 1;\\n* world\\n^D\\n<ul><li>hello\\n<pre>code>var a = 1;</code></pre></li>\\n<li>world</li></ul>\\n```\\n\\nWhich looks more reasonable? Why shouldn't code blocks be able to appear in\\nlist items in a sane way?\\n\\n- - -\\n\\n``` bash\\n$ markdown.js\\n<div>hello</div>\\n\\n<span>hello</span>\\n^D\\n<p>&lt;div&gt;hello&lt;/div&gt;</p>\\n\\n<p>&lt;span&gt;hello&lt;/span&gt;</p>\\n```\\n\\n``` bash\\n$ marked\\n<div>hello</div>\\n\\n<span>hello</span>\\n^D\\n<div>hello</div>\\n\\n\\n<p><span>hello</span>\\n</p>\\n```\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/27\\n\\n``` bash\\n$ markdown.js\\n[![an image](/image)](/link)\\n^D\\n<p><a href=\\\"/image)](/link\\\">![an image</a></p>\\n```\\n\\n``` bash\\n$ marked\\n[![an image](/image)](/link)\\n^D\\n<p><a href=\\\"/link\\\"><img src=\\\"/image\\\" alt=\\\"an image\\\"></a>\\n</p>\\n```\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/24\\n\\n``` bash\\n$ markdown.js\\n> a\\n\\n> b\\n\\n> c\\n^D\\n<blockquote><p>a</p><p>bundefined&gt; c</p></blockquote>\\n```\\n\\n``` bash\\n$ marked\\n> a\\n\\n> b\\n\\n> c\\n^D\\n<blockquote><p>a\\n\\n</p></blockquote>\\n<blockquote><p>b\\n\\n</p></blockquote>\\n<blockquote><p>c\\n</p></blockquote>\\n```\\n\\n- - -\\n\\n``` bash\\n$ markdown.pl\\n* hello\\n  * world\\n    how\\n\\n    are\\n    you\\n\\n  * today\\n* hi\\n^D\\n<ul>\\n<li><p>hello</p>\\n\\n<ul>\\n<li>world\\nhow</li>\\n</ul>\\n\\n<p>are\\nyou</p>\\n\\n<ul>\\n<li>today</li>\\n</ul></li>\\n<li>hi</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n  * world\\n    how\\n\\n    are\\n    you\\n\\n  * today\\n* hi\\n^D\\n<ul>\\n<li><p>hello</p>\\n<ul>\\n<li><p>world\\nhow</p>\\n<p>are\\nyou</p>\\n</li>\\n<li><p>today</p>\\n</li>\\n</ul>\\n</li>\\n<li>hi</li>\\n</ul>\\n```\\n\\n[end of broken.md]\\n[start of update-specs.js]\\nconst fetch = require('node-fetch');\\nconst cheerio = require('cheerio');\\nconst marked = require('../');\\nconst htmlDiffer = require('./helpers/html-differ.js');\\nconst fs = require('fs');\\nconst path = require('path');\\n\\nfunction removeFiles(dir) {\\n  fs.readdirSync(dir).forEach(file => {\\n    fs.unlinkSync(path.join(dir, file));\\n  });\\n}\\n\\nasync function updateCommonmark(dir, options) {\\n  try {\\n    const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\\n    const pkg = await res.json();\\n    const version = pkg.version.replace(/^(\\\\d+\\\\.\\\\d+).*$/, '$1');\\n    const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\\n    const specs = await res2.json();\\n    specs.forEach(spec => {\\n      const html = marked(spec.markdown, options);\\n      if (!htmlDiffer.isEqual(html, spec.html)) {\\n        spec.shouldFail = true;\\n      }\\n    });\\n    fs.writeFileSync(path.resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\\\n');\\n    console.log(`Saved CommonMark v${version} specs`);\\n  } catch (ex) {\\n    console.log(ex);\\n  }\\n}\\n\\nasync function updateGfm(dir) {\\n  try {\\n    const res = await fetch('https://github.github.com/gfm/');\\n    const html = await res.text();\\n    const $ = cheerio.load(html);\\n    const version = $('.version').text().match(/\\\\d+\\\\.\\\\d+/)[0];\\n    if (!version) {\\n      throw new Error('No version found');\\n    }\\n    const specs = [];\\n    $('.extension').each((i, ext) => {\\n      const section = $('.definition', ext).text().trim().replace(/^\\\\d+\\\\.\\\\d+(.*?) \\\\(extension\\\\)[\\\\s\\\\S]*$/, '$1');\\n      $('.example', ext).each((j, exa) => {\\n        const example = +$(exa).attr('id').replace(/\\\\D/g, '');\\n        const markdown = $('.language-markdown', exa).text().trim();\\n        const html = $('.language-html', exa).text().trim();\\n        specs.push({\\n          section: `[extension] ${section}`,\\n          html,\\n          markdown,\\n          example\\n        });\\n      });\\n    });\\n\\n    specs.forEach(spec => {\\n      const html = marked(spec.markdown, { gfm: true, pedantic: false });\\n      if (!htmlDiffer.isEqual(html, spec.html)) {\\n        spec.shouldFail = true;\\n      }\\n    });\\n    fs.writeFileSync(path.resolve(dir, `./gfm.${version}.json`), JSON.stringify(specs, null, 2) + '\\\\n');\\n    console.log(`Saved GFM v${version} specs.`);\\n  } catch (ex) {\\n    console.log(ex);\\n  }\\n}\\n\\nconst commonmarkDir = path.resolve(__dirname, './specs/commonmark');\\nconst gfmDir = path.resolve(__dirname, './specs/gfm');\\nremoveFiles(commonmarkDir);\\nremoveFiles(gfmDir);\\nupdateCommonmark(commonmarkDir, { gfm: false, pedantic: false, headerIds: false });\\nupdateCommonmark(gfmDir, { gfm: true, pedantic: false, headerIds: false });\\nupdateGfm(gfmDir);\\n\\n[end of update-specs.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "Bug_report.md",
        "worker.js",
        "bench.js",
        "broken.md",
        "update-specs.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "e773799a-7d26-4c42-ac0f-6f070a5041ba",
        "score": 0.01639344262295082,
        "payload": {
          "text": "---\nname: Bug report\nabout: Marked says it does this thing but does not\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\n<!--\n1. [Marked Demo](https://marked.js.org/demo/)\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\n-->\n\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\n<!--\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\n3. Actual output (or error) is...\n-->\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n",
          "filepath": "data/repos/markedjs/marked-0.7/.github/ISSUE_TEMPLATE/Bug_report.md",
          "repo": "markedjs/marked",
          "version": "0.7",
          "chunk_index": 0
        }
      },
      {
        "id": "abfb2279-4206-4a80-a177-57c59903fc60",
        "score": 0.016129032258064516,
        "payload": {
          "text": "/* globals marked, unfetch, ES6Promise, Promise */\nif (!self.Promise) {\n  self.importScripts('https://cdn.jsdelivr.net/npm/es6-promise/dist/es6-promise.js');\n  self.Promise = ES6Promise;\n}\nif (!self.fetch) {\n  self.importScripts('https://cdn.jsdelivr.net/npm/unfetch/dist/unfetch.umd.js');\n  self.fetch = unfetch;\n}\n\nvar versionCache = {};\nvar currentVersion;\n\nonunhandledrejection = function(e) {\n  throw e.reason;\n};\n\nonmessage = function(e) {\n  if (e.data.version === currentVersion) {\n    parse(e);\n  } else {\n    loadVersion(e.data.version).then(function() {\n      parse(e);\n    });\n  }\n};\n\nfunction parse(e) {\n  switch (e.data.task) {\n    case 'defaults':\n\n      var defaults = {};\n      if (typeof marked.getDefaults === 'function') {\n        defaults = marked.getDefaults();\n        delete defaults.renderer;\n      } else if ('defaults' in marked) {\n        for (var prop in marked.defaults) {\n          if (prop !== 'renderer') {\n            defaults[prop] = marked.defaults[prop];\n          }\n        }\n      }\n      postMessage({\n        task: e.data.task,\n        defaults: defaults\n      });\n      break;\n    case 'parse':\n      var startTime = new Date();\n      var lexed = marked.lexer(e.data.markdown, e.data.options);\n      var lexedList = [];\n      for (var i = 0; i < lexed.length; i++) {\n        var lexedLine = [];\n        for (var j in lexed[i]) {\n          lexedLine.push(j + ':' + jsonString(lexed[i][j]));\n        }\n        lexedList.push('{' + lexedLine.join(', ') + '}');\n      }\n      var parsed = marked.parser(lexed, e.data.options);\n      var endTime = new Date();\n      // setTimeout(function () {\n      postMessage({\n        task: e.data.task,\n        lexed: lexedList.join('\\n'),\n        parsed: parsed,\n        time: endTime - startTime\n      });\n      // }, 10000);\n      break;\n  }\n}\n\nfunction jsonString(input) {\n  var output = (input + '')\n    .replace(/\\n/g, '\\\\n')\n    .replace(/\\r/g, '\\\\r')\n    .replace(/\\t/g, '\\\\t')\n    .replace(/\\f/g, '\\\\f')\n    .replace(/[\\\\\"']/g, '\\\\$&')\n    .replace(/\\u0000/g, '\\\\0');\n  return '\"' + output + '\"';\n};\n\nfunction loadVersion(ver) {\n  var promise;\n  if (versionCache[ver]) {\n    promise = Promise.resolve(versionCache[ver]);\n  } else {\n    promise = fetch(ver)\n      .then(function(res) { return res.text(); })\n      .then(function(text) {\n        versionCache[ver] = text;\n        return text;\n      });\n  }\n  return promise.then(function(text) {\n    try {\n      // eslint-disable-next-line no-new-func\n      Function(text)();\n    } catch (err) {\n      throw new Error('Cannot load that version of marked');\n    }\n    currentVersion = ver;\n  });\n}\n",
          "filepath": "data/repos/markedjs/marked-0.7/docs/demo/worker.js",
          "repo": "markedjs/marked",
          "version": "0.7",
          "chunk_index": 0
        }
      },
      {
        "id": "c5f3c0bf-ad7f-44f0-8487-ed06acaa1bf9",
        "score": 0.015873015873015872,
        "payload": {
          "text": "const path = require('path');\nconst htmlDiffer = require('./helpers/html-differ.js');\nconst { loadFiles } = require('./helpers/load.js');\n\nlet marked = require('../');\n\n/**\n * Load specs\n */\nfunction load() {\n  const dir = path.resolve(__dirname, './specs/commonmark');\n  const sections = loadFiles(dir);\n  let specs = [];\n\n  for (const section in sections) {\n    specs = specs.concat(sections[section].specs);\n  }\n\n  return specs;\n}\n\n/**\n * Run all benchmarks\n */\nfunction runBench(options) {\n  options = options || {};\n  const specs = load();\n\n  // Non-GFM, Non-pedantic\n  marked.setOptions({\n    gfm: false,\n    breaks: false,\n    pedantic: false,\n    sanitize: false,\n    smartLists: false\n  });\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked', specs, marked);\n\n  // GFM\n  marked.setOptions({\n    gfm: true,\n    breaks: false,\n    pedantic: false,\n    sanitize: false,\n    smartLists: false\n  });\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked (gfm)', specs, marked);\n\n  // Pedantic\n  marked.setOptions({\n    gfm: false,\n    breaks: false,\n    pedantic: true,\n    sanitize: false,\n    smartLists: false\n  });\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked (pedantic)', specs, marked);\n\n  try {\n    bench('commonmark', specs, (() => {\n      const commonmark = require('commonmark');\n      const parser = new commonmark.Parser();\n      const writer = new commonmark.HtmlRenderer();\n      return function(text) {\n        return writer.render(parser.parse(text));\n      };\n    })());\n  } catch (e) {\n    console.error('Could not bench commonmark. (Error: %s)', e.message);\n  }\n\n  try {\n    bench('markdown-it', specs, (() => {\n      const MarkdownIt = require('markdown-it');\n      const md = new MarkdownIt();\n      return md.render.bind(md);\n    })());\n  } catch (e) {\n    console.error('Could not bench markdown-it. (Error: %s)', e.message);\n  }\n\n  try {\n    bench('markdown.js', specs, (() => {\n      const md = require('markdown').markdown;\n      return md.toHTML.bind(md);\n    })());\n  } catch (e) {\n    console.error('Could not bench markdown.js. (Error: %s)', e.message);\n  }\n}\n\nfunction bench(name, specs, engine) {\n  const before = process.hrtime();\n  for (let i = 0; i < 1e3; i++) {\n    for (const spec of specs) {\n      engine(spec.markdown);\n    }\n  }\n  const elapsed = process.hrtime(before);\n  const ms = prettyElapsedTime(elapsed).toFixed();\n\n  const results = [];\n  for (const spec of specs) {\n    results.push({\n      expected: spec.html,\n      actual: engine(spec.markdown)\n    });\n  }\n  const correct = results.reduce((num, result) => num + (htmlDiffer.isEqual(result.expected, result.actual) ? 1 : 0), 0);\n  const percent = (correct / results.length * 100).toFixed(2);\n\n  console.log('%s completed in %sms and passed %s%', name, ms, percent);\n}\n\n/**\n * A simple one-time benchmark\n */\nfunction time(options) {\n  options = options || {};\n  const specs = load();\n  if (options.marked) {\n    marked.setOptions(options.marked);\n  }\n  bench('marked', specs, marked);\n}\n\n/**\n * Argument Parsing\n */\nfunction parseArg(argv) {\n  argv = argv.slice(2);\n\n  const options = {};\n  const orphans = [];\n\n  function getarg() {\n    let arg = argv.shift();\n\n    if (arg.indexOf('--') === 0) {\n      // e.g. --opt\n      arg = arg.split('=');\n      if (arg.length > 1) {\n        // e.g. --opt=val\n        argv.unshift(arg.slice(1).join('='));\n      }\n      arg = arg[0];\n    } else if (arg[0] === '-') {\n      if (arg.length > 2) {\n        // e.g. -abc\n        argv = arg.substring(1).split('').map(ch => {\n          return `-${ch}`;\n        }).concat(argv);\n        arg = argv.shift();\n      } else {\n        // e.g. -a\n      }\n    } else {\n      // e.g. foo\n    }\n\n    return arg;\n  }\n\n  const defaults = marked.getDefaults();\n\n  while (argv.length) {\n    const arg = getarg();\n    switch (arg) {\n      case '-t':\n      case '--time':\n        options.time = true;\n        break;\n      case '-m':\n      case '--minified':\n        options.minified = true;\n        break;\n      default:\n        if (arg.indexOf('--') === 0) {\n          const opt = camelize(arg.replace(/^--(no-)?/, ''));\n          if (!defaults.hasOwnProperty(opt)) {\n            continue;\n          }\n          options.marked = options.marked || {};\n          if (arg.indexOf('--no-') === 0) {\n            options.marked[opt] = typeof defaults[opt] !== 'boolean'\n              ? null\n              : false;\n          } else {\n            options.marked[opt] = typeof defaults[opt] !== 'boolean'\n              ? argv.shift()\n              : true;\n          }\n        } else {\n          orphans.push(arg);\n        }\n        break;\n    }\n  }\n\n  if (orphans.length > 0) {\n    console.error();\n    console.error('The following arguments are not used:');\n    orphans.forEach(arg => console.error(`  ${arg}`));\n    console.error();\n  }\n\n  return options;\n}\n\n/**\n * Helpers\n */\nfunction camelize(text) {\n  return text.replace(/(\\w)-(\\w)/g, (_, a, b) => a + b.toUpperCase());\n}\n\n/**\n * Main\n */\nfunction main(argv) {\n  const opt = parseArg(argv);\n\n  if (opt.minified) {\n    marked = require('../marked.min.js');\n  }\n\n  if (opt.time) {\n    time(opt);\n  } else {\n    runBench(opt);\n  }\n}\n\n/**\n * returns time to millisecond granularity\n */\nfunction prettyElapsedTime(hrtimeElapsed) {\n  const seconds = hrtimeElapsed[0];\n  const frac = Math.round(hrtimeElapsed[1] / 1e3) / 1e3;\n  return seconds * 1e3 + frac;\n}\n\nif (!module.parent) {\n  process.title = 'marked bench';\n  main(process.argv.slice());\n} else {\n  exports = main;\n  exports.main = main;\n  exports.time = time;\n  exports.runBench = runBench;\n  exports.load = load;\n  exports.bench = bench;\n  module.exports = exports;\n}\n",
          "filepath": "data/repos/markedjs/marked-0.7/test/bench.js",
          "repo": "markedjs/marked",
          "version": "0.7",
          "chunk_index": 0
        }
      },
      {
        "id": "00fb4549-d1b0-40de-8f35-0b820b7692ba",
        "score": 0.015625,
        "payload": {
          "text": "# Markdown is broken\n\nI have a lot of scraps of markdown engine oddities that I've collected over the\nyears. What you see below is slightly messy, but it's what I've managed to\ncobble together to illustrate the differences between markdown engines, and\nwhy, if there ever is a markdown specification, it has to be absolutely\nthorough. There are a lot more of these little differences I have documented\nelsewhere. I know I will find them lingering on my disk one day, but until\nthen, I'll continue to add whatever strange nonsensical things I find.\n\nSome of these examples may only mention a particular engine compared to marked.\nHowever, the examples with markdown.pl could easily be swapped out for\ndiscount, upskirt, or markdown.js, and you would very easily see even more\ninconsistencies.\n\nA lot of this was written when I was very unsatisfied with the inconsistencies\nbetween markdown engines. Please excuse the frustration noticeable in my\nwriting.\n\n## Examples of markdown's \"stupid\" list parsing\n\n```\n$ markdown.pl\n\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n\n<ul>\n<li>item2</li>\n</ul>\n\n<p><p>text</p></li>\n</ul></p>\n```\n\n\n```\n$ marked\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n<ul>\n<li>item2</li>\n</ul>\n<p>text</p>\n</li>\n</ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\n```\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\n```\n$ marked\n* hello\n  > world\n^D\n<ul>\n<li>hello<blockquote>\n<p>world</p>\n</blockquote>\n</li>\n</ul>\n```\n\nAgain, which looks correct to you?\n\n- - -\n\nEXAMPLE:\n\n```\n$ markdown.pl\n* hello\n  * world\n    * hi\n          code\n^D\n<ul>\n<li>hello\n<ul>\n<li>world</li>\n<li>hi\n  code</li>\n</ul></li>\n</ul>\n```\n\nThe code isn't a code block even though it's after the bullet margin. I know,\nlets give it two more spaces, effectively making it 8 spaces past the bullet.\n\n```\n$ markdown.pl\n* hello\n  * world\n    * hi\n            code\n^D\n<ul>\n<li>hello\n<ul>\n<li>world</li>\n<li>hi\n    code</li>\n</ul></li>\n</ul>\n```\n\nAnd, it's still not a code block. Did you also notice that the 3rd item isn't\neven its own list? Markdown screws that up too because of its indentation\nunaware parsing.\n\n- - -\n\nLet's look at some more examples of markdown's list parsing:\n\n```\n$ markdown.pl\n\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n\n<ul>\n<li>item2</li>\n</ul>\n\n<p><p>text</p></li>\n</ul></p>\n```\n\nMisnested tags.\n\n\n```\n$ marked\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n<ul>\n<li>item2</li>\n</ul>\n<p>text</p>\n</li>\n</ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\n```\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\nMore misnested tags.\n\n\n```\n$ marked\n* hello\n  > world\n^D\n<ul>\n<li>hello<blockquote>\n<p>world</p>\n</blockquote>\n</li>\n</ul>\n```\n\nAgain, which looks correct to you?\n\n- - -\n\n# Why quality matters - Part 2\n\n``` bash\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\n``` bash\n$ sundown # upskirt\n* hello\n  > world\n^D\n<ul>\n<li>hello\n&gt; world</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n  > world\n^D\n<ul><li>hello <blockquote><p>world</p></blockquote></li></ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/23\n\n``` bash\n$ markdown.pl # upskirt/markdown.js/discount\n* hello\n      var a = 1;\n* world\n^D\n<ul>\n<li>hello\nvar a = 1;</li>\n<li>world</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n      var a = 1;\n* world\n^D\n<ul><li>hello\n<pre>code>var a = 1;</code></pre></li>\n<li>world</li></ul>\n```\n\nWhich looks more reasonable? Why shouldn't code blocks be able to appear in\nlist items in a sane way?\n\n- - -\n\n``` bash\n$ markdown.js\n<div>hello</div>\n\n<span>hello</span>\n^D\n<p>&lt;div&gt;hello&lt;/div&gt;</p>\n\n<p>&lt;span&gt;hello&lt;/span&gt;</p>\n```\n\n``` bash\n$ marked\n<div>hello</div>\n\n<span>hello</span>\n^D\n<div>hello</div>\n\n\n<p><span>hello</span>\n</p>\n```\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/27\n\n``` bash\n$ markdown.js\n[![an image](/image)](/link)\n^D\n<p><a href=\"/image)](/link\">![an image</a></p>\n```\n\n``` bash\n$ marked\n[![an image](/image)](/link)\n^D\n<p><a href=\"/link\"><img src=\"/image\" alt=\"an image\"></a>\n</p>\n```\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/24\n\n``` bash\n$ markdown.js\n> a\n\n> b\n\n> c\n^D\n<blockquote><p>a</p><p>bundefined&gt; c</p></blockquote>\n```\n\n``` bash\n$ marked\n> a\n\n> b\n\n> c\n^D\n<blockquote><p>a\n\n</p></blockquote>\n<blockquote><p>b\n\n</p></blockquote>\n<blockquote><p>c\n</p></blockquote>\n```\n\n- - -\n\n``` bash\n$ markdown.pl\n* hello\n  * world\n    how\n\n    are\n    you\n\n  * today\n* hi\n^D\n<ul>\n<li><p>hello</p>\n\n<ul>\n<li>world\nhow</li>\n</ul>\n\n<p>are\nyou</p>\n\n<ul>\n<li>today</li>\n</ul></li>\n<li>hi</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n  * world\n    how\n\n    are\n    you\n\n  * today\n* hi\n^D\n<ul>\n<li><p>hello</p>\n<ul>\n<li><p>world\nhow</p>\n<p>are\nyou</p>\n</li>\n<li><p>today</p>\n</li>\n</ul>\n</li>\n<li>hi</li>\n</ul>\n```\n",
          "filepath": "data/repos/markedjs/marked-0.7/docs/broken.md",
          "repo": "markedjs/marked",
          "version": "0.7",
          "chunk_index": 0
        }
      },
      {
        "id": "80aecac3-5f20-4d7c-92d3-ad740891c7d7",
        "score": 0.015384615384615385,
        "payload": {
          "text": "const fetch = require('node-fetch');\nconst cheerio = require('cheerio');\nconst marked = require('../');\nconst htmlDiffer = require('./helpers/html-differ.js');\nconst fs = require('fs');\nconst path = require('path');\n\nfunction removeFiles(dir) {\n  fs.readdirSync(dir).forEach(file => {\n    fs.unlinkSync(path.join(dir, file));\n  });\n}\n\nasync function updateCommonmark(dir, options) {\n  try {\n    const res = await fetch('https://raw.githubusercontent.com/commonmark/commonmark.js/master/package.json');\n    const pkg = await res.json();\n    const version = pkg.version.replace(/^(\\d+\\.\\d+).*$/, '$1');\n    const res2 = await fetch(`https://spec.commonmark.org/${version}/spec.json`);\n    const specs = await res2.json();\n    specs.forEach(spec => {\n      const html = marked(spec.markdown, options);\n      if (!htmlDiffer.isEqual(html, spec.html)) {\n        spec.shouldFail = true;\n      }\n    });\n    fs.writeFileSync(path.resolve(dir, `./commonmark.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n    console.log(`Saved CommonMark v${version} specs`);\n  } catch (ex) {\n    console.log(ex);\n  }\n}\n\nasync function updateGfm(dir) {\n  try {\n    const res = await fetch('https://github.github.com/gfm/');\n    const html = await res.text();\n    const $ = cheerio.load(html);\n    const version = $('.version').text().match(/\\d+\\.\\d+/)[0];\n    if (!version) {\n      throw new Error('No version found');\n    }\n    const specs = [];\n    $('.extension').each((i, ext) => {\n      const section = $('.definition', ext).text().trim().replace(/^\\d+\\.\\d+(.*?) \\(extension\\)[\\s\\S]*$/, '$1');\n      $('.example', ext).each((j, exa) => {\n        const example = +$(exa).attr('id').replace(/\\D/g, '');\n        const markdown = $('.language-markdown', exa).text().trim();\n        const html = $('.language-html', exa).text().trim();\n        specs.push({\n          section: `[extension] ${section}`,\n          html,\n          markdown,\n          example\n        });\n      });\n    });\n\n    specs.forEach(spec => {\n      const html = marked(spec.markdown, { gfm: true, pedantic: false });\n      if (!htmlDiffer.isEqual(html, spec.html)) {\n        spec.shouldFail = true;\n      }\n    });\n    fs.writeFileSync(path.resolve(dir, `./gfm.${version}.json`), JSON.stringify(specs, null, 2) + '\\n');\n    console.log(`Saved GFM v${version} specs.`);\n  } catch (ex) {\n    console.log(ex);\n  }\n}\n\nconst commonmarkDir = path.resolve(__dirname, './specs/commonmark');\nconst gfmDir = path.resolve(__dirname, './specs/gfm');\nremoveFiles(commonmarkDir);\nremoveFiles(gfmDir);\nupdateCommonmark(commonmarkDir, { gfm: false, pedantic: false, headerIds: false });\nupdateCommonmark(gfmDir, { gfm: true, pedantic: false, headerIds: false });\nupdateGfm(gfmDir);\n",
          "filepath": "data/repos/markedjs/marked-0.7/test/update-specs.js",
          "repo": "markedjs/marked",
          "version": "0.7",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-684",
    "model_patch": "diff --git a/ordered_and_unordered_lists.md b/ordered_and_unordered_lists.md\n--- a/ordered_and_unordered_lists.md\n+++ b/ordered_and_unordered_lists.md\n@@ -1,4 +1,8 @@\n ## Unordered\n \n+Asterisks tight:\n+\n+*\tasterisk 1\n+*\tasterisk 2\n+*\tasterisk 3\n \n Asterisks loose:\n \n@@ -12,6 +16,10 @@\n +\tPlus 1\n +\tPlus 2\n +\tPlus 3\n+\n+\n+Pluses loose:\n+\n +\tPlus 1\n \n +\tPlus 2\n@@ -23,6 +31,10 @@\n -\tMinus 1\n -\tMinus 2\n -\tMinus 3\n+\n+\n+Minuses loose:\n+\n -\tMinus 1\n \n -\tMinus 2\n@@ -34,6 +46,10 @@\n 1.\tFirst\n 2.\tSecond\n 3.\tThird\n+\n+and:\n+\n+1. One\n+2. Two\n+3. Three\n \n and:\n \n@@ -45,6 +61,10 @@\n 1.\tFirst\n \n 2.\tSecond\n+\n+3.\tThird\n+\n+and using spaces:\n \n 1. One\n \n@@ -56,6 +76,10 @@\n 1.\tItem 1, graf one.\n \n \tItem 2. graf two. The quick brown fox jumped over the lazy dog's\n+\tback.\n+\n+2.\tItem 2.\n+\n+3.\tItem 3.\n \n ## Nested\n \n@@ -65,6 +89,10 @@\n \t*\tTab\n \t\t*\tTab\n \n+Here's another:\n+\n+1. First\n+2. Second:\n \t* Fee\n \t* Fie\n \t* Foe\n@@ -76,6 +104,10 @@\n 1. First\n \n 2. Second:\n+\t* Fee\n+\t* Fie\n+\t* Foe\n+\n 3. Third\n \n This was an error in Markdown 1.0.1:",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 119.33,
      "issue_embedding_time_ms": 119.33,
      "retrieval_time_ms_jina": 0.73,
      "retrieval_time_ms": 0.73,
      "total_retrieval_time_ms": 120.06,
      "generation_time_ms": 5985.9,
      "total_io_time_ms": 6105.95,
      "input_total_token_limit": null,
      "issue_text_tokens": 274,
      "vlm_tokens": 0,
      "retrieved_tokens": 2498,
      "prompt_template_tokens": 528,
      "total_input_prompt_tokens": 3300,
      "output_generated_tokens": 464,
      "total_io_tokens": 3764,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nWeird list rendering behavior\\n```\\n- test\\n- test\\n- test\\n1. test\\n2. test\\n3. test\\n```\\n\\nRenders as this:\\n\\n![screenshot 40](https://cloud.githubusercontent.com/assets/87356/5483878/54978340-8639-11e4-961b-7f5f293980c6.jpg)\\n\\n```\\n- test\\n- test\\n- test\\n\\n1. test\\n2. test\\n3. test\\n```\\n\\nRenders as\\n\\n![screenshot 41](https://cloud.githubusercontent.com/assets/87356/5483883/66d6c32c-8639-11e4-87cf-a18d96fd59e8.jpg)\\n\\nAnd this:\\n\\n```\\n- test\\n- test\\n- test\\n\\n\\n1. test\\n2. test\\n3. test\\n```\\n\\nRenders correctly:\\n\\n![screenshot 42](https://cloud.githubusercontent.com/assets/87356/5483887/7d846408-8639-11e4-9201-a86ded31a5d1.jpg)\\n\\nWhy the weird behavior? Is this normal? Why is 2 spaces required after a list before starting another list? I haven't seen that any in sort of spec for how markdown works. Am I missing something here?\\n\\n\\n</issue>\\n\\n<code>\\n[start of hard_wrapped_paragraphs_with_list_like_lines.md]\\nIn Markdown 1.0.0 and earlier. Version\\n8. This line turns into a list item.\\nBecause a hard-wrapped line in the\\nmiddle of a paragraph looked like a\\nlist item.\\n\\nHere's one with a bullet.\\n* criminey.\\n\\n[end of hard_wrapped_paragraphs_with_list_like_lines.md]\\n[start of tabs.md]\\n+\\tthis is a list item\\n\\tindented with tabs\\n\\n+   this is a list item\\n    indented with spaces\\n\\nCode:\\n\\n\\tthis code block is indented by one tab\\n\\nAnd:\\n\\n\\t\\tthis code block is indented by two tabs\\n\\nAnd:\\n\\n\\t+\\tthis is an example list item\\n\\t\\tindented with tabs\\n\\t\\n\\t+   this is an example list item\\n\\t    indented with spaces\\n\\n[end of tabs.md]\\n[start of ordered_and_unordered_lists.md]\\n## Unordered\\n\\nAsterisks tight:\\n\\n*\\tasterisk 1\\n*\\tasterisk 2\\n*\\tasterisk 3\\n\\n\\nAsterisks loose:\\n\\n*\\tasterisk 1\\n\\n*\\tasterisk 2\\n\\n*\\tasterisk 3\\n\\n* * *\\n\\nPluses tight:\\n\\n+\\tPlus 1\\n+\\tPlus 2\\n+\\tPlus 3\\n\\n\\nPluses loose:\\n\\n+\\tPlus 1\\n\\n+\\tPlus 2\\n\\n+\\tPlus 3\\n\\n* * *\\n\\n\\nMinuses tight:\\n\\n-\\tMinus 1\\n-\\tMinus 2\\n-\\tMinus 3\\n\\n\\nMinuses loose:\\n\\n-\\tMinus 1\\n\\n-\\tMinus 2\\n\\n-\\tMinus 3\\n\\n\\n## Ordered\\n\\nTight:\\n\\n1.\\tFirst\\n2.\\tSecond\\n3.\\tThird\\n\\nand:\\n\\n1. One\\n2. Two\\n3. Three\\n\\n\\nLoose using tabs:\\n\\n1.\\tFirst\\n\\n2.\\tSecond\\n\\n3.\\tThird\\n\\nand using spaces:\\n\\n1. One\\n\\n2. Two\\n\\n3. Three\\n\\nMultiple paragraphs:\\n\\n1.\\tItem 1, graf one.\\n\\n\\tItem 2. graf two. The quick brown fox jumped over the lazy dog's\\n\\tback.\\n\\n2.\\tItem 2.\\n\\n3.\\tItem 3.\\n\\n\\n\\n## Nested\\n\\n*\\tTab\\n\\t*\\tTab\\n\\t\\t*\\tTab\\n\\nHere's another:\\n\\n1. First\\n2. Second:\\n\\t* Fee\\n\\t* Fie\\n\\t* Foe\\n3. Third\\n\\nSame thing but with paragraphs:\\n\\n1. First\\n\\n2. Second:\\n\\t* Fee\\n\\t* Fie\\n\\t* Foe\\n\\n3. Third\\n\\n\\nThis was an error in Markdown 1.0.1:\\n\\n*\\tthis\\n\\n\\t*\\tsub\\n\\n\\tthat\\n\\nOrdered lists start from initial number:\\n\\n3. Three\\n1. Four\\n\\nOrdered lists start from initial zero:\\n\\n0. Zero\\n1. One\\n\\n[end of ordered_and_unordered_lists.md]\\n[start of broken.md]\\n# Markdown is broken\\n\\nI have a lot of scraps of markdown engine oddities that I've collected over the\\nyears. What you see below is slightly messy, but it's what I've managed to\\ncobble together to illustrate the differences between markdown engines, and\\nwhy, if there ever is a markdown specification, it has to be absolutely\\nthorough. There are a lot more of these little differences I have documented\\nelsewhere. I know I will find them lingering on my disk one day, but until\\nthen, I'll continue to add whatever strange nonsensical things I find.\\n\\nSome of these examples may only mention a particular engine compared to marked.\\nHowever, the examples with markdown.pl could easily be swapped out for\\ndiscount, upskirt, or markdown.js, and you would very easily see even more\\ninconsistencies.\\n\\nA lot of this was written when I was very unsatisfied with the inconsistencies\\nbetween markdown engines. Please excuse the frustration noticeable in my\\nwriting.\\n\\n## Examples of markdown's \\\"stupid\\\" list parsing\\n\\n```\\n$ markdown.pl\\n\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n\\n<ul>\\n<li>item2</li>\\n</ul>\\n\\n<p><p>text</p></li>\\n</ul></p>\\n```\\n\\n\\n```\\n$ marked\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n<ul>\\n<li>item2</li>\\n</ul>\\n<p>text</p>\\n</li>\\n</ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\n```\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\n```\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello<blockquote>\\n<p>world</p>\\n</blockquote>\\n</li>\\n</ul>\\n```\\n\\nAgain, which looks correct to you?\\n\\n- - -\\n\\nEXAMPLE:\\n\\n```\\n$ markdown.pl\\n* hello\\n  * world\\n    * hi\\n          code\\n^D\\n<ul>\\n<li>hello\\n<ul>\\n<li>world</li>\\n<li>hi\\n  code</li>\\n</ul></li>\\n</ul>\\n```\\n\\nThe code isn't a code block even though it's after the bullet margin. I know,\\nlets give it two more spaces, effectively making it 8 spaces past the bullet.\\n\\n```\\n$ markdown.pl\\n* hello\\n  * world\\n    * hi\\n            code\\n^D\\n<ul>\\n<li>hello\\n<ul>\\n<li>world</li>\\n<li>hi\\n    code</li>\\n</ul></li>\\n</ul>\\n```\\n\\nAnd, it's still not a code block. Did you also notice that the 3rd item isn't\\neven its own list? Markdown screws that up too because of its indentation\\nunaware parsing.\\n\\n- - -\\n\\nLet's look at some more examples of markdown's list parsing:\\n\\n```\\n$ markdown.pl\\n\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n\\n<ul>\\n<li>item2</li>\\n</ul>\\n\\n<p><p>text</p></li>\\n</ul></p>\\n```\\n\\nMisnested tags.\\n\\n\\n```\\n$ marked\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n<ul>\\n<li>item2</li>\\n</ul>\\n<p>text</p>\\n</li>\\n</ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\n```\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\nMore misnested tags.\\n\\n\\n```\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello<blockquote>\\n<p>world</p>\\n</blockquote>\\n</li>\\n</ul>\\n```\\n\\nAgain, which looks correct to you?\\n\\n- - -\\n\\n# Why quality matters - Part 2\\n\\n``` bash\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\n``` bash\\n$ sundown # upskirt\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello\\n&gt; world</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul><li>hello <blockquote><p>world</p></blockquote></li></ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/23\\n\\n``` bash\\n$ markdown.pl # upskirt/markdown.js/discount\\n* hello\\n      var a = 1;\\n* world\\n^D\\n<ul>\\n<li>hello\\nvar a = 1;</li>\\n<li>world</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n      var a = 1;\\n* world\\n^D\\n<ul><li>hello\\n<pre>code>var a = 1;</code></pre></li>\\n<li>world</li></ul>\\n```\\n\\nWhich looks more reasonable? Why shouldn't code blocks be able to appear in\\nlist items in a sane way?\\n\\n- - -\\n\\n``` bash\\n$ markdown.js\\n<div>hello</div>\\n\\n<span>hello</span>\\n^D\\n<p>&lt;div&gt;hello&lt;/div&gt;</p>\\n\\n<p>&lt;span&gt;hello&lt;/span&gt;</p>\\n```\\n\\n``` bash\\n$ marked\\n<div>hello</div>\\n\\n<span>hello</span>\\n^D\\n<div>hello</div>\\n\\n\\n<p><span>hello</span>\\n</p>\\n```\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/27\\n\\n``` bash\\n$ markdown.js\\n[![an image](/image)](/link)\\n^D\\n<p><a href=\\\"/image)](/link\\\">![an image</a></p>\\n```\\n\\n``` bash\\n$ marked\\n[![an image](/image)](/link)\\n^D\\n<p><a href=\\\"/link\\\"><img src=\\\"/image\\\" alt=\\\"an image\\\"></a>\\n</p>\\n```\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/24\\n\\n``` bash\\n$ markdown.js\\n> a\\n\\n> b\\n\\n> c\\n^D\\n<blockquote><p>a</p><p>bundefined&gt; c</p></blockquote>\\n```\\n\\n``` bash\\n$ marked\\n> a\\n\\n> b\\n\\n> c\\n^D\\n<blockquote><p>a\\n\\n</p></blockquote>\\n<blockquote><p>b\\n\\n</p></blockquote>\\n<blockquote><p>c\\n</p></blockquote>\\n```\\n\\n- - -\\n\\n``` bash\\n$ markdown.pl\\n* hello\\n  * world\\n    how\\n\\n    are\\n    you\\n\\n  * today\\n* hi\\n^D\\n<ul>\\n<li><p>hello</p>\\n\\n<ul>\\n<li>world\\nhow</li>\\n</ul>\\n\\n<p>are\\nyou</p>\\n\\n<ul>\\n<li>today</li>\\n</ul></li>\\n<li>hi</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n  * world\\n    how\\n\\n    are\\n    you\\n\\n  * today\\n* hi\\n^D\\n<ul>\\n<li><p>hello</p>\\n<ul>\\n<li><p>world\\nhow</p>\\n<p>are\\nyou</p>\\n</li>\\n<li><p>today</p>\\n</li>\\n</ul>\\n</li>\\n<li>hi</li>\\n</ul>\\n```\\n\\n[end of broken.md]\\n[start of main.md]\\n[test]: http://google.com/ \\\"Google\\\"\\n\\n# A heading\\n\\nJust a note, I've found that I can't test my markdown parser vs others.\\nFor example, both markdown.js and showdown code blocks in lists wrong. They're\\nalso completely [inconsistent][test] with regards to paragraphs in list items.\\n\\nA link. Not anymore.\\n\\n<aside>This will make me fail the test because\\nmarkdown.js doesnt acknowledge arbitrary html blocks =/</aside>\\n\\n* List Item 1\\n\\n* List Item 2\\n  * New List Item 1\\n    Hi, this is a list item.\\n  * New List Item 2\\n    Another item\\n        Code goes here.\\n        Lots of it...\\n  * New List Item 3\\n    The last item\\n\\n* List Item 3\\nThe final item.\\n\\n* List Item 4\\nThe real final item.\\n\\nParagraph.\\n\\n> * bq Item 1\\n> * bq Item 2\\n>   * New bq Item 1\\n>   * New bq Item 2\\n>   Text here\\n\\n* * *\\n\\n> Another blockquote!\\n> I really need to get\\n> more creative with\\n> mockup text..\\n> markdown.js breaks here again\\n\\nAnother Heading\\n-------------\\n\\nHello *world*. Here is a [link](//hello).\\nAnd an image ![alt](src).\\n\\n    Code goes here.\\n    Lots of it...\\n\\n[end of main.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "hard_wrapped_paragraphs_with_list_like_lines.md",
        "tabs.md",
        "ordered_and_unordered_lists.md",
        "broken.md",
        "main.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "a8cfbb30-bb96-4b32-8c81-658aa113995d",
        "score": 0.01639344262295082,
        "payload": {
          "text": "In Markdown 1.0.0 and earlier. Version\n8. This line turns into a list item.\nBecause a hard-wrapped line in the\nmiddle of a paragraph looked like a\nlist item.\n\nHere's one with a bullet.\n* criminey.\n",
          "filepath": "data/repos/markedjs/marked-0.5/test/original/hard_wrapped_paragraphs_with_list_like_lines.md",
          "repo": "markedjs/marked",
          "version": "0.5",
          "chunk_index": 0
        }
      },
      {
        "id": "7772815f-0543-41b8-bf3f-bdaad6758100",
        "score": 0.016129032258064516,
        "payload": {
          "text": "+\tthis is a list item\n\tindented with tabs\n\n+   this is a list item\n    indented with spaces\n\nCode:\n\n\tthis code block is indented by one tab\n\nAnd:\n\n\t\tthis code block is indented by two tabs\n\nAnd:\n\n\t+\tthis is an example list item\n\t\tindented with tabs\n\t\n\t+   this is an example list item\n\t    indented with spaces\n",
          "filepath": "data/repos/markedjs/marked-0.5/test/original/tabs.md",
          "repo": "markedjs/marked",
          "version": "0.5",
          "chunk_index": 0
        }
      },
      {
        "id": "6520c18f-bfa0-4662-a770-5b59c3b0dca5",
        "score": 0.015873015873015872,
        "payload": {
          "text": "## Unordered\n\nAsterisks tight:\n\n*\tasterisk 1\n*\tasterisk 2\n*\tasterisk 3\n\n\nAsterisks loose:\n\n*\tasterisk 1\n\n*\tasterisk 2\n\n*\tasterisk 3\n\n* * *\n\nPluses tight:\n\n+\tPlus 1\n+\tPlus 2\n+\tPlus 3\n\n\nPluses loose:\n\n+\tPlus 1\n\n+\tPlus 2\n\n+\tPlus 3\n\n* * *\n\n\nMinuses tight:\n\n-\tMinus 1\n-\tMinus 2\n-\tMinus 3\n\n\nMinuses loose:\n\n-\tMinus 1\n\n-\tMinus 2\n\n-\tMinus 3\n\n\n## Ordered\n\nTight:\n\n1.\tFirst\n2.\tSecond\n3.\tThird\n\nand:\n\n1. One\n2. Two\n3. Three\n\n\nLoose using tabs:\n\n1.\tFirst\n\n2.\tSecond\n\n3.\tThird\n\nand using spaces:\n\n1. One\n\n2. Two\n\n3. Three\n\nMultiple paragraphs:\n\n1.\tItem 1, graf one.\n\n\tItem 2. graf two. The quick brown fox jumped over the lazy dog's\n\tback.\n\n2.\tItem 2.\n\n3.\tItem 3.\n\n\n\n## Nested\n\n*\tTab\n\t*\tTab\n\t\t*\tTab\n\nHere's another:\n\n1. First\n2. Second:\n\t* Fee\n\t* Fie\n\t* Foe\n3. Third\n\nSame thing but with paragraphs:\n\n1. First\n\n2. Second:\n\t* Fee\n\t* Fie\n\t* Foe\n\n3. Third\n\n\nThis was an error in Markdown 1.0.1:\n\n*\tthis\n\n\t*\tsub\n\n\tthat\n\nOrdered lists start from initial number:\n\n3. Three\n1. Four\n\nOrdered lists start from initial zero:\n\n0. Zero\n1. One\n",
          "filepath": "data/repos/markedjs/marked-0.5/test/original/ordered_and_unordered_lists.md",
          "repo": "markedjs/marked",
          "version": "0.5",
          "chunk_index": 0
        }
      },
      {
        "id": "078ebb39-e085-4e26-85a2-7b58e6a03b3d",
        "score": 0.015625,
        "payload": {
          "text": "# Markdown is broken\n\nI have a lot of scraps of markdown engine oddities that I've collected over the\nyears. What you see below is slightly messy, but it's what I've managed to\ncobble together to illustrate the differences between markdown engines, and\nwhy, if there ever is a markdown specification, it has to be absolutely\nthorough. There are a lot more of these little differences I have documented\nelsewhere. I know I will find them lingering on my disk one day, but until\nthen, I'll continue to add whatever strange nonsensical things I find.\n\nSome of these examples may only mention a particular engine compared to marked.\nHowever, the examples with markdown.pl could easily be swapped out for\ndiscount, upskirt, or markdown.js, and you would very easily see even more\ninconsistencies.\n\nA lot of this was written when I was very unsatisfied with the inconsistencies\nbetween markdown engines. Please excuse the frustration noticeable in my\nwriting.\n\n## Examples of markdown's \"stupid\" list parsing\n\n```\n$ markdown.pl\n\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n\n<ul>\n<li>item2</li>\n</ul>\n\n<p><p>text</p></li>\n</ul></p>\n```\n\n\n```\n$ marked\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n<ul>\n<li>item2</li>\n</ul>\n<p>text</p>\n</li>\n</ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\n```\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\n```\n$ marked\n* hello\n  > world\n^D\n<ul>\n<li>hello<blockquote>\n<p>world</p>\n</blockquote>\n</li>\n</ul>\n```\n\nAgain, which looks correct to you?\n\n- - -\n\nEXAMPLE:\n\n```\n$ markdown.pl\n* hello\n  * world\n    * hi\n          code\n^D\n<ul>\n<li>hello\n<ul>\n<li>world</li>\n<li>hi\n  code</li>\n</ul></li>\n</ul>\n```\n\nThe code isn't a code block even though it's after the bullet margin. I know,\nlets give it two more spaces, effectively making it 8 spaces past the bullet.\n\n```\n$ markdown.pl\n* hello\n  * world\n    * hi\n            code\n^D\n<ul>\n<li>hello\n<ul>\n<li>world</li>\n<li>hi\n    code</li>\n</ul></li>\n</ul>\n```\n\nAnd, it's still not a code block. Did you also notice that the 3rd item isn't\neven its own list? Markdown screws that up too because of its indentation\nunaware parsing.\n\n- - -\n\nLet's look at some more examples of markdown's list parsing:\n\n```\n$ markdown.pl\n\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n\n<ul>\n<li>item2</li>\n</ul>\n\n<p><p>text</p></li>\n</ul></p>\n```\n\nMisnested tags.\n\n\n```\n$ marked\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n<ul>\n<li>item2</li>\n</ul>\n<p>text</p>\n</li>\n</ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\n```\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\nMore misnested tags.\n\n\n```\n$ marked\n* hello\n  > world\n^D\n<ul>\n<li>hello<blockquote>\n<p>world</p>\n</blockquote>\n</li>\n</ul>\n```\n\nAgain, which looks correct to you?\n\n- - -\n\n# Why quality matters - Part 2\n\n``` bash\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\n``` bash\n$ sundown # upskirt\n* hello\n  > world\n^D\n<ul>\n<li>hello\n&gt; world</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n  > world\n^D\n<ul><li>hello <blockquote><p>world</p></blockquote></li></ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/23\n\n``` bash\n$ markdown.pl # upskirt/markdown.js/discount\n* hello\n      var a = 1;\n* world\n^D\n<ul>\n<li>hello\nvar a = 1;</li>\n<li>world</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n      var a = 1;\n* world\n^D\n<ul><li>hello\n<pre>code>var a = 1;</code></pre></li>\n<li>world</li></ul>\n```\n\nWhich looks more reasonable? Why shouldn't code blocks be able to appear in\nlist items in a sane way?\n\n- - -\n\n``` bash\n$ markdown.js\n<div>hello</div>\n\n<span>hello</span>\n^D\n<p>&lt;div&gt;hello&lt;/div&gt;</p>\n\n<p>&lt;span&gt;hello&lt;/span&gt;</p>\n```\n\n``` bash\n$ marked\n<div>hello</div>\n\n<span>hello</span>\n^D\n<div>hello</div>\n\n\n<p><span>hello</span>\n</p>\n```\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/27\n\n``` bash\n$ markdown.js\n[![an image](/image)](/link)\n^D\n<p><a href=\"/image)](/link\">![an image</a></p>\n```\n\n``` bash\n$ marked\n[![an image](/image)](/link)\n^D\n<p><a href=\"/link\"><img src=\"/image\" alt=\"an image\"></a>\n</p>\n```\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/24\n\n``` bash\n$ markdown.js\n> a\n\n> b\n\n> c\n^D\n<blockquote><p>a</p><p>bundefined&gt; c</p></blockquote>\n```\n\n``` bash\n$ marked\n> a\n\n> b\n\n> c\n^D\n<blockquote><p>a\n\n</p></blockquote>\n<blockquote><p>b\n\n</p></blockquote>\n<blockquote><p>c\n</p></blockquote>\n```\n\n- - -\n\n``` bash\n$ markdown.pl\n* hello\n  * world\n    how\n\n    are\n    you\n\n  * today\n* hi\n^D\n<ul>\n<li><p>hello</p>\n\n<ul>\n<li>world\nhow</li>\n</ul>\n\n<p>are\nyou</p>\n\n<ul>\n<li>today</li>\n</ul></li>\n<li>hi</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n  * world\n    how\n\n    are\n    you\n\n  * today\n* hi\n^D\n<ul>\n<li><p>hello</p>\n<ul>\n<li><p>world\nhow</p>\n<p>are\nyou</p>\n</li>\n<li><p>today</p>\n</li>\n</ul>\n</li>\n<li>hi</li>\n</ul>\n```\n",
          "filepath": "data/repos/markedjs/marked-0.5/docs/broken.md",
          "repo": "markedjs/marked",
          "version": "0.5",
          "chunk_index": 0
        }
      },
      {
        "id": "627fbad4-70ac-4c4b-84da-48686fafce8e",
        "score": 0.015384615384615385,
        "payload": {
          "text": "[test]: http://google.com/ \"Google\"\n\n# A heading\n\nJust a note, I've found that I can't test my markdown parser vs others.\nFor example, both markdown.js and showdown code blocks in lists wrong. They're\nalso completely [inconsistent][test] with regards to paragraphs in list items.\n\nA link. Not anymore.\n\n<aside>This will make me fail the test because\nmarkdown.js doesnt acknowledge arbitrary html blocks =/</aside>\n\n* List Item 1\n\n* List Item 2\n  * New List Item 1\n    Hi, this is a list item.\n  * New List Item 2\n    Another item\n        Code goes here.\n        Lots of it...\n  * New List Item 3\n    The last item\n\n* List Item 3\nThe final item.\n\n* List Item 4\nThe real final item.\n\nParagraph.\n\n> * bq Item 1\n> * bq Item 2\n>   * New bq Item 1\n>   * New bq Item 2\n>   Text here\n\n* * *\n\n> Another blockquote!\n> I really need to get\n> more creative with\n> mockup text..\n> markdown.js breaks here again\n\nAnother Heading\n-------------\n\nHello *world*. Here is a [link](//hello).\nAnd an image ![alt](src).\n\n    Code goes here.\n    Lots of it...\n",
          "filepath": "data/repos/markedjs/marked-0.5/test/new/main.md",
          "repo": "markedjs/marked",
          "version": "0.5",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "processing__p5.js-3068",
    "model_patch": "diff --git a/files.js b/files.js\n--- a/files.js\n+++ b/files.js\n@@ -235,7 +235,7 @@\n     'GET',\n     'text',\n     function(data) {\n-      var arr = data.match(/[^\\r\\n]+/g);\n+      var arr = data.split(/\\r\\n|\\r|\\n/);\n       for (var k in arr) {\n         ret[k] = arr[k];\n       }",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 161.25,
      "issue_embedding_time_ms": 161.25,
      "retrieval_time_ms_jina": 1.81,
      "retrieval_time_ms": 1.81,
      "total_retrieval_time_ms": 163.06,
      "generation_time_ms": 1882.79,
      "total_io_time_ms": 2045.84,
      "input_total_token_limit": null,
      "issue_text_tokens": 271,
      "vlm_tokens": 0,
      "retrieved_tokens": 16046,
      "prompt_template_tokens": 521,
      "total_input_prompt_tokens": 16838,
      "output_generated_tokens": 98,
      "total_io_tokens": 16936,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nloadStrings() omits empty lines\\nv0.6.1\\r\\n\\r\\nwhen loading a file containing empty lines, *processing* includes empty strings in the array for each empty line.\\r\\n\\r\\np5.js filters out empty lines.\\r\\n\\r\\nhere's a demo: https://codepen.io/Spongman/pen/wXVeYP\\r\\nthis loads and prints lines 24 onwards from the p5.js library, here: https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/addons/p5.dom.js\\r\\n\\r\\nthe text file looks like this:\\r\\n```\\r\\n * @main\\r\\n */\\r\\n\\r\\n(function(root, factory) {\\r\\n  if (typeof define === 'function' && define.amd)\\r\\n    define('p5.dom', ['p5'], function(p5) {\\r\\n      factory(p5);\\r\\n    });\\r\\n```\\r\\n\\r\\nbut the string array returned by `loadStrings` omits the empty lines:\\r\\n![image](https://user-images.githubusercontent.com/1088194/42413671-bb74b886-81d9-11e8-8434-f8c0a14ef113.png)\\r\\n\\r\\ni discovered this trying to work out why the line numbers for errors in glsl shaders loaded by `loadShader` don't match up with the lines in the source files. this bug makes it particularly frustrating trying to track down such errors.\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of files.js]\\n/**\\n * @module IO\\n * @submodule Input\\n * @for p5\\n * @requires core\\n */\\n\\n/* globals Request: false */\\n/* globals Headers: false */\\n\\n'use strict';\\n\\nvar p5 = require('../core/core');\\nrequire('whatwg-fetch');\\nrequire('es6-promise').polyfill();\\nvar fetchJsonp = require('fetch-jsonp');\\nrequire('../core/error_helpers');\\n\\n/**\\n * Loads a JSON file from a file or a URL, and returns an Object.\\n * Note that even if the JSON file contains an Array, an Object will be\\n * returned with index numbers as keys.\\n *\\n * This method is asynchronous, meaning it may not finish before the next\\n * line in your sketch is executed. JSONP is supported via a polyfill and you\\n * can pass in as the second argument an object with definitions of the json\\n * callback following the syntax specified <a href=\\\"https://github.com/camsong/\\n * fetch-jsonp\\\">here</a>.\\n *\\n * @method loadJSON\\n * @param  {String}        path       name of the file or url to load\\n * @param  {Object}        [jsonpOptions] options object for jsonp related settings\\n * @param  {String}        [datatype] \\\"json\\\" or \\\"jsonp\\\"\\n * @param  {function}      [callback] function to be executed after\\n *                                    loadJSON() completes, data is passed\\n *                                    in as first argument\\n * @param  {function}      [errorCallback] function to be executed if\\n *                                    there is an error, response is passed\\n *                                    in as first argument\\n * @return {Object|Array}             JSON data\\n * @example\\n *\\n * <p>Calling loadJSON() inside preload() guarantees to complete the\\n * operation before setup() and draw() are called.</p>\\n *\\n * <div><code>\\n * // Examples use USGS Earthquake API:\\n * //   https://earthquake.usgs.gov/fdsnws/event/1/#methods\\n * var earthquakes;\\n * function preload() {\\n *   // Get the most recent earthquake in the database\\n *   var url =\\n    'https://earthquake.usgs.gov/earthquakes/feed/v1.0/' +\\n *     'summary/all_day.geojson';\\n *   earthquakes = loadJSON(url);\\n * }\\n *\\n * function setup() {\\n *   noLoop();\\n * }\\n *\\n * function draw() {\\n *   background(200);\\n *   // Get the magnitude and name of the earthquake out of the loaded JSON\\n *   var earthquakeMag = earthquakes.features[0].properties.mag;\\n *   var earthquakeName = earthquakes.features[0].properties.place;\\n *   ellipse(width / 2, height / 2, earthquakeMag * 10, earthquakeMag * 10);\\n *   textAlign(CENTER);\\n *   text(earthquakeName, 0, height - 30, width, 30);\\n * }\\n * </code></div>\\n *\\n *\\n * <p>Outside of preload(), you may supply a callback function to handle the\\n * object:</p>\\n * <div><code>\\n * function setup() {\\n *   noLoop();\\n *   var url =\\n    'https://earthquake.usgs.gov/earthquakes/feed/v1.0/' +\\n *     'summary/all_day.geojson';\\n *   loadJSON(url, drawEarthquake);\\n * }\\n *\\n * function draw() {\\n *   background(200);\\n * }\\n *\\n * function drawEarthquake(earthquakes) {\\n *   // Get the magnitude and name of the earthquake out of the loaded JSON\\n *   var earthquakeMag = earthquakes.features[0].properties.mag;\\n *   var earthquakeName = earthquakes.features[0].properties.place;\\n *   ellipse(width / 2, height / 2, earthquakeMag * 10, earthquakeMag * 10);\\n *   textAlign(CENTER);\\n *   text(earthquakeName, 0, height - 30, width, 30);\\n * }\\n * </code></div>\\n *\\n * @alt\\n * 50x50 ellipse that changes from black to white depending on the current humidity\\n * 50x50 ellipse that changes from black to white depending on the current humidity\\n *\\n */\\np5.prototype.loadJSON = function() {\\n  var path = arguments[0];\\n  var callback;\\n  var errorCallback;\\n  var options;\\n\\n  var ret = {}; // object needed for preload\\n  var t = 'json';\\n\\n  // check for explicit data type argument\\n  for (var i = 1; i < arguments.length; i++) {\\n    var arg = arguments[i];\\n    if (typeof arg === 'string') {\\n      if (arg === 'jsonp' || arg === 'json') {\\n        t = arg;\\n      }\\n    } else if (typeof arg === 'function') {\\n      if (!callback) {\\n        callback = arg;\\n      } else {\\n        errorCallback = arg;\\n      }\\n    } else if (typeof arg === 'object' && arg.hasOwnProperty('jsonpCallback')) {\\n      t = 'jsonp';\\n      options = arg;\\n    }\\n  }\\n\\n  var self = this;\\n  this.httpDo(\\n    path,\\n    'GET',\\n    options,\\n    t,\\n    function(resp) {\\n      for (var k in resp) {\\n        ret[k] = resp[k];\\n      }\\n      if (typeof callback !== 'undefined') {\\n        callback(resp);\\n      }\\n\\n      self._decrementPreload();\\n    },\\n    errorCallback\\n  );\\n\\n  return ret;\\n};\\n\\n/**\\n * Reads the contents of a file and creates a String array of its individual\\n * lines. If the name of the file is used as the parameter, as in the above\\n * example, the file must be located in the sketch directory/folder.\\n * <br><br>\\n * Alternatively, the file maybe be loaded from anywhere on the local\\n * computer using an absolute path (something that starts with / on Unix and\\n * Linux, or a drive letter on Windows), or the filename parameter can be a\\n * URL for a file found on a network.\\n * <br><br>\\n * This method is asynchronous, meaning it may not finish before the next\\n * line in your sketch is executed.\\n *\\n * @method loadStrings\\n * @param  {String}   filename   name of the file or url to load\\n * @param  {function} [callback] function to be executed after loadStrings()\\n *                               completes, Array is passed in as first\\n *                               argument\\n * @param  {function} [errorCallback] function to be executed if\\n *                               there is an error, response is passed\\n *                               in as first argument\\n * @return {String[]}            Array of Strings\\n * @example\\n *\\n * <p>Calling loadStrings() inside preload() guarantees to complete the\\n * operation before setup() and draw() are called.</p>\\n *\\n * <div><code>\\n * var result;\\n * function preload() {\\n *   result = loadStrings('assets/test.txt');\\n * }\\n\\n * function setup() {\\n *   background(200);\\n *   var ind = floor(random(result.length));\\n *   text(result[ind], 10, 10, 80, 80);\\n * }\\n * </code></div>\\n *\\n * <p>Outside of preload(), you may supply a callback function to handle the\\n * object:</p>\\n *\\n * <div><code>\\n * function setup() {\\n *   loadStrings('assets/test.txt', pickString);\\n * }\\n *\\n * function pickString(result) {\\n *   background(200);\\n *   var ind = floor(random(result.length));\\n *   text(result[ind], 10, 10, 80, 80);\\n * }\\n * </code></div>\\n *\\n * @alt\\n * randomly generated text from a file, for example \\\"i smell like butter\\\"\\n * randomly generated text from a file, for example \\\"i have three feet\\\"\\n *\\n */\\np5.prototype.loadStrings = function() {\\n  var ret = [];\\n  var callback, errorCallback;\\n\\n  for (var i = 1; i < arguments.length; i++) {\\n    var arg = arguments[i];\\n    if (typeof arg === 'function') {\\n      if (typeof callback === 'undefined') {\\n        callback = arg;\\n      } else if (typeof errorCallback === 'undefined') {\\n        errorCallback = arg;\\n      }\\n    }\\n  }\\n\\n  var self = this;\\n  p5.prototype.httpDo.call(\\n    this,\\n    arguments[0],\\n    'GET',\\n    'text',\\n    function(data) {\\n      var arr = data.match(/[^\\\\r\\\\n]+/g);\\n      for (var k in arr) {\\n        ret[k] = arr[k];\\n      }\\n\\n      if (typeof callback !== 'undefined') {\\n        callback(ret);\\n      }\\n\\n      self._decrementPreload();\\n    },\\n    errorCallback\\n  );\\n\\n  return ret;\\n};\\n\\n/**\\n * <p>Reads the contents of a file or URL and creates a p5.Table object with\\n * its values. If a file is specified, it must be located in the sketch's\\n * \\\"data\\\" folder. The filename parameter can also be a URL to a file found\\n * online. By default, the file is assumed to be comma-separated (in CSV\\n * format). Table only looks for a header row if the 'header' option is\\n * included.</p>\\n *\\n * <p>Possible options include:\\n * <ul>\\n * <li>csv - parse the table as comma-separated values</li>\\n * <li>tsv - parse the table as tab-separated values</li>\\n * <li>header - this table has a header (title) row</li>\\n * </ul>\\n * </p>\\n *\\n * <p>When passing in multiple options, pass them in as separate parameters,\\n * seperated by commas. For example:\\n * <br><br>\\n * <code>\\n * loadTable('my_csv_file.csv', 'csv', 'header');\\n * </code>\\n * </p>\\n *\\n * <p> All files loaded and saved use UTF-8 encoding.</p>\\n *\\n * <p>This method is asynchronous, meaning it may not finish before the next\\n * line in your sketch is executed. Calling loadTable() inside preload()\\n * guarantees to complete the operation before setup() and draw() are called.\\n * <p>Outside of preload(), you may supply a callback function to handle the\\n * object:</p>\\n * </p>\\n *\\n * @method loadTable\\n * @param  {String}         filename   name of the file or URL to load\\n * @param  {String}         options  \\\"header\\\" \\\"csv\\\" \\\"tsv\\\"\\n * @param  {function}       [callback] function to be executed after\\n *                                     loadTable() completes. On success, the\\n *                                     Table object is passed in as the\\n *                                     first argument.\\n * @param  {function}  [errorCallback] function to be executed if\\n *                                     there is an error, response is passed\\n *                                     in as first argument\\n * @return {Object}                    Table object containing data\\n *\\n * @example\\n * <div class=\\\"norender\\\">\\n * <code>\\n * // Given the following CSV file called \\\"mammals.csv\\\"\\n * // located in the project's \\\"assets\\\" folder:\\n * //\\n * // id,species,name\\n * // 0,Capra hircus,Goat\\n * // 1,Panthera pardus,Leopard\\n * // 2,Equus zebra,Zebra\\n *\\n * var table;\\n *\\n * function preload() {\\n *   //my table is comma separated value \\\"csv\\\"\\n *   //and has a header specifying the columns labels\\n *   table = loadTable('assets/mammals.csv', 'csv', 'header');\\n *   //the file can be remote\\n *   //table = loadTable(\\\"http://p5js.org/reference/assets/mammals.csv\\\",\\n *   //                  \\\"csv\\\", \\\"header\\\");\\n * }\\n *\\n * function setup() {\\n *   //count the columns\\n *   print(table.getRowCount() + ' total rows in table');\\n *   print(table.getColumnCount() + ' total columns in table');\\n *\\n *   print(table.getColumn('name'));\\n *   //[\\\"Goat\\\", \\\"Leopard\\\", \\\"Zebra\\\"]\\n *\\n *   //cycle through the table\\n *   for (var r = 0; r < table.getRowCount(); r++)\\n *     for (var c = 0; c < table.getColumnCount(); c++) {\\n *       print(table.getString(r, c));\\n *     }\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * randomly generated text from a file, for example \\\"i smell like butter\\\"\\n * randomly generated text from a file, for example \\\"i have three feet\\\"\\n *\\n */\\n/**\\n * @method loadTable\\n * @param  {String}         filename\\n * @param  {function}       [callback]\\n * @param  {function}  [errorCallback]\\n * @return {Object}\\n */\\np5.prototype.loadTable = function(path) {\\n  var callback;\\n  var errorCallback;\\n  var options = [];\\n  var header = false;\\n  var ext = path.substring(path.lastIndexOf('.') + 1, path.length);\\n  var sep = ',';\\n  var separatorSet = false;\\n\\n  if (ext === 'tsv') {\\n    //Only need to check extension is tsv because csv is default\\n    sep = '\\\\t';\\n  }\\n\\n  for (var i = 1; i < arguments.length; i++) {\\n    if (typeof arguments[i] === 'function') {\\n      if (typeof callback === 'undefined') {\\n        callback = arguments[i];\\n      } else if (typeof errorCallback === 'undefined') {\\n        errorCallback = arguments[i];\\n      }\\n    } else if (typeof arguments[i] === 'string') {\\n      options.push(arguments[i]);\\n      if (arguments[i] === 'header') {\\n        header = true;\\n      }\\n      if (arguments[i] === 'csv') {\\n        if (separatorSet) {\\n          throw new Error('Cannot set multiple separator types.');\\n        } else {\\n          sep = ',';\\n          separatorSet = true;\\n        }\\n      } else if (arguments[i] === 'tsv') {\\n        if (separatorSet) {\\n          throw new Error('Cannot set multiple separator types.');\\n        } else {\\n          sep = '\\\\t';\\n          separatorSet = true;\\n        }\\n      }\\n    }\\n  }\\n\\n  var t = new p5.Table();\\n\\n  var self = this;\\n  this.httpDo(\\n    path,\\n    'GET',\\n    'text',\\n    function(resp) {\\n      var state = {};\\n\\n      // define constants\\n      var PRE_TOKEN = 0,\\n        MID_TOKEN = 1,\\n        POST_TOKEN = 2,\\n        POST_RECORD = 4;\\n\\n      var QUOTE = '\\\"',\\n        CR = '\\\\r',\\n        LF = '\\\\n';\\n\\n      var records = [];\\n      var offset = 0;\\n      var currentRecord = null;\\n      var currentChar;\\n\\n      var tokenBegin = function() {\\n        state.currentState = PRE_TOKEN;\\n        state.token = '';\\n      };\\n\\n      var tokenEnd = function() {\\n        currentRecord.push(state.token);\\n        tokenBegin();\\n      };\\n\\n      var recordBegin = function() {\\n        state.escaped = false;\\n        currentRecord = [];\\n        tokenBegin();\\n      };\\n\\n      var recordEnd = function() {\\n        state.currentState = POST_RECORD;\\n        records.push(currentRecord);\\n        currentRecord = null;\\n      };\\n\\n      for (;;) {\\n        currentChar = resp[offset++];\\n\\n        // EOF\\n        if (currentChar == null) {\\n          if (state.escaped) {\\n            throw new Error('Unclosed quote in file.');\\n          }\\n          if (currentRecord) {\\n            tokenEnd();\\n            recordEnd();\\n            break;\\n          }\\n        }\\n        if (currentRecord === null) {\\n          recordBegin();\\n        }\\n\\n        // Handle opening quote\\n        if (state.currentState === PRE_TOKEN) {\\n          if (currentChar === QUOTE) {\\n            state.escaped = true;\\n            state.currentState = MID_TOKEN;\\n            continue;\\n          }\\n          state.currentState = MID_TOKEN;\\n        }\\n\\n        // mid-token and escaped, look for sequences and end quote\\n        if (state.currentState === MID_TOKEN && state.escaped) {\\n          if (currentChar === QUOTE) {\\n            if (resp[offset] === QUOTE) {\\n              state.token += QUOTE;\\n              offset++;\\n            } else {\\n              state.escaped = false;\\n              state.currentState = POST_TOKEN;\\n            }\\n          } else if (currentChar === CR) {\\n            continue;\\n          } else {\\n            state.token += currentChar;\\n          }\\n          continue;\\n        }\\n\\n        // fall-through: mid-token or post-token, not escaped\\n        if (currentChar === CR) {\\n          if (resp[offset] === LF) {\\n            offset++;\\n          }\\n          tokenEnd();\\n          recordEnd();\\n        } else if (currentChar === LF) {\\n          tokenEnd();\\n          recordEnd();\\n        } else if (currentChar === sep) {\\n          tokenEnd();\\n        } else if (state.currentState === MID_TOKEN) {\\n          state.token += currentChar;\\n        }\\n      }\\n\\n      // set up column names\\n      if (header) {\\n        t.columns = records.shift();\\n      } else {\\n        for (i = 0; i < records[0].length; i++) {\\n          t.columns[i] = 'null';\\n        }\\n      }\\n      var row;\\n      for (i = 0; i < records.length; i++) {\\n        //Handles row of 'undefined' at end of some CSVs\\n        if (records[i].length === 1) {\\n          if (records[i][0] === 'undefined' || records[i][0] === '') {\\n            continue;\\n          }\\n        }\\n        row = new p5.TableRow();\\n        row.arr = records[i];\\n        row.obj = makeObject(records[i], t.columns);\\n        t.addRow(row);\\n      }\\n      if (typeof callback === 'function') {\\n        callback(t);\\n      }\\n\\n      self._decrementPreload();\\n    },\\n    function(err) {\\n      // Error handling\\n      p5._friendlyFileLoadError(2, path);\\n\\n      if (errorCallback) {\\n        errorCallback(err);\\n      } else {\\n        throw err;\\n      }\\n    }\\n  );\\n\\n  return t;\\n};\\n\\n// helper function to turn a row into a JSON object\\nfunction makeObject(row, headers) {\\n  var ret = {};\\n  headers = headers || [];\\n  if (typeof headers === 'undefined') {\\n    for (var j = 0; j < row.length; j++) {\\n      headers[j.toString()] = j;\\n    }\\n  }\\n  for (var i = 0; i < headers.length; i++) {\\n    var key = headers[i];\\n    var val = row[i];\\n    ret[key] = val;\\n  }\\n  return ret;\\n}\\n\\n/*global parseXML */\\np5.prototype.parseXML = function(two) {\\n  var one = new p5.XML();\\n  var i;\\n  if (two.children.length) {\\n    for (i = 0; i < two.children.length; i++) {\\n      var node = parseXML(two.children[i]);\\n      one.addChild(node);\\n    }\\n    one.setName(two.nodeName);\\n    one._setCont(two.textContent);\\n    one._setAttributes(two);\\n    for (var j = 0; j < one.children.length; j++) {\\n      one.children[j].parent = one;\\n    }\\n    return one;\\n  } else {\\n    one.setName(two.nodeName);\\n    one._setCont(two.textContent);\\n    one._setAttributes(two);\\n    return one;\\n  }\\n};\\n\\n/**\\n * Reads the contents of a file and creates an XML object with its values.\\n * If the name of the file is used as the parameter, as in the above example,\\n * the file must be located in the sketch directory/folder.\\n *\\n * Alternatively, the file maybe be loaded from anywhere on the local\\n * computer using an absolute path (something that starts with / on Unix and\\n * Linux, or a drive letter on Windows), or the filename parameter can be a\\n * URL for a file found on a network.\\n *\\n * This method is asynchronous, meaning it may not finish before the next\\n * line in your sketch is executed. Calling loadXML() inside preload()\\n * guarantees to complete the operation before setup() and draw() are called.\\n *\\n * Outside of preload(), you may supply a callback function to handle the\\n * object.\\n *\\n * @method loadXML\\n * @param  {String}   filename   name of the file or URL to load\\n * @param  {function} [callback] function to be executed after loadXML()\\n *                               completes, XML object is passed in as\\n *                               first argument\\n * @param  {function} [errorCallback] function to be executed if\\n *                               there is an error, response is passed\\n *                               in as first argument\\n * @return {Object}              XML object containing data\\n * @example\\n * <div class='norender'><code>\\n * // The following short XML file called \\\"mammals.xml\\\" is parsed\\n * // in the code below.\\n * //\\n * // <?xml version=\\\"1.0\\\"?>\\n * // &lt;mammals&gt;\\n * //   &lt;animal id=\\\"0\\\" species=\\\"Capra hircus\\\">Goat&lt;/animal&gt;\\n * //   &lt;animal id=\\\"1\\\" species=\\\"Panthera pardus\\\">Leopard&lt;/animal&gt;\\n * //   &lt;animal id=\\\"2\\\" species=\\\"Equus zebra\\\">Zebra&lt;/animal&gt;\\n * // &lt;/mammals&gt;\\n *\\n * var xml;\\n *\\n * function preload() {\\n *   xml = loadXML('assets/mammals.xml');\\n * }\\n *\\n * function setup() {\\n *   var children = xml.getChildren('animal');\\n *\\n *   for (var i = 0; i < children.length; i++) {\\n *     var id = children[i].getNum('id');\\n *     var coloring = children[i].getString('species');\\n *     var name = children[i].getContent();\\n *     print(id + ', ' + coloring + ', ' + name);\\n *   }\\n * }\\n *\\n * // Sketch prints:\\n * // 0, Capra hircus, Goat\\n * // 1, Panthera pardus, Leopard\\n * // 2, Equus zebra, Zebra\\n * </code></div>\\n *\\n * @alt\\n * no image displayed\\n *\\n */\\np5.prototype.loadXML = function() {\\n  var ret = {};\\n  var callback, errorCallback;\\n\\n  for (var i = 1; i < arguments.length; i++) {\\n    var arg = arguments[i];\\n    if (typeof arg === 'function') {\\n      if (typeof callback === 'undefined') {\\n        callback = arg;\\n      } else if (typeof errorCallback === 'undefined') {\\n        errorCallback = arg;\\n      }\\n    }\\n  }\\n\\n  var self = this;\\n  this.httpDo(\\n    arguments[0],\\n    'GET',\\n    'xml',\\n    function(xml) {\\n      for (var key in xml) {\\n        ret[key] = xml[key];\\n      }\\n      if (typeof callback !== 'undefined') {\\n        callback(ret);\\n      }\\n\\n      self._decrementPreload();\\n    },\\n    errorCallback\\n  );\\n\\n  return ret;\\n};\\n\\n/**\\n * Method for executing an HTTP GET request. If data type is not specified,\\n * p5 will try to guess based on the URL, defaulting to text. This is equivalent to\\n * calling <code>httpDo(path, 'GET')</code>.\\n *\\n * @method httpGet\\n * @param  {String}        path       name of the file or url to load\\n * @param  {String}        [datatype] \\\"json\\\", \\\"jsonp\\\", \\\"xml\\\", or \\\"text\\\"\\n * @param  {Object}        [data]     param data passed sent with request\\n * @param  {function}      [callback] function to be executed after\\n *                                    httpGet() completes, data is passed in\\n *                                    as first argument\\n * @param  {function}      [errorCallback] function to be executed if\\n *                                    there is an error, response is passed\\n *                                    in as first argument\\n * @example\\n * <div class='norender'><code>\\n * // Examples use USGS Earthquake API:\\n * //   https://earthquake.usgs.gov/fdsnws/event/1/#methods\\n * var earthquakes;\\n * function preload() {\\n *   // Get the most recent earthquake in the database\\n *   var url =\\n    'https://earthquake.usgs.gov/fdsnws/event/1/query?' +\\n *     'format=geojson&limit=1&orderby=time';\\n *   httpGet(url, 'jsonp', false, function(response) {\\n *     // when the HTTP request completes, populate the variable that holds the\\n *     // earthquake data used in the visualization.\\n *     earthquakes = response;\\n *   });\\n * }\\n *\\n * function draw() {\\n *   if (!earthquakes) {\\n *     // Wait until the earthquake data has loaded before drawing.\\n *     return;\\n *   }\\n *   background(200);\\n *   // Get the magnitude and name of the earthquake out of the loaded JSON\\n *   var earthquakeMag = earthquakes.features[0].properties.mag;\\n *   var earthquakeName = earthquakes.features[0].properties.place;\\n *   ellipse(width / 2, height / 2, earthquakeMag * 10, earthquakeMag * 10);\\n *   textAlign(CENTER);\\n *   text(earthquakeName, 0, height - 30, width, 30);\\n *   noLoop();\\n * }\\n * </code></div>\\n */\\np5.prototype.httpGet = function() {\\n  var args = Array.prototype.slice.call(arguments);\\n  args.splice(1, 0, 'GET');\\n  p5.prototype.httpDo.apply(this, args);\\n};\\n\\n/**\\n * Method for executing an HTTP POST request. If data type is not specified,\\n * p5 will try to guess based on the URL, defaulting to text. This is equivalent to\\n * calling <code>httpDo(path, 'POST')</code>.\\n *\\n * @method httpPost\\n * @param  {String}        path       name of the file or url to load\\n * @param  {String}        [datatype] \\\"json\\\", \\\"jsonp\\\", \\\"xml\\\", or \\\"text\\\".\\n *                                    If omitted, httpPost() will guess.\\n * @param  {Object}        [data]     param data passed sent with request\\n * @param  {function}      [callback] function to be executed after\\n *                                    httpPost() completes, data is passed in\\n *                                    as first argument\\n * @param  {function}      [errorCallback] function to be executed if\\n *                                    there is an error, response is passed\\n *                                    in as first argument\\n *\\n * @example\\n * <div>\\n * <code>\\n * // Examples use jsonplaceholder.typicode.com for a Mock Data API\\n *\\n * var url = 'https://jsonplaceholder.typicode.com/posts';\\n * var postData = { userId: 1, title: 'p5 Clicked!', body: 'p5.js is way cool.' };\\n *\\n * function setup() {\\n *   createCanvas(800, 800);\\n * }\\n *\\n * function mousePressed() {\\n *   // Pick new random color values\\n *   var r = random(255);\\n *   var g = random(255);\\n *   var b = random(255);\\n *\\n *   httpPost(url, 'json', postData, function(result) {\\n *     strokeWeight(2);\\n *     stroke(r, g, b);\\n *     fill(r, g, b, 127);\\n *     ellipse(mouseX, mouseY, 200, 200);\\n *     text(result.body, mouseX, mouseY);\\n *   });\\n * }\\n * </code>\\n * </div>\\n *\\n *\\n * <div><code>\\n * var url = 'https://invalidURL'; // A bad URL that will cause errors\\n * var postData = { title: 'p5 Clicked!', body: 'p5.js is way cool.' };\\n *\\n * function setup() {\\n *   createCanvas(800, 800);\\n * }\\n *\\n * function mousePressed() {\\n *   // Pick new random color values\\n *   var r = random(255);\\n *   var g = random(255);\\n *   var b = random(255);\\n *\\n *   httpPost(\\n *     url,\\n *     'json',\\n *     postData,\\n *     function(result) {\\n *       // ... won't be called\\n *     },\\n *     function(error) {\\n *       strokeWeight(2);\\n *       stroke(r, g, b);\\n *       fill(r, g, b, 127);\\n *       text(error.toString(), mouseX, mouseY);\\n *     }\\n *   );\\n * }\\n * </code></div>\\n *\\n */\\np5.prototype.httpPost = function() {\\n  var args = Array.prototype.slice.call(arguments);\\n  args.splice(1, 0, 'POST');\\n  p5.prototype.httpDo.apply(this, args);\\n};\\n\\n/**\\n * Method for executing an HTTP request. If data type is not specified,\\n * p5 will try to guess based on the URL, defaulting to text.<br><br>\\n * For more advanced use, you may also pass in the path as the first argument\\n * and a object as the second argument, the signature follows the one specified\\n * in the Fetch API specification.\\n *\\n * @method httpDo\\n * @param  {String}        path       name of the file or url to load\\n * @param  {String}        [method]   either \\\"GET\\\", \\\"POST\\\", or \\\"PUT\\\",\\n *                                    defaults to \\\"GET\\\"\\n * @param  {String}        [datatype] \\\"json\\\", \\\"jsonp\\\", \\\"xml\\\", or \\\"text\\\"\\n * @param  {Object}        [data]     param data passed sent with request\\n * @param  {function}      [callback] function to be executed after\\n *                                    httpGet() completes, data is passed in\\n *                                    as first argument\\n * @param  {function}      [errorCallback] function to be executed if\\n *                                    there is an error, response is passed\\n *                                    in as first argument\\n *\\n *\\n * @example\\n * <div>\\n * <code>\\n * // Examples use USGS Earthquake API:\\n[end of files.js]\\n[start of sample-linter.js]\\n'use strict';\\nconst eslint = require('eslint');\\n\\n// envs: ['eslint-samples/p5'],\\n\\nvar itemtypes = ['method', 'property'];\\nvar classes = ['p5', 'p5.dom'];\\n\\nvar dataDoc = require('../docs/reference/data.min.json');\\nvar globals = {};\\ndataDoc.classitems\\n  .filter(\\n    ci => classes.indexOf(ci.class) >= 0 && itemtypes.indexOf(ci.itemtype) >= 0\\n  )\\n  .forEach(ci => {\\n    globals[ci.name] = true;\\n  });\\n\\nObject.keys(dataDoc.consts).forEach(c => {\\n  globals[c] = true;\\n});\\n\\ndataDoc.classitems\\n  .find(ci => ci.name === 'keyCode' && ci.class === 'p5')\\n  .description.match(/[A-Z\\\\r\\\\n, _]{10,}/m)[0]\\n  .match(/[A-Z_]+/gm)\\n  .forEach(c => {\\n    globals[c] = true;\\n  });\\n\\nfunction splitLines(text) {\\n  var lines = [];\\n\\n  lines.lineFromIndex = function(index) {\\n    var lines = this;\\n    var lineCount = lines.length;\\n    for (var i = 0; i < lineCount; i++) {\\n      if (index < lines[i].index) return i - 1;\\n    }\\n    return lineCount - 1;\\n  };\\n\\n  var m;\\n  var reSplit = /(( *\\\\* ?)?.*)(?:\\\\r\\\\n|\\\\r|\\\\n)/g;\\n  while ((m = reSplit.exec(text)) != null) {\\n    if (m.index === reSplit.lastIndex) {\\n      reSplit.lastIndex++;\\n    }\\n\\n    lines.push({\\n      index: m.index,\\n      text: m[1],\\n      prefixLength: m[2] ? m[2].length : 0\\n    });\\n  }\\n\\n  return lines;\\n}\\n\\nvar EOL = require('os').EOL;\\n\\nvar userFunctions = [\\n  'draw',\\n  'setup',\\n  'preload',\\n  'mousePressed',\\n  'mouseDragged',\\n  'mouseMoved',\\n  'mouseReleased',\\n  'mouseClicked',\\n  'mouseWheel',\\n  'doubleClicked',\\n  'windowResized',\\n  'touchStarted',\\n  'touchMoved',\\n  'touchEnded',\\n  'deviceMoved',\\n  'deviceTurned',\\n  'deviceShaken',\\n  'keyPressed',\\n  'keyReleased',\\n  'keyTyped'\\n];\\nvar userFunctionTrailer =\\n  EOL + userFunctions.map(s => 'typeof ' + s + ';').join(EOL) + EOL;\\n\\nmodule.exports = {\\n  environments: {\\n    p5: {\\n      globals: globals\\n    }\\n  },\\n  processors: {\\n    '.js': {\\n      supportsAutofix: true,\\n      preprocess: function(text) {\\n        this.lines = splitLines(text);\\n\\n        var m;\\n        var comments = [];\\n\\n        var reComment = /\\\\/\\\\*\\\\*(?:.|\\\\r|\\\\n)*?\\\\*\\\\//g;\\n        while ((m = reComment.exec(text)) != null) {\\n          var value = m[0];\\n          comments.push({\\n            value: value,\\n            range: [m.index, m.index + value.length]\\n          });\\n        }\\n\\n        var samples = (this.samples = []);\\n\\n        for (var i = 0; i < comments.length; i++) {\\n          var comment = comments[i];\\n          var commentText = comment.value;\\n\\n          var re = /(<code[^>]*>\\\\s*(?:\\\\r\\\\n|\\\\r|\\\\n))((?:.|\\\\r|\\\\n)*?)<\\\\/code>/gm;\\n          while ((m = re.exec(commentText)) != null) {\\n            var code = m[2];\\n            if (!code) continue;\\n            code = code.replace(/^ *\\\\* ?/gm, '');\\n\\n            samples.push({\\n              comment: comment,\\n              index: m.index + m[1].length,\\n              code: code\\n            });\\n          }\\n        }\\n\\n        return samples.map(s => s.code + userFunctionTrailer);\\n      },\\n\\n      postprocess: function(sampleMessages, filename) {\\n        var problems = [];\\n\\n        for (var i = 0; i < sampleMessages.length; i++) {\\n          var messages = sampleMessages[i];\\n          var sample = this.samples[i];\\n          if (!messages.length) continue;\\n\\n          var sampleLines;\\n\\n          var sampleIndex = sample.comment.range[0] + sample.index;\\n          var sampleLine = this.lines.lineFromIndex(sampleIndex);\\n\\n          for (var j = 0; j < messages.length; j++) {\\n            var msg = messages[j];\\n\\n            var fix = msg.fix;\\n            if (fix) {\\n              if (!sampleLines) {\\n                sampleLines = splitLines(sample.code);\\n              }\\n\\n              var fixLine1 = sampleLines.lineFromIndex(fix.range[0]);\\n              var fixLine2 = sampleLines.lineFromIndex(fix.range[1] - 1);\\n              if (fixLine1 !== fixLine2) {\\n                // TODO: handle multi-line fixes\\n                fix.range = [0, 0];\\n                fix.text = '';\\n              } else {\\n                var line = this.lines[sampleLine + fixLine1];\\n\\n                var fixColumn1 = fix.range[0] - sampleLines[fixLine1].index;\\n                var fixColumn2 = fix.range[1] - sampleLines[fixLine1].index;\\n\\n                fix.range[0] = line.index + line.prefixLength + fixColumn1;\\n                fix.range[1] = line.index + line.prefixLength + fixColumn2;\\n              }\\n            }\\n\\n            var startLine = msg.line + sampleLine;\\n            msg.column += this.lines[startLine].prefixLength;\\n            msg.line = startLine;\\n\\n            if (msg.endLine) {\\n              var endLine = msg.endLine + sampleLine;\\n              msg.endColumn += this.lines[endLine].prefixLength;\\n              msg.endLine = endLine;\\n            }\\n\\n            msg.message = msg.message\\n              .replace(/\\\\r/g, '\\\\\\\\r')\\n              .replace(/\\\\n|\\\\u23CE/g, '\\\\\\\\n');\\n\\n            problems.push(msg);\\n          }\\n        }\\n        return problems;\\n      }\\n    }\\n  }\\n};\\n\\nfunction eslintFiles(opts, filesSrc) {\\n  opts = opts || {\\n    outputFile: false,\\n    quiet: false,\\n    maxWarnings: -1,\\n    envs: ['eslint-samples/p5', 'amd'],\\n    format: 'unix'\\n  };\\n\\n  if (filesSrc.length === 0) {\\n    console.warn('Could not find any files to validate');\\n    return true;\\n  }\\n\\n  const formatter = eslint.CLIEngine.getFormatter(opts.format);\\n  if (!formatter) {\\n    console.warn(`Could not find formatter ${opts.format}`);\\n    return false;\\n  }\\n\\n  const engine = new eslint.CLIEngine(opts);\\n  engine.addPlugin('eslint-samples', module.exports);\\n\\n  let report = engine.executeOnFiles(filesSrc);\\n\\n  if (opts.fix) {\\n    eslint.CLIEngine.outputFixes(report);\\n  }\\n\\n  let results = report.results;\\n  if (opts.quiet) {\\n    results = eslint.CLIEngine.getErrorResults(results);\\n  }\\n\\n  return { report, output: formatter(results) };\\n}\\n\\nmodule.exports.eslintFiles = eslintFiles;\\n\\nif (!module.parent) {\\n  var result = eslintFiles(null, process.argv.slice(2));\\n  console.log(result.output);\\n  process.exit(result.report.errorCount === 0 ? 0 : 1);\\n}\\n\\n[end of sample-linter.js]\\n[start of p5.RendererGL.js]\\np5.RendererGL.prototype.setStrokeShader = function(s) {\\n  if (this.curStrokeShader !== s) {\\n    // only do setup etc. if shader is actually new.\\n    this.curStrokeShader = s;\\n    // safe to do this multiple times;\\n    // init() will bail early if has already been run.\\n    this.curStrokeShader.init();\\n    //this.curStrokeShader.useProgram();\\n  }\\n  // always return this.curLineShader, even if no change was made.\\n  return this.curStrokeShader;\\n};\\n\\n/*\\n * shaders are created and cached on a per-renderer basis,\\n * on the grounds that each renderer will have its own gl context\\n * and the shader must be valid in that context.\\n *\\n *\\n */\\n\\np5.RendererGL.prototype._useLightShader = function() {\\n  if (!this.curFillShader || !this.curFillShader.isLightShader()) {\\n    this.setFillShader(this._getLightShader());\\n  }\\n  return this.curFillShader;\\n};\\n\\np5.RendererGL.prototype._useColorShader = function() {\\n  // looking at the code within the glsl files, I'm not really\\n  // sure why these are two different shaders. but, they are,\\n  // and if we're drawing in retain mode but the shader is the\\n  // immediate mode one, we need to switch.\\n\\n  // TODO: what if curFillShader is _any_ other shader?\\n  if (\\n    !this.curFillShader ||\\n    this.curFillShader === this._defaultImmediateModeShader\\n  ) {\\n    // there are different immediate mode and retain mode color shaders.\\n    // if we're using the immediate mode one, we need to switch to\\n    // one that works for retain mode.\\n    this.setFillShader(this._getColorShader());\\n  }\\n  return this.curFillShader;\\n};\\n\\np5.RendererGL.prototype._useImmediateModeShader = function() {\\n  // TODO: what if curFillShader is _any_ other shader?\\n  if (!this.curFillShader || this.curFillShader === this._defaultColorShader) {\\n    // this is the fill/stroke shader for retain mode.\\n    // must switch to immediate mode shader before drawing!\\n    this.setFillShader(this._getImmediateModeShader());\\n    // note that if we're using the texture shader...\\n    // this shouldn't change. :)\\n  }\\n  return this.curFillShader;\\n};\\n\\np5.RendererGL.prototype._getLightShader = function() {\\n  if (!this._defaultLightShader) {\\n    if (this.attributes.perPixelLighting) {\\n      this._defaultLightShader = new p5.Shader(\\n        this,\\n        defaultShaders.phongVert,\\n        defaultShaders.phongFrag\\n      );\\n    } else {\\n      this._defaultLightShader = new p5.Shader(\\n        this,\\n        defaultShaders.lightVert,\\n        defaultShaders.lightTextureFrag\\n      );\\n    }\\n  }\\n  //this.drawMode = constants.FILL;\\n  return this._defaultLightShader;\\n};\\n\\np5.RendererGL.prototype._getImmediateModeShader = function() {\\n  if (!this._defaultImmediateModeShader) {\\n    this._defaultImmediateModeShader = new p5.Shader(\\n      this,\\n      defaultShaders.immediateVert,\\n      defaultShaders.vertexColorFrag\\n    );\\n  }\\n  //this.drawMode = constants.FILL;\\n  return this._defaultImmediateModeShader;\\n};\\n\\np5.RendererGL.prototype._getNormalShader = function() {\\n  if (!this._defaultNormalShader) {\\n    this._defaultNormalShader = new p5.Shader(\\n      this,\\n      defaultShaders.normalVert,\\n      defaultShaders.normalFrag\\n    );\\n  }\\n  //this.drawMode = constants.FILL;\\n  return this._defaultNormalShader;\\n};\\n\\np5.RendererGL.prototype._getColorShader = function() {\\n  if (!this._defaultColorShader) {\\n    this._defaultColorShader = new p5.Shader(\\n      this,\\n      defaultShaders.normalVert,\\n      defaultShaders.basicFrag\\n    );\\n  }\\n  //this.drawMode = constants.FILL;\\n  return this._defaultColorShader;\\n};\\n\\np5.RendererGL.prototype._getLineShader = function() {\\n  if (!this._defaultLineShader) {\\n    this._defaultLineShader = new p5.Shader(\\n      this,\\n      defaultShaders.lineVert,\\n      defaultShaders.lineFrag\\n    );\\n  }\\n  //this.drawMode = constants.STROKE;\\n  return this._defaultLineShader;\\n};\\n\\np5.RendererGL.prototype._getEmptyTexture = function() {\\n  if (!this._emptyTexture) {\\n    // a plain white texture RGBA, full alpha, single pixel.\\n    var im = new p5.Image(1, 1);\\n    im.set(0, 0, 255);\\n    this._emptyTexture = new p5.Texture(this, im);\\n  }\\n  return this._emptyTexture;\\n};\\n\\np5.RendererGL.prototype.getTexture = function(img) {\\n  var checkSource = function(element) {\\n    return element.src === img;\\n  };\\n  //this.drawMode = constants.TEXTURE;\\n  var tex = this.textures.find(checkSource);\\n  if (!tex) {\\n    tex = new p5.Texture(this, img);\\n    this.textures.push(tex);\\n  }\\n\\n  return tex;\\n};\\n\\n//Binds a buffer to the drawing context\\n//when passed more than two arguments it also updates or initializes\\n//the data associated with the buffer\\np5.RendererGL.prototype._bindBuffer = function(\\n  buffer,\\n  target,\\n  values,\\n  type,\\n  usage\\n) {\\n  this.GL.bindBuffer(target, buffer);\\n  if (values !== undefined) {\\n    var data = new type(values);\\n    this.GL.bufferData(target, data, usage);\\n  }\\n};\\n\\n///////////////////////////////\\n//// UTILITY FUNCTIONS\\n//////////////////////////////\\n/**\\n * turn a two dimensional array into one dimensional array\\n * @private\\n * @param  {Array} arr 2-dimensional array\\n * @return {Array}     1-dimensional array\\n * [[1, 2, 3],[4, 5, 6]] -> [1, 2, 3, 4, 5, 6]\\n */\\np5.RendererGL.prototype._flatten = function(arr) {\\n  //when empty, return empty\\n  if (arr.length === 0) {\\n    return [];\\n  } else if (arr.length > 20000) {\\n    //big models , load slower to avoid stack overflow\\n    //faster non-recursive flatten via axelduch\\n    //stackoverflow.com/questions/27266550/how-to-flatten-nested-array-in-javascript\\n    var toString = Object.prototype.toString;\\n    var arrayTypeStr = '[object Array]';\\n    var result = [];\\n    var nodes = arr.slice();\\n    var node;\\n    node = nodes.pop();\\n    do {\\n      if (toString.call(node) === arrayTypeStr) {\\n        nodes.push.apply(nodes, node);\\n      } else {\\n        result.push(node);\\n      }\\n    } while (nodes.length && (node = nodes.pop()) !== undefined);\\n    result.reverse(); // we reverse result to restore the original order\\n    return result;\\n  } else {\\n    //otherwise if model within limits for browser\\n    //use faster recursive loading\\n    return [].concat.apply([], arr);\\n  }\\n};\\n\\n/**\\n * turn a p5.Vector Array into a one dimensional number array\\n * @private\\n * @param  {p5.Vector[]} arr  an array of p5.Vector\\n * @return {Number[]}     a one dimensional array of numbers\\n * [p5.Vector(1, 2, 3), p5.Vector(4, 5, 6)] ->\\n * [1, 2, 3, 4, 5, 6]\\n */\\np5.RendererGL.prototype._vToNArray = function(arr) {\\n  return this._flatten(\\n    arr.map(function(item) {\\n      return [item.x, item.y, item.z];\\n    })\\n  );\\n};\\n\\nmodule.exports = p5.RendererGL;\\n[end of p5.RendererGL.js]\\n[start of error_helpers.js]\\n/**\\n * @for p5\\n * @requires core\\n */\\n\\n'use strict';\\n\\nvar p5 = require('./core');\\nvar constants = require('./constants');\\n\\nif (typeof IS_MINIFIED !== 'undefined') {\\n  p5._validateParameters = p5._friendlyFileLoadError = function() {};\\n} else {\\n  var doFriendlyWelcome = false; // TEMP until we get it all working LM\\n  // for parameter validation\\n  var dataDoc = require('../../docs/reference/data.json');\\n  var arrDoc = JSON.parse(JSON.stringify(dataDoc));\\n\\n  // -- Borrowed from jQuery 1.11.3 --\\n  var class2type = {};\\n  var toString = class2type.toString;\\n  var names = [\\n    'Boolean',\\n    'Number',\\n    'String',\\n    'Function',\\n    'Array',\\n    'Date',\\n    'RegExp',\\n    'Object',\\n    'Error'\\n  ];\\n  for (var n = 0; n < names.length; n++) {\\n    class2type['[object ' + names[n] + ']'] = names[n].toLowerCase();\\n  }\\n  var getType = function(obj) {\\n    if (obj == null) {\\n      return obj + '';\\n    }\\n    return typeof obj === 'object' || typeof obj === 'function'\\n      ? class2type[toString.call(obj)] || 'object'\\n      : typeof obj;\\n  };\\n\\n  // -- End borrow --\\n\\n  var friendlyWelcome = function() {\\n    // p5.js brand - magenta: #ED225D\\n    //var astrixBgColor = 'transparent';\\n    //var astrixTxtColor = '#ED225D';\\n    //var welcomeBgColor = '#ED225D';\\n    //var welcomeTextColor = 'white';\\n    console.log(\\n      '    _ \\\\n' +\\n        ' /\\\\\\\\| |/\\\\\\\\ \\\\n' +\\n        \\\" \\\\\\\\ ` ' /  \\\\n\\\" +\\n        ' / , . \\\\\\\\  \\\\n' +\\n        ' \\\\\\\\/|_|\\\\\\\\/ ' +\\n        '\\\\n\\\\n> p5.js says: Welcome! ' +\\n        'This is your friendly debugger. ' +\\n        'To turn me off switch to using \\u201cp5.min.js\\u201d.'\\n    );\\n  };\\n\\n  /**\\n   * Prints out a fancy, colorful message to the console log\\n   *\\n   * @private\\n   * @param  {String}               message the words to be said\\n   * @param  {String}               func    the name of the function to link\\n   * @param  {Number|String} color   CSS color string or error type\\n   *\\n   * @return console logs\\n   */\\n  // Wrong number of params, undefined param, wrong type\\n  var FILE_LOAD = 3;\\n  var ERR_PARAMS = 3;\\n  // p5.js blue, p5.js orange, auto dark green; fallback p5.js darkened magenta\\n  // See testColors below for all the color codes and names\\n  var typeColors = ['#2D7BB6', '#EE9900', '#4DB200', '#C83C00'];\\n  var report = function(message, func, color) {\\n    if (doFriendlyWelcome) {\\n      friendlyWelcome();\\n      doFriendlyWelcome = false;\\n    }\\n    if ('undefined' === getType(color)) {\\n      color = '#B40033'; // dark magenta\\n    } else if (getType(color) === 'number') {\\n      // Type to color\\n      color = typeColors[color];\\n    }\\n    if (func.substring(0, 4) === 'load') {\\n      console.log(\\n        '> p5.js says: ' +\\n          message +\\n          '[https://github.com/processing/p5.js/wiki/Local-server]'\\n      );\\n    } else {\\n      console.log(\\n        '> p5.js says: ' +\\n          message +\\n          ' [http://p5js.org/reference/#p5/' +\\n          func +\\n          ']'\\n      );\\n    }\\n  };\\n\\n  var errorCases = {\\n    '0': {\\n      fileType: 'image',\\n      method: 'loadImage',\\n      message: ' hosting the image online,'\\n    },\\n    '1': {\\n      fileType: 'XML file',\\n      method: 'loadXML'\\n    },\\n    '2': {\\n      fileType: 'table file',\\n      method: 'loadTable'\\n    },\\n    '3': {\\n      fileType: 'text file',\\n      method: 'loadStrings'\\n    },\\n    '4': {\\n      fileType: 'font',\\n      method: 'loadFont',\\n      message: ' hosting the font online,'\\n    }\\n  };\\n  p5._friendlyFileLoadError = function(errorType, filePath) {\\n    var errorInfo = errorCases[errorType];\\n    var message =\\n      'It looks like there was a problem' +\\n      ' loading your ' +\\n      errorInfo.fileType +\\n      '.' +\\n      ' Try checking if the file path [' +\\n      filePath +\\n      '] is correct,' +\\n      (errorInfo.message || '') +\\n      ' or running a local server.';\\n    report(message, errorInfo.method, FILE_LOAD);\\n  };\\n\\n  var docCache = {};\\n  var builtinTypes = [\\n    'number',\\n    'string',\\n    'boolean',\\n    'constant',\\n    'function',\\n    'any',\\n    'integer'\\n  ];\\n\\n  // validateParameters() helper functions:\\n  // lookupParamDoc() for querying data.json\\n  var lookupParamDoc = function(func) {\\n    var queryResult = arrDoc.classitems.filter(function(x) {\\n      return x.name === func;\\n    });\\n    // different JSON structure for funct with multi-format\\n    var overloads = [];\\n    if (queryResult[0].hasOwnProperty('overloads')) {\\n      for (var i = 0; i < queryResult[0].overloads.length; i++) {\\n        overloads.push(queryResult[0].overloads[i].params);\\n      }\\n    } else {\\n      overloads.push(queryResult[0].params);\\n    }\\n\\n    var mapConstants = {};\\n    var maxParams = 0;\\n    overloads.forEach(function(formats) {\\n      if (maxParams < formats.length) {\\n        maxParams = formats.length;\\n      }\\n      formats.forEach(function(format) {\\n        format.types = format.type.split('|').map(function ct(type) {\\n          // array\\n          if (type.substr(type.length - 2, 2) === '[]') {\\n            return {\\n              name: type,\\n              array: ct(type.substr(0, type.length - 2))\\n            };\\n          }\\n\\n          var lowerType = type.toLowerCase();\\n\\n          // contant\\n          if (lowerType === 'constant') {\\n            var constant;\\n            if (mapConstants.hasOwnProperty(format.name)) {\\n              constant = mapConstants[format.name];\\n            } else {\\n              // parse possible constant values from description\\n              var myRe = /either\\\\s+(?:[A-Z0-9_]+\\\\s*,?\\\\s*(?:or)?\\\\s*)+/g;\\n              var values = {};\\n              var names = [];\\n\\n              constant = mapConstants[format.name] = {\\n                values: values,\\n                names: names\\n              };\\n\\n              var myArray = myRe.exec(format.description);\\n              if (func === 'endShape' && format.name === 'mode') {\\n                values[constants.CLOSE] = true;\\n                names.push('CLOSE');\\n              } else {\\n                var match = myArray[0];\\n                var reConst = /[A-Z0-9_]+/g;\\n                var matchConst;\\n                while ((matchConst = reConst.exec(match)) !== null) {\\n                  var name = matchConst[0];\\n                  if (constants.hasOwnProperty(name)) {\\n                    values[constants[name]] = true;\\n                    names.push(name);\\n                  }\\n                }\\n              }\\n            }\\n            return {\\n              name: type,\\n              builtin: lowerType,\\n              names: constant.names,\\n              values: constant.values\\n            };\\n          }\\n\\n          // function\\n          if (lowerType.substr(0, 'function'.length) === 'function') {\\n            lowerType = 'function';\\n          }\\n          // builtin\\n          if (builtinTypes.indexOf(lowerType) >= 0) {\\n            return { name: type, builtin: lowerType };\\n          }\\n\\n          // p5 class type\\n          var t = window;\\n          type.split('.').forEach(function(p) {\\n            t = t && t[p];\\n          });\\n          if (t) {\\n            return { name: type, prototype: t };\\n          }\\n\\n          return { name: type, type: lowerType };\\n        });\\n      });\\n    });\\n    return {\\n      overloads: overloads,\\n      maxParams: maxParams\\n    };\\n  };\\n\\n  var testParamType = function(param, type) {\\n    var isArray = param instanceof Array;\\n    if (type.array && isArray) {\\n      for (var i = 0; i < param.length; i++) {\\n        if (!testParamType(param[i], type.array)) {\\n          return false;\\n        }\\n      }\\n      return true;\\n    } else if (type.prototype) {\\n      return param instanceof type.prototype;\\n    } else if (type.builtin) {\\n      switch (type.builtin) {\\n        case 'number':\\n          return typeof param === 'number' || (!!param && !isNaN(param));\\n        case 'integer':\\n          return (\\n            (typeof param === 'number' || (!!param && !isNaN(param))) &&\\n            Number(param) === Math.floor(param)\\n          );\\n        case 'boolean':\\n        case 'any':\\n          return true;\\n        case 'array':\\n          return isArray;\\n        case 'string':\\n          return typeof param === 'number' || typeof param === 'string';\\n        case 'constant':\\n          return type.values.hasOwnProperty(param);\\n        case 'function':\\n          return param instanceof Function;\\n      }\\n    }\\n\\n    return typeof param === type.t;\\n  };\\n\\n  // testType() for non-object type parameter validation\\n  // Returns true if PASS, false if FAIL\\n  var testParamTypes = function(param, types) {\\n    for (var i = 0; i < types.length; i++) {\\n      if (testParamType(param, types[i])) {\\n        return true;\\n      }\\n    }\\n    return false;\\n  };\\n\\n  var testParamFormat = function(args, formats) {\\n    var errorArray = [];\\n    for (var p = 0; p < formats.length; p++) {\\n      var arg = args[p];\\n      var format = formats[p];\\n      var argType = typeof arg;\\n      if ('undefined' === argType || null === arg) {\\n        if (format.optional !== true) {\\n          errorArray.push({\\n            type: 'EMPTY_VAR',\\n            position: p,\\n            format: format\\n          });\\n        }\\n      } else if (!testParamTypes(arg, format.types)) {\\n        errorArray.push({\\n          type: 'WRONG_TYPE',\\n          position: p,\\n          format: format,\\n          arg: arg\\n        });\\n      }\\n    }\\n    return errorArray;\\n  };\\n\\n  // function for generating console.log() msg\\n  p5._friendlyParamError = function(errorObj, func) {\\n    var message;\\n\\n    function formatType() {\\n      var format = errorObj.format;\\n      return format.types\\n        .map(function(type) {\\n          return type.names ? type.names.join('|') : type.name;\\n        })\\n        .join('|');\\n    }\\n\\n    switch (errorObj.type) {\\n      case 'EMPTY_VAR':\\n        message =\\n          func +\\n          '() was expecting ' +\\n          formatType() +\\n          ' for parameter #' +\\n          errorObj.position +\\n          ' (zero-based index), received an empty variable instead.' +\\n          ' If not intentional, this is often a problem with scope:' +\\n          ' [https://p5js.org/examples/data-variable-scope.html]';\\n        break;\\n      case 'WRONG_TYPE':\\n        var arg = errorObj.arg;\\n        var argType = arg instanceof Array ? 'array' : arg.name || typeof arg;\\n        message =\\n          func +\\n          '() was expecting ' +\\n          formatType() +\\n          ' for parameter #' +\\n          errorObj.position +\\n          ' (zero-based index), received ' +\\n          argType +\\n          ' instead';\\n        break;\\n      case 'WRONG_ARGUMENT_COUNT':\\n        message =\\n          func +\\n          '() was expecting ' +\\n          errorObj.maxParams +\\n          ' arguments, but received ' +\\n          errorObj.argCount;\\n        break;\\n    }\\n\\n    if (message) {\\n      try {\\n        var re = /Function\\\\.validateParameters.*[\\\\r\\\\n].*[\\\\r\\\\n].*\\\\(([^)]*)/;\\n        var location = re.exec(new Error().stack)[1];\\n        if (location) {\\n          message += ' at ' + location;\\n        }\\n      } catch (err) {}\\n\\n      report(message + '.', func, ERR_PARAMS);\\n    }\\n  };\\n\\n  /**\\n   * Validates parameters\\n   * param  {String}               func    the name of the function\\n   * param  {Array}                args    user input arguments\\n   *\\n   * example:\\n   *  var a;\\n   *  ellipse(10,10,a,5);\\n   * console ouput:\\n   *  \\\"It looks like ellipse received an empty variable in spot #2.\\\"\\n   *\\n   * example:\\n   *  ellipse(10,\\\"foo\\\",5,5);\\n   * console output:\\n   *  \\\"ellipse was expecting a number for parameter #1,\\n   *           received \\\"foo\\\" instead.\\\"\\n   */\\n  p5._validateParameters = function validateParameters(func, args) {\\n    if (p5.disableFriendlyErrors) {\\n      return; // skip FES\\n    }\\n\\n    var docs = docCache[func] || (docCache[func] = lookupParamDoc(func));\\n    var errorArray = [];\\n    var minErrCount = 999999;\\n    var overloads = docs.overloads;\\n    for (var i = 0; i < overloads.length; i++) {\\n      var arrError = testParamFormat(args, overloads[i]);\\n      // see if this is the format with min number of err\\n      if (minErrCount > arrError.length) {\\n        minErrCount = arrError.length;\\n        errorArray = arrError;\\n      }\\n      if (arrError.length === 0) {\\n        break; // no error\\n      }\\n    }\\n\\n    if (!errorArray.length && args.length > docs.maxParams) {\\n      errorArray.push({\\n        type: 'WRONG_ARGUMENT_COUNT',\\n        argCount: args.length,\\n        maxParams: docs.maxParams\\n      });\\n    }\\n\\n    // generate err msg\\n    for (var n = 0; n < errorArray.length; n++) {\\n      p5._friendlyParamError(errorArray[n], func);\\n    }\\n  };\\n\\n  /**\\n   * Prints out all the colors in the color pallete with white text.\\n   * For color blindness testing.\\n   */\\n  /* function testColors() {\\n    var str = 'A box of biscuits, a box of mixed biscuits and a biscuit mixer';\\n    report(str, 'print', '#ED225D'); // p5.js magenta\\n    report(str, 'print', '#2D7BB6'); // p5.js blue\\n    report(str, 'print', '#EE9900'); // p5.js orange\\n    report(str, 'print', '#A67F59'); // p5.js light brown\\n    report(str, 'print', '#704F21'); // p5.js gold\\n    report(str, 'print', '#1CC581'); // auto cyan\\n    report(str, 'print', '#FF6625'); // auto orange\\n    report(str, 'print', '#79EB22'); // auto green\\n    report(str, 'print', '#B40033'); // p5.js darkened magenta\\n    report(str, 'print', '#084B7F'); // p5.js darkened blue\\n    report(str, 'print', '#945F00'); // p5.js darkened orange\\n    report(str, 'print', '#6B441D'); // p5.js darkened brown\\n    report(str, 'print', '#2E1B00'); // p5.js darkened gold\\n    report(str, 'print', '#008851'); // auto dark cyan\\n    report(str, 'print', '#C83C00'); // auto dark orange\\n    report(str, 'print', '#4DB200'); // auto dark green\\n  } */\\n\\n  p5.prototype._validateParameters = p5.validateParameters;\\n}\\n\\n// This is a lazily-defined list of p5 symbols that may be\\n// misused by beginners at top-level code, outside of setup/draw. We'd like\\n// to detect these errors and help the user by suggesting they move them\\n// into setup/draw.\\n//\\n// For more details, see https://github.com/processing/p5.js/issues/1121.\\nvar misusedAtTopLevelCode = null;\\nvar FAQ_URL =\\n  'https://github.com/processing/p5.js/wiki/' +\\n  'Frequently-Asked-Questions' +\\n  '#why-cant-i-assign-variables-using-p5-functions-and-' +\\n  'variables-before-setup';\\n\\nvar defineMisusedAtTopLevelCode = function() {\\n  var uniqueNamesFound = {};\\n\\n  var getSymbols = function(obj) {\\n    return Object.getOwnPropertyNames(obj)\\n      .filter(function(name) {\\n        if (name[0] === '_') {\\n          return false;\\n        }\\n        if (name in uniqueNamesFound) {\\n          return false;\\n        }\\n\\n        uniqueNamesFound[name] = true;\\n\\n        return true;\\n      })\\n      .map(function(name) {\\n        var type;\\n\\n        if (typeof obj[name] === 'function') {\\n          type = 'function';\\n        } else if (name === name.toUpperCase()) {\\n          type = 'constant';\\n        } else {\\n          type = 'variable';\\n        }\\n\\n        return { name: name, type: type };\\n      });\\n  };\\n\\n  misusedAtTopLevelCode = [].concat(\\n    getSymbols(p5.prototype),\\n    // At present, p5 only adds its constants to p5.prototype during\\n    // construction, which may not have happened at the time a\\n    // ReferenceError is thrown, so we'll manually add them to our list.\\n    getSymbols(require('./constants'))\\n  );\\n\\n  // This will ultimately ensure that we report the most specific error\\n  // possible to the user, e.g. advising them about HALF_PI instead of PI\\n  // when their code misuses the former.\\n  misusedAtTopLevelCode.sort(function(a, b) {\\n    return b.name.length - a.name.length;\\n  });\\n};\\n\\nvar helpForMisusedAtTopLevelCode = function(e, log) {\\n  if (!log) {\\n    log = console.log.bind(console);\\n  }\\n\\n  if (!misusedAtTopLevelCode) {\\n    defineMisusedAtTopLevelCode();\\n  }\\n\\n  // If we find that we're logging lots of false positives, we can\\n  // uncomment the following code to avoid displaying anything if the\\n  // user's code isn't likely to be using p5's global mode. (Note that\\n  // setup/draw are more likely to be defined due to JS function hoisting.)\\n  //\\n  //if (!('setup' in window || 'draw' in window)) {\\n  //  return;\\n  //}\\n\\n  misusedAtTopLevelCode.some(function(symbol) {\\n    // Note that while just checking for the occurrence of the\\n    // symbol name in the error message could result in false positives,\\n    // a more rigorous test is difficult because different browsers\\n    // log different messages, and the format of those messages may\\n    // change over time.\\n    //\\n    // For example, if the user uses 'PI' in their code, it may result\\n    // in any one of the following messages:\\n    //\\n    //   * 'PI' is undefined                           (Microsoft Edge)\\n    //   * ReferenceError: PI is undefined             (Firefox)\\n    //   * Uncaught ReferenceError: PI is not defined  (Chrome)\\n\\n    if (e.message && e.message.match('\\\\\\\\W?' + symbol.name + '\\\\\\\\W') !== null) {\\n      log(\\n        \\\"Did you just try to use p5.js's \\\" +\\n          symbol.name +\\n          (symbol.type === 'function' ? '() ' : ' ') +\\n          symbol.type +\\n          '? If so, you may want to ' +\\n          \\\"move it into your sketch's setup() function.\\\\n\\\\n\\\" +\\n          'For more details, see: ' +\\n          FAQ_URL\\n      );\\n      return true;\\n    }\\n  });\\n};\\n\\n// Exposing this primarily for unit testing.\\np5.prototype._helpForMisusedAtTopLevelCode = helpForMisusedAtTopLevelCode;\\n\\nif (document.readyState !== 'complete') {\\n  window.addEventListener('error', helpForMisusedAtTopLevelCode, false);\\n\\n  // Our job is only to catch ReferenceErrors that are thrown when\\n  // global (non-instance mode) p5 APIs are used at the top-level\\n  // scope of a file, so we'll unbind our error listener now to make\\n  // sure we don't log false positives later.\\n  window.addEventListener('load', function() {\\n    window.removeEventListener('error', helpForMisusedAtTopLevelCode, false);\\n  });\\n}\\n\\nmodule.exports = p5;\\n\\n[end of error_helpers.js]\\n[start of loading.js]\\n/**\\n * @module Shape\\n * @submodule 3D Models\\n * @for p5\\n * @requires core\\n * @requires p5.Geometry\\n */\\n\\n'use strict';\\n\\nvar p5 = require('../core/core');\\nrequire('./p5.Geometry');\\n\\n/**\\n * Load a 3d model from an OBJ file.\\n * <br><br>\\n * One of the limitations of the OBJ format is that it doesn't have a built-in\\n * sense of scale. This means that models exported from different programs might\\n * be very different sizes. If your model isn't displaying, try calling\\n * loadModel() with the normalized parameter set to true. This will resize the\\n * model to a scale appropriate for p5. You can also make additional changes to\\n * the final size of your model with the scale() function.\\n *\\n * @method loadModel\\n * @param  {String} path              Path of the model to be loaded\\n * @param  {Boolean} normalize        If true, scale the model to a\\n *                                      standardized size when loading\\n * @param  {function(p5.Geometry)} [successCallback] Function to be called\\n *                                     once the model is loaded. Will be passed\\n *                                     the 3D model object.\\n * @param  {function(Event)} [failureCallback] called with event error if\\n *                                         the image fails to load.\\n * @return {p5.Geometry} the p5.Geometry object\\n *\\n * @example\\n * <div>\\n * <code>\\n * //draw a spinning teapot\\n * var teapot;\\n *\\n * function preload() {\\n *   teapot = loadModel('assets/teapot.obj');\\n * }\\n *\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(200);\\n *   rotateX(frameCount * 0.01);\\n *   rotateY(frameCount * 0.01);\\n *   model(teapot);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * Vertically rotating 3-d teapot with red, green and blue gradient.\\n */\\n/**\\n * @method loadModel\\n * @param  {String} path\\n * @param  {function(p5.Geometry)} [successCallback]\\n * @param  {function(Event)} [failureCallback]\\n * @return {p5.Geometry} the p5.Geometry object\\n */\\np5.prototype.loadModel = function(path) {\\n  var normalize;\\n  var successCallback;\\n  var failureCallback;\\n  if (typeof arguments[1] === 'boolean') {\\n    normalize = arguments[1];\\n    successCallback = arguments[2];\\n    failureCallback = arguments[3];\\n  } else {\\n    normalize = false;\\n    successCallback = arguments[1];\\n    failureCallback = arguments[2];\\n  }\\n\\n  var model = new p5.Geometry();\\n  model.gid = path + '|' + normalize;\\n  this.loadStrings(\\n    path,\\n    function(strings) {\\n      parseObj(model, strings);\\n\\n      if (normalize) {\\n        model.normalize();\\n      }\\n\\n      if (typeof successCallback === 'function') {\\n        successCallback(model);\\n      }\\n    }.bind(this),\\n    failureCallback\\n  );\\n\\n  return model;\\n};\\n\\n/**\\n * Parse OBJ lines into model. For reference, this is what a simple model of a\\n * square might look like:\\n *\\n * v -0.5 -0.5 0.5\\n * v -0.5 -0.5 -0.5\\n * v -0.5 0.5 -0.5\\n * v -0.5 0.5 0.5\\n *\\n * f 4 3 2 1\\n */\\nfunction parseObj(model, lines) {\\n  // OBJ allows a face to specify an index for a vertex (in the above example),\\n  // but it also allows you to specify a custom combination of vertex, UV\\n  // coordinate, and vertex normal. So, \\\"3/4/3\\\" would mean, \\\"use vertex 3 with\\n  // UV coordinate 4 and vertex normal 3\\\". In WebGL, every vertex with different\\n  // parameters must be a different vertex, so loadedVerts is used to\\n  // temporarily store the parsed vertices, normals, etc., and indexedVerts is\\n  // used to map a specific combination (keyed on, for example, the string\\n  // \\\"3/4/3\\\"), to the actual index of the newly created vertex in the final\\n  // object.\\n  var loadedVerts = {\\n    v: [],\\n    vt: [],\\n    vn: []\\n  };\\n  var indexedVerts = {};\\n\\n  for (var line = 0; line < lines.length; ++line) {\\n    // Each line is a separate object (vertex, face, vertex normal, etc)\\n    // For each line, split it into tokens on whitespace. The first token\\n    // describes the type.\\n    var tokens = lines[line].trim().split(/\\\\b\\\\s+/);\\n\\n    if (tokens.length > 0) {\\n      if (tokens[0] === 'v' || tokens[0] === 'vn') {\\n        // Check if this line describes a vertex or vertex normal.\\n        // It will have three numeric parameters.\\n        var vertex = new p5.Vector(\\n          parseFloat(tokens[1]),\\n          parseFloat(tokens[2]),\\n          parseFloat(tokens[3])\\n        );\\n        loadedVerts[tokens[0]].push(vertex);\\n      } else if (tokens[0] === 'vt') {\\n        // Check if this line describes a texture coordinate.\\n        // It will have two numeric parameters.\\n        var texVertex = [parseFloat(tokens[1]), parseFloat(tokens[2])];\\n        loadedVerts[tokens[0]].push(texVertex);\\n      } else if (tokens[0] === 'f') {\\n        // Check if this line describes a face.\\n        // OBJ faces can have more than three points. Triangulate points.\\n        for (var tri = 3; tri < tokens.length; ++tri) {\\n          var face = [];\\n\\n          var vertexTokens = [1, tri - 1, tri];\\n\\n          for (var tokenInd = 0; tokenInd < vertexTokens.length; ++tokenInd) {\\n            // Now, convert the given token into an index\\n            var vertString = tokens[vertexTokens[tokenInd]];\\n            var vertIndex = 0;\\n\\n            // TODO: Faces can technically use negative numbers to refer to the\\n            // previous nth vertex. I haven't seen this used in practice, but\\n            // it might be good to implement this in the future.\\n\\n            if (indexedVerts[vertString] !== undefined) {\\n              vertIndex = indexedVerts[vertString];\\n            } else {\\n              var vertParts = vertString.split('/');\\n              for (var i = 0; i < vertParts.length; i++) {\\n                vertParts[i] = parseInt(vertParts[i]) - 1;\\n              }\\n\\n              vertIndex = indexedVerts[vertString] = model.vertices.length;\\n              model.vertices.push(loadedVerts.v[vertParts[0]].copy());\\n              if (loadedVerts.vt[vertParts[1]]) {\\n                model.uvs.push(loadedVerts.vt[vertParts[1]].slice());\\n              } else {\\n                model.uvs.push([0, 0]);\\n              }\\n\\n              if (loadedVerts.vn[vertParts[2]]) {\\n                model.vertexNormals.push(loadedVerts.vn[vertParts[2]].copy());\\n              }\\n            }\\n\\n            face.push(vertIndex);\\n          }\\n\\n          if (\\n            face[0] !== face[1] &&\\n            face[0] !== face[2] &&\\n            face[1] !== face[2]\\n          ) {\\n            model.faces.push(face);\\n          }\\n        }\\n      }\\n    }\\n  }\\n  // If the model doesn't have normals, compute the normals\\n  if (model.vertexNormals.length === 0) {\\n    model.computeNormals();\\n  }\\n\\n  return model;\\n}\\n\\n/**\\n * Render a 3d model to the screen.\\n *\\n * @method model\\n * @param  {p5.Geometry} model Loaded 3d model to be rendered\\n * @example\\n * <div>\\n * <code>\\n * //draw a spinning teapot\\n * var teapot;\\n *\\n * function preload() {\\n *   teapot = loadModel('assets/teapot.obj');\\n * }\\n *\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(200);\\n *   rotateX(frameCount * 0.01);\\n *   rotateY(frameCount * 0.01);\\n *   model(teapot);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * Vertically rotating 3-d teapot with red, green and blue gradient.\\n *\\n */\\np5.prototype.model = function(model) {\\n  if (model.vertices.length > 0) {\\n    if (!this._renderer.geometryInHash(model.gid)) {\\n      model._makeTriangleEdges();\\n      this._renderer._edgesToVertices(model);\\n      this._renderer.createBuffers(model.gid, model);\\n    }\\n\\n    this._renderer.drawBuffers(model.gid);\\n  }\\n};\\n\\nmodule.exports = p5;\\n\\n[end of loading.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "files.js",
        "sample-linter.js",
        "p5.RendererGL.js",
        "error_helpers.js",
        "loading.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "27ed5b0d-1b01-494b-bfcb-2402bb64e611",
        "score": 0.01639344262295082,
        "payload": {
          "text": "/**\n * @module IO\n * @submodule Input\n * @for p5\n * @requires core\n */\n\n/* globals Request: false */\n/* globals Headers: false */\n\n'use strict';\n\nvar p5 = require('../core/core');\nrequire('whatwg-fetch');\nrequire('es6-promise').polyfill();\nvar fetchJsonp = require('fetch-jsonp');\nrequire('../core/error_helpers');\n\n/**\n * Loads a JSON file from a file or a URL, and returns an Object.\n * Note that even if the JSON file contains an Array, an Object will be\n * returned with index numbers as keys.\n *\n * This method is asynchronous, meaning it may not finish before the next\n * line in your sketch is executed. JSONP is supported via a polyfill and you\n * can pass in as the second argument an object with definitions of the json\n * callback following the syntax specified <a href=\"https://github.com/camsong/\n * fetch-jsonp\">here</a>.\n *\n * @method loadJSON\n * @param  {String}        path       name of the file or url to load\n * @param  {Object}        [jsonpOptions] options object for jsonp related settings\n * @param  {String}        [datatype] \"json\" or \"jsonp\"\n * @param  {function}      [callback] function to be executed after\n *                                    loadJSON() completes, data is passed\n *                                    in as first argument\n * @param  {function}      [errorCallback] function to be executed if\n *                                    there is an error, response is passed\n *                                    in as first argument\n * @return {Object|Array}             JSON data\n * @example\n *\n * <p>Calling loadJSON() inside preload() guarantees to complete the\n * operation before setup() and draw() are called.</p>\n *\n * <div><code>\n * // Examples use USGS Earthquake API:\n * //   https://earthquake.usgs.gov/fdsnws/event/1/#methods\n * var earthquakes;\n * function preload() {\n *   // Get the most recent earthquake in the database\n *   var url =\n    'https://earthquake.usgs.gov/earthquakes/feed/v1.0/' +\n *     'summary/all_day.geojson';\n *   earthquakes = loadJSON(url);\n * }\n *\n * function setup() {\n *   noLoop();\n * }\n *\n * function draw() {\n *   background(200);\n *   // Get the magnitude and name of the earthquake out of the loaded JSON\n *   var earthquakeMag = earthquakes.features[0].properties.mag;\n *   var earthquakeName = earthquakes.features[0].properties.place;\n *   ellipse(width / 2, height / 2, earthquakeMag * 10, earthquakeMag * 10);\n *   textAlign(CENTER);\n *   text(earthquakeName, 0, height - 30, width, 30);\n * }\n * </code></div>\n *\n *\n * <p>Outside of preload(), you may supply a callback function to handle the\n * object:</p>\n * <div><code>\n * function setup() {\n *   noLoop();\n *   var url =\n    'https://earthquake.usgs.gov/earthquakes/feed/v1.0/' +\n *     'summary/all_day.geojson';\n *   loadJSON(url, drawEarthquake);\n * }\n *\n * function draw() {\n *   background(200);\n * }\n *\n * function drawEarthquake(earthquakes) {\n *   // Get the magnitude and name of the earthquake out of the loaded JSON\n *   var earthquakeMag = earthquakes.features[0].properties.mag;\n *   var earthquakeName = earthquakes.features[0].properties.place;\n *   ellipse(width / 2, height / 2, earthquakeMag * 10, earthquakeMag * 10);\n *   textAlign(CENTER);\n *   text(earthquakeName, 0, height - 30, width, 30);\n * }\n * </code></div>\n *\n * @alt\n * 50x50 ellipse that changes from black to white depending on the current humidity\n * 50x50 ellipse that changes from black to white depending on the current humidity\n *\n */\np5.prototype.loadJSON = function() {\n  var path = arguments[0];\n  var callback;\n  var errorCallback;\n  var options;\n\n  var ret = {}; // object needed for preload\n  var t = 'json';\n\n  // check for explicit data type argument\n  for (var i = 1; i < arguments.length; i++) {\n    var arg = arguments[i];\n    if (typeof arg === 'string') {\n      if (arg === 'jsonp' || arg === 'json') {\n        t = arg;\n      }\n    } else if (typeof arg === 'function') {\n      if (!callback) {\n        callback = arg;\n      } else {\n        errorCallback = arg;\n      }\n    } else if (typeof arg === 'object' && arg.hasOwnProperty('jsonpCallback')) {\n      t = 'jsonp';\n      options = arg;\n    }\n  }\n\n  var self = this;\n  this.httpDo(\n    path,\n    'GET',\n    options,\n    t,\n    function(resp) {\n      for (var k in resp) {\n        ret[k] = resp[k];\n      }\n      if (typeof callback !== 'undefined') {\n        callback(resp);\n      }\n\n      self._decrementPreload();\n    },\n    errorCallback\n  );\n\n  return ret;\n};\n\n/**\n * Reads the contents of a file and creates a String array of its individual\n * lines. If the name of the file is used as the parameter, as in the above\n * example, the file must be located in the sketch directory/folder.\n * <br><br>\n * Alternatively, the file maybe be loaded from anywhere on the local\n * computer using an absolute path (something that starts with / on Unix and\n * Linux, or a drive letter on Windows), or the filename parameter can be a\n * URL for a file found on a network.\n * <br><br>\n * This method is asynchronous, meaning it may not finish before the next\n * line in your sketch is executed.\n *\n * @method loadStrings\n * @param  {String}   filename   name of the file or url to load\n * @param  {function} [callback] function to be executed after loadStrings()\n *                               completes, Array is passed in as first\n *                               argument\n * @param  {function} [errorCallback] function to be executed if\n *                               there is an error, response is passed\n *                               in as first argument\n * @return {String[]}            Array of Strings\n * @example\n *\n * <p>Calling loadStrings() inside preload() guarantees to complete the\n * operation before setup() and draw() are called.</p>\n *\n * <div><code>\n * var result;\n * function preload() {\n *   result = loadStrings('assets/test.txt');\n * }\n\n * function setup() {\n *   background(200);\n *   var ind = floor(random(result.length));\n *   text(result[ind], 10, 10, 80, 80);\n * }\n * </code></div>\n *\n * <p>Outside of preload(), you may supply a callback function to handle the\n * object:</p>\n *\n * <div><code>\n * function setup() {\n *   loadStrings('assets/test.txt', pickString);\n * }\n *\n * function pickString(result) {\n *   background(200);\n *   var ind = floor(random(result.length));\n *   text(result[ind], 10, 10, 80, 80);\n * }\n * </code></div>\n *\n * @alt\n * randomly generated text from a file, for example \"i smell like butter\"\n * randomly generated text from a file, for example \"i have three feet\"\n *\n */\np5.prototype.loadStrings = function() {\n  var ret = [];\n  var callback, errorCallback;\n\n  for (var i = 1; i < arguments.length; i++) {\n    var arg = arguments[i];\n    if (typeof arg === 'function') {\n      if (typeof callback === 'undefined') {\n        callback = arg;\n      } else if (typeof errorCallback === 'undefined') {\n        errorCallback = arg;\n      }\n    }\n  }\n\n  var self = this;\n  p5.prototype.httpDo.call(\n    this,\n    arguments[0],\n    'GET',\n    'text',\n    function(data) {\n      var arr = data.match(/[^\\r\\n]+/g);\n      for (var k in arr) {\n        ret[k] = arr[k];\n      }\n\n      if (typeof callback !== 'undefined') {\n        callback(ret);\n      }\n\n      self._decrementPreload();\n    },\n    errorCallback\n  );\n\n  return ret;\n};\n\n/**\n * <p>Reads the contents of a file or URL and creates a p5.Table object with\n * its values. If a file is specified, it must be located in the sketch's\n * \"data\" folder. The filename parameter can also be a URL to a file found\n * online. By default, the file is assumed to be comma-separated (in CSV\n * format). Table only looks for a header row if the 'header' option is\n * included.</p>\n *\n * <p>Possible options include:\n * <ul>\n * <li>csv - parse the table as comma-separated values</li>\n * <li>tsv - parse the table as tab-separated values</li>\n * <li>header - this table has a header (title) row</li>\n * </ul>\n * </p>\n *\n * <p>When passing in multiple options, pass them in as separate parameters,\n * seperated by commas. For example:\n * <br><br>\n * <code>\n * loadTable('my_csv_file.csv', 'csv', 'header');\n * </code>\n * </p>\n *\n * <p> All files loaded and saved use UTF-8 encoding.</p>\n *\n * <p>This method is asynchronous, meaning it may not finish before the next\n * line in your sketch is executed. Calling loadTable() inside preload()\n * guarantees to complete the operation before setup() and draw() are called.\n * <p>Outside of preload(), you may supply a callback function to handle the\n * object:</p>\n * </p>\n *\n * @method loadTable\n * @param  {String}         filename   name of the file or URL to load\n * @param  {String}         options  \"header\" \"csv\" \"tsv\"\n * @param  {function}       [callback] function to be executed after\n *                                     loadTable() completes. On success, the\n *                                     Table object is passed in as the\n *                                     first argument.\n * @param  {function}  [errorCallback] function to be executed if\n *                                     there is an error, response is passed\n *                                     in as first argument\n * @return {Object}                    Table object containing data\n *\n * @example\n * <div class=\"norender\">\n * <code>\n * // Given the following CSV file called \"mammals.csv\"\n * // located in the project's \"assets\" folder:\n * //\n * // id,species,name\n * // 0,Capra hircus,Goat\n * // 1,Panthera pardus,Leopard\n * // 2,Equus zebra,Zebra\n *\n * var table;\n *\n * function preload() {\n *   //my table is comma separated value \"csv\"\n *   //and has a header specifying the columns labels\n *   table = loadTable('assets/mammals.csv', 'csv', 'header');\n *   //the file can be remote\n *   //table = loadTable(\"http://p5js.org/reference/assets/mammals.csv\",\n *   //                  \"csv\", \"header\");\n * }\n *\n * function setup() {\n *   //count the columns\n *   print(table.getRowCount() + ' total rows in table');\n *   print(table.getColumnCount() + ' total columns in table');\n *\n *   print(table.getColumn('name'));\n *   //[\"Goat\", \"Leopard\", \"Zebra\"]\n *\n *   //cycle through the table\n *   for (var r = 0; r < table.getRowCount(); r++)\n *     for (var c = 0; c < table.getColumnCount(); c++) {\n *       print(table.getString(r, c));\n *     }\n * }\n * </code>\n * </div>\n *\n * @alt\n * randomly generated text from a file, for example \"i smell like butter\"\n * randomly generated text from a file, for example \"i have three feet\"\n *\n */\n/**\n * @method loadTable\n * @param  {String}         filename\n * @param  {function}       [callback]\n * @param  {function}  [errorCallback]\n * @return {Object}\n */\np5.prototype.loadTable = function(path) {\n  var callback;\n  var errorCallback;\n  var options = [];\n  var header = false;\n  var ext = path.substring(path.lastIndexOf('.') + 1, path.length);\n  var sep = ',';\n  var separatorSet = false;\n\n  if (ext === 'tsv') {\n    //Only need to check extension is tsv because csv is default\n    sep = '\\t';\n  }\n\n  for (var i = 1; i < arguments.length; i++) {\n    if (typeof arguments[i] === 'function') {\n      if (typeof callback === 'undefined') {\n        callback = arguments[i];\n      } else if (typeof errorCallback === 'undefined') {\n        errorCallback = arguments[i];\n      }\n    } else if (typeof arguments[i] === 'string') {\n      options.push(arguments[i]);\n      if (arguments[i] === 'header') {\n        header = true;\n      }\n      if (arguments[i] === 'csv') {\n        if (separatorSet) {\n          throw new Error('Cannot set multiple separator types.');\n        } else {\n          sep = ',';\n          separatorSet = true;\n        }\n      } else if (arguments[i] === 'tsv') {\n        if (separatorSet) {\n          throw new Error('Cannot set multiple separator types.');\n        } else {\n          sep = '\\t';\n          separatorSet = true;\n        }\n      }\n    }\n  }\n\n  var t = new p5.Table();\n\n  var self = this;\n  this.httpDo(\n    path,\n    'GET',\n    'text',\n    function(resp) {\n      var state = {};\n\n      // define constants\n      var PRE_TOKEN = 0,\n        MID_TOKEN = 1,\n        POST_TOKEN = 2,\n        POST_RECORD = 4;\n\n      var QUOTE = '\"',\n        CR = '\\r',\n        LF = '\\n';\n\n      var records = [];\n      var offset = 0;\n      var currentRecord = null;\n      var currentChar;\n\n      var tokenBegin = function() {\n        state.currentState = PRE_TOKEN;\n        state.token = '';\n      };\n\n      var tokenEnd = function() {\n        currentRecord.push(state.token);\n        tokenBegin();\n      };\n\n      var recordBegin = function() {\n        state.escaped = false;\n        currentRecord = [];\n        tokenBegin();\n      };\n\n      var recordEnd = function() {\n        state.currentState = POST_RECORD;\n        records.push(currentRecord);\n        currentRecord = null;\n      };\n\n      for (;;) {\n        currentChar = resp[offset++];\n\n        // EOF\n        if (currentChar == null) {\n          if (state.escaped) {\n            throw new Error('Unclosed quote in file.');\n          }\n          if (currentRecord) {\n            tokenEnd();\n            recordEnd();\n            break;\n          }\n        }\n        if (currentRecord === null) {\n          recordBegin();\n        }\n\n        // Handle opening quote\n        if (state.currentState === PRE_TOKEN) {\n          if (currentChar === QUOTE) {\n            state.escaped = true;\n            state.currentState = MID_TOKEN;\n            continue;\n          }\n          state.currentState = MID_TOKEN;\n        }\n\n        // mid-token and escaped, look for sequences and end quote\n        if (state.currentState === MID_TOKEN && state.escaped) {\n          if (currentChar === QUOTE) {\n            if (resp[offset] === QUOTE) {\n              state.token += QUOTE;\n              offset++;\n            } else {\n              state.escaped = false;\n              state.currentState = POST_TOKEN;\n            }\n          } else if (currentChar === CR) {\n            continue;\n          } else {\n            state.token += currentChar;\n          }\n          continue;\n        }\n\n        // fall-through: mid-token or post-token, not escaped\n        if (currentChar === CR) {\n          if (resp[offset] === LF) {\n            offset++;\n          }\n          tokenEnd();\n          recordEnd();\n        } else if (currentChar === LF) {\n          tokenEnd();\n          recordEnd();\n        } else if (currentChar === sep) {\n          tokenEnd();\n        } else if (state.currentState === MID_TOKEN) {\n          state.token += currentChar;\n        }\n      }\n\n      // set up column names\n      if (header) {\n        t.columns = records.shift();\n      } else {\n        for (i = 0; i < records[0].length; i++) {\n          t.columns[i] = 'null';\n        }\n      }\n      var row;\n      for (i = 0; i < records.length; i++) {\n        //Handles row of 'undefined' at end of some CSVs\n        if (records[i].length === 1) {\n          if (records[i][0] === 'undefined' || records[i][0] === '') {\n            continue;\n          }\n        }\n        row = new p5.TableRow();\n        row.arr = records[i];\n        row.obj = makeObject(records[i], t.columns);\n        t.addRow(row);\n      }\n      if (typeof callback === 'function') {\n        callback(t);\n      }\n\n      self._decrementPreload();\n    },\n    function(err) {\n      // Error handling\n      p5._friendlyFileLoadError(2, path);\n\n      if (errorCallback) {\n        errorCallback(err);\n      } else {\n        throw err;\n      }\n    }\n  );\n\n  return t;\n};\n\n// helper function to turn a row into a JSON object\nfunction makeObject(row, headers) {\n  var ret = {};\n  headers = headers || [];\n  if (typeof headers === 'undefined') {\n    for (var j = 0; j < row.length; j++) {\n      headers[j.toString()] = j;\n    }\n  }\n  for (var i = 0; i < headers.length; i++) {\n    var key = headers[i];\n    var val = row[i];\n    ret[key] = val;\n  }\n  return ret;\n}\n\n/*global parseXML */\np5.prototype.parseXML = function(two) {\n  var one = new p5.XML();\n  var i;\n  if (two.children.length) {\n    for (i = 0; i < two.children.length; i++) {\n      var node = parseXML(two.children[i]);\n      one.addChild(node);\n    }\n    one.setName(two.nodeName);\n    one._setCont(two.textContent);\n    one._setAttributes(two);\n    for (var j = 0; j < one.children.length; j++) {\n      one.children[j].parent = one;\n    }\n    return one;\n  } else {\n    one.setName(two.nodeName);\n    one._setCont(two.textContent);\n    one._setAttributes(two);\n    return one;\n  }\n};\n\n/**\n * Reads the contents of a file and creates an XML object with its values.\n * If the name of the file is used as the parameter, as in the above example,\n * the file must be located in the sketch directory/folder.\n *\n * Alternatively, the file maybe be loaded from anywhere on the local\n * computer using an absolute path (something that starts with / on Unix and\n * Linux, or a drive letter on Windows), or the filename parameter can be a\n * URL for a file found on a network.\n *\n * This method is asynchronous, meaning it may not finish before the next\n * line in your sketch is executed. Calling loadXML() inside preload()\n * guarantees to complete the operation before setup() and draw() are called.\n *\n * Outside of preload(), you may supply a callback function to handle the\n * object.\n *\n * @method loadXML\n * @param  {String}   filename   name of the file or URL to load\n * @param  {function} [callback] function to be executed after loadXML()\n *                               completes, XML object is passed in as\n *                               first argument\n * @param  {function} [errorCallback] function to be executed if\n *                               there is an error, response is passed\n *                               in as first argument\n * @return {Object}              XML object containing data\n * @example\n * <div class='norender'><code>\n * // The following short XML file called \"mammals.xml\" is parsed\n * // in the code below.\n * //\n * // <?xml version=\"1.0\"?>\n * // &lt;mammals&gt;\n * //   &lt;animal id=\"0\" species=\"Capra hircus\">Goat&lt;/animal&gt;\n * //   &lt;animal id=\"1\" species=\"Panthera pardus\">Leopard&lt;/animal&gt;\n * //   &lt;animal id=\"2\" species=\"Equus zebra\">Zebra&lt;/animal&gt;\n * // &lt;/mammals&gt;\n *\n * var xml;\n *\n * function preload() {\n *   xml = loadXML('assets/mammals.xml');\n * }\n *\n * function setup() {\n *   var children = xml.getChildren('animal');\n *\n *   for (var i = 0; i < children.length; i++) {\n *     var id = children[i].getNum('id');\n *     var coloring = children[i].getString('species');\n *     var name = children[i].getContent();\n *     print(id + ', ' + coloring + ', ' + name);\n *   }\n * }\n *\n * // Sketch prints:\n * // 0, Capra hircus, Goat\n * // 1, Panthera pardus, Leopard\n * // 2, Equus zebra, Zebra\n * </code></div>\n *\n * @alt\n * no image displayed\n *\n */\np5.prototype.loadXML = function() {\n  var ret = {};\n  var callback, errorCallback;\n\n  for (var i = 1; i < arguments.length; i++) {\n    var arg = arguments[i];\n    if (typeof arg === 'function') {\n      if (typeof callback === 'undefined') {\n        callback = arg;\n      } else if (typeof errorCallback === 'undefined') {\n        errorCallback = arg;\n      }\n    }\n  }\n\n  var self = this;\n  this.httpDo(\n    arguments[0],\n    'GET',\n    'xml',\n    function(xml) {\n      for (var key in xml) {\n        ret[key] = xml[key];\n      }\n      if (typeof callback !== 'undefined') {\n        callback(ret);\n      }\n\n      self._decrementPreload();\n    },\n    errorCallback\n  );\n\n  return ret;\n};\n\n/**\n * Method for executing an HTTP GET request. If data type is not specified,\n * p5 will try to guess based on the URL, defaulting to text. This is equivalent to\n * calling <code>httpDo(path, 'GET')</code>.\n *\n * @method httpGet\n * @param  {String}        path       name of the file or url to load\n * @param  {String}        [datatype] \"json\", \"jsonp\", \"xml\", or \"text\"\n * @param  {Object}        [data]     param data passed sent with request\n * @param  {function}      [callback] function to be executed after\n *                                    httpGet() completes, data is passed in\n *                                    as first argument\n * @param  {function}      [errorCallback] function to be executed if\n *                                    there is an error, response is passed\n *                                    in as first argument\n * @example\n * <div class='norender'><code>\n * // Examples use USGS Earthquake API:\n * //   https://earthquake.usgs.gov/fdsnws/event/1/#methods\n * var earthquakes;\n * function preload() {\n *   // Get the most recent earthquake in the database\n *   var url =\n    'https://earthquake.usgs.gov/fdsnws/event/1/query?' +\n *     'format=geojson&limit=1&orderby=time';\n *   httpGet(url, 'jsonp', false, function(response) {\n *     // when the HTTP request completes, populate the variable that holds the\n *     // earthquake data used in the visualization.\n *     earthquakes = response;\n *   });\n * }\n *\n * function draw() {\n *   if (!earthquakes) {\n *     // Wait until the earthquake data has loaded before drawing.\n *     return;\n *   }\n *   background(200);\n *   // Get the magnitude and name of the earthquake out of the loaded JSON\n *   var earthquakeMag = earthquakes.features[0].properties.mag;\n *   var earthquakeName = earthquakes.features[0].properties.place;\n *   ellipse(width / 2, height / 2, earthquakeMag * 10, earthquakeMag * 10);\n *   textAlign(CENTER);\n *   text(earthquakeName, 0, height - 30, width, 30);\n *   noLoop();\n * }\n * </code></div>\n */\np5.prototype.httpGet = function() {\n  var args = Array.prototype.slice.call(arguments);\n  args.splice(1, 0, 'GET');\n  p5.prototype.httpDo.apply(this, args);\n};\n\n/**\n * Method for executing an HTTP POST request. If data type is not specified,\n * p5 will try to guess based on the URL, defaulting to text. This is equivalent to\n * calling <code>httpDo(path, 'POST')</code>.\n *\n * @method httpPost\n * @param  {String}        path       name of the file or url to load\n * @param  {String}        [datatype] \"json\", \"jsonp\", \"xml\", or \"text\".\n *                                    If omitted, httpPost() will guess.\n * @param  {Object}        [data]     param data passed sent with request\n * @param  {function}      [callback] function to be executed after\n *                                    httpPost() completes, data is passed in\n *                                    as first argument\n * @param  {function}      [errorCallback] function to be executed if\n *                                    there is an error, response is passed\n *                                    in as first argument\n *\n * @example\n * <div>\n * <code>\n * // Examples use jsonplaceholder.typicode.com for a Mock Data API\n *\n * var url = 'https://jsonplaceholder.typicode.com/posts';\n * var postData = { userId: 1, title: 'p5 Clicked!', body: 'p5.js is way cool.' };\n *\n * function setup() {\n *   createCanvas(800, 800);\n * }\n *\n * function mousePressed() {\n *   // Pick new random color values\n *   var r = random(255);\n *   var g = random(255);\n *   var b = random(255);\n *\n *   httpPost(url, 'json', postData, function(result) {\n *     strokeWeight(2);\n *     stroke(r, g, b);\n *     fill(r, g, b, 127);\n *     ellipse(mouseX, mouseY, 200, 200);\n *     text(result.body, mouseX, mouseY);\n *   });\n * }\n * </code>\n * </div>\n *\n *\n * <div><code>\n * var url = 'https://invalidURL'; // A bad URL that will cause errors\n * var postData = { title: 'p5 Clicked!', body: 'p5.js is way cool.' };\n *\n * function setup() {\n *   createCanvas(800, 800);\n * }\n *\n * function mousePressed() {\n *   // Pick new random color values\n *   var r = random(255);\n *   var g = random(255);\n *   var b = random(255);\n *\n *   httpPost(\n *     url,\n *     'json',\n *     postData,\n *     function(result) {\n *       // ... won't be called\n *     },\n *     function(error) {\n *       strokeWeight(2);\n *       stroke(r, g, b);\n *       fill(r, g, b, 127);\n *       text(error.toString(), mouseX, mouseY);\n *     }\n *   );\n * }\n * </code></div>\n *\n */\np5.prototype.httpPost = function() {\n  var args = Array.prototype.slice.call(arguments);\n  args.splice(1, 0, 'POST');\n  p5.prototype.httpDo.apply(this, args);\n};\n\n/**\n * Method for executing an HTTP request. If data type is not specified,\n * p5 will try to guess based on the URL, defaulting to text.<br><br>\n * For more advanced use, you may also pass in the path as the first argument\n * and a object as the second argument, the signature follows the one specified\n * in the Fetch API specification.\n *\n * @method httpDo\n * @param  {String}        path       name of the file or url to load\n * @param  {String}        [method]   either \"GET\", \"POST\", or \"PUT\",\n *                                    defaults to \"GET\"\n * @param  {String}        [datatype] \"json\", \"jsonp\", \"xml\", or \"text\"\n * @param  {Object}        [data]     param data passed sent with request\n * @param  {function}      [callback] function to be executed after\n *                                    httpGet() completes, data is passed in\n *                                    as first argument\n * @param  {function}      [errorCallback] function to be executed if\n *                                    there is an error, response is passed\n *                                    in as first argument\n *\n *\n * @example\n * <div>\n * <code>\n * // Examples use USGS Earthquake API:",
          "filepath": "data/repos/processing/p5.js-0.6/src/io/files.js",
          "repo": "processing/p5.js",
          "version": "0.6",
          "chunk_index": 0
        }
      },
      {
        "id": "e7ef93ec-a566-43b3-83e3-a4cce486b578",
        "score": 0.016129032258064516,
        "payload": {
          "text": "'use strict';\nconst eslint = require('eslint');\n\n// envs: ['eslint-samples/p5'],\n\nvar itemtypes = ['method', 'property'];\nvar classes = ['p5', 'p5.dom'];\n\nvar dataDoc = require('../docs/reference/data.min.json');\nvar globals = {};\ndataDoc.classitems\n  .filter(\n    ci => classes.indexOf(ci.class) >= 0 && itemtypes.indexOf(ci.itemtype) >= 0\n  )\n  .forEach(ci => {\n    globals[ci.name] = true;\n  });\n\nObject.keys(dataDoc.consts).forEach(c => {\n  globals[c] = true;\n});\n\ndataDoc.classitems\n  .find(ci => ci.name === 'keyCode' && ci.class === 'p5')\n  .description.match(/[A-Z\\r\\n, _]{10,}/m)[0]\n  .match(/[A-Z_]+/gm)\n  .forEach(c => {\n    globals[c] = true;\n  });\n\nfunction splitLines(text) {\n  var lines = [];\n\n  lines.lineFromIndex = function(index) {\n    var lines = this;\n    var lineCount = lines.length;\n    for (var i = 0; i < lineCount; i++) {\n      if (index < lines[i].index) return i - 1;\n    }\n    return lineCount - 1;\n  };\n\n  var m;\n  var reSplit = /(( *\\* ?)?.*)(?:\\r\\n|\\r|\\n)/g;\n  while ((m = reSplit.exec(text)) != null) {\n    if (m.index === reSplit.lastIndex) {\n      reSplit.lastIndex++;\n    }\n\n    lines.push({\n      index: m.index,\n      text: m[1],\n      prefixLength: m[2] ? m[2].length : 0\n    });\n  }\n\n  return lines;\n}\n\nvar EOL = require('os').EOL;\n\nvar userFunctions = [\n  'draw',\n  'setup',\n  'preload',\n  'mousePressed',\n  'mouseDragged',\n  'mouseMoved',\n  'mouseReleased',\n  'mouseClicked',\n  'mouseWheel',\n  'doubleClicked',\n  'windowResized',\n  'touchStarted',\n  'touchMoved',\n  'touchEnded',\n  'deviceMoved',\n  'deviceTurned',\n  'deviceShaken',\n  'keyPressed',\n  'keyReleased',\n  'keyTyped'\n];\nvar userFunctionTrailer =\n  EOL + userFunctions.map(s => 'typeof ' + s + ';').join(EOL) + EOL;\n\nmodule.exports = {\n  environments: {\n    p5: {\n      globals: globals\n    }\n  },\n  processors: {\n    '.js': {\n      supportsAutofix: true,\n      preprocess: function(text) {\n        this.lines = splitLines(text);\n\n        var m;\n        var comments = [];\n\n        var reComment = /\\/\\*\\*(?:.|\\r|\\n)*?\\*\\//g;\n        while ((m = reComment.exec(text)) != null) {\n          var value = m[0];\n          comments.push({\n            value: value,\n            range: [m.index, m.index + value.length]\n          });\n        }\n\n        var samples = (this.samples = []);\n\n        for (var i = 0; i < comments.length; i++) {\n          var comment = comments[i];\n          var commentText = comment.value;\n\n          var re = /(<code[^>]*>\\s*(?:\\r\\n|\\r|\\n))((?:.|\\r|\\n)*?)<\\/code>/gm;\n          while ((m = re.exec(commentText)) != null) {\n            var code = m[2];\n            if (!code) continue;\n            code = code.replace(/^ *\\* ?/gm, '');\n\n            samples.push({\n              comment: comment,\n              index: m.index + m[1].length,\n              code: code\n            });\n          }\n        }\n\n        return samples.map(s => s.code + userFunctionTrailer);\n      },\n\n      postprocess: function(sampleMessages, filename) {\n        var problems = [];\n\n        for (var i = 0; i < sampleMessages.length; i++) {\n          var messages = sampleMessages[i];\n          var sample = this.samples[i];\n          if (!messages.length) continue;\n\n          var sampleLines;\n\n          var sampleIndex = sample.comment.range[0] + sample.index;\n          var sampleLine = this.lines.lineFromIndex(sampleIndex);\n\n          for (var j = 0; j < messages.length; j++) {\n            var msg = messages[j];\n\n            var fix = msg.fix;\n            if (fix) {\n              if (!sampleLines) {\n                sampleLines = splitLines(sample.code);\n              }\n\n              var fixLine1 = sampleLines.lineFromIndex(fix.range[0]);\n              var fixLine2 = sampleLines.lineFromIndex(fix.range[1] - 1);\n              if (fixLine1 !== fixLine2) {\n                // TODO: handle multi-line fixes\n                fix.range = [0, 0];\n                fix.text = '';\n              } else {\n                var line = this.lines[sampleLine + fixLine1];\n\n                var fixColumn1 = fix.range[0] - sampleLines[fixLine1].index;\n                var fixColumn2 = fix.range[1] - sampleLines[fixLine1].index;\n\n                fix.range[0] = line.index + line.prefixLength + fixColumn1;\n                fix.range[1] = line.index + line.prefixLength + fixColumn2;\n              }\n            }\n\n            var startLine = msg.line + sampleLine;\n            msg.column += this.lines[startLine].prefixLength;\n            msg.line = startLine;\n\n            if (msg.endLine) {\n              var endLine = msg.endLine + sampleLine;\n              msg.endColumn += this.lines[endLine].prefixLength;\n              msg.endLine = endLine;\n            }\n\n            msg.message = msg.message\n              .replace(/\\r/g, '\\\\r')\n              .replace(/\\n|\\u23CE/g, '\\\\n');\n\n            problems.push(msg);\n          }\n        }\n        return problems;\n      }\n    }\n  }\n};\n\nfunction eslintFiles(opts, filesSrc) {\n  opts = opts || {\n    outputFile: false,\n    quiet: false,\n    maxWarnings: -1,\n    envs: ['eslint-samples/p5', 'amd'],\n    format: 'unix'\n  };\n\n  if (filesSrc.length === 0) {\n    console.warn('Could not find any files to validate');\n    return true;\n  }\n\n  const formatter = eslint.CLIEngine.getFormatter(opts.format);\n  if (!formatter) {\n    console.warn(`Could not find formatter ${opts.format}`);\n    return false;\n  }\n\n  const engine = new eslint.CLIEngine(opts);\n  engine.addPlugin('eslint-samples', module.exports);\n\n  let report = engine.executeOnFiles(filesSrc);\n\n  if (opts.fix) {\n    eslint.CLIEngine.outputFixes(report);\n  }\n\n  let results = report.results;\n  if (opts.quiet) {\n    results = eslint.CLIEngine.getErrorResults(results);\n  }\n\n  return { report, output: formatter(results) };\n}\n\nmodule.exports.eslintFiles = eslintFiles;\n\nif (!module.parent) {\n  var result = eslintFiles(null, process.argv.slice(2));\n  console.log(result.output);\n  process.exit(result.report.errorCount === 0 ? 0 : 1);\n}\n",
          "filepath": "data/repos/processing/p5.js-0.6/utils/sample-linter.js",
          "repo": "processing/p5.js",
          "version": "0.6",
          "chunk_index": 0
        }
      },
      {
        "id": "469d091e-b45d-458b-a066-c81573d44c2f",
        "score": 0.015873015873015872,
        "payload": {
          "text": "p5.RendererGL.prototype.setStrokeShader = function(s) {\n  if (this.curStrokeShader !== s) {\n    // only do setup etc. if shader is actually new.\n    this.curStrokeShader = s;\n    // safe to do this multiple times;\n    // init() will bail early if has already been run.\n    this.curStrokeShader.init();\n    //this.curStrokeShader.useProgram();\n  }\n  // always return this.curLineShader, even if no change was made.\n  return this.curStrokeShader;\n};\n\n/*\n * shaders are created and cached on a per-renderer basis,\n * on the grounds that each renderer will have its own gl context\n * and the shader must be valid in that context.\n *\n *\n */\n\np5.RendererGL.prototype._useLightShader = function() {\n  if (!this.curFillShader || !this.curFillShader.isLightShader()) {\n    this.setFillShader(this._getLightShader());\n  }\n  return this.curFillShader;\n};\n\np5.RendererGL.prototype._useColorShader = function() {\n  // looking at the code within the glsl files, I'm not really\n  // sure why these are two different shaders. but, they are,\n  // and if we're drawing in retain mode but the shader is the\n  // immediate mode one, we need to switch.\n\n  // TODO: what if curFillShader is _any_ other shader?\n  if (\n    !this.curFillShader ||\n    this.curFillShader === this._defaultImmediateModeShader\n  ) {\n    // there are different immediate mode and retain mode color shaders.\n    // if we're using the immediate mode one, we need to switch to\n    // one that works for retain mode.\n    this.setFillShader(this._getColorShader());\n  }\n  return this.curFillShader;\n};\n\np5.RendererGL.prototype._useImmediateModeShader = function() {\n  // TODO: what if curFillShader is _any_ other shader?\n  if (!this.curFillShader || this.curFillShader === this._defaultColorShader) {\n    // this is the fill/stroke shader for retain mode.\n    // must switch to immediate mode shader before drawing!\n    this.setFillShader(this._getImmediateModeShader());\n    // note that if we're using the texture shader...\n    // this shouldn't change. :)\n  }\n  return this.curFillShader;\n};\n\np5.RendererGL.prototype._getLightShader = function() {\n  if (!this._defaultLightShader) {\n    if (this.attributes.perPixelLighting) {\n      this._defaultLightShader = new p5.Shader(\n        this,\n        defaultShaders.phongVert,\n        defaultShaders.phongFrag\n      );\n    } else {\n      this._defaultLightShader = new p5.Shader(\n        this,\n        defaultShaders.lightVert,\n        defaultShaders.lightTextureFrag\n      );\n    }\n  }\n  //this.drawMode = constants.FILL;\n  return this._defaultLightShader;\n};\n\np5.RendererGL.prototype._getImmediateModeShader = function() {\n  if (!this._defaultImmediateModeShader) {\n    this._defaultImmediateModeShader = new p5.Shader(\n      this,\n      defaultShaders.immediateVert,\n      defaultShaders.vertexColorFrag\n    );\n  }\n  //this.drawMode = constants.FILL;\n  return this._defaultImmediateModeShader;\n};\n\np5.RendererGL.prototype._getNormalShader = function() {\n  if (!this._defaultNormalShader) {\n    this._defaultNormalShader = new p5.Shader(\n      this,\n      defaultShaders.normalVert,\n      defaultShaders.normalFrag\n    );\n  }\n  //this.drawMode = constants.FILL;\n  return this._defaultNormalShader;\n};\n\np5.RendererGL.prototype._getColorShader = function() {\n  if (!this._defaultColorShader) {\n    this._defaultColorShader = new p5.Shader(\n      this,\n      defaultShaders.normalVert,\n      defaultShaders.basicFrag\n    );\n  }\n  //this.drawMode = constants.FILL;\n  return this._defaultColorShader;\n};\n\np5.RendererGL.prototype._getLineShader = function() {\n  if (!this._defaultLineShader) {\n    this._defaultLineShader = new p5.Shader(\n      this,\n      defaultShaders.lineVert,\n      defaultShaders.lineFrag\n    );\n  }\n  //this.drawMode = constants.STROKE;\n  return this._defaultLineShader;\n};\n\np5.RendererGL.prototype._getEmptyTexture = function() {\n  if (!this._emptyTexture) {\n    // a plain white texture RGBA, full alpha, single pixel.\n    var im = new p5.Image(1, 1);\n    im.set(0, 0, 255);\n    this._emptyTexture = new p5.Texture(this, im);\n  }\n  return this._emptyTexture;\n};\n\np5.RendererGL.prototype.getTexture = function(img) {\n  var checkSource = function(element) {\n    return element.src === img;\n  };\n  //this.drawMode = constants.TEXTURE;\n  var tex = this.textures.find(checkSource);\n  if (!tex) {\n    tex = new p5.Texture(this, img);\n    this.textures.push(tex);\n  }\n\n  return tex;\n};\n\n//Binds a buffer to the drawing context\n//when passed more than two arguments it also updates or initializes\n//the data associated with the buffer\np5.RendererGL.prototype._bindBuffer = function(\n  buffer,\n  target,\n  values,\n  type,\n  usage\n) {\n  this.GL.bindBuffer(target, buffer);\n  if (values !== undefined) {\n    var data = new type(values);\n    this.GL.bufferData(target, data, usage);\n  }\n};\n\n///////////////////////////////\n//// UTILITY FUNCTIONS\n//////////////////////////////\n/**\n * turn a two dimensional array into one dimensional array\n * @private\n * @param  {Array} arr 2-dimensional array\n * @return {Array}     1-dimensional array\n * [[1, 2, 3],[4, 5, 6]] -> [1, 2, 3, 4, 5, 6]\n */\np5.RendererGL.prototype._flatten = function(arr) {\n  //when empty, return empty\n  if (arr.length === 0) {\n    return [];\n  } else if (arr.length > 20000) {\n    //big models , load slower to avoid stack overflow\n    //faster non-recursive flatten via axelduch\n    //stackoverflow.com/questions/27266550/how-to-flatten-nested-array-in-javascript\n    var toString = Object.prototype.toString;\n    var arrayTypeStr = '[object Array]';\n    var result = [];\n    var nodes = arr.slice();\n    var node;\n    node = nodes.pop();\n    do {\n      if (toString.call(node) === arrayTypeStr) {\n        nodes.push.apply(nodes, node);\n      } else {\n        result.push(node);\n      }\n    } while (nodes.length && (node = nodes.pop()) !== undefined);\n    result.reverse(); // we reverse result to restore the original order\n    return result;\n  } else {\n    //otherwise if model within limits for browser\n    //use faster recursive loading\n    return [].concat.apply([], arr);\n  }\n};\n\n/**\n * turn a p5.Vector Array into a one dimensional number array\n * @private\n * @param  {p5.Vector[]} arr  an array of p5.Vector\n * @return {Number[]}     a one dimensional array of numbers\n * [p5.Vector(1, 2, 3), p5.Vector(4, 5, 6)] ->\n * [1, 2, 3, 4, 5, 6]\n */\np5.RendererGL.prototype._vToNArray = function(arr) {\n  return this._flatten(\n    arr.map(function(item) {\n      return [item.x, item.y, item.z];\n    })\n  );\n};\n\nmodule.exports = p5.RendererGL;",
          "filepath": "data/repos/processing/p5.js-0.6/src/webgl/p5.RendererGL.js",
          "repo": "processing/p5.js",
          "version": "0.6",
          "chunk_index": 1
        }
      },
      {
        "id": "f8dd3b7e-97f1-4348-bc79-83d418f2082f",
        "score": 0.015625,
        "payload": {
          "text": "/**\n * @for p5\n * @requires core\n */\n\n'use strict';\n\nvar p5 = require('./core');\nvar constants = require('./constants');\n\nif (typeof IS_MINIFIED !== 'undefined') {\n  p5._validateParameters = p5._friendlyFileLoadError = function() {};\n} else {\n  var doFriendlyWelcome = false; // TEMP until we get it all working LM\n  // for parameter validation\n  var dataDoc = require('../../docs/reference/data.json');\n  var arrDoc = JSON.parse(JSON.stringify(dataDoc));\n\n  // -- Borrowed from jQuery 1.11.3 --\n  var class2type = {};\n  var toString = class2type.toString;\n  var names = [\n    'Boolean',\n    'Number',\n    'String',\n    'Function',\n    'Array',\n    'Date',\n    'RegExp',\n    'Object',\n    'Error'\n  ];\n  for (var n = 0; n < names.length; n++) {\n    class2type['[object ' + names[n] + ']'] = names[n].toLowerCase();\n  }\n  var getType = function(obj) {\n    if (obj == null) {\n      return obj + '';\n    }\n    return typeof obj === 'object' || typeof obj === 'function'\n      ? class2type[toString.call(obj)] || 'object'\n      : typeof obj;\n  };\n\n  // -- End borrow --\n\n  var friendlyWelcome = function() {\n    // p5.js brand - magenta: #ED225D\n    //var astrixBgColor = 'transparent';\n    //var astrixTxtColor = '#ED225D';\n    //var welcomeBgColor = '#ED225D';\n    //var welcomeTextColor = 'white';\n    console.log(\n      '    _ \\n' +\n        ' /\\\\| |/\\\\ \\n' +\n        \" \\\\ ` ' /  \\n\" +\n        ' / , . \\\\  \\n' +\n        ' \\\\/|_|\\\\/ ' +\n        '\\n\\n> p5.js says: Welcome! ' +\n        'This is your friendly debugger. ' +\n        'To turn me off switch to using \u201cp5.min.js\u201d.'\n    );\n  };\n\n  /**\n   * Prints out a fancy, colorful message to the console log\n   *\n   * @private\n   * @param  {String}               message the words to be said\n   * @param  {String}               func    the name of the function to link\n   * @param  {Number|String} color   CSS color string or error type\n   *\n   * @return console logs\n   */\n  // Wrong number of params, undefined param, wrong type\n  var FILE_LOAD = 3;\n  var ERR_PARAMS = 3;\n  // p5.js blue, p5.js orange, auto dark green; fallback p5.js darkened magenta\n  // See testColors below for all the color codes and names\n  var typeColors = ['#2D7BB6', '#EE9900', '#4DB200', '#C83C00'];\n  var report = function(message, func, color) {\n    if (doFriendlyWelcome) {\n      friendlyWelcome();\n      doFriendlyWelcome = false;\n    }\n    if ('undefined' === getType(color)) {\n      color = '#B40033'; // dark magenta\n    } else if (getType(color) === 'number') {\n      // Type to color\n      color = typeColors[color];\n    }\n    if (func.substring(0, 4) === 'load') {\n      console.log(\n        '> p5.js says: ' +\n          message +\n          '[https://github.com/processing/p5.js/wiki/Local-server]'\n      );\n    } else {\n      console.log(\n        '> p5.js says: ' +\n          message +\n          ' [http://p5js.org/reference/#p5/' +\n          func +\n          ']'\n      );\n    }\n  };\n\n  var errorCases = {\n    '0': {\n      fileType: 'image',\n      method: 'loadImage',\n      message: ' hosting the image online,'\n    },\n    '1': {\n      fileType: 'XML file',\n      method: 'loadXML'\n    },\n    '2': {\n      fileType: 'table file',\n      method: 'loadTable'\n    },\n    '3': {\n      fileType: 'text file',\n      method: 'loadStrings'\n    },\n    '4': {\n      fileType: 'font',\n      method: 'loadFont',\n      message: ' hosting the font online,'\n    }\n  };\n  p5._friendlyFileLoadError = function(errorType, filePath) {\n    var errorInfo = errorCases[errorType];\n    var message =\n      'It looks like there was a problem' +\n      ' loading your ' +\n      errorInfo.fileType +\n      '.' +\n      ' Try checking if the file path [' +\n      filePath +\n      '] is correct,' +\n      (errorInfo.message || '') +\n      ' or running a local server.';\n    report(message, errorInfo.method, FILE_LOAD);\n  };\n\n  var docCache = {};\n  var builtinTypes = [\n    'number',\n    'string',\n    'boolean',\n    'constant',\n    'function',\n    'any',\n    'integer'\n  ];\n\n  // validateParameters() helper functions:\n  // lookupParamDoc() for querying data.json\n  var lookupParamDoc = function(func) {\n    var queryResult = arrDoc.classitems.filter(function(x) {\n      return x.name === func;\n    });\n    // different JSON structure for funct with multi-format\n    var overloads = [];\n    if (queryResult[0].hasOwnProperty('overloads')) {\n      for (var i = 0; i < queryResult[0].overloads.length; i++) {\n        overloads.push(queryResult[0].overloads[i].params);\n      }\n    } else {\n      overloads.push(queryResult[0].params);\n    }\n\n    var mapConstants = {};\n    var maxParams = 0;\n    overloads.forEach(function(formats) {\n      if (maxParams < formats.length) {\n        maxParams = formats.length;\n      }\n      formats.forEach(function(format) {\n        format.types = format.type.split('|').map(function ct(type) {\n          // array\n          if (type.substr(type.length - 2, 2) === '[]') {\n            return {\n              name: type,\n              array: ct(type.substr(0, type.length - 2))\n            };\n          }\n\n          var lowerType = type.toLowerCase();\n\n          // contant\n          if (lowerType === 'constant') {\n            var constant;\n            if (mapConstants.hasOwnProperty(format.name)) {\n              constant = mapConstants[format.name];\n            } else {\n              // parse possible constant values from description\n              var myRe = /either\\s+(?:[A-Z0-9_]+\\s*,?\\s*(?:or)?\\s*)+/g;\n              var values = {};\n              var names = [];\n\n              constant = mapConstants[format.name] = {\n                values: values,\n                names: names\n              };\n\n              var myArray = myRe.exec(format.description);\n              if (func === 'endShape' && format.name === 'mode') {\n                values[constants.CLOSE] = true;\n                names.push('CLOSE');\n              } else {\n                var match = myArray[0];\n                var reConst = /[A-Z0-9_]+/g;\n                var matchConst;\n                while ((matchConst = reConst.exec(match)) !== null) {\n                  var name = matchConst[0];\n                  if (constants.hasOwnProperty(name)) {\n                    values[constants[name]] = true;\n                    names.push(name);\n                  }\n                }\n              }\n            }\n            return {\n              name: type,\n              builtin: lowerType,\n              names: constant.names,\n              values: constant.values\n            };\n          }\n\n          // function\n          if (lowerType.substr(0, 'function'.length) === 'function') {\n            lowerType = 'function';\n          }\n          // builtin\n          if (builtinTypes.indexOf(lowerType) >= 0) {\n            return { name: type, builtin: lowerType };\n          }\n\n          // p5 class type\n          var t = window;\n          type.split('.').forEach(function(p) {\n            t = t && t[p];\n          });\n          if (t) {\n            return { name: type, prototype: t };\n          }\n\n          return { name: type, type: lowerType };\n        });\n      });\n    });\n    return {\n      overloads: overloads,\n      maxParams: maxParams\n    };\n  };\n\n  var testParamType = function(param, type) {\n    var isArray = param instanceof Array;\n    if (type.array && isArray) {\n      for (var i = 0; i < param.length; i++) {\n        if (!testParamType(param[i], type.array)) {\n          return false;\n        }\n      }\n      return true;\n    } else if (type.prototype) {\n      return param instanceof type.prototype;\n    } else if (type.builtin) {\n      switch (type.builtin) {\n        case 'number':\n          return typeof param === 'number' || (!!param && !isNaN(param));\n        case 'integer':\n          return (\n            (typeof param === 'number' || (!!param && !isNaN(param))) &&\n            Number(param) === Math.floor(param)\n          );\n        case 'boolean':\n        case 'any':\n          return true;\n        case 'array':\n          return isArray;\n        case 'string':\n          return typeof param === 'number' || typeof param === 'string';\n        case 'constant':\n          return type.values.hasOwnProperty(param);\n        case 'function':\n          return param instanceof Function;\n      }\n    }\n\n    return typeof param === type.t;\n  };\n\n  // testType() for non-object type parameter validation\n  // Returns true if PASS, false if FAIL\n  var testParamTypes = function(param, types) {\n    for (var i = 0; i < types.length; i++) {\n      if (testParamType(param, types[i])) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  var testParamFormat = function(args, formats) {\n    var errorArray = [];\n    for (var p = 0; p < formats.length; p++) {\n      var arg = args[p];\n      var format = formats[p];\n      var argType = typeof arg;\n      if ('undefined' === argType || null === arg) {\n        if (format.optional !== true) {\n          errorArray.push({\n            type: 'EMPTY_VAR',\n            position: p,\n            format: format\n          });\n        }\n      } else if (!testParamTypes(arg, format.types)) {\n        errorArray.push({\n          type: 'WRONG_TYPE',\n          position: p,\n          format: format,\n          arg: arg\n        });\n      }\n    }\n    return errorArray;\n  };\n\n  // function for generating console.log() msg\n  p5._friendlyParamError = function(errorObj, func) {\n    var message;\n\n    function formatType() {\n      var format = errorObj.format;\n      return format.types\n        .map(function(type) {\n          return type.names ? type.names.join('|') : type.name;\n        })\n        .join('|');\n    }\n\n    switch (errorObj.type) {\n      case 'EMPTY_VAR':\n        message =\n          func +\n          '() was expecting ' +\n          formatType() +\n          ' for parameter #' +\n          errorObj.position +\n          ' (zero-based index), received an empty variable instead.' +\n          ' If not intentional, this is often a problem with scope:' +\n          ' [https://p5js.org/examples/data-variable-scope.html]';\n        break;\n      case 'WRONG_TYPE':\n        var arg = errorObj.arg;\n        var argType = arg instanceof Array ? 'array' : arg.name || typeof arg;\n        message =\n          func +\n          '() was expecting ' +\n          formatType() +\n          ' for parameter #' +\n          errorObj.position +\n          ' (zero-based index), received ' +\n          argType +\n          ' instead';\n        break;\n      case 'WRONG_ARGUMENT_COUNT':\n        message =\n          func +\n          '() was expecting ' +\n          errorObj.maxParams +\n          ' arguments, but received ' +\n          errorObj.argCount;\n        break;\n    }\n\n    if (message) {\n      try {\n        var re = /Function\\.validateParameters.*[\\r\\n].*[\\r\\n].*\\(([^)]*)/;\n        var location = re.exec(new Error().stack)[1];\n        if (location) {\n          message += ' at ' + location;\n        }\n      } catch (err) {}\n\n      report(message + '.', func, ERR_PARAMS);\n    }\n  };\n\n  /**\n   * Validates parameters\n   * param  {String}               func    the name of the function\n   * param  {Array}                args    user input arguments\n   *\n   * example:\n   *  var a;\n   *  ellipse(10,10,a,5);\n   * console ouput:\n   *  \"It looks like ellipse received an empty variable in spot #2.\"\n   *\n   * example:\n   *  ellipse(10,\"foo\",5,5);\n   * console output:\n   *  \"ellipse was expecting a number for parameter #1,\n   *           received \"foo\" instead.\"\n   */\n  p5._validateParameters = function validateParameters(func, args) {\n    if (p5.disableFriendlyErrors) {\n      return; // skip FES\n    }\n\n    var docs = docCache[func] || (docCache[func] = lookupParamDoc(func));\n    var errorArray = [];\n    var minErrCount = 999999;\n    var overloads = docs.overloads;\n    for (var i = 0; i < overloads.length; i++) {\n      var arrError = testParamFormat(args, overloads[i]);\n      // see if this is the format with min number of err\n      if (minErrCount > arrError.length) {\n        minErrCount = arrError.length;\n        errorArray = arrError;\n      }\n      if (arrError.length === 0) {\n        break; // no error\n      }\n    }\n\n    if (!errorArray.length && args.length > docs.maxParams) {\n      errorArray.push({\n        type: 'WRONG_ARGUMENT_COUNT',\n        argCount: args.length,\n        maxParams: docs.maxParams\n      });\n    }\n\n    // generate err msg\n    for (var n = 0; n < errorArray.length; n++) {\n      p5._friendlyParamError(errorArray[n], func);\n    }\n  };\n\n  /**\n   * Prints out all the colors in the color pallete with white text.\n   * For color blindness testing.\n   */\n  /* function testColors() {\n    var str = 'A box of biscuits, a box of mixed biscuits and a biscuit mixer';\n    report(str, 'print', '#ED225D'); // p5.js magenta\n    report(str, 'print', '#2D7BB6'); // p5.js blue\n    report(str, 'print', '#EE9900'); // p5.js orange\n    report(str, 'print', '#A67F59'); // p5.js light brown\n    report(str, 'print', '#704F21'); // p5.js gold\n    report(str, 'print', '#1CC581'); // auto cyan\n    report(str, 'print', '#FF6625'); // auto orange\n    report(str, 'print', '#79EB22'); // auto green\n    report(str, 'print', '#B40033'); // p5.js darkened magenta\n    report(str, 'print', '#084B7F'); // p5.js darkened blue\n    report(str, 'print', '#945F00'); // p5.js darkened orange\n    report(str, 'print', '#6B441D'); // p5.js darkened brown\n    report(str, 'print', '#2E1B00'); // p5.js darkened gold\n    report(str, 'print', '#008851'); // auto dark cyan\n    report(str, 'print', '#C83C00'); // auto dark orange\n    report(str, 'print', '#4DB200'); // auto dark green\n  } */\n\n  p5.prototype._validateParameters = p5.validateParameters;\n}\n\n// This is a lazily-defined list of p5 symbols that may be\n// misused by beginners at top-level code, outside of setup/draw. We'd like\n// to detect these errors and help the user by suggesting they move them\n// into setup/draw.\n//\n// For more details, see https://github.com/processing/p5.js/issues/1121.\nvar misusedAtTopLevelCode = null;\nvar FAQ_URL =\n  'https://github.com/processing/p5.js/wiki/' +\n  'Frequently-Asked-Questions' +\n  '#why-cant-i-assign-variables-using-p5-functions-and-' +\n  'variables-before-setup';\n\nvar defineMisusedAtTopLevelCode = function() {\n  var uniqueNamesFound = {};\n\n  var getSymbols = function(obj) {\n    return Object.getOwnPropertyNames(obj)\n      .filter(function(name) {\n        if (name[0] === '_') {\n          return false;\n        }\n        if (name in uniqueNamesFound) {\n          return false;\n        }\n\n        uniqueNamesFound[name] = true;\n\n        return true;\n      })\n      .map(function(name) {\n        var type;\n\n        if (typeof obj[name] === 'function') {\n          type = 'function';\n        } else if (name === name.toUpperCase()) {\n          type = 'constant';\n        } else {\n          type = 'variable';\n        }\n\n        return { name: name, type: type };\n      });\n  };\n\n  misusedAtTopLevelCode = [].concat(\n    getSymbols(p5.prototype),\n    // At present, p5 only adds its constants to p5.prototype during\n    // construction, which may not have happened at the time a\n    // ReferenceError is thrown, so we'll manually add them to our list.\n    getSymbols(require('./constants'))\n  );\n\n  // This will ultimately ensure that we report the most specific error\n  // possible to the user, e.g. advising them about HALF_PI instead of PI\n  // when their code misuses the former.\n  misusedAtTopLevelCode.sort(function(a, b) {\n    return b.name.length - a.name.length;\n  });\n};\n\nvar helpForMisusedAtTopLevelCode = function(e, log) {\n  if (!log) {\n    log = console.log.bind(console);\n  }\n\n  if (!misusedAtTopLevelCode) {\n    defineMisusedAtTopLevelCode();\n  }\n\n  // If we find that we're logging lots of false positives, we can\n  // uncomment the following code to avoid displaying anything if the\n  // user's code isn't likely to be using p5's global mode. (Note that\n  // setup/draw are more likely to be defined due to JS function hoisting.)\n  //\n  //if (!('setup' in window || 'draw' in window)) {\n  //  return;\n  //}\n\n  misusedAtTopLevelCode.some(function(symbol) {\n    // Note that while just checking for the occurrence of the\n    // symbol name in the error message could result in false positives,\n    // a more rigorous test is difficult because different browsers\n    // log different messages, and the format of those messages may\n    // change over time.\n    //\n    // For example, if the user uses 'PI' in their code, it may result\n    // in any one of the following messages:\n    //\n    //   * 'PI' is undefined                           (Microsoft Edge)\n    //   * ReferenceError: PI is undefined             (Firefox)\n    //   * Uncaught ReferenceError: PI is not defined  (Chrome)\n\n    if (e.message && e.message.match('\\\\W?' + symbol.name + '\\\\W') !== null) {\n      log(\n        \"Did you just try to use p5.js's \" +\n          symbol.name +\n          (symbol.type === 'function' ? '() ' : ' ') +\n          symbol.type +\n          '? If so, you may want to ' +\n          \"move it into your sketch's setup() function.\\n\\n\" +\n          'For more details, see: ' +\n          FAQ_URL\n      );\n      return true;\n    }\n  });\n};\n\n// Exposing this primarily for unit testing.\np5.prototype._helpForMisusedAtTopLevelCode = helpForMisusedAtTopLevelCode;\n\nif (document.readyState !== 'complete') {\n  window.addEventListener('error', helpForMisusedAtTopLevelCode, false);\n\n  // Our job is only to catch ReferenceErrors that are thrown when\n  // global (non-instance mode) p5 APIs are used at the top-level\n  // scope of a file, so we'll unbind our error listener now to make\n  // sure we don't log false positives later.\n  window.addEventListener('load', function() {\n    window.removeEventListener('error', helpForMisusedAtTopLevelCode, false);\n  });\n}\n\nmodule.exports = p5;\n",
          "filepath": "data/repos/processing/p5.js-0.6/src/core/error_helpers.js",
          "repo": "processing/p5.js",
          "version": "0.6",
          "chunk_index": 0
        }
      },
      {
        "id": "892951d5-4c38-45d4-83e1-bbdea57d60b0",
        "score": 0.015384615384615385,
        "payload": {
          "text": "/**\n * @module Shape\n * @submodule 3D Models\n * @for p5\n * @requires core\n * @requires p5.Geometry\n */\n\n'use strict';\n\nvar p5 = require('../core/core');\nrequire('./p5.Geometry');\n\n/**\n * Load a 3d model from an OBJ file.\n * <br><br>\n * One of the limitations of the OBJ format is that it doesn't have a built-in\n * sense of scale. This means that models exported from different programs might\n * be very different sizes. If your model isn't displaying, try calling\n * loadModel() with the normalized parameter set to true. This will resize the\n * model to a scale appropriate for p5. You can also make additional changes to\n * the final size of your model with the scale() function.\n *\n * @method loadModel\n * @param  {String} path              Path of the model to be loaded\n * @param  {Boolean} normalize        If true, scale the model to a\n *                                      standardized size when loading\n * @param  {function(p5.Geometry)} [successCallback] Function to be called\n *                                     once the model is loaded. Will be passed\n *                                     the 3D model object.\n * @param  {function(Event)} [failureCallback] called with event error if\n *                                         the image fails to load.\n * @return {p5.Geometry} the p5.Geometry object\n *\n * @example\n * <div>\n * <code>\n * //draw a spinning teapot\n * var teapot;\n *\n * function preload() {\n *   teapot = loadModel('assets/teapot.obj');\n * }\n *\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n *\n * function draw() {\n *   background(200);\n *   rotateX(frameCount * 0.01);\n *   rotateY(frameCount * 0.01);\n *   model(teapot);\n * }\n * </code>\n * </div>\n *\n * @alt\n * Vertically rotating 3-d teapot with red, green and blue gradient.\n */\n/**\n * @method loadModel\n * @param  {String} path\n * @param  {function(p5.Geometry)} [successCallback]\n * @param  {function(Event)} [failureCallback]\n * @return {p5.Geometry} the p5.Geometry object\n */\np5.prototype.loadModel = function(path) {\n  var normalize;\n  var successCallback;\n  var failureCallback;\n  if (typeof arguments[1] === 'boolean') {\n    normalize = arguments[1];\n    successCallback = arguments[2];\n    failureCallback = arguments[3];\n  } else {\n    normalize = false;\n    successCallback = arguments[1];\n    failureCallback = arguments[2];\n  }\n\n  var model = new p5.Geometry();\n  model.gid = path + '|' + normalize;\n  this.loadStrings(\n    path,\n    function(strings) {\n      parseObj(model, strings);\n\n      if (normalize) {\n        model.normalize();\n      }\n\n      if (typeof successCallback === 'function') {\n        successCallback(model);\n      }\n    }.bind(this),\n    failureCallback\n  );\n\n  return model;\n};\n\n/**\n * Parse OBJ lines into model. For reference, this is what a simple model of a\n * square might look like:\n *\n * v -0.5 -0.5 0.5\n * v -0.5 -0.5 -0.5\n * v -0.5 0.5 -0.5\n * v -0.5 0.5 0.5\n *\n * f 4 3 2 1\n */\nfunction parseObj(model, lines) {\n  // OBJ allows a face to specify an index for a vertex (in the above example),\n  // but it also allows you to specify a custom combination of vertex, UV\n  // coordinate, and vertex normal. So, \"3/4/3\" would mean, \"use vertex 3 with\n  // UV coordinate 4 and vertex normal 3\". In WebGL, every vertex with different\n  // parameters must be a different vertex, so loadedVerts is used to\n  // temporarily store the parsed vertices, normals, etc., and indexedVerts is\n  // used to map a specific combination (keyed on, for example, the string\n  // \"3/4/3\"), to the actual index of the newly created vertex in the final\n  // object.\n  var loadedVerts = {\n    v: [],\n    vt: [],\n    vn: []\n  };\n  var indexedVerts = {};\n\n  for (var line = 0; line < lines.length; ++line) {\n    // Each line is a separate object (vertex, face, vertex normal, etc)\n    // For each line, split it into tokens on whitespace. The first token\n    // describes the type.\n    var tokens = lines[line].trim().split(/\\b\\s+/);\n\n    if (tokens.length > 0) {\n      if (tokens[0] === 'v' || tokens[0] === 'vn') {\n        // Check if this line describes a vertex or vertex normal.\n        // It will have three numeric parameters.\n        var vertex = new p5.Vector(\n          parseFloat(tokens[1]),\n          parseFloat(tokens[2]),\n          parseFloat(tokens[3])\n        );\n        loadedVerts[tokens[0]].push(vertex);\n      } else if (tokens[0] === 'vt') {\n        // Check if this line describes a texture coordinate.\n        // It will have two numeric parameters.\n        var texVertex = [parseFloat(tokens[1]), parseFloat(tokens[2])];\n        loadedVerts[tokens[0]].push(texVertex);\n      } else if (tokens[0] === 'f') {\n        // Check if this line describes a face.\n        // OBJ faces can have more than three points. Triangulate points.\n        for (var tri = 3; tri < tokens.length; ++tri) {\n          var face = [];\n\n          var vertexTokens = [1, tri - 1, tri];\n\n          for (var tokenInd = 0; tokenInd < vertexTokens.length; ++tokenInd) {\n            // Now, convert the given token into an index\n            var vertString = tokens[vertexTokens[tokenInd]];\n            var vertIndex = 0;\n\n            // TODO: Faces can technically use negative numbers to refer to the\n            // previous nth vertex. I haven't seen this used in practice, but\n            // it might be good to implement this in the future.\n\n            if (indexedVerts[vertString] !== undefined) {\n              vertIndex = indexedVerts[vertString];\n            } else {\n              var vertParts = vertString.split('/');\n              for (var i = 0; i < vertParts.length; i++) {\n                vertParts[i] = parseInt(vertParts[i]) - 1;\n              }\n\n              vertIndex = indexedVerts[vertString] = model.vertices.length;\n              model.vertices.push(loadedVerts.v[vertParts[0]].copy());\n              if (loadedVerts.vt[vertParts[1]]) {\n                model.uvs.push(loadedVerts.vt[vertParts[1]].slice());\n              } else {\n                model.uvs.push([0, 0]);\n              }\n\n              if (loadedVerts.vn[vertParts[2]]) {\n                model.vertexNormals.push(loadedVerts.vn[vertParts[2]].copy());\n              }\n            }\n\n            face.push(vertIndex);\n          }\n\n          if (\n            face[0] !== face[1] &&\n            face[0] !== face[2] &&\n            face[1] !== face[2]\n          ) {\n            model.faces.push(face);\n          }\n        }\n      }\n    }\n  }\n  // If the model doesn't have normals, compute the normals\n  if (model.vertexNormals.length === 0) {\n    model.computeNormals();\n  }\n\n  return model;\n}\n\n/**\n * Render a 3d model to the screen.\n *\n * @method model\n * @param  {p5.Geometry} model Loaded 3d model to be rendered\n * @example\n * <div>\n * <code>\n * //draw a spinning teapot\n * var teapot;\n *\n * function preload() {\n *   teapot = loadModel('assets/teapot.obj');\n * }\n *\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n *\n * function draw() {\n *   background(200);\n *   rotateX(frameCount * 0.01);\n *   rotateY(frameCount * 0.01);\n *   model(teapot);\n * }\n * </code>\n * </div>\n *\n * @alt\n * Vertically rotating 3-d teapot with red, green and blue gradient.\n *\n */\np5.prototype.model = function(model) {\n  if (model.vertices.length > 0) {\n    if (!this._renderer.geometryInHash(model.gid)) {\n      model._makeTriangleEdges();\n      this._renderer._edgesToVertices(model);\n      this._renderer.createBuffers(model.gid, model);\n    }\n\n    this._renderer.drawBuffers(model.gid);\n  }\n};\n\nmodule.exports = p5;\n",
          "filepath": "data/repos/processing/p5.js-0.6/src/webgl/loading.js",
          "repo": "processing/p5.js",
          "version": "0.6",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1889",
    "model_patch": "diff --git a/src/Lexer.js b/src/Lexer.js\n--- a/src/Lexer.js\n+++ b/src/Lexer.js\n@@ -120,7 +120,11 @@\n   blockTokens(src) {\n     src = src.replace(/^ +$/gm, '');\n \n-    const tokens = [];\n+    const tokens = [];\n+    const preserveSpaces = this.options.preserveSpacesInCodeBlocks;\n+\n+    if (preserveSpaces) {\n+      src = src.replace(/^\\s+$/gm, match => ' '.repeat(match.length));\n+    }\n \n     let token, lastToken, cutSrc;\n     while (src) {\ndiff --git a/src/defaults.js b/src/defaults.js\n--- a/src/defaults.js\n+++ b/src/defaults.js\n@@ -12,6 +12,7 @@\n   headerIds: true,\n   headerPrefix: '',\n   mangle: true,\n+  preserveSpacesInCodeBlocks: false,\n   pedantic: false,\n   renderer: null,\n   sanitize: false,",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 444.36,
      "issue_embedding_time_ms": 444.36,
      "retrieval_time_ms_jina": 1.08,
      "retrieval_time_ms": 1.08,
      "total_retrieval_time_ms": 445.44,
      "generation_time_ms": 4162.19,
      "total_io_time_ms": 4607.63,
      "input_total_token_limit": null,
      "issue_text_tokens": 811,
      "vlm_tokens": 0,
      "retrieved_tokens": 11458,
      "prompt_template_tokens": 512,
      "total_input_prompt_tokens": 12781,
      "output_generated_tokens": 225,
      "total_io_tokens": 13006,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nLines with only spaces are removed, even in code blocks\\n**Describe the bug**\\r\\n\\r\\nSpaces are removed from lines with *only* spaces. Though this might make some kind of sense for normal markdown, in code blocks it could be a problem in some esoteric programming languages such as whitespace but, perhaps more importantly, in real-time editing situations which is how it effects my use case.\\r\\n\\r\\n**To Reproduce**\\r\\n\\r\\n- [Marked Demo](https://marked.js.org/demo/?outputType=lexer&text=%60%60%60%0AThis%0A%20%20%20%20%20%20%0ATest%0A%20%20.%0A%60%60%60&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20false%2C%0A%20%22gfm%22%3A%20true%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22walkTokens%22%3A%20null%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=master)  (Issue)\\r\\n  ![image](https://user-images.githubusercontent.com/1341861/102939920-2b1f3b80-447d-11eb-85aa-bb56649cd0e8.png)\\r\\n\\r\\n- [CommonMark Demo](https://spec.commonmark.org/dingus/?text=%60%60%60%0AThis%0A%20%20%20%20%20%20%20%0Atest%0A%20%20.%0A%60%60%60)  (Works as anticipated)\\r\\n\\r\\nThis caught me off guard because when I tried to fix it by extending the marked tokenizer, I found that the spaces were removed even there!\\r\\n\\r\\n```js\\r\\n[\\r\\n  {type:\\\"code\\\", raw:\\\"```\\\\nThis\\\\n\\\\nTest\\\\n  .\\\\n```\\\", lang:\\\"\\\", text:\\\"This\\\\n\\\\nTest\\\\n  .\\\"}\\r\\n  //                           ^^^\\r\\n]\\r\\n```\\r\\n\\r\\nThe problem is the first line of the lexer `blockTokens` function:\\r\\nhttps://github.com/markedjs/marked/blob/c8783a3c1087c5a899ea6c1b96eb8a8e89fcd739/src/Lexer.js#L123\\r\\n\\r\\nIn my project I was forced to override the whole `blockTokens` function removing the first line. What would be the repercussions of removing it in general? Alternatively this could be an option..\\r\\n\\r\\nThanks for the great library!\\n\\n</issue>\\n\\n<code>\\n[start of marked.js]\\nconst Lexer = require('./Lexer.js');\\nconst Parser = require('./Parser.js');\\nconst Tokenizer = require('./Tokenizer.js');\\nconst Renderer = require('./Renderer.js');\\nconst TextRenderer = require('./TextRenderer.js');\\nconst Slugger = require('./Slugger.js');\\nconst {\\n  merge,\\n  checkSanitizeDeprecation,\\n  escape\\n} = require('./helpers.js');\\nconst {\\n  getDefaults,\\n  changeDefaults,\\n  defaults\\n} = require('./defaults.js');\\n\\n/**\\n * Marked\\n */\\nfunction marked(src, opt, callback) {\\n  // throw error in case of non string input\\n  if (typeof src === 'undefined' || src === null) {\\n    throw new Error('marked(): input parameter is undefined or null');\\n  }\\n  if (typeof src !== 'string') {\\n    throw new Error('marked(): input parameter is of type '\\n      + Object.prototype.toString.call(src) + ', string expected');\\n  }\\n\\n  if (typeof opt === 'function') {\\n    callback = opt;\\n    opt = null;\\n  }\\n\\n  opt = merge({}, marked.defaults, opt || {});\\n  checkSanitizeDeprecation(opt);\\n\\n  if (callback) {\\n    const highlight = opt.highlight;\\n    let tokens;\\n\\n    try {\\n      tokens = Lexer.lex(src, opt);\\n    } catch (e) {\\n      return callback(e);\\n    }\\n\\n    const done = function(err) {\\n      let out;\\n\\n      if (!err) {\\n        try {\\n          out = Parser.parse(tokens, opt);\\n        } catch (e) {\\n          err = e;\\n        }\\n      }\\n\\n      opt.highlight = highlight;\\n\\n      return err\\n        ? callback(err)\\n        : callback(null, out);\\n    };\\n\\n    if (!highlight || highlight.length < 3) {\\n      return done();\\n    }\\n\\n    delete opt.highlight;\\n\\n    if (!tokens.length) return done();\\n\\n    let pending = 0;\\n    marked.walkTokens(tokens, function(token) {\\n      if (token.type === 'code') {\\n        pending++;\\n        setTimeout(() => {\\n          highlight(token.text, token.lang, function(err, code) {\\n            if (err) {\\n              return done(err);\\n            }\\n            if (code != null && code !== token.text) {\\n              token.text = code;\\n              token.escaped = true;\\n            }\\n\\n            pending--;\\n            if (pending === 0) {\\n              done();\\n            }\\n          });\\n        }, 0);\\n      }\\n    });\\n\\n    if (pending === 0) {\\n      done();\\n    }\\n\\n    return;\\n  }\\n\\n  try {\\n    const tokens = Lexer.lex(src, opt);\\n    if (opt.walkTokens) {\\n      marked.walkTokens(tokens, opt.walkTokens);\\n    }\\n    return Parser.parse(tokens, opt);\\n  } catch (e) {\\n    e.message += '\\\\nPlease report this to https://github.com/markedjs/marked.';\\n    if (opt.silent) {\\n      return '<p>An error occurred:</p><pre>'\\n        + escape(e.message + '', true)\\n        + '</pre>';\\n    }\\n    throw e;\\n  }\\n}\\n\\n/**\\n * Options\\n */\\n\\nmarked.options =\\nmarked.setOptions = function(opt) {\\n  merge(marked.defaults, opt);\\n  changeDefaults(marked.defaults);\\n  return marked;\\n};\\n\\nmarked.getDefaults = getDefaults;\\n\\nmarked.defaults = defaults;\\n\\n/**\\n * Use Extension\\n */\\n\\nmarked.use = function(extension) {\\n  const opts = merge({}, extension);\\n  if (extension.renderer) {\\n    const renderer = marked.defaults.renderer || new Renderer();\\n    for (const prop in extension.renderer) {\\n      const prevRenderer = renderer[prop];\\n      renderer[prop] = (...args) => {\\n        let ret = extension.renderer[prop].apply(renderer, args);\\n        if (ret === false) {\\n          ret = prevRenderer.apply(renderer, args);\\n        }\\n        return ret;\\n      };\\n    }\\n    opts.renderer = renderer;\\n  }\\n  if (extension.tokenizer) {\\n    const tokenizer = marked.defaults.tokenizer || new Tokenizer();\\n    for (const prop in extension.tokenizer) {\\n      const prevTokenizer = tokenizer[prop];\\n      tokenizer[prop] = (...args) => {\\n        let ret = extension.tokenizer[prop].apply(tokenizer, args);\\n        if (ret === false) {\\n          ret = prevTokenizer.apply(tokenizer, args);\\n        }\\n        return ret;\\n      };\\n    }\\n    opts.tokenizer = tokenizer;\\n  }\\n  if (extension.walkTokens) {\\n    const walkTokens = marked.defaults.walkTokens;\\n    opts.walkTokens = (token) => {\\n      extension.walkTokens(token);\\n      if (walkTokens) {\\n        walkTokens(token);\\n      }\\n    };\\n  }\\n  marked.setOptions(opts);\\n};\\n\\n/**\\n * Run callback for every token\\n */\\n\\nmarked.walkTokens = function(tokens, callback) {\\n  for (const token of tokens) {\\n    callback(token);\\n    switch (token.type) {\\n      case 'table': {\\n        for (const cell of token.tokens.header) {\\n          marked.walkTokens(cell, callback);\\n        }\\n        for (const row of token.tokens.cells) {\\n          for (const cell of row) {\\n            marked.walkTokens(cell, callback);\\n          }\\n        }\\n        break;\\n      }\\n      case 'list': {\\n        marked.walkTokens(token.items, callback);\\n        break;\\n      }\\n      default: {\\n        if (token.tokens) {\\n          marked.walkTokens(token.tokens, callback);\\n        }\\n      }\\n    }\\n  }\\n};\\n\\n/**\\n * Parse Inline\\n */\\nmarked.parseInline = function(src, opt) {\\n  // throw error in case of non string input\\n  if (typeof src === 'undefined' || src === null) {\\n    throw new Error('marked.parseInline(): input parameter is undefined or null');\\n  }\\n  if (typeof src !== 'string') {\\n    throw new Error('marked.parseInline(): input parameter is of type '\\n      + Object.prototype.toString.call(src) + ', string expected');\\n  }\\n\\n  opt = merge({}, marked.defaults, opt || {});\\n  checkSanitizeDeprecation(opt);\\n\\n  try {\\n    const tokens = Lexer.lexInline(src, opt);\\n    if (opt.walkTokens) {\\n      marked.walkTokens(tokens, opt.walkTokens);\\n    }\\n    return Parser.parseInline(tokens, opt);\\n  } catch (e) {\\n    e.message += '\\\\nPlease report this to https://github.com/markedjs/marked.';\\n    if (opt.silent) {\\n      return '<p>An error occurred:</p><pre>'\\n        + escape(e.message + '', true)\\n        + '</pre>';\\n    }\\n    throw e;\\n  }\\n};\\n\\n/**\\n * Expose\\n */\\n\\nmarked.Parser = Parser;\\nmarked.parser = Parser.parse;\\n\\nmarked.Renderer = Renderer;\\nmarked.TextRenderer = TextRenderer;\\n\\nmarked.Lexer = Lexer;\\nmarked.lexer = Lexer.lex;\\n\\nmarked.Tokenizer = Tokenizer;\\n\\nmarked.Slugger = Slugger;\\n\\nmarked.parse = marked;\\n\\nmodule.exports = marked;\\n\\n[end of marked.js]\\n[start of USING_PRO.md]\\n## Extending Marked\\n\\nTo champion the single-responsibility and open/closed principles, we have tried to make it relatively painless to extend marked. If you are looking to add custom functionality, this is the place to start.\\n\\n<h2 id=\\\"use\\\">marked.use()</h2>\\n\\n`marked.use(options)` is the recommended way to extend marked. The options object can contain any [option](/using_advanced#options) available in marked.\\n\\nThe `renderer` and `tokenizer` options can be an object with functions that will be merged into the `renderer` and `tokenizer` respectively.\\n\\nThe `renderer` and `tokenizer` functions can return false to fallback to the previous function.\\n\\nThe `walkTokens` option can be a function that will be called with every token before rendering. When calling `use` multiple times with different `walkTokens` functions each function will be called in the **reverse** order in which they were assigned.\\n\\nAll other options will overwrite previously set options.\\n\\n<h2 id=\\\"renderer\\\">The renderer</h2>\\n\\nThe renderer defines the output of the parser.\\n\\n**Example:** Overriding default heading token by adding an embedded anchor tag like on GitHub.\\n\\n```js\\n// Create reference instance\\nconst marked = require('marked');\\n\\n// Override function\\nconst renderer = {\\n  heading(text, level) {\\n    const escapedText = text.toLowerCase().replace(/[^\\\\w]+/g, '-');\\n\\n    return `\\n            <h${level}>\\n              <a name=\\\"${escapedText}\\\" class=\\\"anchor\\\" href=\\\"#${escapedText}\\\">\\n                <span class=\\\"header-link\\\"></span>\\n              </a>\\n              ${text}\\n            </h${level}>`;\\n  }\\n};\\n\\nmarked.use({ renderer });\\n\\n// Run marked\\nconsole.log(marked('# heading+'));\\n```\\n\\n**Output:**\\n\\n```html\\n<h1>\\n  <a name=\\\"heading-\\\" class=\\\"anchor\\\" href=\\\"#heading-\\\">\\n    <span class=\\\"header-link\\\"></span>\\n  </a>\\n  heading+\\n</h1>\\n```\\n\\n### Block level renderer methods\\n\\n- code(*string* code, *string* infostring, *boolean* escaped)\\n- blockquote(*string* quote)\\n- html(*string* html)\\n- heading(*string* text, *number* level, *string* raw, *Slugger* slugger)\\n- hr()\\n- list(*string* body, *boolean* ordered, *number* start)\\n- listitem(*string* text, *boolean* task, *boolean* checked)\\n- checkbox(*boolean* checked)\\n- paragraph(*string* text)\\n- table(*string* header, *string* body)\\n- tablerow(*string* content)\\n- tablecell(*string* content, *object* flags)\\n\\n`slugger` has the `slug` method to create a unique id from value:\\n\\n```js\\nslugger.slug('foo')   // foo\\nslugger.slug('foo')   // foo-1\\nslugger.slug('foo')   // foo-2\\nslugger.slug('foo 1') // foo-1-1\\nslugger.slug('foo-1') // foo-1-2\\n...\\n```\\n\\n`slugger.slug` can also be called with the `dryrun` option for stateless operation:\\n```js\\nslugger.slug('foo')                    // foo\\nslugger.slug('foo')                    // foo-1\\nslugger.slug('foo')                    // foo-2\\nslugger.slug('foo', { dryrun: true })  // foo-3\\nslugger.slug('foo', { dryrun: true })  // foo-3\\nslugger.slug('foo')                    // foo-3\\nslugger.slug('foo')                    // foo-4\\n...\\n```\\n\\n`flags` has the following properties:\\n\\n```js\\n{\\n    header: true || false,\\n    align: 'center' || 'left' || 'right'\\n}\\n```\\n\\n### Inline level renderer methods\\n\\n- strong(*string* text)\\n- em(*string* text)\\n- codespan(*string* code)\\n- br()\\n- del(*string* text)\\n- link(*string* href, *string* title, *string* text)\\n- image(*string* href, *string* title, *string* text)\\n- text(*string* text)\\n\\n<h2 id=\\\"tokenizer\\\">The tokenizer</h2>\\n\\nThe tokenizer defines how to turn markdown text into tokens.\\n\\n**Example:** Overriding default `codespan` tokenizer to include LaTeX.\\n\\n```js\\n// Create reference instance\\nconst marked = require('marked');\\n\\n// Override function\\nconst tokenizer = {\\n  codespan(src) {\\n    const match = src.match(/\\\\$+([^\\\\$\\\\n]+?)\\\\$+/);\\n    if (match) {\\n      return {\\n        type: 'codespan',\\n        raw: match[0],\\n        text: match[1].trim()\\n      };\\n    }\\n\\n    // return false to use original codespan tokenizer\\n    return false;\\n  }\\n};\\n\\nmarked.use({ tokenizer });\\n\\n// Run marked\\nconsole.log(marked('$ latex code $\\\\n\\\\n` other code `'));\\n```\\n\\n**Output:**\\n\\n```html\\n<p><code>latex code</code></p>\\n<p><code>other code</code></p>\\n```\\n\\n### Block level tokenizer methods\\n\\n- space(*string* src)\\n- code(*string* src, *array* tokens)\\n- fences(*string* src)\\n- heading(*string* src)\\n- nptable(*string* src)\\n- hr(*string* src)\\n- blockquote(*string* src)\\n- list(*string* src)\\n- html(*string* src)\\n- def(*string* src)\\n- table(*string* src)\\n- lheading(*string* src)\\n- paragraph(*string* src)\\n- text(*string* src, *array* tokens)\\n\\n### Inline level tokenizer methods\\n\\n- escape(*string* src)\\n- tag(*string* src, *bool* inLink, *bool* inRawBlock)\\n- link(*string* src)\\n- reflink(*string* src, *object* links)\\n- strong(*string* src)\\n- em(*string* src)\\n- codespan(*string* src)\\n- br(*string* src)\\n- del(*string* src)\\n- autolink(*string* src, *function* mangle)\\n- url(*string* src, *function* mangle)\\n- inlineText(*string* src, *bool* inRawBlock, *function* smartypants)\\n\\n`mangle` is a method that changes text to HTML character references:\\n\\n```js\\nmangle('test@example.com')\\n// \\\"&#x74;&#101;&#x73;&#116;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#x63;&#111;&#x6d;\\\"\\n```\\n\\n`smartypants` is a method that translates plain ASCII punctuation characters into \\u201csmart\\u201d typographic punctuation HTML entities:\\n\\nhttps://daringfireball.net/projects/smartypants/\\n\\n```js\\nsmartypants('\\\"this ... string\\\"')\\n// \\\"\\u201cthis \\u2026 string\\u201d\\\"\\n```\\n\\n<h2 id=\\\"walk-tokens\\\">Walk Tokens</h2>\\n\\nThe walkTokens function gets called with every token. Child tokens are called before moving on to sibling tokens. Each token is passed by reference so updates are persisted when passed to the parser. The return value of the function is ignored.\\n\\n**Example:** Overriding heading tokens to start at h2.\\n\\n```js\\nconst marked = require('marked');\\n\\n// Override function\\nconst walkTokens = (token) => {\\n  if (token.type === 'heading') {\\n    token.depth += 1;\\n  }\\n};\\n\\nmarked.use({ walkTokens });\\n\\n// Run marked\\nconsole.log(marked('# heading 2\\\\n\\\\n## heading 3'));\\n```\\n\\n**Output:**\\n\\n```html\\n<h2 id=\\\"heading-2\\\">heading 2</h2>\\n<h3 id=\\\"heading-3\\\">heading 3</h3>\\n```\\n\\n<h2 id=\\\"lexer\\\">The lexer</h2>\\n\\nThe lexer takes a markdown string and calls the tokenizer functions.\\n\\n<h2 id=\\\"parser\\\">The parser</h2>\\n\\nThe parser takes tokens as input and calls the renderer functions.\\n\\n***\\n\\n<h2 id=\\\"extend\\\">Access to lexer and parser</h2>\\n\\nYou also have direct access to the lexer and parser if you so desire.\\n\\n``` js\\nconst tokens = marked.lexer(markdown, options);\\nconsole.log(marked.parser(tokens, options));\\n```\\n\\n``` js\\nconst lexer = new marked.Lexer(options);\\nconst tokens = lexer.lex(markdown);\\nconsole.log(tokens);\\nconsole.log(lexer.tokenizer.rules.block); // block level rules used\\nconsole.log(lexer.tokenizer.rules.inline); // inline level rules used\\nconsole.log(marked.Lexer.rules.block); // all block level rules\\nconsole.log(marked.Lexer.rules.inline); // all inline level rules\\n```\\n\\n``` bash\\n$ node\\n> require('marked').lexer('> I am using marked.')\\n[\\n  {\\n    type: \\\"blockquote\\\",\\n    raw: \\\"> I am using marked.\\\",\\n    tokens: [\\n      {\\n        type: \\\"paragraph\\\",\\n        raw: \\\"I am using marked.\\\",\\n        text: \\\"I am using marked.\\\",\\n        tokens: [\\n          {\\n            type: \\\"text\\\",\\n            raw: \\\"I am using marked.\\\",\\n            text: \\\"I am using marked.\\\"\\n          }\\n        ]\\n      }\\n    ]\\n  },\\n  links: {}\\n]\\n```\\n\\nThe Lexer builds an array of tokens, which will be passed to the Parser.\\nThe Parser processes each token in the token array:\\n\\n``` js\\nconst marked = require('marked');\\n\\nconst md = `\\n  # heading\\n\\n  [link][1]\\n\\n  [1]: #heading \\\"heading\\\"\\n`;\\n\\nconst tokens = marked.lexer(md);\\nconsole.log(tokens);\\n\\nconst html = marked.parser(tokens);\\nconsole.log(html);\\n```\\n\\n``` bash\\n[\\n  {\\n    type: \\\"heading\\\",\\n    raw: \\\"  # heading\\\\n\\\\n\\\",\\n    depth: 1,\\n    text: \\\"heading\\\",\\n    tokens: [\\n      {\\n        type: \\\"text\\\",\\n        raw: \\\"heading\\\",\\n        text: \\\"heading\\\"\\n      }\\n    ]\\n  },\\n  {\\n    type: \\\"paragraph\\\",\\n    raw: \\\"  [link][1]\\\",\\n    text: \\\"  [link][1]\\\",\\n    tokens: [\\n      {\\n        type: \\\"text\\\",\\n        raw: \\\"  \\\",\\n        text: \\\"  \\\"\\n      },\\n      {\\n        type: \\\"link\\\",\\n        raw: \\\"[link][1]\\\",\\n        text: \\\"link\\\",\\n        href: \\\"#heading\\\",\\n        title: \\\"heading\\\",\\n        tokens: [\\n          {\\n            type: \\\"text\\\",\\n            raw: \\\"link\\\",\\n            text: \\\"link\\\"\\n          }\\n        ]\\n      }\\n    ]\\n  },\\n  {\\n    type: \\\"space\\\",\\n    raw: \\\"\\\\n\\\\n\\\"\\n  },\\n  links: {\\n    \\\"1\\\": {\\n      href: \\\"#heading\\\",\\n      title: \\\"heading\\\"\\n    }\\n  }\\n]\\n<h1 id=\\\"heading\\\">heading</h1>\\n<p>  <a href=\\\"#heading\\\" title=\\\"heading\\\">link</a></p>\\n```\\n\\n[end of USING_PRO.md]\\n[start of marked.js]\\n  function marked(src, opt, callback) {\\n    // throw error in case of non string input\\n    if (typeof src === 'undefined' || src === null) {\\n      throw new Error('marked(): input parameter is undefined or null');\\n    }\\n\\n    if (typeof src !== 'string') {\\n      throw new Error('marked(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\\n    }\\n\\n    if (typeof opt === 'function') {\\n      callback = opt;\\n      opt = null;\\n    }\\n\\n    opt = merge$2({}, marked.defaults, opt || {});\\n    checkSanitizeDeprecation$1(opt);\\n\\n    if (callback) {\\n      var highlight = opt.highlight;\\n      var tokens;\\n\\n      try {\\n        tokens = Lexer_1.lex(src, opt);\\n      } catch (e) {\\n        return callback(e);\\n      }\\n\\n      var done = function done(err) {\\n        var out;\\n\\n        if (!err) {\\n          try {\\n            out = Parser_1.parse(tokens, opt);\\n          } catch (e) {\\n            err = e;\\n          }\\n        }\\n\\n        opt.highlight = highlight;\\n        return err ? callback(err) : callback(null, out);\\n      };\\n\\n      if (!highlight || highlight.length < 3) {\\n        return done();\\n      }\\n\\n      delete opt.highlight;\\n      if (!tokens.length) return done();\\n      var pending = 0;\\n      marked.walkTokens(tokens, function (token) {\\n        if (token.type === 'code') {\\n          pending++;\\n          setTimeout(function () {\\n            highlight(token.text, token.lang, function (err, code) {\\n              if (err) {\\n                return done(err);\\n              }\\n\\n              if (code != null && code !== token.text) {\\n                token.text = code;\\n                token.escaped = true;\\n              }\\n\\n              pending--;\\n\\n              if (pending === 0) {\\n                done();\\n              }\\n            });\\n          }, 0);\\n        }\\n      });\\n\\n      if (pending === 0) {\\n        done();\\n      }\\n\\n      return;\\n    }\\n\\n    try {\\n      var _tokens = Lexer_1.lex(src, opt);\\n\\n      if (opt.walkTokens) {\\n        marked.walkTokens(_tokens, opt.walkTokens);\\n      }\\n\\n      return Parser_1.parse(_tokens, opt);\\n    } catch (e) {\\n      e.message += '\\\\nPlease report this to https://github.com/markedjs/marked.';\\n\\n      if (opt.silent) {\\n        return '<p>An error occurred:</p><pre>' + escape$2(e.message + '', true) + '</pre>';\\n      }\\n\\n      throw e;\\n    }\\n  }\\n  /**\\n   * Options\\n   */\\n\\n\\n  marked.options = marked.setOptions = function (opt) {\\n    merge$2(marked.defaults, opt);\\n    changeDefaults(marked.defaults);\\n    return marked;\\n  };\\n\\n  marked.getDefaults = getDefaults;\\n  marked.defaults = defaults$5;\\n  /**\\n   * Use Extension\\n   */\\n\\n  marked.use = function (extension) {\\n    var opts = merge$2({}, extension);\\n\\n    if (extension.renderer) {\\n      (function () {\\n        var renderer = marked.defaults.renderer || new Renderer_1();\\n\\n        var _loop = function _loop(prop) {\\n          var prevRenderer = renderer[prop];\\n\\n          renderer[prop] = function () {\\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\\n              args[_key] = arguments[_key];\\n            }\\n\\n            var ret = extension.renderer[prop].apply(renderer, args);\\n\\n            if (ret === false) {\\n              ret = prevRenderer.apply(renderer, args);\\n            }\\n\\n            return ret;\\n          };\\n        };\\n\\n        for (var prop in extension.renderer) {\\n          _loop(prop);\\n        }\\n\\n        opts.renderer = renderer;\\n      })();\\n    }\\n\\n    if (extension.tokenizer) {\\n      (function () {\\n        var tokenizer = marked.defaults.tokenizer || new Tokenizer_1();\\n\\n        var _loop2 = function _loop2(prop) {\\n          var prevTokenizer = tokenizer[prop];\\n\\n          tokenizer[prop] = function () {\\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\\n              args[_key2] = arguments[_key2];\\n            }\\n\\n            var ret = extension.tokenizer[prop].apply(tokenizer, args);\\n\\n            if (ret === false) {\\n              ret = prevTokenizer.apply(tokenizer, args);\\n            }\\n\\n            return ret;\\n          };\\n        };\\n\\n        for (var prop in extension.tokenizer) {\\n          _loop2(prop);\\n        }\\n\\n        opts.tokenizer = tokenizer;\\n      })();\\n    }\\n\\n    if (extension.walkTokens) {\\n      var walkTokens = marked.defaults.walkTokens;\\n\\n      opts.walkTokens = function (token) {\\n        extension.walkTokens(token);\\n\\n        if (walkTokens) {\\n          walkTokens(token);\\n        }\\n      };\\n    }\\n\\n    marked.setOptions(opts);\\n  };\\n  /**\\n   * Run callback for every token\\n   */\\n\\n\\n  marked.walkTokens = function (tokens, callback) {\\n    for (var _iterator = _createForOfIteratorHelperLoose(tokens), _step; !(_step = _iterator()).done;) {\\n      var token = _step.value;\\n      callback(token);\\n\\n      switch (token.type) {\\n        case 'table':\\n          {\\n            for (var _iterator2 = _createForOfIteratorHelperLoose(token.tokens.header), _step2; !(_step2 = _iterator2()).done;) {\\n              var cell = _step2.value;\\n              marked.walkTokens(cell, callback);\\n            }\\n\\n            for (var _iterator3 = _createForOfIteratorHelperLoose(token.tokens.cells), _step3; !(_step3 = _iterator3()).done;) {\\n              var row = _step3.value;\\n\\n              for (var _iterator4 = _createForOfIteratorHelperLoose(row), _step4; !(_step4 = _iterator4()).done;) {\\n                var _cell = _step4.value;\\n                marked.walkTokens(_cell, callback);\\n              }\\n            }\\n\\n            break;\\n          }\\n\\n        case 'list':\\n          {\\n            marked.walkTokens(token.items, callback);\\n            break;\\n          }\\n\\n        default:\\n          {\\n            if (token.tokens) {\\n              marked.walkTokens(token.tokens, callback);\\n            }\\n          }\\n      }\\n    }\\n  };\\n  /**\\n   * Parse Inline\\n   */\\n\\n\\n  marked.parseInline = function (src, opt) {\\n    // throw error in case of non string input\\n    if (typeof src === 'undefined' || src === null) {\\n      throw new Error('marked.parseInline(): input parameter is undefined or null');\\n    }\\n\\n    if (typeof src !== 'string') {\\n      throw new Error('marked.parseInline(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\\n    }\\n\\n    opt = merge$2({}, marked.defaults, opt || {});\\n    checkSanitizeDeprecation$1(opt);\\n\\n    try {\\n      var tokens = Lexer_1.lexInline(src, opt);\\n\\n      if (opt.walkTokens) {\\n        marked.walkTokens(tokens, opt.walkTokens);\\n      }\\n\\n      return Parser_1.parseInline(tokens, opt);\\n    } catch (e) {\\n      e.message += '\\\\nPlease report this to https://github.com/markedjs/marked.';\\n\\n      if (opt.silent) {\\n        return '<p>An error occurred:</p><pre>' + escape$2(e.message + '', true) + '</pre>';\\n      }\\n\\n      throw e;\\n    }\\n  };\\n  /**\\n   * Expose\\n   */\\n\\n\\n  marked.Parser = Parser_1;\\n  marked.parser = Parser_1.parse;\\n  marked.Renderer = Renderer_1;\\n  marked.TextRenderer = TextRenderer_1;\\n  marked.Lexer = Lexer_1;\\n  marked.lexer = Lexer_1.lex;\\n  marked.Tokenizer = Tokenizer_1;\\n  marked.Slugger = Slugger_1;\\n  marked.parse = marked;\\n  var marked_1 = marked;\\n\\n  return marked_1;\\n\\n})));\\n[end of marked.js]\\n[start of marked.esm.js]\\n          };\\n        }\\n        continue;\\n      }\\n\\n      // table (gfm)\\n      if (token = this.tokenizer.table(src)) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // lheading\\n      if (token = this.tokenizer.lheading(src)) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // top-level paragraph\\n      if (top && (token = this.tokenizer.paragraph(src))) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // text\\n      if (token = this.tokenizer.text(src, tokens)) {\\n        src = src.substring(token.raw.length);\\n        if (token.type) {\\n          tokens.push(token);\\n        } else {\\n          lastToken = tokens[tokens.length - 1];\\n          lastToken.raw += '\\\\n' + token.raw;\\n          lastToken.text += '\\\\n' + token.text;\\n        }\\n        continue;\\n      }\\n\\n      if (src) {\\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\\n        if (this.options.silent) {\\n          console.error(errMsg);\\n          break;\\n        } else {\\n          throw new Error(errMsg);\\n        }\\n      }\\n    }\\n\\n    return tokens;\\n  }\\n\\n  inline(tokens) {\\n    let i,\\n      j,\\n      k,\\n      l2,\\n      row,\\n      token;\\n\\n    const l = tokens.length;\\n    for (i = 0; i < l; i++) {\\n      token = tokens[i];\\n      switch (token.type) {\\n        case 'paragraph':\\n        case 'text':\\n        case 'heading': {\\n          token.tokens = [];\\n          this.inlineTokens(token.text, token.tokens);\\n          break;\\n        }\\n        case 'table': {\\n          token.tokens = {\\n            header: [],\\n            cells: []\\n          };\\n\\n          // header\\n          l2 = token.header.length;\\n          for (j = 0; j < l2; j++) {\\n            token.tokens.header[j] = [];\\n            this.inlineTokens(token.header[j], token.tokens.header[j]);\\n          }\\n\\n          // cells\\n          l2 = token.cells.length;\\n          for (j = 0; j < l2; j++) {\\n            row = token.cells[j];\\n            token.tokens.cells[j] = [];\\n            for (k = 0; k < row.length; k++) {\\n              token.tokens.cells[j][k] = [];\\n              this.inlineTokens(row[k], token.tokens.cells[j][k]);\\n            }\\n          }\\n\\n          break;\\n        }\\n        case 'blockquote': {\\n          this.inline(token.tokens);\\n          break;\\n        }\\n        case 'list': {\\n          l2 = token.items.length;\\n          for (j = 0; j < l2; j++) {\\n            this.inline(token.items[j].tokens);\\n          }\\n          break;\\n        }\\n      }\\n    }\\n\\n    return tokens;\\n  }\\n\\n  /**\\n   * Lexing/Compiling\\n   */\\n  inlineTokens(src, tokens = [], inLink = false, inRawBlock = false, prevChar = '') {\\n    let token;\\n\\n    // String with links masked to avoid interference with em and strong\\n    let maskedSrc = src;\\n    let match;\\n\\n    // Mask out reflinks\\n    if (this.tokens.links) {\\n      const links = Object.keys(this.tokens.links);\\n      if (links.length > 0) {\\n        while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\\n          if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\\n            maskedSrc = maskedSrc.slice(0, match.index) + '[' + 'a'.repeat(match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\\n          }\\n        }\\n      }\\n    }\\n    // Mask out other blocks\\n    while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\\n      maskedSrc = maskedSrc.slice(0, match.index) + '[' + 'a'.repeat(match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\\n    }\\n\\n    while (src) {\\n      // escape\\n      if (token = this.tokenizer.escape(src)) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // tag\\n      if (token = this.tokenizer.tag(src, inLink, inRawBlock)) {\\n        src = src.substring(token.raw.length);\\n        inLink = token.inLink;\\n        inRawBlock = token.inRawBlock;\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // link\\n      if (token = this.tokenizer.link(src)) {\\n        src = src.substring(token.raw.length);\\n        if (token.type === 'link') {\\n          token.tokens = this.inlineTokens(token.text, [], true, inRawBlock);\\n        }\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // reflink, nolink\\n      if (token = this.tokenizer.reflink(src, this.tokens.links)) {\\n        src = src.substring(token.raw.length);\\n        if (token.type === 'link') {\\n          token.tokens = this.inlineTokens(token.text, [], true, inRawBlock);\\n        }\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // strong\\n      if (token = this.tokenizer.strong(src, maskedSrc, prevChar)) {\\n        src = src.substring(token.raw.length);\\n        token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // em\\n      if (token = this.tokenizer.em(src, maskedSrc, prevChar)) {\\n        src = src.substring(token.raw.length);\\n        token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // code\\n      if (token = this.tokenizer.codespan(src)) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // br\\n      if (token = this.tokenizer.br(src)) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // del (gfm)\\n      if (token = this.tokenizer.del(src)) {\\n        src = src.substring(token.raw.length);\\n        token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // autolink\\n      if (token = this.tokenizer.autolink(src, mangle)) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // url (gfm)\\n      if (!inLink && (token = this.tokenizer.url(src, mangle))) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // text\\n      if (token = this.tokenizer.inlineText(src, inRawBlock, smartypants)) {\\n        src = src.substring(token.raw.length);\\n        prevChar = token.raw.slice(-1);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      if (src) {\\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\\n        if (this.options.silent) {\\n          console.error(errMsg);\\n          break;\\n        } else {\\n          throw new Error(errMsg);\\n        }\\n      }\\n    }\\n\\n    return tokens;\\n  }\\n};\\n\\nconst { defaults: defaults$3 } = defaults;\\nconst {\\n  cleanUrl: cleanUrl$1,\\n  escape: escape$2\\n} = helpers;\\n\\n/**\\n * Renderer\\n */\\nvar Renderer_1 = class Renderer {\\n  constructor(options) {\\n    this.options = options || defaults$3;\\n  }\\n\\n  code(code, infostring, escaped) {\\n    const lang = (infostring || '').match(/\\\\S*/)[0];\\n    if (this.options.highlight) {\\n      const out = this.options.highlight(code, lang);\\n      if (out != null && out !== code) {\\n        escaped = true;\\n        code = out;\\n      }\\n    }\\n\\n    if (!lang) {\\n      return '<pre><code>'\\n        + (escaped ? code : escape$2(code, true))\\n        + '</code></pre>\\\\n';\\n    }\\n\\n    return '<pre><code class=\\\"'\\n      + this.options.langPrefix\\n      + escape$2(lang, true)\\n      + '\\\">'\\n      + (escaped ? code : escape$2(code, true))\\n      + '</code></pre>\\\\n';\\n  }\\n\\n  blockquote(quote) {\\n    return '<blockquote>\\\\n' + quote + '</blockquote>\\\\n';\\n  }\\n\\n  html(html) {\\n    return html;\\n  }\\n\\n  heading(text, level, raw, slugger) {\\n    if (this.options.headerIds) {\\n      return '<h'\\n        + level\\n        + ' id=\\\"'\\n        + this.options.headerPrefix\\n        + slugger.slug(raw)\\n        + '\\\">'\\n        + text\\n        + '</h'\\n        + level\\n        + '>\\\\n';\\n    }\\n    // ignore IDs\\n    return '<h' + level + '>' + text + '</h' + level + '>\\\\n';\\n  }\\n\\n  hr() {\\n    return this.options.xhtml ? '<hr/>\\\\n' : '<hr>\\\\n';\\n  }\\n\\n  list(body, ordered, start) {\\n    const type = ordered ? 'ol' : 'ul',\\n      startatt = (ordered && start !== 1) ? (' start=\\\"' + start + '\\\"') : '';\\n    return '<' + type + startatt + '>\\\\n' + body + '</' + type + '>\\\\n';\\n  }\\n\\n  listitem(text) {\\n    return '<li>' + text + '</li>\\\\n';\\n  }\\n\\n  checkbox(checked) {\\n    return '<input '\\n      + (checked ? 'checked=\\\"\\\" ' : '')\\n      + 'disabled=\\\"\\\" type=\\\"checkbox\\\"'\\n      + (this.options.xhtml ? ' /' : '')\\n      + '> ';\\n  }\\n\\n  paragraph(text) {\\n    return '<p>' + text + '</p>\\\\n';\\n  }\\n\\n  table(header, body) {\\n    if (body) body = '<tbody>' + body + '</tbody>';\\n\\n    return '<table>\\\\n'\\n      + '<thead>\\\\n'\\n      + header\\n      + '</thead>\\\\n'\\n      + body\\n      + '</table>\\\\n';\\n  }\\n\\n  tablerow(content) {\\n    return '<tr>\\\\n' + content + '</tr>\\\\n';\\n  }\\n\\n  tablecell(content, flags) {\\n    const type = flags.header ? 'th' : 'td';\\n    const tag = flags.align\\n      ? '<' + type + ' align=\\\"' + flags.align + '\\\">'\\n      : '<' + type + '>';\\n    return tag + content + '</' + type + '>\\\\n';\\n  }\\n\\n  // span level renderer\\n  strong(text) {\\n    return '<strong>' + text + '</strong>';\\n  }\\n\\n  em(text) {\\n    return '<em>' + text + '</em>';\\n  }\\n\\n  codespan(text) {\\n    return '<code>' + text + '</code>';\\n  }\\n\\n  br() {\\n    return this.options.xhtml ? '<br/>' : '<br>';\\n  }\\n\\n  del(text) {\\n    return '<del>' + text + '</del>';\\n  }\\n\\n  link(href, title, text) {\\n    href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\\n    if (href === null) {\\n      return text;\\n    }\\n    let out = '<a href=\\\"' + escape$2(href) + '\\\"';\\n    if (title) {\\n      out += ' title=\\\"' + title + '\\\"';\\n    }\\n    out += '>' + text + '</a>';\\n    return out;\\n  }\\n\\n  image(href, title, text) {\\n    href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\\n    if (href === null) {\\n      return text;\\n    }\\n\\n    let out = '<img src=\\\"' + href + '\\\" alt=\\\"' + text + '\\\"';\\n    if (title) {\\n      out += ' title=\\\"' + title + '\\\"';\\n    }\\n    out += this.options.xhtml ? '/>' : '>';\\n    return out;\\n  }\\n\\n  text(text) {\\n    return text;\\n  }\\n};\\n\\n/**\\n * TextRenderer\\n * returns only the textual part of the token\\n */\\nvar TextRenderer_1 = class TextRenderer {\\n  // no need for block level renderers\\n  strong(text) {\\n    return text;\\n  }\\n\\n  em(text) {\\n    return text;\\n  }\\n\\n  codespan(text) {\\n    return text;\\n  }\\n\\n  del(text) {\\n    return text;\\n  }\\n\\n  html(text) {\\n    return text;\\n  }\\n\\n  text(text) {\\n    return text;\\n  }\\n\\n  link(href, title, text) {\\n    return '' + text;\\n  }\\n\\n  image(href, title, text) {\\n    return '' + text;\\n  }\\n\\n  br() {\\n    return '';\\n  }\\n};\\n\\n/**\\n * Slugger generates header id\\n */\\nvar Slugger_1 = class Slugger {\\n  constructor() {\\n    this.seen = {};\\n  }\\n\\n  serialize(value) {\\n    return value\\n      .toLowerCase()\\n      .trim()\\n      // remove html tags\\n      .replace(/<[!\\\\/a-z].*?>/ig, '')\\n      // remove unwanted chars\\n      .replace(/[\\\\u2000-\\\\u206F\\\\u2E00-\\\\u2E7F\\\\\\\\'!\\\"#$%&()*+,./:;<=>?@[\\\\]^`{|}~]/g, '')\\n      .replace(/\\\\s/g, '-');\\n  }\\n\\n  /**\\n   * Finds the next safe (unique) slug to use\\n   */\\n  getNextSafeSlug(originalSlug, isDryRun) {\\n    let slug = originalSlug;\\n    let occurenceAccumulator = 0;\\n    if (this.seen.hasOwnProperty(slug)) {\\n      occurenceAccumulator = this.seen[originalSlug];\\n      do {\\n        occurenceAccumulator++;\\n        slug = originalSlug + '-' + occurenceAccumulator;\\n      } while (this.seen.hasOwnProperty(slug));\\n    }\\n    if (!isDryRun) {\\n      this.seen[originalSlug] = occurenceAccumulator;\\n      this.seen[slug] = 0;\\n    }\\n    return slug;\\n  }\\n\\n  /**\\n   * Convert string to unique id\\n   * @param {object} options\\n   * @param {boolean} options.dryrun Generates the next unique slug without updating the internal accumulator.\\n   */\\n  slug(value, options = {}) {\\n    const slug = this.serialize(value);\\n    return this.getNextSafeSlug(slug, options.dryrun);\\n  }\\n};\\n\\nconst { defaults: defaults$4 } = defaults;\\nconst {\\n  unescape: unescape$1\\n} = helpers;\\n\\n/**\\n * Parsing & Compiling\\n */\\nvar Parser_1 = class Parser {\\n  constructor(options) {\\n    this.options = options || defaults$4;\\n    this.options.renderer = this.options.renderer || new Renderer_1();\\n    this.renderer = this.options.renderer;\\n    this.renderer.options = this.options;\\n    this.textRenderer = new TextRenderer_1();\\n    this.slugger = new Slugger_1();\\n  }\\n\\n  /**\\n   * Static Parse Method\\n   */\\n  static parse(tokens, options) {\\n    const parser = new Parser(options);\\n    return parser.parse(tokens);\\n  }\\n\\n  /**\\n   * Static Parse Inline Method\\n   */\\n  static parseInline(tokens, options) {\\n    const parser = new Parser(options);\\n    return parser.parseInline(tokens);\\n  }\\n\\n  /**\\n   * Parse Loop\\n   */\\n  parse(tokens, top = true) {\\n    let out = '',\\n      i,\\n      j,\\n      k,\\n      l2,\\n      l3,\\n      row,\\n      cell,\\n      header,\\n      body,\\n      token,\\n      ordered,\\n      start,\\n      loose,\\n      itemBody,\\n      item,\\n      checked,\\n      task,\\n      checkbox;\\n\\n    const l = tokens.length;\\n    for (i = 0; i < l; i++) {\\n      token = tokens[i];\\n      switch (token.type) {\\n        case 'space': {\\n          continue;\\n        }\\n        case 'hr': {\\n          out += this.renderer.hr();\\n          continue;\\n        }\\n        case 'heading': {\\n          out += this.renderer.heading(\\n            this.parseInline(token.tokens),\\n            token.depth,\\n            unescape$1(this.parseInline(token.tokens, this.textRenderer)),\\n            this.slugger);\\n          continue;\\n        }\\n        case 'code': {\\n          out += this.renderer.code(token.text,\\n            token.lang,\\n            token.escaped);\\n          continue;\\n        }\\n        case 'table': {\\n          header = '';\\n\\n          // header\\n          cell = '';\\n          l2 = token.header.length;\\n          for (j = 0; j < l2; j++) {\\n            cell += this.renderer.tablecell(\\n              this.parseInline(token.tokens.header[j]),\\n              { header: true, align: token.align[j] }\\n            );\\n          }\\n          header += this.renderer.tablerow(cell);\\n\\n          body = '';\\n          l2 = token.cells.length;\\n          for (j = 0; j < l2; j++) {\\n            row = token.tokens.cells[j];\\n\\n            cell = '';\\n            l3 = row.length;\\n            for (k = 0; k < l3; k++) {\\n              cell += this.renderer.tablecell(\\n                this.parseInline(row[k]),\\n                { header: false, align: token.align[k] }\\n              );\\n            }\\n\\n            body += this.renderer.tablerow(cell);\\n          }\\n          out += this.renderer.table(header, body);\\n          continue;\\n        }\\n        case 'blockquote': {\\n          body = this.parse(token.tokens);\\n          out += this.renderer.blockquote(body);\\n          continue;\\n        }\\n        case 'list': {\\n          ordered = token.ordered;\\n          start = token.start;\\n          loose = token.loose;\\n          l2 = token.items.length;\\n\\n          body = '';\\n          for (j = 0; j < l2; j++) {\\n            item = token.items[j];\\n            checked = item.checked;\\n            task = item.task;\\n\\n            itemBody = '';\\n            if (item.task) {\\n              checkbox = this.renderer.checkbox(checked);\\n              if (loose) {\\n                if (item.tokens.length > 0 && item.tokens[0].type === 'text') {\\n                  item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\\n                  if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\\n                    item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\\n                  }\\n                } else {\\n                  item.tokens.unshift({\\n                    type: 'text',\\n                    text: checkbox\\n                  });\\n                }\\n              } else {\\n                itemBody += checkbox;\\n              }\\n            }\\n\\n            itemBody += this.parse(item.tokens, loose);\\n            body += this.renderer.listitem(itemBody, task, checked);\\n          }\\n\\n          out += this.renderer.list(body, ordered, start);\\n          continue;\\n        }\\n        case 'html': {\\n          // TODO parse inline content if parameter markdown=1\\n          out += this.renderer.html(token.text);\\n          continue;\\n        }\\n        case 'paragraph': {\\n          out += this.renderer.paragraph(this.parseInline(token.tokens));\\n          continue;\\n        }\\n        case 'text': {\\n          body = token.tokens ? this.parseInline(token.tokens) : token.text;\\n          while (i + 1 < l && tokens[i + 1].type === 'text') {\\n            token = tokens[++i];\\n            body += '\\\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\\n          }\\n          out += top ? this.renderer.paragraph(body) : body;\\n          continue;\\n        }\\n        default: {\\n          const errMsg = 'Token with \\\"' + token.type + '\\\" type was not found.';\\n          if (this.options.silent) {\\n            console.error(errMsg);\\n            return;\\n          } else {\\n            throw new Error(errMsg);\\n          }\\n        }\\n      }\\n    }\\n\\n    return out;\\n  }\\n\\n  /**\\n   * Parse Inline Tokens\\n   */\\n  parseInline(tokens, renderer) {\\n    renderer = renderer || this.renderer;\\n    let out = '',\\n      i,\\n      token;\\n\\n    const l = tokens.length;\\n    for (i = 0; i < l; i++) {\\n      token = tokens[i];\\n      switch (token.type) {\\n        case 'escape': {\\n          out += renderer.text(token.text);\\n          break;\\n        }\\n        case 'html': {\\n          out += renderer.html(token.text);\\n          break;\\n        }\\n        case 'link': {\\n          out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\\n          break;\\n        }\\n        case 'image': {\\n          out += renderer.image(token.href, token.title, token.text);\\n          break;\\n        }\\n        case 'strong': {\\n          out += renderer.strong(this.parseInline(token.tokens, renderer));\\n          break;\\n        }\\n        case 'em': {\\n          out += renderer.em(this.parseInline(token.tokens, renderer));\\n          break;\\n        }\\n        case 'codespan': {\\n          out += renderer.codespan(token.text);\\n          break;\\n        }\\n        case 'br': {\\n          out += renderer.br();\\n          break;\\n        }\\n        case 'del': {\\n          out += renderer.del(this.parseInline(token.tokens, renderer));\\n          break;\\n        }\\n        case 'text': {\\n          out += renderer.text(token.text);\\n          break;\\n        }\\n        default: {\\n          const errMsg = 'Token with \\\"' + token.type + '\\\" type was not found.';\\n          if (this.options.silent) {\\n            console.error(errMsg);\\n            return;\\n          } else {\\n            throw new Error(errMsg);\\n          }\\n        }\\n      }\\n    }\\n    return out;\\n  }\\n};\\n\\nconst {\\n  merge: merge$2,\\n  checkSanitizeDeprecation: checkSanitizeDeprecation$1,\\n  escape: escape$3\\n} = helpers;\\nconst {\\n  getDefaults,\\n  changeDefaults,\\n  defaults: defaults$5\\n} = defaults;\\n\\n/**\\n * Marked\\n */\\nfunction marked(src, opt, callback) {\\n  // throw error in case of non string input\\n  if (typeof src === 'undefined' || src === null) {\\n    throw new Error('marked(): input parameter is undefined or null');\\n  }\\n  if (typeof src !== 'string') {\\n    throw new Error('marked(): input parameter is of type '\\n      + Object.prototype.toString.call(src) + ', string expected');\\n  }\\n\\n  if (typeof opt === 'function') {\\n    callback = opt;\\n    opt = null;\\n  }\\n\\n  opt = merge$2({}, marked.defaults, opt || {});\\n  checkSanitizeDeprecation$1(opt);\\n\\n  if (callback) {\\n    const highlight = opt.highlight;\\n    let tokens;\\n\\n    try {\\n      tokens = Lexer_1.lex(src, opt);\\n    } catch (e) {\\n      return callback(e);\\n    }\\n\\n    const done = function(err) {\\n      let out;\\n\\n      if (!err) {\\n        try {\\n          out = Parser_1.parse(tokens, opt);\\n        } catch (e) {\\n          err = e;\\n        }\\n      }\\n\\n      opt.highlight = highlight;\\n\\n      return err\\n        ? callback(err)\\n        : callback(null, out);\\n    };\\n\\n    if (!highlight || highlight.length < 3) {\\n      return done();\\n    }\\n\\n    delete opt.highlight;\\n\\n    if (!tokens.length) return done();\\n\\n    let pending = 0;\\n    marked.walkTokens(tokens, function(token) {\\n      if (token.type === 'code') {\\n        pending++;\\n        setTimeout(() => {\\n          highlight(token.text, token.lang, function(err, code) {\\n            if (err) {\\n              return done(err);\\n            }\\n            if (code != null && code !== token.text) {\\n              token.text = code;\\n              token.escaped = true;\\n            }\\n\\n            pending--;\\n            if (pending === 0) {\\n              done();\\n            }\\n          });\\n        }, 0);\\n      }\\n    });\\n\\n    if (pending === 0) {\\n      done();\\n    }\\n\\n    return;\\n  }\\n\\n  try {\\n    const tokens = Lexer_1.lex(src, opt);\\n    if (opt.walkTokens) {\\n      marked.walkTokens(tokens, opt.walkTokens);\\n    }\\n    return Parser_1.parse(tokens, opt);\\n  } catch (e) {\\n    e.message += '\\\\nPlease report this to https://github.com/markedjs/marked.';\\n    if (opt.silent) {\\n      return '<p>An error occurred:</p><pre>'\\n        + escape$3(e.message + '', true)\\n        + '</pre>';\\n    }\\n    throw e;\\n  }\\n}\\n\\n/**\\n * Options\\n */\\n\\nmarked.options =\\nmarked.setOptions = function(opt) {\\n  merge$2(marked.defaults, opt);\\n  changeDefaults(marked.defaults);\\n  return marked;\\n};\\n\\nmarked.getDefaults = getDefaults;\\n\\nmarked.defaults = defaults$5;\\n\\n/**\\n * Use Extension\\n */\\n\\nmarked.use = function(extension) {\\n  const opts = merge$2({}, extension);\\n  if (extension.renderer) {\\n    const renderer = marked.defaults.renderer || new Renderer_1();\\n    for (const prop in extension.renderer) {\\n      const prevRenderer = renderer[prop];\\n      renderer[prop] = (...args) => {\\n        let ret = extension.renderer[prop].apply(renderer, args);\\n        if (ret === false) {\\n          ret = prevRenderer.apply(renderer, args);\\n        }\\n        return ret;\\n      };\\n    }\\n    opts.renderer = renderer;\\n  }\\n  if (extension.tokenizer) {\\n    const tokenizer = marked.defaults.tokenizer || new Tokenizer_1();\\n    for (const prop in extension.tokenizer) {\\n      const prevTokenizer = tokenizer[prop];\\n      tokenizer[prop] = (...args) => {\\n        let ret = extension.tokenizer[prop].apply(tokenizer, args);\\n        if (ret === false) {\\n          ret = prevTokenizer.apply(tokenizer, args);\\n        }\\n        return ret;\\n      };\\n    }\\n    opts.tokenizer = tokenizer;\\n  }\\n  if (extension.walkTokens) {\\n    const walkTokens = marked.defaults.walkTokens;\\n    opts.walkTokens = (token) => {\\n      extension.walkTokens(token);\\n      if (walkTokens) {\\n        walkTokens(token);\\n      }\\n    };\\n  }\\n  marked.setOptions(opts);\\n};\\n\\n/**\\n * Run callback for every token\\n */\\n\\nmarked.walkTokens = function(tokens, callback) {\\n  for (const token of tokens) {\\n    callback(token);\\n    switch (token.type) {\\n      case 'table': {\\n        for (const cell of token.tokens.header) {\\n          marked.walkTokens(cell, callback);\\n        }\\n        for (const row of token.tokens.cells) {\\n          for (const cell of row) {\\n            marked.walkTokens(cell, callback);\\n          }\\n        }\\n        break;\\n      }\\n      case 'list': {\\n        marked.walkTokens(token.items, callback);\\n        break;\\n      }\\n      default: {\\n        if (token.tokens) {\\n          marked.walkTokens(token.tokens, callback);\\n        }\\n      }\\n    }\\n  }\\n};\\n\\n/**\\n * Parse Inline\\n */\\nmarked.parseInline = function(src, opt) {\\n  // throw error in case of non string input\\n  if (typeof src === 'undefined' || src === null) {\\n[end of marked.esm.js]\\n[start of marked.esm.js]\\n    throw new Error('marked.parseInline(): input parameter is undefined or null');\\n  }\\n  if (typeof src !== 'string') {\\n    throw new Error('marked.parseInline(): input parameter is of type '\\n      + Object.prototype.toString.call(src) + ', string expected');\\n  }\\n\\n  opt = merge$2({}, marked.defaults, opt || {});\\n  checkSanitizeDeprecation$1(opt);\\n\\n  try {\\n    const tokens = Lexer_1.lexInline(src, opt);\\n    if (opt.walkTokens) {\\n      marked.walkTokens(tokens, opt.walkTokens);\\n    }\\n    return Parser_1.parseInline(tokens, opt);\\n  } catch (e) {\\n    e.message += '\\\\nPlease report this to https://github.com/markedjs/marked.';\\n    if (opt.silent) {\\n      return '<p>An error occurred:</p><pre>'\\n        + escape$3(e.message + '', true)\\n        + '</pre>';\\n    }\\n    throw e;\\n  }\\n};\\n\\n/**\\n * Expose\\n */\\n\\nmarked.Parser = Parser_1;\\nmarked.parser = Parser_1.parse;\\n\\nmarked.Renderer = Renderer_1;\\nmarked.TextRenderer = TextRenderer_1;\\n\\nmarked.Lexer = Lexer_1;\\nmarked.lexer = Lexer_1.lex;\\n\\nmarked.Tokenizer = Tokenizer_1;\\n\\nmarked.Slugger = Slugger_1;\\n\\nmarked.parse = marked;\\n\\nvar marked_1 = marked;\\n\\nexport default marked_1;\\n[end of marked.esm.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "marked.js",
        "USING_PRO.md",
        "marked.js",
        "marked.esm.js",
        "marked.esm.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "e0580aea-a73e-4ca6-bb40-644a7c9b4295",
        "score": 0.01639344262295082,
        "payload": {
          "text": "const Lexer = require('./Lexer.js');\nconst Parser = require('./Parser.js');\nconst Tokenizer = require('./Tokenizer.js');\nconst Renderer = require('./Renderer.js');\nconst TextRenderer = require('./TextRenderer.js');\nconst Slugger = require('./Slugger.js');\nconst {\n  merge,\n  checkSanitizeDeprecation,\n  escape\n} = require('./helpers.js');\nconst {\n  getDefaults,\n  changeDefaults,\n  defaults\n} = require('./defaults.js');\n\n/**\n * Marked\n */\nfunction marked(src, opt, callback) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  if (typeof opt === 'function') {\n    callback = opt;\n    opt = null;\n  }\n\n  opt = merge({}, marked.defaults, opt || {});\n  checkSanitizeDeprecation(opt);\n\n  if (callback) {\n    const highlight = opt.highlight;\n    let tokens;\n\n    try {\n      tokens = Lexer.lex(src, opt);\n    } catch (e) {\n      return callback(e);\n    }\n\n    const done = function(err) {\n      let out;\n\n      if (!err) {\n        try {\n          out = Parser.parse(tokens, opt);\n        } catch (e) {\n          err = e;\n        }\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!tokens.length) return done();\n\n    let pending = 0;\n    marked.walkTokens(tokens, function(token) {\n      if (token.type === 'code') {\n        pending++;\n        setTimeout(() => {\n          highlight(token.text, token.lang, function(err, code) {\n            if (err) {\n              return done(err);\n            }\n            if (code != null && code !== token.text) {\n              token.text = code;\n              token.escaped = true;\n            }\n\n            pending--;\n            if (pending === 0) {\n              done();\n            }\n          });\n        }, 0);\n      }\n    });\n\n    if (pending === 0) {\n      done();\n    }\n\n    return;\n  }\n\n  try {\n    const tokens = Lexer.lex(src, opt);\n    if (opt.walkTokens) {\n      marked.walkTokens(tokens, opt.walkTokens);\n    }\n    return Parser.parse(tokens, opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if (opt.silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  changeDefaults(marked.defaults);\n  return marked;\n};\n\nmarked.getDefaults = getDefaults;\n\nmarked.defaults = defaults;\n\n/**\n * Use Extension\n */\n\nmarked.use = function(extension) {\n  const opts = merge({}, extension);\n  if (extension.renderer) {\n    const renderer = marked.defaults.renderer || new Renderer();\n    for (const prop in extension.renderer) {\n      const prevRenderer = renderer[prop];\n      renderer[prop] = (...args) => {\n        let ret = extension.renderer[prop].apply(renderer, args);\n        if (ret === false) {\n          ret = prevRenderer.apply(renderer, args);\n        }\n        return ret;\n      };\n    }\n    opts.renderer = renderer;\n  }\n  if (extension.tokenizer) {\n    const tokenizer = marked.defaults.tokenizer || new Tokenizer();\n    for (const prop in extension.tokenizer) {\n      const prevTokenizer = tokenizer[prop];\n      tokenizer[prop] = (...args) => {\n        let ret = extension.tokenizer[prop].apply(tokenizer, args);\n        if (ret === false) {\n          ret = prevTokenizer.apply(tokenizer, args);\n        }\n        return ret;\n      };\n    }\n    opts.tokenizer = tokenizer;\n  }\n  if (extension.walkTokens) {\n    const walkTokens = marked.defaults.walkTokens;\n    opts.walkTokens = (token) => {\n      extension.walkTokens(token);\n      if (walkTokens) {\n        walkTokens(token);\n      }\n    };\n  }\n  marked.setOptions(opts);\n};\n\n/**\n * Run callback for every token\n */\n\nmarked.walkTokens = function(tokens, callback) {\n  for (const token of tokens) {\n    callback(token);\n    switch (token.type) {\n      case 'table': {\n        for (const cell of token.tokens.header) {\n          marked.walkTokens(cell, callback);\n        }\n        for (const row of token.tokens.cells) {\n          for (const cell of row) {\n            marked.walkTokens(cell, callback);\n          }\n        }\n        break;\n      }\n      case 'list': {\n        marked.walkTokens(token.items, callback);\n        break;\n      }\n      default: {\n        if (token.tokens) {\n          marked.walkTokens(token.tokens, callback);\n        }\n      }\n    }\n  }\n};\n\n/**\n * Parse Inline\n */\nmarked.parseInline = function(src, opt) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked.parseInline(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked.parseInline(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  opt = merge({}, marked.defaults, opt || {});\n  checkSanitizeDeprecation(opt);\n\n  try {\n    const tokens = Lexer.lexInline(src, opt);\n    if (opt.walkTokens) {\n      marked.walkTokens(tokens, opt.walkTokens);\n    }\n    return Parser.parseInline(tokens, opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if (opt.silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n};\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Renderer = Renderer;\nmarked.TextRenderer = TextRenderer;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.Tokenizer = Tokenizer;\n\nmarked.Slugger = Slugger;\n\nmarked.parse = marked;\n\nmodule.exports = marked;\n",
          "filepath": "data/repos/markedjs/marked-1.2/src/marked.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "aa4af12d-01cf-4144-b66a-44630609d6b4",
        "score": 0.016129032258064516,
        "payload": {
          "text": "## Extending Marked\n\nTo champion the single-responsibility and open/closed principles, we have tried to make it relatively painless to extend marked. If you are looking to add custom functionality, this is the place to start.\n\n<h2 id=\"use\">marked.use()</h2>\n\n`marked.use(options)` is the recommended way to extend marked. The options object can contain any [option](/using_advanced#options) available in marked.\n\nThe `renderer` and `tokenizer` options can be an object with functions that will be merged into the `renderer` and `tokenizer` respectively.\n\nThe `renderer` and `tokenizer` functions can return false to fallback to the previous function.\n\nThe `walkTokens` option can be a function that will be called with every token before rendering. When calling `use` multiple times with different `walkTokens` functions each function will be called in the **reverse** order in which they were assigned.\n\nAll other options will overwrite previously set options.\n\n<h2 id=\"renderer\">The renderer</h2>\n\nThe renderer defines the output of the parser.\n\n**Example:** Overriding default heading token by adding an embedded anchor tag like on GitHub.\n\n```js\n// Create reference instance\nconst marked = require('marked');\n\n// Override function\nconst renderer = {\n  heading(text, level) {\n    const escapedText = text.toLowerCase().replace(/[^\\w]+/g, '-');\n\n    return `\n            <h${level}>\n              <a name=\"${escapedText}\" class=\"anchor\" href=\"#${escapedText}\">\n                <span class=\"header-link\"></span>\n              </a>\n              ${text}\n            </h${level}>`;\n  }\n};\n\nmarked.use({ renderer });\n\n// Run marked\nconsole.log(marked('# heading+'));\n```\n\n**Output:**\n\n```html\n<h1>\n  <a name=\"heading-\" class=\"anchor\" href=\"#heading-\">\n    <span class=\"header-link\"></span>\n  </a>\n  heading+\n</h1>\n```\n\n### Block level renderer methods\n\n- code(*string* code, *string* infostring, *boolean* escaped)\n- blockquote(*string* quote)\n- html(*string* html)\n- heading(*string* text, *number* level, *string* raw, *Slugger* slugger)\n- hr()\n- list(*string* body, *boolean* ordered, *number* start)\n- listitem(*string* text, *boolean* task, *boolean* checked)\n- checkbox(*boolean* checked)\n- paragraph(*string* text)\n- table(*string* header, *string* body)\n- tablerow(*string* content)\n- tablecell(*string* content, *object* flags)\n\n`slugger` has the `slug` method to create a unique id from value:\n\n```js\nslugger.slug('foo')   // foo\nslugger.slug('foo')   // foo-1\nslugger.slug('foo')   // foo-2\nslugger.slug('foo 1') // foo-1-1\nslugger.slug('foo-1') // foo-1-2\n...\n```\n\n`slugger.slug` can also be called with the `dryrun` option for stateless operation:\n```js\nslugger.slug('foo')                    // foo\nslugger.slug('foo')                    // foo-1\nslugger.slug('foo')                    // foo-2\nslugger.slug('foo', { dryrun: true })  // foo-3\nslugger.slug('foo', { dryrun: true })  // foo-3\nslugger.slug('foo')                    // foo-3\nslugger.slug('foo')                    // foo-4\n...\n```\n\n`flags` has the following properties:\n\n```js\n{\n    header: true || false,\n    align: 'center' || 'left' || 'right'\n}\n```\n\n### Inline level renderer methods\n\n- strong(*string* text)\n- em(*string* text)\n- codespan(*string* code)\n- br()\n- del(*string* text)\n- link(*string* href, *string* title, *string* text)\n- image(*string* href, *string* title, *string* text)\n- text(*string* text)\n\n<h2 id=\"tokenizer\">The tokenizer</h2>\n\nThe tokenizer defines how to turn markdown text into tokens.\n\n**Example:** Overriding default `codespan` tokenizer to include LaTeX.\n\n```js\n// Create reference instance\nconst marked = require('marked');\n\n// Override function\nconst tokenizer = {\n  codespan(src) {\n    const match = src.match(/\\$+([^\\$\\n]+?)\\$+/);\n    if (match) {\n      return {\n        type: 'codespan',\n        raw: match[0],\n        text: match[1].trim()\n      };\n    }\n\n    // return false to use original codespan tokenizer\n    return false;\n  }\n};\n\nmarked.use({ tokenizer });\n\n// Run marked\nconsole.log(marked('$ latex code $\\n\\n` other code `'));\n```\n\n**Output:**\n\n```html\n<p><code>latex code</code></p>\n<p><code>other code</code></p>\n```\n\n### Block level tokenizer methods\n\n- space(*string* src)\n- code(*string* src, *array* tokens)\n- fences(*string* src)\n- heading(*string* src)\n- nptable(*string* src)\n- hr(*string* src)\n- blockquote(*string* src)\n- list(*string* src)\n- html(*string* src)\n- def(*string* src)\n- table(*string* src)\n- lheading(*string* src)\n- paragraph(*string* src)\n- text(*string* src, *array* tokens)\n\n### Inline level tokenizer methods\n\n- escape(*string* src)\n- tag(*string* src, *bool* inLink, *bool* inRawBlock)\n- link(*string* src)\n- reflink(*string* src, *object* links)\n- strong(*string* src)\n- em(*string* src)\n- codespan(*string* src)\n- br(*string* src)\n- del(*string* src)\n- autolink(*string* src, *function* mangle)\n- url(*string* src, *function* mangle)\n- inlineText(*string* src, *bool* inRawBlock, *function* smartypants)\n\n`mangle` is a method that changes text to HTML character references:\n\n```js\nmangle('test@example.com')\n// \"&#x74;&#101;&#x73;&#116;&#x40;&#101;&#120;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#x63;&#111;&#x6d;\"\n```\n\n`smartypants` is a method that translates plain ASCII punctuation characters into \u201csmart\u201d typographic punctuation HTML entities:\n\nhttps://daringfireball.net/projects/smartypants/\n\n```js\nsmartypants('\"this ... string\"')\n// \"\u201cthis \u2026 string\u201d\"\n```\n\n<h2 id=\"walk-tokens\">Walk Tokens</h2>\n\nThe walkTokens function gets called with every token. Child tokens are called before moving on to sibling tokens. Each token is passed by reference so updates are persisted when passed to the parser. The return value of the function is ignored.\n\n**Example:** Overriding heading tokens to start at h2.\n\n```js\nconst marked = require('marked');\n\n// Override function\nconst walkTokens = (token) => {\n  if (token.type === 'heading') {\n    token.depth += 1;\n  }\n};\n\nmarked.use({ walkTokens });\n\n// Run marked\nconsole.log(marked('# heading 2\\n\\n## heading 3'));\n```\n\n**Output:**\n\n```html\n<h2 id=\"heading-2\">heading 2</h2>\n<h3 id=\"heading-3\">heading 3</h3>\n```\n\n<h2 id=\"lexer\">The lexer</h2>\n\nThe lexer takes a markdown string and calls the tokenizer functions.\n\n<h2 id=\"parser\">The parser</h2>\n\nThe parser takes tokens as input and calls the renderer functions.\n\n***\n\n<h2 id=\"extend\">Access to lexer and parser</h2>\n\nYou also have direct access to the lexer and parser if you so desire.\n\n``` js\nconst tokens = marked.lexer(markdown, options);\nconsole.log(marked.parser(tokens, options));\n```\n\n``` js\nconst lexer = new marked.Lexer(options);\nconst tokens = lexer.lex(markdown);\nconsole.log(tokens);\nconsole.log(lexer.tokenizer.rules.block); // block level rules used\nconsole.log(lexer.tokenizer.rules.inline); // inline level rules used\nconsole.log(marked.Lexer.rules.block); // all block level rules\nconsole.log(marked.Lexer.rules.inline); // all inline level rules\n```\n\n``` bash\n$ node\n> require('marked').lexer('> I am using marked.')\n[\n  {\n    type: \"blockquote\",\n    raw: \"> I am using marked.\",\n    tokens: [\n      {\n        type: \"paragraph\",\n        raw: \"I am using marked.\",\n        text: \"I am using marked.\",\n        tokens: [\n          {\n            type: \"text\",\n            raw: \"I am using marked.\",\n            text: \"I am using marked.\"\n          }\n        ]\n      }\n    ]\n  },\n  links: {}\n]\n```\n\nThe Lexer builds an array of tokens, which will be passed to the Parser.\nThe Parser processes each token in the token array:\n\n``` js\nconst marked = require('marked');\n\nconst md = `\n  # heading\n\n  [link][1]\n\n  [1]: #heading \"heading\"\n`;\n\nconst tokens = marked.lexer(md);\nconsole.log(tokens);\n\nconst html = marked.parser(tokens);\nconsole.log(html);\n```\n\n``` bash\n[\n  {\n    type: \"heading\",\n    raw: \"  # heading\\n\\n\",\n    depth: 1,\n    text: \"heading\",\n    tokens: [\n      {\n        type: \"text\",\n        raw: \"heading\",\n        text: \"heading\"\n      }\n    ]\n  },\n  {\n    type: \"paragraph\",\n    raw: \"  [link][1]\",\n    text: \"  [link][1]\",\n    tokens: [\n      {\n        type: \"text\",\n        raw: \"  \",\n        text: \"  \"\n      },\n      {\n        type: \"link\",\n        raw: \"[link][1]\",\n        text: \"link\",\n        href: \"#heading\",\n        title: \"heading\",\n        tokens: [\n          {\n            type: \"text\",\n            raw: \"link\",\n            text: \"link\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    type: \"space\",\n    raw: \"\\n\\n\"\n  },\n  links: {\n    \"1\": {\n      href: \"#heading\",\n      title: \"heading\"\n    }\n  }\n]\n<h1 id=\"heading\">heading</h1>\n<p>  <a href=\"#heading\" title=\"heading\">link</a></p>\n```\n",
          "filepath": "data/repos/markedjs/marked-1.2/docs/USING_PRO.md",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "fd466edc-e92e-4775-a2bd-e1cbf134cda1",
        "score": 0.015873015873015872,
        "payload": {
          "text": "  function marked(src, opt, callback) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    if (typeof opt === 'function') {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge$2({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation$1(opt);\n\n    if (callback) {\n      var highlight = opt.highlight;\n      var tokens;\n\n      try {\n        tokens = Lexer_1.lex(src, opt);\n      } catch (e) {\n        return callback(e);\n      }\n\n      var done = function done(err) {\n        var out;\n\n        if (!err) {\n          try {\n            out = Parser_1.parse(tokens, opt);\n          } catch (e) {\n            err = e;\n          }\n        }\n\n        opt.highlight = highlight;\n        return err ? callback(err) : callback(null, out);\n      };\n\n      if (!highlight || highlight.length < 3) {\n        return done();\n      }\n\n      delete opt.highlight;\n      if (!tokens.length) return done();\n      var pending = 0;\n      marked.walkTokens(tokens, function (token) {\n        if (token.type === 'code') {\n          pending++;\n          setTimeout(function () {\n            highlight(token.text, token.lang, function (err, code) {\n              if (err) {\n                return done(err);\n              }\n\n              if (code != null && code !== token.text) {\n                token.text = code;\n                token.escaped = true;\n              }\n\n              pending--;\n\n              if (pending === 0) {\n                done();\n              }\n            });\n          }, 0);\n        }\n      });\n\n      if (pending === 0) {\n        done();\n      }\n\n      return;\n    }\n\n    try {\n      var _tokens = Lexer_1.lex(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(_tokens, opt.walkTokens);\n      }\n\n      return Parser_1.parse(_tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape$2(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  }\n  /**\n   * Options\n   */\n\n\n  marked.options = marked.setOptions = function (opt) {\n    merge$2(marked.defaults, opt);\n    changeDefaults(marked.defaults);\n    return marked;\n  };\n\n  marked.getDefaults = getDefaults;\n  marked.defaults = defaults$5;\n  /**\n   * Use Extension\n   */\n\n  marked.use = function (extension) {\n    var opts = merge$2({}, extension);\n\n    if (extension.renderer) {\n      (function () {\n        var renderer = marked.defaults.renderer || new Renderer_1();\n\n        var _loop = function _loop(prop) {\n          var prevRenderer = renderer[prop];\n\n          renderer[prop] = function () {\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n              args[_key] = arguments[_key];\n            }\n\n            var ret = extension.renderer[prop].apply(renderer, args);\n\n            if (ret === false) {\n              ret = prevRenderer.apply(renderer, args);\n            }\n\n            return ret;\n          };\n        };\n\n        for (var prop in extension.renderer) {\n          _loop(prop);\n        }\n\n        opts.renderer = renderer;\n      })();\n    }\n\n    if (extension.tokenizer) {\n      (function () {\n        var tokenizer = marked.defaults.tokenizer || new Tokenizer_1();\n\n        var _loop2 = function _loop2(prop) {\n          var prevTokenizer = tokenizer[prop];\n\n          tokenizer[prop] = function () {\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n              args[_key2] = arguments[_key2];\n            }\n\n            var ret = extension.tokenizer[prop].apply(tokenizer, args);\n\n            if (ret === false) {\n              ret = prevTokenizer.apply(tokenizer, args);\n            }\n\n            return ret;\n          };\n        };\n\n        for (var prop in extension.tokenizer) {\n          _loop2(prop);\n        }\n\n        opts.tokenizer = tokenizer;\n      })();\n    }\n\n    if (extension.walkTokens) {\n      var walkTokens = marked.defaults.walkTokens;\n\n      opts.walkTokens = function (token) {\n        extension.walkTokens(token);\n\n        if (walkTokens) {\n          walkTokens(token);\n        }\n      };\n    }\n\n    marked.setOptions(opts);\n  };\n  /**\n   * Run callback for every token\n   */\n\n\n  marked.walkTokens = function (tokens, callback) {\n    for (var _iterator = _createForOfIteratorHelperLoose(tokens), _step; !(_step = _iterator()).done;) {\n      var token = _step.value;\n      callback(token);\n\n      switch (token.type) {\n        case 'table':\n          {\n            for (var _iterator2 = _createForOfIteratorHelperLoose(token.tokens.header), _step2; !(_step2 = _iterator2()).done;) {\n              var cell = _step2.value;\n              marked.walkTokens(cell, callback);\n            }\n\n            for (var _iterator3 = _createForOfIteratorHelperLoose(token.tokens.cells), _step3; !(_step3 = _iterator3()).done;) {\n              var row = _step3.value;\n\n              for (var _iterator4 = _createForOfIteratorHelperLoose(row), _step4; !(_step4 = _iterator4()).done;) {\n                var _cell = _step4.value;\n                marked.walkTokens(_cell, callback);\n              }\n            }\n\n            break;\n          }\n\n        case 'list':\n          {\n            marked.walkTokens(token.items, callback);\n            break;\n          }\n\n        default:\n          {\n            if (token.tokens) {\n              marked.walkTokens(token.tokens, callback);\n            }\n          }\n      }\n    }\n  };\n  /**\n   * Parse Inline\n   */\n\n\n  marked.parseInline = function (src, opt) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked.parseInline(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked.parseInline(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    opt = merge$2({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation$1(opt);\n\n    try {\n      var tokens = Lexer_1.lexInline(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(tokens, opt.walkTokens);\n      }\n\n      return Parser_1.parseInline(tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape$2(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  };\n  /**\n   * Expose\n   */\n\n\n  marked.Parser = Parser_1;\n  marked.parser = Parser_1.parse;\n  marked.Renderer = Renderer_1;\n  marked.TextRenderer = TextRenderer_1;\n  marked.Lexer = Lexer_1;\n  marked.lexer = Lexer_1.lex;\n  marked.Tokenizer = Tokenizer_1;\n  marked.Slugger = Slugger_1;\n  marked.parse = marked;\n  var marked_1 = marked;\n\n  return marked_1;\n\n})));",
          "filepath": "data/repos/markedjs/marked-1.2/lib/marked.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 3
        }
      },
      {
        "id": "b189be74-4b8f-4690-b63a-c487e66c85d4",
        "score": 0.015625,
        "payload": {
          "text": "          };\n        }\n        continue;\n      }\n\n      // table (gfm)\n      if (token = this.tokenizer.table(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // lheading\n      if (token = this.tokenizer.lheading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // top-level paragraph\n      if (top && (token = this.tokenizer.paragraph(src))) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // text\n      if (token = this.tokenizer.text(src, tokens)) {\n        src = src.substring(token.raw.length);\n        if (token.type) {\n          tokens.push(token);\n        } else {\n          lastToken = tokens[tokens.length - 1];\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.text;\n        }\n        continue;\n      }\n\n      if (src) {\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n\n    return tokens;\n  }\n\n  inline(tokens) {\n    let i,\n      j,\n      k,\n      l2,\n      row,\n      token;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n      switch (token.type) {\n        case 'paragraph':\n        case 'text':\n        case 'heading': {\n          token.tokens = [];\n          this.inlineTokens(token.text, token.tokens);\n          break;\n        }\n        case 'table': {\n          token.tokens = {\n            header: [],\n            cells: []\n          };\n\n          // header\n          l2 = token.header.length;\n          for (j = 0; j < l2; j++) {\n            token.tokens.header[j] = [];\n            this.inlineTokens(token.header[j], token.tokens.header[j]);\n          }\n\n          // cells\n          l2 = token.cells.length;\n          for (j = 0; j < l2; j++) {\n            row = token.cells[j];\n            token.tokens.cells[j] = [];\n            for (k = 0; k < row.length; k++) {\n              token.tokens.cells[j][k] = [];\n              this.inlineTokens(row[k], token.tokens.cells[j][k]);\n            }\n          }\n\n          break;\n        }\n        case 'blockquote': {\n          this.inline(token.tokens);\n          break;\n        }\n        case 'list': {\n          l2 = token.items.length;\n          for (j = 0; j < l2; j++) {\n            this.inline(token.items[j].tokens);\n          }\n          break;\n        }\n      }\n    }\n\n    return tokens;\n  }\n\n  /**\n   * Lexing/Compiling\n   */\n  inlineTokens(src, tokens = [], inLink = false, inRawBlock = false, prevChar = '') {\n    let token;\n\n    // String with links masked to avoid interference with em and strong\n    let maskedSrc = src;\n    let match;\n\n    // Mask out reflinks\n    if (this.tokens.links) {\n      const links = Object.keys(this.tokens.links);\n      if (links.length > 0) {\n        while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n          if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n            maskedSrc = maskedSrc.slice(0, match.index) + '[' + 'a'.repeat(match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n          }\n        }\n      }\n    }\n    // Mask out other blocks\n    while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n      maskedSrc = maskedSrc.slice(0, match.index) + '[' + 'a'.repeat(match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n    }\n\n    while (src) {\n      // escape\n      if (token = this.tokenizer.escape(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // tag\n      if (token = this.tokenizer.tag(src, inLink, inRawBlock)) {\n        src = src.substring(token.raw.length);\n        inLink = token.inLink;\n        inRawBlock = token.inRawBlock;\n        tokens.push(token);\n        continue;\n      }\n\n      // link\n      if (token = this.tokenizer.link(src)) {\n        src = src.substring(token.raw.length);\n        if (token.type === 'link') {\n          token.tokens = this.inlineTokens(token.text, [], true, inRawBlock);\n        }\n        tokens.push(token);\n        continue;\n      }\n\n      // reflink, nolink\n      if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n        src = src.substring(token.raw.length);\n        if (token.type === 'link') {\n          token.tokens = this.inlineTokens(token.text, [], true, inRawBlock);\n        }\n        tokens.push(token);\n        continue;\n      }\n\n      // strong\n      if (token = this.tokenizer.strong(src, maskedSrc, prevChar)) {\n        src = src.substring(token.raw.length);\n        token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n        tokens.push(token);\n        continue;\n      }\n\n      // em\n      if (token = this.tokenizer.em(src, maskedSrc, prevChar)) {\n        src = src.substring(token.raw.length);\n        token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n        tokens.push(token);\n        continue;\n      }\n\n      // code\n      if (token = this.tokenizer.codespan(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // br\n      if (token = this.tokenizer.br(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // del (gfm)\n      if (token = this.tokenizer.del(src)) {\n        src = src.substring(token.raw.length);\n        token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n        tokens.push(token);\n        continue;\n      }\n\n      // autolink\n      if (token = this.tokenizer.autolink(src, mangle)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // url (gfm)\n      if (!inLink && (token = this.tokenizer.url(src, mangle))) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // text\n      if (token = this.tokenizer.inlineText(src, inRawBlock, smartypants)) {\n        src = src.substring(token.raw.length);\n        prevChar = token.raw.slice(-1);\n        tokens.push(token);\n        continue;\n      }\n\n      if (src) {\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n\n    return tokens;\n  }\n};\n\nconst { defaults: defaults$3 } = defaults;\nconst {\n  cleanUrl: cleanUrl$1,\n  escape: escape$2\n} = helpers;\n\n/**\n * Renderer\n */\nvar Renderer_1 = class Renderer {\n  constructor(options) {\n    this.options = options || defaults$3;\n  }\n\n  code(code, infostring, escaped) {\n    const lang = (infostring || '').match(/\\S*/)[0];\n    if (this.options.highlight) {\n      const out = this.options.highlight(code, lang);\n      if (out != null && out !== code) {\n        escaped = true;\n        code = out;\n      }\n    }\n\n    if (!lang) {\n      return '<pre><code>'\n        + (escaped ? code : escape$2(code, true))\n        + '</code></pre>\\n';\n    }\n\n    return '<pre><code class=\"'\n      + this.options.langPrefix\n      + escape$2(lang, true)\n      + '\">'\n      + (escaped ? code : escape$2(code, true))\n      + '</code></pre>\\n';\n  }\n\n  blockquote(quote) {\n    return '<blockquote>\\n' + quote + '</blockquote>\\n';\n  }\n\n  html(html) {\n    return html;\n  }\n\n  heading(text, level, raw, slugger) {\n    if (this.options.headerIds) {\n      return '<h'\n        + level\n        + ' id=\"'\n        + this.options.headerPrefix\n        + slugger.slug(raw)\n        + '\">'\n        + text\n        + '</h'\n        + level\n        + '>\\n';\n    }\n    // ignore IDs\n    return '<h' + level + '>' + text + '</h' + level + '>\\n';\n  }\n\n  hr() {\n    return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n  }\n\n  list(body, ordered, start) {\n    const type = ordered ? 'ol' : 'ul',\n      startatt = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n    return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n  }\n\n  listitem(text) {\n    return '<li>' + text + '</li>\\n';\n  }\n\n  checkbox(checked) {\n    return '<input '\n      + (checked ? 'checked=\"\" ' : '')\n      + 'disabled=\"\" type=\"checkbox\"'\n      + (this.options.xhtml ? ' /' : '')\n      + '> ';\n  }\n\n  paragraph(text) {\n    return '<p>' + text + '</p>\\n';\n  }\n\n  table(header, body) {\n    if (body) body = '<tbody>' + body + '</tbody>';\n\n    return '<table>\\n'\n      + '<thead>\\n'\n      + header\n      + '</thead>\\n'\n      + body\n      + '</table>\\n';\n  }\n\n  tablerow(content) {\n    return '<tr>\\n' + content + '</tr>\\n';\n  }\n\n  tablecell(content, flags) {\n    const type = flags.header ? 'th' : 'td';\n    const tag = flags.align\n      ? '<' + type + ' align=\"' + flags.align + '\">'\n      : '<' + type + '>';\n    return tag + content + '</' + type + '>\\n';\n  }\n\n  // span level renderer\n  strong(text) {\n    return '<strong>' + text + '</strong>';\n  }\n\n  em(text) {\n    return '<em>' + text + '</em>';\n  }\n\n  codespan(text) {\n    return '<code>' + text + '</code>';\n  }\n\n  br() {\n    return this.options.xhtml ? '<br/>' : '<br>';\n  }\n\n  del(text) {\n    return '<del>' + text + '</del>';\n  }\n\n  link(href, title, text) {\n    href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n    let out = '<a href=\"' + escape$2(href) + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += '>' + text + '</a>';\n    return out;\n  }\n\n  image(href, title, text) {\n    href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n\n    let out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += this.options.xhtml ? '/>' : '>';\n    return out;\n  }\n\n  text(text) {\n    return text;\n  }\n};\n\n/**\n * TextRenderer\n * returns only the textual part of the token\n */\nvar TextRenderer_1 = class TextRenderer {\n  // no need for block level renderers\n  strong(text) {\n    return text;\n  }\n\n  em(text) {\n    return text;\n  }\n\n  codespan(text) {\n    return text;\n  }\n\n  del(text) {\n    return text;\n  }\n\n  html(text) {\n    return text;\n  }\n\n  text(text) {\n    return text;\n  }\n\n  link(href, title, text) {\n    return '' + text;\n  }\n\n  image(href, title, text) {\n    return '' + text;\n  }\n\n  br() {\n    return '';\n  }\n};\n\n/**\n * Slugger generates header id\n */\nvar Slugger_1 = class Slugger {\n  constructor() {\n    this.seen = {};\n  }\n\n  serialize(value) {\n    return value\n      .toLowerCase()\n      .trim()\n      // remove html tags\n      .replace(/<[!\\/a-z].*?>/ig, '')\n      // remove unwanted chars\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '')\n      .replace(/\\s/g, '-');\n  }\n\n  /**\n   * Finds the next safe (unique) slug to use\n   */\n  getNextSafeSlug(originalSlug, isDryRun) {\n    let slug = originalSlug;\n    let occurenceAccumulator = 0;\n    if (this.seen.hasOwnProperty(slug)) {\n      occurenceAccumulator = this.seen[originalSlug];\n      do {\n        occurenceAccumulator++;\n        slug = originalSlug + '-' + occurenceAccumulator;\n      } while (this.seen.hasOwnProperty(slug));\n    }\n    if (!isDryRun) {\n      this.seen[originalSlug] = occurenceAccumulator;\n      this.seen[slug] = 0;\n    }\n    return slug;\n  }\n\n  /**\n   * Convert string to unique id\n   * @param {object} options\n   * @param {boolean} options.dryrun Generates the next unique slug without updating the internal accumulator.\n   */\n  slug(value, options = {}) {\n    const slug = this.serialize(value);\n    return this.getNextSafeSlug(slug, options.dryrun);\n  }\n};\n\nconst { defaults: defaults$4 } = defaults;\nconst {\n  unescape: unescape$1\n} = helpers;\n\n/**\n * Parsing & Compiling\n */\nvar Parser_1 = class Parser {\n  constructor(options) {\n    this.options = options || defaults$4;\n    this.options.renderer = this.options.renderer || new Renderer_1();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.textRenderer = new TextRenderer_1();\n    this.slugger = new Slugger_1();\n  }\n\n  /**\n   * Static Parse Method\n   */\n  static parse(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parse(tokens);\n  }\n\n  /**\n   * Static Parse Inline Method\n   */\n  static parseInline(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parseInline(tokens);\n  }\n\n  /**\n   * Parse Loop\n   */\n  parse(tokens, top = true) {\n    let out = '',\n      i,\n      j,\n      k,\n      l2,\n      l3,\n      row,\n      cell,\n      header,\n      body,\n      token,\n      ordered,\n      start,\n      loose,\n      itemBody,\n      item,\n      checked,\n      task,\n      checkbox;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n      switch (token.type) {\n        case 'space': {\n          continue;\n        }\n        case 'hr': {\n          out += this.renderer.hr();\n          continue;\n        }\n        case 'heading': {\n          out += this.renderer.heading(\n            this.parseInline(token.tokens),\n            token.depth,\n            unescape$1(this.parseInline(token.tokens, this.textRenderer)),\n            this.slugger);\n          continue;\n        }\n        case 'code': {\n          out += this.renderer.code(token.text,\n            token.lang,\n            token.escaped);\n          continue;\n        }\n        case 'table': {\n          header = '';\n\n          // header\n          cell = '';\n          l2 = token.header.length;\n          for (j = 0; j < l2; j++) {\n            cell += this.renderer.tablecell(\n              this.parseInline(token.tokens.header[j]),\n              { header: true, align: token.align[j] }\n            );\n          }\n          header += this.renderer.tablerow(cell);\n\n          body = '';\n          l2 = token.cells.length;\n          for (j = 0; j < l2; j++) {\n            row = token.tokens.cells[j];\n\n            cell = '';\n            l3 = row.length;\n            for (k = 0; k < l3; k++) {\n              cell += this.renderer.tablecell(\n                this.parseInline(row[k]),\n                { header: false, align: token.align[k] }\n              );\n            }\n\n            body += this.renderer.tablerow(cell);\n          }\n          out += this.renderer.table(header, body);\n          continue;\n        }\n        case 'blockquote': {\n          body = this.parse(token.tokens);\n          out += this.renderer.blockquote(body);\n          continue;\n        }\n        case 'list': {\n          ordered = token.ordered;\n          start = token.start;\n          loose = token.loose;\n          l2 = token.items.length;\n\n          body = '';\n          for (j = 0; j < l2; j++) {\n            item = token.items[j];\n            checked = item.checked;\n            task = item.task;\n\n            itemBody = '';\n            if (item.task) {\n              checkbox = this.renderer.checkbox(checked);\n              if (loose) {\n                if (item.tokens.length > 0 && item.tokens[0].type === 'text') {\n                  item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n                  if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                    item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                  }\n                } else {\n                  item.tokens.unshift({\n                    type: 'text',\n                    text: checkbox\n                  });\n                }\n              } else {\n                itemBody += checkbox;\n              }\n            }\n\n            itemBody += this.parse(item.tokens, loose);\n            body += this.renderer.listitem(itemBody, task, checked);\n          }\n\n          out += this.renderer.list(body, ordered, start);\n          continue;\n        }\n        case 'html': {\n          // TODO parse inline content if parameter markdown=1\n          out += this.renderer.html(token.text);\n          continue;\n        }\n        case 'paragraph': {\n          out += this.renderer.paragraph(this.parseInline(token.tokens));\n          continue;\n        }\n        case 'text': {\n          body = token.tokens ? this.parseInline(token.tokens) : token.text;\n          while (i + 1 < l && tokens[i + 1].type === 'text') {\n            token = tokens[++i];\n            body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n          }\n          out += top ? this.renderer.paragraph(body) : body;\n          continue;\n        }\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n\n    return out;\n  }\n\n  /**\n   * Parse Inline Tokens\n   */\n  parseInline(tokens, renderer) {\n    renderer = renderer || this.renderer;\n    let out = '',\n      i,\n      token;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n      switch (token.type) {\n        case 'escape': {\n          out += renderer.text(token.text);\n          break;\n        }\n        case 'html': {\n          out += renderer.html(token.text);\n          break;\n        }\n        case 'link': {\n          out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'image': {\n          out += renderer.image(token.href, token.title, token.text);\n          break;\n        }\n        case 'strong': {\n          out += renderer.strong(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'em': {\n          out += renderer.em(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'codespan': {\n          out += renderer.codespan(token.text);\n          break;\n        }\n        case 'br': {\n          out += renderer.br();\n          break;\n        }\n        case 'del': {\n          out += renderer.del(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'text': {\n          out += renderer.text(token.text);\n          break;\n        }\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n    return out;\n  }\n};\n\nconst {\n  merge: merge$2,\n  checkSanitizeDeprecation: checkSanitizeDeprecation$1,\n  escape: escape$3\n} = helpers;\nconst {\n  getDefaults,\n  changeDefaults,\n  defaults: defaults$5\n} = defaults;\n\n/**\n * Marked\n */\nfunction marked(src, opt, callback) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  if (typeof opt === 'function') {\n    callback = opt;\n    opt = null;\n  }\n\n  opt = merge$2({}, marked.defaults, opt || {});\n  checkSanitizeDeprecation$1(opt);\n\n  if (callback) {\n    const highlight = opt.highlight;\n    let tokens;\n\n    try {\n      tokens = Lexer_1.lex(src, opt);\n    } catch (e) {\n      return callback(e);\n    }\n\n    const done = function(err) {\n      let out;\n\n      if (!err) {\n        try {\n          out = Parser_1.parse(tokens, opt);\n        } catch (e) {\n          err = e;\n        }\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!tokens.length) return done();\n\n    let pending = 0;\n    marked.walkTokens(tokens, function(token) {\n      if (token.type === 'code') {\n        pending++;\n        setTimeout(() => {\n          highlight(token.text, token.lang, function(err, code) {\n            if (err) {\n              return done(err);\n            }\n            if (code != null && code !== token.text) {\n              token.text = code;\n              token.escaped = true;\n            }\n\n            pending--;\n            if (pending === 0) {\n              done();\n            }\n          });\n        }, 0);\n      }\n    });\n\n    if (pending === 0) {\n      done();\n    }\n\n    return;\n  }\n\n  try {\n    const tokens = Lexer_1.lex(src, opt);\n    if (opt.walkTokens) {\n      marked.walkTokens(tokens, opt.walkTokens);\n    }\n    return Parser_1.parse(tokens, opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if (opt.silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape$3(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge$2(marked.defaults, opt);\n  changeDefaults(marked.defaults);\n  return marked;\n};\n\nmarked.getDefaults = getDefaults;\n\nmarked.defaults = defaults$5;\n\n/**\n * Use Extension\n */\n\nmarked.use = function(extension) {\n  const opts = merge$2({}, extension);\n  if (extension.renderer) {\n    const renderer = marked.defaults.renderer || new Renderer_1();\n    for (const prop in extension.renderer) {\n      const prevRenderer = renderer[prop];\n      renderer[prop] = (...args) => {\n        let ret = extension.renderer[prop].apply(renderer, args);\n        if (ret === false) {\n          ret = prevRenderer.apply(renderer, args);\n        }\n        return ret;\n      };\n    }\n    opts.renderer = renderer;\n  }\n  if (extension.tokenizer) {\n    const tokenizer = marked.defaults.tokenizer || new Tokenizer_1();\n    for (const prop in extension.tokenizer) {\n      const prevTokenizer = tokenizer[prop];\n      tokenizer[prop] = (...args) => {\n        let ret = extension.tokenizer[prop].apply(tokenizer, args);\n        if (ret === false) {\n          ret = prevTokenizer.apply(tokenizer, args);\n        }\n        return ret;\n      };\n    }\n    opts.tokenizer = tokenizer;\n  }\n  if (extension.walkTokens) {\n    const walkTokens = marked.defaults.walkTokens;\n    opts.walkTokens = (token) => {\n      extension.walkTokens(token);\n      if (walkTokens) {\n        walkTokens(token);\n      }\n    };\n  }\n  marked.setOptions(opts);\n};\n\n/**\n * Run callback for every token\n */\n\nmarked.walkTokens = function(tokens, callback) {\n  for (const token of tokens) {\n    callback(token);\n    switch (token.type) {\n      case 'table': {\n        for (const cell of token.tokens.header) {\n          marked.walkTokens(cell, callback);\n        }\n        for (const row of token.tokens.cells) {\n          for (const cell of row) {\n            marked.walkTokens(cell, callback);\n          }\n        }\n        break;\n      }\n      case 'list': {\n        marked.walkTokens(token.items, callback);\n        break;\n      }\n      default: {\n        if (token.tokens) {\n          marked.walkTokens(token.tokens, callback);\n        }\n      }\n    }\n  }\n};\n\n/**\n * Parse Inline\n */\nmarked.parseInline = function(src, opt) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {",
          "filepath": "data/repos/markedjs/marked-1.2/lib/marked.esm.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 2
        }
      },
      {
        "id": "87e60679-1fe0-4cd3-b7a4-a41afbe322c1",
        "score": 0.015384615384615385,
        "payload": {
          "text": "    throw new Error('marked.parseInline(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked.parseInline(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  opt = merge$2({}, marked.defaults, opt || {});\n  checkSanitizeDeprecation$1(opt);\n\n  try {\n    const tokens = Lexer_1.lexInline(src, opt);\n    if (opt.walkTokens) {\n      marked.walkTokens(tokens, opt.walkTokens);\n    }\n    return Parser_1.parseInline(tokens, opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if (opt.silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape$3(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n};\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser_1;\nmarked.parser = Parser_1.parse;\n\nmarked.Renderer = Renderer_1;\nmarked.TextRenderer = TextRenderer_1;\n\nmarked.Lexer = Lexer_1;\nmarked.lexer = Lexer_1.lex;\n\nmarked.Tokenizer = Tokenizer_1;\n\nmarked.Slugger = Slugger_1;\n\nmarked.parse = marked;\n\nvar marked_1 = marked;\n\nexport default marked_1;",
          "filepath": "data/repos/markedjs/marked-1.2/lib/marked.esm.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 3
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1821",
    "model_patch": "diff --git a/src/Tokenizer.js b/src/Tokenizer.js\n--- a/src/Tokenizer.js\n+++ b/src/Tokenizer.js\n@@ -1,5 +1,5 @@\n class Tokenizer {\n-  // existing code...\n+  constructor(options) {\n+    this.options = options || {};\n+  }\n\n   // existing code...\n\n@@ -50,7 +50,7 @@\n     const cap = this.rules.del.exec(src);\n     if (cap) {\n       src = src.substring(cap[0].length);\n-      return { type: 'del', raw: cap[0], text: cap[1] };\n+      return { type: 'del', raw: cap[0], text: cap[2] || cap[1] };\n     }\n   }\n\n@@ -100,7 +100,7 @@\n     const cap = this.rules.em.exec(src);\n     if (cap) {\n       src = src.substring(cap[0].length);\n-      return { type: 'em', raw: cap[0], text: cap[1] };\n+      return { type: 'em', raw: cap[0], text: cap[2] || cap[1] };\n     }\n   }\n\n@@ -150,7 +150,7 @@\n     const cap = this.rules.strong.exec(src);\n     if (cap) {\n       src = src.substring(cap[0].length);\n-      return { type: 'strong', raw: cap[0], text: cap[1] };\n+      return { type: 'strong', raw: cap[0], text: cap[2] || cap[1] };\n     }\n   }\n\n@@ -200,7 +200,7 @@\n     const cap = this.rules.codespan.exec(src);\n     if (cap) {\n       src = src.substring(cap[0].length);\n-      return { type: 'codespan', raw: cap[0], text: cap[2] || cap[1] };\n+      return { type: 'codespan', raw: cap[0], text: cap[3] || cap[2] || cap[1] };\n     }\n   }\n\n@@ -250,7 +250,7 @@\n     const cap = this.rules.br.exec(src);\n     if (cap) {\n       src = src.substring(cap[0].length);\n-      return { type: 'br', raw: cap[0] };\n+      return { type: 'br', raw: cap[0], text: '' };\n     }\n   }\n\n@@ -300,7 +300,7 @@\n     const cap = this.rules.text.exec(src);\n     if (cap) {\n       src = src.substring(cap[0].length);\n-      return { type: 'text', raw: cap[0], text: cap[0] };\n+      return { type: 'text', raw: cap[0], text: cap[1] || cap[0] };\n     }\n   }\n\n@@ -350,7 +350,7 @@\n     const cap = this.rules.link.exec(src);\n     if (cap) {\n       src = src.substring(cap[0].length);\n-      return { type: 'link', raw: cap[0], href: cap[2], title: cap[3], text: cap[1] };\n+      return { type: 'link', raw: cap[0], href: cap[2], title: cap[4] || cap[3], text: cap[1] };\n     }\n   }\n\n@@ -400,7 +400,7 @@\n     const cap = this.rules.image.exec(src);\n     if (cap) {\n       src = src.substring(cap[0].length);\n-      return { type: 'image', raw: cap[0], href: cap[2], title: cap[3], text: cap[1] };\n+      return { type: 'image', raw: cap[0], href: cap[2], title: cap[4] || cap[3], text: cap[1] };\n     }\n   }\n }",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 226.1,
      "issue_embedding_time_ms": 226.1,
      "retrieval_time_ms_jina": 0.79,
      "retrieval_time_ms": 0.79,
      "total_retrieval_time_ms": 226.89,
      "generation_time_ms": 5786.68,
      "total_io_time_ms": 6013.57,
      "input_total_token_limit": null,
      "issue_text_tokens": 468,
      "vlm_tokens": 0,
      "retrieved_tokens": 5311,
      "prompt_template_tokens": 514,
      "total_input_prompt_tokens": 6293,
      "output_generated_tokens": 853,
      "total_io_tokens": 7146,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nstrickout error\\n**Marked version:**\\r\\n1.2.3\\r\\n\\r\\n## Expectation\\r\\n\\r\\nstrickout render error\\r\\n\\r\\n## Result\\r\\n\\r\\n[demo](https://marked.js.org/demo/?text=~~12345~~%0A%0A~~67890~%0A%0A~13579~%0A&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20false%2C%0A%20%22gfm%22%3A%20true%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22walkTokens%22%3A%20null%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=master)\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/17735161/98908083-d80bad80-24fa-11eb-9e78-1d435422936d.png)\\r\\n\\r\\n\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of marked.esm.js]\\n    throw new Error('marked.parseInline(): input parameter is undefined or null');\\n  }\\n  if (typeof src !== 'string') {\\n    throw new Error('marked.parseInline(): input parameter is of type '\\n      + Object.prototype.toString.call(src) + ', string expected');\\n  }\\n\\n  opt = merge$2({}, marked.defaults, opt || {});\\n  checkSanitizeDeprecation$1(opt);\\n\\n  try {\\n    const tokens = Lexer_1.lexInline(src, opt);\\n    if (opt.walkTokens) {\\n      marked.walkTokens(tokens, opt.walkTokens);\\n    }\\n    return Parser_1.parseInline(tokens, opt);\\n  } catch (e) {\\n    e.message += '\\\\nPlease report this to https://github.com/markedjs/marked.';\\n    if (opt.silent) {\\n      return '<p>An error occurred:</p><pre>'\\n        + escape$3(e.message + '', true)\\n        + '</pre>';\\n    }\\n    throw e;\\n  }\\n};\\n\\n/**\\n * Expose\\n */\\n\\nmarked.Parser = Parser_1;\\nmarked.parser = Parser_1.parse;\\n\\nmarked.Renderer = Renderer_1;\\nmarked.TextRenderer = TextRenderer_1;\\n\\nmarked.Lexer = Lexer_1;\\nmarked.lexer = Lexer_1.lex;\\n\\nmarked.Tokenizer = Tokenizer_1;\\n\\nmarked.Slugger = Slugger_1;\\n\\nmarked.parse = marked;\\n\\nvar marked_1 = marked;\\n\\nexport default marked_1;\\n[end of marked.esm.js]\\n[start of marked-spec.js]\\nconst marked = require('../../src/marked.js');\\n\\ndescribe('Test heading ID functionality', () => {\\n  it('should add id attribute by default', () => {\\n    const renderer = new marked.Renderer();\\n    const slugger = new marked.Slugger();\\n    const header = renderer.heading('test', 1, 'test', slugger);\\n    expect(header).toBe('<h1 id=\\\"test\\\">test</h1>\\\\n');\\n  });\\n\\n  it('should NOT add id attribute when options set false', () => {\\n    const renderer = new marked.Renderer({ headerIds: false });\\n    const header = renderer.heading('test', 1, 'test');\\n    expect(header).toBe('<h1>test</h1>\\\\n');\\n  });\\n});\\n\\ndescribe('Test slugger functionality', () => {\\n  it('should use lowercase slug', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('Test')).toBe('test');\\n  });\\n\\n  it('should be unique to avoid collisions 1280', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('test')).toBe('test');\\n    expect(slugger.slug('test')).toBe('test-1');\\n    expect(slugger.slug('test')).toBe('test-2');\\n  });\\n\\n  it('should be unique when slug ends with number', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('test 1')).toBe('test-1');\\n    expect(slugger.slug('test')).toBe('test');\\n    expect(slugger.slug('test')).toBe('test-2');\\n  });\\n\\n  it('should be unique when slug ends with hyphen number', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('foo')).toBe('foo');\\n    expect(slugger.slug('foo')).toBe('foo-1');\\n    expect(slugger.slug('foo 1')).toBe('foo-1-1');\\n    expect(slugger.slug('foo-1')).toBe('foo-1-2');\\n    expect(slugger.slug('foo')).toBe('foo-2');\\n  });\\n\\n  it('should allow non-latin chars', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('\\u043f\\u0440\\u0438\\u0432\\u0435\\u0442')).toBe('\\u043f\\u0440\\u0438\\u0432\\u0435\\u0442');\\n  });\\n\\n  it('should remove ampersands 857', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('This & That Section')).toBe('this--that-section');\\n  });\\n\\n  it('should remove periods', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('file.txt')).toBe('filetxt');\\n  });\\n\\n  it('should remove html tags', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('<em>html</em>')).toBe('html');\\n  });\\n\\n  it('should not increment seen when using dryrun option', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('<h1>This Section</h1>', { dryrun: true })).toBe('this-section');\\n    expect(slugger.slug('<h1>This Section</h1>')).toBe('this-section');\\n  });\\n\\n  it('should still return the next unique id when using dryrun', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('<h1>This Section</h1>')).toBe('this-section');\\n    expect(slugger.slug('<h1>This Section</h1>', { dryrun: true })).toBe('this-section-1');\\n  });\\n\\n  it('should be repeatable in a sequence', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('foo')).toBe('foo');\\n    expect(slugger.slug('foo')).toBe('foo-1');\\n    expect(slugger.slug('foo')).toBe('foo-2');\\n    expect(slugger.slug('foo', { dryrun: true })).toBe('foo-3');\\n    expect(slugger.slug('foo', { dryrun: true })).toBe('foo-3');\\n    expect(slugger.slug('foo')).toBe('foo-3');\\n    expect(slugger.slug('foo')).toBe('foo-4');\\n  });\\n});\\n\\ndescribe('Test paragraph token type', () => {\\n  it('should use the \\\"paragraph\\\" type on top level', () => {\\n    const md = 'A Paragraph.\\\\n\\\\n> A blockquote\\\\n\\\\n- list item\\\\n';\\n\\n    const tokens = marked.lexer(md);\\n\\n    expect(tokens[0].type).toBe('paragraph');\\n    expect(tokens[2].tokens[0].type).toBe('paragraph');\\n    expect(tokens[3].items[0].tokens[0].type).toBe('text');\\n  });\\n});\\n\\ndescribe('changeDefaults', () => {\\n  it('should change global defaults', () => {\\n    const { defaults, changeDefaults } = require('../../src/defaults');\\n    expect(defaults.test).toBeUndefined();\\n    changeDefaults({ test: true });\\n    expect(require('../../src/defaults').defaults.test).toBe(true);\\n  });\\n});\\n\\ndescribe('inlineLexer', () => {\\n  it('should send html to renderer.html', () => {\\n    const renderer = new marked.Renderer();\\n    spyOn(renderer, 'html').and.callThrough();\\n    const md = 'HTML Image: <img alt=\\\"MY IMAGE\\\" src=\\\"example.png\\\" />';\\n    marked(md, { renderer });\\n\\n    expect(renderer.html).toHaveBeenCalledWith('<img alt=\\\"MY IMAGE\\\" src=\\\"example.png\\\" />');\\n  });\\n});\\n\\ndescribe('parseInline', () => {\\n  it('should parse inline tokens', () => {\\n    const md = '**strong** _em_';\\n    const html = marked.parseInline(md);\\n\\n    expect(html).toBe('<strong>strong</strong> <em>em</em>');\\n  });\\n\\n  it('should not parse block tokens', () => {\\n    const md = '# header\\\\n\\\\n_em_';\\n    const html = marked.parseInline(md);\\n\\n    expect(html).toBe('# header\\\\n\\\\n<em>em</em>');\\n  });\\n});\\n\\ndescribe('use extension', () => {\\n  it('should use renderer', () => {\\n    const extension = {\\n      renderer: {\\n        paragraph(text) {\\n          return 'extension';\\n        }\\n      }\\n    };\\n    spyOn(extension.renderer, 'paragraph').and.callThrough();\\n    marked.use(extension);\\n    const html = marked('text');\\n    expect(extension.renderer.paragraph).toHaveBeenCalledWith('text');\\n    expect(html).toBe('extension');\\n  });\\n\\n  it('should use tokenizer', () => {\\n    const extension = {\\n      tokenizer: {\\n        paragraph(text) {\\n          return {\\n            type: 'paragraph',\\n            raw: text,\\n            text: 'extension'\\n          };\\n        }\\n      }\\n    };\\n    spyOn(extension.tokenizer, 'paragraph').and.callThrough();\\n    marked.use(extension);\\n    const html = marked('text');\\n    expect(extension.tokenizer.paragraph).toHaveBeenCalledWith('text');\\n    expect(html).toBe('<p>extension</p>\\\\n');\\n  });\\n\\n  it('should use walkTokens', () => {\\n    let walked = 0;\\n    const extension = {\\n      walkTokens(token) {\\n        walked++;\\n      }\\n    };\\n    marked.use(extension);\\n    marked('text');\\n    expect(walked).toBe(2);\\n  });\\n\\n  it('should use options from extension', () => {\\n    const extension = {\\n      headerIds: false\\n    };\\n    marked.use(extension);\\n    const html = marked('# heading');\\n    expect(html).toBe('<h1>heading</h1>\\\\n');\\n  });\\n\\n  it('should call all walkTokens in reverse order', () => {\\n    let walkedOnce = 0;\\n    let walkedTwice = 0;\\n    const extension1 = {\\n      walkTokens(token) {\\n        if (token.walkedOnce) {\\n          walkedTwice++;\\n        }\\n      }\\n    };\\n    const extension2 = {\\n      walkTokens(token) {\\n        walkedOnce++;\\n        token.walkedOnce = true;\\n      }\\n    };\\n    marked.use(extension1);\\n    marked.use(extension2);\\n    marked('text');\\n    expect(walkedOnce).toBe(2);\\n    expect(walkedTwice).toBe(2);\\n  });\\n\\n  it('should use last extension function and not override others', () => {\\n    const extension1 = {\\n      renderer: {\\n        paragraph(text) {\\n          return 'extension1 paragraph\\\\n';\\n        },\\n        html(html) {\\n          return 'extension1 html\\\\n';\\n        }\\n      }\\n    };\\n    const extension2 = {\\n      renderer: {\\n        paragraph(text) {\\n          return 'extension2 paragraph\\\\n';\\n        }\\n      }\\n    };\\n    marked.use(extension1);\\n    marked.use(extension2);\\n    const html = marked(`\\nparagraph\\n\\n<html />\\n\\n# heading\\n`);\\n    expect(html).toBe('extension2 paragraph\\\\nextension1 html\\\\n<h1 id=\\\"heading\\\">heading</h1>\\\\n');\\n  });\\n\\n  it('should use previous extension when returning false', () => {\\n    const extension1 = {\\n      renderer: {\\n        paragraph(text) {\\n          if (text !== 'original') {\\n            return 'extension1 paragraph\\\\n';\\n          }\\n          return false;\\n        }\\n      }\\n    };\\n    const extension2 = {\\n      renderer: {\\n        paragraph(text) {\\n          if (text !== 'extension1' && text !== 'original') {\\n            return 'extension2 paragraph\\\\n';\\n          }\\n          return false;\\n        }\\n      }\\n    };\\n    marked.use(extension1);\\n    marked.use(extension2);\\n    const html = marked(`\\nparagraph\\n\\nextension1\\n\\noriginal\\n`);\\n    expect(html).toBe('extension2 paragraph\\\\nextension1 paragraph\\\\n<p>original</p>\\\\n');\\n  });\\n\\n  it('should get options with this.options', () => {\\n    const extension = {\\n      renderer: {\\n        heading: () => {\\n          return this.options ? 'arrow options\\\\n' : 'arrow no options\\\\n';\\n        },\\n        html: function() {\\n          return this.options ? 'function options\\\\n' : 'function no options\\\\n';\\n        },\\n        paragraph() {\\n          return this.options ? 'shorthand options\\\\n' : 'shorthand no options\\\\n';\\n        }\\n      }\\n    };\\n    marked.use(extension);\\n    const html = marked(`\\n# heading\\n\\n<html />\\n\\nparagraph\\n`);\\n    expect(html).toBe('arrow no options\\\\nfunction options\\\\nshorthand options\\\\n');\\n  });\\n});\\n\\ndescribe('async highlight', () => {\\n  let highlight, markdown;\\n  beforeEach(() => {\\n    highlight = jasmine.createSpy('highlight', (text, lang, callback) => {\\n      setImmediate(() => {\\n        callback(null, `async ${text || ''}`);\\n      });\\n    });\\n    markdown = `\\n\\\\`\\\\`\\\\`lang1\\ntext 1\\n\\\\`\\\\`\\\\`\\n\\n> \\\\`\\\\`\\\\`lang2\\n> text 2\\n> \\\\`\\\\`\\\\`\\n\\n- \\\\`\\\\`\\\\`lang3\\n  text 3\\n  \\\\`\\\\`\\\\`\\n`;\\n  });\\n\\n  it('should highlight codeblocks async', (done) => {\\n    highlight.and.callThrough();\\n\\n    marked(markdown, { highlight }, (err, html) => {\\n      if (err) {\\n        fail(err);\\n      }\\n\\n      expect(html).toBe(`<pre><code class=\\\"language-lang1\\\">async text 1</code></pre>\\n<blockquote>\\n<pre><code class=\\\"language-lang2\\\">async text 2</code></pre>\\n</blockquote>\\n<ul>\\n<li><pre><code class=\\\"language-lang3\\\">async text 3</code></pre>\\n</li>\\n</ul>\\n`);\\n      done();\\n    });\\n  });\\n\\n  it('should call callback for each error in highlight', (done) => {\\n    highlight.and.callFake((text, lang, callback) => {\\n      callback(new Error('highlight error'));\\n    });\\n\\n    let numErrors = 0;\\n    marked(markdown, { highlight }, (err, html) => {\\n      expect(err).toBeTruthy();\\n      expect(html).toBeUndefined();\\n\\n      if (err) {\\n        numErrors++;\\n      }\\n\\n      if (numErrors === 3) {\\n        done();\\n      }\\n    });\\n  });\\n\\n  it('should highlight codeblocks when not async', (done) => {\\n    highlight.and.callFake((text, lang, callback) => {\\n      callback(null, `async ${text || ''}`);\\n    });\\n\\n    marked(markdown, { highlight }, (err, html) => {\\n      if (err) {\\n        fail(err);\\n      }\\n\\n      expect(html).toBe(`<pre><code class=\\\"language-lang1\\\">async text 1</code></pre>\\n<blockquote>\\n<pre><code class=\\\"language-lang2\\\">async text 2</code></pre>\\n</blockquote>\\n<ul>\\n<li><pre><code class=\\\"language-lang3\\\">async text 3</code></pre>\\n</li>\\n</ul>\\n`);\\n      done();\\n    });\\n  });\\n});\\n\\ndescribe('walkTokens', () => {\\n  it('should walk over every token', () => {\\n    const markdown = `\\nparagraph\\n\\n---\\n\\n# heading\\n\\n\\\\`\\\\`\\\\`\\ncode\\n\\\\`\\\\`\\\\`\\n\\n| a | b |\\n|---|---|\\n| 1 | 2 |\\n| 3 | 4 |\\n\\n> blockquote\\n\\n- list\\n\\n<div>html</div>\\n\\n[link](https://example.com)\\n\\n![image](https://example.com/image.jpg)\\n\\n**strong**\\n\\n*em*\\n\\n\\\\`codespan\\\\`\\n\\n~~del~~\\n\\nbr\\nbr\\n`;\\n    const tokens = marked.lexer(markdown, { ...marked.getDefaults(), breaks: true });\\n    const tokensSeen = [];\\n    marked.walkTokens(tokens, (token) => {\\n      tokensSeen.push([token.type, (token.raw || '').replace(/\\\\n/g, '')]);\\n    });\\n\\n    expect(tokensSeen).toEqual([\\n      ['paragraph', 'paragraph'],\\n      ['text', 'paragraph'],\\n      ['space', ''],\\n      ['hr', '---'],\\n      ['heading', '# heading'],\\n      ['text', 'heading'],\\n      ['code', '```code```'],\\n      ['table', '| a | b ||---|---|| 1 | 2 || 3 | 4 |'],\\n      ['text', 'a'],\\n      ['text', 'b'],\\n      ['text', '1'],\\n      ['text', '2'],\\n      ['text', '3'],\\n      ['text', '4'],\\n      ['blockquote', '> blockquote'],\\n      ['paragraph', 'blockquote'],\\n      ['text', 'blockquote'],\\n      ['list', '- list'],\\n      ['list_item', '- list'],\\n      ['text', 'list'],\\n      ['text', 'list'],\\n      ['space', ''],\\n      ['html', '<div>html</div>'],\\n      ['paragraph', '[link](https://example.com)'],\\n      ['link', '[link](https://example.com)'],\\n      ['text', 'link'],\\n      ['space', ''],\\n      ['paragraph', '![image](https://example.com/image.jpg)'],\\n      ['image', '![image](https://example.com/image.jpg)'],\\n      ['space', ''],\\n      ['paragraph', '**strong**'],\\n      ['strong', '**strong**'],\\n      ['text', 'strong'],\\n      ['space', ''],\\n      ['paragraph', '*em*'],\\n      ['em', '*em*'],\\n      ['text', 'em'],\\n      ['space', ''],\\n      ['paragraph', '`codespan`'],\\n      ['codespan', '`codespan`'],\\n      ['space', ''],\\n      ['paragraph', '~~del~~'],\\n      ['del', '~~del~~'],\\n      ['text', 'del'],\\n      ['space', ''],\\n      ['paragraph', 'brbr'],\\n      ['text', 'br'],\\n      ['br', ''],\\n      ['text', 'br']\\n    ]);\\n  });\\n});\\n\\n[end of marked-spec.js]\\n[start of Bug_report.md]\\n---\\nname: Bug report\\nabout: Marked says it does this thing but does not\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior:\\n\\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\\n<!--\\n1. [Marked Demo](https://marked.js.org/demo/)\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\\n-->\\n\\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\\n<!--\\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\\n3. Actual output (or error) is...\\n-->\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n[end of Bug_report.md]\\n[start of marked.js]\\nconst Lexer = require('./Lexer.js');\\nconst Parser = require('./Parser.js');\\nconst Tokenizer = require('./Tokenizer.js');\\nconst Renderer = require('./Renderer.js');\\nconst TextRenderer = require('./TextRenderer.js');\\nconst Slugger = require('./Slugger.js');\\nconst {\\n  merge,\\n  checkSanitizeDeprecation,\\n  escape\\n} = require('./helpers.js');\\nconst {\\n  getDefaults,\\n  changeDefaults,\\n  defaults\\n} = require('./defaults.js');\\n\\n/**\\n * Marked\\n */\\nfunction marked(src, opt, callback) {\\n  // throw error in case of non string input\\n  if (typeof src === 'undefined' || src === null) {\\n    throw new Error('marked(): input parameter is undefined or null');\\n  }\\n  if (typeof src !== 'string') {\\n    throw new Error('marked(): input parameter is of type '\\n      + Object.prototype.toString.call(src) + ', string expected');\\n  }\\n\\n  if (typeof opt === 'function') {\\n    callback = opt;\\n    opt = null;\\n  }\\n\\n  opt = merge({}, marked.defaults, opt || {});\\n  checkSanitizeDeprecation(opt);\\n\\n  if (callback) {\\n    const highlight = opt.highlight;\\n    let tokens;\\n\\n    try {\\n      tokens = Lexer.lex(src, opt);\\n    } catch (e) {\\n      return callback(e);\\n    }\\n\\n    const done = function(err) {\\n      let out;\\n\\n      if (!err) {\\n        try {\\n          out = Parser.parse(tokens, opt);\\n        } catch (e) {\\n          err = e;\\n        }\\n      }\\n\\n      opt.highlight = highlight;\\n\\n      return err\\n        ? callback(err)\\n        : callback(null, out);\\n    };\\n\\n    if (!highlight || highlight.length < 3) {\\n      return done();\\n    }\\n\\n    delete opt.highlight;\\n\\n    if (!tokens.length) return done();\\n\\n    let pending = 0;\\n    marked.walkTokens(tokens, function(token) {\\n      if (token.type === 'code') {\\n        pending++;\\n        setTimeout(() => {\\n          highlight(token.text, token.lang, function(err, code) {\\n            if (err) {\\n              return done(err);\\n            }\\n            if (code != null && code !== token.text) {\\n              token.text = code;\\n              token.escaped = true;\\n            }\\n\\n            pending--;\\n            if (pending === 0) {\\n              done();\\n            }\\n          });\\n        }, 0);\\n      }\\n    });\\n\\n    if (pending === 0) {\\n      done();\\n    }\\n\\n    return;\\n  }\\n\\n  try {\\n    const tokens = Lexer.lex(src, opt);\\n    if (opt.walkTokens) {\\n      marked.walkTokens(tokens, opt.walkTokens);\\n    }\\n    return Parser.parse(tokens, opt);\\n  } catch (e) {\\n    e.message += '\\\\nPlease report this to https://github.com/markedjs/marked.';\\n    if (opt.silent) {\\n      return '<p>An error occurred:</p><pre>'\\n        + escape(e.message + '', true)\\n        + '</pre>';\\n    }\\n    throw e;\\n  }\\n}\\n\\n/**\\n * Options\\n */\\n\\nmarked.options =\\nmarked.setOptions = function(opt) {\\n  merge(marked.defaults, opt);\\n  changeDefaults(marked.defaults);\\n  return marked;\\n};\\n\\nmarked.getDefaults = getDefaults;\\n\\nmarked.defaults = defaults;\\n\\n/**\\n * Use Extension\\n */\\n\\nmarked.use = function(extension) {\\n  const opts = merge({}, extension);\\n  if (extension.renderer) {\\n    const renderer = marked.defaults.renderer || new Renderer();\\n    for (const prop in extension.renderer) {\\n      const prevRenderer = renderer[prop];\\n      renderer[prop] = (...args) => {\\n        let ret = extension.renderer[prop].apply(renderer, args);\\n        if (ret === false) {\\n          ret = prevRenderer.apply(renderer, args);\\n        }\\n        return ret;\\n      };\\n    }\\n    opts.renderer = renderer;\\n  }\\n  if (extension.tokenizer) {\\n    const tokenizer = marked.defaults.tokenizer || new Tokenizer();\\n    for (const prop in extension.tokenizer) {\\n      const prevTokenizer = tokenizer[prop];\\n      tokenizer[prop] = (...args) => {\\n        let ret = extension.tokenizer[prop].apply(tokenizer, args);\\n        if (ret === false) {\\n          ret = prevTokenizer.apply(tokenizer, args);\\n        }\\n        return ret;\\n      };\\n    }\\n    opts.tokenizer = tokenizer;\\n  }\\n  if (extension.walkTokens) {\\n    const walkTokens = marked.defaults.walkTokens;\\n    opts.walkTokens = (token) => {\\n      extension.walkTokens(token);\\n      if (walkTokens) {\\n        walkTokens(token);\\n      }\\n    };\\n  }\\n  marked.setOptions(opts);\\n};\\n\\n/**\\n * Run callback for every token\\n */\\n\\nmarked.walkTokens = function(tokens, callback) {\\n  for (const token of tokens) {\\n    callback(token);\\n    switch (token.type) {\\n      case 'table': {\\n        for (const cell of token.tokens.header) {\\n          marked.walkTokens(cell, callback);\\n        }\\n        for (const row of token.tokens.cells) {\\n          for (const cell of row) {\\n            marked.walkTokens(cell, callback);\\n          }\\n        }\\n        break;\\n      }\\n      case 'list': {\\n        marked.walkTokens(token.items, callback);\\n        break;\\n      }\\n      default: {\\n        if (token.tokens) {\\n          marked.walkTokens(token.tokens, callback);\\n        }\\n      }\\n    }\\n  }\\n};\\n\\n/**\\n * Parse Inline\\n */\\nmarked.parseInline = function(src, opt) {\\n  // throw error in case of non string input\\n  if (typeof src === 'undefined' || src === null) {\\n    throw new Error('marked.parseInline(): input parameter is undefined or null');\\n  }\\n  if (typeof src !== 'string') {\\n    throw new Error('marked.parseInline(): input parameter is of type '\\n      + Object.prototype.toString.call(src) + ', string expected');\\n  }\\n\\n  opt = merge({}, marked.defaults, opt || {});\\n  checkSanitizeDeprecation(opt);\\n\\n  try {\\n    const tokens = Lexer.lexInline(src, opt);\\n    if (opt.walkTokens) {\\n      marked.walkTokens(tokens, opt.walkTokens);\\n    }\\n    return Parser.parseInline(tokens, opt);\\n  } catch (e) {\\n    e.message += '\\\\nPlease report this to https://github.com/markedjs/marked.';\\n    if (opt.silent) {\\n      return '<p>An error occurred:</p><pre>'\\n        + escape(e.message + '', true)\\n        + '</pre>';\\n    }\\n    throw e;\\n  }\\n};\\n\\n/**\\n * Expose\\n */\\n\\nmarked.Parser = Parser;\\nmarked.parser = Parser.parse;\\n\\nmarked.Renderer = Renderer;\\nmarked.TextRenderer = TextRenderer;\\n\\nmarked.Lexer = Lexer;\\nmarked.lexer = Lexer.lex;\\n\\nmarked.Tokenizer = Tokenizer;\\n\\nmarked.Slugger = Slugger;\\n\\nmarked.parse = marked;\\n\\nmodule.exports = marked;\\n\\n[end of marked.js]\\n[start of marked.min.js]\\n/**\\n * marked - a markdown parser\\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n[end of marked.min.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "marked.esm.js",
        "marked-spec.js",
        "Bug_report.md",
        "marked.js",
        "marked.min.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "87e60679-1fe0-4cd3-b7a4-a41afbe322c1",
        "score": 0.01639344262295082,
        "payload": {
          "text": "    throw new Error('marked.parseInline(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked.parseInline(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  opt = merge$2({}, marked.defaults, opt || {});\n  checkSanitizeDeprecation$1(opt);\n\n  try {\n    const tokens = Lexer_1.lexInline(src, opt);\n    if (opt.walkTokens) {\n      marked.walkTokens(tokens, opt.walkTokens);\n    }\n    return Parser_1.parseInline(tokens, opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if (opt.silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape$3(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n};\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser_1;\nmarked.parser = Parser_1.parse;\n\nmarked.Renderer = Renderer_1;\nmarked.TextRenderer = TextRenderer_1;\n\nmarked.Lexer = Lexer_1;\nmarked.lexer = Lexer_1.lex;\n\nmarked.Tokenizer = Tokenizer_1;\n\nmarked.Slugger = Slugger_1;\n\nmarked.parse = marked;\n\nvar marked_1 = marked;\n\nexport default marked_1;",
          "filepath": "data/repos/markedjs/marked-1.2/lib/marked.esm.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 3
        }
      },
      {
        "id": "464818fd-332f-47d7-a9a4-238a8fbb9910",
        "score": 0.016129032258064516,
        "payload": {
          "text": "const marked = require('../../src/marked.js');\n\ndescribe('Test heading ID functionality', () => {\n  it('should add id attribute by default', () => {\n    const renderer = new marked.Renderer();\n    const slugger = new marked.Slugger();\n    const header = renderer.heading('test', 1, 'test', slugger);\n    expect(header).toBe('<h1 id=\"test\">test</h1>\\n');\n  });\n\n  it('should NOT add id attribute when options set false', () => {\n    const renderer = new marked.Renderer({ headerIds: false });\n    const header = renderer.heading('test', 1, 'test');\n    expect(header).toBe('<h1>test</h1>\\n');\n  });\n});\n\ndescribe('Test slugger functionality', () => {\n  it('should use lowercase slug', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('Test')).toBe('test');\n  });\n\n  it('should be unique to avoid collisions 1280', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('test')).toBe('test');\n    expect(slugger.slug('test')).toBe('test-1');\n    expect(slugger.slug('test')).toBe('test-2');\n  });\n\n  it('should be unique when slug ends with number', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('test 1')).toBe('test-1');\n    expect(slugger.slug('test')).toBe('test');\n    expect(slugger.slug('test')).toBe('test-2');\n  });\n\n  it('should be unique when slug ends with hyphen number', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('foo')).toBe('foo');\n    expect(slugger.slug('foo')).toBe('foo-1');\n    expect(slugger.slug('foo 1')).toBe('foo-1-1');\n    expect(slugger.slug('foo-1')).toBe('foo-1-2');\n    expect(slugger.slug('foo')).toBe('foo-2');\n  });\n\n  it('should allow non-latin chars', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('\u043f\u0440\u0438\u0432\u0435\u0442')).toBe('\u043f\u0440\u0438\u0432\u0435\u0442');\n  });\n\n  it('should remove ampersands 857', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('This & That Section')).toBe('this--that-section');\n  });\n\n  it('should remove periods', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('file.txt')).toBe('filetxt');\n  });\n\n  it('should remove html tags', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('<em>html</em>')).toBe('html');\n  });\n\n  it('should not increment seen when using dryrun option', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('<h1>This Section</h1>', { dryrun: true })).toBe('this-section');\n    expect(slugger.slug('<h1>This Section</h1>')).toBe('this-section');\n  });\n\n  it('should still return the next unique id when using dryrun', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('<h1>This Section</h1>')).toBe('this-section');\n    expect(slugger.slug('<h1>This Section</h1>', { dryrun: true })).toBe('this-section-1');\n  });\n\n  it('should be repeatable in a sequence', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('foo')).toBe('foo');\n    expect(slugger.slug('foo')).toBe('foo-1');\n    expect(slugger.slug('foo')).toBe('foo-2');\n    expect(slugger.slug('foo', { dryrun: true })).toBe('foo-3');\n    expect(slugger.slug('foo', { dryrun: true })).toBe('foo-3');\n    expect(slugger.slug('foo')).toBe('foo-3');\n    expect(slugger.slug('foo')).toBe('foo-4');\n  });\n});\n\ndescribe('Test paragraph token type', () => {\n  it('should use the \"paragraph\" type on top level', () => {\n    const md = 'A Paragraph.\\n\\n> A blockquote\\n\\n- list item\\n';\n\n    const tokens = marked.lexer(md);\n\n    expect(tokens[0].type).toBe('paragraph');\n    expect(tokens[2].tokens[0].type).toBe('paragraph');\n    expect(tokens[3].items[0].tokens[0].type).toBe('text');\n  });\n});\n\ndescribe('changeDefaults', () => {\n  it('should change global defaults', () => {\n    const { defaults, changeDefaults } = require('../../src/defaults');\n    expect(defaults.test).toBeUndefined();\n    changeDefaults({ test: true });\n    expect(require('../../src/defaults').defaults.test).toBe(true);\n  });\n});\n\ndescribe('inlineLexer', () => {\n  it('should send html to renderer.html', () => {\n    const renderer = new marked.Renderer();\n    spyOn(renderer, 'html').and.callThrough();\n    const md = 'HTML Image: <img alt=\"MY IMAGE\" src=\"example.png\" />';\n    marked(md, { renderer });\n\n    expect(renderer.html).toHaveBeenCalledWith('<img alt=\"MY IMAGE\" src=\"example.png\" />');\n  });\n});\n\ndescribe('parseInline', () => {\n  it('should parse inline tokens', () => {\n    const md = '**strong** _em_';\n    const html = marked.parseInline(md);\n\n    expect(html).toBe('<strong>strong</strong> <em>em</em>');\n  });\n\n  it('should not parse block tokens', () => {\n    const md = '# header\\n\\n_em_';\n    const html = marked.parseInline(md);\n\n    expect(html).toBe('# header\\n\\n<em>em</em>');\n  });\n});\n\ndescribe('use extension', () => {\n  it('should use renderer', () => {\n    const extension = {\n      renderer: {\n        paragraph(text) {\n          return 'extension';\n        }\n      }\n    };\n    spyOn(extension.renderer, 'paragraph').and.callThrough();\n    marked.use(extension);\n    const html = marked('text');\n    expect(extension.renderer.paragraph).toHaveBeenCalledWith('text');\n    expect(html).toBe('extension');\n  });\n\n  it('should use tokenizer', () => {\n    const extension = {\n      tokenizer: {\n        paragraph(text) {\n          return {\n            type: 'paragraph',\n            raw: text,\n            text: 'extension'\n          };\n        }\n      }\n    };\n    spyOn(extension.tokenizer, 'paragraph').and.callThrough();\n    marked.use(extension);\n    const html = marked('text');\n    expect(extension.tokenizer.paragraph).toHaveBeenCalledWith('text');\n    expect(html).toBe('<p>extension</p>\\n');\n  });\n\n  it('should use walkTokens', () => {\n    let walked = 0;\n    const extension = {\n      walkTokens(token) {\n        walked++;\n      }\n    };\n    marked.use(extension);\n    marked('text');\n    expect(walked).toBe(2);\n  });\n\n  it('should use options from extension', () => {\n    const extension = {\n      headerIds: false\n    };\n    marked.use(extension);\n    const html = marked('# heading');\n    expect(html).toBe('<h1>heading</h1>\\n');\n  });\n\n  it('should call all walkTokens in reverse order', () => {\n    let walkedOnce = 0;\n    let walkedTwice = 0;\n    const extension1 = {\n      walkTokens(token) {\n        if (token.walkedOnce) {\n          walkedTwice++;\n        }\n      }\n    };\n    const extension2 = {\n      walkTokens(token) {\n        walkedOnce++;\n        token.walkedOnce = true;\n      }\n    };\n    marked.use(extension1);\n    marked.use(extension2);\n    marked('text');\n    expect(walkedOnce).toBe(2);\n    expect(walkedTwice).toBe(2);\n  });\n\n  it('should use last extension function and not override others', () => {\n    const extension1 = {\n      renderer: {\n        paragraph(text) {\n          return 'extension1 paragraph\\n';\n        },\n        html(html) {\n          return 'extension1 html\\n';\n        }\n      }\n    };\n    const extension2 = {\n      renderer: {\n        paragraph(text) {\n          return 'extension2 paragraph\\n';\n        }\n      }\n    };\n    marked.use(extension1);\n    marked.use(extension2);\n    const html = marked(`\nparagraph\n\n<html />\n\n# heading\n`);\n    expect(html).toBe('extension2 paragraph\\nextension1 html\\n<h1 id=\"heading\">heading</h1>\\n');\n  });\n\n  it('should use previous extension when returning false', () => {\n    const extension1 = {\n      renderer: {\n        paragraph(text) {\n          if (text !== 'original') {\n            return 'extension1 paragraph\\n';\n          }\n          return false;\n        }\n      }\n    };\n    const extension2 = {\n      renderer: {\n        paragraph(text) {\n          if (text !== 'extension1' && text !== 'original') {\n            return 'extension2 paragraph\\n';\n          }\n          return false;\n        }\n      }\n    };\n    marked.use(extension1);\n    marked.use(extension2);\n    const html = marked(`\nparagraph\n\nextension1\n\noriginal\n`);\n    expect(html).toBe('extension2 paragraph\\nextension1 paragraph\\n<p>original</p>\\n');\n  });\n\n  it('should get options with this.options', () => {\n    const extension = {\n      renderer: {\n        heading: () => {\n          return this.options ? 'arrow options\\n' : 'arrow no options\\n';\n        },\n        html: function() {\n          return this.options ? 'function options\\n' : 'function no options\\n';\n        },\n        paragraph() {\n          return this.options ? 'shorthand options\\n' : 'shorthand no options\\n';\n        }\n      }\n    };\n    marked.use(extension);\n    const html = marked(`\n# heading\n\n<html />\n\nparagraph\n`);\n    expect(html).toBe('arrow no options\\nfunction options\\nshorthand options\\n');\n  });\n});\n\ndescribe('async highlight', () => {\n  let highlight, markdown;\n  beforeEach(() => {\n    highlight = jasmine.createSpy('highlight', (text, lang, callback) => {\n      setImmediate(() => {\n        callback(null, `async ${text || ''}`);\n      });\n    });\n    markdown = `\n\\`\\`\\`lang1\ntext 1\n\\`\\`\\`\n\n> \\`\\`\\`lang2\n> text 2\n> \\`\\`\\`\n\n- \\`\\`\\`lang3\n  text 3\n  \\`\\`\\`\n`;\n  });\n\n  it('should highlight codeblocks async', (done) => {\n    highlight.and.callThrough();\n\n    marked(markdown, { highlight }, (err, html) => {\n      if (err) {\n        fail(err);\n      }\n\n      expect(html).toBe(`<pre><code class=\"language-lang1\">async text 1</code></pre>\n<blockquote>\n<pre><code class=\"language-lang2\">async text 2</code></pre>\n</blockquote>\n<ul>\n<li><pre><code class=\"language-lang3\">async text 3</code></pre>\n</li>\n</ul>\n`);\n      done();\n    });\n  });\n\n  it('should call callback for each error in highlight', (done) => {\n    highlight.and.callFake((text, lang, callback) => {\n      callback(new Error('highlight error'));\n    });\n\n    let numErrors = 0;\n    marked(markdown, { highlight }, (err, html) => {\n      expect(err).toBeTruthy();\n      expect(html).toBeUndefined();\n\n      if (err) {\n        numErrors++;\n      }\n\n      if (numErrors === 3) {\n        done();\n      }\n    });\n  });\n\n  it('should highlight codeblocks when not async', (done) => {\n    highlight.and.callFake((text, lang, callback) => {\n      callback(null, `async ${text || ''}`);\n    });\n\n    marked(markdown, { highlight }, (err, html) => {\n      if (err) {\n        fail(err);\n      }\n\n      expect(html).toBe(`<pre><code class=\"language-lang1\">async text 1</code></pre>\n<blockquote>\n<pre><code class=\"language-lang2\">async text 2</code></pre>\n</blockquote>\n<ul>\n<li><pre><code class=\"language-lang3\">async text 3</code></pre>\n</li>\n</ul>\n`);\n      done();\n    });\n  });\n});\n\ndescribe('walkTokens', () => {\n  it('should walk over every token', () => {\n    const markdown = `\nparagraph\n\n---\n\n# heading\n\n\\`\\`\\`\ncode\n\\`\\`\\`\n\n| a | b |\n|---|---|\n| 1 | 2 |\n| 3 | 4 |\n\n> blockquote\n\n- list\n\n<div>html</div>\n\n[link](https://example.com)\n\n![image](https://example.com/image.jpg)\n\n**strong**\n\n*em*\n\n\\`codespan\\`\n\n~~del~~\n\nbr\nbr\n`;\n    const tokens = marked.lexer(markdown, { ...marked.getDefaults(), breaks: true });\n    const tokensSeen = [];\n    marked.walkTokens(tokens, (token) => {\n      tokensSeen.push([token.type, (token.raw || '').replace(/\\n/g, '')]);\n    });\n\n    expect(tokensSeen).toEqual([\n      ['paragraph', 'paragraph'],\n      ['text', 'paragraph'],\n      ['space', ''],\n      ['hr', '---'],\n      ['heading', '# heading'],\n      ['text', 'heading'],\n      ['code', '```code```'],\n      ['table', '| a | b ||---|---|| 1 | 2 || 3 | 4 |'],\n      ['text', 'a'],\n      ['text', 'b'],\n      ['text', '1'],\n      ['text', '2'],\n      ['text', '3'],\n      ['text', '4'],\n      ['blockquote', '> blockquote'],\n      ['paragraph', 'blockquote'],\n      ['text', 'blockquote'],\n      ['list', '- list'],\n      ['list_item', '- list'],\n      ['text', 'list'],\n      ['text', 'list'],\n      ['space', ''],\n      ['html', '<div>html</div>'],\n      ['paragraph', '[link](https://example.com)'],\n      ['link', '[link](https://example.com)'],\n      ['text', 'link'],\n      ['space', ''],\n      ['paragraph', '![image](https://example.com/image.jpg)'],\n      ['image', '![image](https://example.com/image.jpg)'],\n      ['space', ''],\n      ['paragraph', '**strong**'],\n      ['strong', '**strong**'],\n      ['text', 'strong'],\n      ['space', ''],\n      ['paragraph', '*em*'],\n      ['em', '*em*'],\n      ['text', 'em'],\n      ['space', ''],\n      ['paragraph', '`codespan`'],\n      ['codespan', '`codespan`'],\n      ['space', ''],\n      ['paragraph', '~~del~~'],\n      ['del', '~~del~~'],\n      ['text', 'del'],\n      ['space', ''],\n      ['paragraph', 'brbr'],\n      ['text', 'br'],\n      ['br', ''],\n      ['text', 'br']\n    ]);\n  });\n});\n",
          "filepath": "data/repos/markedjs/marked-1.2/test/unit/marked-spec.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "2d9f70e1-0017-4cb9-842c-819aaef86744",
        "score": 0.015873015873015872,
        "payload": {
          "text": "---\nname: Bug report\nabout: Marked says it does this thing but does not\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\n<!--\n1. [Marked Demo](https://marked.js.org/demo/)\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\n-->\n\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\n<!--\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\n3. Actual output (or error) is...\n-->\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n",
          "filepath": "data/repos/markedjs/marked-1.2/.github/ISSUE_TEMPLATE/Bug_report.md",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "e0580aea-a73e-4ca6-bb40-644a7c9b4295",
        "score": 0.015625,
        "payload": {
          "text": "const Lexer = require('./Lexer.js');\nconst Parser = require('./Parser.js');\nconst Tokenizer = require('./Tokenizer.js');\nconst Renderer = require('./Renderer.js');\nconst TextRenderer = require('./TextRenderer.js');\nconst Slugger = require('./Slugger.js');\nconst {\n  merge,\n  checkSanitizeDeprecation,\n  escape\n} = require('./helpers.js');\nconst {\n  getDefaults,\n  changeDefaults,\n  defaults\n} = require('./defaults.js');\n\n/**\n * Marked\n */\nfunction marked(src, opt, callback) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  if (typeof opt === 'function') {\n    callback = opt;\n    opt = null;\n  }\n\n  opt = merge({}, marked.defaults, opt || {});\n  checkSanitizeDeprecation(opt);\n\n  if (callback) {\n    const highlight = opt.highlight;\n    let tokens;\n\n    try {\n      tokens = Lexer.lex(src, opt);\n    } catch (e) {\n      return callback(e);\n    }\n\n    const done = function(err) {\n      let out;\n\n      if (!err) {\n        try {\n          out = Parser.parse(tokens, opt);\n        } catch (e) {\n          err = e;\n        }\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!tokens.length) return done();\n\n    let pending = 0;\n    marked.walkTokens(tokens, function(token) {\n      if (token.type === 'code') {\n        pending++;\n        setTimeout(() => {\n          highlight(token.text, token.lang, function(err, code) {\n            if (err) {\n              return done(err);\n            }\n            if (code != null && code !== token.text) {\n              token.text = code;\n              token.escaped = true;\n            }\n\n            pending--;\n            if (pending === 0) {\n              done();\n            }\n          });\n        }, 0);\n      }\n    });\n\n    if (pending === 0) {\n      done();\n    }\n\n    return;\n  }\n\n  try {\n    const tokens = Lexer.lex(src, opt);\n    if (opt.walkTokens) {\n      marked.walkTokens(tokens, opt.walkTokens);\n    }\n    return Parser.parse(tokens, opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if (opt.silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  changeDefaults(marked.defaults);\n  return marked;\n};\n\nmarked.getDefaults = getDefaults;\n\nmarked.defaults = defaults;\n\n/**\n * Use Extension\n */\n\nmarked.use = function(extension) {\n  const opts = merge({}, extension);\n  if (extension.renderer) {\n    const renderer = marked.defaults.renderer || new Renderer();\n    for (const prop in extension.renderer) {\n      const prevRenderer = renderer[prop];\n      renderer[prop] = (...args) => {\n        let ret = extension.renderer[prop].apply(renderer, args);\n        if (ret === false) {\n          ret = prevRenderer.apply(renderer, args);\n        }\n        return ret;\n      };\n    }\n    opts.renderer = renderer;\n  }\n  if (extension.tokenizer) {\n    const tokenizer = marked.defaults.tokenizer || new Tokenizer();\n    for (const prop in extension.tokenizer) {\n      const prevTokenizer = tokenizer[prop];\n      tokenizer[prop] = (...args) => {\n        let ret = extension.tokenizer[prop].apply(tokenizer, args);\n        if (ret === false) {\n          ret = prevTokenizer.apply(tokenizer, args);\n        }\n        return ret;\n      };\n    }\n    opts.tokenizer = tokenizer;\n  }\n  if (extension.walkTokens) {\n    const walkTokens = marked.defaults.walkTokens;\n    opts.walkTokens = (token) => {\n      extension.walkTokens(token);\n      if (walkTokens) {\n        walkTokens(token);\n      }\n    };\n  }\n  marked.setOptions(opts);\n};\n\n/**\n * Run callback for every token\n */\n\nmarked.walkTokens = function(tokens, callback) {\n  for (const token of tokens) {\n    callback(token);\n    switch (token.type) {\n      case 'table': {\n        for (const cell of token.tokens.header) {\n          marked.walkTokens(cell, callback);\n        }\n        for (const row of token.tokens.cells) {\n          for (const cell of row) {\n            marked.walkTokens(cell, callback);\n          }\n        }\n        break;\n      }\n      case 'list': {\n        marked.walkTokens(token.items, callback);\n        break;\n      }\n      default: {\n        if (token.tokens) {\n          marked.walkTokens(token.tokens, callback);\n        }\n      }\n    }\n  }\n};\n\n/**\n * Parse Inline\n */\nmarked.parseInline = function(src, opt) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked.parseInline(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked.parseInline(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  opt = merge({}, marked.defaults, opt || {});\n  checkSanitizeDeprecation(opt);\n\n  try {\n    const tokens = Lexer.lexInline(src, opt);\n    if (opt.walkTokens) {\n      marked.walkTokens(tokens, opt.walkTokens);\n    }\n    return Parser.parseInline(tokens, opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if (opt.silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n};\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Renderer = Renderer;\nmarked.TextRenderer = TextRenderer;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.Tokenizer = Tokenizer;\n\nmarked.Slugger = Slugger;\n\nmarked.parse = marked;\n\nmodule.exports = marked;\n",
          "filepath": "data/repos/markedjs/marked-1.2/src/marked.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "d95e8ea2-8b57-425b-9764-6a0355b6359e",
        "score": 0.015384615384615385,
        "payload": {
          "text": "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */",
          "filepath": "data/repos/markedjs/marked-1.2/marked.min.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1825",
    "model_patch": "diff --git a/src/Parser.js b/src/Parser.js\nindex 1234567..89abcde 100644\n--- a/src/Parser.js\n+++ b/src/Parser.js\n@@ -157,7 +157,7 @@ var Parser_1 = class Parser {\n           loose = token.loose;\n           l2 = token.items.length;\n \n-          body = '';\n+          body = this.options.gfm ? '' : token.ordered ? '' : '<ul>\\n';\n           for (j = 0; j < l2; j++) {\n             item = token.items[j];\n             checked = item.checked;\n@@ -180,6 +180,7 @@ var Parser_1 = class Parser {\n               }\n             }\n \n+            itemBody += this.options.gfm ? '' : '</li>\\n';\n             body += this.renderer.listitem(itemBody, task, checked);\n           }\n \n@@ -187,6 +188,7 @@ var Parser_1 = class Parser {\n             out += this.renderer.list(body, ordered, start);\n           } else {\n             out += this.renderer.list(body, ordered, start);\n+            out += this.options.gfm ? '' : '</ul>\\n';\n           }\n           continue;\n         }",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 1914.43,
      "issue_embedding_time_ms": 1914.43,
      "retrieval_time_ms_jina": 1.03,
      "retrieval_time_ms": 1.03,
      "total_retrieval_time_ms": 1915.45,
      "generation_time_ms": 3108.01,
      "total_io_time_ms": 5023.46,
      "input_total_token_limit": null,
      "issue_text_tokens": 2094,
      "vlm_tokens": 0,
      "retrieved_tokens": 19319,
      "prompt_template_tokens": 512,
      "total_input_prompt_tokens": 21925,
      "output_generated_tokens": 261,
      "total_io_tokens": 22186,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nTask lists are rendered even when GFM is disabled\\n**Marked version:**\\r\\n\\r\\n1.2.3\\r\\n\\r\\n**Describe the bug**\\r\\n\\r\\nEven when `gfm: false`, task lists are rendered.\\r\\n\\r\\n**To Reproduce**\\r\\n\\r\\nSteps to reproduce the behavior:\\r\\n\\r\\n1. Setup options with `gfm: false`.\\r\\n2. Render the following:\\r\\n\\r\\n```\\r\\nUnordered:\\r\\n\\r\\n- [ ] A\\r\\n- [ ] B\\r\\n- [ ] C\\r\\n\\r\\nOrdered:\\r\\n\\r\\n1. [ ] A\\r\\n2. [ ] B\\r\\n3. [ ] C\\r\\n\\r\\nA | B\\r\\n--|--\\r\\n1 | 2\\r\\n3 | 4\\r\\n5 | 6\\r\\n```\\r\\n\\r\\n3. Confirm that the table is *not* rendered, but the **task list is rendered**:\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/613788/99151858-00ff8000-266c-11eb-942f-f9596eb92482.png)\\r\\n\\r\\nHere's some demos:\\r\\n\\r\\n- [Marked demo showing incorrect behavior](https://marked.js.org/demo/?text=Unordered%3A%0A%0A-%20%5B%20%5D%20A%0A-%20%5B%20%5D%20B%0A-%20%5B%20%5D%20C%0A%0AOrdered%3A%0A%0A1.%20%5B%20%5D%20A%0A2.%20%5B%20%5D%20B%0A3.%20%5B%20%5D%20C%0A%0AA%20%7C%20B%0A--%7C--%0A1%20%7C%202%0A3%20%7C%204%0A5%20%7C%206&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20false%2C%0A%20%22gfm%22%3A%20false%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22walkTokens%22%3A%20null%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=1.2.3)\\r\\n- [CommonMark demo showing expected behavior](https://spec.commonmark.org/dingus/?text=Unordered%3A%0A%0A-%20%5B%20%5D%20A%0A-%20%5B%20%5D%20B%0A-%20%5B%20%5D%20C%0A%0AOrdered%3A%0A%0A1.%20%5B%20%5D%20A%0A2.%20%5B%20%5D%20B%0A3.%20%5B%20%5D%20C%0A%0AA%20%7C%20B%0A--%7C--%0A1%20%7C%202%0A3%20%7C%204%0A5%20%7C%206)\\r\\n\\r\\n**Expected behavior**\\r\\n\\r\\nTask lists are [only an extension of GFM](https://github.github.com/gfm/#task-list-items-extension-), so I would expect the output to match CommonMark by using the `[ ]` as part of the rendered text:\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/613788/99151912-618ebd00-266c-11eb-9c5c-331921f3c2ef.png)\\r\\n\\nTask lists are rendered even when GFM is disabled\\n**Marked version:**\\r\\n\\r\\n1.2.3\\r\\n\\r\\n**Describe the bug**\\r\\n\\r\\nEven when `gfm: false`, task lists are rendered.\\r\\n\\r\\n**To Reproduce**\\r\\n\\r\\nSteps to reproduce the behavior:\\r\\n\\r\\n1. Setup options with `gfm: false`.\\r\\n2. Render the following:\\r\\n\\r\\n```\\r\\nUnordered:\\r\\n\\r\\n- [ ] A\\r\\n- [ ] B\\r\\n- [ ] C\\r\\n\\r\\nOrdered:\\r\\n\\r\\n1. [ ] A\\r\\n2. [ ] B\\r\\n3. [ ] C\\r\\n\\r\\nA | B\\r\\n--|--\\r\\n1 | 2\\r\\n3 | 4\\r\\n5 | 6\\r\\n```\\r\\n\\r\\n3. Confirm that the table is *not* rendered, but the **task list is rendered**:\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/613788/99151858-00ff8000-266c-11eb-942f-f9596eb92482.png)\\r\\n\\r\\nHere's some demos:\\r\\n\\r\\n- [Marked demo showing incorrect behavior](https://marked.js.org/demo/?text=Unordered%3A%0A%0A-%20%5B%20%5D%20A%0A-%20%5B%20%5D%20B%0A-%20%5B%20%5D%20C%0A%0AOrdered%3A%0A%0A1.%20%5B%20%5D%20A%0A2.%20%5B%20%5D%20B%0A3.%20%5B%20%5D%20C%0A%0AA%20%7C%20B%0A--%7C--%0A1%20%7C%202%0A3%20%7C%204%0A5%20%7C%206&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20false%2C%0A%20%22gfm%22%3A%20false%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22walkTokens%22%3A%20null%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=1.2.3)\\r\\n- [CommonMark demo showing expected behavior](https://spec.commonmark.org/dingus/?text=Unordered%3A%0A%0A-%20%5B%20%5D%20A%0A-%20%5B%20%5D%20B%0A-%20%5B%20%5D%20C%0A%0AOrdered%3A%0A%0A1.%20%5B%20%5D%20A%0A2.%20%5B%20%5D%20B%0A3.%20%5B%20%5D%20C%0A%0AA%20%7C%20B%0A--%7C--%0A1%20%7C%202%0A3%20%7C%204%0A5%20%7C%206)\\r\\n\\r\\n**Expected behavior**\\r\\n\\r\\nTask lists are [only an extension of GFM](https://github.github.com/gfm/#task-list-items-extension-), so I would expect the output to match CommonMark by using the `[ ]` as part of the rendered text:\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/613788/99151912-618ebd00-266c-11eb-9c5c-331921f3c2ef.png)\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of broken.md]\\n# Markdown is broken\\n\\nI have a lot of scraps of markdown engine oddities that I've collected over the\\nyears. What you see below is slightly messy, but it's what I've managed to\\ncobble together to illustrate the differences between markdown engines, and\\nwhy, if there ever is a markdown specification, it has to be absolutely\\nthorough. There are a lot more of these little differences I have documented\\nelsewhere. I know I will find them lingering on my disk one day, but until\\nthen, I'll continue to add whatever strange nonsensical things I find.\\n\\nSome of these examples may only mention a particular engine compared to marked.\\nHowever, the examples with markdown.pl could easily be swapped out for\\ndiscount, upskirt, or markdown.js, and you would very easily see even more\\ninconsistencies.\\n\\nA lot of this was written when I was very unsatisfied with the inconsistencies\\nbetween markdown engines. Please excuse the frustration noticeable in my\\nwriting.\\n\\n## Examples of markdown's \\\"stupid\\\" list parsing\\n\\n```\\n$ markdown.pl\\n\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n\\n<ul>\\n<li>item2</li>\\n</ul>\\n\\n<p><p>text</p></li>\\n</ul></p>\\n```\\n\\n\\n```\\n$ marked\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n<ul>\\n<li>item2</li>\\n</ul>\\n<p>text</p>\\n</li>\\n</ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\n```\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\n```\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello<blockquote>\\n<p>world</p>\\n</blockquote>\\n</li>\\n</ul>\\n```\\n\\nAgain, which looks correct to you?\\n\\n- - -\\n\\nEXAMPLE:\\n\\n```\\n$ markdown.pl\\n* hello\\n  * world\\n    * hi\\n          code\\n^D\\n<ul>\\n<li>hello\\n<ul>\\n<li>world</li>\\n<li>hi\\n  code</li>\\n</ul></li>\\n</ul>\\n```\\n\\nThe code isn't a code block even though it's after the bullet margin. I know,\\nlets give it two more spaces, effectively making it 8 spaces past the bullet.\\n\\n```\\n$ markdown.pl\\n* hello\\n  * world\\n    * hi\\n            code\\n^D\\n<ul>\\n<li>hello\\n<ul>\\n<li>world</li>\\n<li>hi\\n    code</li>\\n</ul></li>\\n</ul>\\n```\\n\\nAnd, it's still not a code block. Did you also notice that the 3rd item isn't\\neven its own list? Markdown screws that up too because of its indentation\\nunaware parsing.\\n\\n- - -\\n\\nLet's look at some more examples of markdown's list parsing:\\n\\n```\\n$ markdown.pl\\n\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n\\n<ul>\\n<li>item2</li>\\n</ul>\\n\\n<p><p>text</p></li>\\n</ul></p>\\n```\\n\\nMisnested tags.\\n\\n\\n```\\n$ marked\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n<ul>\\n<li>item2</li>\\n</ul>\\n<p>text</p>\\n</li>\\n</ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\n```\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\nMore misnested tags.\\n\\n\\n```\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello<blockquote>\\n<p>world</p>\\n</blockquote>\\n</li>\\n</ul>\\n```\\n\\nAgain, which looks correct to you?\\n\\n- - -\\n\\n# Why quality matters - Part 2\\n\\n``` bash\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\n``` bash\\n$ sundown # upskirt\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello\\n&gt; world</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul><li>hello <blockquote><p>world</p></blockquote></li></ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/23\\n\\n``` bash\\n$ markdown.pl # upskirt/markdown.js/discount\\n* hello\\n      var a = 1;\\n* world\\n^D\\n<ul>\\n<li>hello\\nvar a = 1;</li>\\n<li>world</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n      var a = 1;\\n* world\\n^D\\n<ul><li>hello\\n<pre>code>var a = 1;</code></pre></li>\\n<li>world</li></ul>\\n```\\n\\nWhich looks more reasonable? Why shouldn't code blocks be able to appear in\\nlist items in a sane way?\\n\\n- - -\\n\\n``` bash\\n$ markdown.js\\n<div>hello</div>\\n\\n<span>hello</span>\\n^D\\n<p>&lt;div&gt;hello&lt;/div&gt;</p>\\n\\n<p>&lt;span&gt;hello&lt;/span&gt;</p>\\n```\\n\\n``` bash\\n$ marked\\n<div>hello</div>\\n\\n<span>hello</span>\\n^D\\n<div>hello</div>\\n\\n\\n<p><span>hello</span>\\n</p>\\n```\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/27\\n\\n``` bash\\n$ markdown.js\\n[![an image](/image)](/link)\\n^D\\n<p><a href=\\\"/image)](/link\\\">![an image</a></p>\\n```\\n\\n``` bash\\n$ marked\\n[![an image](/image)](/link)\\n^D\\n<p><a href=\\\"/link\\\"><img src=\\\"/image\\\" alt=\\\"an image\\\"></a>\\n</p>\\n```\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/24\\n\\n``` bash\\n$ markdown.js\\n> a\\n\\n> b\\n\\n> c\\n^D\\n<blockquote><p>a</p><p>bundefined&gt; c</p></blockquote>\\n```\\n\\n``` bash\\n$ marked\\n> a\\n\\n> b\\n\\n> c\\n^D\\n<blockquote><p>a\\n\\n</p></blockquote>\\n<blockquote><p>b\\n\\n</p></blockquote>\\n<blockquote><p>c\\n</p></blockquote>\\n```\\n\\n- - -\\n\\n``` bash\\n$ markdown.pl\\n* hello\\n  * world\\n    how\\n\\n    are\\n    you\\n\\n  * today\\n* hi\\n^D\\n<ul>\\n<li><p>hello</p>\\n\\n<ul>\\n<li>world\\nhow</li>\\n</ul>\\n\\n<p>are\\nyou</p>\\n\\n<ul>\\n<li>today</li>\\n</ul></li>\\n<li>hi</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n  * world\\n    how\\n\\n    are\\n    you\\n\\n  * today\\n* hi\\n^D\\n<ul>\\n<li><p>hello</p>\\n<ul>\\n<li><p>world\\nhow</p>\\n<p>are\\nyou</p>\\n</li>\\n<li><p>today</p>\\n</li>\\n</ul>\\n</li>\\n<li>hi</li>\\n</ul>\\n```\\n\\n[end of broken.md]\\n[start of marked.esm.js]\\n          };\\n        }\\n        continue;\\n      }\\n\\n      // table (gfm)\\n      if (token = this.tokenizer.table(src)) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // lheading\\n      if (token = this.tokenizer.lheading(src)) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // top-level paragraph\\n      if (top && (token = this.tokenizer.paragraph(src))) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // text\\n      if (token = this.tokenizer.text(src, tokens)) {\\n        src = src.substring(token.raw.length);\\n        if (token.type) {\\n          tokens.push(token);\\n        } else {\\n          lastToken = tokens[tokens.length - 1];\\n          lastToken.raw += '\\\\n' + token.raw;\\n          lastToken.text += '\\\\n' + token.text;\\n        }\\n        continue;\\n      }\\n\\n      if (src) {\\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\\n        if (this.options.silent) {\\n          console.error(errMsg);\\n          break;\\n        } else {\\n          throw new Error(errMsg);\\n        }\\n      }\\n    }\\n\\n    return tokens;\\n  }\\n\\n  inline(tokens) {\\n    let i,\\n      j,\\n      k,\\n      l2,\\n      row,\\n      token;\\n\\n    const l = tokens.length;\\n    for (i = 0; i < l; i++) {\\n      token = tokens[i];\\n      switch (token.type) {\\n        case 'paragraph':\\n        case 'text':\\n        case 'heading': {\\n          token.tokens = [];\\n          this.inlineTokens(token.text, token.tokens);\\n          break;\\n        }\\n        case 'table': {\\n          token.tokens = {\\n            header: [],\\n            cells: []\\n          };\\n\\n          // header\\n          l2 = token.header.length;\\n          for (j = 0; j < l2; j++) {\\n            token.tokens.header[j] = [];\\n            this.inlineTokens(token.header[j], token.tokens.header[j]);\\n          }\\n\\n          // cells\\n          l2 = token.cells.length;\\n          for (j = 0; j < l2; j++) {\\n            row = token.cells[j];\\n            token.tokens.cells[j] = [];\\n            for (k = 0; k < row.length; k++) {\\n              token.tokens.cells[j][k] = [];\\n              this.inlineTokens(row[k], token.tokens.cells[j][k]);\\n            }\\n          }\\n\\n          break;\\n        }\\n        case 'blockquote': {\\n          this.inline(token.tokens);\\n          break;\\n        }\\n        case 'list': {\\n          l2 = token.items.length;\\n          for (j = 0; j < l2; j++) {\\n            this.inline(token.items[j].tokens);\\n          }\\n          break;\\n        }\\n      }\\n    }\\n\\n    return tokens;\\n  }\\n\\n  /**\\n   * Lexing/Compiling\\n   */\\n  inlineTokens(src, tokens = [], inLink = false, inRawBlock = false, prevChar = '') {\\n    let token;\\n\\n    // String with links masked to avoid interference with em and strong\\n    let maskedSrc = src;\\n    let match;\\n\\n    // Mask out reflinks\\n    if (this.tokens.links) {\\n      const links = Object.keys(this.tokens.links);\\n      if (links.length > 0) {\\n        while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\\n          if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\\n            maskedSrc = maskedSrc.slice(0, match.index) + '[' + 'a'.repeat(match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\\n          }\\n        }\\n      }\\n    }\\n    // Mask out other blocks\\n    while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\\n      maskedSrc = maskedSrc.slice(0, match.index) + '[' + 'a'.repeat(match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\\n    }\\n\\n    while (src) {\\n      // escape\\n      if (token = this.tokenizer.escape(src)) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // tag\\n      if (token = this.tokenizer.tag(src, inLink, inRawBlock)) {\\n        src = src.substring(token.raw.length);\\n        inLink = token.inLink;\\n        inRawBlock = token.inRawBlock;\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // link\\n      if (token = this.tokenizer.link(src)) {\\n        src = src.substring(token.raw.length);\\n        if (token.type === 'link') {\\n          token.tokens = this.inlineTokens(token.text, [], true, inRawBlock);\\n        }\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // reflink, nolink\\n      if (token = this.tokenizer.reflink(src, this.tokens.links)) {\\n        src = src.substring(token.raw.length);\\n        if (token.type === 'link') {\\n          token.tokens = this.inlineTokens(token.text, [], true, inRawBlock);\\n        }\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // strong\\n      if (token = this.tokenizer.strong(src, maskedSrc, prevChar)) {\\n        src = src.substring(token.raw.length);\\n        token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // em\\n      if (token = this.tokenizer.em(src, maskedSrc, prevChar)) {\\n        src = src.substring(token.raw.length);\\n        token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // code\\n      if (token = this.tokenizer.codespan(src)) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // br\\n      if (token = this.tokenizer.br(src)) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // del (gfm)\\n      if (token = this.tokenizer.del(src)) {\\n        src = src.substring(token.raw.length);\\n        token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // autolink\\n      if (token = this.tokenizer.autolink(src, mangle)) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // url (gfm)\\n      if (!inLink && (token = this.tokenizer.url(src, mangle))) {\\n        src = src.substring(token.raw.length);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      // text\\n      if (token = this.tokenizer.inlineText(src, inRawBlock, smartypants)) {\\n        src = src.substring(token.raw.length);\\n        prevChar = token.raw.slice(-1);\\n        tokens.push(token);\\n        continue;\\n      }\\n\\n      if (src) {\\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\\n        if (this.options.silent) {\\n          console.error(errMsg);\\n          break;\\n        } else {\\n          throw new Error(errMsg);\\n        }\\n      }\\n    }\\n\\n    return tokens;\\n  }\\n};\\n\\nconst { defaults: defaults$3 } = defaults;\\nconst {\\n  cleanUrl: cleanUrl$1,\\n  escape: escape$2\\n} = helpers;\\n\\n/**\\n * Renderer\\n */\\nvar Renderer_1 = class Renderer {\\n  constructor(options) {\\n    this.options = options || defaults$3;\\n  }\\n\\n  code(code, infostring, escaped) {\\n    const lang = (infostring || '').match(/\\\\S*/)[0];\\n    if (this.options.highlight) {\\n      const out = this.options.highlight(code, lang);\\n      if (out != null && out !== code) {\\n        escaped = true;\\n        code = out;\\n      }\\n    }\\n\\n    if (!lang) {\\n      return '<pre><code>'\\n        + (escaped ? code : escape$2(code, true))\\n        + '</code></pre>\\\\n';\\n    }\\n\\n    return '<pre><code class=\\\"'\\n      + this.options.langPrefix\\n      + escape$2(lang, true)\\n      + '\\\">'\\n      + (escaped ? code : escape$2(code, true))\\n      + '</code></pre>\\\\n';\\n  }\\n\\n  blockquote(quote) {\\n    return '<blockquote>\\\\n' + quote + '</blockquote>\\\\n';\\n  }\\n\\n  html(html) {\\n    return html;\\n  }\\n\\n  heading(text, level, raw, slugger) {\\n    if (this.options.headerIds) {\\n      return '<h'\\n        + level\\n        + ' id=\\\"'\\n        + this.options.headerPrefix\\n        + slugger.slug(raw)\\n        + '\\\">'\\n        + text\\n        + '</h'\\n        + level\\n        + '>\\\\n';\\n    }\\n    // ignore IDs\\n    return '<h' + level + '>' + text + '</h' + level + '>\\\\n';\\n  }\\n\\n  hr() {\\n    return this.options.xhtml ? '<hr/>\\\\n' : '<hr>\\\\n';\\n  }\\n\\n  list(body, ordered, start) {\\n    const type = ordered ? 'ol' : 'ul',\\n      startatt = (ordered && start !== 1) ? (' start=\\\"' + start + '\\\"') : '';\\n    return '<' + type + startatt + '>\\\\n' + body + '</' + type + '>\\\\n';\\n  }\\n\\n  listitem(text) {\\n    return '<li>' + text + '</li>\\\\n';\\n  }\\n\\n  checkbox(checked) {\\n    return '<input '\\n      + (checked ? 'checked=\\\"\\\" ' : '')\\n      + 'disabled=\\\"\\\" type=\\\"checkbox\\\"'\\n      + (this.options.xhtml ? ' /' : '')\\n      + '> ';\\n  }\\n\\n  paragraph(text) {\\n    return '<p>' + text + '</p>\\\\n';\\n  }\\n\\n  table(header, body) {\\n    if (body) body = '<tbody>' + body + '</tbody>';\\n\\n    return '<table>\\\\n'\\n      + '<thead>\\\\n'\\n      + header\\n      + '</thead>\\\\n'\\n      + body\\n      + '</table>\\\\n';\\n  }\\n\\n  tablerow(content) {\\n    return '<tr>\\\\n' + content + '</tr>\\\\n';\\n  }\\n\\n  tablecell(content, flags) {\\n    const type = flags.header ? 'th' : 'td';\\n    const tag = flags.align\\n      ? '<' + type + ' align=\\\"' + flags.align + '\\\">'\\n      : '<' + type + '>';\\n    return tag + content + '</' + type + '>\\\\n';\\n  }\\n\\n  // span level renderer\\n  strong(text) {\\n    return '<strong>' + text + '</strong>';\\n  }\\n\\n  em(text) {\\n    return '<em>' + text + '</em>';\\n  }\\n\\n  codespan(text) {\\n    return '<code>' + text + '</code>';\\n  }\\n\\n  br() {\\n    return this.options.xhtml ? '<br/>' : '<br>';\\n  }\\n\\n  del(text) {\\n    return '<del>' + text + '</del>';\\n  }\\n\\n  link(href, title, text) {\\n    href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\\n    if (href === null) {\\n      return text;\\n    }\\n    let out = '<a href=\\\"' + escape$2(href) + '\\\"';\\n    if (title) {\\n      out += ' title=\\\"' + title + '\\\"';\\n    }\\n    out += '>' + text + '</a>';\\n    return out;\\n  }\\n\\n  image(href, title, text) {\\n    href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\\n    if (href === null) {\\n      return text;\\n    }\\n\\n    let out = '<img src=\\\"' + href + '\\\" alt=\\\"' + text + '\\\"';\\n    if (title) {\\n      out += ' title=\\\"' + title + '\\\"';\\n    }\\n    out += this.options.xhtml ? '/>' : '>';\\n    return out;\\n  }\\n\\n  text(text) {\\n    return text;\\n  }\\n};\\n\\n/**\\n * TextRenderer\\n * returns only the textual part of the token\\n */\\nvar TextRenderer_1 = class TextRenderer {\\n  // no need for block level renderers\\n  strong(text) {\\n    return text;\\n  }\\n\\n  em(text) {\\n    return text;\\n  }\\n\\n  codespan(text) {\\n    return text;\\n  }\\n\\n  del(text) {\\n    return text;\\n  }\\n\\n  html(text) {\\n    return text;\\n  }\\n\\n  text(text) {\\n    return text;\\n  }\\n\\n  link(href, title, text) {\\n    return '' + text;\\n  }\\n\\n  image(href, title, text) {\\n    return '' + text;\\n  }\\n\\n  br() {\\n    return '';\\n  }\\n};\\n\\n/**\\n * Slugger generates header id\\n */\\nvar Slugger_1 = class Slugger {\\n  constructor() {\\n    this.seen = {};\\n  }\\n\\n  serialize(value) {\\n    return value\\n      .toLowerCase()\\n      .trim()\\n      // remove html tags\\n      .replace(/<[!\\\\/a-z].*?>/ig, '')\\n      // remove unwanted chars\\n      .replace(/[\\\\u2000-\\\\u206F\\\\u2E00-\\\\u2E7F\\\\\\\\'!\\\"#$%&()*+,./:;<=>?@[\\\\]^`{|}~]/g, '')\\n      .replace(/\\\\s/g, '-');\\n  }\\n\\n  /**\\n   * Finds the next safe (unique) slug to use\\n   */\\n  getNextSafeSlug(originalSlug, isDryRun) {\\n    let slug = originalSlug;\\n    let occurenceAccumulator = 0;\\n    if (this.seen.hasOwnProperty(slug)) {\\n      occurenceAccumulator = this.seen[originalSlug];\\n      do {\\n        occurenceAccumulator++;\\n        slug = originalSlug + '-' + occurenceAccumulator;\\n      } while (this.seen.hasOwnProperty(slug));\\n    }\\n    if (!isDryRun) {\\n      this.seen[originalSlug] = occurenceAccumulator;\\n      this.seen[slug] = 0;\\n    }\\n    return slug;\\n  }\\n\\n  /**\\n   * Convert string to unique id\\n   * @param {object} options\\n   * @param {boolean} options.dryrun Generates the next unique slug without updating the internal accumulator.\\n   */\\n  slug(value, options = {}) {\\n    const slug = this.serialize(value);\\n    return this.getNextSafeSlug(slug, options.dryrun);\\n  }\\n};\\n\\nconst { defaults: defaults$4 } = defaults;\\nconst {\\n  unescape: unescape$1\\n} = helpers;\\n\\n/**\\n * Parsing & Compiling\\n */\\nvar Parser_1 = class Parser {\\n  constructor(options) {\\n    this.options = options || defaults$4;\\n    this.options.renderer = this.options.renderer || new Renderer_1();\\n    this.renderer = this.options.renderer;\\n    this.renderer.options = this.options;\\n    this.textRenderer = new TextRenderer_1();\\n    this.slugger = new Slugger_1();\\n  }\\n\\n  /**\\n   * Static Parse Method\\n   */\\n  static parse(tokens, options) {\\n    const parser = new Parser(options);\\n    return parser.parse(tokens);\\n  }\\n\\n  /**\\n   * Static Parse Inline Method\\n   */\\n  static parseInline(tokens, options) {\\n    const parser = new Parser(options);\\n    return parser.parseInline(tokens);\\n  }\\n\\n  /**\\n   * Parse Loop\\n   */\\n  parse(tokens, top = true) {\\n    let out = '',\\n      i,\\n      j,\\n      k,\\n      l2,\\n      l3,\\n      row,\\n      cell,\\n      header,\\n      body,\\n      token,\\n      ordered,\\n      start,\\n      loose,\\n      itemBody,\\n      item,\\n      checked,\\n      task,\\n      checkbox;\\n\\n    const l = tokens.length;\\n    for (i = 0; i < l; i++) {\\n      token = tokens[i];\\n      switch (token.type) {\\n        case 'space': {\\n          continue;\\n        }\\n        case 'hr': {\\n          out += this.renderer.hr();\\n          continue;\\n        }\\n        case 'heading': {\\n          out += this.renderer.heading(\\n            this.parseInline(token.tokens),\\n            token.depth,\\n            unescape$1(this.parseInline(token.tokens, this.textRenderer)),\\n            this.slugger);\\n          continue;\\n        }\\n        case 'code': {\\n          out += this.renderer.code(token.text,\\n            token.lang,\\n            token.escaped);\\n          continue;\\n        }\\n        case 'table': {\\n          header = '';\\n\\n          // header\\n          cell = '';\\n          l2 = token.header.length;\\n          for (j = 0; j < l2; j++) {\\n            cell += this.renderer.tablecell(\\n              this.parseInline(token.tokens.header[j]),\\n              { header: true, align: token.align[j] }\\n            );\\n          }\\n          header += this.renderer.tablerow(cell);\\n\\n          body = '';\\n          l2 = token.cells.length;\\n          for (j = 0; j < l2; j++) {\\n            row = token.tokens.cells[j];\\n\\n            cell = '';\\n            l3 = row.length;\\n            for (k = 0; k < l3; k++) {\\n              cell += this.renderer.tablecell(\\n                this.parseInline(row[k]),\\n                { header: false, align: token.align[k] }\\n              );\\n            }\\n\\n            body += this.renderer.tablerow(cell);\\n          }\\n          out += this.renderer.table(header, body);\\n          continue;\\n        }\\n        case 'blockquote': {\\n          body = this.parse(token.tokens);\\n          out += this.renderer.blockquote(body);\\n          continue;\\n        }\\n        case 'list': {\\n          ordered = token.ordered;\\n          start = token.start;\\n          loose = token.loose;\\n          l2 = token.items.length;\\n\\n          body = '';\\n          for (j = 0; j < l2; j++) {\\n            item = token.items[j];\\n            checked = item.checked;\\n            task = item.task;\\n\\n            itemBody = '';\\n            if (item.task) {\\n              checkbox = this.renderer.checkbox(checked);\\n              if (loose) {\\n                if (item.tokens.length > 0 && item.tokens[0].type === 'text') {\\n                  item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\\n                  if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\\n                    item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\\n                  }\\n                } else {\\n                  item.tokens.unshift({\\n                    type: 'text',\\n                    text: checkbox\\n                  });\\n                }\\n              } else {\\n                itemBody += checkbox;\\n              }\\n            }\\n\\n            itemBody += this.parse(item.tokens, loose);\\n            body += this.renderer.listitem(itemBody, task, checked);\\n          }\\n\\n          out += this.renderer.list(body, ordered, start);\\n          continue;\\n        }\\n        case 'html': {\\n          // TODO parse inline content if parameter markdown=1\\n          out += this.renderer.html(token.text);\\n          continue;\\n        }\\n        case 'paragraph': {\\n          out += this.renderer.paragraph(this.parseInline(token.tokens));\\n          continue;\\n        }\\n        case 'text': {\\n          body = token.tokens ? this.parseInline(token.tokens) : token.text;\\n          while (i + 1 < l && tokens[i + 1].type === 'text') {\\n            token = tokens[++i];\\n            body += '\\\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\\n          }\\n          out += top ? this.renderer.paragraph(body) : body;\\n          continue;\\n        }\\n        default: {\\n          const errMsg = 'Token with \\\"' + token.type + '\\\" type was not found.';\\n          if (this.options.silent) {\\n            console.error(errMsg);\\n            return;\\n          } else {\\n            throw new Error(errMsg);\\n          }\\n        }\\n      }\\n    }\\n\\n    return out;\\n  }\\n\\n  /**\\n   * Parse Inline Tokens\\n   */\\n  parseInline(tokens, renderer) {\\n    renderer = renderer || this.renderer;\\n    let out = '',\\n      i,\\n      token;\\n\\n    const l = tokens.length;\\n    for (i = 0; i < l; i++) {\\n      token = tokens[i];\\n      switch (token.type) {\\n        case 'escape': {\\n          out += renderer.text(token.text);\\n          break;\\n        }\\n        case 'html': {\\n          out += renderer.html(token.text);\\n          break;\\n        }\\n        case 'link': {\\n          out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\\n          break;\\n        }\\n        case 'image': {\\n          out += renderer.image(token.href, token.title, token.text);\\n          break;\\n        }\\n        case 'strong': {\\n          out += renderer.strong(this.parseInline(token.tokens, renderer));\\n          break;\\n        }\\n        case 'em': {\\n          out += renderer.em(this.parseInline(token.tokens, renderer));\\n          break;\\n        }\\n        case 'codespan': {\\n          out += renderer.codespan(token.text);\\n          break;\\n        }\\n        case 'br': {\\n          out += renderer.br();\\n          break;\\n        }\\n        case 'del': {\\n          out += renderer.del(this.parseInline(token.tokens, renderer));\\n          break;\\n        }\\n        case 'text': {\\n          out += renderer.text(token.text);\\n          break;\\n        }\\n        default: {\\n          const errMsg = 'Token with \\\"' + token.type + '\\\" type was not found.';\\n          if (this.options.silent) {\\n            console.error(errMsg);\\n            return;\\n          } else {\\n            throw new Error(errMsg);\\n          }\\n        }\\n      }\\n    }\\n    return out;\\n  }\\n};\\n\\nconst {\\n  merge: merge$2,\\n  checkSanitizeDeprecation: checkSanitizeDeprecation$1,\\n  escape: escape$3\\n} = helpers;\\nconst {\\n  getDefaults,\\n  changeDefaults,\\n  defaults: defaults$5\\n} = defaults;\\n\\n/**\\n * Marked\\n */\\nfunction marked(src, opt, callback) {\\n  // throw error in case of non string input\\n  if (typeof src === 'undefined' || src === null) {\\n    throw new Error('marked(): input parameter is undefined or null');\\n  }\\n  if (typeof src !== 'string') {\\n    throw new Error('marked(): input parameter is of type '\\n      + Object.prototype.toString.call(src) + ', string expected');\\n  }\\n\\n  if (typeof opt === 'function') {\\n    callback = opt;\\n    opt = null;\\n  }\\n\\n  opt = merge$2({}, marked.defaults, opt || {});\\n  checkSanitizeDeprecation$1(opt);\\n\\n  if (callback) {\\n    const highlight = opt.highlight;\\n    let tokens;\\n\\n    try {\\n      tokens = Lexer_1.lex(src, opt);\\n    } catch (e) {\\n      return callback(e);\\n    }\\n\\n    const done = function(err) {\\n      let out;\\n\\n      if (!err) {\\n        try {\\n          out = Parser_1.parse(tokens, opt);\\n        } catch (e) {\\n          err = e;\\n        }\\n      }\\n\\n      opt.highlight = highlight;\\n\\n      return err\\n        ? callback(err)\\n        : callback(null, out);\\n    };\\n\\n    if (!highlight || highlight.length < 3) {\\n      return done();\\n    }\\n\\n    delete opt.highlight;\\n\\n    if (!tokens.length) return done();\\n\\n    let pending = 0;\\n    marked.walkTokens(tokens, function(token) {\\n      if (token.type === 'code') {\\n        pending++;\\n        setTimeout(() => {\\n          highlight(token.text, token.lang, function(err, code) {\\n            if (err) {\\n              return done(err);\\n            }\\n            if (code != null && code !== token.text) {\\n              token.text = code;\\n              token.escaped = true;\\n            }\\n\\n            pending--;\\n            if (pending === 0) {\\n              done();\\n            }\\n          });\\n        }, 0);\\n      }\\n    });\\n\\n    if (pending === 0) {\\n      done();\\n    }\\n\\n    return;\\n  }\\n\\n  try {\\n    const tokens = Lexer_1.lex(src, opt);\\n    if (opt.walkTokens) {\\n      marked.walkTokens(tokens, opt.walkTokens);\\n    }\\n    return Parser_1.parse(tokens, opt);\\n  } catch (e) {\\n    e.message += '\\\\nPlease report this to https://github.com/markedjs/marked.';\\n    if (opt.silent) {\\n      return '<p>An error occurred:</p><pre>'\\n        + escape$3(e.message + '', true)\\n        + '</pre>';\\n    }\\n    throw e;\\n  }\\n}\\n\\n/**\\n * Options\\n */\\n\\nmarked.options =\\nmarked.setOptions = function(opt) {\\n  merge$2(marked.defaults, opt);\\n  changeDefaults(marked.defaults);\\n  return marked;\\n};\\n\\nmarked.getDefaults = getDefaults;\\n\\nmarked.defaults = defaults$5;\\n\\n/**\\n * Use Extension\\n */\\n\\nmarked.use = function(extension) {\\n  const opts = merge$2({}, extension);\\n  if (extension.renderer) {\\n    const renderer = marked.defaults.renderer || new Renderer_1();\\n    for (const prop in extension.renderer) {\\n      const prevRenderer = renderer[prop];\\n      renderer[prop] = (...args) => {\\n        let ret = extension.renderer[prop].apply(renderer, args);\\n        if (ret === false) {\\n          ret = prevRenderer.apply(renderer, args);\\n        }\\n        return ret;\\n      };\\n    }\\n    opts.renderer = renderer;\\n  }\\n  if (extension.tokenizer) {\\n    const tokenizer = marked.defaults.tokenizer || new Tokenizer_1();\\n    for (const prop in extension.tokenizer) {\\n      const prevTokenizer = tokenizer[prop];\\n      tokenizer[prop] = (...args) => {\\n        let ret = extension.tokenizer[prop].apply(tokenizer, args);\\n        if (ret === false) {\\n          ret = prevTokenizer.apply(tokenizer, args);\\n        }\\n        return ret;\\n      };\\n    }\\n    opts.tokenizer = tokenizer;\\n  }\\n  if (extension.walkTokens) {\\n    const walkTokens = marked.defaults.walkTokens;\\n    opts.walkTokens = (token) => {\\n      extension.walkTokens(token);\\n      if (walkTokens) {\\n        walkTokens(token);\\n      }\\n    };\\n  }\\n  marked.setOptions(opts);\\n};\\n\\n/**\\n * Run callback for every token\\n */\\n\\nmarked.walkTokens = function(tokens, callback) {\\n  for (const token of tokens) {\\n    callback(token);\\n    switch (token.type) {\\n      case 'table': {\\n        for (const cell of token.tokens.header) {\\n          marked.walkTokens(cell, callback);\\n        }\\n        for (const row of token.tokens.cells) {\\n          for (const cell of row) {\\n            marked.walkTokens(cell, callback);\\n          }\\n        }\\n        break;\\n      }\\n      case 'list': {\\n        marked.walkTokens(token.items, callback);\\n        break;\\n      }\\n      default: {\\n        if (token.tokens) {\\n          marked.walkTokens(token.tokens, callback);\\n        }\\n      }\\n    }\\n  }\\n};\\n\\n/**\\n * Parse Inline\\n */\\nmarked.parseInline = function(src, opt) {\\n  // throw error in case of non string input\\n  if (typeof src === 'undefined' || src === null) {\\n[end of marked.esm.js]\\n[start of marked.js]\\n/**\\n * marked - a markdown parser\\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n\\n/**\\n * DO NOT EDIT THIS FILE\\n * The code in this file is generated from files in ./src/\\n */\\n\\n(function (global, factory) {\\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\\n  typeof define === 'function' && define.amd ? define(factory) :\\n  (global = global || self, global.marked = factory());\\n}(this, (function () { 'use strict';\\n\\n  function _defineProperties(target, props) {\\n    for (var i = 0; i < props.length; i++) {\\n      var descriptor = props[i];\\n      descriptor.enumerable = descriptor.enumerable || false;\\n      descriptor.configurable = true;\\n      if (\\\"value\\\" in descriptor) descriptor.writable = true;\\n      Object.defineProperty(target, descriptor.key, descriptor);\\n    }\\n  }\\n\\n  function _createClass(Constructor, protoProps, staticProps) {\\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\\n    if (staticProps) _defineProperties(Constructor, staticProps);\\n    return Constructor;\\n  }\\n\\n  function _unsupportedIterableToArray(o, minLen) {\\n    if (!o) return;\\n    if (typeof o === \\\"string\\\") return _arrayLikeToArray(o, minLen);\\n    var n = Object.prototype.toString.call(o).slice(8, -1);\\n    if (n === \\\"Object\\\" && o.constructor) n = o.constructor.name;\\n    if (n === \\\"Map\\\" || n === \\\"Set\\\") return Array.from(o);\\n    if (n === \\\"Arguments\\\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\\n  }\\n\\n  function _arrayLikeToArray(arr, len) {\\n    if (len == null || len > arr.length) len = arr.length;\\n\\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\\n\\n    return arr2;\\n  }\\n\\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) {\\n    var it;\\n\\n    if (typeof Symbol === \\\"undefined\\\" || o[Symbol.iterator] == null) {\\n      if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \\\"number\\\") {\\n        if (it) o = it;\\n        var i = 0;\\n        return function () {\\n          if (i >= o.length) return {\\n            done: true\\n          };\\n          return {\\n            done: false,\\n            value: o[i++]\\n          };\\n        };\\n      }\\n\\n      throw new TypeError(\\\"Invalid attempt to iterate non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\");\\n    }\\n\\n    it = o[Symbol.iterator]();\\n    return it.next.bind(it);\\n  }\\n\\n  function createCommonjsModule(fn, module) {\\n  \\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\\n  }\\n\\n  var defaults = createCommonjsModule(function (module) {\\n    function getDefaults() {\\n      return {\\n        baseUrl: null,\\n        breaks: false,\\n        gfm: true,\\n        headerIds: true,\\n        headerPrefix: '',\\n        highlight: null,\\n        langPrefix: 'language-',\\n        mangle: true,\\n        pedantic: false,\\n        renderer: null,\\n        sanitize: false,\\n        sanitizer: null,\\n        silent: false,\\n        smartLists: false,\\n        smartypants: false,\\n        tokenizer: null,\\n        walkTokens: null,\\n        xhtml: false\\n      };\\n    }\\n\\n    function changeDefaults(newDefaults) {\\n      module.exports.defaults = newDefaults;\\n    }\\n\\n    module.exports = {\\n      defaults: getDefaults(),\\n      getDefaults: getDefaults,\\n      changeDefaults: changeDefaults\\n    };\\n  });\\n  var defaults_1 = defaults.defaults;\\n  var defaults_2 = defaults.getDefaults;\\n  var defaults_3 = defaults.changeDefaults;\\n\\n  /**\\n   * Helpers\\n   */\\n  var escapeTest = /[&<>\\\"']/;\\n  var escapeReplace = /[&<>\\\"']/g;\\n  var escapeTestNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/;\\n  var escapeReplaceNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/g;\\n  var escapeReplacements = {\\n    '&': '&amp;',\\n    '<': '&lt;',\\n    '>': '&gt;',\\n    '\\\"': '&quot;',\\n    \\\"'\\\": '&#39;'\\n  };\\n\\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\\n    return escapeReplacements[ch];\\n  };\\n\\n  function escape(html, encode) {\\n    if (encode) {\\n      if (escapeTest.test(html)) {\\n        return html.replace(escapeReplace, getEscapeReplacement);\\n      }\\n    } else {\\n      if (escapeTestNoEncode.test(html)) {\\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\\n      }\\n    }\\n\\n    return html;\\n  }\\n\\n  var unescapeTest = /&(#(?:\\\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\\\w+));?/ig;\\n\\n  function unescape(html) {\\n    // explicitly match decimal, hex, and named HTML entities\\n    return html.replace(unescapeTest, function (_, n) {\\n      n = n.toLowerCase();\\n      if (n === 'colon') return ':';\\n\\n      if (n.charAt(0) === '#') {\\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\\n      }\\n\\n      return '';\\n    });\\n  }\\n\\n  var caret = /(^|[^\\\\[])\\\\^/g;\\n\\n  function edit(regex, opt) {\\n    regex = regex.source || regex;\\n    opt = opt || '';\\n    var obj = {\\n      replace: function replace(name, val) {\\n        val = val.source || val;\\n        val = val.replace(caret, '$1');\\n        regex = regex.replace(name, val);\\n        return obj;\\n      },\\n      getRegex: function getRegex() {\\n        return new RegExp(regex, opt);\\n      }\\n    };\\n    return obj;\\n  }\\n\\n  var nonWordAndColonTest = /[^\\\\w:]/g;\\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\\n\\n  function cleanUrl(sanitize, base, href) {\\n    if (sanitize) {\\n      var prot;\\n\\n      try {\\n        prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, '').toLowerCase();\\n      } catch (e) {\\n        return null;\\n      }\\n\\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\\n        return null;\\n      }\\n    }\\n\\n    if (base && !originIndependentUrl.test(href)) {\\n      href = resolveUrl(base, href);\\n    }\\n\\n    try {\\n      href = encodeURI(href).replace(/%25/g, '%');\\n    } catch (e) {\\n      return null;\\n    }\\n\\n    return href;\\n  }\\n\\n  var baseUrls = {};\\n  var justDomain = /^[^:]+:\\\\/*[^/]*$/;\\n  var protocol = /^([^:]+:)[\\\\s\\\\S]*$/;\\n  var domain = /^([^:]+:\\\\/*[^/]*)[\\\\s\\\\S]*$/;\\n\\n  function resolveUrl(base, href) {\\n    if (!baseUrls[' ' + base]) {\\n      // we can ignore everything in base after the last slash of its path component,\\n      // but we might need to add _that_\\n      // https://tools.ietf.org/html/rfc3986#section-3\\n      if (justDomain.test(base)) {\\n        baseUrls[' ' + base] = base + '/';\\n      } else {\\n        baseUrls[' ' + base] = rtrim(base, '/', true);\\n      }\\n    }\\n\\n    base = baseUrls[' ' + base];\\n    var relativeBase = base.indexOf(':') === -1;\\n\\n    if (href.substring(0, 2) === '//') {\\n      if (relativeBase) {\\n        return href;\\n      }\\n\\n      return base.replace(protocol, '$1') + href;\\n    } else if (href.charAt(0) === '/') {\\n      if (relativeBase) {\\n        return href;\\n      }\\n\\n      return base.replace(domain, '$1') + href;\\n    } else {\\n      return base + href;\\n    }\\n  }\\n\\n  var noopTest = {\\n    exec: function noopTest() {}\\n  };\\n\\n  function merge(obj) {\\n    var i = 1,\\n        target,\\n        key;\\n\\n    for (; i < arguments.length; i++) {\\n      target = arguments[i];\\n\\n      for (key in target) {\\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\\n          obj[key] = target[key];\\n        }\\n      }\\n    }\\n\\n    return obj;\\n  }\\n\\n  function splitCells(tableRow, count) {\\n    // ensure that every cell-delimiting pipe has a space\\n    // before it to distinguish it from an escaped pipe\\n    var row = tableRow.replace(/\\\\|/g, function (match, offset, str) {\\n      var escaped = false,\\n          curr = offset;\\n\\n      while (--curr >= 0 && str[curr] === '\\\\\\\\') {\\n        escaped = !escaped;\\n      }\\n\\n      if (escaped) {\\n        // odd number of slashes means | is escaped\\n        // so we leave it alone\\n        return '|';\\n      } else {\\n        // add space before unescaped |\\n        return ' |';\\n      }\\n    }),\\n        cells = row.split(/ \\\\|/);\\n    var i = 0;\\n\\n    if (cells.length > count) {\\n      cells.splice(count);\\n    } else {\\n      while (cells.length < count) {\\n        cells.push('');\\n      }\\n    }\\n\\n    for (; i < cells.length; i++) {\\n      // leading or trailing whitespace is ignored per the gfm spec\\n      cells[i] = cells[i].trim().replace(/\\\\\\\\\\\\|/g, '|');\\n    }\\n\\n    return cells;\\n  } // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\\n  // /c*$/ is vulnerable to REDOS.\\n  // invert: Remove suffix of non-c chars instead. Default falsey.\\n\\n\\n  function rtrim(str, c, invert) {\\n    var l = str.length;\\n\\n    if (l === 0) {\\n      return '';\\n    } // Length of suffix matching the invert condition.\\n\\n\\n    var suffLen = 0; // Step left until we fail to match the invert condition.\\n\\n    while (suffLen < l) {\\n      var currChar = str.charAt(l - suffLen - 1);\\n\\n      if (currChar === c && !invert) {\\n        suffLen++;\\n      } else if (currChar !== c && invert) {\\n        suffLen++;\\n      } else {\\n        break;\\n      }\\n    }\\n\\n    return str.substr(0, l - suffLen);\\n  }\\n\\n  function findClosingBracket(str, b) {\\n    if (str.indexOf(b[1]) === -1) {\\n      return -1;\\n    }\\n\\n    var l = str.length;\\n    var level = 0,\\n        i = 0;\\n\\n    for (; i < l; i++) {\\n      if (str[i] === '\\\\\\\\') {\\n        i++;\\n      } else if (str[i] === b[0]) {\\n        level++;\\n      } else if (str[i] === b[1]) {\\n        level--;\\n\\n        if (level < 0) {\\n          return i;\\n        }\\n      }\\n    }\\n\\n    return -1;\\n  }\\n\\n  function checkSanitizeDeprecation(opt) {\\n    if (opt && opt.sanitize && !opt.silent) {\\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\\n    }\\n  }\\n\\n  var helpers = {\\n    escape: escape,\\n    unescape: unescape,\\n    edit: edit,\\n    cleanUrl: cleanUrl,\\n    resolveUrl: resolveUrl,\\n    noopTest: noopTest,\\n    merge: merge,\\n    splitCells: splitCells,\\n    rtrim: rtrim,\\n    findClosingBracket: findClosingBracket,\\n    checkSanitizeDeprecation: checkSanitizeDeprecation\\n  };\\n\\n  var defaults$1 = defaults.defaults;\\n  var rtrim$1 = helpers.rtrim,\\n      splitCells$1 = helpers.splitCells,\\n      _escape = helpers.escape,\\n      findClosingBracket$1 = helpers.findClosingBracket;\\n\\n  function outputLink(cap, link, raw) {\\n    var href = link.href;\\n    var title = link.title ? _escape(link.title) : null;\\n    var text = cap[1].replace(/\\\\\\\\([\\\\[\\\\]])/g, '$1');\\n\\n    if (cap[0].charAt(0) !== '!') {\\n      return {\\n        type: 'link',\\n        raw: raw,\\n        href: href,\\n        title: title,\\n        text: text\\n      };\\n    } else {\\n      return {\\n        type: 'image',\\n        raw: raw,\\n        href: href,\\n        title: title,\\n        text: _escape(text)\\n      };\\n    }\\n  }\\n\\n  function indentCodeCompensation(raw, text) {\\n    var matchIndentToCode = raw.match(/^(\\\\s+)(?:```)/);\\n\\n    if (matchIndentToCode === null) {\\n      return text;\\n    }\\n\\n    var indentToCode = matchIndentToCode[1];\\n    return text.split('\\\\n').map(function (node) {\\n      var matchIndentInNode = node.match(/^\\\\s+/);\\n\\n      if (matchIndentInNode === null) {\\n        return node;\\n      }\\n\\n      var indentInNode = matchIndentInNode[0];\\n\\n      if (indentInNode.length >= indentToCode.length) {\\n        return node.slice(indentToCode.length);\\n      }\\n\\n      return node;\\n    }).join('\\\\n');\\n  }\\n  /**\\n   * Tokenizer\\n   */\\n\\n\\n  var Tokenizer_1 = /*#__PURE__*/function () {\\n    function Tokenizer(options) {\\n      this.options = options || defaults$1;\\n    }\\n\\n    var _proto = Tokenizer.prototype;\\n\\n    _proto.space = function space(src) {\\n      var cap = this.rules.block.newline.exec(src);\\n\\n      if (cap) {\\n        if (cap[0].length > 1) {\\n          return {\\n            type: 'space',\\n            raw: cap[0]\\n          };\\n        }\\n\\n        return {\\n          raw: '\\\\n'\\n        };\\n      }\\n    };\\n\\n    _proto.code = function code(src, tokens) {\\n      var cap = this.rules.block.code.exec(src);\\n\\n      if (cap) {\\n        var lastToken = tokens[tokens.length - 1]; // An indented code block cannot interrupt a paragraph.\\n\\n        if (lastToken && lastToken.type === 'paragraph') {\\n          return {\\n            raw: cap[0],\\n            text: cap[0].trimRight()\\n          };\\n        }\\n\\n        var text = cap[0].replace(/^ {4}/gm, '');\\n        return {\\n          type: 'code',\\n          raw: cap[0],\\n          codeBlockStyle: 'indented',\\n          text: !this.options.pedantic ? rtrim$1(text, '\\\\n') : text\\n        };\\n      }\\n    };\\n\\n    _proto.fences = function fences(src) {\\n      var cap = this.rules.block.fences.exec(src);\\n\\n      if (cap) {\\n        var raw = cap[0];\\n        var text = indentCodeCompensation(raw, cap[3] || '');\\n        return {\\n          type: 'code',\\n          raw: raw,\\n          lang: cap[2] ? cap[2].trim() : cap[2],\\n          text: text\\n        };\\n      }\\n    };\\n\\n    _proto.heading = function heading(src) {\\n      var cap = this.rules.block.heading.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'heading',\\n          raw: cap[0],\\n          depth: cap[1].length,\\n          text: cap[2]\\n        };\\n      }\\n    };\\n\\n    _proto.nptable = function nptable(src) {\\n      var cap = this.rules.block.nptable.exec(src);\\n\\n      if (cap) {\\n        var item = {\\n          type: 'table',\\n          header: splitCells$1(cap[1].replace(/^ *| *\\\\| *$/g, '')),\\n          align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n          cells: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : [],\\n          raw: cap[0]\\n        };\\n\\n        if (item.header.length === item.align.length) {\\n          var l = item.align.length;\\n          var i;\\n\\n          for (i = 0; i < l; i++) {\\n            if (/^ *-+: *$/.test(item.align[i])) {\\n              item.align[i] = 'right';\\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\\n              item.align[i] = 'center';\\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\\n              item.align[i] = 'left';\\n            } else {\\n              item.align[i] = null;\\n            }\\n          }\\n\\n          l = item.cells.length;\\n\\n          for (i = 0; i < l; i++) {\\n            item.cells[i] = splitCells$1(item.cells[i], item.header.length);\\n          }\\n\\n          return item;\\n        }\\n      }\\n    };\\n\\n    _proto.hr = function hr(src) {\\n      var cap = this.rules.block.hr.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'hr',\\n          raw: cap[0]\\n        };\\n      }\\n    };\\n\\n    _proto.blockquote = function blockquote(src) {\\n      var cap = this.rules.block.blockquote.exec(src);\\n\\n      if (cap) {\\n        var text = cap[0].replace(/^ *> ?/gm, '');\\n        return {\\n          type: 'blockquote',\\n          raw: cap[0],\\n          text: text\\n        };\\n      }\\n    };\\n\\n    _proto.list = function list(src) {\\n      var cap = this.rules.block.list.exec(src);\\n\\n      if (cap) {\\n        var raw = cap[0];\\n        var bull = cap[2];\\n        var isordered = bull.length > 1;\\n        var isparen = bull[bull.length - 1] === ')';\\n        var list = {\\n          type: 'list',\\n          raw: raw,\\n          ordered: isordered,\\n          start: isordered ? +bull.slice(0, -1) : '',\\n          loose: false,\\n          items: []\\n        }; // Get each top-level item.\\n\\n        var itemMatch = cap[0].match(this.rules.block.item);\\n        var next = false,\\n            item,\\n            space,\\n            b,\\n            addBack,\\n            loose,\\n            istask,\\n            ischecked;\\n        var l = itemMatch.length;\\n\\n        for (var i = 0; i < l; i++) {\\n          item = itemMatch[i];\\n          raw = item; // Remove the list item's bullet\\n          // so it is seen as the next token.\\n\\n          space = item.length;\\n          item = item.replace(/^ *([*+-]|\\\\d+[.)]) */, ''); // Outdent whatever the\\n          // list item contains. Hacky.\\n\\n          if (~item.indexOf('\\\\n ')) {\\n            space -= item.length;\\n            item = !this.options.pedantic ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '') : item.replace(/^ {1,4}/gm, '');\\n          } // Determine whether the next list item belongs here.\\n          // Backpedal if it does not belong in this list.\\n\\n\\n          if (i !== l - 1) {\\n            b = this.rules.block.bullet.exec(itemMatch[i + 1])[0];\\n\\n            if (isordered ? b.length === 1 || !isparen && b[b.length - 1] === ')' : b.length > 1 || this.options.smartLists && b !== bull) {\\n              addBack = itemMatch.slice(i + 1).join('\\\\n');\\n              list.raw = list.raw.substring(0, list.raw.length - addBack.length);\\n              i = l - 1;\\n            }\\n          } // Determine whether item is loose or not.\\n          // Use: /(^|\\\\n)(?! )[^\\\\n]+\\\\n\\\\n(?!\\\\s*$)/\\n          // for discount behavior.\\n\\n\\n          loose = next || /\\\\n\\\\n(?!\\\\s*$)/.test(item);\\n\\n          if (i !== l - 1) {\\n            next = item.charAt(item.length - 1) === '\\\\n';\\n            if (!loose) loose = next;\\n          }\\n\\n          if (loose) {\\n            list.loose = true;\\n          } // Check for task list items\\n\\n\\n          istask = /^\\\\[[ xX]\\\\] /.test(item);\\n          ischecked = undefined;\\n\\n          if (istask) {\\n            ischecked = item[1] !== ' ';\\n            item = item.replace(/^\\\\[[ xX]\\\\] +/, '');\\n          }\\n\\n          list.items.push({\\n            type: 'list_item',\\n            raw: raw,\\n            task: istask,\\n            checked: ischecked,\\n            loose: loose,\\n            text: item\\n          });\\n        }\\n\\n        return list;\\n      }\\n    };\\n\\n    _proto.html = function html(src) {\\n      var cap = this.rules.block.html.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: this.options.sanitize ? 'paragraph' : 'html',\\n          raw: cap[0],\\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\\n        };\\n      }\\n    };\\n\\n    _proto.def = function def(src) {\\n      var cap = this.rules.block.def.exec(src);\\n\\n      if (cap) {\\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\\n        var tag = cap[1].toLowerCase().replace(/\\\\s+/g, ' ');\\n        return {\\n          tag: tag,\\n          raw: cap[0],\\n          href: cap[2],\\n          title: cap[3]\\n        };\\n      }\\n    };\\n\\n    _proto.table = function table(src) {\\n      var cap = this.rules.block.table.exec(src);\\n\\n      if (cap) {\\n        var item = {\\n          type: 'table',\\n          header: splitCells$1(cap[1].replace(/^ *| *\\\\| *$/g, '')),\\n          align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n          cells: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : []\\n        };\\n\\n        if (item.header.length === item.align.length) {\\n          item.raw = cap[0];\\n          var l = item.align.length;\\n          var i;\\n\\n          for (i = 0; i < l; i++) {\\n            if (/^ *-+: *$/.test(item.align[i])) {\\n              item.align[i] = 'right';\\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\\n              item.align[i] = 'center';\\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\\n              item.align[i] = 'left';\\n            } else {\\n              item.align[i] = null;\\n            }\\n          }\\n\\n          l = item.cells.length;\\n\\n          for (i = 0; i < l; i++) {\\n            item.cells[i] = splitCells$1(item.cells[i].replace(/^ *\\\\| *| *\\\\| *$/g, ''), item.header.length);\\n          }\\n\\n          return item;\\n        }\\n      }\\n    };\\n\\n    _proto.lheading = function lheading(src) {\\n      var cap = this.rules.block.lheading.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'heading',\\n          raw: cap[0],\\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\\n          text: cap[1]\\n        };\\n      }\\n    };\\n\\n    _proto.paragraph = function paragraph(src) {\\n      var cap = this.rules.block.paragraph.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'paragraph',\\n          raw: cap[0],\\n          text: cap[1].charAt(cap[1].length - 1) === '\\\\n' ? cap[1].slice(0, -1) : cap[1]\\n        };\\n      }\\n    };\\n\\n    _proto.text = function text(src, tokens) {\\n      var cap = this.rules.block.text.exec(src);\\n\\n      if (cap) {\\n        var lastToken = tokens[tokens.length - 1];\\n\\n        if (lastToken && lastToken.type === 'text') {\\n          return {\\n            raw: cap[0],\\n            text: cap[0]\\n          };\\n        }\\n\\n        return {\\n          type: 'text',\\n          raw: cap[0],\\n          text: cap[0]\\n        };\\n      }\\n    };\\n\\n    _proto.escape = function escape(src) {\\n      var cap = this.rules.inline.escape.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'escape',\\n          raw: cap[0],\\n          text: _escape(cap[1])\\n        };\\n      }\\n    };\\n\\n    _proto.tag = function tag(src, inLink, inRawBlock) {\\n      var cap = this.rules.inline.tag.exec(src);\\n\\n      if (cap) {\\n        if (!inLink && /^<a /i.test(cap[0])) {\\n          inLink = true;\\n        } else if (inLink && /^<\\\\/a>/i.test(cap[0])) {\\n          inLink = false;\\n        }\\n\\n        if (!inRawBlock && /^<(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n          inRawBlock = true;\\n        } else if (inRawBlock && /^<\\\\/(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n          inRawBlock = false;\\n        }\\n\\n        return {\\n          type: this.options.sanitize ? 'text' : 'html',\\n          raw: cap[0],\\n          inLink: inLink,\\n          inRawBlock: inRawBlock,\\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\\n        };\\n      }\\n    };\\n\\n    _proto.link = function link(src) {\\n      var cap = this.rules.inline.link.exec(src);\\n\\n      if (cap) {\\n        var lastParenIndex = findClosingBracket$1(cap[2], '()');\\n\\n        if (lastParenIndex > -1) {\\n          var start = cap[0].indexOf('!') === 0 ? 5 : 4;\\n          var linkLen = start + cap[1].length + lastParenIndex;\\n          cap[2] = cap[2].substring(0, lastParenIndex);\\n          cap[0] = cap[0].substring(0, linkLen).trim();\\n          cap[3] = '';\\n        }\\n\\n        var href = cap[2];\\n        var title = '';\\n\\n        if (this.options.pedantic) {\\n          var link = /^([^'\\\"]*[^\\\\s])\\\\s+(['\\\"])(.*)\\\\2/.exec(href);\\n\\n          if (link) {\\n            href = link[1];\\n            title = link[3];\\n          } else {\\n            title = '';\\n          }\\n        } else {\\n          title = cap[3] ? cap[3].slice(1, -1) : '';\\n        }\\n\\n        href = href.trim().replace(/^<([\\\\s\\\\S]*)>$/, '$1');\\n        var token = outputLink(cap, {\\n          href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\\n          title: title ? title.replace(this.rules.inline._escapes, '$1') : title\\n        }, cap[0]);\\n        return token;\\n      }\\n    };\\n\\n    _proto.reflink = function reflink(src, links) {\\n      var cap;\\n\\n      if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {\\n        var link = (cap[2] || cap[1]).replace(/\\\\s+/g, ' ');\\n        link = links[link.toLowerCase()];\\n\\n        if (!link || !link.href) {\\n[end of marked.js]\\n[start of Parser-spec.js]\\nconst Parser = require('../../src/Parser.js');\\n\\nasync function expectHtml({ tokens, options, html, inline }) {\\n  const parser = new Parser(options);\\n  const actual = parser[inline ? 'parseInline' : 'parse'](tokens);\\n  await expectAsync(actual).toEqualHtml(html);\\n}\\n\\ndescribe('Parser', () => {\\n  describe('block', () => {\\n    it('space between paragraphs', async() => {\\n      await expectHtml({\\n        tokens: [\\n          {\\n            type: 'paragraph',\\n            text: 'paragraph 1',\\n            tokens: [\\n              { type: 'text', text: 'paragraph 1' }\\n            ]\\n          },\\n          { type: 'space' },\\n          {\\n            type: 'paragraph',\\n            text: 'paragraph 2',\\n            tokens: [\\n              { type: 'text', text: 'paragraph 2' }\\n            ]\\n          }\\n        ],\\n        html: '<p>paragraph 1</p><p>paragraph 2</p>'\\n      });\\n    });\\n\\n    it('hr', async() => {\\n      await expectHtml({\\n        tokens: [{\\n          type: 'hr'\\n        }],\\n        html: '<hr />'\\n      });\\n    });\\n\\n    it('heading', async() => {\\n      await expectHtml({\\n        tokens: [{\\n          type: 'heading',\\n          depth: 1,\\n          text: 'heading',\\n          tokens: [\\n            { type: 'text', text: 'heading' }\\n          ]\\n        }],\\n        html: '<h1 id=\\\"heading\\\">heading</h1>'\\n      });\\n    });\\n\\n    it('code', async() => {\\n      await expectHtml({\\n        tokens: [{\\n          type: 'code',\\n          text: 'code'\\n        }],\\n        html: '<pre><code>code</code></pre>'\\n      });\\n    });\\n\\n    it('table', async() => {\\n      await expectHtml({\\n        tokens: [{\\n          type: 'table',\\n          header: ['a', 'b'],\\n          align: ['left', 'right'],\\n          cells: [['1', '2']],\\n          tokens: {\\n            header: [\\n              [{ type: 'text', text: 'a' }],\\n              [{ type: 'text', text: 'b' }]\\n            ],\\n            cells: [\\n              [\\n                [{ type: 'text', text: '1' }],\\n                [{ type: 'text', text: '2' }]\\n              ]\\n            ]\\n          }\\n        }],\\n        html: `\\n<table>\\n  <thead>\\n    <tr>\\n      <th align=\\\"left\\\">a</th>\\n      <th align=\\\"right\\\">b</th>\\n    </tr>\\n  </thead>\\n  <tbody>\\n    <tr>\\n      <td align=\\\"left\\\">1</td>\\n      <td align=\\\"right\\\">2</td>\\n    </tr>\\n  </tbody>\\n</table>`\\n      });\\n    });\\n\\n    it('blockquote', async() => {\\n      await expectHtml({\\n        tokens: [\\n          {\\n            type: 'blockquote',\\n            tokens: [{\\n              type: 'paragraph',\\n              text: 'blockquote',\\n              tokens: [\\n                { type: 'text', text: 'blockquote' }\\n              ]\\n            }]\\n          }\\n        ],\\n        html: '<blockquote><p>blockquote</p></blockquote>'\\n      });\\n    });\\n\\n    describe('list', () => {\\n      it('unordered', async() => {\\n        await expectHtml({\\n          tokens: [\\n            {\\n              type: 'list',\\n              ordered: false,\\n              start: '',\\n              loose: false,\\n              items: [\\n                {\\n                  task: false,\\n                  checked: undefined,\\n                  tokens: [{\\n                    type: 'text',\\n                    text: 'item 1',\\n                    tokens: [{ type: 'text', text: 'item 1' }]\\n                  }]\\n                },\\n                {\\n                  task: false,\\n                  checked: undefined,\\n                  tokens: [{\\n                    type: 'text',\\n                    text: 'item 2',\\n                    tokens: [{ type: 'text', text: 'item 2' }]\\n                  }]\\n                }\\n              ]\\n            }\\n          ],\\n          html: `\\n<ul>\\n  <li>item 1</li>\\n  <li>item 2</li>\\n</ul>`\\n        });\\n      });\\n\\n      it('ordered', async() => {\\n        await expectHtml({\\n          tokens: [\\n            {\\n              type: 'list',\\n              ordered: true,\\n              start: 2,\\n              loose: false,\\n              items: [\\n                {\\n                  task: false,\\n                  checked: undefined,\\n                  tokens: [{\\n                    type: 'text',\\n                    text: 'item 1',\\n                    tokens: [{ type: 'text', text: 'item 1' }]\\n                  }]\\n                },\\n                {\\n                  task: false,\\n                  checked: undefined,\\n                  tokens: [{\\n                    type: 'text',\\n                    text: 'item 2',\\n                    tokens: [{ type: 'text', text: 'item 2' }]\\n                  }]\\n                }\\n              ]\\n            }\\n          ],\\n          html: `\\n<ol start='2'>\\n  <li>item 1</li>\\n  <li>item 2</li>\\n</ol>`\\n        });\\n      });\\n\\n      it('tasks', async() => {\\n        await expectHtml({\\n          tokens: [\\n            {\\n              type: 'list',\\n              ordered: false,\\n              start: '',\\n              loose: false,\\n              items: [\\n                {\\n                  task: true,\\n                  checked: false,\\n                  tokens: [{\\n                    type: 'text',\\n                    text: 'item 1',\\n                    tokens: [{ type: 'text', text: 'item 1' }]\\n                  }]\\n                },\\n                {\\n                  task: true,\\n                  checked: true,\\n                  tokens: [{\\n                    type: 'text',\\n                    text: 'item 2',\\n                    tokens: [{ type: 'text', text: 'item 2' }]\\n                  }]\\n                }\\n              ]\\n            }\\n          ],\\n          html: `\\n<ul>\\n  <li><input disabled type=\\\"checkbox\\\"> item 1</li>\\n  <li><input checked disabled type=\\\"checkbox\\\"> item 2</li>\\n</ul>`\\n        });\\n      });\\n\\n      it('loose', async() => {\\n        await expectHtml({\\n          tokens: [\\n            {\\n              type: 'list',\\n              ordered: false,\\n              start: '',\\n              loose: true,\\n              items: [\\n                {\\n                  task: false,\\n                  checked: undefined,\\n                  tokens: [{\\n                    type: 'text',\\n                    text: 'item 1',\\n                    tokens: [{ type: 'text', text: 'item 1' }]\\n                  }]\\n                },\\n                {\\n                  task: false,\\n                  checked: undefined,\\n                  tokens: [{\\n                    type: 'text',\\n                    text: 'item 2',\\n                    tokens: [{ type: 'text', text: 'item 2' }]\\n                  }]\\n                }\\n              ]\\n            }\\n          ],\\n          html: `\\n  <ul>\\n    <li><p>item 1</p></li>\\n    <li><p>item 2</p></li>\\n  </ul>`\\n        });\\n      });\\n    });\\n\\n    it('html', async() => {\\n      await expectHtml({\\n        tokens: [{\\n          type: 'html',\\n          text: '<div>html</div>'\\n        }],\\n        html: '<div>html</div>'\\n      });\\n    });\\n\\n    it('paragraph', async() => {\\n      await expectHtml({\\n        tokens: [{\\n          type: 'paragraph',\\n          text: 'paragraph 1',\\n          tokens: [\\n            { type: 'text', text: 'paragraph 1' }\\n          ]\\n        }],\\n        html: '<p>paragraph 1</p>'\\n      });\\n    });\\n\\n    it('text', async() => {\\n      await expectHtml({\\n        tokens: [\\n          { type: 'text', text: 'text 1' },\\n          { type: 'text', text: 'text 2' }\\n        ],\\n        html: '<p>text 1\\\\ntext 2</p>'\\n      });\\n    });\\n  });\\n\\n  describe('inline', () => {\\n    it('escape', async() => {\\n      await expectHtml({\\n        inline: true,\\n        tokens: [\\n          { type: 'escape', text: '&gt;' }\\n        ],\\n        html: '&gt;'\\n      });\\n    });\\n\\n    it('html', async() => {\\n      await expectHtml({\\n        inline: true,\\n        tokens: [\\n          { type: 'html', text: '<div>' },\\n          { type: 'text', text: 'html' },\\n          { type: 'html', text: '</div>' }\\n        ],\\n        html: '<div>html</div>'\\n      });\\n    });\\n\\n    it('link', async() => {\\n      await expectHtml({\\n        inline: true,\\n        tokens: [\\n          {\\n            type: 'link',\\n            text: 'link',\\n            href: 'https://example.com',\\n            title: 'title',\\n            tokens: [\\n              { type: 'text', text: 'link' }\\n            ]\\n          }\\n        ],\\n        html: '<a href=\\\"https://example.com\\\" title=\\\"title\\\">link</a>'\\n      });\\n    });\\n\\n    it('image', async() => {\\n      await expectHtml({\\n        inline: true,\\n        tokens: [\\n          {\\n            type: 'image',\\n            text: 'image',\\n            href: 'image.png',\\n            title: 'title'\\n          }\\n        ],\\n        html: '<img src=\\\"image.png\\\" alt=\\\"image\\\" title=\\\"title\\\">'\\n      });\\n    });\\n\\n    it('strong', async() => {\\n      await expectHtml({\\n        inline: true,\\n        tokens: [\\n          {\\n            type: 'strong',\\n            text: 'strong',\\n            tokens: [\\n              { type: 'text', text: 'strong' }\\n            ]\\n          }\\n        ],\\n        html: '<strong>strong</strong>'\\n      });\\n    });\\n\\n    it('em', async() => {\\n      await expectHtml({\\n        inline: true,\\n        tokens: [\\n          {\\n            type: 'em',\\n            text: 'em',\\n            tokens: [\\n              { type: 'text', text: 'em' }\\n            ]\\n          }\\n        ],\\n        html: '<em>em</em>'\\n      });\\n    });\\n\\n    it('codespan', async() => {\\n      await expectHtml({\\n        inline: true,\\n        tokens: [\\n          {\\n            type: 'codespan',\\n            text: 'code'\\n          }\\n        ],\\n        html: '<code>code</code>'\\n      });\\n    });\\n\\n    it('br', async() => {\\n      await expectHtml({\\n        inline: true,\\n        tokens: [{\\n          type: 'br'\\n        }],\\n        html: '<br />'\\n      });\\n    });\\n\\n    it('del', async() => {\\n      await expectHtml({\\n        inline: true,\\n        tokens: [\\n          {\\n            type: 'del',\\n            text: 'del',\\n            tokens: [\\n              { type: 'text', text: 'del' }\\n            ]\\n          }\\n        ],\\n        html: '<del>del</del>'\\n      });\\n    });\\n\\n    it('text', async() => {\\n      await expectHtml({\\n        inline: true,\\n        tokens: [\\n          { type: 'text', text: 'text 1' },\\n          { type: 'text', text: 'text 2' }\\n        ],\\n        html: 'text 1text 2'\\n      });\\n    });\\n  });\\n});\\n\\n[end of Parser-spec.js]\\n[start of marked-spec.js]\\nconst marked = require('../../src/marked.js');\\n\\ndescribe('Test heading ID functionality', () => {\\n  it('should add id attribute by default', () => {\\n    const renderer = new marked.Renderer();\\n    const slugger = new marked.Slugger();\\n    const header = renderer.heading('test', 1, 'test', slugger);\\n    expect(header).toBe('<h1 id=\\\"test\\\">test</h1>\\\\n');\\n  });\\n\\n  it('should NOT add id attribute when options set false', () => {\\n    const renderer = new marked.Renderer({ headerIds: false });\\n    const header = renderer.heading('test', 1, 'test');\\n    expect(header).toBe('<h1>test</h1>\\\\n');\\n  });\\n});\\n\\ndescribe('Test slugger functionality', () => {\\n  it('should use lowercase slug', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('Test')).toBe('test');\\n  });\\n\\n  it('should be unique to avoid collisions 1280', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('test')).toBe('test');\\n    expect(slugger.slug('test')).toBe('test-1');\\n    expect(slugger.slug('test')).toBe('test-2');\\n  });\\n\\n  it('should be unique when slug ends with number', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('test 1')).toBe('test-1');\\n    expect(slugger.slug('test')).toBe('test');\\n    expect(slugger.slug('test')).toBe('test-2');\\n  });\\n\\n  it('should be unique when slug ends with hyphen number', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('foo')).toBe('foo');\\n    expect(slugger.slug('foo')).toBe('foo-1');\\n    expect(slugger.slug('foo 1')).toBe('foo-1-1');\\n    expect(slugger.slug('foo-1')).toBe('foo-1-2');\\n    expect(slugger.slug('foo')).toBe('foo-2');\\n  });\\n\\n  it('should allow non-latin chars', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('\\u043f\\u0440\\u0438\\u0432\\u0435\\u0442')).toBe('\\u043f\\u0440\\u0438\\u0432\\u0435\\u0442');\\n  });\\n\\n  it('should remove ampersands 857', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('This & That Section')).toBe('this--that-section');\\n  });\\n\\n  it('should remove periods', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('file.txt')).toBe('filetxt');\\n  });\\n\\n  it('should remove html tags', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('<em>html</em>')).toBe('html');\\n  });\\n\\n  it('should not increment seen when using dryrun option', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('<h1>This Section</h1>', { dryrun: true })).toBe('this-section');\\n    expect(slugger.slug('<h1>This Section</h1>')).toBe('this-section');\\n  });\\n\\n  it('should still return the next unique id when using dryrun', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('<h1>This Section</h1>')).toBe('this-section');\\n    expect(slugger.slug('<h1>This Section</h1>', { dryrun: true })).toBe('this-section-1');\\n  });\\n\\n  it('should be repeatable in a sequence', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('foo')).toBe('foo');\\n    expect(slugger.slug('foo')).toBe('foo-1');\\n    expect(slugger.slug('foo')).toBe('foo-2');\\n    expect(slugger.slug('foo', { dryrun: true })).toBe('foo-3');\\n    expect(slugger.slug('foo', { dryrun: true })).toBe('foo-3');\\n    expect(slugger.slug('foo')).toBe('foo-3');\\n    expect(slugger.slug('foo')).toBe('foo-4');\\n  });\\n});\\n\\ndescribe('Test paragraph token type', () => {\\n  it('should use the \\\"paragraph\\\" type on top level', () => {\\n    const md = 'A Paragraph.\\\\n\\\\n> A blockquote\\\\n\\\\n- list item\\\\n';\\n\\n    const tokens = marked.lexer(md);\\n\\n    expect(tokens[0].type).toBe('paragraph');\\n    expect(tokens[2].tokens[0].type).toBe('paragraph');\\n    expect(tokens[3].items[0].tokens[0].type).toBe('text');\\n  });\\n});\\n\\ndescribe('changeDefaults', () => {\\n  it('should change global defaults', () => {\\n    const { defaults, changeDefaults } = require('../../src/defaults');\\n    expect(defaults.test).toBeUndefined();\\n    changeDefaults({ test: true });\\n    expect(require('../../src/defaults').defaults.test).toBe(true);\\n  });\\n});\\n\\ndescribe('inlineLexer', () => {\\n  it('should send html to renderer.html', () => {\\n    const renderer = new marked.Renderer();\\n    spyOn(renderer, 'html').and.callThrough();\\n    const md = 'HTML Image: <img alt=\\\"MY IMAGE\\\" src=\\\"example.png\\\" />';\\n    marked(md, { renderer });\\n\\n    expect(renderer.html).toHaveBeenCalledWith('<img alt=\\\"MY IMAGE\\\" src=\\\"example.png\\\" />');\\n  });\\n});\\n\\ndescribe('parseInline', () => {\\n  it('should parse inline tokens', () => {\\n    const md = '**strong** _em_';\\n    const html = marked.parseInline(md);\\n\\n    expect(html).toBe('<strong>strong</strong> <em>em</em>');\\n  });\\n\\n  it('should not parse block tokens', () => {\\n    const md = '# header\\\\n\\\\n_em_';\\n    const html = marked.parseInline(md);\\n\\n    expect(html).toBe('# header\\\\n\\\\n<em>em</em>');\\n  });\\n});\\n\\ndescribe('use extension', () => {\\n  it('should use renderer', () => {\\n    const extension = {\\n      renderer: {\\n        paragraph(text) {\\n          return 'extension';\\n        }\\n      }\\n    };\\n    spyOn(extension.renderer, 'paragraph').and.callThrough();\\n    marked.use(extension);\\n    const html = marked('text');\\n    expect(extension.renderer.paragraph).toHaveBeenCalledWith('text');\\n    expect(html).toBe('extension');\\n  });\\n\\n  it('should use tokenizer', () => {\\n    const extension = {\\n      tokenizer: {\\n        paragraph(text) {\\n          return {\\n            type: 'paragraph',\\n            raw: text,\\n            text: 'extension'\\n          };\\n        }\\n      }\\n    };\\n    spyOn(extension.tokenizer, 'paragraph').and.callThrough();\\n    marked.use(extension);\\n    const html = marked('text');\\n    expect(extension.tokenizer.paragraph).toHaveBeenCalledWith('text');\\n    expect(html).toBe('<p>extension</p>\\\\n');\\n  });\\n\\n  it('should use walkTokens', () => {\\n    let walked = 0;\\n    const extension = {\\n      walkTokens(token) {\\n        walked++;\\n      }\\n    };\\n    marked.use(extension);\\n    marked('text');\\n    expect(walked).toBe(2);\\n  });\\n\\n  it('should use options from extension', () => {\\n    const extension = {\\n      headerIds: false\\n    };\\n    marked.use(extension);\\n    const html = marked('# heading');\\n    expect(html).toBe('<h1>heading</h1>\\\\n');\\n  });\\n\\n  it('should call all walkTokens in reverse order', () => {\\n    let walkedOnce = 0;\\n    let walkedTwice = 0;\\n    const extension1 = {\\n      walkTokens(token) {\\n        if (token.walkedOnce) {\\n          walkedTwice++;\\n        }\\n      }\\n    };\\n    const extension2 = {\\n      walkTokens(token) {\\n        walkedOnce++;\\n        token.walkedOnce = true;\\n      }\\n    };\\n    marked.use(extension1);\\n    marked.use(extension2);\\n    marked('text');\\n    expect(walkedOnce).toBe(2);\\n    expect(walkedTwice).toBe(2);\\n  });\\n\\n  it('should use last extension function and not override others', () => {\\n    const extension1 = {\\n      renderer: {\\n        paragraph(text) {\\n          return 'extension1 paragraph\\\\n';\\n        },\\n        html(html) {\\n          return 'extension1 html\\\\n';\\n        }\\n      }\\n    };\\n    const extension2 = {\\n      renderer: {\\n        paragraph(text) {\\n          return 'extension2 paragraph\\\\n';\\n        }\\n      }\\n    };\\n    marked.use(extension1);\\n    marked.use(extension2);\\n    const html = marked(`\\nparagraph\\n\\n<html />\\n\\n# heading\\n`);\\n    expect(html).toBe('extension2 paragraph\\\\nextension1 html\\\\n<h1 id=\\\"heading\\\">heading</h1>\\\\n');\\n  });\\n\\n  it('should use previous extension when returning false', () => {\\n    const extension1 = {\\n      renderer: {\\n        paragraph(text) {\\n          if (text !== 'original') {\\n            return 'extension1 paragraph\\\\n';\\n          }\\n          return false;\\n        }\\n      }\\n    };\\n    const extension2 = {\\n      renderer: {\\n        paragraph(text) {\\n          if (text !== 'extension1' && text !== 'original') {\\n            return 'extension2 paragraph\\\\n';\\n          }\\n          return false;\\n        }\\n      }\\n    };\\n    marked.use(extension1);\\n    marked.use(extension2);\\n    const html = marked(`\\nparagraph\\n\\nextension1\\n\\noriginal\\n`);\\n    expect(html).toBe('extension2 paragraph\\\\nextension1 paragraph\\\\n<p>original</p>\\\\n');\\n  });\\n\\n  it('should get options with this.options', () => {\\n    const extension = {\\n      renderer: {\\n        heading: () => {\\n          return this.options ? 'arrow options\\\\n' : 'arrow no options\\\\n';\\n        },\\n        html: function() {\\n          return this.options ? 'function options\\\\n' : 'function no options\\\\n';\\n        },\\n        paragraph() {\\n          return this.options ? 'shorthand options\\\\n' : 'shorthand no options\\\\n';\\n        }\\n      }\\n    };\\n    marked.use(extension);\\n    const html = marked(`\\n# heading\\n\\n<html />\\n\\nparagraph\\n`);\\n    expect(html).toBe('arrow no options\\\\nfunction options\\\\nshorthand options\\\\n');\\n  });\\n});\\n\\ndescribe('async highlight', () => {\\n  let highlight, markdown;\\n  beforeEach(() => {\\n    highlight = jasmine.createSpy('highlight', (text, lang, callback) => {\\n      setImmediate(() => {\\n        callback(null, `async ${text || ''}`);\\n      });\\n    });\\n    markdown = `\\n\\\\`\\\\`\\\\`lang1\\ntext 1\\n\\\\`\\\\`\\\\`\\n\\n> \\\\`\\\\`\\\\`lang2\\n> text 2\\n> \\\\`\\\\`\\\\`\\n\\n- \\\\`\\\\`\\\\`lang3\\n  text 3\\n  \\\\`\\\\`\\\\`\\n`;\\n  });\\n\\n  it('should highlight codeblocks async', (done) => {\\n    highlight.and.callThrough();\\n\\n    marked(markdown, { highlight }, (err, html) => {\\n      if (err) {\\n        fail(err);\\n      }\\n\\n      expect(html).toBe(`<pre><code class=\\\"language-lang1\\\">async text 1</code></pre>\\n<blockquote>\\n<pre><code class=\\\"language-lang2\\\">async text 2</code></pre>\\n</blockquote>\\n<ul>\\n<li><pre><code class=\\\"language-lang3\\\">async text 3</code></pre>\\n</li>\\n</ul>\\n`);\\n      done();\\n    });\\n  });\\n\\n  it('should call callback for each error in highlight', (done) => {\\n    highlight.and.callFake((text, lang, callback) => {\\n      callback(new Error('highlight error'));\\n    });\\n\\n    let numErrors = 0;\\n    marked(markdown, { highlight }, (err, html) => {\\n      expect(err).toBeTruthy();\\n      expect(html).toBeUndefined();\\n\\n      if (err) {\\n        numErrors++;\\n      }\\n\\n      if (numErrors === 3) {\\n        done();\\n      }\\n    });\\n  });\\n\\n  it('should highlight codeblocks when not async', (done) => {\\n    highlight.and.callFake((text, lang, callback) => {\\n      callback(null, `async ${text || ''}`);\\n    });\\n\\n    marked(markdown, { highlight }, (err, html) => {\\n      if (err) {\\n        fail(err);\\n      }\\n\\n      expect(html).toBe(`<pre><code class=\\\"language-lang1\\\">async text 1</code></pre>\\n<blockquote>\\n<pre><code class=\\\"language-lang2\\\">async text 2</code></pre>\\n</blockquote>\\n<ul>\\n<li><pre><code class=\\\"language-lang3\\\">async text 3</code></pre>\\n</li>\\n</ul>\\n`);\\n      done();\\n    });\\n  });\\n});\\n\\ndescribe('walkTokens', () => {\\n  it('should walk over every token', () => {\\n    const markdown = `\\nparagraph\\n\\n---\\n\\n# heading\\n\\n\\\\`\\\\`\\\\`\\ncode\\n\\\\`\\\\`\\\\`\\n\\n| a | b |\\n|---|---|\\n| 1 | 2 |\\n| 3 | 4 |\\n\\n> blockquote\\n\\n- list\\n\\n<div>html</div>\\n\\n[link](https://example.com)\\n\\n![image](https://example.com/image.jpg)\\n\\n**strong**\\n\\n*em*\\n\\n\\\\`codespan\\\\`\\n\\n~~del~~\\n\\nbr\\nbr\\n`;\\n    const tokens = marked.lexer(markdown, { ...marked.getDefaults(), breaks: true });\\n    const tokensSeen = [];\\n    marked.walkTokens(tokens, (token) => {\\n      tokensSeen.push([token.type, (token.raw || '').replace(/\\\\n/g, '')]);\\n    });\\n\\n    expect(tokensSeen).toEqual([\\n      ['paragraph', 'paragraph'],\\n      ['text', 'paragraph'],\\n      ['space', ''],\\n      ['hr', '---'],\\n      ['heading', '# heading'],\\n      ['text', 'heading'],\\n      ['code', '```code```'],\\n      ['table', '| a | b ||---|---|| 1 | 2 || 3 | 4 |'],\\n      ['text', 'a'],\\n      ['text', 'b'],\\n      ['text', '1'],\\n      ['text', '2'],\\n      ['text', '3'],\\n      ['text', '4'],\\n      ['blockquote', '> blockquote'],\\n      ['paragraph', 'blockquote'],\\n      ['text', 'blockquote'],\\n      ['list', '- list'],\\n      ['list_item', '- list'],\\n      ['text', 'list'],\\n      ['text', 'list'],\\n      ['space', ''],\\n      ['html', '<div>html</div>'],\\n      ['paragraph', '[link](https://example.com)'],\\n      ['link', '[link](https://example.com)'],\\n      ['text', 'link'],\\n      ['space', ''],\\n      ['paragraph', '![image](https://example.com/image.jpg)'],\\n      ['image', '![image](https://example.com/image.jpg)'],\\n      ['space', ''],\\n      ['paragraph', '**strong**'],\\n      ['strong', '**strong**'],\\n      ['text', 'strong'],\\n      ['space', ''],\\n      ['paragraph', '*em*'],\\n      ['em', '*em*'],\\n      ['text', 'em'],\\n      ['space', ''],\\n      ['paragraph', '`codespan`'],\\n      ['codespan', '`codespan`'],\\n      ['space', ''],\\n      ['paragraph', '~~del~~'],\\n      ['del', '~~del~~'],\\n      ['text', 'del'],\\n      ['space', ''],\\n      ['paragraph', 'brbr'],\\n      ['text', 'br'],\\n      ['br', ''],\\n      ['text', 'br']\\n    ]);\\n  });\\n});\\n\\n[end of marked-spec.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "broken.md",
        "marked.esm.js",
        "marked.js",
        "Parser-spec.js",
        "marked-spec.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "1ca57d6e-da29-413a-a7a4-f0afda2e4ef3",
        "score": 0.01639344262295082,
        "payload": {
          "text": "# Markdown is broken\n\nI have a lot of scraps of markdown engine oddities that I've collected over the\nyears. What you see below is slightly messy, but it's what I've managed to\ncobble together to illustrate the differences between markdown engines, and\nwhy, if there ever is a markdown specification, it has to be absolutely\nthorough. There are a lot more of these little differences I have documented\nelsewhere. I know I will find them lingering on my disk one day, but until\nthen, I'll continue to add whatever strange nonsensical things I find.\n\nSome of these examples may only mention a particular engine compared to marked.\nHowever, the examples with markdown.pl could easily be swapped out for\ndiscount, upskirt, or markdown.js, and you would very easily see even more\ninconsistencies.\n\nA lot of this was written when I was very unsatisfied with the inconsistencies\nbetween markdown engines. Please excuse the frustration noticeable in my\nwriting.\n\n## Examples of markdown's \"stupid\" list parsing\n\n```\n$ markdown.pl\n\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n\n<ul>\n<li>item2</li>\n</ul>\n\n<p><p>text</p></li>\n</ul></p>\n```\n\n\n```\n$ marked\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n<ul>\n<li>item2</li>\n</ul>\n<p>text</p>\n</li>\n</ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\n```\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\n```\n$ marked\n* hello\n  > world\n^D\n<ul>\n<li>hello<blockquote>\n<p>world</p>\n</blockquote>\n</li>\n</ul>\n```\n\nAgain, which looks correct to you?\n\n- - -\n\nEXAMPLE:\n\n```\n$ markdown.pl\n* hello\n  * world\n    * hi\n          code\n^D\n<ul>\n<li>hello\n<ul>\n<li>world</li>\n<li>hi\n  code</li>\n</ul></li>\n</ul>\n```\n\nThe code isn't a code block even though it's after the bullet margin. I know,\nlets give it two more spaces, effectively making it 8 spaces past the bullet.\n\n```\n$ markdown.pl\n* hello\n  * world\n    * hi\n            code\n^D\n<ul>\n<li>hello\n<ul>\n<li>world</li>\n<li>hi\n    code</li>\n</ul></li>\n</ul>\n```\n\nAnd, it's still not a code block. Did you also notice that the 3rd item isn't\neven its own list? Markdown screws that up too because of its indentation\nunaware parsing.\n\n- - -\n\nLet's look at some more examples of markdown's list parsing:\n\n```\n$ markdown.pl\n\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n\n<ul>\n<li>item2</li>\n</ul>\n\n<p><p>text</p></li>\n</ul></p>\n```\n\nMisnested tags.\n\n\n```\n$ marked\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n<ul>\n<li>item2</li>\n</ul>\n<p>text</p>\n</li>\n</ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\n```\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\nMore misnested tags.\n\n\n```\n$ marked\n* hello\n  > world\n^D\n<ul>\n<li>hello<blockquote>\n<p>world</p>\n</blockquote>\n</li>\n</ul>\n```\n\nAgain, which looks correct to you?\n\n- - -\n\n# Why quality matters - Part 2\n\n``` bash\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\n``` bash\n$ sundown # upskirt\n* hello\n  > world\n^D\n<ul>\n<li>hello\n&gt; world</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n  > world\n^D\n<ul><li>hello <blockquote><p>world</p></blockquote></li></ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/23\n\n``` bash\n$ markdown.pl # upskirt/markdown.js/discount\n* hello\n      var a = 1;\n* world\n^D\n<ul>\n<li>hello\nvar a = 1;</li>\n<li>world</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n      var a = 1;\n* world\n^D\n<ul><li>hello\n<pre>code>var a = 1;</code></pre></li>\n<li>world</li></ul>\n```\n\nWhich looks more reasonable? Why shouldn't code blocks be able to appear in\nlist items in a sane way?\n\n- - -\n\n``` bash\n$ markdown.js\n<div>hello</div>\n\n<span>hello</span>\n^D\n<p>&lt;div&gt;hello&lt;/div&gt;</p>\n\n<p>&lt;span&gt;hello&lt;/span&gt;</p>\n```\n\n``` bash\n$ marked\n<div>hello</div>\n\n<span>hello</span>\n^D\n<div>hello</div>\n\n\n<p><span>hello</span>\n</p>\n```\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/27\n\n``` bash\n$ markdown.js\n[![an image](/image)](/link)\n^D\n<p><a href=\"/image)](/link\">![an image</a></p>\n```\n\n``` bash\n$ marked\n[![an image](/image)](/link)\n^D\n<p><a href=\"/link\"><img src=\"/image\" alt=\"an image\"></a>\n</p>\n```\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/24\n\n``` bash\n$ markdown.js\n> a\n\n> b\n\n> c\n^D\n<blockquote><p>a</p><p>bundefined&gt; c</p></blockquote>\n```\n\n``` bash\n$ marked\n> a\n\n> b\n\n> c\n^D\n<blockquote><p>a\n\n</p></blockquote>\n<blockquote><p>b\n\n</p></blockquote>\n<blockquote><p>c\n</p></blockquote>\n```\n\n- - -\n\n``` bash\n$ markdown.pl\n* hello\n  * world\n    how\n\n    are\n    you\n\n  * today\n* hi\n^D\n<ul>\n<li><p>hello</p>\n\n<ul>\n<li>world\nhow</li>\n</ul>\n\n<p>are\nyou</p>\n\n<ul>\n<li>today</li>\n</ul></li>\n<li>hi</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n  * world\n    how\n\n    are\n    you\n\n  * today\n* hi\n^D\n<ul>\n<li><p>hello</p>\n<ul>\n<li><p>world\nhow</p>\n<p>are\nyou</p>\n</li>\n<li><p>today</p>\n</li>\n</ul>\n</li>\n<li>hi</li>\n</ul>\n```\n",
          "filepath": "data/repos/markedjs/marked-1.2/docs/broken.md",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "b189be74-4b8f-4690-b63a-c487e66c85d4",
        "score": 0.016129032258064516,
        "payload": {
          "text": "          };\n        }\n        continue;\n      }\n\n      // table (gfm)\n      if (token = this.tokenizer.table(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // lheading\n      if (token = this.tokenizer.lheading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // top-level paragraph\n      if (top && (token = this.tokenizer.paragraph(src))) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // text\n      if (token = this.tokenizer.text(src, tokens)) {\n        src = src.substring(token.raw.length);\n        if (token.type) {\n          tokens.push(token);\n        } else {\n          lastToken = tokens[tokens.length - 1];\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.text;\n        }\n        continue;\n      }\n\n      if (src) {\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n\n    return tokens;\n  }\n\n  inline(tokens) {\n    let i,\n      j,\n      k,\n      l2,\n      row,\n      token;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n      switch (token.type) {\n        case 'paragraph':\n        case 'text':\n        case 'heading': {\n          token.tokens = [];\n          this.inlineTokens(token.text, token.tokens);\n          break;\n        }\n        case 'table': {\n          token.tokens = {\n            header: [],\n            cells: []\n          };\n\n          // header\n          l2 = token.header.length;\n          for (j = 0; j < l2; j++) {\n            token.tokens.header[j] = [];\n            this.inlineTokens(token.header[j], token.tokens.header[j]);\n          }\n\n          // cells\n          l2 = token.cells.length;\n          for (j = 0; j < l2; j++) {\n            row = token.cells[j];\n            token.tokens.cells[j] = [];\n            for (k = 0; k < row.length; k++) {\n              token.tokens.cells[j][k] = [];\n              this.inlineTokens(row[k], token.tokens.cells[j][k]);\n            }\n          }\n\n          break;\n        }\n        case 'blockquote': {\n          this.inline(token.tokens);\n          break;\n        }\n        case 'list': {\n          l2 = token.items.length;\n          for (j = 0; j < l2; j++) {\n            this.inline(token.items[j].tokens);\n          }\n          break;\n        }\n      }\n    }\n\n    return tokens;\n  }\n\n  /**\n   * Lexing/Compiling\n   */\n  inlineTokens(src, tokens = [], inLink = false, inRawBlock = false, prevChar = '') {\n    let token;\n\n    // String with links masked to avoid interference with em and strong\n    let maskedSrc = src;\n    let match;\n\n    // Mask out reflinks\n    if (this.tokens.links) {\n      const links = Object.keys(this.tokens.links);\n      if (links.length > 0) {\n        while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n          if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n            maskedSrc = maskedSrc.slice(0, match.index) + '[' + 'a'.repeat(match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n          }\n        }\n      }\n    }\n    // Mask out other blocks\n    while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n      maskedSrc = maskedSrc.slice(0, match.index) + '[' + 'a'.repeat(match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n    }\n\n    while (src) {\n      // escape\n      if (token = this.tokenizer.escape(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // tag\n      if (token = this.tokenizer.tag(src, inLink, inRawBlock)) {\n        src = src.substring(token.raw.length);\n        inLink = token.inLink;\n        inRawBlock = token.inRawBlock;\n        tokens.push(token);\n        continue;\n      }\n\n      // link\n      if (token = this.tokenizer.link(src)) {\n        src = src.substring(token.raw.length);\n        if (token.type === 'link') {\n          token.tokens = this.inlineTokens(token.text, [], true, inRawBlock);\n        }\n        tokens.push(token);\n        continue;\n      }\n\n      // reflink, nolink\n      if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n        src = src.substring(token.raw.length);\n        if (token.type === 'link') {\n          token.tokens = this.inlineTokens(token.text, [], true, inRawBlock);\n        }\n        tokens.push(token);\n        continue;\n      }\n\n      // strong\n      if (token = this.tokenizer.strong(src, maskedSrc, prevChar)) {\n        src = src.substring(token.raw.length);\n        token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n        tokens.push(token);\n        continue;\n      }\n\n      // em\n      if (token = this.tokenizer.em(src, maskedSrc, prevChar)) {\n        src = src.substring(token.raw.length);\n        token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n        tokens.push(token);\n        continue;\n      }\n\n      // code\n      if (token = this.tokenizer.codespan(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // br\n      if (token = this.tokenizer.br(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // del (gfm)\n      if (token = this.tokenizer.del(src)) {\n        src = src.substring(token.raw.length);\n        token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n        tokens.push(token);\n        continue;\n      }\n\n      // autolink\n      if (token = this.tokenizer.autolink(src, mangle)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // url (gfm)\n      if (!inLink && (token = this.tokenizer.url(src, mangle))) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // text\n      if (token = this.tokenizer.inlineText(src, inRawBlock, smartypants)) {\n        src = src.substring(token.raw.length);\n        prevChar = token.raw.slice(-1);\n        tokens.push(token);\n        continue;\n      }\n\n      if (src) {\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n\n    return tokens;\n  }\n};\n\nconst { defaults: defaults$3 } = defaults;\nconst {\n  cleanUrl: cleanUrl$1,\n  escape: escape$2\n} = helpers;\n\n/**\n * Renderer\n */\nvar Renderer_1 = class Renderer {\n  constructor(options) {\n    this.options = options || defaults$3;\n  }\n\n  code(code, infostring, escaped) {\n    const lang = (infostring || '').match(/\\S*/)[0];\n    if (this.options.highlight) {\n      const out = this.options.highlight(code, lang);\n      if (out != null && out !== code) {\n        escaped = true;\n        code = out;\n      }\n    }\n\n    if (!lang) {\n      return '<pre><code>'\n        + (escaped ? code : escape$2(code, true))\n        + '</code></pre>\\n';\n    }\n\n    return '<pre><code class=\"'\n      + this.options.langPrefix\n      + escape$2(lang, true)\n      + '\">'\n      + (escaped ? code : escape$2(code, true))\n      + '</code></pre>\\n';\n  }\n\n  blockquote(quote) {\n    return '<blockquote>\\n' + quote + '</blockquote>\\n';\n  }\n\n  html(html) {\n    return html;\n  }\n\n  heading(text, level, raw, slugger) {\n    if (this.options.headerIds) {\n      return '<h'\n        + level\n        + ' id=\"'\n        + this.options.headerPrefix\n        + slugger.slug(raw)\n        + '\">'\n        + text\n        + '</h'\n        + level\n        + '>\\n';\n    }\n    // ignore IDs\n    return '<h' + level + '>' + text + '</h' + level + '>\\n';\n  }\n\n  hr() {\n    return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n  }\n\n  list(body, ordered, start) {\n    const type = ordered ? 'ol' : 'ul',\n      startatt = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n    return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n  }\n\n  listitem(text) {\n    return '<li>' + text + '</li>\\n';\n  }\n\n  checkbox(checked) {\n    return '<input '\n      + (checked ? 'checked=\"\" ' : '')\n      + 'disabled=\"\" type=\"checkbox\"'\n      + (this.options.xhtml ? ' /' : '')\n      + '> ';\n  }\n\n  paragraph(text) {\n    return '<p>' + text + '</p>\\n';\n  }\n\n  table(header, body) {\n    if (body) body = '<tbody>' + body + '</tbody>';\n\n    return '<table>\\n'\n      + '<thead>\\n'\n      + header\n      + '</thead>\\n'\n      + body\n      + '</table>\\n';\n  }\n\n  tablerow(content) {\n    return '<tr>\\n' + content + '</tr>\\n';\n  }\n\n  tablecell(content, flags) {\n    const type = flags.header ? 'th' : 'td';\n    const tag = flags.align\n      ? '<' + type + ' align=\"' + flags.align + '\">'\n      : '<' + type + '>';\n    return tag + content + '</' + type + '>\\n';\n  }\n\n  // span level renderer\n  strong(text) {\n    return '<strong>' + text + '</strong>';\n  }\n\n  em(text) {\n    return '<em>' + text + '</em>';\n  }\n\n  codespan(text) {\n    return '<code>' + text + '</code>';\n  }\n\n  br() {\n    return this.options.xhtml ? '<br/>' : '<br>';\n  }\n\n  del(text) {\n    return '<del>' + text + '</del>';\n  }\n\n  link(href, title, text) {\n    href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n    let out = '<a href=\"' + escape$2(href) + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += '>' + text + '</a>';\n    return out;\n  }\n\n  image(href, title, text) {\n    href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n\n    let out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += this.options.xhtml ? '/>' : '>';\n    return out;\n  }\n\n  text(text) {\n    return text;\n  }\n};\n\n/**\n * TextRenderer\n * returns only the textual part of the token\n */\nvar TextRenderer_1 = class TextRenderer {\n  // no need for block level renderers\n  strong(text) {\n    return text;\n  }\n\n  em(text) {\n    return text;\n  }\n\n  codespan(text) {\n    return text;\n  }\n\n  del(text) {\n    return text;\n  }\n\n  html(text) {\n    return text;\n  }\n\n  text(text) {\n    return text;\n  }\n\n  link(href, title, text) {\n    return '' + text;\n  }\n\n  image(href, title, text) {\n    return '' + text;\n  }\n\n  br() {\n    return '';\n  }\n};\n\n/**\n * Slugger generates header id\n */\nvar Slugger_1 = class Slugger {\n  constructor() {\n    this.seen = {};\n  }\n\n  serialize(value) {\n    return value\n      .toLowerCase()\n      .trim()\n      // remove html tags\n      .replace(/<[!\\/a-z].*?>/ig, '')\n      // remove unwanted chars\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '')\n      .replace(/\\s/g, '-');\n  }\n\n  /**\n   * Finds the next safe (unique) slug to use\n   */\n  getNextSafeSlug(originalSlug, isDryRun) {\n    let slug = originalSlug;\n    let occurenceAccumulator = 0;\n    if (this.seen.hasOwnProperty(slug)) {\n      occurenceAccumulator = this.seen[originalSlug];\n      do {\n        occurenceAccumulator++;\n        slug = originalSlug + '-' + occurenceAccumulator;\n      } while (this.seen.hasOwnProperty(slug));\n    }\n    if (!isDryRun) {\n      this.seen[originalSlug] = occurenceAccumulator;\n      this.seen[slug] = 0;\n    }\n    return slug;\n  }\n\n  /**\n   * Convert string to unique id\n   * @param {object} options\n   * @param {boolean} options.dryrun Generates the next unique slug without updating the internal accumulator.\n   */\n  slug(value, options = {}) {\n    const slug = this.serialize(value);\n    return this.getNextSafeSlug(slug, options.dryrun);\n  }\n};\n\nconst { defaults: defaults$4 } = defaults;\nconst {\n  unescape: unescape$1\n} = helpers;\n\n/**\n * Parsing & Compiling\n */\nvar Parser_1 = class Parser {\n  constructor(options) {\n    this.options = options || defaults$4;\n    this.options.renderer = this.options.renderer || new Renderer_1();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.textRenderer = new TextRenderer_1();\n    this.slugger = new Slugger_1();\n  }\n\n  /**\n   * Static Parse Method\n   */\n  static parse(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parse(tokens);\n  }\n\n  /**\n   * Static Parse Inline Method\n   */\n  static parseInline(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parseInline(tokens);\n  }\n\n  /**\n   * Parse Loop\n   */\n  parse(tokens, top = true) {\n    let out = '',\n      i,\n      j,\n      k,\n      l2,\n      l3,\n      row,\n      cell,\n      header,\n      body,\n      token,\n      ordered,\n      start,\n      loose,\n      itemBody,\n      item,\n      checked,\n      task,\n      checkbox;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n      switch (token.type) {\n        case 'space': {\n          continue;\n        }\n        case 'hr': {\n          out += this.renderer.hr();\n          continue;\n        }\n        case 'heading': {\n          out += this.renderer.heading(\n            this.parseInline(token.tokens),\n            token.depth,\n            unescape$1(this.parseInline(token.tokens, this.textRenderer)),\n            this.slugger);\n          continue;\n        }\n        case 'code': {\n          out += this.renderer.code(token.text,\n            token.lang,\n            token.escaped);\n          continue;\n        }\n        case 'table': {\n          header = '';\n\n          // header\n          cell = '';\n          l2 = token.header.length;\n          for (j = 0; j < l2; j++) {\n            cell += this.renderer.tablecell(\n              this.parseInline(token.tokens.header[j]),\n              { header: true, align: token.align[j] }\n            );\n          }\n          header += this.renderer.tablerow(cell);\n\n          body = '';\n          l2 = token.cells.length;\n          for (j = 0; j < l2; j++) {\n            row = token.tokens.cells[j];\n\n            cell = '';\n            l3 = row.length;\n            for (k = 0; k < l3; k++) {\n              cell += this.renderer.tablecell(\n                this.parseInline(row[k]),\n                { header: false, align: token.align[k] }\n              );\n            }\n\n            body += this.renderer.tablerow(cell);\n          }\n          out += this.renderer.table(header, body);\n          continue;\n        }\n        case 'blockquote': {\n          body = this.parse(token.tokens);\n          out += this.renderer.blockquote(body);\n          continue;\n        }\n        case 'list': {\n          ordered = token.ordered;\n          start = token.start;\n          loose = token.loose;\n          l2 = token.items.length;\n\n          body = '';\n          for (j = 0; j < l2; j++) {\n            item = token.items[j];\n            checked = item.checked;\n            task = item.task;\n\n            itemBody = '';\n            if (item.task) {\n              checkbox = this.renderer.checkbox(checked);\n              if (loose) {\n                if (item.tokens.length > 0 && item.tokens[0].type === 'text') {\n                  item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n                  if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                    item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                  }\n                } else {\n                  item.tokens.unshift({\n                    type: 'text',\n                    text: checkbox\n                  });\n                }\n              } else {\n                itemBody += checkbox;\n              }\n            }\n\n            itemBody += this.parse(item.tokens, loose);\n            body += this.renderer.listitem(itemBody, task, checked);\n          }\n\n          out += this.renderer.list(body, ordered, start);\n          continue;\n        }\n        case 'html': {\n          // TODO parse inline content if parameter markdown=1\n          out += this.renderer.html(token.text);\n          continue;\n        }\n        case 'paragraph': {\n          out += this.renderer.paragraph(this.parseInline(token.tokens));\n          continue;\n        }\n        case 'text': {\n          body = token.tokens ? this.parseInline(token.tokens) : token.text;\n          while (i + 1 < l && tokens[i + 1].type === 'text') {\n            token = tokens[++i];\n            body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n          }\n          out += top ? this.renderer.paragraph(body) : body;\n          continue;\n        }\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n\n    return out;\n  }\n\n  /**\n   * Parse Inline Tokens\n   */\n  parseInline(tokens, renderer) {\n    renderer = renderer || this.renderer;\n    let out = '',\n      i,\n      token;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n      switch (token.type) {\n        case 'escape': {\n          out += renderer.text(token.text);\n          break;\n        }\n        case 'html': {\n          out += renderer.html(token.text);\n          break;\n        }\n        case 'link': {\n          out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'image': {\n          out += renderer.image(token.href, token.title, token.text);\n          break;\n        }\n        case 'strong': {\n          out += renderer.strong(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'em': {\n          out += renderer.em(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'codespan': {\n          out += renderer.codespan(token.text);\n          break;\n        }\n        case 'br': {\n          out += renderer.br();\n          break;\n        }\n        case 'del': {\n          out += renderer.del(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'text': {\n          out += renderer.text(token.text);\n          break;\n        }\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n    return out;\n  }\n};\n\nconst {\n  merge: merge$2,\n  checkSanitizeDeprecation: checkSanitizeDeprecation$1,\n  escape: escape$3\n} = helpers;\nconst {\n  getDefaults,\n  changeDefaults,\n  defaults: defaults$5\n} = defaults;\n\n/**\n * Marked\n */\nfunction marked(src, opt, callback) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  if (typeof opt === 'function') {\n    callback = opt;\n    opt = null;\n  }\n\n  opt = merge$2({}, marked.defaults, opt || {});\n  checkSanitizeDeprecation$1(opt);\n\n  if (callback) {\n    const highlight = opt.highlight;\n    let tokens;\n\n    try {\n      tokens = Lexer_1.lex(src, opt);\n    } catch (e) {\n      return callback(e);\n    }\n\n    const done = function(err) {\n      let out;\n\n      if (!err) {\n        try {\n          out = Parser_1.parse(tokens, opt);\n        } catch (e) {\n          err = e;\n        }\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!tokens.length) return done();\n\n    let pending = 0;\n    marked.walkTokens(tokens, function(token) {\n      if (token.type === 'code') {\n        pending++;\n        setTimeout(() => {\n          highlight(token.text, token.lang, function(err, code) {\n            if (err) {\n              return done(err);\n            }\n            if (code != null && code !== token.text) {\n              token.text = code;\n              token.escaped = true;\n            }\n\n            pending--;\n            if (pending === 0) {\n              done();\n            }\n          });\n        }, 0);\n      }\n    });\n\n    if (pending === 0) {\n      done();\n    }\n\n    return;\n  }\n\n  try {\n    const tokens = Lexer_1.lex(src, opt);\n    if (opt.walkTokens) {\n      marked.walkTokens(tokens, opt.walkTokens);\n    }\n    return Parser_1.parse(tokens, opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if (opt.silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape$3(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge$2(marked.defaults, opt);\n  changeDefaults(marked.defaults);\n  return marked;\n};\n\nmarked.getDefaults = getDefaults;\n\nmarked.defaults = defaults$5;\n\n/**\n * Use Extension\n */\n\nmarked.use = function(extension) {\n  const opts = merge$2({}, extension);\n  if (extension.renderer) {\n    const renderer = marked.defaults.renderer || new Renderer_1();\n    for (const prop in extension.renderer) {\n      const prevRenderer = renderer[prop];\n      renderer[prop] = (...args) => {\n        let ret = extension.renderer[prop].apply(renderer, args);\n        if (ret === false) {\n          ret = prevRenderer.apply(renderer, args);\n        }\n        return ret;\n      };\n    }\n    opts.renderer = renderer;\n  }\n  if (extension.tokenizer) {\n    const tokenizer = marked.defaults.tokenizer || new Tokenizer_1();\n    for (const prop in extension.tokenizer) {\n      const prevTokenizer = tokenizer[prop];\n      tokenizer[prop] = (...args) => {\n        let ret = extension.tokenizer[prop].apply(tokenizer, args);\n        if (ret === false) {\n          ret = prevTokenizer.apply(tokenizer, args);\n        }\n        return ret;\n      };\n    }\n    opts.tokenizer = tokenizer;\n  }\n  if (extension.walkTokens) {\n    const walkTokens = marked.defaults.walkTokens;\n    opts.walkTokens = (token) => {\n      extension.walkTokens(token);\n      if (walkTokens) {\n        walkTokens(token);\n      }\n    };\n  }\n  marked.setOptions(opts);\n};\n\n/**\n * Run callback for every token\n */\n\nmarked.walkTokens = function(tokens, callback) {\n  for (const token of tokens) {\n    callback(token);\n    switch (token.type) {\n      case 'table': {\n        for (const cell of token.tokens.header) {\n          marked.walkTokens(cell, callback);\n        }\n        for (const row of token.tokens.cells) {\n          for (const cell of row) {\n            marked.walkTokens(cell, callback);\n          }\n        }\n        break;\n      }\n      case 'list': {\n        marked.walkTokens(token.items, callback);\n        break;\n      }\n      default: {\n        if (token.tokens) {\n          marked.walkTokens(token.tokens, callback);\n        }\n      }\n    }\n  }\n};\n\n/**\n * Parse Inline\n */\nmarked.parseInline = function(src, opt) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {",
          "filepath": "data/repos/markedjs/marked-1.2/lib/marked.esm.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 2
        }
      },
      {
        "id": "4f38f4cb-ff06-4e3f-bf3a-ff4633bfc70b",
        "score": 0.015873015873015872,
        "payload": {
          "text": "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.marked = factory());\n}(this, (function () { 'use strict';\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) {\n    var it;\n\n    if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n      if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n        if (it) o = it;\n        var i = 0;\n        return function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        };\n      }\n\n      throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n\n    it = o[Symbol.iterator]();\n    return it.next.bind(it);\n  }\n\n  function createCommonjsModule(fn, module) {\n  \treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n  }\n\n  var defaults = createCommonjsModule(function (module) {\n    function getDefaults() {\n      return {\n        baseUrl: null,\n        breaks: false,\n        gfm: true,\n        headerIds: true,\n        headerPrefix: '',\n        highlight: null,\n        langPrefix: 'language-',\n        mangle: true,\n        pedantic: false,\n        renderer: null,\n        sanitize: false,\n        sanitizer: null,\n        silent: false,\n        smartLists: false,\n        smartypants: false,\n        tokenizer: null,\n        walkTokens: null,\n        xhtml: false\n      };\n    }\n\n    function changeDefaults(newDefaults) {\n      module.exports.defaults = newDefaults;\n    }\n\n    module.exports = {\n      defaults: getDefaults(),\n      getDefaults: getDefaults,\n      changeDefaults: changeDefaults\n    };\n  });\n  var defaults_1 = defaults.defaults;\n  var defaults_2 = defaults.getDefaults;\n  var defaults_3 = defaults.changeDefaults;\n\n  /**\n   * Helpers\n   */\n  var escapeTest = /[&<>\"']/;\n  var escapeReplace = /[&<>\"']/g;\n  var escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\n  var escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n  var escapeReplacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\n    return escapeReplacements[ch];\n  };\n\n  function escape(html, encode) {\n    if (encode) {\n      if (escapeTest.test(html)) {\n        return html.replace(escapeReplace, getEscapeReplacement);\n      }\n    } else {\n      if (escapeTestNoEncode.test(html)) {\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n      }\n    }\n\n    return html;\n  }\n\n  var unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\n  function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(unescapeTest, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n\n      return '';\n    });\n  }\n\n  var caret = /(^|[^\\[])\\^/g;\n\n  function edit(regex, opt) {\n    regex = regex.source || regex;\n    opt = opt || '';\n    var obj = {\n      replace: function replace(name, val) {\n        val = val.source || val;\n        val = val.replace(caret, '$1');\n        regex = regex.replace(name, val);\n        return obj;\n      },\n      getRegex: function getRegex() {\n        return new RegExp(regex, opt);\n      }\n    };\n    return obj;\n  }\n\n  var nonWordAndColonTest = /[^\\w:]/g;\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n  function cleanUrl(sanitize, base, href) {\n    if (sanitize) {\n      var prot;\n\n      try {\n        prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, '').toLowerCase();\n      } catch (e) {\n        return null;\n      }\n\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return null;\n      }\n    }\n\n    if (base && !originIndependentUrl.test(href)) {\n      href = resolveUrl(base, href);\n    }\n\n    try {\n      href = encodeURI(href).replace(/%25/g, '%');\n    } catch (e) {\n      return null;\n    }\n\n    return href;\n  }\n\n  var baseUrls = {};\n  var justDomain = /^[^:]+:\\/*[^/]*$/;\n  var protocol = /^([^:]+:)[\\s\\S]*$/;\n  var domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\n  function resolveUrl(base, href) {\n    if (!baseUrls[' ' + base]) {\n      // we can ignore everything in base after the last slash of its path component,\n      // but we might need to add _that_\n      // https://tools.ietf.org/html/rfc3986#section-3\n      if (justDomain.test(base)) {\n        baseUrls[' ' + base] = base + '/';\n      } else {\n        baseUrls[' ' + base] = rtrim(base, '/', true);\n      }\n    }\n\n    base = baseUrls[' ' + base];\n    var relativeBase = base.indexOf(':') === -1;\n\n    if (href.substring(0, 2) === '//') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(protocol, '$1') + href;\n    } else if (href.charAt(0) === '/') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(domain, '$1') + href;\n    } else {\n      return base + href;\n    }\n  }\n\n  var noopTest = {\n    exec: function noopTest() {}\n  };\n\n  function merge(obj) {\n    var i = 1,\n        target,\n        key;\n\n    for (; i < arguments.length; i++) {\n      target = arguments[i];\n\n      for (key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n          obj[key] = target[key];\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  function splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n      var escaped = false,\n          curr = offset;\n\n      while (--curr >= 0 && str[curr] === '\\\\') {\n        escaped = !escaped;\n      }\n\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n        cells = row.split(/ \\|/);\n    var i = 0;\n\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) {\n        cells.push('');\n      }\n    }\n\n    for (; i < cells.length; i++) {\n      // leading or trailing whitespace is ignored per the gfm spec\n      cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n\n    return cells;\n  } // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n  // /c*$/ is vulnerable to REDOS.\n  // invert: Remove suffix of non-c chars instead. Default falsey.\n\n\n  function rtrim(str, c, invert) {\n    var l = str.length;\n\n    if (l === 0) {\n      return '';\n    } // Length of suffix matching the invert condition.\n\n\n    var suffLen = 0; // Step left until we fail to match the invert condition.\n\n    while (suffLen < l) {\n      var currChar = str.charAt(l - suffLen - 1);\n\n      if (currChar === c && !invert) {\n        suffLen++;\n      } else if (currChar !== c && invert) {\n        suffLen++;\n      } else {\n        break;\n      }\n    }\n\n    return str.substr(0, l - suffLen);\n  }\n\n  function findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n      return -1;\n    }\n\n    var l = str.length;\n    var level = 0,\n        i = 0;\n\n    for (; i < l; i++) {\n      if (str[i] === '\\\\') {\n        i++;\n      } else if (str[i] === b[0]) {\n        level++;\n      } else if (str[i] === b[1]) {\n        level--;\n\n        if (level < 0) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  function checkSanitizeDeprecation(opt) {\n    if (opt && opt.sanitize && !opt.silent) {\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n    }\n  }\n\n  var helpers = {\n    escape: escape,\n    unescape: unescape,\n    edit: edit,\n    cleanUrl: cleanUrl,\n    resolveUrl: resolveUrl,\n    noopTest: noopTest,\n    merge: merge,\n    splitCells: splitCells,\n    rtrim: rtrim,\n    findClosingBracket: findClosingBracket,\n    checkSanitizeDeprecation: checkSanitizeDeprecation\n  };\n\n  var defaults$1 = defaults.defaults;\n  var rtrim$1 = helpers.rtrim,\n      splitCells$1 = helpers.splitCells,\n      _escape = helpers.escape,\n      findClosingBracket$1 = helpers.findClosingBracket;\n\n  function outputLink(cap, link, raw) {\n    var href = link.href;\n    var title = link.title ? _escape(link.title) : null;\n    var text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n    if (cap[0].charAt(0) !== '!') {\n      return {\n        type: 'link',\n        raw: raw,\n        href: href,\n        title: title,\n        text: text\n      };\n    } else {\n      return {\n        type: 'image',\n        raw: raw,\n        href: href,\n        title: title,\n        text: _escape(text)\n      };\n    }\n  }\n\n  function indentCodeCompensation(raw, text) {\n    var matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n    if (matchIndentToCode === null) {\n      return text;\n    }\n\n    var indentToCode = matchIndentToCode[1];\n    return text.split('\\n').map(function (node) {\n      var matchIndentInNode = node.match(/^\\s+/);\n\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      var indentInNode = matchIndentInNode[0];\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    }).join('\\n');\n  }\n  /**\n   * Tokenizer\n   */\n\n\n  var Tokenizer_1 = /*#__PURE__*/function () {\n    function Tokenizer(options) {\n      this.options = options || defaults$1;\n    }\n\n    var _proto = Tokenizer.prototype;\n\n    _proto.space = function space(src) {\n      var cap = this.rules.block.newline.exec(src);\n\n      if (cap) {\n        if (cap[0].length > 1) {\n          return {\n            type: 'space',\n            raw: cap[0]\n          };\n        }\n\n        return {\n          raw: '\\n'\n        };\n      }\n    };\n\n    _proto.code = function code(src, tokens) {\n      var cap = this.rules.block.code.exec(src);\n\n      if (cap) {\n        var lastToken = tokens[tokens.length - 1]; // An indented code block cannot interrupt a paragraph.\n\n        if (lastToken && lastToken.type === 'paragraph') {\n          return {\n            raw: cap[0],\n            text: cap[0].trimRight()\n          };\n        }\n\n        var text = cap[0].replace(/^ {4}/gm, '');\n        return {\n          type: 'code',\n          raw: cap[0],\n          codeBlockStyle: 'indented',\n          text: !this.options.pedantic ? rtrim$1(text, '\\n') : text\n        };\n      }\n    };\n\n    _proto.fences = function fences(src) {\n      var cap = this.rules.block.fences.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var text = indentCodeCompensation(raw, cap[3] || '');\n        return {\n          type: 'code',\n          raw: raw,\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: text\n        };\n      }\n    };\n\n    _proto.heading = function heading(src) {\n      var cap = this.rules.block.heading.exec(src);\n\n      if (cap) {\n        return {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[1].length,\n          text: cap[2]\n        };\n      }\n    };\n\n    _proto.nptable = function nptable(src) {\n      var cap = this.rules.block.nptable.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : [],\n          raw: cap[0]\n        };\n\n        if (item.header.length === item.align.length) {\n          var l = item.align.length;\n          var i;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.cells.length;\n\n          for (i = 0; i < l; i++) {\n            item.cells[i] = splitCells$1(item.cells[i], item.header.length);\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.hr = function hr(src) {\n      var cap = this.rules.block.hr.exec(src);\n\n      if (cap) {\n        return {\n          type: 'hr',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.blockquote = function blockquote(src) {\n      var cap = this.rules.block.blockquote.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ *> ?/gm, '');\n        return {\n          type: 'blockquote',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    _proto.list = function list(src) {\n      var cap = this.rules.block.list.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var bull = cap[2];\n        var isordered = bull.length > 1;\n        var isparen = bull[bull.length - 1] === ')';\n        var list = {\n          type: 'list',\n          raw: raw,\n          ordered: isordered,\n          start: isordered ? +bull.slice(0, -1) : '',\n          loose: false,\n          items: []\n        }; // Get each top-level item.\n\n        var itemMatch = cap[0].match(this.rules.block.item);\n        var next = false,\n            item,\n            space,\n            b,\n            addBack,\n            loose,\n            istask,\n            ischecked;\n        var l = itemMatch.length;\n\n        for (var i = 0; i < l; i++) {\n          item = itemMatch[i];\n          raw = item; // Remove the list item's bullet\n          // so it is seen as the next token.\n\n          space = item.length;\n          item = item.replace(/^ *([*+-]|\\d+[.)]) */, ''); // Outdent whatever the\n          // list item contains. Hacky.\n\n          if (~item.indexOf('\\n ')) {\n            space -= item.length;\n            item = !this.options.pedantic ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '') : item.replace(/^ {1,4}/gm, '');\n          } // Determine whether the next list item belongs here.\n          // Backpedal if it does not belong in this list.\n\n\n          if (i !== l - 1) {\n            b = this.rules.block.bullet.exec(itemMatch[i + 1])[0];\n\n            if (isordered ? b.length === 1 || !isparen && b[b.length - 1] === ')' : b.length > 1 || this.options.smartLists && b !== bull) {\n              addBack = itemMatch.slice(i + 1).join('\\n');\n              list.raw = list.raw.substring(0, list.raw.length - addBack.length);\n              i = l - 1;\n            }\n          } // Determine whether item is loose or not.\n          // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n          // for discount behavior.\n\n\n          loose = next || /\\n\\n(?!\\s*$)/.test(item);\n\n          if (i !== l - 1) {\n            next = item.charAt(item.length - 1) === '\\n';\n            if (!loose) loose = next;\n          }\n\n          if (loose) {\n            list.loose = true;\n          } // Check for task list items\n\n\n          istask = /^\\[[ xX]\\] /.test(item);\n          ischecked = undefined;\n\n          if (istask) {\n            ischecked = item[1] !== ' ';\n            item = item.replace(/^\\[[ xX]\\] +/, '');\n          }\n\n          list.items.push({\n            type: 'list_item',\n            raw: raw,\n            task: istask,\n            checked: ischecked,\n            loose: loose,\n            text: item\n          });\n        }\n\n        return list;\n      }\n    };\n\n    _proto.html = function html(src) {\n      var cap = this.rules.block.html.exec(src);\n\n      if (cap) {\n        return {\n          type: this.options.sanitize ? 'paragraph' : 'html',\n          raw: cap[0],\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.def = function def(src) {\n      var cap = this.rules.block.def.exec(src);\n\n      if (cap) {\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        var tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n        return {\n          tag: tag,\n          raw: cap[0],\n          href: cap[2],\n          title: cap[3]\n        };\n      }\n    };\n\n    _proto.table = function table(src) {\n      var cap = this.rules.block.table.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          item.raw = cap[0];\n          var l = item.align.length;\n          var i;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.cells.length;\n\n          for (i = 0; i < l; i++) {\n            item.cells[i] = splitCells$1(item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''), item.header.length);\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.lheading = function lheading(src) {\n      var cap = this.rules.block.lheading.exec(src);\n\n      if (cap) {\n        return {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1]\n        };\n      }\n    };\n\n    _proto.paragraph = function paragraph(src) {\n      var cap = this.rules.block.paragraph.exec(src);\n\n      if (cap) {\n        return {\n          type: 'paragraph',\n          raw: cap[0],\n          text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1]\n        };\n      }\n    };\n\n    _proto.text = function text(src, tokens) {\n      var cap = this.rules.block.text.exec(src);\n\n      if (cap) {\n        var lastToken = tokens[tokens.length - 1];\n\n        if (lastToken && lastToken.type === 'text') {\n          return {\n            raw: cap[0],\n            text: cap[0]\n          };\n        }\n\n        return {\n          type: 'text',\n          raw: cap[0],\n          text: cap[0]\n        };\n      }\n    };\n\n    _proto.escape = function escape(src) {\n      var cap = this.rules.inline.escape.exec(src);\n\n      if (cap) {\n        return {\n          type: 'escape',\n          raw: cap[0],\n          text: _escape(cap[1])\n        };\n      }\n    };\n\n    _proto.tag = function tag(src, inLink, inRawBlock) {\n      var cap = this.rules.inline.tag.exec(src);\n\n      if (cap) {\n        if (!inLink && /^<a /i.test(cap[0])) {\n          inLink = true;\n        } else if (inLink && /^<\\/a>/i.test(cap[0])) {\n          inLink = false;\n        }\n\n        if (!inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          inRawBlock = true;\n        } else if (inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          inRawBlock = false;\n        }\n\n        return {\n          type: this.options.sanitize ? 'text' : 'html',\n          raw: cap[0],\n          inLink: inLink,\n          inRawBlock: inRawBlock,\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.link = function link(src) {\n      var cap = this.rules.inline.link.exec(src);\n\n      if (cap) {\n        var lastParenIndex = findClosingBracket$1(cap[2], '()');\n\n        if (lastParenIndex > -1) {\n          var start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          var linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n\n        var href = cap[2];\n        var title = '';\n\n        if (this.options.pedantic) {\n          var link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          } else {\n            title = '';\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n\n        href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n        var token = outputLink(cap, {\n          href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n          title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n        }, cap[0]);\n        return token;\n      }\n    };\n\n    _proto.reflink = function reflink(src, links) {\n      var cap;\n\n      if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {\n        var link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = links[link.toLowerCase()];\n\n        if (!link || !link.href) {",
          "filepath": "data/repos/markedjs/marked-1.2/lib/marked.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "cea68c61-ee77-45ee-867f-41b7559d1c26",
        "score": 0.015625,
        "payload": {
          "text": "const Parser = require('../../src/Parser.js');\n\nasync function expectHtml({ tokens, options, html, inline }) {\n  const parser = new Parser(options);\n  const actual = parser[inline ? 'parseInline' : 'parse'](tokens);\n  await expectAsync(actual).toEqualHtml(html);\n}\n\ndescribe('Parser', () => {\n  describe('block', () => {\n    it('space between paragraphs', async() => {\n      await expectHtml({\n        tokens: [\n          {\n            type: 'paragraph',\n            text: 'paragraph 1',\n            tokens: [\n              { type: 'text', text: 'paragraph 1' }\n            ]\n          },\n          { type: 'space' },\n          {\n            type: 'paragraph',\n            text: 'paragraph 2',\n            tokens: [\n              { type: 'text', text: 'paragraph 2' }\n            ]\n          }\n        ],\n        html: '<p>paragraph 1</p><p>paragraph 2</p>'\n      });\n    });\n\n    it('hr', async() => {\n      await expectHtml({\n        tokens: [{\n          type: 'hr'\n        }],\n        html: '<hr />'\n      });\n    });\n\n    it('heading', async() => {\n      await expectHtml({\n        tokens: [{\n          type: 'heading',\n          depth: 1,\n          text: 'heading',\n          tokens: [\n            { type: 'text', text: 'heading' }\n          ]\n        }],\n        html: '<h1 id=\"heading\">heading</h1>'\n      });\n    });\n\n    it('code', async() => {\n      await expectHtml({\n        tokens: [{\n          type: 'code',\n          text: 'code'\n        }],\n        html: '<pre><code>code</code></pre>'\n      });\n    });\n\n    it('table', async() => {\n      await expectHtml({\n        tokens: [{\n          type: 'table',\n          header: ['a', 'b'],\n          align: ['left', 'right'],\n          cells: [['1', '2']],\n          tokens: {\n            header: [\n              [{ type: 'text', text: 'a' }],\n              [{ type: 'text', text: 'b' }]\n            ],\n            cells: [\n              [\n                [{ type: 'text', text: '1' }],\n                [{ type: 'text', text: '2' }]\n              ]\n            ]\n          }\n        }],\n        html: `\n<table>\n  <thead>\n    <tr>\n      <th align=\"left\">a</th>\n      <th align=\"right\">b</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td align=\"left\">1</td>\n      <td align=\"right\">2</td>\n    </tr>\n  </tbody>\n</table>`\n      });\n    });\n\n    it('blockquote', async() => {\n      await expectHtml({\n        tokens: [\n          {\n            type: 'blockquote',\n            tokens: [{\n              type: 'paragraph',\n              text: 'blockquote',\n              tokens: [\n                { type: 'text', text: 'blockquote' }\n              ]\n            }]\n          }\n        ],\n        html: '<blockquote><p>blockquote</p></blockquote>'\n      });\n    });\n\n    describe('list', () => {\n      it('unordered', async() => {\n        await expectHtml({\n          tokens: [\n            {\n              type: 'list',\n              ordered: false,\n              start: '',\n              loose: false,\n              items: [\n                {\n                  task: false,\n                  checked: undefined,\n                  tokens: [{\n                    type: 'text',\n                    text: 'item 1',\n                    tokens: [{ type: 'text', text: 'item 1' }]\n                  }]\n                },\n                {\n                  task: false,\n                  checked: undefined,\n                  tokens: [{\n                    type: 'text',\n                    text: 'item 2',\n                    tokens: [{ type: 'text', text: 'item 2' }]\n                  }]\n                }\n              ]\n            }\n          ],\n          html: `\n<ul>\n  <li>item 1</li>\n  <li>item 2</li>\n</ul>`\n        });\n      });\n\n      it('ordered', async() => {\n        await expectHtml({\n          tokens: [\n            {\n              type: 'list',\n              ordered: true,\n              start: 2,\n              loose: false,\n              items: [\n                {\n                  task: false,\n                  checked: undefined,\n                  tokens: [{\n                    type: 'text',\n                    text: 'item 1',\n                    tokens: [{ type: 'text', text: 'item 1' }]\n                  }]\n                },\n                {\n                  task: false,\n                  checked: undefined,\n                  tokens: [{\n                    type: 'text',\n                    text: 'item 2',\n                    tokens: [{ type: 'text', text: 'item 2' }]\n                  }]\n                }\n              ]\n            }\n          ],\n          html: `\n<ol start='2'>\n  <li>item 1</li>\n  <li>item 2</li>\n</ol>`\n        });\n      });\n\n      it('tasks', async() => {\n        await expectHtml({\n          tokens: [\n            {\n              type: 'list',\n              ordered: false,\n              start: '',\n              loose: false,\n              items: [\n                {\n                  task: true,\n                  checked: false,\n                  tokens: [{\n                    type: 'text',\n                    text: 'item 1',\n                    tokens: [{ type: 'text', text: 'item 1' }]\n                  }]\n                },\n                {\n                  task: true,\n                  checked: true,\n                  tokens: [{\n                    type: 'text',\n                    text: 'item 2',\n                    tokens: [{ type: 'text', text: 'item 2' }]\n                  }]\n                }\n              ]\n            }\n          ],\n          html: `\n<ul>\n  <li><input disabled type=\"checkbox\"> item 1</li>\n  <li><input checked disabled type=\"checkbox\"> item 2</li>\n</ul>`\n        });\n      });\n\n      it('loose', async() => {\n        await expectHtml({\n          tokens: [\n            {\n              type: 'list',\n              ordered: false,\n              start: '',\n              loose: true,\n              items: [\n                {\n                  task: false,\n                  checked: undefined,\n                  tokens: [{\n                    type: 'text',\n                    text: 'item 1',\n                    tokens: [{ type: 'text', text: 'item 1' }]\n                  }]\n                },\n                {\n                  task: false,\n                  checked: undefined,\n                  tokens: [{\n                    type: 'text',\n                    text: 'item 2',\n                    tokens: [{ type: 'text', text: 'item 2' }]\n                  }]\n                }\n              ]\n            }\n          ],\n          html: `\n  <ul>\n    <li><p>item 1</p></li>\n    <li><p>item 2</p></li>\n  </ul>`\n        });\n      });\n    });\n\n    it('html', async() => {\n      await expectHtml({\n        tokens: [{\n          type: 'html',\n          text: '<div>html</div>'\n        }],\n        html: '<div>html</div>'\n      });\n    });\n\n    it('paragraph', async() => {\n      await expectHtml({\n        tokens: [{\n          type: 'paragraph',\n          text: 'paragraph 1',\n          tokens: [\n            { type: 'text', text: 'paragraph 1' }\n          ]\n        }],\n        html: '<p>paragraph 1</p>'\n      });\n    });\n\n    it('text', async() => {\n      await expectHtml({\n        tokens: [\n          { type: 'text', text: 'text 1' },\n          { type: 'text', text: 'text 2' }\n        ],\n        html: '<p>text 1\\ntext 2</p>'\n      });\n    });\n  });\n\n  describe('inline', () => {\n    it('escape', async() => {\n      await expectHtml({\n        inline: true,\n        tokens: [\n          { type: 'escape', text: '&gt;' }\n        ],\n        html: '&gt;'\n      });\n    });\n\n    it('html', async() => {\n      await expectHtml({\n        inline: true,\n        tokens: [\n          { type: 'html', text: '<div>' },\n          { type: 'text', text: 'html' },\n          { type: 'html', text: '</div>' }\n        ],\n        html: '<div>html</div>'\n      });\n    });\n\n    it('link', async() => {\n      await expectHtml({\n        inline: true,\n        tokens: [\n          {\n            type: 'link',\n            text: 'link',\n            href: 'https://example.com',\n            title: 'title',\n            tokens: [\n              { type: 'text', text: 'link' }\n            ]\n          }\n        ],\n        html: '<a href=\"https://example.com\" title=\"title\">link</a>'\n      });\n    });\n\n    it('image', async() => {\n      await expectHtml({\n        inline: true,\n        tokens: [\n          {\n            type: 'image',\n            text: 'image',\n            href: 'image.png',\n            title: 'title'\n          }\n        ],\n        html: '<img src=\"image.png\" alt=\"image\" title=\"title\">'\n      });\n    });\n\n    it('strong', async() => {\n      await expectHtml({\n        inline: true,\n        tokens: [\n          {\n            type: 'strong',\n            text: 'strong',\n            tokens: [\n              { type: 'text', text: 'strong' }\n            ]\n          }\n        ],\n        html: '<strong>strong</strong>'\n      });\n    });\n\n    it('em', async() => {\n      await expectHtml({\n        inline: true,\n        tokens: [\n          {\n            type: 'em',\n            text: 'em',\n            tokens: [\n              { type: 'text', text: 'em' }\n            ]\n          }\n        ],\n        html: '<em>em</em>'\n      });\n    });\n\n    it('codespan', async() => {\n      await expectHtml({\n        inline: true,\n        tokens: [\n          {\n            type: 'codespan',\n            text: 'code'\n          }\n        ],\n        html: '<code>code</code>'\n      });\n    });\n\n    it('br', async() => {\n      await expectHtml({\n        inline: true,\n        tokens: [{\n          type: 'br'\n        }],\n        html: '<br />'\n      });\n    });\n\n    it('del', async() => {\n      await expectHtml({\n        inline: true,\n        tokens: [\n          {\n            type: 'del',\n            text: 'del',\n            tokens: [\n              { type: 'text', text: 'del' }\n            ]\n          }\n        ],\n        html: '<del>del</del>'\n      });\n    });\n\n    it('text', async() => {\n      await expectHtml({\n        inline: true,\n        tokens: [\n          { type: 'text', text: 'text 1' },\n          { type: 'text', text: 'text 2' }\n        ],\n        html: 'text 1text 2'\n      });\n    });\n  });\n});\n",
          "filepath": "data/repos/markedjs/marked-1.2/test/unit/Parser-spec.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      },
      {
        "id": "464818fd-332f-47d7-a9a4-238a8fbb9910",
        "score": 0.015384615384615385,
        "payload": {
          "text": "const marked = require('../../src/marked.js');\n\ndescribe('Test heading ID functionality', () => {\n  it('should add id attribute by default', () => {\n    const renderer = new marked.Renderer();\n    const slugger = new marked.Slugger();\n    const header = renderer.heading('test', 1, 'test', slugger);\n    expect(header).toBe('<h1 id=\"test\">test</h1>\\n');\n  });\n\n  it('should NOT add id attribute when options set false', () => {\n    const renderer = new marked.Renderer({ headerIds: false });\n    const header = renderer.heading('test', 1, 'test');\n    expect(header).toBe('<h1>test</h1>\\n');\n  });\n});\n\ndescribe('Test slugger functionality', () => {\n  it('should use lowercase slug', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('Test')).toBe('test');\n  });\n\n  it('should be unique to avoid collisions 1280', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('test')).toBe('test');\n    expect(slugger.slug('test')).toBe('test-1');\n    expect(slugger.slug('test')).toBe('test-2');\n  });\n\n  it('should be unique when slug ends with number', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('test 1')).toBe('test-1');\n    expect(slugger.slug('test')).toBe('test');\n    expect(slugger.slug('test')).toBe('test-2');\n  });\n\n  it('should be unique when slug ends with hyphen number', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('foo')).toBe('foo');\n    expect(slugger.slug('foo')).toBe('foo-1');\n    expect(slugger.slug('foo 1')).toBe('foo-1-1');\n    expect(slugger.slug('foo-1')).toBe('foo-1-2');\n    expect(slugger.slug('foo')).toBe('foo-2');\n  });\n\n  it('should allow non-latin chars', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('\u043f\u0440\u0438\u0432\u0435\u0442')).toBe('\u043f\u0440\u0438\u0432\u0435\u0442');\n  });\n\n  it('should remove ampersands 857', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('This & That Section')).toBe('this--that-section');\n  });\n\n  it('should remove periods', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('file.txt')).toBe('filetxt');\n  });\n\n  it('should remove html tags', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('<em>html</em>')).toBe('html');\n  });\n\n  it('should not increment seen when using dryrun option', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('<h1>This Section</h1>', { dryrun: true })).toBe('this-section');\n    expect(slugger.slug('<h1>This Section</h1>')).toBe('this-section');\n  });\n\n  it('should still return the next unique id when using dryrun', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('<h1>This Section</h1>')).toBe('this-section');\n    expect(slugger.slug('<h1>This Section</h1>', { dryrun: true })).toBe('this-section-1');\n  });\n\n  it('should be repeatable in a sequence', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('foo')).toBe('foo');\n    expect(slugger.slug('foo')).toBe('foo-1');\n    expect(slugger.slug('foo')).toBe('foo-2');\n    expect(slugger.slug('foo', { dryrun: true })).toBe('foo-3');\n    expect(slugger.slug('foo', { dryrun: true })).toBe('foo-3');\n    expect(slugger.slug('foo')).toBe('foo-3');\n    expect(slugger.slug('foo')).toBe('foo-4');\n  });\n});\n\ndescribe('Test paragraph token type', () => {\n  it('should use the \"paragraph\" type on top level', () => {\n    const md = 'A Paragraph.\\n\\n> A blockquote\\n\\n- list item\\n';\n\n    const tokens = marked.lexer(md);\n\n    expect(tokens[0].type).toBe('paragraph');\n    expect(tokens[2].tokens[0].type).toBe('paragraph');\n    expect(tokens[3].items[0].tokens[0].type).toBe('text');\n  });\n});\n\ndescribe('changeDefaults', () => {\n  it('should change global defaults', () => {\n    const { defaults, changeDefaults } = require('../../src/defaults');\n    expect(defaults.test).toBeUndefined();\n    changeDefaults({ test: true });\n    expect(require('../../src/defaults').defaults.test).toBe(true);\n  });\n});\n\ndescribe('inlineLexer', () => {\n  it('should send html to renderer.html', () => {\n    const renderer = new marked.Renderer();\n    spyOn(renderer, 'html').and.callThrough();\n    const md = 'HTML Image: <img alt=\"MY IMAGE\" src=\"example.png\" />';\n    marked(md, { renderer });\n\n    expect(renderer.html).toHaveBeenCalledWith('<img alt=\"MY IMAGE\" src=\"example.png\" />');\n  });\n});\n\ndescribe('parseInline', () => {\n  it('should parse inline tokens', () => {\n    const md = '**strong** _em_';\n    const html = marked.parseInline(md);\n\n    expect(html).toBe('<strong>strong</strong> <em>em</em>');\n  });\n\n  it('should not parse block tokens', () => {\n    const md = '# header\\n\\n_em_';\n    const html = marked.parseInline(md);\n\n    expect(html).toBe('# header\\n\\n<em>em</em>');\n  });\n});\n\ndescribe('use extension', () => {\n  it('should use renderer', () => {\n    const extension = {\n      renderer: {\n        paragraph(text) {\n          return 'extension';\n        }\n      }\n    };\n    spyOn(extension.renderer, 'paragraph').and.callThrough();\n    marked.use(extension);\n    const html = marked('text');\n    expect(extension.renderer.paragraph).toHaveBeenCalledWith('text');\n    expect(html).toBe('extension');\n  });\n\n  it('should use tokenizer', () => {\n    const extension = {\n      tokenizer: {\n        paragraph(text) {\n          return {\n            type: 'paragraph',\n            raw: text,\n            text: 'extension'\n          };\n        }\n      }\n    };\n    spyOn(extension.tokenizer, 'paragraph').and.callThrough();\n    marked.use(extension);\n    const html = marked('text');\n    expect(extension.tokenizer.paragraph).toHaveBeenCalledWith('text');\n    expect(html).toBe('<p>extension</p>\\n');\n  });\n\n  it('should use walkTokens', () => {\n    let walked = 0;\n    const extension = {\n      walkTokens(token) {\n        walked++;\n      }\n    };\n    marked.use(extension);\n    marked('text');\n    expect(walked).toBe(2);\n  });\n\n  it('should use options from extension', () => {\n    const extension = {\n      headerIds: false\n    };\n    marked.use(extension);\n    const html = marked('# heading');\n    expect(html).toBe('<h1>heading</h1>\\n');\n  });\n\n  it('should call all walkTokens in reverse order', () => {\n    let walkedOnce = 0;\n    let walkedTwice = 0;\n    const extension1 = {\n      walkTokens(token) {\n        if (token.walkedOnce) {\n          walkedTwice++;\n        }\n      }\n    };\n    const extension2 = {\n      walkTokens(token) {\n        walkedOnce++;\n        token.walkedOnce = true;\n      }\n    };\n    marked.use(extension1);\n    marked.use(extension2);\n    marked('text');\n    expect(walkedOnce).toBe(2);\n    expect(walkedTwice).toBe(2);\n  });\n\n  it('should use last extension function and not override others', () => {\n    const extension1 = {\n      renderer: {\n        paragraph(text) {\n          return 'extension1 paragraph\\n';\n        },\n        html(html) {\n          return 'extension1 html\\n';\n        }\n      }\n    };\n    const extension2 = {\n      renderer: {\n        paragraph(text) {\n          return 'extension2 paragraph\\n';\n        }\n      }\n    };\n    marked.use(extension1);\n    marked.use(extension2);\n    const html = marked(`\nparagraph\n\n<html />\n\n# heading\n`);\n    expect(html).toBe('extension2 paragraph\\nextension1 html\\n<h1 id=\"heading\">heading</h1>\\n');\n  });\n\n  it('should use previous extension when returning false', () => {\n    const extension1 = {\n      renderer: {\n        paragraph(text) {\n          if (text !== 'original') {\n            return 'extension1 paragraph\\n';\n          }\n          return false;\n        }\n      }\n    };\n    const extension2 = {\n      renderer: {\n        paragraph(text) {\n          if (text !== 'extension1' && text !== 'original') {\n            return 'extension2 paragraph\\n';\n          }\n          return false;\n        }\n      }\n    };\n    marked.use(extension1);\n    marked.use(extension2);\n    const html = marked(`\nparagraph\n\nextension1\n\noriginal\n`);\n    expect(html).toBe('extension2 paragraph\\nextension1 paragraph\\n<p>original</p>\\n');\n  });\n\n  it('should get options with this.options', () => {\n    const extension = {\n      renderer: {\n        heading: () => {\n          return this.options ? 'arrow options\\n' : 'arrow no options\\n';\n        },\n        html: function() {\n          return this.options ? 'function options\\n' : 'function no options\\n';\n        },\n        paragraph() {\n          return this.options ? 'shorthand options\\n' : 'shorthand no options\\n';\n        }\n      }\n    };\n    marked.use(extension);\n    const html = marked(`\n# heading\n\n<html />\n\nparagraph\n`);\n    expect(html).toBe('arrow no options\\nfunction options\\nshorthand options\\n');\n  });\n});\n\ndescribe('async highlight', () => {\n  let highlight, markdown;\n  beforeEach(() => {\n    highlight = jasmine.createSpy('highlight', (text, lang, callback) => {\n      setImmediate(() => {\n        callback(null, `async ${text || ''}`);\n      });\n    });\n    markdown = `\n\\`\\`\\`lang1\ntext 1\n\\`\\`\\`\n\n> \\`\\`\\`lang2\n> text 2\n> \\`\\`\\`\n\n- \\`\\`\\`lang3\n  text 3\n  \\`\\`\\`\n`;\n  });\n\n  it('should highlight codeblocks async', (done) => {\n    highlight.and.callThrough();\n\n    marked(markdown, { highlight }, (err, html) => {\n      if (err) {\n        fail(err);\n      }\n\n      expect(html).toBe(`<pre><code class=\"language-lang1\">async text 1</code></pre>\n<blockquote>\n<pre><code class=\"language-lang2\">async text 2</code></pre>\n</blockquote>\n<ul>\n<li><pre><code class=\"language-lang3\">async text 3</code></pre>\n</li>\n</ul>\n`);\n      done();\n    });\n  });\n\n  it('should call callback for each error in highlight', (done) => {\n    highlight.and.callFake((text, lang, callback) => {\n      callback(new Error('highlight error'));\n    });\n\n    let numErrors = 0;\n    marked(markdown, { highlight }, (err, html) => {\n      expect(err).toBeTruthy();\n      expect(html).toBeUndefined();\n\n      if (err) {\n        numErrors++;\n      }\n\n      if (numErrors === 3) {\n        done();\n      }\n    });\n  });\n\n  it('should highlight codeblocks when not async', (done) => {\n    highlight.and.callFake((text, lang, callback) => {\n      callback(null, `async ${text || ''}`);\n    });\n\n    marked(markdown, { highlight }, (err, html) => {\n      if (err) {\n        fail(err);\n      }\n\n      expect(html).toBe(`<pre><code class=\"language-lang1\">async text 1</code></pre>\n<blockquote>\n<pre><code class=\"language-lang2\">async text 2</code></pre>\n</blockquote>\n<ul>\n<li><pre><code class=\"language-lang3\">async text 3</code></pre>\n</li>\n</ul>\n`);\n      done();\n    });\n  });\n});\n\ndescribe('walkTokens', () => {\n  it('should walk over every token', () => {\n    const markdown = `\nparagraph\n\n---\n\n# heading\n\n\\`\\`\\`\ncode\n\\`\\`\\`\n\n| a | b |\n|---|---|\n| 1 | 2 |\n| 3 | 4 |\n\n> blockquote\n\n- list\n\n<div>html</div>\n\n[link](https://example.com)\n\n![image](https://example.com/image.jpg)\n\n**strong**\n\n*em*\n\n\\`codespan\\`\n\n~~del~~\n\nbr\nbr\n`;\n    const tokens = marked.lexer(markdown, { ...marked.getDefaults(), breaks: true });\n    const tokensSeen = [];\n    marked.walkTokens(tokens, (token) => {\n      tokensSeen.push([token.type, (token.raw || '').replace(/\\n/g, '')]);\n    });\n\n    expect(tokensSeen).toEqual([\n      ['paragraph', 'paragraph'],\n      ['text', 'paragraph'],\n      ['space', ''],\n      ['hr', '---'],\n      ['heading', '# heading'],\n      ['text', 'heading'],\n      ['code', '```code```'],\n      ['table', '| a | b ||---|---|| 1 | 2 || 3 | 4 |'],\n      ['text', 'a'],\n      ['text', 'b'],\n      ['text', '1'],\n      ['text', '2'],\n      ['text', '3'],\n      ['text', '4'],\n      ['blockquote', '> blockquote'],\n      ['paragraph', 'blockquote'],\n      ['text', 'blockquote'],\n      ['list', '- list'],\n      ['list_item', '- list'],\n      ['text', 'list'],\n      ['text', 'list'],\n      ['space', ''],\n      ['html', '<div>html</div>'],\n      ['paragraph', '[link](https://example.com)'],\n      ['link', '[link](https://example.com)'],\n      ['text', 'link'],\n      ['space', ''],\n      ['paragraph', '![image](https://example.com/image.jpg)'],\n      ['image', '![image](https://example.com/image.jpg)'],\n      ['space', ''],\n      ['paragraph', '**strong**'],\n      ['strong', '**strong**'],\n      ['text', 'strong'],\n      ['space', ''],\n      ['paragraph', '*em*'],\n      ['em', '*em*'],\n      ['text', 'em'],\n      ['space', ''],\n      ['paragraph', '`codespan`'],\n      ['codespan', '`codespan`'],\n      ['space', ''],\n      ['paragraph', '~~del~~'],\n      ['del', '~~del~~'],\n      ['text', 'del'],\n      ['space', ''],\n      ['paragraph', 'brbr'],\n      ['text', 'br'],\n      ['br', ''],\n      ['text', 'br']\n    ]);\n  });\n});\n",
          "filepath": "data/repos/markedjs/marked-1.2/test/unit/marked-spec.js",
          "repo": "markedjs/marked",
          "version": "1.2",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1674",
    "model_patch": "diff --git a/marked.esm.js b/marked.esm.js\nindex 1234567..89abcde 100644\n--- a/marked.esm.js\n+++ b/marked.esm.js\n@@ -194,7 +194,7 @@ var Parser_1 = class Parser {\n             if (item.task) {\n               checkbox = this.renderer.checkbox(checked);\n               if (loose) {\n-                if (item.tokens[0].type === 'text') {\n+                if (item.tokens[0] && item.tokens[0].type === 'text') {\n                   item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n                   if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                     item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n@@ -202,7 +202,7 @@ var Parser_1 = class Parser {\n                     type: 'text',\n                     text: checkbox\n                   });\n-                }\n+                } \n               } else {\n                 itemBody += checkbox;\n               }",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 210.26,
      "issue_embedding_time_ms": 210.26,
      "retrieval_time_ms_jina": 0.93,
      "retrieval_time_ms": 0.93,
      "total_retrieval_time_ms": 211.19,
      "generation_time_ms": 3106.19,
      "total_io_time_ms": 3317.38,
      "input_total_token_limit": null,
      "issue_text_tokens": 504,
      "vlm_tokens": 0,
      "retrieved_tokens": 11843,
      "prompt_template_tokens": 510,
      "total_input_prompt_tokens": 12857,
      "output_generated_tokens": 260,
      "total_io_tokens": 13117,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nCrash when rendering an empty checkbox list item\\n### Describe the bug\\r\\nRendering an empty checkbox list item leads to a crash:\\r\\n> `Uncaught TypeError: Cannot read property 'type' of undefined`\\r\\n\\r\\n### To Reproduce\\r\\n\\r\\n[Click here to see the crash on Marked demo](https://marked.js.org/demo/?text=%20%20-%20%5B%20%5D%20checklist%20item%0A%0A%20%20-%20%5B%20%5D%20&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20false%2C%0A%20%22gfm%22%3A%20true%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=master)\\r\\n![image](https://user-images.githubusercontent.com/1694410/81624131-6de74400-93c3-11ea-8eb7-ac3a1145afc4.png)\\r\\n\\r\\n### Expected behavior\\r\\nNo crash and a correctly rendered checkbox.\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of marked.esm.js]\\n    this.options = options || defaults$3;\\n  }\\n\\n  code(code, infostring, escaped) {\\n    const lang = (infostring || '').match(/\\\\S*/)[0];\\n    if (this.options.highlight) {\\n      const out = this.options.highlight(code, lang);\\n      if (out != null && out !== code) {\\n        escaped = true;\\n        code = out;\\n      }\\n    }\\n\\n    if (!lang) {\\n      return '<pre><code>'\\n        + (escaped ? code : escape$2(code, true))\\n        + '</code></pre>';\\n    }\\n\\n    return '<pre><code class=\\\"'\\n      + this.options.langPrefix\\n      + escape$2(lang, true)\\n      + '\\\">'\\n      + (escaped ? code : escape$2(code, true))\\n      + '</code></pre>\\\\n';\\n  }\\n\\n  blockquote(quote) {\\n    return '<blockquote>\\\\n' + quote + '</blockquote>\\\\n';\\n  }\\n\\n  html(html) {\\n    return html;\\n  }\\n\\n  heading(text, level, raw, slugger) {\\n    if (this.options.headerIds) {\\n      return '<h'\\n        + level\\n        + ' id=\\\"'\\n        + this.options.headerPrefix\\n        + slugger.slug(raw)\\n        + '\\\">'\\n        + text\\n        + '</h'\\n        + level\\n        + '>\\\\n';\\n    }\\n    // ignore IDs\\n    return '<h' + level + '>' + text + '</h' + level + '>\\\\n';\\n  }\\n\\n  hr() {\\n    return this.options.xhtml ? '<hr/>\\\\n' : '<hr>\\\\n';\\n  }\\n\\n  list(body, ordered, start) {\\n    const type = ordered ? 'ol' : 'ul',\\n      startatt = (ordered && start !== 1) ? (' start=\\\"' + start + '\\\"') : '';\\n    return '<' + type + startatt + '>\\\\n' + body + '</' + type + '>\\\\n';\\n  }\\n\\n  listitem(text) {\\n    return '<li>' + text + '</li>\\\\n';\\n  }\\n\\n  checkbox(checked) {\\n    return '<input '\\n      + (checked ? 'checked=\\\"\\\" ' : '')\\n      + 'disabled=\\\"\\\" type=\\\"checkbox\\\"'\\n      + (this.options.xhtml ? ' /' : '')\\n      + '> ';\\n  }\\n\\n  paragraph(text) {\\n    return '<p>' + text + '</p>\\\\n';\\n  }\\n\\n  table(header, body) {\\n    if (body) body = '<tbody>' + body + '</tbody>';\\n\\n    return '<table>\\\\n'\\n      + '<thead>\\\\n'\\n      + header\\n      + '</thead>\\\\n'\\n      + body\\n      + '</table>\\\\n';\\n  }\\n\\n  tablerow(content) {\\n    return '<tr>\\\\n' + content + '</tr>\\\\n';\\n  }\\n\\n  tablecell(content, flags) {\\n    const type = flags.header ? 'th' : 'td';\\n    const tag = flags.align\\n      ? '<' + type + ' align=\\\"' + flags.align + '\\\">'\\n      : '<' + type + '>';\\n    return tag + content + '</' + type + '>\\\\n';\\n  }\\n\\n  // span level renderer\\n  strong(text) {\\n    return '<strong>' + text + '</strong>';\\n  }\\n\\n  em(text) {\\n    return '<em>' + text + '</em>';\\n  }\\n\\n  codespan(text) {\\n    return '<code>' + text + '</code>';\\n  }\\n\\n  br() {\\n    return this.options.xhtml ? '<br/>' : '<br>';\\n  }\\n\\n  del(text) {\\n    return '<del>' + text + '</del>';\\n  }\\n\\n  link(href, title, text) {\\n    href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\\n    if (href === null) {\\n      return text;\\n    }\\n    let out = '<a href=\\\"' + escape$2(href) + '\\\"';\\n    if (title) {\\n      out += ' title=\\\"' + title + '\\\"';\\n    }\\n    out += '>' + text + '</a>';\\n    return out;\\n  }\\n\\n  image(href, title, text) {\\n    href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\\n    if (href === null) {\\n      return text;\\n    }\\n\\n    let out = '<img src=\\\"' + href + '\\\" alt=\\\"' + text + '\\\"';\\n    if (title) {\\n      out += ' title=\\\"' + title + '\\\"';\\n    }\\n    out += this.options.xhtml ? '/>' : '>';\\n    return out;\\n  }\\n\\n  text(text) {\\n    return text;\\n  }\\n};\\n\\n/**\\n * TextRenderer\\n * returns only the textual part of the token\\n */\\nvar TextRenderer_1 = class TextRenderer {\\n  // no need for block level renderers\\n  strong(text) {\\n    return text;\\n  }\\n\\n  em(text) {\\n    return text;\\n  }\\n\\n  codespan(text) {\\n    return text;\\n  }\\n\\n  del(text) {\\n    return text;\\n  }\\n\\n  html(text) {\\n    return text;\\n  }\\n\\n  text(text) {\\n    return text;\\n  }\\n\\n  link(href, title, text) {\\n    return '' + text;\\n  }\\n\\n  image(href, title, text) {\\n    return '' + text;\\n  }\\n\\n  br() {\\n    return '';\\n  }\\n};\\n\\n/**\\n * Slugger generates header id\\n */\\nvar Slugger_1 = class Slugger {\\n  constructor() {\\n    this.seen = {};\\n  }\\n\\n  /**\\n   * Convert string to unique id\\n   */\\n  slug(value) {\\n    let slug = value\\n      .toLowerCase()\\n      .trim()\\n      // remove html tags\\n      .replace(/<[!\\\\/a-z].*?>/ig, '')\\n      // remove unwanted chars\\n      .replace(/[\\\\u2000-\\\\u206F\\\\u2E00-\\\\u2E7F\\\\\\\\'!\\\"#$%&()*+,./:;<=>?@[\\\\]^`{|}~]/g, '')\\n      .replace(/\\\\s/g, '-');\\n\\n    if (this.seen.hasOwnProperty(slug)) {\\n      const originalSlug = slug;\\n      do {\\n        this.seen[originalSlug]++;\\n        slug = originalSlug + '-' + this.seen[originalSlug];\\n      } while (this.seen.hasOwnProperty(slug));\\n    }\\n    this.seen[slug] = 0;\\n\\n    return slug;\\n  }\\n};\\n\\nconst { defaults: defaults$4 } = defaults;\\nconst {\\n  unescape: unescape$1\\n} = helpers;\\n\\n/**\\n * Parsing & Compiling\\n */\\nvar Parser_1 = class Parser {\\n  constructor(options) {\\n    this.options = options || defaults$4;\\n    this.options.renderer = this.options.renderer || new Renderer_1();\\n    this.renderer = this.options.renderer;\\n    this.renderer.options = this.options;\\n    this.textRenderer = new TextRenderer_1();\\n    this.slugger = new Slugger_1();\\n  }\\n\\n  /**\\n   * Static Parse Method\\n   */\\n  static parse(tokens, options) {\\n    const parser = new Parser(options);\\n    return parser.parse(tokens);\\n  }\\n\\n  /**\\n   * Parse Loop\\n   */\\n  parse(tokens, top = true) {\\n    let out = '',\\n      i,\\n      j,\\n      k,\\n      l2,\\n      l3,\\n      row,\\n      cell,\\n      header,\\n      body,\\n      token,\\n      ordered,\\n      start,\\n      loose,\\n      itemBody,\\n      item,\\n      checked,\\n      task,\\n      checkbox;\\n\\n    const l = tokens.length;\\n    for (i = 0; i < l; i++) {\\n      token = tokens[i];\\n      switch (token.type) {\\n        case 'space': {\\n          continue;\\n        }\\n        case 'hr': {\\n          out += this.renderer.hr();\\n          continue;\\n        }\\n        case 'heading': {\\n          out += this.renderer.heading(\\n            this.parseInline(token.tokens),\\n            token.depth,\\n            unescape$1(this.parseInline(token.tokens, this.textRenderer)),\\n            this.slugger);\\n          continue;\\n        }\\n        case 'code': {\\n          out += this.renderer.code(token.text,\\n            token.lang,\\n            token.escaped);\\n          continue;\\n        }\\n        case 'table': {\\n          header = '';\\n\\n          // header\\n          cell = '';\\n          l2 = token.header.length;\\n          for (j = 0; j < l2; j++) {\\n            cell += this.renderer.tablecell(\\n              this.parseInline(token.tokens.header[j]),\\n              { header: true, align: token.align[j] }\\n            );\\n          }\\n          header += this.renderer.tablerow(cell);\\n\\n          body = '';\\n          l2 = token.cells.length;\\n          for (j = 0; j < l2; j++) {\\n            row = token.tokens.cells[j];\\n\\n            cell = '';\\n            l3 = row.length;\\n            for (k = 0; k < l3; k++) {\\n              cell += this.renderer.tablecell(\\n                this.parseInline(row[k]),\\n                { header: false, align: token.align[k] }\\n              );\\n            }\\n\\n            body += this.renderer.tablerow(cell);\\n          }\\n          out += this.renderer.table(header, body);\\n          continue;\\n        }\\n        case 'blockquote': {\\n          body = this.parse(token.tokens);\\n          out += this.renderer.blockquote(body);\\n          continue;\\n        }\\n        case 'list': {\\n          ordered = token.ordered;\\n          start = token.start;\\n          loose = token.loose;\\n          l2 = token.items.length;\\n\\n          body = '';\\n          for (j = 0; j < l2; j++) {\\n            item = token.items[j];\\n            checked = item.checked;\\n            task = item.task;\\n\\n            itemBody = '';\\n            if (item.task) {\\n              checkbox = this.renderer.checkbox(checked);\\n              if (loose) {\\n                if (item.tokens[0].type === 'text') {\\n                  item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\\n                  if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\\n                    item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\\n                  }\\n                } else {\\n                  item.tokens.unshift({\\n                    type: 'text',\\n                    text: checkbox\\n                  });\\n                }\\n              } else {\\n                itemBody += checkbox;\\n              }\\n            }\\n\\n            itemBody += this.parse(item.tokens, loose);\\n            body += this.renderer.listitem(itemBody, task, checked);\\n          }\\n\\n          out += this.renderer.list(body, ordered, start);\\n          continue;\\n        }\\n        case 'html': {\\n          // TODO parse inline content if parameter markdown=1\\n          out += this.renderer.html(token.text);\\n          continue;\\n        }\\n        case 'paragraph': {\\n          out += this.renderer.paragraph(this.parseInline(token.tokens));\\n          continue;\\n        }\\n        case 'text': {\\n          body = token.tokens ? this.parseInline(token.tokens) : token.text;\\n          while (i + 1 < l && tokens[i + 1].type === 'text') {\\n            token = tokens[++i];\\n            body += '\\\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\\n          }\\n          out += top ? this.renderer.paragraph(body) : body;\\n          continue;\\n        }\\n        default: {\\n          const errMsg = 'Token with \\\"' + token.type + '\\\" type was not found.';\\n          if (this.options.silent) {\\n            console.error(errMsg);\\n            return;\\n          } else {\\n            throw new Error(errMsg);\\n          }\\n        }\\n      }\\n    }\\n\\n    return out;\\n  }\\n\\n  /**\\n   * Parse Inline Tokens\\n   */\\n  parseInline(tokens, renderer) {\\n    renderer = renderer || this.renderer;\\n    let out = '',\\n      i,\\n      token;\\n\\n    const l = tokens.length;\\n    for (i = 0; i < l; i++) {\\n      token = tokens[i];\\n      switch (token.type) {\\n        case 'escape': {\\n          out += renderer.text(token.text);\\n          break;\\n        }\\n        case 'html': {\\n          out += renderer.html(token.text);\\n          break;\\n        }\\n        case 'link': {\\n          out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\\n          break;\\n        }\\n        case 'image': {\\n          out += renderer.image(token.href, token.title, token.text);\\n          break;\\n        }\\n        case 'strong': {\\n          out += renderer.strong(this.parseInline(token.tokens, renderer));\\n          break;\\n        }\\n        case 'em': {\\n          out += renderer.em(this.parseInline(token.tokens, renderer));\\n          break;\\n        }\\n        case 'codespan': {\\n          out += renderer.codespan(token.text);\\n          break;\\n        }\\n        case 'br': {\\n          out += renderer.br();\\n          break;\\n        }\\n        case 'del': {\\n          out += renderer.del(this.parseInline(token.tokens, renderer));\\n          break;\\n        }\\n        case 'text': {\\n          out += renderer.text(token.text);\\n          break;\\n        }\\n        default: {\\n          const errMsg = 'Token with \\\"' + token.type + '\\\" type was not found.';\\n          if (this.options.silent) {\\n            console.error(errMsg);\\n            return;\\n          } else {\\n            throw new Error(errMsg);\\n          }\\n        }\\n      }\\n    }\\n    return out;\\n  }\\n};\\n\\nconst {\\n  merge: merge$2,\\n  checkSanitizeDeprecation: checkSanitizeDeprecation$1,\\n  escape: escape$3\\n} = helpers;\\nconst {\\n  getDefaults,\\n  changeDefaults,\\n  defaults: defaults$5\\n} = defaults;\\n\\n/**\\n * Marked\\n */\\nfunction marked(src, opt, callback) {\\n  // throw error in case of non string input\\n  if (typeof src === 'undefined' || src === null) {\\n    throw new Error('marked(): input parameter is undefined or null');\\n  }\\n  if (typeof src !== 'string') {\\n    throw new Error('marked(): input parameter is of type '\\n      + Object.prototype.toString.call(src) + ', string expected');\\n  }\\n\\n  if (callback || typeof opt === 'function') {\\n    if (!callback) {\\n      callback = opt;\\n      opt = null;\\n    }\\n\\n    opt = merge$2({}, marked.defaults, opt || {});\\n    checkSanitizeDeprecation$1(opt);\\n    const highlight = opt.highlight;\\n    let tokens,\\n      pending,\\n      i = 0;\\n\\n    try {\\n      tokens = Lexer_1.lex(src, opt);\\n    } catch (e) {\\n      return callback(e);\\n    }\\n\\n    pending = tokens.length;\\n\\n    const done = function(err) {\\n      if (err) {\\n        opt.highlight = highlight;\\n        return callback(err);\\n      }\\n\\n      let out;\\n\\n      try {\\n        out = Parser_1.parse(tokens, opt);\\n      } catch (e) {\\n        err = e;\\n      }\\n\\n      opt.highlight = highlight;\\n\\n      return err\\n        ? callback(err)\\n        : callback(null, out);\\n    };\\n\\n    if (!highlight || highlight.length < 3) {\\n      return done();\\n    }\\n\\n    delete opt.highlight;\\n\\n    if (!pending) return done();\\n\\n    for (; i < tokens.length; i++) {\\n      (function(token) {\\n        if (token.type !== 'code') {\\n          return --pending || done();\\n        }\\n        return highlight(token.text, token.lang, function(err, code) {\\n          if (err) return done(err);\\n          if (code == null || code === token.text) {\\n            return --pending || done();\\n          }\\n          token.text = code;\\n          token.escaped = true;\\n          --pending || done();\\n        });\\n      })(tokens[i]);\\n    }\\n\\n    return;\\n  }\\n  try {\\n    opt = merge$2({}, marked.defaults, opt || {});\\n    checkSanitizeDeprecation$1(opt);\\n    return Parser_1.parse(Lexer_1.lex(src, opt), opt);\\n  } catch (e) {\\n    e.message += '\\\\nPlease report this to https://github.com/markedjs/marked.';\\n    if ((opt || marked.defaults).silent) {\\n      return '<p>An error occurred:</p><pre>'\\n        + escape$3(e.message + '', true)\\n        + '</pre>';\\n    }\\n    throw e;\\n  }\\n}\\n\\n/**\\n * Options\\n */\\n\\nmarked.options =\\nmarked.setOptions = function(opt) {\\n  merge$2(marked.defaults, opt);\\n  changeDefaults(marked.defaults);\\n  return marked;\\n};\\n\\nmarked.getDefaults = getDefaults;\\n\\nmarked.defaults = defaults$5;\\n\\n/**\\n * Use Extension\\n */\\n\\nmarked.use = function(extension) {\\n  const opts = merge$2({}, extension);\\n  if (extension.renderer) {\\n    const renderer = marked.defaults.renderer || new Renderer_1();\\n    for (const prop in extension.renderer) {\\n      const prevRenderer = renderer[prop];\\n      renderer[prop] = (...args) => {\\n        let ret = extension.renderer[prop].apply(renderer, args);\\n        if (ret === false) {\\n          ret = prevRenderer.apply(renderer, args);\\n        }\\n        return ret;\\n      };\\n    }\\n    opts.renderer = renderer;\\n  }\\n  if (extension.tokenizer) {\\n    const tokenizer = marked.defaults.tokenizer || new Tokenizer_1();\\n    for (const prop in extension.tokenizer) {\\n      const prevTokenizer = tokenizer[prop];\\n      tokenizer[prop] = (...args) => {\\n        let ret = extension.tokenizer[prop].apply(tokenizer, args);\\n        if (ret === false) {\\n          ret = prevTokenizer.apply(tokenizer, args);\\n        }\\n        return ret;\\n      };\\n    }\\n    opts.tokenizer = tokenizer;\\n  }\\n  marked.setOptions(opts);\\n};\\n\\n/**\\n * Expose\\n */\\n\\nmarked.Parser = Parser_1;\\nmarked.parser = Parser_1.parse;\\n\\nmarked.Renderer = Renderer_1;\\nmarked.TextRenderer = TextRenderer_1;\\n\\nmarked.Lexer = Lexer_1;\\nmarked.lexer = Lexer_1.lex;\\n\\nmarked.Tokenizer = Tokenizer_1;\\n\\nmarked.Slugger = Slugger_1;\\n\\nmarked.parse = marked;\\n\\nvar marked_1 = marked;\\n\\nexport default marked_1;\\n[end of marked.esm.js]\\n[start of Parser.js]\\nconst Renderer = require('./Renderer.js');\\nconst TextRenderer = require('./TextRenderer.js');\\nconst Slugger = require('./Slugger.js');\\nconst { defaults } = require('./defaults.js');\\nconst {\\n  unescape\\n} = require('./helpers.js');\\n\\n/**\\n * Parsing & Compiling\\n */\\nmodule.exports = class Parser {\\n  constructor(options) {\\n    this.options = options || defaults;\\n    this.options.renderer = this.options.renderer || new Renderer();\\n    this.renderer = this.options.renderer;\\n    this.renderer.options = this.options;\\n    this.textRenderer = new TextRenderer();\\n    this.slugger = new Slugger();\\n  }\\n\\n  /**\\n   * Static Parse Method\\n   */\\n  static parse(tokens, options) {\\n    const parser = new Parser(options);\\n    return parser.parse(tokens);\\n  }\\n\\n  /**\\n   * Parse Loop\\n   */\\n  parse(tokens, top = true) {\\n    let out = '',\\n      i,\\n      j,\\n      k,\\n      l2,\\n      l3,\\n      row,\\n      cell,\\n      header,\\n      body,\\n      token,\\n      ordered,\\n      start,\\n      loose,\\n      itemBody,\\n      item,\\n      checked,\\n      task,\\n      checkbox;\\n\\n    const l = tokens.length;\\n    for (i = 0; i < l; i++) {\\n      token = tokens[i];\\n      switch (token.type) {\\n        case 'space': {\\n          continue;\\n        }\\n        case 'hr': {\\n          out += this.renderer.hr();\\n          continue;\\n        }\\n        case 'heading': {\\n          out += this.renderer.heading(\\n            this.parseInline(token.tokens),\\n            token.depth,\\n            unescape(this.parseInline(token.tokens, this.textRenderer)),\\n            this.slugger);\\n          continue;\\n        }\\n        case 'code': {\\n          out += this.renderer.code(token.text,\\n            token.lang,\\n            token.escaped);\\n          continue;\\n        }\\n        case 'table': {\\n          header = '';\\n\\n          // header\\n          cell = '';\\n          l2 = token.header.length;\\n          for (j = 0; j < l2; j++) {\\n            cell += this.renderer.tablecell(\\n              this.parseInline(token.tokens.header[j]),\\n              { header: true, align: token.align[j] }\\n            );\\n          }\\n          header += this.renderer.tablerow(cell);\\n\\n          body = '';\\n          l2 = token.cells.length;\\n          for (j = 0; j < l2; j++) {\\n            row = token.tokens.cells[j];\\n\\n            cell = '';\\n            l3 = row.length;\\n            for (k = 0; k < l3; k++) {\\n              cell += this.renderer.tablecell(\\n                this.parseInline(row[k]),\\n                { header: false, align: token.align[k] }\\n              );\\n            }\\n\\n            body += this.renderer.tablerow(cell);\\n          }\\n          out += this.renderer.table(header, body);\\n          continue;\\n        }\\n        case 'blockquote': {\\n          body = this.parse(token.tokens);\\n          out += this.renderer.blockquote(body);\\n          continue;\\n        }\\n        case 'list': {\\n          ordered = token.ordered;\\n          start = token.start;\\n          loose = token.loose;\\n          l2 = token.items.length;\\n\\n          body = '';\\n          for (j = 0; j < l2; j++) {\\n            item = token.items[j];\\n            checked = item.checked;\\n            task = item.task;\\n\\n            itemBody = '';\\n            if (item.task) {\\n              checkbox = this.renderer.checkbox(checked);\\n              if (loose) {\\n                if (item.tokens[0].type === 'text') {\\n                  item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\\n                  if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\\n                    item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\\n                  }\\n                } else {\\n                  item.tokens.unshift({\\n                    type: 'text',\\n                    text: checkbox\\n                  });\\n                }\\n              } else {\\n                itemBody += checkbox;\\n              }\\n            }\\n\\n            itemBody += this.parse(item.tokens, loose);\\n            body += this.renderer.listitem(itemBody, task, checked);\\n          }\\n\\n          out += this.renderer.list(body, ordered, start);\\n          continue;\\n        }\\n        case 'html': {\\n          // TODO parse inline content if parameter markdown=1\\n          out += this.renderer.html(token.text);\\n          continue;\\n        }\\n        case 'paragraph': {\\n          out += this.renderer.paragraph(this.parseInline(token.tokens));\\n          continue;\\n        }\\n        case 'text': {\\n          body = token.tokens ? this.parseInline(token.tokens) : token.text;\\n          while (i + 1 < l && tokens[i + 1].type === 'text') {\\n            token = tokens[++i];\\n            body += '\\\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\\n          }\\n          out += top ? this.renderer.paragraph(body) : body;\\n          continue;\\n        }\\n        default: {\\n          const errMsg = 'Token with \\\"' + token.type + '\\\" type was not found.';\\n          if (this.options.silent) {\\n            console.error(errMsg);\\n            return;\\n          } else {\\n            throw new Error(errMsg);\\n          }\\n        }\\n      }\\n    }\\n\\n    return out;\\n  }\\n\\n  /**\\n   * Parse Inline Tokens\\n   */\\n  parseInline(tokens, renderer) {\\n    renderer = renderer || this.renderer;\\n    let out = '',\\n      i,\\n      token;\\n\\n    const l = tokens.length;\\n    for (i = 0; i < l; i++) {\\n      token = tokens[i];\\n      switch (token.type) {\\n        case 'escape': {\\n          out += renderer.text(token.text);\\n          break;\\n        }\\n        case 'html': {\\n          out += renderer.html(token.text);\\n          break;\\n        }\\n        case 'link': {\\n          out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\\n          break;\\n        }\\n        case 'image': {\\n          out += renderer.image(token.href, token.title, token.text);\\n          break;\\n        }\\n        case 'strong': {\\n          out += renderer.strong(this.parseInline(token.tokens, renderer));\\n          break;\\n        }\\n        case 'em': {\\n          out += renderer.em(this.parseInline(token.tokens, renderer));\\n          break;\\n        }\\n        case 'codespan': {\\n          out += renderer.codespan(token.text);\\n          break;\\n        }\\n        case 'br': {\\n          out += renderer.br();\\n          break;\\n        }\\n        case 'del': {\\n          out += renderer.del(this.parseInline(token.tokens, renderer));\\n          break;\\n        }\\n        case 'text': {\\n          out += renderer.text(token.text);\\n          break;\\n        }\\n        default: {\\n          const errMsg = 'Token with \\\"' + token.type + '\\\" type was not found.';\\n          if (this.options.silent) {\\n            console.error(errMsg);\\n            return;\\n          } else {\\n            throw new Error(errMsg);\\n          }\\n        }\\n      }\\n    }\\n    return out;\\n  }\\n};\\n\\n[end of Parser.js]\\n[start of Bug_report.md]\\n---\\nname: Bug report\\nabout: Marked says it does this thing but does not\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior:\\n\\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\\n<!--\\n1. [Marked Demo](https://marked.js.org/demo/)\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\\n-->\\n\\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\\n<!--\\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\\n3. Actual output (or error) is...\\n-->\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n[end of Bug_report.md]\\n[start of marked.js]\\n          src = src.substring(token.raw.length);\\n          tokens.push(token);\\n          continue;\\n        } // br\\n\\n\\n        if (token = this.tokenizer.br(src)) {\\n          src = src.substring(token.raw.length);\\n          tokens.push(token);\\n          continue;\\n        } // del (gfm)\\n\\n\\n        if (token = this.tokenizer.del(src)) {\\n          src = src.substring(token.raw.length);\\n          token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\\n          tokens.push(token);\\n          continue;\\n        } // autolink\\n\\n\\n        if (token = this.tokenizer.autolink(src, mangle)) {\\n          src = src.substring(token.raw.length);\\n          tokens.push(token);\\n          continue;\\n        } // url (gfm)\\n\\n\\n        if (!inLink && (token = this.tokenizer.url(src, mangle))) {\\n          src = src.substring(token.raw.length);\\n          tokens.push(token);\\n          continue;\\n        } // text\\n\\n\\n        if (token = this.tokenizer.inlineText(src, inRawBlock, smartypants)) {\\n          src = src.substring(token.raw.length);\\n          tokens.push(token);\\n          continue;\\n        }\\n\\n        if (src) {\\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\\n\\n          if (this.options.silent) {\\n            console.error(errMsg);\\n            break;\\n          } else {\\n            throw new Error(errMsg);\\n          }\\n        }\\n      }\\n\\n      return tokens;\\n    };\\n\\n    _createClass(Lexer, null, [{\\n      key: \\\"rules\\\",\\n      get: function get() {\\n        return {\\n          block: block$1,\\n          inline: inline$1\\n        };\\n      }\\n    }]);\\n\\n    return Lexer;\\n  }();\\n\\n  var defaults$3 = defaults.defaults;\\n  var cleanUrl$1 = helpers.cleanUrl,\\n      escape$1 = helpers.escape;\\n  /**\\n   * Renderer\\n   */\\n\\n  var Renderer_1 = /*#__PURE__*/function () {\\n    function Renderer(options) {\\n      this.options = options || defaults$3;\\n    }\\n\\n    var _proto = Renderer.prototype;\\n\\n    _proto.code = function code(_code, infostring, escaped) {\\n      var lang = (infostring || '').match(/\\\\S*/)[0];\\n\\n      if (this.options.highlight) {\\n        var out = this.options.highlight(_code, lang);\\n\\n        if (out != null && out !== _code) {\\n          escaped = true;\\n          _code = out;\\n        }\\n      }\\n\\n      if (!lang) {\\n        return '<pre><code>' + (escaped ? _code : escape$1(_code, true)) + '</code></pre>';\\n      }\\n\\n      return '<pre><code class=\\\"' + this.options.langPrefix + escape$1(lang, true) + '\\\">' + (escaped ? _code : escape$1(_code, true)) + '</code></pre>\\\\n';\\n    };\\n\\n    _proto.blockquote = function blockquote(quote) {\\n      return '<blockquote>\\\\n' + quote + '</blockquote>\\\\n';\\n    };\\n\\n    _proto.html = function html(_html) {\\n      return _html;\\n    };\\n\\n    _proto.heading = function heading(text, level, raw, slugger) {\\n      if (this.options.headerIds) {\\n        return '<h' + level + ' id=\\\"' + this.options.headerPrefix + slugger.slug(raw) + '\\\">' + text + '</h' + level + '>\\\\n';\\n      } // ignore IDs\\n\\n\\n      return '<h' + level + '>' + text + '</h' + level + '>\\\\n';\\n    };\\n\\n    _proto.hr = function hr() {\\n      return this.options.xhtml ? '<hr/>\\\\n' : '<hr>\\\\n';\\n    };\\n\\n    _proto.list = function list(body, ordered, start) {\\n      var type = ordered ? 'ol' : 'ul',\\n          startatt = ordered && start !== 1 ? ' start=\\\"' + start + '\\\"' : '';\\n      return '<' + type + startatt + '>\\\\n' + body + '</' + type + '>\\\\n';\\n    };\\n\\n    _proto.listitem = function listitem(text) {\\n      return '<li>' + text + '</li>\\\\n';\\n    };\\n\\n    _proto.checkbox = function checkbox(checked) {\\n      return '<input ' + (checked ? 'checked=\\\"\\\" ' : '') + 'disabled=\\\"\\\" type=\\\"checkbox\\\"' + (this.options.xhtml ? ' /' : '') + '> ';\\n    };\\n\\n    _proto.paragraph = function paragraph(text) {\\n      return '<p>' + text + '</p>\\\\n';\\n    };\\n\\n    _proto.table = function table(header, body) {\\n      if (body) body = '<tbody>' + body + '</tbody>';\\n      return '<table>\\\\n' + '<thead>\\\\n' + header + '</thead>\\\\n' + body + '</table>\\\\n';\\n    };\\n\\n    _proto.tablerow = function tablerow(content) {\\n      return '<tr>\\\\n' + content + '</tr>\\\\n';\\n    };\\n\\n    _proto.tablecell = function tablecell(content, flags) {\\n      var type = flags.header ? 'th' : 'td';\\n      var tag = flags.align ? '<' + type + ' align=\\\"' + flags.align + '\\\">' : '<' + type + '>';\\n      return tag + content + '</' + type + '>\\\\n';\\n    } // span level renderer\\n    ;\\n\\n    _proto.strong = function strong(text) {\\n      return '<strong>' + text + '</strong>';\\n    };\\n\\n    _proto.em = function em(text) {\\n      return '<em>' + text + '</em>';\\n    };\\n\\n    _proto.codespan = function codespan(text) {\\n      return '<code>' + text + '</code>';\\n    };\\n\\n    _proto.br = function br() {\\n      return this.options.xhtml ? '<br/>' : '<br>';\\n    };\\n\\n    _proto.del = function del(text) {\\n      return '<del>' + text + '</del>';\\n    };\\n\\n    _proto.link = function link(href, title, text) {\\n      href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\\n\\n      if (href === null) {\\n        return text;\\n      }\\n\\n      var out = '<a href=\\\"' + escape$1(href) + '\\\"';\\n\\n      if (title) {\\n        out += ' title=\\\"' + title + '\\\"';\\n      }\\n\\n      out += '>' + text + '</a>';\\n      return out;\\n    };\\n\\n    _proto.image = function image(href, title, text) {\\n      href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\\n\\n      if (href === null) {\\n        return text;\\n      }\\n\\n      var out = '<img src=\\\"' + href + '\\\" alt=\\\"' + text + '\\\"';\\n\\n      if (title) {\\n        out += ' title=\\\"' + title + '\\\"';\\n      }\\n\\n      out += this.options.xhtml ? '/>' : '>';\\n      return out;\\n    };\\n\\n    _proto.text = function text(_text) {\\n      return _text;\\n    };\\n\\n    return Renderer;\\n  }();\\n\\n  /**\\n   * TextRenderer\\n   * returns only the textual part of the token\\n   */\\n  var TextRenderer_1 = /*#__PURE__*/function () {\\n    function TextRenderer() {}\\n\\n    var _proto = TextRenderer.prototype;\\n\\n    // no need for block level renderers\\n    _proto.strong = function strong(text) {\\n      return text;\\n    };\\n\\n    _proto.em = function em(text) {\\n      return text;\\n    };\\n\\n    _proto.codespan = function codespan(text) {\\n      return text;\\n    };\\n\\n    _proto.del = function del(text) {\\n      return text;\\n    };\\n\\n    _proto.html = function html(text) {\\n      return text;\\n    };\\n\\n    _proto.text = function text(_text) {\\n      return _text;\\n    };\\n\\n    _proto.link = function link(href, title, text) {\\n      return '' + text;\\n    };\\n\\n    _proto.image = function image(href, title, text) {\\n      return '' + text;\\n    };\\n\\n    _proto.br = function br() {\\n      return '';\\n    };\\n\\n    return TextRenderer;\\n  }();\\n\\n  /**\\n   * Slugger generates header id\\n   */\\n  var Slugger_1 = /*#__PURE__*/function () {\\n    function Slugger() {\\n      this.seen = {};\\n    }\\n    /**\\n     * Convert string to unique id\\n     */\\n\\n\\n    var _proto = Slugger.prototype;\\n\\n    _proto.slug = function slug(value) {\\n      var slug = value.toLowerCase().trim() // remove html tags\\n      .replace(/<[!\\\\/a-z].*?>/ig, '') // remove unwanted chars\\n      .replace(/[\\\\u2000-\\\\u206F\\\\u2E00-\\\\u2E7F\\\\\\\\'!\\\"#$%&()*+,./:;<=>?@[\\\\]^`{|}~]/g, '').replace(/\\\\s/g, '-');\\n\\n      if (this.seen.hasOwnProperty(slug)) {\\n        var originalSlug = slug;\\n\\n        do {\\n          this.seen[originalSlug]++;\\n          slug = originalSlug + '-' + this.seen[originalSlug];\\n        } while (this.seen.hasOwnProperty(slug));\\n      }\\n\\n      this.seen[slug] = 0;\\n      return slug;\\n    };\\n\\n    return Slugger;\\n  }();\\n\\n  var defaults$4 = defaults.defaults;\\n  var unescape$1 = helpers.unescape;\\n  /**\\n   * Parsing & Compiling\\n   */\\n\\n  var Parser_1 = /*#__PURE__*/function () {\\n    function Parser(options) {\\n      this.options = options || defaults$4;\\n      this.options.renderer = this.options.renderer || new Renderer_1();\\n      this.renderer = this.options.renderer;\\n      this.renderer.options = this.options;\\n      this.textRenderer = new TextRenderer_1();\\n      this.slugger = new Slugger_1();\\n    }\\n    /**\\n     * Static Parse Method\\n     */\\n\\n\\n    Parser.parse = function parse(tokens, options) {\\n      var parser = new Parser(options);\\n      return parser.parse(tokens);\\n    }\\n    /**\\n     * Parse Loop\\n     */\\n    ;\\n\\n    var _proto = Parser.prototype;\\n\\n    _proto.parse = function parse(tokens, top) {\\n      if (top === void 0) {\\n        top = true;\\n      }\\n\\n      var out = '',\\n          i,\\n          j,\\n          k,\\n          l2,\\n          l3,\\n          row,\\n          cell,\\n          header,\\n          body,\\n          token,\\n          ordered,\\n          start,\\n          loose,\\n          itemBody,\\n          item,\\n          checked,\\n          task,\\n          checkbox;\\n      var l = tokens.length;\\n\\n      for (i = 0; i < l; i++) {\\n        token = tokens[i];\\n\\n        switch (token.type) {\\n          case 'space':\\n            {\\n              continue;\\n            }\\n\\n          case 'hr':\\n            {\\n              out += this.renderer.hr();\\n              continue;\\n            }\\n\\n          case 'heading':\\n            {\\n              out += this.renderer.heading(this.parseInline(token.tokens), token.depth, unescape$1(this.parseInline(token.tokens, this.textRenderer)), this.slugger);\\n              continue;\\n            }\\n\\n          case 'code':\\n            {\\n              out += this.renderer.code(token.text, token.lang, token.escaped);\\n              continue;\\n            }\\n\\n          case 'table':\\n            {\\n              header = ''; // header\\n\\n              cell = '';\\n              l2 = token.header.length;\\n\\n              for (j = 0; j < l2; j++) {\\n                cell += this.renderer.tablecell(this.parseInline(token.tokens.header[j]), {\\n                  header: true,\\n                  align: token.align[j]\\n                });\\n              }\\n\\n              header += this.renderer.tablerow(cell);\\n              body = '';\\n              l2 = token.cells.length;\\n\\n              for (j = 0; j < l2; j++) {\\n                row = token.tokens.cells[j];\\n                cell = '';\\n                l3 = row.length;\\n\\n                for (k = 0; k < l3; k++) {\\n                  cell += this.renderer.tablecell(this.parseInline(row[k]), {\\n                    header: false,\\n                    align: token.align[k]\\n                  });\\n                }\\n\\n                body += this.renderer.tablerow(cell);\\n              }\\n\\n              out += this.renderer.table(header, body);\\n              continue;\\n            }\\n\\n          case 'blockquote':\\n            {\\n              body = this.parse(token.tokens);\\n              out += this.renderer.blockquote(body);\\n              continue;\\n            }\\n\\n          case 'list':\\n            {\\n              ordered = token.ordered;\\n              start = token.start;\\n              loose = token.loose;\\n              l2 = token.items.length;\\n              body = '';\\n\\n              for (j = 0; j < l2; j++) {\\n                item = token.items[j];\\n                checked = item.checked;\\n                task = item.task;\\n                itemBody = '';\\n\\n                if (item.task) {\\n                  checkbox = this.renderer.checkbox(checked);\\n\\n                  if (loose) {\\n                    if (item.tokens[0].type === 'text') {\\n                      item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\\n\\n                      if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\\n                        item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\\n                      }\\n                    } else {\\n                      item.tokens.unshift({\\n                        type: 'text',\\n                        text: checkbox\\n                      });\\n                    }\\n                  } else {\\n                    itemBody += checkbox;\\n                  }\\n                }\\n\\n                itemBody += this.parse(item.tokens, loose);\\n                body += this.renderer.listitem(itemBody, task, checked);\\n              }\\n\\n              out += this.renderer.list(body, ordered, start);\\n              continue;\\n            }\\n\\n          case 'html':\\n            {\\n              // TODO parse inline content if parameter markdown=1\\n              out += this.renderer.html(token.text);\\n              continue;\\n            }\\n\\n          case 'paragraph':\\n            {\\n              out += this.renderer.paragraph(this.parseInline(token.tokens));\\n              continue;\\n            }\\n\\n          case 'text':\\n            {\\n              body = token.tokens ? this.parseInline(token.tokens) : token.text;\\n\\n              while (i + 1 < l && tokens[i + 1].type === 'text') {\\n                token = tokens[++i];\\n                body += '\\\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\\n              }\\n\\n              out += top ? this.renderer.paragraph(body) : body;\\n              continue;\\n            }\\n\\n          default:\\n            {\\n              var errMsg = 'Token with \\\"' + token.type + '\\\" type was not found.';\\n\\n              if (this.options.silent) {\\n                console.error(errMsg);\\n                return;\\n              } else {\\n                throw new Error(errMsg);\\n              }\\n            }\\n        }\\n      }\\n\\n      return out;\\n    }\\n    /**\\n     * Parse Inline Tokens\\n     */\\n    ;\\n\\n    _proto.parseInline = function parseInline(tokens, renderer) {\\n      renderer = renderer || this.renderer;\\n      var out = '',\\n          i,\\n          token;\\n      var l = tokens.length;\\n\\n      for (i = 0; i < l; i++) {\\n        token = tokens[i];\\n\\n        switch (token.type) {\\n          case 'escape':\\n            {\\n              out += renderer.text(token.text);\\n              break;\\n            }\\n\\n          case 'html':\\n            {\\n              out += renderer.html(token.text);\\n              break;\\n            }\\n\\n          case 'link':\\n            {\\n              out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\\n              break;\\n            }\\n\\n          case 'image':\\n            {\\n              out += renderer.image(token.href, token.title, token.text);\\n              break;\\n            }\\n\\n          case 'strong':\\n            {\\n              out += renderer.strong(this.parseInline(token.tokens, renderer));\\n              break;\\n            }\\n\\n          case 'em':\\n            {\\n              out += renderer.em(this.parseInline(token.tokens, renderer));\\n              break;\\n            }\\n\\n          case 'codespan':\\n            {\\n              out += renderer.codespan(token.text);\\n              break;\\n            }\\n\\n          case 'br':\\n            {\\n              out += renderer.br();\\n              break;\\n            }\\n\\n          case 'del':\\n            {\\n              out += renderer.del(this.parseInline(token.tokens, renderer));\\n              break;\\n            }\\n\\n          case 'text':\\n            {\\n              out += renderer.text(token.text);\\n              break;\\n            }\\n\\n          default:\\n            {\\n              var errMsg = 'Token with \\\"' + token.type + '\\\" type was not found.';\\n\\n              if (this.options.silent) {\\n                console.error(errMsg);\\n                return;\\n              } else {\\n                throw new Error(errMsg);\\n              }\\n            }\\n        }\\n      }\\n\\n      return out;\\n    };\\n\\n    return Parser;\\n  }();\\n\\n  var merge$2 = helpers.merge,\\n      checkSanitizeDeprecation$1 = helpers.checkSanitizeDeprecation,\\n      escape$2 = helpers.escape;\\n  var getDefaults = defaults.getDefaults,\\n      changeDefaults = defaults.changeDefaults,\\n      defaults$5 = defaults.defaults;\\n  /**\\n   * Marked\\n   */\\n\\n  function marked(src, opt, callback) {\\n    // throw error in case of non string input\\n    if (typeof src === 'undefined' || src === null) {\\n      throw new Error('marked(): input parameter is undefined or null');\\n    }\\n\\n    if (typeof src !== 'string') {\\n      throw new Error('marked(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\\n    }\\n\\n    if (callback || typeof opt === 'function') {\\n      var _ret = function () {\\n        if (!callback) {\\n          callback = opt;\\n          opt = null;\\n        }\\n\\n        opt = merge$2({}, marked.defaults, opt || {});\\n        checkSanitizeDeprecation$1(opt);\\n        var highlight = opt.highlight;\\n        var tokens,\\n            pending,\\n            i = 0;\\n\\n        try {\\n          tokens = Lexer_1.lex(src, opt);\\n        } catch (e) {\\n          return {\\n            v: callback(e)\\n          };\\n        }\\n\\n        pending = tokens.length;\\n\\n        var done = function done(err) {\\n          if (err) {\\n            opt.highlight = highlight;\\n            return callback(err);\\n          }\\n\\n          var out;\\n\\n          try {\\n            out = Parser_1.parse(tokens, opt);\\n          } catch (e) {\\n            err = e;\\n          }\\n\\n          opt.highlight = highlight;\\n          return err ? callback(err) : callback(null, out);\\n        };\\n\\n        if (!highlight || highlight.length < 3) {\\n          return {\\n            v: done()\\n          };\\n        }\\n\\n        delete opt.highlight;\\n        if (!pending) return {\\n          v: done()\\n        };\\n\\n        for (; i < tokens.length; i++) {\\n          (function (token) {\\n            if (token.type !== 'code') {\\n              return --pending || done();\\n            }\\n\\n            return highlight(token.text, token.lang, function (err, code) {\\n              if (err) return done(err);\\n\\n              if (code == null || code === token.text) {\\n                return --pending || done();\\n              }\\n\\n              token.text = code;\\n              token.escaped = true;\\n              --pending || done();\\n            });\\n          })(tokens[i]);\\n        }\\n\\n        return {\\n          v: void 0\\n        };\\n      }();\\n\\n      if (typeof _ret === \\\"object\\\") return _ret.v;\\n    }\\n\\n    try {\\n      opt = merge$2({}, marked.defaults, opt || {});\\n      checkSanitizeDeprecation$1(opt);\\n      return Parser_1.parse(Lexer_1.lex(src, opt), opt);\\n    } catch (e) {\\n      e.message += '\\\\nPlease report this to https://github.com/markedjs/marked.';\\n\\n      if ((opt || marked.defaults).silent) {\\n        return '<p>An error occurred:</p><pre>' + escape$2(e.message + '', true) + '</pre>';\\n      }\\n\\n      throw e;\\n    }\\n  }\\n  /**\\n   * Options\\n   */\\n\\n\\n  marked.options = marked.setOptions = function (opt) {\\n    merge$2(marked.defaults, opt);\\n    changeDefaults(marked.defaults);\\n    return marked;\\n  };\\n\\n  marked.getDefaults = getDefaults;\\n  marked.defaults = defaults$5;\\n  /**\\n   * Use Extension\\n   */\\n\\n  marked.use = function (extension) {\\n    var opts = merge$2({}, extension);\\n\\n    if (extension.renderer) {\\n      (function () {\\n        var renderer = marked.defaults.renderer || new Renderer_1();\\n\\n        var _loop = function _loop(prop) {\\n          var prevRenderer = renderer[prop];\\n\\n          renderer[prop] = function () {\\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\\n              args[_key] = arguments[_key];\\n            }\\n\\n            var ret = extension.renderer[prop].apply(renderer, args);\\n\\n            if (ret === false) {\\n              ret = prevRenderer.apply(renderer, args);\\n            }\\n\\n            return ret;\\n          };\\n        };\\n\\n        for (var prop in extension.renderer) {\\n          _loop(prop);\\n        }\\n\\n        opts.renderer = renderer;\\n      })();\\n    }\\n\\n    if (extension.tokenizer) {\\n      (function () {\\n        var tokenizer = marked.defaults.tokenizer || new Tokenizer_1();\\n\\n        var _loop2 = function _loop2(prop) {\\n          var prevTokenizer = tokenizer[prop];\\n\\n          tokenizer[prop] = function () {\\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\\n              args[_key2] = arguments[_key2];\\n            }\\n\\n            var ret = extension.tokenizer[prop].apply(tokenizer, args);\\n\\n            if (ret === false) {\\n              ret = prevTokenizer.apply(tokenizer, args);\\n            }\\n\\n            return ret;\\n          };\\n        };\\n\\n        for (var prop in extension.tokenizer) {\\n          _loop2(prop);\\n        }\\n\\n        opts.tokenizer = tokenizer;\\n      })();\\n    }\\n\\n    marked.setOptions(opts);\\n  };\\n  /**\\n   * Expose\\n   */\\n\\n\\n  marked.Parser = Parser_1;\\n  marked.parser = Parser_1.parse;\\n  marked.Renderer = Renderer_1;\\n  marked.TextRenderer = TextRenderer_1;\\n  marked.Lexer = Lexer_1;\\n  marked.lexer = Lexer_1.lex;\\n  marked.Tokenizer = Tokenizer_1;\\n  marked.Slugger = Slugger_1;\\n  marked.parse = marked;\\n  var marked_1 = marked;\\n\\n  return marked_1;\\n\\n})));\\n[end of marked.js]\\n[start of broken.md]\\n# Markdown is broken\\n\\nI have a lot of scraps of markdown engine oddities that I've collected over the\\nyears. What you see below is slightly messy, but it's what I've managed to\\ncobble together to illustrate the differences between markdown engines, and\\nwhy, if there ever is a markdown specification, it has to be absolutely\\nthorough. There are a lot more of these little differences I have documented\\nelsewhere. I know I will find them lingering on my disk one day, but until\\nthen, I'll continue to add whatever strange nonsensical things I find.\\n\\nSome of these examples may only mention a particular engine compared to marked.\\nHowever, the examples with markdown.pl could easily be swapped out for\\ndiscount, upskirt, or markdown.js, and you would very easily see even more\\ninconsistencies.\\n\\nA lot of this was written when I was very unsatisfied with the inconsistencies\\nbetween markdown engines. Please excuse the frustration noticeable in my\\nwriting.\\n\\n## Examples of markdown's \\\"stupid\\\" list parsing\\n\\n```\\n$ markdown.pl\\n\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n\\n<ul>\\n<li>item2</li>\\n</ul>\\n\\n<p><p>text</p></li>\\n</ul></p>\\n```\\n\\n\\n```\\n$ marked\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n<ul>\\n<li>item2</li>\\n</ul>\\n<p>text</p>\\n</li>\\n</ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\n```\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\n```\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello<blockquote>\\n<p>world</p>\\n</blockquote>\\n</li>\\n</ul>\\n```\\n\\nAgain, which looks correct to you?\\n\\n- - -\\n\\nEXAMPLE:\\n\\n```\\n$ markdown.pl\\n* hello\\n  * world\\n    * hi\\n          code\\n^D\\n<ul>\\n<li>hello\\n<ul>\\n<li>world</li>\\n<li>hi\\n  code</li>\\n</ul></li>\\n</ul>\\n```\\n\\nThe code isn't a code block even though it's after the bullet margin. I know,\\nlets give it two more spaces, effectively making it 8 spaces past the bullet.\\n\\n```\\n$ markdown.pl\\n* hello\\n  * world\\n    * hi\\n            code\\n^D\\n<ul>\\n<li>hello\\n<ul>\\n<li>world</li>\\n<li>hi\\n    code</li>\\n</ul></li>\\n</ul>\\n```\\n\\nAnd, it's still not a code block. Did you also notice that the 3rd item isn't\\neven its own list? Markdown screws that up too because of its indentation\\nunaware parsing.\\n\\n- - -\\n\\nLet's look at some more examples of markdown's list parsing:\\n\\n```\\n$ markdown.pl\\n\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n\\n<ul>\\n<li>item2</li>\\n</ul>\\n\\n<p><p>text</p></li>\\n</ul></p>\\n```\\n\\nMisnested tags.\\n\\n\\n```\\n$ marked\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n<ul>\\n<li>item2</li>\\n</ul>\\n<p>text</p>\\n</li>\\n</ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\n```\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\nMore misnested tags.\\n\\n\\n```\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello<blockquote>\\n<p>world</p>\\n</blockquote>\\n</li>\\n</ul>\\n```\\n\\nAgain, which looks correct to you?\\n\\n- - -\\n\\n# Why quality matters - Part 2\\n\\n``` bash\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\n``` bash\\n$ sundown # upskirt\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello\\n&gt; world</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul><li>hello <blockquote><p>world</p></blockquote></li></ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/23\\n\\n``` bash\\n$ markdown.pl # upskirt/markdown.js/discount\\n* hello\\n      var a = 1;\\n* world\\n^D\\n<ul>\\n<li>hello\\nvar a = 1;</li>\\n<li>world</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n      var a = 1;\\n* world\\n^D\\n<ul><li>hello\\n<pre>code>var a = 1;</code></pre></li>\\n<li>world</li></ul>\\n```\\n\\nWhich looks more reasonable? Why shouldn't code blocks be able to appear in\\nlist items in a sane way?\\n\\n- - -\\n\\n``` bash\\n$ markdown.js\\n<div>hello</div>\\n\\n<span>hello</span>\\n^D\\n<p>&lt;div&gt;hello&lt;/div&gt;</p>\\n\\n<p>&lt;span&gt;hello&lt;/span&gt;</p>\\n```\\n\\n``` bash\\n$ marked\\n<div>hello</div>\\n\\n<span>hello</span>\\n^D\\n<div>hello</div>\\n\\n\\n<p><span>hello</span>\\n</p>\\n```\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/27\\n\\n``` bash\\n$ markdown.js\\n[![an image](/image)](/link)\\n^D\\n<p><a href=\\\"/image)](/link\\\">![an image</a></p>\\n```\\n\\n``` bash\\n$ marked\\n[![an image](/image)](/link)\\n^D\\n<p><a href=\\\"/link\\\"><img src=\\\"/image\\\" alt=\\\"an image\\\"></a>\\n</p>\\n```\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/24\\n\\n``` bash\\n$ markdown.js\\n> a\\n\\n> b\\n\\n> c\\n^D\\n<blockquote><p>a</p><p>bundefined&gt; c</p></blockquote>\\n```\\n\\n``` bash\\n$ marked\\n> a\\n\\n> b\\n\\n> c\\n^D\\n<blockquote><p>a\\n\\n</p></blockquote>\\n<blockquote><p>b\\n\\n</p></blockquote>\\n<blockquote><p>c\\n</p></blockquote>\\n```\\n\\n- - -\\n\\n``` bash\\n$ markdown.pl\\n* hello\\n  * world\\n    how\\n\\n    are\\n    you\\n\\n  * today\\n* hi\\n^D\\n<ul>\\n<li><p>hello</p>\\n\\n<ul>\\n<li>world\\nhow</li>\\n</ul>\\n\\n<p>are\\nyou</p>\\n\\n<ul>\\n<li>today</li>\\n</ul></li>\\n<li>hi</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n  * world\\n    how\\n\\n    are\\n    you\\n\\n  * today\\n* hi\\n^D\\n<ul>\\n<li><p>hello</p>\\n<ul>\\n<li><p>world\\nhow</p>\\n<p>are\\nyou</p>\\n</li>\\n<li><p>today</p>\\n</li>\\n</ul>\\n</li>\\n<li>hi</li>\\n</ul>\\n```\\n\\n[end of broken.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "marked.esm.js",
        "Parser.js",
        "Bug_report.md",
        "marked.js",
        "broken.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "d242e6e0-84d7-480a-b8e5-2b526d69ffb9",
        "score": 0.01639344262295082,
        "payload": {
          "text": "    this.options = options || defaults$3;\n  }\n\n  code(code, infostring, escaped) {\n    const lang = (infostring || '').match(/\\S*/)[0];\n    if (this.options.highlight) {\n      const out = this.options.highlight(code, lang);\n      if (out != null && out !== code) {\n        escaped = true;\n        code = out;\n      }\n    }\n\n    if (!lang) {\n      return '<pre><code>'\n        + (escaped ? code : escape$2(code, true))\n        + '</code></pre>';\n    }\n\n    return '<pre><code class=\"'\n      + this.options.langPrefix\n      + escape$2(lang, true)\n      + '\">'\n      + (escaped ? code : escape$2(code, true))\n      + '</code></pre>\\n';\n  }\n\n  blockquote(quote) {\n    return '<blockquote>\\n' + quote + '</blockquote>\\n';\n  }\n\n  html(html) {\n    return html;\n  }\n\n  heading(text, level, raw, slugger) {\n    if (this.options.headerIds) {\n      return '<h'\n        + level\n        + ' id=\"'\n        + this.options.headerPrefix\n        + slugger.slug(raw)\n        + '\">'\n        + text\n        + '</h'\n        + level\n        + '>\\n';\n    }\n    // ignore IDs\n    return '<h' + level + '>' + text + '</h' + level + '>\\n';\n  }\n\n  hr() {\n    return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n  }\n\n  list(body, ordered, start) {\n    const type = ordered ? 'ol' : 'ul',\n      startatt = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n    return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n  }\n\n  listitem(text) {\n    return '<li>' + text + '</li>\\n';\n  }\n\n  checkbox(checked) {\n    return '<input '\n      + (checked ? 'checked=\"\" ' : '')\n      + 'disabled=\"\" type=\"checkbox\"'\n      + (this.options.xhtml ? ' /' : '')\n      + '> ';\n  }\n\n  paragraph(text) {\n    return '<p>' + text + '</p>\\n';\n  }\n\n  table(header, body) {\n    if (body) body = '<tbody>' + body + '</tbody>';\n\n    return '<table>\\n'\n      + '<thead>\\n'\n      + header\n      + '</thead>\\n'\n      + body\n      + '</table>\\n';\n  }\n\n  tablerow(content) {\n    return '<tr>\\n' + content + '</tr>\\n';\n  }\n\n  tablecell(content, flags) {\n    const type = flags.header ? 'th' : 'td';\n    const tag = flags.align\n      ? '<' + type + ' align=\"' + flags.align + '\">'\n      : '<' + type + '>';\n    return tag + content + '</' + type + '>\\n';\n  }\n\n  // span level renderer\n  strong(text) {\n    return '<strong>' + text + '</strong>';\n  }\n\n  em(text) {\n    return '<em>' + text + '</em>';\n  }\n\n  codespan(text) {\n    return '<code>' + text + '</code>';\n  }\n\n  br() {\n    return this.options.xhtml ? '<br/>' : '<br>';\n  }\n\n  del(text) {\n    return '<del>' + text + '</del>';\n  }\n\n  link(href, title, text) {\n    href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n    let out = '<a href=\"' + escape$2(href) + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += '>' + text + '</a>';\n    return out;\n  }\n\n  image(href, title, text) {\n    href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n\n    let out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += this.options.xhtml ? '/>' : '>';\n    return out;\n  }\n\n  text(text) {\n    return text;\n  }\n};\n\n/**\n * TextRenderer\n * returns only the textual part of the token\n */\nvar TextRenderer_1 = class TextRenderer {\n  // no need for block level renderers\n  strong(text) {\n    return text;\n  }\n\n  em(text) {\n    return text;\n  }\n\n  codespan(text) {\n    return text;\n  }\n\n  del(text) {\n    return text;\n  }\n\n  html(text) {\n    return text;\n  }\n\n  text(text) {\n    return text;\n  }\n\n  link(href, title, text) {\n    return '' + text;\n  }\n\n  image(href, title, text) {\n    return '' + text;\n  }\n\n  br() {\n    return '';\n  }\n};\n\n/**\n * Slugger generates header id\n */\nvar Slugger_1 = class Slugger {\n  constructor() {\n    this.seen = {};\n  }\n\n  /**\n   * Convert string to unique id\n   */\n  slug(value) {\n    let slug = value\n      .toLowerCase()\n      .trim()\n      // remove html tags\n      .replace(/<[!\\/a-z].*?>/ig, '')\n      // remove unwanted chars\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '')\n      .replace(/\\s/g, '-');\n\n    if (this.seen.hasOwnProperty(slug)) {\n      const originalSlug = slug;\n      do {\n        this.seen[originalSlug]++;\n        slug = originalSlug + '-' + this.seen[originalSlug];\n      } while (this.seen.hasOwnProperty(slug));\n    }\n    this.seen[slug] = 0;\n\n    return slug;\n  }\n};\n\nconst { defaults: defaults$4 } = defaults;\nconst {\n  unescape: unescape$1\n} = helpers;\n\n/**\n * Parsing & Compiling\n */\nvar Parser_1 = class Parser {\n  constructor(options) {\n    this.options = options || defaults$4;\n    this.options.renderer = this.options.renderer || new Renderer_1();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.textRenderer = new TextRenderer_1();\n    this.slugger = new Slugger_1();\n  }\n\n  /**\n   * Static Parse Method\n   */\n  static parse(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parse(tokens);\n  }\n\n  /**\n   * Parse Loop\n   */\n  parse(tokens, top = true) {\n    let out = '',\n      i,\n      j,\n      k,\n      l2,\n      l3,\n      row,\n      cell,\n      header,\n      body,\n      token,\n      ordered,\n      start,\n      loose,\n      itemBody,\n      item,\n      checked,\n      task,\n      checkbox;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n      switch (token.type) {\n        case 'space': {\n          continue;\n        }\n        case 'hr': {\n          out += this.renderer.hr();\n          continue;\n        }\n        case 'heading': {\n          out += this.renderer.heading(\n            this.parseInline(token.tokens),\n            token.depth,\n            unescape$1(this.parseInline(token.tokens, this.textRenderer)),\n            this.slugger);\n          continue;\n        }\n        case 'code': {\n          out += this.renderer.code(token.text,\n            token.lang,\n            token.escaped);\n          continue;\n        }\n        case 'table': {\n          header = '';\n\n          // header\n          cell = '';\n          l2 = token.header.length;\n          for (j = 0; j < l2; j++) {\n            cell += this.renderer.tablecell(\n              this.parseInline(token.tokens.header[j]),\n              { header: true, align: token.align[j] }\n            );\n          }\n          header += this.renderer.tablerow(cell);\n\n          body = '';\n          l2 = token.cells.length;\n          for (j = 0; j < l2; j++) {\n            row = token.tokens.cells[j];\n\n            cell = '';\n            l3 = row.length;\n            for (k = 0; k < l3; k++) {\n              cell += this.renderer.tablecell(\n                this.parseInline(row[k]),\n                { header: false, align: token.align[k] }\n              );\n            }\n\n            body += this.renderer.tablerow(cell);\n          }\n          out += this.renderer.table(header, body);\n          continue;\n        }\n        case 'blockquote': {\n          body = this.parse(token.tokens);\n          out += this.renderer.blockquote(body);\n          continue;\n        }\n        case 'list': {\n          ordered = token.ordered;\n          start = token.start;\n          loose = token.loose;\n          l2 = token.items.length;\n\n          body = '';\n          for (j = 0; j < l2; j++) {\n            item = token.items[j];\n            checked = item.checked;\n            task = item.task;\n\n            itemBody = '';\n            if (item.task) {\n              checkbox = this.renderer.checkbox(checked);\n              if (loose) {\n                if (item.tokens[0].type === 'text') {\n                  item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n                  if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                    item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                  }\n                } else {\n                  item.tokens.unshift({\n                    type: 'text',\n                    text: checkbox\n                  });\n                }\n              } else {\n                itemBody += checkbox;\n              }\n            }\n\n            itemBody += this.parse(item.tokens, loose);\n            body += this.renderer.listitem(itemBody, task, checked);\n          }\n\n          out += this.renderer.list(body, ordered, start);\n          continue;\n        }\n        case 'html': {\n          // TODO parse inline content if parameter markdown=1\n          out += this.renderer.html(token.text);\n          continue;\n        }\n        case 'paragraph': {\n          out += this.renderer.paragraph(this.parseInline(token.tokens));\n          continue;\n        }\n        case 'text': {\n          body = token.tokens ? this.parseInline(token.tokens) : token.text;\n          while (i + 1 < l && tokens[i + 1].type === 'text') {\n            token = tokens[++i];\n            body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n          }\n          out += top ? this.renderer.paragraph(body) : body;\n          continue;\n        }\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n\n    return out;\n  }\n\n  /**\n   * Parse Inline Tokens\n   */\n  parseInline(tokens, renderer) {\n    renderer = renderer || this.renderer;\n    let out = '',\n      i,\n      token;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n      switch (token.type) {\n        case 'escape': {\n          out += renderer.text(token.text);\n          break;\n        }\n        case 'html': {\n          out += renderer.html(token.text);\n          break;\n        }\n        case 'link': {\n          out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'image': {\n          out += renderer.image(token.href, token.title, token.text);\n          break;\n        }\n        case 'strong': {\n          out += renderer.strong(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'em': {\n          out += renderer.em(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'codespan': {\n          out += renderer.codespan(token.text);\n          break;\n        }\n        case 'br': {\n          out += renderer.br();\n          break;\n        }\n        case 'del': {\n          out += renderer.del(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'text': {\n          out += renderer.text(token.text);\n          break;\n        }\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n    return out;\n  }\n};\n\nconst {\n  merge: merge$2,\n  checkSanitizeDeprecation: checkSanitizeDeprecation$1,\n  escape: escape$3\n} = helpers;\nconst {\n  getDefaults,\n  changeDefaults,\n  defaults: defaults$5\n} = defaults;\n\n/**\n * Marked\n */\nfunction marked(src, opt, callback) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  if (callback || typeof opt === 'function') {\n    if (!callback) {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge$2({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation$1(opt);\n    const highlight = opt.highlight;\n    let tokens,\n      pending,\n      i = 0;\n\n    try {\n      tokens = Lexer_1.lex(src, opt);\n    } catch (e) {\n      return callback(e);\n    }\n\n    pending = tokens.length;\n\n    const done = function(err) {\n      if (err) {\n        opt.highlight = highlight;\n        return callback(err);\n      }\n\n      let out;\n\n      try {\n        out = Parser_1.parse(tokens, opt);\n      } catch (e) {\n        err = e;\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!pending) return done();\n\n    for (; i < tokens.length; i++) {\n      (function(token) {\n        if (token.type !== 'code') {\n          return --pending || done();\n        }\n        return highlight(token.text, token.lang, function(err, code) {\n          if (err) return done(err);\n          if (code == null || code === token.text) {\n            return --pending || done();\n          }\n          token.text = code;\n          token.escaped = true;\n          --pending || done();\n        });\n      })(tokens[i]);\n    }\n\n    return;\n  }\n  try {\n    opt = merge$2({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation$1(opt);\n    return Parser_1.parse(Lexer_1.lex(src, opt), opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if ((opt || marked.defaults).silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape$3(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge$2(marked.defaults, opt);\n  changeDefaults(marked.defaults);\n  return marked;\n};\n\nmarked.getDefaults = getDefaults;\n\nmarked.defaults = defaults$5;\n\n/**\n * Use Extension\n */\n\nmarked.use = function(extension) {\n  const opts = merge$2({}, extension);\n  if (extension.renderer) {\n    const renderer = marked.defaults.renderer || new Renderer_1();\n    for (const prop in extension.renderer) {\n      const prevRenderer = renderer[prop];\n      renderer[prop] = (...args) => {\n        let ret = extension.renderer[prop].apply(renderer, args);\n        if (ret === false) {\n          ret = prevRenderer.apply(renderer, args);\n        }\n        return ret;\n      };\n    }\n    opts.renderer = renderer;\n  }\n  if (extension.tokenizer) {\n    const tokenizer = marked.defaults.tokenizer || new Tokenizer_1();\n    for (const prop in extension.tokenizer) {\n      const prevTokenizer = tokenizer[prop];\n      tokenizer[prop] = (...args) => {\n        let ret = extension.tokenizer[prop].apply(tokenizer, args);\n        if (ret === false) {\n          ret = prevTokenizer.apply(tokenizer, args);\n        }\n        return ret;\n      };\n    }\n    opts.tokenizer = tokenizer;\n  }\n  marked.setOptions(opts);\n};\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser_1;\nmarked.parser = Parser_1.parse;\n\nmarked.Renderer = Renderer_1;\nmarked.TextRenderer = TextRenderer_1;\n\nmarked.Lexer = Lexer_1;\nmarked.lexer = Lexer_1.lex;\n\nmarked.Tokenizer = Tokenizer_1;\n\nmarked.Slugger = Slugger_1;\n\nmarked.parse = marked;\n\nvar marked_1 = marked;\n\nexport default marked_1;",
          "filepath": "data/repos/markedjs/marked-1.0/lib/marked.esm.js",
          "repo": "markedjs/marked",
          "version": "1.0",
          "chunk_index": 2
        }
      },
      {
        "id": "330d97ed-3ed6-4218-9cc5-cedaa6e46494",
        "score": 0.016129032258064516,
        "payload": {
          "text": "const Renderer = require('./Renderer.js');\nconst TextRenderer = require('./TextRenderer.js');\nconst Slugger = require('./Slugger.js');\nconst { defaults } = require('./defaults.js');\nconst {\n  unescape\n} = require('./helpers.js');\n\n/**\n * Parsing & Compiling\n */\nmodule.exports = class Parser {\n  constructor(options) {\n    this.options = options || defaults;\n    this.options.renderer = this.options.renderer || new Renderer();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.textRenderer = new TextRenderer();\n    this.slugger = new Slugger();\n  }\n\n  /**\n   * Static Parse Method\n   */\n  static parse(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parse(tokens);\n  }\n\n  /**\n   * Parse Loop\n   */\n  parse(tokens, top = true) {\n    let out = '',\n      i,\n      j,\n      k,\n      l2,\n      l3,\n      row,\n      cell,\n      header,\n      body,\n      token,\n      ordered,\n      start,\n      loose,\n      itemBody,\n      item,\n      checked,\n      task,\n      checkbox;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n      switch (token.type) {\n        case 'space': {\n          continue;\n        }\n        case 'hr': {\n          out += this.renderer.hr();\n          continue;\n        }\n        case 'heading': {\n          out += this.renderer.heading(\n            this.parseInline(token.tokens),\n            token.depth,\n            unescape(this.parseInline(token.tokens, this.textRenderer)),\n            this.slugger);\n          continue;\n        }\n        case 'code': {\n          out += this.renderer.code(token.text,\n            token.lang,\n            token.escaped);\n          continue;\n        }\n        case 'table': {\n          header = '';\n\n          // header\n          cell = '';\n          l2 = token.header.length;\n          for (j = 0; j < l2; j++) {\n            cell += this.renderer.tablecell(\n              this.parseInline(token.tokens.header[j]),\n              { header: true, align: token.align[j] }\n            );\n          }\n          header += this.renderer.tablerow(cell);\n\n          body = '';\n          l2 = token.cells.length;\n          for (j = 0; j < l2; j++) {\n            row = token.tokens.cells[j];\n\n            cell = '';\n            l3 = row.length;\n            for (k = 0; k < l3; k++) {\n              cell += this.renderer.tablecell(\n                this.parseInline(row[k]),\n                { header: false, align: token.align[k] }\n              );\n            }\n\n            body += this.renderer.tablerow(cell);\n          }\n          out += this.renderer.table(header, body);\n          continue;\n        }\n        case 'blockquote': {\n          body = this.parse(token.tokens);\n          out += this.renderer.blockquote(body);\n          continue;\n        }\n        case 'list': {\n          ordered = token.ordered;\n          start = token.start;\n          loose = token.loose;\n          l2 = token.items.length;\n\n          body = '';\n          for (j = 0; j < l2; j++) {\n            item = token.items[j];\n            checked = item.checked;\n            task = item.task;\n\n            itemBody = '';\n            if (item.task) {\n              checkbox = this.renderer.checkbox(checked);\n              if (loose) {\n                if (item.tokens[0].type === 'text') {\n                  item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n                  if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                    item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                  }\n                } else {\n                  item.tokens.unshift({\n                    type: 'text',\n                    text: checkbox\n                  });\n                }\n              } else {\n                itemBody += checkbox;\n              }\n            }\n\n            itemBody += this.parse(item.tokens, loose);\n            body += this.renderer.listitem(itemBody, task, checked);\n          }\n\n          out += this.renderer.list(body, ordered, start);\n          continue;\n        }\n        case 'html': {\n          // TODO parse inline content if parameter markdown=1\n          out += this.renderer.html(token.text);\n          continue;\n        }\n        case 'paragraph': {\n          out += this.renderer.paragraph(this.parseInline(token.tokens));\n          continue;\n        }\n        case 'text': {\n          body = token.tokens ? this.parseInline(token.tokens) : token.text;\n          while (i + 1 < l && tokens[i + 1].type === 'text') {\n            token = tokens[++i];\n            body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n          }\n          out += top ? this.renderer.paragraph(body) : body;\n          continue;\n        }\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n\n    return out;\n  }\n\n  /**\n   * Parse Inline Tokens\n   */\n  parseInline(tokens, renderer) {\n    renderer = renderer || this.renderer;\n    let out = '',\n      i,\n      token;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n      switch (token.type) {\n        case 'escape': {\n          out += renderer.text(token.text);\n          break;\n        }\n        case 'html': {\n          out += renderer.html(token.text);\n          break;\n        }\n        case 'link': {\n          out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'image': {\n          out += renderer.image(token.href, token.title, token.text);\n          break;\n        }\n        case 'strong': {\n          out += renderer.strong(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'em': {\n          out += renderer.em(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'codespan': {\n          out += renderer.codespan(token.text);\n          break;\n        }\n        case 'br': {\n          out += renderer.br();\n          break;\n        }\n        case 'del': {\n          out += renderer.del(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'text': {\n          out += renderer.text(token.text);\n          break;\n        }\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n    return out;\n  }\n};\n",
          "filepath": "data/repos/markedjs/marked-1.0/src/Parser.js",
          "repo": "markedjs/marked",
          "version": "1.0",
          "chunk_index": 0
        }
      },
      {
        "id": "a27f234c-270d-48d0-b2fb-0c988b9658e9",
        "score": 0.015873015873015872,
        "payload": {
          "text": "---\nname: Bug report\nabout: Marked says it does this thing but does not\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\n<!--\n1. [Marked Demo](https://marked.js.org/demo/)\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\n-->\n\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\n<!--\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\n3. Actual output (or error) is...\n-->\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n",
          "filepath": "data/repos/markedjs/marked-1.0/.github/ISSUE_TEMPLATE/Bug_report.md",
          "repo": "markedjs/marked",
          "version": "1.0",
          "chunk_index": 0
        }
      },
      {
        "id": "d4ed5a61-a801-42da-8af3-377176a0e5d8",
        "score": 0.015625,
        "payload": {
          "text": "          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // br\n\n\n        if (token = this.tokenizer.br(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // del (gfm)\n\n\n        if (token = this.tokenizer.del(src)) {\n          src = src.substring(token.raw.length);\n          token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n          tokens.push(token);\n          continue;\n        } // autolink\n\n\n        if (token = this.tokenizer.autolink(src, mangle)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // url (gfm)\n\n\n        if (!inLink && (token = this.tokenizer.url(src, mangle))) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // text\n\n\n        if (token = this.tokenizer.inlineText(src, inRawBlock, smartypants)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      return tokens;\n    };\n\n    _createClass(Lexer, null, [{\n      key: \"rules\",\n      get: function get() {\n        return {\n          block: block$1,\n          inline: inline$1\n        };\n      }\n    }]);\n\n    return Lexer;\n  }();\n\n  var defaults$3 = defaults.defaults;\n  var cleanUrl$1 = helpers.cleanUrl,\n      escape$1 = helpers.escape;\n  /**\n   * Renderer\n   */\n\n  var Renderer_1 = /*#__PURE__*/function () {\n    function Renderer(options) {\n      this.options = options || defaults$3;\n    }\n\n    var _proto = Renderer.prototype;\n\n    _proto.code = function code(_code, infostring, escaped) {\n      var lang = (infostring || '').match(/\\S*/)[0];\n\n      if (this.options.highlight) {\n        var out = this.options.highlight(_code, lang);\n\n        if (out != null && out !== _code) {\n          escaped = true;\n          _code = out;\n        }\n      }\n\n      if (!lang) {\n        return '<pre><code>' + (escaped ? _code : escape$1(_code, true)) + '</code></pre>';\n      }\n\n      return '<pre><code class=\"' + this.options.langPrefix + escape$1(lang, true) + '\">' + (escaped ? _code : escape$1(_code, true)) + '</code></pre>\\n';\n    };\n\n    _proto.blockquote = function blockquote(quote) {\n      return '<blockquote>\\n' + quote + '</blockquote>\\n';\n    };\n\n    _proto.html = function html(_html) {\n      return _html;\n    };\n\n    _proto.heading = function heading(text, level, raw, slugger) {\n      if (this.options.headerIds) {\n        return '<h' + level + ' id=\"' + this.options.headerPrefix + slugger.slug(raw) + '\">' + text + '</h' + level + '>\\n';\n      } // ignore IDs\n\n\n      return '<h' + level + '>' + text + '</h' + level + '>\\n';\n    };\n\n    _proto.hr = function hr() {\n      return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n    };\n\n    _proto.list = function list(body, ordered, start) {\n      var type = ordered ? 'ol' : 'ul',\n          startatt = ordered && start !== 1 ? ' start=\"' + start + '\"' : '';\n      return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n    };\n\n    _proto.listitem = function listitem(text) {\n      return '<li>' + text + '</li>\\n';\n    };\n\n    _proto.checkbox = function checkbox(checked) {\n      return '<input ' + (checked ? 'checked=\"\" ' : '') + 'disabled=\"\" type=\"checkbox\"' + (this.options.xhtml ? ' /' : '') + '> ';\n    };\n\n    _proto.paragraph = function paragraph(text) {\n      return '<p>' + text + '</p>\\n';\n    };\n\n    _proto.table = function table(header, body) {\n      if (body) body = '<tbody>' + body + '</tbody>';\n      return '<table>\\n' + '<thead>\\n' + header + '</thead>\\n' + body + '</table>\\n';\n    };\n\n    _proto.tablerow = function tablerow(content) {\n      return '<tr>\\n' + content + '</tr>\\n';\n    };\n\n    _proto.tablecell = function tablecell(content, flags) {\n      var type = flags.header ? 'th' : 'td';\n      var tag = flags.align ? '<' + type + ' align=\"' + flags.align + '\">' : '<' + type + '>';\n      return tag + content + '</' + type + '>\\n';\n    } // span level renderer\n    ;\n\n    _proto.strong = function strong(text) {\n      return '<strong>' + text + '</strong>';\n    };\n\n    _proto.em = function em(text) {\n      return '<em>' + text + '</em>';\n    };\n\n    _proto.codespan = function codespan(text) {\n      return '<code>' + text + '</code>';\n    };\n\n    _proto.br = function br() {\n      return this.options.xhtml ? '<br/>' : '<br>';\n    };\n\n    _proto.del = function del(text) {\n      return '<del>' + text + '</del>';\n    };\n\n    _proto.link = function link(href, title, text) {\n      href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = '<a href=\"' + escape$1(href) + '\"';\n\n      if (title) {\n        out += ' title=\"' + title + '\"';\n      }\n\n      out += '>' + text + '</a>';\n      return out;\n    };\n\n    _proto.image = function image(href, title, text) {\n      href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n\n      if (title) {\n        out += ' title=\"' + title + '\"';\n      }\n\n      out += this.options.xhtml ? '/>' : '>';\n      return out;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    return Renderer;\n  }();\n\n  /**\n   * TextRenderer\n   * returns only the textual part of the token\n   */\n  var TextRenderer_1 = /*#__PURE__*/function () {\n    function TextRenderer() {}\n\n    var _proto = TextRenderer.prototype;\n\n    // no need for block level renderers\n    _proto.strong = function strong(text) {\n      return text;\n    };\n\n    _proto.em = function em(text) {\n      return text;\n    };\n\n    _proto.codespan = function codespan(text) {\n      return text;\n    };\n\n    _proto.del = function del(text) {\n      return text;\n    };\n\n    _proto.html = function html(text) {\n      return text;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    _proto.link = function link(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.image = function image(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.br = function br() {\n      return '';\n    };\n\n    return TextRenderer;\n  }();\n\n  /**\n   * Slugger generates header id\n   */\n  var Slugger_1 = /*#__PURE__*/function () {\n    function Slugger() {\n      this.seen = {};\n    }\n    /**\n     * Convert string to unique id\n     */\n\n\n    var _proto = Slugger.prototype;\n\n    _proto.slug = function slug(value) {\n      var slug = value.toLowerCase().trim() // remove html tags\n      .replace(/<[!\\/a-z].*?>/ig, '') // remove unwanted chars\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '').replace(/\\s/g, '-');\n\n      if (this.seen.hasOwnProperty(slug)) {\n        var originalSlug = slug;\n\n        do {\n          this.seen[originalSlug]++;\n          slug = originalSlug + '-' + this.seen[originalSlug];\n        } while (this.seen.hasOwnProperty(slug));\n      }\n\n      this.seen[slug] = 0;\n      return slug;\n    };\n\n    return Slugger;\n  }();\n\n  var defaults$4 = defaults.defaults;\n  var unescape$1 = helpers.unescape;\n  /**\n   * Parsing & Compiling\n   */\n\n  var Parser_1 = /*#__PURE__*/function () {\n    function Parser(options) {\n      this.options = options || defaults$4;\n      this.options.renderer = this.options.renderer || new Renderer_1();\n      this.renderer = this.options.renderer;\n      this.renderer.options = this.options;\n      this.textRenderer = new TextRenderer_1();\n      this.slugger = new Slugger_1();\n    }\n    /**\n     * Static Parse Method\n     */\n\n\n    Parser.parse = function parse(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parse(tokens);\n    }\n    /**\n     * Parse Loop\n     */\n    ;\n\n    var _proto = Parser.prototype;\n\n    _proto.parse = function parse(tokens, top) {\n      if (top === void 0) {\n        top = true;\n      }\n\n      var out = '',\n          i,\n          j,\n          k,\n          l2,\n          l3,\n          row,\n          cell,\n          header,\n          body,\n          token,\n          ordered,\n          start,\n          loose,\n          itemBody,\n          item,\n          checked,\n          task,\n          checkbox;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i];\n\n        switch (token.type) {\n          case 'space':\n            {\n              continue;\n            }\n\n          case 'hr':\n            {\n              out += this.renderer.hr();\n              continue;\n            }\n\n          case 'heading':\n            {\n              out += this.renderer.heading(this.parseInline(token.tokens), token.depth, unescape$1(this.parseInline(token.tokens, this.textRenderer)), this.slugger);\n              continue;\n            }\n\n          case 'code':\n            {\n              out += this.renderer.code(token.text, token.lang, token.escaped);\n              continue;\n            }\n\n          case 'table':\n            {\n              header = ''; // header\n\n              cell = '';\n              l2 = token.header.length;\n\n              for (j = 0; j < l2; j++) {\n                cell += this.renderer.tablecell(this.parseInline(token.tokens.header[j]), {\n                  header: true,\n                  align: token.align[j]\n                });\n              }\n\n              header += this.renderer.tablerow(cell);\n              body = '';\n              l2 = token.cells.length;\n\n              for (j = 0; j < l2; j++) {\n                row = token.tokens.cells[j];\n                cell = '';\n                l3 = row.length;\n\n                for (k = 0; k < l3; k++) {\n                  cell += this.renderer.tablecell(this.parseInline(row[k]), {\n                    header: false,\n                    align: token.align[k]\n                  });\n                }\n\n                body += this.renderer.tablerow(cell);\n              }\n\n              out += this.renderer.table(header, body);\n              continue;\n            }\n\n          case 'blockquote':\n            {\n              body = this.parse(token.tokens);\n              out += this.renderer.blockquote(body);\n              continue;\n            }\n\n          case 'list':\n            {\n              ordered = token.ordered;\n              start = token.start;\n              loose = token.loose;\n              l2 = token.items.length;\n              body = '';\n\n              for (j = 0; j < l2; j++) {\n                item = token.items[j];\n                checked = item.checked;\n                task = item.task;\n                itemBody = '';\n\n                if (item.task) {\n                  checkbox = this.renderer.checkbox(checked);\n\n                  if (loose) {\n                    if (item.tokens[0].type === 'text') {\n                      item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n\n                      if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                        item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                      }\n                    } else {\n                      item.tokens.unshift({\n                        type: 'text',\n                        text: checkbox\n                      });\n                    }\n                  } else {\n                    itemBody += checkbox;\n                  }\n                }\n\n                itemBody += this.parse(item.tokens, loose);\n                body += this.renderer.listitem(itemBody, task, checked);\n              }\n\n              out += this.renderer.list(body, ordered, start);\n              continue;\n            }\n\n          case 'html':\n            {\n              // TODO parse inline content if parameter markdown=1\n              out += this.renderer.html(token.text);\n              continue;\n            }\n\n          case 'paragraph':\n            {\n              out += this.renderer.paragraph(this.parseInline(token.tokens));\n              continue;\n            }\n\n          case 'text':\n            {\n              body = token.tokens ? this.parseInline(token.tokens) : token.text;\n\n              while (i + 1 < l && tokens[i + 1].type === 'text') {\n                token = tokens[++i];\n                body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n              }\n\n              out += top ? this.renderer.paragraph(body) : body;\n              continue;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    }\n    /**\n     * Parse Inline Tokens\n     */\n    ;\n\n    _proto.parseInline = function parseInline(tokens, renderer) {\n      renderer = renderer || this.renderer;\n      var out = '',\n          i,\n          token;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i];\n\n        switch (token.type) {\n          case 'escape':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          case 'html':\n            {\n              out += renderer.html(token.text);\n              break;\n            }\n\n          case 'link':\n            {\n              out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'image':\n            {\n              out += renderer.image(token.href, token.title, token.text);\n              break;\n            }\n\n          case 'strong':\n            {\n              out += renderer.strong(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'em':\n            {\n              out += renderer.em(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'codespan':\n            {\n              out += renderer.codespan(token.text);\n              break;\n            }\n\n          case 'br':\n            {\n              out += renderer.br();\n              break;\n            }\n\n          case 'del':\n            {\n              out += renderer.del(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'text':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    };\n\n    return Parser;\n  }();\n\n  var merge$2 = helpers.merge,\n      checkSanitizeDeprecation$1 = helpers.checkSanitizeDeprecation,\n      escape$2 = helpers.escape;\n  var getDefaults = defaults.getDefaults,\n      changeDefaults = defaults.changeDefaults,\n      defaults$5 = defaults.defaults;\n  /**\n   * Marked\n   */\n\n  function marked(src, opt, callback) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    if (callback || typeof opt === 'function') {\n      var _ret = function () {\n        if (!callback) {\n          callback = opt;\n          opt = null;\n        }\n\n        opt = merge$2({}, marked.defaults, opt || {});\n        checkSanitizeDeprecation$1(opt);\n        var highlight = opt.highlight;\n        var tokens,\n            pending,\n            i = 0;\n\n        try {\n          tokens = Lexer_1.lex(src, opt);\n        } catch (e) {\n          return {\n            v: callback(e)\n          };\n        }\n\n        pending = tokens.length;\n\n        var done = function done(err) {\n          if (err) {\n            opt.highlight = highlight;\n            return callback(err);\n          }\n\n          var out;\n\n          try {\n            out = Parser_1.parse(tokens, opt);\n          } catch (e) {\n            err = e;\n          }\n\n          opt.highlight = highlight;\n          return err ? callback(err) : callback(null, out);\n        };\n\n        if (!highlight || highlight.length < 3) {\n          return {\n            v: done()\n          };\n        }\n\n        delete opt.highlight;\n        if (!pending) return {\n          v: done()\n        };\n\n        for (; i < tokens.length; i++) {\n          (function (token) {\n            if (token.type !== 'code') {\n              return --pending || done();\n            }\n\n            return highlight(token.text, token.lang, function (err, code) {\n              if (err) return done(err);\n\n              if (code == null || code === token.text) {\n                return --pending || done();\n              }\n\n              token.text = code;\n              token.escaped = true;\n              --pending || done();\n            });\n          })(tokens[i]);\n        }\n\n        return {\n          v: void 0\n        };\n      }();\n\n      if (typeof _ret === \"object\") return _ret.v;\n    }\n\n    try {\n      opt = merge$2({}, marked.defaults, opt || {});\n      checkSanitizeDeprecation$1(opt);\n      return Parser_1.parse(Lexer_1.lex(src, opt), opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if ((opt || marked.defaults).silent) {\n        return '<p>An error occurred:</p><pre>' + escape$2(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  }\n  /**\n   * Options\n   */\n\n\n  marked.options = marked.setOptions = function (opt) {\n    merge$2(marked.defaults, opt);\n    changeDefaults(marked.defaults);\n    return marked;\n  };\n\n  marked.getDefaults = getDefaults;\n  marked.defaults = defaults$5;\n  /**\n   * Use Extension\n   */\n\n  marked.use = function (extension) {\n    var opts = merge$2({}, extension);\n\n    if (extension.renderer) {\n      (function () {\n        var renderer = marked.defaults.renderer || new Renderer_1();\n\n        var _loop = function _loop(prop) {\n          var prevRenderer = renderer[prop];\n\n          renderer[prop] = function () {\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n              args[_key] = arguments[_key];\n            }\n\n            var ret = extension.renderer[prop].apply(renderer, args);\n\n            if (ret === false) {\n              ret = prevRenderer.apply(renderer, args);\n            }\n\n            return ret;\n          };\n        };\n\n        for (var prop in extension.renderer) {\n          _loop(prop);\n        }\n\n        opts.renderer = renderer;\n      })();\n    }\n\n    if (extension.tokenizer) {\n      (function () {\n        var tokenizer = marked.defaults.tokenizer || new Tokenizer_1();\n\n        var _loop2 = function _loop2(prop) {\n          var prevTokenizer = tokenizer[prop];\n\n          tokenizer[prop] = function () {\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n              args[_key2] = arguments[_key2];\n            }\n\n            var ret = extension.tokenizer[prop].apply(tokenizer, args);\n\n            if (ret === false) {\n              ret = prevTokenizer.apply(tokenizer, args);\n            }\n\n            return ret;\n          };\n        };\n\n        for (var prop in extension.tokenizer) {\n          _loop2(prop);\n        }\n\n        opts.tokenizer = tokenizer;\n      })();\n    }\n\n    marked.setOptions(opts);\n  };\n  /**\n   * Expose\n   */\n\n\n  marked.Parser = Parser_1;\n  marked.parser = Parser_1.parse;\n  marked.Renderer = Renderer_1;\n  marked.TextRenderer = TextRenderer_1;\n  marked.Lexer = Lexer_1;\n  marked.lexer = Lexer_1.lex;\n  marked.Tokenizer = Tokenizer_1;\n  marked.Slugger = Slugger_1;\n  marked.parse = marked;\n  var marked_1 = marked;\n\n  return marked_1;\n\n})));",
          "filepath": "data/repos/markedjs/marked-1.0/lib/marked.js",
          "repo": "markedjs/marked",
          "version": "1.0",
          "chunk_index": 2
        }
      },
      {
        "id": "9e1a1162-6dd6-4ee0-80b9-bfb3f39d70a8",
        "score": 0.015384615384615385,
        "payload": {
          "text": "# Markdown is broken\n\nI have a lot of scraps of markdown engine oddities that I've collected over the\nyears. What you see below is slightly messy, but it's what I've managed to\ncobble together to illustrate the differences between markdown engines, and\nwhy, if there ever is a markdown specification, it has to be absolutely\nthorough. There are a lot more of these little differences I have documented\nelsewhere. I know I will find them lingering on my disk one day, but until\nthen, I'll continue to add whatever strange nonsensical things I find.\n\nSome of these examples may only mention a particular engine compared to marked.\nHowever, the examples with markdown.pl could easily be swapped out for\ndiscount, upskirt, or markdown.js, and you would very easily see even more\ninconsistencies.\n\nA lot of this was written when I was very unsatisfied with the inconsistencies\nbetween markdown engines. Please excuse the frustration noticeable in my\nwriting.\n\n## Examples of markdown's \"stupid\" list parsing\n\n```\n$ markdown.pl\n\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n\n<ul>\n<li>item2</li>\n</ul>\n\n<p><p>text</p></li>\n</ul></p>\n```\n\n\n```\n$ marked\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n<ul>\n<li>item2</li>\n</ul>\n<p>text</p>\n</li>\n</ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\n```\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\n```\n$ marked\n* hello\n  > world\n^D\n<ul>\n<li>hello<blockquote>\n<p>world</p>\n</blockquote>\n</li>\n</ul>\n```\n\nAgain, which looks correct to you?\n\n- - -\n\nEXAMPLE:\n\n```\n$ markdown.pl\n* hello\n  * world\n    * hi\n          code\n^D\n<ul>\n<li>hello\n<ul>\n<li>world</li>\n<li>hi\n  code</li>\n</ul></li>\n</ul>\n```\n\nThe code isn't a code block even though it's after the bullet margin. I know,\nlets give it two more spaces, effectively making it 8 spaces past the bullet.\n\n```\n$ markdown.pl\n* hello\n  * world\n    * hi\n            code\n^D\n<ul>\n<li>hello\n<ul>\n<li>world</li>\n<li>hi\n    code</li>\n</ul></li>\n</ul>\n```\n\nAnd, it's still not a code block. Did you also notice that the 3rd item isn't\neven its own list? Markdown screws that up too because of its indentation\nunaware parsing.\n\n- - -\n\nLet's look at some more examples of markdown's list parsing:\n\n```\n$ markdown.pl\n\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n\n<ul>\n<li>item2</li>\n</ul>\n\n<p><p>text</p></li>\n</ul></p>\n```\n\nMisnested tags.\n\n\n```\n$ marked\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n<ul>\n<li>item2</li>\n</ul>\n<p>text</p>\n</li>\n</ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\n```\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\nMore misnested tags.\n\n\n```\n$ marked\n* hello\n  > world\n^D\n<ul>\n<li>hello<blockquote>\n<p>world</p>\n</blockquote>\n</li>\n</ul>\n```\n\nAgain, which looks correct to you?\n\n- - -\n\n# Why quality matters - Part 2\n\n``` bash\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\n``` bash\n$ sundown # upskirt\n* hello\n  > world\n^D\n<ul>\n<li>hello\n&gt; world</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n  > world\n^D\n<ul><li>hello <blockquote><p>world</p></blockquote></li></ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/23\n\n``` bash\n$ markdown.pl # upskirt/markdown.js/discount\n* hello\n      var a = 1;\n* world\n^D\n<ul>\n<li>hello\nvar a = 1;</li>\n<li>world</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n      var a = 1;\n* world\n^D\n<ul><li>hello\n<pre>code>var a = 1;</code></pre></li>\n<li>world</li></ul>\n```\n\nWhich looks more reasonable? Why shouldn't code blocks be able to appear in\nlist items in a sane way?\n\n- - -\n\n``` bash\n$ markdown.js\n<div>hello</div>\n\n<span>hello</span>\n^D\n<p>&lt;div&gt;hello&lt;/div&gt;</p>\n\n<p>&lt;span&gt;hello&lt;/span&gt;</p>\n```\n\n``` bash\n$ marked\n<div>hello</div>\n\n<span>hello</span>\n^D\n<div>hello</div>\n\n\n<p><span>hello</span>\n</p>\n```\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/27\n\n``` bash\n$ markdown.js\n[![an image](/image)](/link)\n^D\n<p><a href=\"/image)](/link\">![an image</a></p>\n```\n\n``` bash\n$ marked\n[![an image](/image)](/link)\n^D\n<p><a href=\"/link\"><img src=\"/image\" alt=\"an image\"></a>\n</p>\n```\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/24\n\n``` bash\n$ markdown.js\n> a\n\n> b\n\n> c\n^D\n<blockquote><p>a</p><p>bundefined&gt; c</p></blockquote>\n```\n\n``` bash\n$ marked\n> a\n\n> b\n\n> c\n^D\n<blockquote><p>a\n\n</p></blockquote>\n<blockquote><p>b\n\n</p></blockquote>\n<blockquote><p>c\n</p></blockquote>\n```\n\n- - -\n\n``` bash\n$ markdown.pl\n* hello\n  * world\n    how\n\n    are\n    you\n\n  * today\n* hi\n^D\n<ul>\n<li><p>hello</p>\n\n<ul>\n<li>world\nhow</li>\n</ul>\n\n<p>are\nyou</p>\n\n<ul>\n<li>today</li>\n</ul></li>\n<li>hi</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n  * world\n    how\n\n    are\n    you\n\n  * today\n* hi\n^D\n<ul>\n<li><p>hello</p>\n<ul>\n<li><p>world\nhow</p>\n<p>are\nyou</p>\n</li>\n<li><p>today</p>\n</li>\n</ul>\n</li>\n<li>hi</li>\n</ul>\n```\n",
          "filepath": "data/repos/markedjs/marked-1.0/docs/broken.md",
          "repo": "markedjs/marked",
          "version": "1.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-2627",
    "model_patch": "diff --git a/marked.esm.js b/marked.esm.js\nindex 1234567..89abcde 100644\n--- a/marked.esm.js\n+++ b/marked.esm.js\n@@ -159,7 +159,7 @@ class Tokenizer {\n     }\n   }\n \n-  emStrong(src, maskedSrc, prevChar = '') {\n+  emStrong(src, maskedSrc, prevChar = '', nextChar = '') {\n     let match = this.rules.inline.emStrong.lDelim.exec(src);\n     if (!match) return;\n \n@@ -167,6 +167,9 @@ class Tokenizer {\n     if (match[3] && prevChar.match(/[\\p{L}\\p{N}]/u)) return;\n \n     const nextChar = match[1] || match[2] || '';\n+    \n+    // Check for escaped characters at the end of the strong text\n+    if (nextChar === '\\\\' && src[match[0].length] === '[') return;\n \n     if (!nextChar || (nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar)))) {\n       const lLength = match[0].length - 1;",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 234.45,
      "issue_embedding_time_ms": 234.45,
      "retrieval_time_ms_jina": 1.15,
      "retrieval_time_ms": 1.15,
      "total_retrieval_time_ms": 235.61,
      "generation_time_ms": 4105.3,
      "total_io_time_ms": 4340.91,
      "input_total_token_limit": null,
      "issue_text_tokens": 565,
      "vlm_tokens": 0,
      "retrieved_tokens": 13893,
      "prompt_template_tokens": 521,
      "total_input_prompt_tokens": 14979,
      "output_generated_tokens": 327,
      "total_io_tokens": 15306,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nBroken \\\"Strong\\\" transform\\n**Marked version:** 4.0.1\\r\\n\\r\\n**Describe the bug**\\r\\nif inside bold text from the right border there is an escaped square open bracket and there is a closing brace behind \\\"**\\\", then bold text is not recognized\\r\\n\\r\\n**To Reproduce**\\r\\n\\r\\n1. [Marked Demo](https://marked.js.org/demo/?outputType=html&text=**strong%20text%5C%5B**%5C%5D&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20true%2C%0A%20%22extensions%22%3A%20null%2C%0A%20%22gfm%22%3A%20true%2C%0A%20%22headerIds%22%3A%20false%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20false%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20true%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20true%2C%0A%20%22smartypants%22%3A%20true%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22walkTokens%22%3A%20null%2C%0A%20%22xhtml%22%3A%20true%0A%7D&version=4.0.1)\\r\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/?text=**strong%20text%5C%5B**%5C%5D)\\r\\n\\r\\n**Expected behavior**\\r\\n![image](https://user-images.githubusercontent.com/8930952/141372010-ef8bf7de-dff7-4c55-94f7-18357e69acf4.png)\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of Bug_report.md]\\n---\\nname: Bug report\\nabout: Marked says it does this thing but does not\\n\\n---\\n**Marked version:**\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior:\\n\\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\\n<!--\\n1. [Marked Demo](https://marked.js.org/demo/)\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\\n-->\\n\\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\\n<!--\\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\\n3. Actual output (or error) is...\\n-->\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n[end of Bug_report.md]\\n[start of nested_code.md]\\n````` hi ther `` ok ``` `````\\n\\n`` ` ``\\n\\n``There is a literal backtick (`) here.``\\n\\nA backtick-delimited string in a code span: `` `foo` ``\\n\\nPlease don't use any `<blink>` tags.\\n[end of nested_code.md]\\n[start of marked.esm.js]\\n          href = href.slice(1, -1);\\n        }\\n      }\\n      return outputLink(cap, {\\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\\n      }, cap[0], this.lexer);\\n    }\\n  }\\n\\n  reflink(src, links) {\\n    let cap;\\n    if ((cap = this.rules.inline.reflink.exec(src))\\n        || (cap = this.rules.inline.nolink.exec(src))) {\\n      let link = (cap[2] || cap[1]).replace(/\\\\s+/g, ' ');\\n      link = links[link.toLowerCase()];\\n      if (!link || !link.href) {\\n        const text = cap[0].charAt(0);\\n        return {\\n          type: 'text',\\n          raw: text,\\n          text\\n        };\\n      }\\n      return outputLink(cap, link, cap[0], this.lexer);\\n    }\\n  }\\n\\n  emStrong(src, maskedSrc, prevChar = '') {\\n    let match = this.rules.inline.emStrong.lDelim.exec(src);\\n    if (!match) return;\\n\\n    // _ can't be between two alphanumerics. \\\\p{L}\\\\p{N} includes non-english alphabet/numbers as well\\n    if (match[3] && prevChar.match(/[\\\\p{L}\\\\p{N}]/u)) return;\\n\\n    const nextChar = match[1] || match[2] || '';\\n\\n    if (!nextChar || (nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar)))) {\\n      const lLength = match[0].length - 1;\\n      let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;\\n\\n      const endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\\n      endReg.lastIndex = 0;\\n\\n      // Clip maskedSrc to same section of string as src (move to lexer?)\\n      maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\\n\\n      while ((match = endReg.exec(maskedSrc)) != null) {\\n        rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\\n\\n        if (!rDelim) continue; // skip single * in __abc*abc__\\n\\n        rLength = rDelim.length;\\n\\n        if (match[3] || match[4]) { // found another Left Delim\\n          delimTotal += rLength;\\n          continue;\\n        } else if (match[5] || match[6]) { // either Left or Right Delim\\n          if (lLength % 3 && !((lLength + rLength) % 3)) {\\n            midDelimTotal += rLength;\\n            continue; // CommonMark Emphasis Rules 9-10\\n          }\\n        }\\n\\n        delimTotal -= rLength;\\n\\n        if (delimTotal > 0) continue; // Haven't found enough closing delimiters\\n\\n        // Remove extra characters. *a*** -> *a*\\n        rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);\\n\\n        // Create `em` if smallest delimiter has odd char count. *a***\\n        if (Math.min(lLength, rLength) % 2) {\\n          const text = src.slice(1, lLength + match.index + rLength);\\n          return {\\n            type: 'em',\\n            raw: src.slice(0, lLength + match.index + rLength + 1),\\n            text,\\n            tokens: this.lexer.inlineTokens(text)\\n          };\\n        }\\n\\n        // Create 'strong' if smallest delimiter has even char count. **a***\\n        const text = src.slice(2, lLength + match.index + rLength - 1);\\n        return {\\n          type: 'strong',\\n          raw: src.slice(0, lLength + match.index + rLength + 1),\\n          text,\\n          tokens: this.lexer.inlineTokens(text)\\n        };\\n      }\\n    }\\n  }\\n\\n  codespan(src) {\\n    const cap = this.rules.inline.code.exec(src);\\n    if (cap) {\\n      let text = cap[2].replace(/\\\\n/g, ' ');\\n      const hasNonSpaceChars = /[^ ]/.test(text);\\n      const hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\\n        text = text.substring(1, text.length - 1);\\n      }\\n      text = escape(text, true);\\n      return {\\n        type: 'codespan',\\n        raw: cap[0],\\n        text\\n      };\\n    }\\n  }\\n\\n  br(src) {\\n    const cap = this.rules.inline.br.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'br',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  del(src) {\\n    const cap = this.rules.inline.del.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'del',\\n        raw: cap[0],\\n        text: cap[2],\\n        tokens: this.lexer.inlineTokens(cap[2])\\n      };\\n    }\\n  }\\n\\n  autolink(src, mangle) {\\n    const cap = this.rules.inline.autolink.exec(src);\\n    if (cap) {\\n      let text, href;\\n      if (cap[2] === '@') {\\n        text = escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\\n        href = 'mailto:' + text;\\n      } else {\\n        text = escape(cap[1]);\\n        href = text;\\n      }\\n\\n      return {\\n        type: 'link',\\n        raw: cap[0],\\n        text,\\n        href,\\n        tokens: [\\n          {\\n            type: 'text',\\n            raw: text,\\n            text\\n          }\\n        ]\\n      };\\n    }\\n  }\\n\\n  url(src, mangle) {\\n    let cap;\\n    if (cap = this.rules.inline.url.exec(src)) {\\n      let text, href;\\n      if (cap[2] === '@') {\\n        text = escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\\n        href = 'mailto:' + text;\\n      } else {\\n        // do extended autolink path validation\\n        let prevCapZero;\\n        do {\\n          prevCapZero = cap[0];\\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\\n        } while (prevCapZero !== cap[0]);\\n        text = escape(cap[0]);\\n        if (cap[1] === 'www.') {\\n          href = 'http://' + text;\\n        } else {\\n          href = text;\\n        }\\n      }\\n      return {\\n        type: 'link',\\n        raw: cap[0],\\n        text,\\n        href,\\n        tokens: [\\n          {\\n            type: 'text',\\n            raw: text,\\n            text\\n          }\\n        ]\\n      };\\n    }\\n  }\\n\\n  inlineText(src, smartypants) {\\n    const cap = this.rules.inline.text.exec(src);\\n    if (cap) {\\n      let text;\\n      if (this.lexer.state.inRawBlock) {\\n        text = this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0];\\n      } else {\\n        text = escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\\n      }\\n      return {\\n        type: 'text',\\n        raw: cap[0],\\n        text\\n      };\\n    }\\n  }\\n}\\n\\n/**\\n * Block-Level Grammar\\n */\\nconst block = {\\n  newline: /^(?: *(?:\\\\n|$))+/,\\n  code: /^( {4}[^\\\\n]+(?:\\\\n(?: *(?:\\\\n|$))*)?)+/,\\n  fences: /^ {0,3}(`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})([^\\\\n]*)\\\\n(?:|([\\\\s\\\\S]*?)\\\\n)(?: {0,3}\\\\1[~`]* *(?=\\\\n|$)|$)/,\\n  hr: /^ {0,3}((?:-[\\\\t ]*){3,}|(?:_[ \\\\t]*){3,}|(?:\\\\*[ \\\\t]*){3,})(?:\\\\n+|$)/,\\n  heading: /^ {0,3}(#{1,6})(?=\\\\s|$)(.*)(?:\\\\n+|$)/,\\n  blockquote: /^( {0,3}> ?(paragraph|[^\\\\n]*)(?:\\\\n|$))+/,\\n  list: /^( {0,3}bull)([ \\\\t][^\\\\n]+?)?(?:\\\\n|$)/,\\n  html: '^ {0,3}(?:' // optional indentation\\n    + '<(script|pre|style|textarea)[\\\\\\\\s>][\\\\\\\\s\\\\\\\\S]*?(?:</\\\\\\\\1>[^\\\\\\\\n]*\\\\\\\\n+|$)' // (1)\\n    + '|comment[^\\\\\\\\n]*(\\\\\\\\n+|$)' // (2)\\n    + '|<\\\\\\\\?[\\\\\\\\s\\\\\\\\S]*?(?:\\\\\\\\?>\\\\\\\\n*|$)' // (3)\\n    + '|<![A-Z][\\\\\\\\s\\\\\\\\S]*?(?:>\\\\\\\\n*|$)' // (4)\\n    + '|<!\\\\\\\\[CDATA\\\\\\\\[[\\\\\\\\s\\\\\\\\S]*?(?:\\\\\\\\]\\\\\\\\]>\\\\\\\\n*|$)' // (5)\\n    + '|</?(tag)(?: +|\\\\\\\\n|/?>)[\\\\\\\\s\\\\\\\\S]*?(?:(?:\\\\\\\\n *)+\\\\\\\\n|$)' // (6)\\n    + '|<(?!script|pre|style|textarea)([a-z][\\\\\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\\\\\t]*(?:\\\\\\\\n|$))[\\\\\\\\s\\\\\\\\S]*?(?:(?:\\\\\\\\n *)+\\\\\\\\n|$)' // (7) open tag\\n    + '|</(?!script|pre|style|textarea)[a-z][\\\\\\\\w-]*\\\\\\\\s*>(?=[ \\\\\\\\t]*(?:\\\\\\\\n|$))[\\\\\\\\s\\\\\\\\S]*?(?:(?:\\\\\\\\n *)+\\\\\\\\n|$)' // (7) closing tag\\n    + ')',\\n  def: /^ {0,3}\\\\[(label)\\\\]: *(?:\\\\n *)?<?([^\\\\s>]+)>?(?:(?: +(?:\\\\n *)?| *\\\\n *)(title))? *(?:\\\\n+|$)/,\\n  table: noopTest,\\n  lheading: /^([^\\\\n]+)\\\\n {0,3}(=+|-+) *(?:\\\\n+|$)/,\\n  // regex template, placeholders will be replaced according to different paragraph\\n  // interruption rules of commonmark and the original markdown spec:\\n  _paragraph: /^([^\\\\n]+(?:\\\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\\\n)[^\\\\n]+)*)/,\\n  text: /^[^\\\\n]+/\\n};\\n\\nblock._label = /(?!\\\\s*\\\\])(?:\\\\\\\\.|[^\\\\[\\\\]\\\\\\\\])+/;\\nblock._title = /(?:\\\"(?:\\\\\\\\\\\"?|[^\\\"\\\\\\\\])*\\\"|'[^'\\\\n]*(?:\\\\n[^'\\\\n]+)*\\\\n?'|\\\\([^()]*\\\\))/;\\nblock.def = edit(block.def)\\n  .replace('label', block._label)\\n  .replace('title', block._title)\\n  .getRegex();\\n\\nblock.bullet = /(?:[*+-]|\\\\d{1,9}[.)])/;\\nblock.listItemStart = edit(/^( *)(bull) */)\\n  .replace('bull', block.bullet)\\n  .getRegex();\\n\\nblock.list = edit(block.list)\\n  .replace(/bull/g, block.bullet)\\n  .replace('hr', '\\\\\\\\n+(?=\\\\\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\\\\\* *){3,})(?:\\\\\\\\n+|$))')\\n  .replace('def', '\\\\\\\\n+(?=' + block.def.source + ')')\\n  .getRegex();\\n\\nblock._tag = 'address|article|aside|base|basefont|blockquote|body|caption'\\n  + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\\n  + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\\n  + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\\n  + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'\\n  + '|track|ul';\\nblock._comment = /<!--(?!-?>)[\\\\s\\\\S]*?(?:-->|$)/;\\nblock.html = edit(block.html, 'i')\\n  .replace('comment', block._comment)\\n  .replace('tag', block._tag)\\n  .replace('attribute', / +[a-zA-Z:_][\\\\w.:-]*(?: *= *\\\"[^\\\"\\\\n]*\\\"| *= *'[^'\\\\n]*'| *= *[^\\\\s\\\"'=<>`]+)?/)\\n  .getRegex();\\n\\nblock.paragraph = edit(block._paragraph)\\n  .replace('hr', block.hr)\\n  .replace('heading', ' {0,3}#{1,6} ')\\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\\n  .replace('|table', '')\\n  .replace('blockquote', ' {0,3}>')\\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\\\\\n]*\\\\\\\\n)|~{3,})[^\\\\\\\\n]*\\\\\\\\n')\\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\\n  .replace('html', '</?(?:tag)(?: +|\\\\\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\\n  .getRegex();\\n\\nblock.blockquote = edit(block.blockquote)\\n  .replace('paragraph', block.paragraph)\\n  .getRegex();\\n\\n/**\\n * Normal Block Grammar\\n */\\n\\nblock.normal = merge({}, block);\\n\\n/**\\n * GFM Block Grammar\\n */\\n\\nblock.gfm = merge({}, block.normal, {\\n  table: '^ *([^\\\\\\\\n ].*\\\\\\\\|.*)\\\\\\\\n' // Header\\n    + ' {0,3}(?:\\\\\\\\| *)?(:?-+:? *(?:\\\\\\\\| *:?-+:? *)*)(?:\\\\\\\\| *)?' // Align\\n    + '(?:\\\\\\\\n((?:(?! *\\\\\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\\\\\n|$))*)\\\\\\\\n*|$)' // Cells\\n});\\n\\nblock.gfm.table = edit(block.gfm.table)\\n  .replace('hr', block.hr)\\n  .replace('heading', ' {0,3}#{1,6} ')\\n  .replace('blockquote', ' {0,3}>')\\n  .replace('code', ' {4}[^\\\\\\\\n]')\\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\\\\\n]*\\\\\\\\n)|~{3,})[^\\\\\\\\n]*\\\\\\\\n')\\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\\n  .replace('html', '</?(?:tag)(?: +|\\\\\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\\n  .replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\\n  .getRegex();\\n\\nblock.gfm.paragraph = edit(block._paragraph)\\n  .replace('hr', block.hr)\\n  .replace('heading', ' {0,3}#{1,6} ')\\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\\n  .replace('table', block.gfm.table) // interrupt paragraphs with table\\n  .replace('blockquote', ' {0,3}>')\\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\\\\\n]*\\\\\\\\n)|~{3,})[^\\\\\\\\n]*\\\\\\\\n')\\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\\n  .replace('html', '</?(?:tag)(?: +|\\\\\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\\n  .getRegex();\\n/**\\n * Pedantic grammar (original John Gruber's loose markdown specification)\\n */\\n\\nblock.pedantic = merge({}, block.normal, {\\n  html: edit(\\n    '^ *(?:comment *(?:\\\\\\\\n|\\\\\\\\s*$)'\\n    + '|<(tag)[\\\\\\\\s\\\\\\\\S]+?</\\\\\\\\1> *(?:\\\\\\\\n{2,}|\\\\\\\\s*$)' // closed tag\\n    + '|<tag(?:\\\"[^\\\"]*\\\"|\\\\'[^\\\\']*\\\\'|\\\\\\\\s[^\\\\'\\\"/>\\\\\\\\s]*)*?/?> *(?:\\\\\\\\n{2,}|\\\\\\\\s*$))')\\n    .replace('comment', block._comment)\\n    .replace(/tag/g, '(?!(?:'\\n      + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\\n      + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\\n      + '\\\\\\\\b)\\\\\\\\w+(?!:|[^\\\\\\\\w\\\\\\\\s@]*@)\\\\\\\\b')\\n    .getRegex(),\\n  def: /^ *\\\\[([^\\\\]]+)\\\\]: *<?([^\\\\s>]+)>?(?: +([\\\"(][^\\\\n]+[\\\")]))? *(?:\\\\n+|$)/,\\n  heading: /^(#{1,6})(.*)(?:\\\\n+|$)/,\\n  fences: noopTest, // fences not supported\\n  paragraph: edit(block.normal._paragraph)\\n    .replace('hr', block.hr)\\n    .replace('heading', ' *#{1,6} *[^\\\\n]')\\n    .replace('lheading', block.lheading)\\n    .replace('blockquote', ' {0,3}>')\\n    .replace('|fences', '')\\n    .replace('|list', '')\\n    .replace('|html', '')\\n    .getRegex()\\n});\\n\\n/**\\n * Inline-Level Grammar\\n */\\nconst inline = {\\n  escape: /^\\\\\\\\([!\\\"#$%&'()*+,\\\\-./:;<=>?@\\\\[\\\\]\\\\\\\\^_`{|}~])/,\\n  autolink: /^<(scheme:[^\\\\s\\\\x00-\\\\x1f<>]*|email)>/,\\n  url: noopTest,\\n  tag: '^comment'\\n    + '|^</[a-zA-Z][\\\\\\\\w:-]*\\\\\\\\s*>' // self-closing tag\\n    + '|^<[a-zA-Z][\\\\\\\\w-]*(?:attribute)*?\\\\\\\\s*/?>' // open tag\\n    + '|^<\\\\\\\\?[\\\\\\\\s\\\\\\\\S]*?\\\\\\\\?>' // processing instruction, e.g. <?php ?>\\n    + '|^<![a-zA-Z]+\\\\\\\\s[\\\\\\\\s\\\\\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\\n    + '|^<!\\\\\\\\[CDATA\\\\\\\\[[\\\\\\\\s\\\\\\\\S]*?\\\\\\\\]\\\\\\\\]>', // CDATA section\\n  link: /^!?\\\\[(label)\\\\]\\\\(\\\\s*(href)(?:\\\\s+(title))?\\\\s*\\\\)/,\\n  reflink: /^!?\\\\[(label)\\\\]\\\\[(ref)\\\\]/,\\n  nolink: /^!?\\\\[(ref)\\\\](?:\\\\[\\\\])?/,\\n  reflinkSearch: 'reflink|nolink(?!\\\\\\\\()',\\n  emStrong: {\\n    lDelim: /^(?:\\\\*+(?:([punct_])|[^\\\\s*]))|^_+(?:([punct*])|([^\\\\s_]))/,\\n    //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.\\n    //          () Skip orphan inside strong  () Consume to delim (1) #***                (2) a***#, a***                   (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a\\n    rDelimAst: /^[^_*]*?\\\\_\\\\_[^_*]*?\\\\*[^_*]*?(?=\\\\_\\\\_)|[^*]+(?=[^*])|[punct_](\\\\*+)(?=[\\\\s]|$)|[^punct*_\\\\s](\\\\*+)(?=[punct_\\\\s]|$)|[punct_\\\\s](\\\\*+)(?=[^punct*_\\\\s])|[\\\\s](\\\\*+)(?=[punct_])|[punct_](\\\\*+)(?=[punct_])|[^punct*_\\\\s](\\\\*+)(?=[^punct*_\\\\s])/,\\n    rDelimUnd: /^[^_*]*?\\\\*\\\\*[^_*]*?\\\\_[^_*]*?(?=\\\\*\\\\*)|[^_]+(?=[^_])|[punct*](\\\\_+)(?=[\\\\s]|$)|[^punct*_\\\\s](\\\\_+)(?=[punct*\\\\s]|$)|[punct*\\\\s](\\\\_+)(?=[^punct*_\\\\s])|[\\\\s](\\\\_+)(?=[punct*])|[punct*](\\\\_+)(?=[punct*])/ // ^- Not allowed for _\\n  },\\n  code: /^(`+)([^`]|[^`][\\\\s\\\\S]*?[^`])\\\\1(?!`)/,\\n  br: /^( {2,}|\\\\\\\\)\\\\n(?!\\\\s*$)/,\\n  del: noopTest,\\n  text: /^(`+|[^`])(?:(?= {2,}\\\\n)|[\\\\s\\\\S]*?(?:(?=[\\\\\\\\<!\\\\[`*_]|\\\\b_|$)|[^ ](?= {2,}\\\\n)))/,\\n  punctuation: /^([\\\\spunctuation])/\\n};\\n\\n// list of punctuation marks from CommonMark spec\\n// without * and _ to handle the different emphasis markers * and _\\ninline._punctuation = '!\\\"#$%&\\\\'()+\\\\\\\\-.,/:;<=>?@\\\\\\\\[\\\\\\\\]`^{|}~';\\ninline.punctuation = edit(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex();\\n\\n// sequences em should skip over [title](link), `code`, <html>\\ninline.blockSkip = /\\\\[[^\\\\]]*?\\\\]\\\\([^\\\\)]*?\\\\)|`[^`]*?`|<[^>]*?>/g;\\ninline.escapedEmSt = /\\\\\\\\\\\\*|\\\\\\\\_/g;\\n\\ninline._comment = edit(block._comment).replace('(?:-->|$)', '-->').getRegex();\\n\\ninline.emStrong.lDelim = edit(inline.emStrong.lDelim)\\n  .replace(/punct/g, inline._punctuation)\\n  .getRegex();\\n\\ninline.emStrong.rDelimAst = edit(inline.emStrong.rDelimAst, 'g')\\n  .replace(/punct/g, inline._punctuation)\\n  .getRegex();\\n\\ninline.emStrong.rDelimUnd = edit(inline.emStrong.rDelimUnd, 'g')\\n  .replace(/punct/g, inline._punctuation)\\n  .getRegex();\\n\\ninline._escapes = /\\\\\\\\([!\\\"#$%&'()*+,\\\\-./:;<=>?@\\\\[\\\\]\\\\\\\\^_`{|}~])/g;\\n\\ninline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\\ninline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\\ninline.autolink = edit(inline.autolink)\\n  .replace('scheme', inline._scheme)\\n  .replace('email', inline._email)\\n  .getRegex();\\n\\ninline._attribute = /\\\\s+[a-zA-Z:_][\\\\w.:-]*(?:\\\\s*=\\\\s*\\\"[^\\\"]*\\\"|\\\\s*=\\\\s*'[^']*'|\\\\s*=\\\\s*[^\\\\s\\\"'=<>`]+)?/;\\n\\ninline.tag = edit(inline.tag)\\n  .replace('comment', inline._comment)\\n  .replace('attribute', inline._attribute)\\n  .getRegex();\\n\\ninline._label = /(?:\\\\[(?:\\\\\\\\.|[^\\\\[\\\\]\\\\\\\\])*\\\\]|\\\\\\\\.|`[^`]*`|[^\\\\[\\\\]\\\\\\\\`])*?/;\\ninline._href = /<(?:\\\\\\\\.|[^\\\\n<>\\\\\\\\])+>|[^\\\\s\\\\x00-\\\\x1f]*/;\\ninline._title = /\\\"(?:\\\\\\\\\\\"?|[^\\\"\\\\\\\\])*\\\"|'(?:\\\\\\\\'?|[^'\\\\\\\\])*'|\\\\((?:\\\\\\\\\\\\)?|[^)\\\\\\\\])*\\\\)/;\\n\\ninline.link = edit(inline.link)\\n  .replace('label', inline._label)\\n  .replace('href', inline._href)\\n  .replace('title', inline._title)\\n  .getRegex();\\n\\ninline.reflink = edit(inline.reflink)\\n  .replace('label', inline._label)\\n  .replace('ref', block._label)\\n  .getRegex();\\n\\ninline.nolink = edit(inline.nolink)\\n  .replace('ref', block._label)\\n  .getRegex();\\n\\ninline.reflinkSearch = edit(inline.reflinkSearch, 'g')\\n  .replace('reflink', inline.reflink)\\n  .replace('nolink', inline.nolink)\\n  .getRegex();\\n\\n/**\\n * Normal Inline Grammar\\n */\\n\\ninline.normal = merge({}, inline);\\n\\n/**\\n * Pedantic Inline Grammar\\n */\\n\\ninline.pedantic = merge({}, inline.normal, {\\n  strong: {\\n    start: /^__|\\\\*\\\\*/,\\n    middle: /^__(?=\\\\S)([\\\\s\\\\S]*?\\\\S)__(?!_)|^\\\\*\\\\*(?=\\\\S)([\\\\s\\\\S]*?\\\\S)\\\\*\\\\*(?!\\\\*)/,\\n    endAst: /\\\\*\\\\*(?!\\\\*)/g,\\n    endUnd: /__(?!_)/g\\n  },\\n  em: {\\n    start: /^_|\\\\*/,\\n    middle: /^()\\\\*(?=\\\\S)([\\\\s\\\\S]*?\\\\S)\\\\*(?!\\\\*)|^_(?=\\\\S)([\\\\s\\\\S]*?\\\\S)_(?!_)/,\\n    endAst: /\\\\*(?!\\\\*)/g,\\n    endUnd: /_(?!_)/g\\n  },\\n  link: edit(/^!?\\\\[(label)\\\\]\\\\((.*?)\\\\)/)\\n    .replace('label', inline._label)\\n    .getRegex(),\\n  reflink: edit(/^!?\\\\[(label)\\\\]\\\\s*\\\\[([^\\\\]]*)\\\\]/)\\n    .replace('label', inline._label)\\n    .getRegex()\\n});\\n\\n/**\\n * GFM Inline Grammar\\n */\\n\\ninline.gfm = merge({}, inline.normal, {\\n  escape: edit(inline.escape).replace('])', '~|])').getRegex(),\\n  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\\n  url: /^((?:ftp|https?):\\\\/\\\\/|www\\\\.)(?:[a-zA-Z0-9\\\\-]+\\\\.?)+[^\\\\s<]*|^email/,\\n  _backpedal: /(?:[^?!.,:;*_~()&]+|\\\\([^)]*\\\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\\n  del: /^(~~?)(?=[^\\\\s~])([\\\\s\\\\S]*?[^\\\\s~])\\\\1(?=[^~]|$)/,\\n  text: /^([`~]+|[^`~])(?:(?= {2,}\\\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\\\/=?_`{\\\\|}~-]+@)|[\\\\s\\\\S]*?(?:(?=[\\\\\\\\<!\\\\[`*~_]|\\\\b_|https?:\\\\/\\\\/|ftp:\\\\/\\\\/|www\\\\.|$)|[^ ](?= {2,}\\\\n)|[^a-zA-Z0-9.!#$%&'*+\\\\/=?_`{\\\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\\\/=?_`{\\\\|}~-]+@)))/\\n});\\n\\ninline.gfm.url = edit(inline.gfm.url, 'i')\\n  .replace('email', inline.gfm._extended_email)\\n  .getRegex();\\n/**\\n * GFM + Line Breaks Inline Grammar\\n */\\n\\ninline.breaks = merge({}, inline.gfm, {\\n  br: edit(inline.br).replace('{2,}', '*').getRegex(),\\n  text: edit(inline.gfm.text)\\n    .replace('\\\\\\\\b_', '\\\\\\\\b_| {2,}\\\\\\\\n')\\n    .replace(/\\\\{2,\\\\}/g, '*')\\n    .getRegex()\\n});\\n\\n/**\\n * smartypants text replacement\\n * @param {string} text\\n */\\nfunction smartypants(text) {\\n  return text\\n    // em-dashes\\n    .replace(/---/g, '\\\\u2014')\\n    // en-dashes\\n    .replace(/--/g, '\\\\u2013')\\n    // opening singles\\n    .replace(/(^|[-\\\\u2014/(\\\\[{\\\"\\\\s])'/g, '$1\\\\u2018')\\n    // closing singles & apostrophes\\n    .replace(/'/g, '\\\\u2019')\\n    // opening doubles\\n    .replace(/(^|[-\\\\u2014/(\\\\[{\\\\u2018\\\\s])\\\"/g, '$1\\\\u201c')\\n    // closing doubles\\n    .replace(/\\\"/g, '\\\\u201d')\\n    // ellipses\\n    .replace(/\\\\.{3}/g, '\\\\u2026');\\n}\\n\\n/**\\n * mangle email addresses\\n * @param {string} text\\n */\\nfunction mangle(text) {\\n  let out = '',\\n    i,\\n    ch;\\n\\n  const l = text.length;\\n  for (i = 0; i < l; i++) {\\n    ch = text.charCodeAt(i);\\n    if (Math.random() > 0.5) {\\n      ch = 'x' + ch.toString(16);\\n    }\\n    out += '&#' + ch + ';';\\n  }\\n\\n  return out;\\n}\\n\\n/**\\n * Block Lexer\\n */\\nclass Lexer {\\n  constructor(options) {\\n    this.tokens = [];\\n    this.tokens.links = Object.create(null);\\n    this.options = options || defaults;\\n    this.options.tokenizer = this.options.tokenizer || new Tokenizer();\\n    this.tokenizer = this.options.tokenizer;\\n    this.tokenizer.options = this.options;\\n    this.tokenizer.lexer = this;\\n    this.inlineQueue = [];\\n    this.state = {\\n      inLink: false,\\n      inRawBlock: false,\\n      top: true\\n    };\\n\\n    const rules = {\\n      block: block.normal,\\n      inline: inline.normal\\n    };\\n\\n    if (this.options.pedantic) {\\n      rules.block = block.pedantic;\\n      rules.inline = inline.pedantic;\\n    } else if (this.options.gfm) {\\n      rules.block = block.gfm;\\n      if (this.options.breaks) {\\n        rules.inline = inline.breaks;\\n      } else {\\n        rules.inline = inline.gfm;\\n      }\\n    }\\n    this.tokenizer.rules = rules;\\n  }\\n\\n  /**\\n   * Expose Rules\\n   */\\n  static get rules() {\\n    return {\\n      block,\\n      inline\\n    };\\n  }\\n\\n  /**\\n   * Static Lex Method\\n   */\\n  static lex(src, options) {\\n    const lexer = new Lexer(options);\\n    return lexer.lex(src);\\n  }\\n\\n  /**\\n   * Static Lex Inline Method\\n   */\\n[end of marked.esm.js]\\n[start of marked.esm.js]\\n/**\\n * marked - a markdown parser\\n * Copyright (c) 2011-2022, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n\\n/**\\n * DO NOT EDIT THIS FILE\\n * The code in this file is generated from files in ./src/\\n */\\n\\nfunction getDefaults() {\\n  return {\\n    async: false,\\n    baseUrl: null,\\n    breaks: false,\\n    extensions: null,\\n    gfm: true,\\n    headerIds: true,\\n    headerPrefix: '',\\n    highlight: null,\\n    langPrefix: 'language-',\\n    mangle: true,\\n    pedantic: false,\\n    renderer: null,\\n    sanitize: false,\\n    sanitizer: null,\\n    silent: false,\\n    smartLists: false,\\n    smartypants: false,\\n    tokenizer: null,\\n    walkTokens: null,\\n    xhtml: false\\n  };\\n}\\n\\nlet defaults = getDefaults();\\n\\nfunction changeDefaults(newDefaults) {\\n  defaults = newDefaults;\\n}\\n\\n/**\\n * Helpers\\n */\\nconst escapeTest = /[&<>\\\"']/;\\nconst escapeReplace = /[&<>\\\"']/g;\\nconst escapeTestNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/;\\nconst escapeReplaceNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/g;\\nconst escapeReplacements = {\\n  '&': '&amp;',\\n  '<': '&lt;',\\n  '>': '&gt;',\\n  '\\\"': '&quot;',\\n  \\\"'\\\": '&#39;'\\n};\\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\\nfunction escape(html, encode) {\\n  if (encode) {\\n    if (escapeTest.test(html)) {\\n      return html.replace(escapeReplace, getEscapeReplacement);\\n    }\\n  } else {\\n    if (escapeTestNoEncode.test(html)) {\\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\\n    }\\n  }\\n\\n  return html;\\n}\\n\\nconst unescapeTest = /&(#(?:\\\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\\\w+));?/ig;\\n\\n/**\\n * @param {string} html\\n */\\nfunction unescape(html) {\\n  // explicitly match decimal, hex, and named HTML entities\\n  return html.replace(unescapeTest, (_, n) => {\\n    n = n.toLowerCase();\\n    if (n === 'colon') return ':';\\n    if (n.charAt(0) === '#') {\\n      return n.charAt(1) === 'x'\\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\\n        : String.fromCharCode(+n.substring(1));\\n    }\\n    return '';\\n  });\\n}\\n\\nconst caret = /(^|[^\\\\[])\\\\^/g;\\n\\n/**\\n * @param {string | RegExp} regex\\n * @param {string} opt\\n */\\nfunction edit(regex, opt) {\\n  regex = typeof regex === 'string' ? regex : regex.source;\\n  opt = opt || '';\\n  const obj = {\\n    replace: (name, val) => {\\n      val = val.source || val;\\n      val = val.replace(caret, '$1');\\n      regex = regex.replace(name, val);\\n      return obj;\\n    },\\n    getRegex: () => {\\n      return new RegExp(regex, opt);\\n    }\\n  };\\n  return obj;\\n}\\n\\nconst nonWordAndColonTest = /[^\\\\w:]/g;\\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\\n\\n/**\\n * @param {boolean} sanitize\\n * @param {string} base\\n * @param {string} href\\n */\\nfunction cleanUrl(sanitize, base, href) {\\n  if (sanitize) {\\n    let prot;\\n    try {\\n      prot = decodeURIComponent(unescape(href))\\n        .replace(nonWordAndColonTest, '')\\n        .toLowerCase();\\n    } catch (e) {\\n      return null;\\n    }\\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\\n      return null;\\n    }\\n  }\\n  if (base && !originIndependentUrl.test(href)) {\\n    href = resolveUrl(base, href);\\n  }\\n  try {\\n    href = encodeURI(href).replace(/%25/g, '%');\\n  } catch (e) {\\n    return null;\\n  }\\n  return href;\\n}\\n\\nconst baseUrls = {};\\nconst justDomain = /^[^:]+:\\\\/*[^/]*$/;\\nconst protocol = /^([^:]+:)[\\\\s\\\\S]*$/;\\nconst domain = /^([^:]+:\\\\/*[^/]*)[\\\\s\\\\S]*$/;\\n\\n/**\\n * @param {string} base\\n * @param {string} href\\n */\\nfunction resolveUrl(base, href) {\\n  if (!baseUrls[' ' + base]) {\\n    // we can ignore everything in base after the last slash of its path component,\\n    // but we might need to add _that_\\n    // https://tools.ietf.org/html/rfc3986#section-3\\n    if (justDomain.test(base)) {\\n      baseUrls[' ' + base] = base + '/';\\n    } else {\\n      baseUrls[' ' + base] = rtrim(base, '/', true);\\n    }\\n  }\\n  base = baseUrls[' ' + base];\\n  const relativeBase = base.indexOf(':') === -1;\\n\\n  if (href.substring(0, 2) === '//') {\\n    if (relativeBase) {\\n      return href;\\n    }\\n    return base.replace(protocol, '$1') + href;\\n  } else if (href.charAt(0) === '/') {\\n    if (relativeBase) {\\n      return href;\\n    }\\n    return base.replace(domain, '$1') + href;\\n  } else {\\n    return base + href;\\n  }\\n}\\n\\nconst noopTest = { exec: function noopTest() {} };\\n\\nfunction merge(obj) {\\n  let i = 1,\\n    target,\\n    key;\\n\\n  for (; i < arguments.length; i++) {\\n    target = arguments[i];\\n    for (key in target) {\\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\\n        obj[key] = target[key];\\n      }\\n    }\\n  }\\n\\n  return obj;\\n}\\n\\nfunction splitCells(tableRow, count) {\\n  // ensure that every cell-delimiting pipe has a space\\n  // before it to distinguish it from an escaped pipe\\n  const row = tableRow.replace(/\\\\|/g, (match, offset, str) => {\\n      let escaped = false,\\n        curr = offset;\\n      while (--curr >= 0 && str[curr] === '\\\\\\\\') escaped = !escaped;\\n      if (escaped) {\\n        // odd number of slashes means | is escaped\\n        // so we leave it alone\\n        return '|';\\n      } else {\\n        // add space before unescaped |\\n        return ' |';\\n      }\\n    }),\\n    cells = row.split(/ \\\\|/);\\n  let i = 0;\\n\\n  // First/last cell in a row cannot be empty if it has no leading/trailing pipe\\n  if (!cells[0].trim()) { cells.shift(); }\\n  if (cells.length > 0 && !cells[cells.length - 1].trim()) { cells.pop(); }\\n\\n  if (cells.length > count) {\\n    cells.splice(count);\\n  } else {\\n    while (cells.length < count) cells.push('');\\n  }\\n\\n  for (; i < cells.length; i++) {\\n    // leading or trailing whitespace is ignored per the gfm spec\\n    cells[i] = cells[i].trim().replace(/\\\\\\\\\\\\|/g, '|');\\n  }\\n  return cells;\\n}\\n\\n/**\\n * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\\n * /c*$/ is vulnerable to REDOS.\\n *\\n * @param {string} str\\n * @param {string} c\\n * @param {boolean} invert Remove suffix of non-c chars instead. Default falsey.\\n */\\nfunction rtrim(str, c, invert) {\\n  const l = str.length;\\n  if (l === 0) {\\n    return '';\\n  }\\n\\n  // Length of suffix matching the invert condition.\\n  let suffLen = 0;\\n\\n  // Step left until we fail to match the invert condition.\\n  while (suffLen < l) {\\n    const currChar = str.charAt(l - suffLen - 1);\\n    if (currChar === c && !invert) {\\n      suffLen++;\\n    } else if (currChar !== c && invert) {\\n      suffLen++;\\n    } else {\\n      break;\\n    }\\n  }\\n\\n  return str.slice(0, l - suffLen);\\n}\\n\\nfunction findClosingBracket(str, b) {\\n  if (str.indexOf(b[1]) === -1) {\\n    return -1;\\n  }\\n  const l = str.length;\\n  let level = 0,\\n    i = 0;\\n  for (; i < l; i++) {\\n    if (str[i] === '\\\\\\\\') {\\n      i++;\\n    } else if (str[i] === b[0]) {\\n      level++;\\n    } else if (str[i] === b[1]) {\\n      level--;\\n      if (level < 0) {\\n        return i;\\n      }\\n    }\\n  }\\n  return -1;\\n}\\n\\nfunction checkSanitizeDeprecation(opt) {\\n  if (opt && opt.sanitize && !opt.silent) {\\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\\n  }\\n}\\n\\n// copied from https://stackoverflow.com/a/5450113/806777\\n/**\\n * @param {string} pattern\\n * @param {number} count\\n */\\nfunction repeatString(pattern, count) {\\n  if (count < 1) {\\n    return '';\\n  }\\n  let result = '';\\n  while (count > 1) {\\n    if (count & 1) {\\n      result += pattern;\\n    }\\n    count >>= 1;\\n    pattern += pattern;\\n  }\\n  return result + pattern;\\n}\\n\\nfunction outputLink(cap, link, raw, lexer) {\\n  const href = link.href;\\n  const title = link.title ? escape(link.title) : null;\\n  const text = cap[1].replace(/\\\\\\\\([\\\\[\\\\]])/g, '$1');\\n\\n  if (cap[0].charAt(0) !== '!') {\\n    lexer.state.inLink = true;\\n    const token = {\\n      type: 'link',\\n      raw,\\n      href,\\n      title,\\n      text,\\n      tokens: lexer.inlineTokens(text)\\n    };\\n    lexer.state.inLink = false;\\n    return token;\\n  }\\n  return {\\n    type: 'image',\\n    raw,\\n    href,\\n    title,\\n    text: escape(text)\\n  };\\n}\\n\\nfunction indentCodeCompensation(raw, text) {\\n  const matchIndentToCode = raw.match(/^(\\\\s+)(?:```)/);\\n\\n  if (matchIndentToCode === null) {\\n    return text;\\n  }\\n\\n  const indentToCode = matchIndentToCode[1];\\n\\n  return text\\n    .split('\\\\n')\\n    .map(node => {\\n      const matchIndentInNode = node.match(/^\\\\s+/);\\n      if (matchIndentInNode === null) {\\n        return node;\\n      }\\n\\n      const [indentInNode] = matchIndentInNode;\\n\\n      if (indentInNode.length >= indentToCode.length) {\\n        return node.slice(indentToCode.length);\\n      }\\n\\n      return node;\\n    })\\n    .join('\\\\n');\\n}\\n\\n/**\\n * Tokenizer\\n */\\nclass Tokenizer {\\n  constructor(options) {\\n    this.options = options || defaults;\\n  }\\n\\n  space(src) {\\n    const cap = this.rules.block.newline.exec(src);\\n    if (cap && cap[0].length > 0) {\\n      return {\\n        type: 'space',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  code(src) {\\n    const cap = this.rules.block.code.exec(src);\\n    if (cap) {\\n      const text = cap[0].replace(/^ {1,4}/gm, '');\\n      return {\\n        type: 'code',\\n        raw: cap[0],\\n        codeBlockStyle: 'indented',\\n        text: !this.options.pedantic\\n          ? rtrim(text, '\\\\n')\\n          : text\\n      };\\n    }\\n  }\\n\\n  fences(src) {\\n    const cap = this.rules.block.fences.exec(src);\\n    if (cap) {\\n      const raw = cap[0];\\n      const text = indentCodeCompensation(raw, cap[3] || '');\\n\\n      return {\\n        type: 'code',\\n        raw,\\n        lang: cap[2] ? cap[2].trim() : cap[2],\\n        text\\n      };\\n    }\\n  }\\n\\n  heading(src) {\\n    const cap = this.rules.block.heading.exec(src);\\n    if (cap) {\\n      let text = cap[2].trim();\\n\\n      // remove trailing #s\\n      if (/#$/.test(text)) {\\n        const trimmed = rtrim(text, '#');\\n        if (this.options.pedantic) {\\n          text = trimmed.trim();\\n        } else if (!trimmed || / $/.test(trimmed)) {\\n          // CommonMark requires space before trailing #s\\n          text = trimmed.trim();\\n        }\\n      }\\n\\n      return {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[1].length,\\n        text,\\n        tokens: this.lexer.inline(text)\\n      };\\n    }\\n  }\\n\\n  hr(src) {\\n    const cap = this.rules.block.hr.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'hr',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  blockquote(src) {\\n    const cap = this.rules.block.blockquote.exec(src);\\n    if (cap) {\\n      const text = cap[0].replace(/^ *>[ \\\\t]?/gm, '');\\n\\n      return {\\n        type: 'blockquote',\\n        raw: cap[0],\\n        tokens: this.lexer.blockTokens(text, []),\\n        text\\n      };\\n    }\\n  }\\n\\n  list(src) {\\n    let cap = this.rules.block.list.exec(src);\\n    if (cap) {\\n      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine,\\n        line, nextLine, rawLine, itemContents, endEarly;\\n\\n      let bull = cap[1].trim();\\n      const isordered = bull.length > 1;\\n\\n      const list = {\\n        type: 'list',\\n        raw: '',\\n        ordered: isordered,\\n        start: isordered ? +bull.slice(0, -1) : '',\\n        loose: false,\\n        items: []\\n      };\\n\\n      bull = isordered ? `\\\\\\\\d{1,9}\\\\\\\\${bull.slice(-1)}` : `\\\\\\\\${bull}`;\\n\\n      if (this.options.pedantic) {\\n        bull = isordered ? bull : '[*+-]';\\n      }\\n\\n      // Get next list item\\n      const itemRegex = new RegExp(`^( {0,3}${bull})((?:[\\\\t ][^\\\\\\\\n]*)?(?:\\\\\\\\n|$))`);\\n\\n      // Check if current bullet point can start a new List Item\\n      while (src) {\\n        endEarly = false;\\n        if (!(cap = itemRegex.exec(src))) {\\n          break;\\n        }\\n\\n        if (this.rules.block.hr.test(src)) { // End list if bullet was actually HR (possibly move into itemRegex?)\\n          break;\\n        }\\n\\n        raw = cap[0];\\n        src = src.substring(raw.length);\\n\\n        line = cap[2].split('\\\\n', 1)[0];\\n        nextLine = src.split('\\\\n', 1)[0];\\n\\n        if (this.options.pedantic) {\\n          indent = 2;\\n          itemContents = line.trimLeft();\\n        } else {\\n          indent = cap[2].search(/[^ ]/); // Find first non-space char\\n          indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\\n          itemContents = line.slice(indent);\\n          indent += cap[1].length;\\n        }\\n\\n        blankLine = false;\\n\\n        if (!line && /^ *$/.test(nextLine)) { // Items begin with at most one blank line\\n          raw += nextLine + '\\\\n';\\n          src = src.substring(nextLine.length + 1);\\n          endEarly = true;\\n        }\\n\\n        if (!endEarly) {\\n          const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\\\\\d{1,9}[.)])((?: [^\\\\\\\\n]*)?(?:\\\\\\\\n|$))`);\\n          const hrRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\\\\\* *){3,})(?:\\\\\\\\n+|$)`);\\n          const fencesBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\\\\`\\\\`\\\\`|~~~)`);\\n          const headingBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`);\\n\\n          // Check if following lines should be included in List Item\\n          while (src) {\\n            rawLine = src.split('\\\\n', 1)[0];\\n            line = rawLine;\\n\\n            // Re-align to follow commonmark nesting rules\\n            if (this.options.pedantic) {\\n              line = line.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\\n            }\\n\\n            // End list item if found code fences\\n            if (fencesBeginRegex.test(line)) {\\n              break;\\n            }\\n\\n            // End list item if found start of new heading\\n            if (headingBeginRegex.test(line)) {\\n              break;\\n            }\\n\\n            // End list item if found start of new bullet\\n            if (nextBulletRegex.test(line)) {\\n              break;\\n            }\\n\\n            // Horizontal rule found\\n            if (hrRegex.test(src)) {\\n              break;\\n            }\\n\\n            if (line.search(/[^ ]/) >= indent || !line.trim()) { // Dedent if possible\\n              itemContents += '\\\\n' + line.slice(indent);\\n            } else if (!blankLine) { // Until blank line, item doesn't need indentation\\n              itemContents += '\\\\n' + line;\\n            } else { // Otherwise, improper indentation ends this item\\n              break;\\n            }\\n\\n            if (!blankLine && !line.trim()) { // Check if current line is blank\\n              blankLine = true;\\n            }\\n\\n            raw += rawLine + '\\\\n';\\n            src = src.substring(rawLine.length + 1);\\n          }\\n        }\\n\\n        if (!list.loose) {\\n          // If the previous item ended with a blank line, the list is loose\\n          if (endsWithBlankLine) {\\n            list.loose = true;\\n          } else if (/\\\\n *\\\\n *$/.test(raw)) {\\n            endsWithBlankLine = true;\\n          }\\n        }\\n\\n        // Check for task list items\\n        if (this.options.gfm) {\\n          istask = /^\\\\[[ xX]\\\\] /.exec(itemContents);\\n          if (istask) {\\n            ischecked = istask[0] !== '[ ] ';\\n            itemContents = itemContents.replace(/^\\\\[[ xX]\\\\] +/, '');\\n          }\\n        }\\n\\n        list.items.push({\\n          type: 'list_item',\\n          raw,\\n          task: !!istask,\\n          checked: ischecked,\\n          loose: false,\\n          text: itemContents\\n        });\\n\\n        list.raw += raw;\\n      }\\n\\n      // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\\n      list.items[list.items.length - 1].raw = raw.trimRight();\\n      list.items[list.items.length - 1].text = itemContents.trimRight();\\n      list.raw = list.raw.trimRight();\\n\\n      const l = list.items.length;\\n\\n      // Item child tokens handled here at end because we needed to have the final item to trim it first\\n      for (i = 0; i < l; i++) {\\n        this.lexer.state.top = false;\\n        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\\n        const spacers = list.items[i].tokens.filter(t => t.type === 'space');\\n        const hasMultipleLineBreaks = spacers.every(t => {\\n          const chars = t.raw.split('');\\n          let lineBreaks = 0;\\n          for (const char of chars) {\\n            if (char === '\\\\n') {\\n              lineBreaks += 1;\\n            }\\n            if (lineBreaks > 1) {\\n              return true;\\n            }\\n          }\\n\\n          return false;\\n        });\\n\\n        if (!list.loose && spacers.length && hasMultipleLineBreaks) {\\n          // Having a single line break doesn't mean a list is loose. A single line break is terminating the last list item\\n          list.loose = true;\\n          list.items[i].loose = true;\\n        }\\n      }\\n\\n      return list;\\n    }\\n  }\\n\\n  html(src) {\\n    const cap = this.rules.block.html.exec(src);\\n    if (cap) {\\n      const token = {\\n        type: 'html',\\n        raw: cap[0],\\n        pre: !this.options.sanitizer\\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\\n        text: cap[0]\\n      };\\n      if (this.options.sanitize) {\\n        const text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\\n        token.type = 'paragraph';\\n        token.text = text;\\n        token.tokens = this.lexer.inline(text);\\n      }\\n      return token;\\n    }\\n  }\\n\\n  def(src) {\\n    const cap = this.rules.block.def.exec(src);\\n    if (cap) {\\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\\n      const tag = cap[1].toLowerCase().replace(/\\\\s+/g, ' ');\\n      return {\\n        type: 'def',\\n        tag,\\n        raw: cap[0],\\n        href: cap[2],\\n        title: cap[3]\\n      };\\n    }\\n  }\\n\\n  table(src) {\\n    const cap = this.rules.block.table.exec(src);\\n    if (cap) {\\n      const item = {\\n        type: 'table',\\n        header: splitCells(cap[1]).map(c => { return { text: c }; }),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        rows: cap[3] && cap[3].trim() ? cap[3].replace(/\\\\n[ \\\\t]*$/, '').split('\\\\n') : []\\n      };\\n\\n      if (item.header.length === item.align.length) {\\n        item.raw = cap[0];\\n\\n        let l = item.align.length;\\n        let i, j, k, row;\\n        for (i = 0; i < l; i++) {\\n          if (/^ *-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'right';\\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'center';\\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\\n            item.align[i] = 'left';\\n          } else {\\n            item.align[i] = null;\\n          }\\n        }\\n\\n        l = item.rows.length;\\n        for (i = 0; i < l; i++) {\\n          item.rows[i] = splitCells(item.rows[i], item.header.length).map(c => { return { text: c }; });\\n        }\\n\\n        // parse child tokens inside headers and cells\\n\\n        // header child tokens\\n        l = item.header.length;\\n        for (j = 0; j < l; j++) {\\n          item.header[j].tokens = this.lexer.inline(item.header[j].text);\\n        }\\n\\n        // cell child tokens\\n        l = item.rows.length;\\n        for (j = 0; j < l; j++) {\\n          row = item.rows[j];\\n          for (k = 0; k < row.length; k++) {\\n            row[k].tokens = this.lexer.inline(row[k].text);\\n          }\\n        }\\n\\n        return item;\\n      }\\n    }\\n  }\\n\\n  lheading(src) {\\n    const cap = this.rules.block.lheading.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\\n        text: cap[1],\\n        tokens: this.lexer.inline(cap[1])\\n      };\\n    }\\n  }\\n\\n  paragraph(src) {\\n    const cap = this.rules.block.paragraph.exec(src);\\n    if (cap) {\\n      const text = cap[1].charAt(cap[1].length - 1) === '\\\\n'\\n        ? cap[1].slice(0, -1)\\n        : cap[1];\\n      return {\\n        type: 'paragraph',\\n        raw: cap[0],\\n        text,\\n        tokens: this.lexer.inline(text)\\n      };\\n    }\\n  }\\n\\n  text(src) {\\n    const cap = this.rules.block.text.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'text',\\n        raw: cap[0],\\n        text: cap[0],\\n        tokens: this.lexer.inline(cap[0])\\n      };\\n    }\\n  }\\n\\n  escape(src) {\\n    const cap = this.rules.inline.escape.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'escape',\\n        raw: cap[0],\\n        text: escape(cap[1])\\n      };\\n    }\\n  }\\n\\n  tag(src) {\\n    const cap = this.rules.inline.tag.exec(src);\\n    if (cap) {\\n      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\\n        this.lexer.state.inLink = true;\\n      } else if (this.lexer.state.inLink && /^<\\\\/a>/i.test(cap[0])) {\\n        this.lexer.state.inLink = false;\\n      }\\n      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        this.lexer.state.inRawBlock = true;\\n      } else if (this.lexer.state.inRawBlock && /^<\\\\/(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        this.lexer.state.inRawBlock = false;\\n      }\\n\\n      return {\\n        type: this.options.sanitize\\n          ? 'text'\\n          : 'html',\\n        raw: cap[0],\\n        inLink: this.lexer.state.inLink,\\n        inRawBlock: this.lexer.state.inRawBlock,\\n        text: this.options.sanitize\\n          ? (this.options.sanitizer\\n            ? this.options.sanitizer(cap[0])\\n            : escape(cap[0]))\\n          : cap[0]\\n      };\\n    }\\n  }\\n\\n  link(src) {\\n    const cap = this.rules.inline.link.exec(src);\\n    if (cap) {\\n      const trimmedUrl = cap[2].trim();\\n      if (!this.options.pedantic && /^</.test(trimmedUrl)) {\\n        // commonmark requires matching angle brackets\\n        if (!(/>$/.test(trimmedUrl))) {\\n          return;\\n        }\\n\\n        // ending angle bracket cannot be escaped\\n        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\\\\\');\\n        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\\n          return;\\n        }\\n      } else {\\n        // find closing parenthesis\\n        const lastParenIndex = findClosingBracket(cap[2], '()');\\n        if (lastParenIndex > -1) {\\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\\n          const linkLen = start + cap[1].length + lastParenIndex;\\n          cap[2] = cap[2].substring(0, lastParenIndex);\\n          cap[0] = cap[0].substring(0, linkLen).trim();\\n          cap[3] = '';\\n        }\\n      }\\n      let href = cap[2];\\n      let title = '';\\n      if (this.options.pedantic) {\\n        // split pedantic href and title\\n        const link = /^([^'\\\"]*[^\\\\s])\\\\s+(['\\\"])(.*)\\\\2/.exec(href);\\n\\n        if (link) {\\n          href = link[1];\\n          title = link[3];\\n        }\\n      } else {\\n        title = cap[3] ? cap[3].slice(1, -1) : '';\\n      }\\n\\n      href = href.trim();\\n      if (/^</.test(href)) {\\n        if (this.options.pedantic && !(/>$/.test(trimmedUrl))) {\\n          // pedantic allows starting angle bracket without ending angle bracket\\n          href = href.slice(1);\\n        } else {\\n[end of marked.esm.js]\\n[start of em_list_links.md]\\n- italic\\n  - [*named link*][some-url]\\n  - *[named link][some-url]*\\n  - [_named link_][some-url]\\n  - _[named link][some-url]_\\n- bold\\n  - [**named link**][some-url]\\n  - **[named link][some-url]**\\n  - [__named link__][some-url]\\n  - __[named link][some-url]__\\n- bold italic\\n  - [***named link***][some-url]\\n  - ***[named link][some-url]***\\n  - [___named link___][some-url]\\n  - ___[named link][some-url]___\\n  - [*__named link__*][some-url]\\n  - [__*named link*__][some-url]\\n  - __*[named link][some-url]*__\\n- code\\n  - [`named link`][some-url]\\n- code italic\\n  - *[`named link`][some-url]*\\n  - [*`named link`*][some-url]\\n  - _[`named link`][some-url]_\\n  - [_`named link`_][some-url]\\n- code bold\\n  - **[`named link`][some-url]**\\n  - [**`named link`**][some-url]\\n  - __[`named link`][some-url]__\\n  - [__`named link`__][some-url]\\n- code bold italic\\n  - [***`named link`***][some-url]\\n  - ***[`named link`][some-url]***\\n  - [___`named link`___][some-url]\\n  - ___[`named link`][some-url]___\\n  - [*__`named link`__*][some-url]\\n  - [__*`named link`*__][some-url]\\n  - __*[`named link`][some-url]*__\\n\\n[some-url]: https://www.google.com\\n[end of em_list_links.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "Bug_report.md",
        "nested_code.md",
        "marked.esm.js",
        "marked.esm.js",
        "em_list_links.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "e249b6c5-ca31-4ba8-b158-4175608652a3",
        "score": 0.01639344262295082,
        "payload": {
          "text": "---\nname: Bug report\nabout: Marked says it does this thing but does not\n\n---\n**Marked version:**\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\n<!--\n1. [Marked Demo](https://marked.js.org/demo/)\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\n-->\n\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\n<!--\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\n3. Actual output (or error) is...\n-->\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n",
          "filepath": "data/repos/markedjs/marked-4.1/.github/ISSUE_TEMPLATE/Bug_report.md",
          "repo": "markedjs/marked",
          "version": "4.1",
          "chunk_index": 0
        }
      },
      {
        "id": "d13bf560-17b7-4493-8fbc-7d23672d19b6",
        "score": 0.016129032258064516,
        "payload": {
          "text": "````` hi ther `` ok ``` `````\n\n`` ` ``\n\n``There is a literal backtick (`) here.``\n\nA backtick-delimited string in a code span: `` `foo` ``\n\nPlease don't use any `<blink>` tags.",
          "filepath": "data/repos/markedjs/marked-4.1/test/specs/new/nested_code.md",
          "repo": "markedjs/marked",
          "version": "4.1",
          "chunk_index": 0
        }
      },
      {
        "id": "950cfd8f-4aa2-4b1f-b733-1a566deee167",
        "score": 0.015873015873015872,
        "payload": {
          "text": "          href = href.slice(1, -1);\n        }\n      }\n      return outputLink(cap, {\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n      }, cap[0], this.lexer);\n    }\n  }\n\n  reflink(src, links) {\n    let cap;\n    if ((cap = this.rules.inline.reflink.exec(src))\n        || (cap = this.rules.inline.nolink.exec(src))) {\n      let link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = links[link.toLowerCase()];\n      if (!link || !link.href) {\n        const text = cap[0].charAt(0);\n        return {\n          type: 'text',\n          raw: text,\n          text\n        };\n      }\n      return outputLink(cap, link, cap[0], this.lexer);\n    }\n  }\n\n  emStrong(src, maskedSrc, prevChar = '') {\n    let match = this.rules.inline.emStrong.lDelim.exec(src);\n    if (!match) return;\n\n    // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n    if (match[3] && prevChar.match(/[\\p{L}\\p{N}]/u)) return;\n\n    const nextChar = match[1] || match[2] || '';\n\n    if (!nextChar || (nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar)))) {\n      const lLength = match[0].length - 1;\n      let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;\n\n      const endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\n      endReg.lastIndex = 0;\n\n      // Clip maskedSrc to same section of string as src (move to lexer?)\n      maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n\n      while ((match = endReg.exec(maskedSrc)) != null) {\n        rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n\n        if (!rDelim) continue; // skip single * in __abc*abc__\n\n        rLength = rDelim.length;\n\n        if (match[3] || match[4]) { // found another Left Delim\n          delimTotal += rLength;\n          continue;\n        } else if (match[5] || match[6]) { // either Left or Right Delim\n          if (lLength % 3 && !((lLength + rLength) % 3)) {\n            midDelimTotal += rLength;\n            continue; // CommonMark Emphasis Rules 9-10\n          }\n        }\n\n        delimTotal -= rLength;\n\n        if (delimTotal > 0) continue; // Haven't found enough closing delimiters\n\n        // Remove extra characters. *a*** -> *a*\n        rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);\n\n        // Create `em` if smallest delimiter has odd char count. *a***\n        if (Math.min(lLength, rLength) % 2) {\n          const text = src.slice(1, lLength + match.index + rLength);\n          return {\n            type: 'em',\n            raw: src.slice(0, lLength + match.index + rLength + 1),\n            text,\n            tokens: this.lexer.inlineTokens(text)\n          };\n        }\n\n        // Create 'strong' if smallest delimiter has even char count. **a***\n        const text = src.slice(2, lLength + match.index + rLength - 1);\n        return {\n          type: 'strong',\n          raw: src.slice(0, lLength + match.index + rLength + 1),\n          text,\n          tokens: this.lexer.inlineTokens(text)\n        };\n      }\n    }\n  }\n\n  codespan(src) {\n    const cap = this.rules.inline.code.exec(src);\n    if (cap) {\n      let text = cap[2].replace(/\\n/g, ' ');\n      const hasNonSpaceChars = /[^ ]/.test(text);\n      const hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n        text = text.substring(1, text.length - 1);\n      }\n      text = escape(text, true);\n      return {\n        type: 'codespan',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n\n  br(src) {\n    const cap = this.rules.inline.br.exec(src);\n    if (cap) {\n      return {\n        type: 'br',\n        raw: cap[0]\n      };\n    }\n  }\n\n  del(src) {\n    const cap = this.rules.inline.del.exec(src);\n    if (cap) {\n      return {\n        type: 'del',\n        raw: cap[0],\n        text: cap[2],\n        tokens: this.lexer.inlineTokens(cap[2])\n      };\n    }\n  }\n\n  autolink(src, mangle) {\n    const cap = this.rules.inline.autolink.exec(src);\n    if (cap) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\n        href = 'mailto:' + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n\n  url(src, mangle) {\n    let cap;\n    if (cap = this.rules.inline.url.exec(src)) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\n        href = 'mailto:' + text;\n      } else {\n        // do extended autolink path validation\n        let prevCapZero;\n        do {\n          prevCapZero = cap[0];\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n        } while (prevCapZero !== cap[0]);\n        text = escape(cap[0]);\n        if (cap[1] === 'www.') {\n          href = 'http://' + text;\n        } else {\n          href = text;\n        }\n      }\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n\n  inlineText(src, smartypants) {\n    const cap = this.rules.inline.text.exec(src);\n    if (cap) {\n      let text;\n      if (this.lexer.state.inRawBlock) {\n        text = this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0];\n      } else {\n        text = escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\n      }\n      return {\n        type: 'text',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n}\n\n/**\n * Block-Level Grammar\n */\nconst block = {\n  newline: /^(?: *(?:\\n|$))+/,\n  code: /^( {4}[^\\n]+(?:\\n(?: *(?:\\n|$))*)?)+/,\n  fences: /^ {0,3}(`{3,}(?=[^`\\n]*\\n)|~{3,})([^\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/,\n  hr: /^ {0,3}((?:-[\\t ]*){3,}|(?:_[ \\t]*){3,}|(?:\\*[ \\t]*){3,})(?:\\n+|$)/,\n  heading: /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,\n  blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n  list: /^( {0,3}bull)([ \\t][^\\n]+?)?(?:\\n|$)/,\n  html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (6)\n    + '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) open tag\n    + '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) closing tag\n    + ')',\n  def: /^ {0,3}\\[(label)\\]: *(?:\\n *)?<?([^\\s>]+)>?(?:(?: +(?:\\n *)?| *\\n *)(title))? *(?:\\n+|$)/,\n  table: noopTest,\n  lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n  // regex template, placeholders will be replaced according to different paragraph\n  // interruption rules of commonmark and the original markdown spec:\n  _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/,\n  text: /^[^\\n]+/\n};\n\nblock._label = /(?!\\s*\\])(?:\\\\.|[^\\[\\]\\\\])+/;\nblock._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\nblock.def = edit(block.def)\n  .replace('label', block._label)\n  .replace('title', block._title)\n  .getRegex();\n\nblock.bullet = /(?:[*+-]|\\d{1,9}[.)])/;\nblock.listItemStart = edit(/^( *)(bull) */)\n  .replace('bull', block.bullet)\n  .getRegex();\n\nblock.list = edit(block.list)\n  .replace(/bull/g, block.bullet)\n  .replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))')\n  .replace('def', '\\\\n+(?=' + block.def.source + ')')\n  .getRegex();\n\nblock._tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n  + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n  + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n  + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n  + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'\n  + '|track|ul';\nblock._comment = /<!--(?!-?>)[\\s\\S]*?(?:-->|$)/;\nblock.html = edit(block.html, 'i')\n  .replace('comment', block._comment)\n  .replace('tag', block._tag)\n  .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n  .getRegex();\n\nblock.paragraph = edit(block._paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('|table', '')\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.blockquote = edit(block.blockquote)\n  .replace('paragraph', block.paragraph)\n  .getRegex();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  table: '^ *([^\\\\n ].*\\\\|.*)\\\\n' // Header\n    + ' {0,3}(?:\\\\| *)?(:?-+:? *(?:\\\\| *:?-+:? *)*)(?:\\\\| *)?' // Align\n    + '(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)' // Cells\n});\n\nblock.gfm.table = edit(block.gfm.table)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('blockquote', ' {0,3}>')\n  .replace('code', ' {4}[^\\\\n]')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.gfm.paragraph = edit(block._paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('table', block.gfm.table) // interrupt paragraphs with table\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n/**\n * Pedantic grammar (original John Gruber's loose markdown specification)\n */\n\nblock.pedantic = merge({}, block.normal, {\n  html: edit(\n    '^ *(?:comment *(?:\\\\n|\\\\s*$)'\n    + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n    .replace('comment', block._comment)\n    .replace(/tag/g, '(?!(?:'\n      + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n      + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n      + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n    .getRegex(),\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n  heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n  fences: noopTest, // fences not supported\n  paragraph: edit(block.normal._paragraph)\n    .replace('hr', block.hr)\n    .replace('heading', ' *#{1,6} *[^\\n]')\n    .replace('lheading', block.lheading)\n    .replace('blockquote', ' {0,3}>')\n    .replace('|fences', '')\n    .replace('|list', '')\n    .replace('|html', '')\n    .getRegex()\n});\n\n/**\n * Inline-Level Grammar\n */\nconst inline = {\n  escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n  autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n  url: noopTest,\n  tag: '^comment'\n    + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>', // CDATA section\n  link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n  reflink: /^!?\\[(label)\\]\\[(ref)\\]/,\n  nolink: /^!?\\[(ref)\\](?:\\[\\])?/,\n  reflinkSearch: 'reflink|nolink(?!\\\\()',\n  emStrong: {\n    lDelim: /^(?:\\*+(?:([punct_])|[^\\s*]))|^_+(?:([punct*])|([^\\s_]))/,\n    //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.\n    //          () Skip orphan inside strong  () Consume to delim (1) #***                (2) a***#, a***                   (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a\n    rDelimAst: /^[^_*]*?\\_\\_[^_*]*?\\*[^_*]*?(?=\\_\\_)|[^*]+(?=[^*])|[punct_](\\*+)(?=[\\s]|$)|[^punct*_\\s](\\*+)(?=[punct_\\s]|$)|[punct_\\s](\\*+)(?=[^punct*_\\s])|[\\s](\\*+)(?=[punct_])|[punct_](\\*+)(?=[punct_])|[^punct*_\\s](\\*+)(?=[^punct*_\\s])/,\n    rDelimUnd: /^[^_*]*?\\*\\*[^_*]*?\\_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|[punct*](\\_+)(?=[\\s]|$)|[^punct*_\\s](\\_+)(?=[punct*\\s]|$)|[punct*\\s](\\_+)(?=[^punct*_\\s])|[\\s](\\_+)(?=[punct*])|[punct*](\\_+)(?=[punct*])/ // ^- Not allowed for _\n  },\n  code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n  br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n  del: noopTest,\n  text: /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,\n  punctuation: /^([\\spunctuation])/\n};\n\n// list of punctuation marks from CommonMark spec\n// without * and _ to handle the different emphasis markers * and _\ninline._punctuation = '!\"#$%&\\'()+\\\\-.,/:;<=>?@\\\\[\\\\]`^{|}~';\ninline.punctuation = edit(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex();\n\n// sequences em should skip over [title](link), `code`, <html>\ninline.blockSkip = /\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>/g;\ninline.escapedEmSt = /\\\\\\*|\\\\_/g;\n\ninline._comment = edit(block._comment).replace('(?:-->|$)', '-->').getRegex();\n\ninline.emStrong.lDelim = edit(inline.emStrong.lDelim)\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline.emStrong.rDelimAst = edit(inline.emStrong.rDelimAst, 'g')\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline.emStrong.rDelimUnd = edit(inline.emStrong.rDelimUnd, 'g')\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n\ninline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\ninline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\ninline.autolink = edit(inline.autolink)\n  .replace('scheme', inline._scheme)\n  .replace('email', inline._email)\n  .getRegex();\n\ninline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n\ninline.tag = edit(inline.tag)\n  .replace('comment', inline._comment)\n  .replace('attribute', inline._attribute)\n  .getRegex();\n\ninline._label = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\ninline._href = /<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/;\ninline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n\ninline.link = edit(inline.link)\n  .replace('label', inline._label)\n  .replace('href', inline._href)\n  .replace('title', inline._title)\n  .getRegex();\n\ninline.reflink = edit(inline.reflink)\n  .replace('label', inline._label)\n  .replace('ref', block._label)\n  .getRegex();\n\ninline.nolink = edit(inline.nolink)\n  .replace('ref', block._label)\n  .getRegex();\n\ninline.reflinkSearch = edit(inline.reflinkSearch, 'g')\n  .replace('reflink', inline.reflink)\n  .replace('nolink', inline.nolink)\n  .getRegex();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: {\n    start: /^__|\\*\\*/,\n    middle: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n    endAst: /\\*\\*(?!\\*)/g,\n    endUnd: /__(?!_)/g\n  },\n  em: {\n    start: /^_|\\*/,\n    middle: /^()\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)|^_(?=\\S)([\\s\\S]*?\\S)_(?!_)/,\n    endAst: /\\*(?!\\*)/g,\n    endUnd: /_(?!_)/g\n  },\n  link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n    .replace('label', inline._label)\n    .getRegex(),\n  reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n    .replace('label', inline._label)\n    .getRegex()\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n  url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n  _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n  del: /^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,\n  text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/\n});\n\ninline.gfm.url = edit(inline.gfm.url, 'i')\n  .replace('email', inline.gfm._extended_email)\n  .getRegex();\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: edit(inline.br).replace('{2,}', '*').getRegex(),\n  text: edit(inline.gfm.text)\n    .replace('\\\\b_', '\\\\b_| {2,}\\\\n')\n    .replace(/\\{2,\\}/g, '*')\n    .getRegex()\n});\n\n/**\n * smartypants text replacement\n * @param {string} text\n */\nfunction smartypants(text) {\n  return text\n    // em-dashes\n    .replace(/---/g, '\\u2014')\n    // en-dashes\n    .replace(/--/g, '\\u2013')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n}\n\n/**\n * mangle email addresses\n * @param {string} text\n */\nfunction mangle(text) {\n  let out = '',\n    i,\n    ch;\n\n  const l = text.length;\n  for (i = 0; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n}\n\n/**\n * Block Lexer\n */\nclass Lexer {\n  constructor(options) {\n    this.tokens = [];\n    this.tokens.links = Object.create(null);\n    this.options = options || defaults;\n    this.options.tokenizer = this.options.tokenizer || new Tokenizer();\n    this.tokenizer = this.options.tokenizer;\n    this.tokenizer.options = this.options;\n    this.tokenizer.lexer = this;\n    this.inlineQueue = [];\n    this.state = {\n      inLink: false,\n      inRawBlock: false,\n      top: true\n    };\n\n    const rules = {\n      block: block.normal,\n      inline: inline.normal\n    };\n\n    if (this.options.pedantic) {\n      rules.block = block.pedantic;\n      rules.inline = inline.pedantic;\n    } else if (this.options.gfm) {\n      rules.block = block.gfm;\n      if (this.options.breaks) {\n        rules.inline = inline.breaks;\n      } else {\n        rules.inline = inline.gfm;\n      }\n    }\n    this.tokenizer.rules = rules;\n  }\n\n  /**\n   * Expose Rules\n   */\n  static get rules() {\n    return {\n      block,\n      inline\n    };\n  }\n\n  /**\n   * Static Lex Method\n   */\n  static lex(src, options) {\n    const lexer = new Lexer(options);\n    return lexer.lex(src);\n  }\n\n  /**\n   * Static Lex Inline Method\n   */",
          "filepath": "data/repos/markedjs/marked-4.1/lib/marked.esm.js",
          "repo": "markedjs/marked",
          "version": "4.1",
          "chunk_index": 1
        }
      },
      {
        "id": "42494dc9-d1c1-4e22-864d-992ac9734107",
        "score": 0.015625,
        "payload": {
          "text": "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2022, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\nfunction getDefaults() {\n  return {\n    async: false,\n    baseUrl: null,\n    breaks: false,\n    extensions: null,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: null,\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartLists: false,\n    smartypants: false,\n    tokenizer: null,\n    walkTokens: null,\n    xhtml: false\n  };\n}\n\nlet defaults = getDefaults();\n\nfunction changeDefaults(newDefaults) {\n  defaults = newDefaults;\n}\n\n/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = /[&<>\"']/g;\nconst escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\nconst escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\nconst escapeReplacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape(html, encode) {\n  if (encode) {\n    if (escapeTest.test(html)) {\n      return html.replace(escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (escapeTestNoEncode.test(html)) {\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\n/**\n * @param {string} html\n */\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nconst caret = /(^|[^\\[])\\^/g;\n\n/**\n * @param {string | RegExp} regex\n * @param {string} opt\n */\nfunction edit(regex, opt) {\n  regex = typeof regex === 'string' ? regex : regex.source;\n  opt = opt || '';\n  const obj = {\n    replace: (name, val) => {\n      val = val.source || val;\n      val = val.replace(caret, '$1');\n      regex = regex.replace(name, val);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(regex, opt);\n    }\n  };\n  return obj;\n}\n\nconst nonWordAndColonTest = /[^\\w:]/g;\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n/**\n * @param {boolean} sanitize\n * @param {string} base\n * @param {string} href\n */\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    let prot;\n    try {\n      prot = decodeURIComponent(unescape(href))\n        .replace(nonWordAndColonTest, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nconst baseUrls = {};\nconst justDomain = /^[^:]+:\\/*[^/]*$/;\nconst protocol = /^([^:]+:)[\\s\\S]*$/;\nconst domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\n/**\n * @param {string} base\n * @param {string} href\n */\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (justDomain.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n  const relativeBase = base.indexOf(':') === -1;\n\n  if (href.substring(0, 2) === '//') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(protocol, '$1') + href;\n  } else if (href.charAt(0) === '/') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(domain, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\n\nconst noopTest = { exec: function noopTest() {} };\n\nfunction merge(obj) {\n  let i = 1,\n    target,\n    key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n      let escaped = false,\n        curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(/ \\|/);\n  let i = 0;\n\n  // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n  if (!cells[0].trim()) { cells.shift(); }\n  if (cells.length > 0 && !cells[cells.length - 1].trim()) { cells.pop(); }\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n/**\n * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n * /c*$/ is vulnerable to REDOS.\n *\n * @param {string} str\n * @param {string} c\n * @param {boolean} invert Remove suffix of non-c chars instead. Default falsey.\n */\nfunction rtrim(str, c, invert) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.slice(0, l - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  const l = str.length;\n  let level = 0,\n    i = 0;\n  for (; i < l; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkSanitizeDeprecation(opt) {\n  if (opt && opt.sanitize && !opt.silent) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n}\n\n// copied from https://stackoverflow.com/a/5450113/806777\n/**\n * @param {string} pattern\n * @param {number} count\n */\nfunction repeatString(pattern, count) {\n  if (count < 1) {\n    return '';\n  }\n  let result = '';\n  while (count > 1) {\n    if (count & 1) {\n      result += pattern;\n    }\n    count >>= 1;\n    pattern += pattern;\n  }\n  return result + pattern;\n}\n\nfunction outputLink(cap, link, raw, lexer) {\n  const href = link.href;\n  const title = link.title ? escape(link.title) : null;\n  const text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n  if (cap[0].charAt(0) !== '!') {\n    lexer.state.inLink = true;\n    const token = {\n      type: 'link',\n      raw,\n      href,\n      title,\n      text,\n      tokens: lexer.inlineTokens(text)\n    };\n    lexer.state.inLink = false;\n    return token;\n  }\n  return {\n    type: 'image',\n    raw,\n    href,\n    title,\n    text: escape(text)\n  };\n}\n\nfunction indentCodeCompensation(raw, text) {\n  const matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n  if (matchIndentToCode === null) {\n    return text;\n  }\n\n  const indentToCode = matchIndentToCode[1];\n\n  return text\n    .split('\\n')\n    .map(node => {\n      const matchIndentInNode = node.match(/^\\s+/);\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      const [indentInNode] = matchIndentInNode;\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    })\n    .join('\\n');\n}\n\n/**\n * Tokenizer\n */\nclass Tokenizer {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  space(src) {\n    const cap = this.rules.block.newline.exec(src);\n    if (cap && cap[0].length > 0) {\n      return {\n        type: 'space',\n        raw: cap[0]\n      };\n    }\n  }\n\n  code(src) {\n    const cap = this.rules.block.code.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ {1,4}/gm, '');\n      return {\n        type: 'code',\n        raw: cap[0],\n        codeBlockStyle: 'indented',\n        text: !this.options.pedantic\n          ? rtrim(text, '\\n')\n          : text\n      };\n    }\n  }\n\n  fences(src) {\n    const cap = this.rules.block.fences.exec(src);\n    if (cap) {\n      const raw = cap[0];\n      const text = indentCodeCompensation(raw, cap[3] || '');\n\n      return {\n        type: 'code',\n        raw,\n        lang: cap[2] ? cap[2].trim() : cap[2],\n        text\n      };\n    }\n  }\n\n  heading(src) {\n    const cap = this.rules.block.heading.exec(src);\n    if (cap) {\n      let text = cap[2].trim();\n\n      // remove trailing #s\n      if (/#$/.test(text)) {\n        const trimmed = rtrim(text, '#');\n        if (this.options.pedantic) {\n          text = trimmed.trim();\n        } else if (!trimmed || / $/.test(trimmed)) {\n          // CommonMark requires space before trailing #s\n          text = trimmed.trim();\n        }\n      }\n\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[1].length,\n        text,\n        tokens: this.lexer.inline(text)\n      };\n    }\n  }\n\n  hr(src) {\n    const cap = this.rules.block.hr.exec(src);\n    if (cap) {\n      return {\n        type: 'hr',\n        raw: cap[0]\n      };\n    }\n  }\n\n  blockquote(src) {\n    const cap = this.rules.block.blockquote.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ *>[ \\t]?/gm, '');\n\n      return {\n        type: 'blockquote',\n        raw: cap[0],\n        tokens: this.lexer.blockTokens(text, []),\n        text\n      };\n    }\n  }\n\n  list(src) {\n    let cap = this.rules.block.list.exec(src);\n    if (cap) {\n      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine,\n        line, nextLine, rawLine, itemContents, endEarly;\n\n      let bull = cap[1].trim();\n      const isordered = bull.length > 1;\n\n      const list = {\n        type: 'list',\n        raw: '',\n        ordered: isordered,\n        start: isordered ? +bull.slice(0, -1) : '',\n        loose: false,\n        items: []\n      };\n\n      bull = isordered ? `\\\\d{1,9}\\\\${bull.slice(-1)}` : `\\\\${bull}`;\n\n      if (this.options.pedantic) {\n        bull = isordered ? bull : '[*+-]';\n      }\n\n      // Get next list item\n      const itemRegex = new RegExp(`^( {0,3}${bull})((?:[\\t ][^\\\\n]*)?(?:\\\\n|$))`);\n\n      // Check if current bullet point can start a new List Item\n      while (src) {\n        endEarly = false;\n        if (!(cap = itemRegex.exec(src))) {\n          break;\n        }\n\n        if (this.rules.block.hr.test(src)) { // End list if bullet was actually HR (possibly move into itemRegex?)\n          break;\n        }\n\n        raw = cap[0];\n        src = src.substring(raw.length);\n\n        line = cap[2].split('\\n', 1)[0];\n        nextLine = src.split('\\n', 1)[0];\n\n        if (this.options.pedantic) {\n          indent = 2;\n          itemContents = line.trimLeft();\n        } else {\n          indent = cap[2].search(/[^ ]/); // Find first non-space char\n          indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n          itemContents = line.slice(indent);\n          indent += cap[1].length;\n        }\n\n        blankLine = false;\n\n        if (!line && /^ *$/.test(nextLine)) { // Items begin with at most one blank line\n          raw += nextLine + '\\n';\n          src = src.substring(nextLine.length + 1);\n          endEarly = true;\n        }\n\n        if (!endEarly) {\n          const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\d{1,9}[.)])((?: [^\\\\n]*)?(?:\\\\n|$))`);\n          const hrRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)`);\n          const fencesBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\\`\\`\\`|~~~)`);\n          const headingBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`);\n\n          // Check if following lines should be included in List Item\n          while (src) {\n            rawLine = src.split('\\n', 1)[0];\n            line = rawLine;\n\n            // Re-align to follow commonmark nesting rules\n            if (this.options.pedantic) {\n              line = line.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n            }\n\n            // End list item if found code fences\n            if (fencesBeginRegex.test(line)) {\n              break;\n            }\n\n            // End list item if found start of new heading\n            if (headingBeginRegex.test(line)) {\n              break;\n            }\n\n            // End list item if found start of new bullet\n            if (nextBulletRegex.test(line)) {\n              break;\n            }\n\n            // Horizontal rule found\n            if (hrRegex.test(src)) {\n              break;\n            }\n\n            if (line.search(/[^ ]/) >= indent || !line.trim()) { // Dedent if possible\n              itemContents += '\\n' + line.slice(indent);\n            } else if (!blankLine) { // Until blank line, item doesn't need indentation\n              itemContents += '\\n' + line;\n            } else { // Otherwise, improper indentation ends this item\n              break;\n            }\n\n            if (!blankLine && !line.trim()) { // Check if current line is blank\n              blankLine = true;\n            }\n\n            raw += rawLine + '\\n';\n            src = src.substring(rawLine.length + 1);\n          }\n        }\n\n        if (!list.loose) {\n          // If the previous item ended with a blank line, the list is loose\n          if (endsWithBlankLine) {\n            list.loose = true;\n          } else if (/\\n *\\n *$/.test(raw)) {\n            endsWithBlankLine = true;\n          }\n        }\n\n        // Check for task list items\n        if (this.options.gfm) {\n          istask = /^\\[[ xX]\\] /.exec(itemContents);\n          if (istask) {\n            ischecked = istask[0] !== '[ ] ';\n            itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n          }\n        }\n\n        list.items.push({\n          type: 'list_item',\n          raw,\n          task: !!istask,\n          checked: ischecked,\n          loose: false,\n          text: itemContents\n        });\n\n        list.raw += raw;\n      }\n\n      // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n      list.items[list.items.length - 1].raw = raw.trimRight();\n      list.items[list.items.length - 1].text = itemContents.trimRight();\n      list.raw = list.raw.trimRight();\n\n      const l = list.items.length;\n\n      // Item child tokens handled here at end because we needed to have the final item to trim it first\n      for (i = 0; i < l; i++) {\n        this.lexer.state.top = false;\n        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n        const spacers = list.items[i].tokens.filter(t => t.type === 'space');\n        const hasMultipleLineBreaks = spacers.every(t => {\n          const chars = t.raw.split('');\n          let lineBreaks = 0;\n          for (const char of chars) {\n            if (char === '\\n') {\n              lineBreaks += 1;\n            }\n            if (lineBreaks > 1) {\n              return true;\n            }\n          }\n\n          return false;\n        });\n\n        if (!list.loose && spacers.length && hasMultipleLineBreaks) {\n          // Having a single line break doesn't mean a list is loose. A single line break is terminating the last list item\n          list.loose = true;\n          list.items[i].loose = true;\n        }\n      }\n\n      return list;\n    }\n  }\n\n  html(src) {\n    const cap = this.rules.block.html.exec(src);\n    if (cap) {\n      const token = {\n        type: 'html',\n        raw: cap[0],\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: cap[0]\n      };\n      if (this.options.sanitize) {\n        const text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\n        token.type = 'paragraph';\n        token.text = text;\n        token.tokens = this.lexer.inline(text);\n      }\n      return token;\n    }\n  }\n\n  def(src) {\n    const cap = this.rules.block.def.exec(src);\n    if (cap) {\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n      const tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n      return {\n        type: 'def',\n        tag,\n        raw: cap[0],\n        href: cap[2],\n        title: cap[3]\n      };\n    }\n  }\n\n  table(src) {\n    const cap = this.rules.block.table.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells(cap[1]).map(c => { return { text: c }; }),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        rows: cap[3] && cap[3].trim() ? cap[3].replace(/\\n[ \\t]*$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        item.raw = cap[0];\n\n        let l = item.align.length;\n        let i, j, k, row;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.rows.length;\n        for (i = 0; i < l; i++) {\n          item.rows[i] = splitCells(item.rows[i], item.header.length).map(c => { return { text: c }; });\n        }\n\n        // parse child tokens inside headers and cells\n\n        // header child tokens\n        l = item.header.length;\n        for (j = 0; j < l; j++) {\n          item.header[j].tokens = this.lexer.inline(item.header[j].text);\n        }\n\n        // cell child tokens\n        l = item.rows.length;\n        for (j = 0; j < l; j++) {\n          row = item.rows[j];\n          for (k = 0; k < row.length; k++) {\n            row[k].tokens = this.lexer.inline(row[k].text);\n          }\n        }\n\n        return item;\n      }\n    }\n  }\n\n  lheading(src) {\n    const cap = this.rules.block.lheading.exec(src);\n    if (cap) {\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1],\n        tokens: this.lexer.inline(cap[1])\n      };\n    }\n  }\n\n  paragraph(src) {\n    const cap = this.rules.block.paragraph.exec(src);\n    if (cap) {\n      const text = cap[1].charAt(cap[1].length - 1) === '\\n'\n        ? cap[1].slice(0, -1)\n        : cap[1];\n      return {\n        type: 'paragraph',\n        raw: cap[0],\n        text,\n        tokens: this.lexer.inline(text)\n      };\n    }\n  }\n\n  text(src) {\n    const cap = this.rules.block.text.exec(src);\n    if (cap) {\n      return {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0],\n        tokens: this.lexer.inline(cap[0])\n      };\n    }\n  }\n\n  escape(src) {\n    const cap = this.rules.inline.escape.exec(src);\n    if (cap) {\n      return {\n        type: 'escape',\n        raw: cap[0],\n        text: escape(cap[1])\n      };\n    }\n  }\n\n  tag(src) {\n    const cap = this.rules.inline.tag.exec(src);\n    if (cap) {\n      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\n        this.lexer.state.inLink = true;\n      } else if (this.lexer.state.inLink && /^<\\/a>/i.test(cap[0])) {\n        this.lexer.state.inLink = false;\n      }\n      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = true;\n      } else if (this.lexer.state.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = false;\n      }\n\n      return {\n        type: this.options.sanitize\n          ? 'text'\n          : 'html',\n        raw: cap[0],\n        inLink: this.lexer.state.inLink,\n        inRawBlock: this.lexer.state.inRawBlock,\n        text: this.options.sanitize\n          ? (this.options.sanitizer\n            ? this.options.sanitizer(cap[0])\n            : escape(cap[0]))\n          : cap[0]\n      };\n    }\n  }\n\n  link(src) {\n    const cap = this.rules.inline.link.exec(src);\n    if (cap) {\n      const trimmedUrl = cap[2].trim();\n      if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n        // commonmark requires matching angle brackets\n        if (!(/>$/.test(trimmedUrl))) {\n          return;\n        }\n\n        // ending angle bracket cannot be escaped\n        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n          return;\n        }\n      } else {\n        // find closing parenthesis\n        const lastParenIndex = findClosingBracket(cap[2], '()');\n        if (lastParenIndex > -1) {\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          const linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n      }\n      let href = cap[2];\n      let title = '';\n      if (this.options.pedantic) {\n        // split pedantic href and title\n        const link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n\n      href = href.trim();\n      if (/^</.test(href)) {\n        if (this.options.pedantic && !(/>$/.test(trimmedUrl))) {\n          // pedantic allows starting angle bracket without ending angle bracket\n          href = href.slice(1);\n        } else {",
          "filepath": "data/repos/markedjs/marked-4.1/lib/marked.esm.js",
          "repo": "markedjs/marked",
          "version": "4.1",
          "chunk_index": 0
        }
      },
      {
        "id": "14967838-ae31-40fb-8884-0672cc8b9312",
        "score": 0.015384615384615385,
        "payload": {
          "text": "- italic\n  - [*named link*][some-url]\n  - *[named link][some-url]*\n  - [_named link_][some-url]\n  - _[named link][some-url]_\n- bold\n  - [**named link**][some-url]\n  - **[named link][some-url]**\n  - [__named link__][some-url]\n  - __[named link][some-url]__\n- bold italic\n  - [***named link***][some-url]\n  - ***[named link][some-url]***\n  - [___named link___][some-url]\n  - ___[named link][some-url]___\n  - [*__named link__*][some-url]\n  - [__*named link*__][some-url]\n  - __*[named link][some-url]*__\n- code\n  - [`named link`][some-url]\n- code italic\n  - *[`named link`][some-url]*\n  - [*`named link`*][some-url]\n  - _[`named link`][some-url]_\n  - [_`named link`_][some-url]\n- code bold\n  - **[`named link`][some-url]**\n  - [**`named link`**][some-url]\n  - __[`named link`][some-url]__\n  - [__`named link`__][some-url]\n- code bold italic\n  - [***`named link`***][some-url]\n  - ***[`named link`][some-url]***\n  - [___`named link`___][some-url]\n  - ___[`named link`][some-url]___\n  - [*__`named link`__*][some-url]\n  - [__*`named link`*__][some-url]\n  - __*[`named link`][some-url]*__\n\n[some-url]: https://www.google.com",
          "filepath": "data/repos/markedjs/marked-4.1/test/specs/new/em_list_links.md",
          "repo": "markedjs/marked",
          "version": "4.1",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "processing__p5.js-3709",
    "model_patch": "diff --git a/material.js b/material.js\nindex 1a2b3c4..5d6e7f8 100644\n--- a/material.js\n+++ b/material.js\n@@ -1,6 +1,7 @@\n /**\n  * @module Lights, Camera\n  * @submodule Material\n+ * @submodule Tint\n  * @for p5\n  * @requires core\n  */\n@@ -291,6 +292,39 @@ p5.prototype.shininess = function(shine) {\n   return this;\n };\n \n+/**\n+ * Applies a tint to textures in WEBGL mode. This function allows you to\n+ * apply a color overlay to textures, similar to how tint() works in 2D mode.\n+ * The tint color is specified using the same parameters as fill() or stroke().\n+ * \n+ * @method tint\n+ * @param {Number} v1  gray value, red or hue value\n+ * @param {Number} [v2] green or saturation value\n+ * @param {Number} [v3] blue or brightness value\n+ * @param {Number} [a]  opacity\n+ * @chainable\n+ * @example\n+ * <div>\n+ * <code>\n+ * let img;\n+ * function preload() {\n+ *   img = loadImage('assets/rockies.jpg');\n+ * }\n+ *\n+ * function setup() {\n+ *   createCanvas(100, 100, WEBGL);\n+ * }\n+ *\n+ * function draw() {\n+ *   background(200);\n+ *   tint(255, 0, 0, 128); // Apply red tint with 50% opacity\n+ *   texture(img);\n+ *   plane(100, 100);\n+ * }\n+ * </code>\n+ * </div>\n+ */\n+p5.prototype.tint = function(v1, v2, v3, a) {\n+  this._renderer.tint = p5.prototype.color.apply(this, arguments)._array;\n+};\n+\n /**\n  * @private blends colors according to color components.\n  * If alpha value is less than 1, we need to enable blending\n@@ -301,6 +335,10 @@ p5.RendererGL.prototype._applyColorBlend = function(colors) {\n \n   var isTexture = this.drawMode === constants.TEXTURE;\n   if (isTexture || colors[colors.length - 1] < 1.0) {\n+    if (this.tint) {\n+      colors[0] *= this.tint[0];\n+      colors[1] *= this.tint[1];\n+      colors[2] *= this.tint[2];\n+      colors[3] *= this.tint[3];\n+    }\n     gl.depthMask(isTexture);\n     gl.enable(gl.BLEND);\n     this._applyBlendMode();\n@@ -308,6 +346,7 @@ p5.RendererGL.prototype._applyColorBlend = function(colors) {\n     gl.disable(gl.BLEND);\n   }\n   return colors;\n+  this.tint = null; // Reset tint after applying\n };\n \n /**",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 147.25,
      "issue_embedding_time_ms": 147.25,
      "retrieval_time_ms_jina": 1.58,
      "retrieval_time_ms": 1.58,
      "total_retrieval_time_ms": 148.83,
      "generation_time_ms": 7374.55,
      "total_io_time_ms": 7523.38,
      "input_total_token_limit": null,
      "issue_text_tokens": 336,
      "vlm_tokens": 0,
      "retrieved_tokens": 8063,
      "prompt_template_tokens": 524,
      "total_input_prompt_tokens": 8923,
      "output_generated_tokens": 660,
      "total_io_tokens": 9583,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nTint() is not supported in WebGL\\n#### Nature of issue?\\r\\n\\r\\n- [ ] Found a bug\\r\\n- [ ] Existing feature enhancement\\r\\n- [x] New feature request\\r\\n\\r\\n#### Most appropriate sub-area of p5.js?\\r\\n\\r\\n- [ ] Color\\r\\n- [ ] Core\\r\\n- [ ] Data\\r\\n- [ ] Events\\r\\n- [ ] Image\\r\\n- [ ] IO\\r\\n- [ ] Math\\r\\n- [ ] Typography\\r\\n- [ ] Utilities\\r\\n- [x] WebGL\\r\\n- [ ] Other (specify if possible)\\r\\n\\r\\n#### Which platform were you using when you encountered this?\\r\\n\\r\\n- [x] Mobile/Tablet (touch devices)\\r\\n- [x] Desktop/Laptop\\r\\n- [x] Others (specify if possible)\\r\\n\\r\\n#### New feature details:\\r\\nTint() is supported in processing with OPENGL render, could p5js also support it in WEBGL?\\r\\n- p5.js version: p5.js v0.5.16 \\r\\n- Example Code:\\r\\n```\\r\\nvar img;\\r\\nfunction preload() {\\r\\n    img = loadImage(\\\"https://processing.org/img/processing-web.png\\\");\\r\\n}\\r\\n\\r\\nfunction setup() {\\r\\n    createCanvas(700,700, WEBGL);\\r\\n}\\r\\n\\r\\nfunction draw() {\\r\\n    background(200);\\r\\n    beginShape();\\r\\n    tint(255,0,0,122);\\r\\n    texture(img);\\r\\n    vertex(0, 0, 0,0,0);\\r\\n    vertex(0, 250, 0,1);\\r\\n    vertex(250, 250, 0,1,1);\\r\\n    vertex(250, 0, 0,1,0);\\r\\n    endShape(CLOSE);\\r\\n}\\r\\n```\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of sketch.js]\\nvar img;\\n\\nfunction preload() {\\n  img = loadImage('flowers.jpg');\\n}\\n\\nfunction setup() {\\n  createCanvas(800, 160);\\n  fill(255, 255, 255);\\n  rect(0, 0, 480, 160);\\n  image(img, 0, 0);\\n  tint(0, 0, 150, 150); // Tint alpha blue\\n  image(img, 160, 0);\\n  tint(255, 255, 255);\\n  image(img, 320, 0);\\n  tint(0, 153, 150); // Tint turquoise\\n  image(img, 480, 0);\\n  noTint();\\n  image(img, 640, 0);\\n}\\n\\n[end of sketch.js]\\n[start of adilrabbani_gsoc_2018.md]\\n# Implementing missing WebGL primitives\\n#### by Adil Rabbani ([@adilrabbani](https://github.com/AdilRabbani))\\n\\nThis summer I worked on improving p5.js WebGL mode, along side [Aidan Nelson](https://github.com/AidanNelson) with the help of our mentors [Stalgia Grigg](https://github.com/mlarghydracept)\\nand [Kate Hollenbach](https://github.com/kjhollen). My tasks for the summer included implementing missing primitives in p5.js WebGL mode i.e arc, point, bezierVertex,\\ncurveVertex, quadraticVertex and text.\\n\\n## Contribution\\n\\nMy first contribution to p5.js was when I was writing my GSOC proposal. This was just a minor change in [reference examples](https://github.com/processing/p5.js/pull/2737) for curves\\nand some examples for [vertex()](https://github.com/processing/p5.js/pull/2798). These small changes helped me in understanding the use of grunt, lint, and other node modules being\\nused in the build process. I was really happy (and surprised) when my proposal got accepted \\ud83d\\ude04. I was about to contribute to one of my favourite libraries. We had a shared branch on \\n[git](https://github.com/processing/p5.js/tree/webgl-gsoc-2018) where we would compare our pull requests to be merged.\\n\\n### arc\\n\\nI started by going through [manual examples](https://github.com/processing/p5.js/tree/master/test/manual-test-examples/webgl), debugging them in browser and watching the code jump from \\nfunction to function. I have to admit though, it was a little daunting at first. My first task was to implement arc for WebGL mode and so I decided to go through already implemented ellipse \\nand debugging it in the chrome editor.\\n\\nThe code started to make sense after a while and I started to make small changes so as to move forward in implementing arc. Before my first evaluation I was able to implement arc [#2942](https://github.com/processing/p5.js/pull/2942) with all three modes\\n(OPEN, PIE, CHORD) and add documentation and [test examples](https://github.com/processing/p5.js/tree/webgl-gsoc-2018/test/manual-test-examples/webgl/arc). Ellipse was now refactored by using \\nthe same arc implementation. This closed issue [#2181](https://github.com/processing/p5.js/issues/2181).\\n\\n### point\\n\\nWebGL by default renders square points. Looking through some resources on web gave me an idea of discarding pixels from a square point further to render a circular point. Adding the shader in p5.js was \\nrelatively simple. But I was stuck on a bug for a while that didn't go off no matter what. Thankfully with the help of my mentor I was able to debug it and come up with a solution.\\n\\nOne small problem was still there though. A good approach on rendering points would be to use the default square point when the size of the point was really small and when it became big enough, it should \\nrender good looking circular points. I posted this issue on Github and [Adam Ferris](https://github.com/aferriss) who have been working on this before, suggested to use his shader which worked the same way \\nas mentioned. Read the discussion [here](https://github.com/processing/p5.js/issues/3017). Finally, I opened a [pull request](https://github.com/processing/p5.js/pull/3031) for point and added two test examples \\nfor the primitive. This closed issue [#2662](https://github.com/processing/p5.js/issues/2662) and [#2184](https://github.com/processing/p5.js/issues/2184)\\n\\n### bezierVertex, curveVertex and quadraticVertex\\n\\nI decided to go for curves next. I went through a great [article](https://pomax.github.io/bezierinfo/) on bezier curves for this task. Reading the article I came to know that a bezier curve can be easily converted \\nto Catmull Rom Splines so this meant that if I was able to implement bezierVertex, implementing curveVertex was relatively simple (just converting the points). While quadraticVertex can be implemented by changing the formula used to compute \\ncoefficients for curves.\\n\\nI finally added the required functions and started testing curves. Everything worked quite well, except just one. Filling curves gave weird results. At first, I thought maybe there was something wrong going on in \\nmy code but a further researching revealed that we can't just fill curves with all the intersections and loops without a proper triangulation algorithm. After approval from Kate and Stalgia, I started testing different \\ntriangulation libraries ([Earcut](https://github.com/mapbox/earcut), [Libtess](https://github.com/brendankenny/libtess.js/), [Tess2](https://github.com/diatomic/tess2)). Earcut was the most precise but wasn't giving correct results.\\nAfter a quick discussion with Earcut's creator, it was decided that Earcut wasn't a good option for us.\\n\\nTess2 wasn't really a good option either. It wasn't giving correct results and was too big in size. Libtess seemed to work really well and this was also because it was based on the same [GLU Tesselator implementation](https://github.com/processing/processing-android/tree/master/core/src/processing/opengl/tess) that was being used in Processing. The only problem with Libtess was that it was quite bigger than Earcut. We contacted [Lauren](https://github.com/lmccart) \\nif it was okay with integrating this library for the triangulation part. She encouraged us by saying that we can add the library as a node module just as opentype was being used for 2D text in p5.js. After integrating libtess, \\nI decided to improve the code further for some performance gains. I was able to implement a look up table with the help of which, we wouldn't need to compute coefficients after rendering curve, the first time. This was a huge performance boost from the \\nprevious trivial implementation. All that was left was to submit a [pull request](https://github.com/processing/p5.js/pull/3085) with an [example](https://github.com/processing/p5.js/tree/webgl-gsoc-2018/test/manual-test-examples/webgl/curves) showcasing what you can do with WebGL curves in p5.js. This closed issues [#2185](https://github.com/processing/p5.js/issues/2185), [#2186](https://github.com/processing/p5.js/issues/2186) and [#2187](https://github.com/processing/p5.js/issues/2187).\\n\\n### text\\n\\nNow I had one big task left : Implementing text for p5.js WebGL mode. Let me just mention one thing though, \\\"One does not simply implement text in WebGL \\ud83d\\ude25\\\"\\n\\nI went through different methods for rendering text in WebGL. At the end I was able to pick 2 methods that looked perfect for rendering text. The first one was [Signed Distance Field Rendering](http://hack.chrons.me/opengl-text-rendering/). The other being a [GPU based rendering](http://wdobbie.com/post/gpu-text-rendering-with-vector-textures/) approach. After a [discussion](https://github.com/processing/p5.js/issues/2183) on github we decided to go for the GPU based approach. I was not able to implement this approach as [Spongman](https://github.com/Spongman) had already done most of the work for text using the same technique. We decided to pull that implementation and polish it further (looking for bugs, improvements) instead of writing everything from scratch. The pull request is being reviewed [here](https://github.com/processing/p5.js/pull/3110).\\n\\n### Other minor contributions\\n\\nFixed a minor issue with triangle stroke in 2D mode [#3075](https://github.com/processing/p5.js/pull/3075) closing [#3065](https://github.com/processing/p5.js/issues/3065).\\nPorted some examples from Processing to p5.js [#242](https://github.com/processing/p5.js-website/pull/242).\\n\\n## Support\\nAny questions pertaining to this project may be addressed via Issues on the [p5.js repository](https://github.com/processing/p5.js). Simply create a new Issue and either assign or tag me in the conversation with @adilrabbani. For anything else, don't hesitate to get in touch at 14bscsarabbani@seecs.edu.pk!\\n\\n## Conclusion\\n\\nI learned a lot this summer. I would like to thank my mentor, [Stalgia Grigg](https://github.com/mlarghydracept) for all the guidance and help throughout the project as well as all the members of Processing Foundation for giving me a chance to contribute\\nto this library.\\n\\nThanks everyone! \\ud83d\\ude03\\n[end of adilrabbani_gsoc_2018.md]\\n[start of material.js]\\n/**\\n * @module Lights, Camera\\n * @submodule Material\\n * @for p5\\n * @requires core\\n */\\n\\n'use strict';\\n\\nvar p5 = require('../core/main');\\nvar constants = require('../core/constants');\\nrequire('./p5.Texture');\\n\\n/**\\n * Loads a custom shader from the provided vertex and fragment\\n * shader paths. The shader files are loaded asynchronously in the\\n * background, so this method should be used in <a href=\\\"#/p5/preload\\\">preload()</a>.\\n *\\n * For now, there are three main types of shaders. p5 will automatically\\n * supply appropriate vertices, normals, colors, and lighting attributes\\n * if the parameters defined in the shader match the names.\\n *\\n * @method loadShader\\n * @param {String} vertFilename path to file containing vertex shader\\n * source code\\n * @param {String} fragFilename path to file containing fragment shader\\n * source code\\n * @param {function} [callback] callback to be executed after loadShader\\n * completes. On success, the Shader object is passed as the first argument.\\n * @param {function} [errorCallback] callback to be executed when an error\\n * occurs inside loadShader. On error, the error is passed as the first\\n * argument.\\n * @return {p5.Shader} a shader object created from the provided\\n * vertex and fragment shader files.\\n *\\n * @example\\n * <div modernizr='webgl'>\\n * <code>\\n * let mandel;\\n * function preload() {\\n *   // load the shader definitions from files\\n *   mandel = loadShader('assets/shader.vert', 'assets/shader.frag');\\n * }\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n *   // use the shader\\n *   shader(mandel);\\n *   noStroke();\\n *   mandel.setUniform('p', [-0.74364388703, 0.13182590421]);\\n * }\\n *\\n * function draw() {\\n *   mandel.setUniform('r', 1.5 * exp(-6.5 * (1 + sin(millis() / 2000))));\\n *   quad(-1, -1, 1, -1, 1, 1, -1, 1);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * zooming Mandelbrot set. a colorful, infinitely detailed fractal.\\n */\\np5.prototype.loadShader = function(\\n  vertFilename,\\n  fragFilename,\\n  callback,\\n  errorCallback\\n) {\\n  p5._validateParameters('loadShader', arguments);\\n  if (!errorCallback) {\\n    errorCallback = console.error;\\n  }\\n\\n  var loadedShader = new p5.Shader();\\n\\n  var self = this;\\n  var loadedFrag = false;\\n  var loadedVert = false;\\n\\n  var onLoad = function() {\\n    self._decrementPreload();\\n    if (callback) {\\n      callback(loadedShader);\\n    }\\n  };\\n\\n  this.loadStrings(\\n    vertFilename,\\n    function(result) {\\n      loadedShader._vertSrc = result.join('\\\\n');\\n      loadedVert = true;\\n      if (loadedFrag) {\\n        onLoad();\\n      }\\n    },\\n    errorCallback\\n  );\\n\\n  this.loadStrings(\\n    fragFilename,\\n    function(result) {\\n      loadedShader._fragSrc = result.join('\\\\n');\\n      loadedFrag = true;\\n      if (loadedVert) {\\n        onLoad();\\n      }\\n    },\\n    errorCallback\\n  );\\n\\n  return loadedShader;\\n};\\n\\n/**\\n * @method createShader\\n * @param {String} vertSrc source code for the vertex shader\\n * @param {String} fragSrc source code for the fragment shader\\n * @returns {p5.Shader} a shader object created from the provided\\n * vertex and fragment shaders.\\n *\\n * @example\\n * <div modernizr='webgl'>\\n * <code>\\n * // the 'varying's are shared between both vertex & fragment shaders\\n * let varying = 'precision highp float; varying vec2 vPos;';\\n *\\n * // the vertex shader is called for each vertex\\n * let vs =\\n *   varying +\\n *   'attribute vec3 aPosition;' +\\n *   'void main() { vPos = (gl_Position = vec4(aPosition,1.0)).xy; }';\\n *\\n * // the fragment shader is called for each pixel\\n * let fs =\\n *   varying +\\n *   'uniform vec2 p;' +\\n *   'uniform float r;' +\\n *   'const int I = 500;' +\\n *   'void main() {' +\\n *   '  vec2 c = p + vPos * r, z = c;' +\\n *   '  float n = 0.0;' +\\n *   '  for (int i = I; i > 0; i --) {' +\\n *   '    if(z.x*z.x+z.y*z.y > 4.0) {' +\\n *   '      n = float(i)/float(I);' +\\n *   '      break;' +\\n *   '    }' +\\n *   '    z = vec2(z.x*z.x-z.y*z.y, 2.0*z.x*z.y) + c;' +\\n *   '  }' +\\n *   '  gl_FragColor = vec4(0.5-cos(n*17.0)/2.0,0.5-cos(n*13.0)/2.0,0.5-cos(n*23.0)/2.0,1.0);' +\\n *   '}';\\n *\\n * let mandel;\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n *\\n *   // create and initialize the shader\\n *   mandel = createShader(vs, fs);\\n *   shader(mandel);\\n *   noStroke();\\n *\\n *   // 'p' is the center point of the Mandelbrot image\\n *   mandel.setUniform('p', [-0.74364388703, 0.13182590421]);\\n * }\\n *\\n * function draw() {\\n *   // 'r' is the size of the image in Mandelbrot-space\\n *   mandel.setUniform('r', 1.5 * exp(-6.5 * (1 + sin(millis() / 2000))));\\n *   quad(-1, -1, 1, -1, 1, 1, -1, 1);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * zooming Mandelbrot set. a colorful, infinitely detailed fractal.\\n */\\np5.prototype.createShader = function(vertSrc, fragSrc) {\\n  this._assert3d('createShader');\\n  p5._validateParameters('createShader', arguments);\\n  return new p5.Shader(this._renderer, vertSrc, fragSrc);\\n};\\n\\n/**\\n * The <a href=\\\"#/p5/shader\\\">shader()</a> function lets the user provide a custom shader\\n * to fill in shapes in WEBGL mode. Users can create their\\n * own shaders by loading vertex and fragment shaders with\\n * <a href=\\\"#/p5/loadShader\\\">loadShader()</a>.\\n *\\n * @method shader\\n * @chainable\\n * @param {p5.Shader} [s] the desired <a href=\\\"#/p5.Shader\\\">p5.Shader</a> to use for rendering\\n * shapes.\\n */\\np5.prototype.shader = function(s) {\\n  this._assert3d('shader');\\n  p5._validateParameters('shader', arguments);\\n\\n  if (s._renderer === undefined) {\\n    s._renderer = this._renderer;\\n  }\\n\\n  if (s.isStrokeShader()) {\\n    this._renderer.userStrokeShader = s;\\n  } else {\\n    this._renderer.userFillShader = s;\\n    this._renderer._useNormalMaterial = false;\\n  }\\n\\n  s.init();\\n\\n  return this;\\n};\\n\\n/**\\n * This function restores the default shaders in WEBGL mode. Code that runs\\n * after resetShader() will not be affected by previously defined\\n * shaders. Should be run after <a href=\\\"#/p5/shader\\\">shader()</a>.\\n *\\n * @method resetShader\\n * @chainable\\n */\\np5.prototype.resetShader = function() {\\n  this._renderer.userFillShader = this._renderer.userStrokeShader = null;\\n  return this;\\n};\\n\\n/**\\n * Normal material for geometry. You can view all\\n * possible materials in this\\n * <a href=\\\"https://p5js.org/examples/3d-materials.html\\\">example</a>.\\n * @method normalMaterial\\n * @chainable\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(200);\\n *   normalMaterial();\\n *   sphere(40);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * Red, green and blue gradient.\\n *\\n */\\np5.prototype.normalMaterial = function() {\\n  this._assert3d('normalMaterial');\\n  p5._validateParameters('normalMaterial', arguments);\\n  this._renderer.drawMode = constants.FILL;\\n  this._renderer._useSpecularMaterial = false;\\n  this._renderer._useNormalMaterial = true;\\n  this._renderer.curFillColor = [1, 1, 1, 1];\\n  this._renderer._setProperty('_doFill', true);\\n  this.noStroke();\\n  return this;\\n};\\n\\n/**\\n * Texture for geometry.  You can view other possible materials in this\\n * <a href=\\\"https://p5js.org/examples/3d-materials.html\\\">example</a>.\\n * @method texture\\n * @param {p5.Image|p5.MediaElement|p5.Graphics} tex 2-dimensional graphics\\n *                    to render as texture\\n * @chainable\\n * @example\\n * <div>\\n * <code>\\n * let img;\\n * function preload() {\\n *   img = loadImage('assets/laDefense.jpg');\\n * }\\n *\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(0);\\n *   rotateZ(frameCount * 0.01);\\n *   rotateX(frameCount * 0.01);\\n *   rotateY(frameCount * 0.01);\\n *   //pass image as texture\\n *   texture(img);\\n *   box(200, 200, 200);\\n * }\\n * </code>\\n * </div>\\n *\\n * <div>\\n * <code>\\n * let pg;\\n *\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n *   pg = createGraphics(200, 200);\\n *   pg.textSize(75);\\n * }\\n *\\n * function draw() {\\n *   background(0);\\n *   pg.background(255);\\n *   pg.text('hello!', 0, 100);\\n *   //pass image as texture\\n *   texture(pg);\\n *   rotateX(0.5);\\n *   noStroke();\\n *   plane(50);\\n * }\\n * </code>\\n * </div>\\n *\\n * <div>\\n * <code>\\n * let vid;\\n * function preload() {\\n *   vid = createVideo('assets/fingers.mov');\\n *   vid.hide();\\n * }\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(0);\\n *   //pass video frame as texture\\n *   texture(vid);\\n *   rect(-40, -40, 80, 80);\\n * }\\n *\\n * function mousePressed() {\\n *   vid.loop();\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * Rotating view of many images umbrella and grid roof on a 3d plane\\n * black canvas\\n * black canvas\\n *\\n */\\np5.prototype.texture = function(tex) {\\n  this._assert3d('texture');\\n  p5._validateParameters('texture', arguments);\\n\\n  this._renderer.drawMode = constants.TEXTURE;\\n  this._renderer._useSpecularMaterial = false;\\n  this._renderer._useNormalMaterial = false;\\n  this._renderer._tex = tex;\\n  this._renderer._setProperty('_doFill', true);\\n\\n  return this;\\n};\\n\\n/**\\n * Sets the coordinate space for texture mapping. The default mode is IMAGE\\n * which refers to the actual coordinates of the image.\\n * NORMAL refers to a normalized space of values ranging from 0 to 1.\\n * This function only works in WEBGL mode.\\n *\\n * With IMAGE, if an image is 100 x 200 pixels, mapping the image onto the entire\\n * size of a quad would require the points (0,0) (100, 0) (100,200) (0,200).\\n * The same mapping in NORMAL is (0,0) (1,0) (1,1) (0,1).\\n * @method  textureMode\\n * @param {Constant} mode either IMAGE or NORMAL\\n * @example\\n * <div>\\n * <code>\\n * let img;\\n *\\n * function preload() {\\n *   img = loadImage('assets/laDefense.jpg');\\n * }\\n *\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   texture(img);\\n *   textureMode(NORMAL);\\n *   beginShape();\\n *   vertex(-50, -50, 0, 0);\\n *   vertex(50, -50, 1, 0);\\n *   vertex(50, 50, 1, 1);\\n *   vertex(-50, 50, 0, 1);\\n *   endShape();\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * the underside of a white umbrella and gridded ceiling above\\n *\\n * <div>\\n * <code>\\n * let img;\\n *\\n * function preload() {\\n *   img = loadImage('assets/laDefense.jpg');\\n * }\\n *\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   texture(img);\\n *   textureMode(NORMAL);\\n *   beginShape();\\n *   vertex(-50, -50, 0, 0);\\n *   vertex(50, -50, img.width, 0);\\n *   vertex(50, 50, img.width, img.height);\\n *   vertex(-50, 50, 0, img.height);\\n *   endShape();\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * the underside of a white umbrella and gridded ceiling above\\n *\\n */\\np5.prototype.textureMode = function(mode) {\\n  if (mode !== constants.IMAGE && mode !== constants.NORMAL) {\\n    console.warn(\\n      'You tried to set ' + mode + ' textureMode only supports IMAGE & NORMAL '\\n    );\\n  } else {\\n    this._renderer.textureMode = mode;\\n  }\\n};\\n\\n/**\\n * Sets the global texture wrapping mode. This controls how textures behave\\n * when their uv's go outside of the 0 - 1 range. There are three options:\\n * CLAMP, REPEAT, and MIRROR.\\n *\\n * CLAMP causes the pixels at the edge of the texture to extend to the bounds\\n * REPEAT causes the texture to tile repeatedly until reaching the bounds\\n * MIRROR works similarly to REPEAT but it flips the texture with every new tile\\n *\\n * REPEAT & MIRROR are only available if the texture\\n * is a power of two size (128, 256, 512, 1024, etc.).\\n *\\n * This method will affect all textures in your sketch until a subsequent\\n * textureWrap call is made.\\n *\\n * If only one argument is provided, it will be applied to both the\\n * horizontal and vertical axes.\\n * @method textureWrap\\n * @param {Constant} wrapX either CLAMP, REPEAT, or MIRROR\\n * @param {Constant} [wrapY] either CLAMP, REPEAT, or MIRROR\\n * @example\\n * <div>\\n * <code>\\n * let img;\\n * function preload() {\\n *   img = loadImage('assets/rockies128.jpg');\\n * }\\n *\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n *   textureWrap(MIRROR);\\n * }\\n *\\n * function draw() {\\n *   background(0);\\n *\\n *   let dX = mouseX;\\n *   let dY = mouseY;\\n *\\n *   let u = lerp(1.0, 2.0, dX);\\n *   let v = lerp(1.0, 2.0, dY);\\n *\\n *   scale(width / 2);\\n *\\n *   texture(img);\\n *\\n *   beginShape(TRIANGLES);\\n *   vertex(-1, -1, 0, 0, 0);\\n *   vertex(1, -1, 0, u, 0);\\n *   vertex(1, 1, 0, u, v);\\n *\\n *   vertex(1, 1, 0, u, v);\\n *   vertex(-1, 1, 0, 0, v);\\n *   vertex(-1, -1, 0, 0, 0);\\n *   endShape();\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * an image of the rocky mountains repeated in mirrored tiles\\n *\\n */\\np5.prototype.textureWrap = function(wrapX, wrapY) {\\n  wrapY = wrapY || wrapX;\\n\\n  this._renderer.textureWrapX = wrapX;\\n  this._renderer.textureWrapY = wrapY;\\n\\n  var textures = this._renderer.textures;\\n  for (var i = 0; i < textures.length; i++) {\\n    textures[i].setWrapMode(wrapX, wrapY);\\n  }\\n};\\n\\n/**\\n * Ambient material for geometry with a given color. You can view all\\n * possible materials in this\\n * <a href=\\\"https://p5js.org/examples/3d-materials.html\\\">example</a>.\\n * @method  ambientMaterial\\n * @param  {Number} v1  gray value, red or hue value\\n *                         (depending on the current color mode),\\n * @param  {Number} [v2] green or saturation value\\n * @param  {Number} [v3] blue or brightness value\\n * @param  {Number} [a]  opacity\\n * @chainable\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n * function draw() {\\n *   background(0);\\n *   noStroke();\\n *   ambientLight(200);\\n *   ambientMaterial(70, 130, 230);\\n *   sphere(40);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * radiating light source from top right of canvas\\n *\\n */\\n/**\\n * @method  ambientMaterial\\n * @param  {Number[]|String|p5.Color} color  color, color Array, or CSS color string\\n * @chainable\\n */\\np5.prototype.ambientMaterial = function(v1, v2, v3, a) {\\n  this._assert3d('ambientMaterial');\\n  p5._validateParameters('ambientMaterial', arguments);\\n\\n  var color = p5.prototype.color.apply(this, arguments);\\n  this._renderer.curFillColor = color._array;\\n  this._renderer._useSpecularMaterial = false;\\n  this._renderer._useNormalMaterial = false;\\n  this._renderer._enableLighting = true;\\n  this._renderer._tex = null;\\n\\n  return this;\\n};\\n\\n/**\\n * Specular material for geometry with a given color. You can view all\\n * possible materials in this\\n * <a href=\\\"https://p5js.org/examples/3d-materials.html\\\">example</a>.\\n * @method specularMaterial\\n * @param  {Number} v1  gray value, red or hue value\\n *                       (depending on the current color mode),\\n * @param  {Number} [v2] green or saturation value\\n * @param  {Number} [v3] blue or brightness value\\n * @param  {Number} [a]  opacity\\n * @chainable\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n * function draw() {\\n *   background(0);\\n *   noStroke();\\n *   ambientLight(50);\\n *   pointLight(250, 250, 250, 100, 100, 30);\\n *   specularMaterial(250);\\n *   sphere(40);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * diffused radiating light source from top right of canvas\\n *\\n */\\n/**\\n * @method specularMaterial\\n * @param  {Number[]|String|p5.Color} color color Array, or CSS color string\\n * @chainable\\n */\\np5.prototype.specularMaterial = function(v1, v2, v3, a) {\\n  this._assert3d('specularMaterial');\\n  p5._validateParameters('specularMaterial', arguments);\\n\\n  var color = p5.prototype.color.apply(this, arguments);\\n  this._renderer.curFillColor = color._array;\\n  this._renderer._useSpecularMaterial = true;\\n  this._renderer._useNormalMaterial = false;\\n  this._renderer._enableLighting = true;\\n  this._renderer._tex = null;\\n\\n  return this;\\n};\\n\\n/**\\n * Sets the amount of gloss in the surface of shapes.\\n * Used in combination with specularMaterial() in setting\\n * the material properties of shapes. The default and minimum value is 1.\\n * @method shininess\\n * @param {Number} shine Degree of Shininess.\\n *                       Defaults to 1.\\n * @chainable\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n * function draw() {\\n *   background(0);\\n *   noStroke();\\n *   let locX = mouseX - width / 2;\\n *   let locY = mouseY - height / 2;\\n *   ambientLight(60, 60, 60);\\n *   pointLight(255, 255, 255, locX, locY, 50);\\n *   specularMaterial(250);\\n *   translate(-25, 0, 0);\\n *   shininess(1);\\n *   sphere(20);\\n *   translate(50, 0, 0);\\n *   shininess(20);\\n *   sphere(20);\\n * }\\n * </code>\\n * </div>\\n * @alt\\n * Shininess on Camera changes position with mouse\\n */\\np5.prototype.shininess = function(shine) {\\n  this._assert3d('shininess');\\n  p5._validateParameters('shininess', arguments);\\n\\n  if (shine < 1) {\\n    shine = 1;\\n  }\\n  this._renderer._useShininess = shine;\\n  return this;\\n};\\n\\n/**\\n * @private blends colors according to color components.\\n * If alpha value is less than 1, we need to enable blending\\n * on our gl context.  Otherwise opaque objects need to a depthMask.\\n * @param  {Number[]} color [description]\\n * @return {Number[]]}  Normalized numbers array\\n */\\np5.RendererGL.prototype._applyColorBlend = function(colors) {\\n  var gl = this.GL;\\n\\n  var isTexture = this.drawMode === constants.TEXTURE;\\n  if (isTexture || colors[colors.length - 1] < 1.0) {\\n    gl.depthMask(isTexture);\\n    gl.enable(gl.BLEND);\\n    this._applyBlendMode();\\n  } else {\\n    gl.depthMask(true);\\n    gl.disable(gl.BLEND);\\n  }\\n  return colors;\\n};\\n\\n/**\\n * @private sets blending in gl context to curBlendMode\\n * @param  {Number[]} color [description]\\n * @return {Number[]]}  Normalized numbers array\\n */\\np5.RendererGL.prototype._applyBlendMode = function() {\\n  var gl = this.GL;\\n  switch (this.curBlendMode) {\\n    case constants.BLEND:\\n    case constants.ADD:\\n      gl.blendEquation(gl.FUNC_ADD);\\n      gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\\n      break;\\n    case constants.MULTIPLY:\\n      gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\\n      gl.blendFuncSeparate(gl.ZERO, gl.SRC_COLOR, gl.ONE, gl.ONE);\\n      break;\\n    case constants.SCREEN:\\n      gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\\n      gl.blendFuncSeparate(gl.ONE_MINUS_DST_COLOR, gl.ONE, gl.ONE, gl.ONE);\\n      break;\\n    case constants.EXCLUSION:\\n      gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\\n      gl.blendFuncSeparate(\\n        gl.ONE_MINUS_DST_COLOR,\\n        gl.ONE_MINUS_SRC_COLOR,\\n        gl.ONE,\\n        gl.ONE\\n      );\\n      break;\\n    case constants.REPLACE:\\n      gl.blendEquation(gl.FUNC_ADD);\\n      gl.blendFunc(gl.ONE, gl.ZERO);\\n      break;\\n    case constants.SUBTRACT:\\n      gl.blendEquationSeparate(gl.FUNC_REVERSE_SUBTRACT, gl.FUNC_ADD);\\n      gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE, gl.ONE, gl.ONE);\\n      break;\\n    case constants.DARKEST:\\n      if (this.blendExt) {\\n        gl.blendEquationSeparate(this.blendExt.MIN_EXT, gl.FUNC_ADD);\\n        gl.blendFuncSeparate(gl.ONE, gl.ONE, gl.ONE, gl.ONE);\\n      } else {\\n        console.warn(\\n          'blendMode(DARKEST) does not work in your browser in WEBGL mode.'\\n        );\\n      }\\n      break;\\n    case constants.LIGHTEST:\\n      if (this.blendExt) {\\n        gl.blendEquationSeparate(this.blendExt.MAX_EXT, gl.FUNC_ADD);\\n        gl.blendFuncSeparate(gl.ONE, gl.ONE, gl.ONE, gl.ONE);\\n      } else {\\n        console.warn(\\n          'blendMode(LIGHTEST) does not work in your browser in WEBGL mode.'\\n        );\\n      }\\n      break;\\n    default:\\n      console.error(\\n        'Oops! Somehow RendererGL set curBlendMode to an unsupported mode.'\\n      );\\n      break;\\n  }\\n};\\n\\nmodule.exports = p5;\\n\\n[end of material.js]\\n[start of sketch.js]\\nvar toonShader;\\n\\nfunction preload() {\\n  toonShader = loadShader('vert.glsl', 'frag.glsl');\\n}\\n\\nfunction setup() {\\n  createCanvas(windowWidth, windowHeight, WEBGL);\\n  noStroke();\\n  shader(toonShader);\\n  toonShader.setUniform('fraction', 1.0);\\n}\\n\\nfunction draw() {\\n  background(0);\\n  var dirY = (mouseY / height - 0.5) * 2;\\n  var dirX = (mouseX / width - 0.5) * 2;\\n  directionalLight(255, 204, 204, -dirX, -dirY, -1);\\n  ambientMaterial(0, 255, 255);\\n  sphere(120);\\n}\\n\\n[end of sketch.js]\\n[start of sketch.js]\\n/**\\n * webgl texture mode example\\n */\\nvar img;\\n\\nfunction preload() {\\n  img = loadImage('assets/UV_Grid_Sm.jpg');\\n}\\n\\nfunction setup() {\\n  createCanvas(windowWidth, windowHeight, WEBGL);\\n}\\n\\nfunction draw() {\\n  background(220);\\n  noStroke();\\n\\n  texture(img);\\n\\n  push();\\n  translate(-200, 0, 0);\\n  textureMode(NORMAL);\\n  beginShape();\\n  vertex(-100, -100, 0, 0);\\n  vertex(100, -100, 1, 0);\\n  vertex(100, 100, 1, 1);\\n  vertex(-100, 100, 0, 1);\\n  endShape();\\n  pop();\\n\\n  push();\\n  translate(200, 0, 0);\\n  textureMode(IMAGE);\\n  beginShape();\\n  vertex(-100, -100, 0, 0);\\n  vertex(100, -100, img.width, 0);\\n  vertex(100, 100, img.width, img.height);\\n  vertex(-100, 100, 0, img.height);\\n  endShape();\\n  pop();\\n}\\n\\n[end of sketch.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "sketch.js",
        "adilrabbani_gsoc_2018.md",
        "material.js",
        "sketch.js",
        "sketch.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "8ffa2788-9e8f-4405-8a8e-c43b80249d78",
        "score": 0.01639344262295082,
        "payload": {
          "text": "var img;\n\nfunction preload() {\n  img = loadImage('flowers.jpg');\n}\n\nfunction setup() {\n  createCanvas(800, 160);\n  fill(255, 255, 255);\n  rect(0, 0, 480, 160);\n  image(img, 0, 0);\n  tint(0, 0, 150, 150); // Tint alpha blue\n  image(img, 160, 0);\n  tint(255, 255, 255);\n  image(img, 320, 0);\n  tint(0, 153, 150); // Tint turquoise\n  image(img, 480, 0);\n  noTint();\n  image(img, 640, 0);\n}\n",
          "filepath": "data/repos/processing/p5.js-0.8/test/manual-test-examples/tint/sketch.js",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      },
      {
        "id": "eedbc3cc-4d4e-421e-b975-821a85822436",
        "score": 0.016129032258064516,
        "payload": {
          "text": "# Implementing missing WebGL primitives\n#### by Adil Rabbani ([@adilrabbani](https://github.com/AdilRabbani))\n\nThis summer I worked on improving p5.js WebGL mode, along side [Aidan Nelson](https://github.com/AidanNelson) with the help of our mentors [Stalgia Grigg](https://github.com/mlarghydracept)\nand [Kate Hollenbach](https://github.com/kjhollen). My tasks for the summer included implementing missing primitives in p5.js WebGL mode i.e arc, point, bezierVertex,\ncurveVertex, quadraticVertex and text.\n\n## Contribution\n\nMy first contribution to p5.js was when I was writing my GSOC proposal. This was just a minor change in [reference examples](https://github.com/processing/p5.js/pull/2737) for curves\nand some examples for [vertex()](https://github.com/processing/p5.js/pull/2798). These small changes helped me in understanding the use of grunt, lint, and other node modules being\nused in the build process. I was really happy (and surprised) when my proposal got accepted \ud83d\ude04. I was about to contribute to one of my favourite libraries. We had a shared branch on \n[git](https://github.com/processing/p5.js/tree/webgl-gsoc-2018) where we would compare our pull requests to be merged.\n\n### arc\n\nI started by going through [manual examples](https://github.com/processing/p5.js/tree/master/test/manual-test-examples/webgl), debugging them in browser and watching the code jump from \nfunction to function. I have to admit though, it was a little daunting at first. My first task was to implement arc for WebGL mode and so I decided to go through already implemented ellipse \nand debugging it in the chrome editor.\n\nThe code started to make sense after a while and I started to make small changes so as to move forward in implementing arc. Before my first evaluation I was able to implement arc [#2942](https://github.com/processing/p5.js/pull/2942) with all three modes\n(OPEN, PIE, CHORD) and add documentation and [test examples](https://github.com/processing/p5.js/tree/webgl-gsoc-2018/test/manual-test-examples/webgl/arc). Ellipse was now refactored by using \nthe same arc implementation. This closed issue [#2181](https://github.com/processing/p5.js/issues/2181).\n\n### point\n\nWebGL by default renders square points. Looking through some resources on web gave me an idea of discarding pixels from a square point further to render a circular point. Adding the shader in p5.js was \nrelatively simple. But I was stuck on a bug for a while that didn't go off no matter what. Thankfully with the help of my mentor I was able to debug it and come up with a solution.\n\nOne small problem was still there though. A good approach on rendering points would be to use the default square point when the size of the point was really small and when it became big enough, it should \nrender good looking circular points. I posted this issue on Github and [Adam Ferris](https://github.com/aferriss) who have been working on this before, suggested to use his shader which worked the same way \nas mentioned. Read the discussion [here](https://github.com/processing/p5.js/issues/3017). Finally, I opened a [pull request](https://github.com/processing/p5.js/pull/3031) for point and added two test examples \nfor the primitive. This closed issue [#2662](https://github.com/processing/p5.js/issues/2662) and [#2184](https://github.com/processing/p5.js/issues/2184)\n\n### bezierVertex, curveVertex and quadraticVertex\n\nI decided to go for curves next. I went through a great [article](https://pomax.github.io/bezierinfo/) on bezier curves for this task. Reading the article I came to know that a bezier curve can be easily converted \nto Catmull Rom Splines so this meant that if I was able to implement bezierVertex, implementing curveVertex was relatively simple (just converting the points). While quadraticVertex can be implemented by changing the formula used to compute \ncoefficients for curves.\n\nI finally added the required functions and started testing curves. Everything worked quite well, except just one. Filling curves gave weird results. At first, I thought maybe there was something wrong going on in \nmy code but a further researching revealed that we can't just fill curves with all the intersections and loops without a proper triangulation algorithm. After approval from Kate and Stalgia, I started testing different \ntriangulation libraries ([Earcut](https://github.com/mapbox/earcut), [Libtess](https://github.com/brendankenny/libtess.js/), [Tess2](https://github.com/diatomic/tess2)). Earcut was the most precise but wasn't giving correct results.\nAfter a quick discussion with Earcut's creator, it was decided that Earcut wasn't a good option for us.\n\nTess2 wasn't really a good option either. It wasn't giving correct results and was too big in size. Libtess seemed to work really well and this was also because it was based on the same [GLU Tesselator implementation](https://github.com/processing/processing-android/tree/master/core/src/processing/opengl/tess) that was being used in Processing. The only problem with Libtess was that it was quite bigger than Earcut. We contacted [Lauren](https://github.com/lmccart) \nif it was okay with integrating this library for the triangulation part. She encouraged us by saying that we can add the library as a node module just as opentype was being used for 2D text in p5.js. After integrating libtess, \nI decided to improve the code further for some performance gains. I was able to implement a look up table with the help of which, we wouldn't need to compute coefficients after rendering curve, the first time. This was a huge performance boost from the \nprevious trivial implementation. All that was left was to submit a [pull request](https://github.com/processing/p5.js/pull/3085) with an [example](https://github.com/processing/p5.js/tree/webgl-gsoc-2018/test/manual-test-examples/webgl/curves) showcasing what you can do with WebGL curves in p5.js. This closed issues [#2185](https://github.com/processing/p5.js/issues/2185), [#2186](https://github.com/processing/p5.js/issues/2186) and [#2187](https://github.com/processing/p5.js/issues/2187).\n\n### text\n\nNow I had one big task left : Implementing text for p5.js WebGL mode. Let me just mention one thing though, \"One does not simply implement text in WebGL \ud83d\ude25\"\n\nI went through different methods for rendering text in WebGL. At the end I was able to pick 2 methods that looked perfect for rendering text. The first one was [Signed Distance Field Rendering](http://hack.chrons.me/opengl-text-rendering/). The other being a [GPU based rendering](http://wdobbie.com/post/gpu-text-rendering-with-vector-textures/) approach. After a [discussion](https://github.com/processing/p5.js/issues/2183) on github we decided to go for the GPU based approach. I was not able to implement this approach as [Spongman](https://github.com/Spongman) had already done most of the work for text using the same technique. We decided to pull that implementation and polish it further (looking for bugs, improvements) instead of writing everything from scratch. The pull request is being reviewed [here](https://github.com/processing/p5.js/pull/3110).\n\n### Other minor contributions\n\nFixed a minor issue with triangle stroke in 2D mode [#3075](https://github.com/processing/p5.js/pull/3075) closing [#3065](https://github.com/processing/p5.js/issues/3065).\nPorted some examples from Processing to p5.js [#242](https://github.com/processing/p5.js-website/pull/242).\n\n## Support\nAny questions pertaining to this project may be addressed via Issues on the [p5.js repository](https://github.com/processing/p5.js). Simply create a new Issue and either assign or tag me in the conversation with @adilrabbani. For anything else, don't hesitate to get in touch at 14bscsarabbani@seecs.edu.pk!\n\n## Conclusion\n\nI learned a lot this summer. I would like to thank my mentor, [Stalgia Grigg](https://github.com/mlarghydracept) for all the guidance and help throughout the project as well as all the members of Processing Foundation for giving me a chance to contribute\nto this library.\n\nThanks everyone! \ud83d\ude03",
          "filepath": "data/repos/processing/p5.js-0.8/developer_docs/project_wrapups/adilrabbani_gsoc_2018.md",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      },
      {
        "id": "719d8b20-651d-47b1-b536-a15c2ded4b4d",
        "score": 0.015873015873015872,
        "payload": {
          "text": "/**\n * @module Lights, Camera\n * @submodule Material\n * @for p5\n * @requires core\n */\n\n'use strict';\n\nvar p5 = require('../core/main');\nvar constants = require('../core/constants');\nrequire('./p5.Texture');\n\n/**\n * Loads a custom shader from the provided vertex and fragment\n * shader paths. The shader files are loaded asynchronously in the\n * background, so this method should be used in <a href=\"#/p5/preload\">preload()</a>.\n *\n * For now, there are three main types of shaders. p5 will automatically\n * supply appropriate vertices, normals, colors, and lighting attributes\n * if the parameters defined in the shader match the names.\n *\n * @method loadShader\n * @param {String} vertFilename path to file containing vertex shader\n * source code\n * @param {String} fragFilename path to file containing fragment shader\n * source code\n * @param {function} [callback] callback to be executed after loadShader\n * completes. On success, the Shader object is passed as the first argument.\n * @param {function} [errorCallback] callback to be executed when an error\n * occurs inside loadShader. On error, the error is passed as the first\n * argument.\n * @return {p5.Shader} a shader object created from the provided\n * vertex and fragment shader files.\n *\n * @example\n * <div modernizr='webgl'>\n * <code>\n * let mandel;\n * function preload() {\n *   // load the shader definitions from files\n *   mandel = loadShader('assets/shader.vert', 'assets/shader.frag');\n * }\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n *   // use the shader\n *   shader(mandel);\n *   noStroke();\n *   mandel.setUniform('p', [-0.74364388703, 0.13182590421]);\n * }\n *\n * function draw() {\n *   mandel.setUniform('r', 1.5 * exp(-6.5 * (1 + sin(millis() / 2000))));\n *   quad(-1, -1, 1, -1, 1, 1, -1, 1);\n * }\n * </code>\n * </div>\n *\n * @alt\n * zooming Mandelbrot set. a colorful, infinitely detailed fractal.\n */\np5.prototype.loadShader = function(\n  vertFilename,\n  fragFilename,\n  callback,\n  errorCallback\n) {\n  p5._validateParameters('loadShader', arguments);\n  if (!errorCallback) {\n    errorCallback = console.error;\n  }\n\n  var loadedShader = new p5.Shader();\n\n  var self = this;\n  var loadedFrag = false;\n  var loadedVert = false;\n\n  var onLoad = function() {\n    self._decrementPreload();\n    if (callback) {\n      callback(loadedShader);\n    }\n  };\n\n  this.loadStrings(\n    vertFilename,\n    function(result) {\n      loadedShader._vertSrc = result.join('\\n');\n      loadedVert = true;\n      if (loadedFrag) {\n        onLoad();\n      }\n    },\n    errorCallback\n  );\n\n  this.loadStrings(\n    fragFilename,\n    function(result) {\n      loadedShader._fragSrc = result.join('\\n');\n      loadedFrag = true;\n      if (loadedVert) {\n        onLoad();\n      }\n    },\n    errorCallback\n  );\n\n  return loadedShader;\n};\n\n/**\n * @method createShader\n * @param {String} vertSrc source code for the vertex shader\n * @param {String} fragSrc source code for the fragment shader\n * @returns {p5.Shader} a shader object created from the provided\n * vertex and fragment shaders.\n *\n * @example\n * <div modernizr='webgl'>\n * <code>\n * // the 'varying's are shared between both vertex & fragment shaders\n * let varying = 'precision highp float; varying vec2 vPos;';\n *\n * // the vertex shader is called for each vertex\n * let vs =\n *   varying +\n *   'attribute vec3 aPosition;' +\n *   'void main() { vPos = (gl_Position = vec4(aPosition,1.0)).xy; }';\n *\n * // the fragment shader is called for each pixel\n * let fs =\n *   varying +\n *   'uniform vec2 p;' +\n *   'uniform float r;' +\n *   'const int I = 500;' +\n *   'void main() {' +\n *   '  vec2 c = p + vPos * r, z = c;' +\n *   '  float n = 0.0;' +\n *   '  for (int i = I; i > 0; i --) {' +\n *   '    if(z.x*z.x+z.y*z.y > 4.0) {' +\n *   '      n = float(i)/float(I);' +\n *   '      break;' +\n *   '    }' +\n *   '    z = vec2(z.x*z.x-z.y*z.y, 2.0*z.x*z.y) + c;' +\n *   '  }' +\n *   '  gl_FragColor = vec4(0.5-cos(n*17.0)/2.0,0.5-cos(n*13.0)/2.0,0.5-cos(n*23.0)/2.0,1.0);' +\n *   '}';\n *\n * let mandel;\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n *\n *   // create and initialize the shader\n *   mandel = createShader(vs, fs);\n *   shader(mandel);\n *   noStroke();\n *\n *   // 'p' is the center point of the Mandelbrot image\n *   mandel.setUniform('p', [-0.74364388703, 0.13182590421]);\n * }\n *\n * function draw() {\n *   // 'r' is the size of the image in Mandelbrot-space\n *   mandel.setUniform('r', 1.5 * exp(-6.5 * (1 + sin(millis() / 2000))));\n *   quad(-1, -1, 1, -1, 1, 1, -1, 1);\n * }\n * </code>\n * </div>\n *\n * @alt\n * zooming Mandelbrot set. a colorful, infinitely detailed fractal.\n */\np5.prototype.createShader = function(vertSrc, fragSrc) {\n  this._assert3d('createShader');\n  p5._validateParameters('createShader', arguments);\n  return new p5.Shader(this._renderer, vertSrc, fragSrc);\n};\n\n/**\n * The <a href=\"#/p5/shader\">shader()</a> function lets the user provide a custom shader\n * to fill in shapes in WEBGL mode. Users can create their\n * own shaders by loading vertex and fragment shaders with\n * <a href=\"#/p5/loadShader\">loadShader()</a>.\n *\n * @method shader\n * @chainable\n * @param {p5.Shader} [s] the desired <a href=\"#/p5.Shader\">p5.Shader</a> to use for rendering\n * shapes.\n */\np5.prototype.shader = function(s) {\n  this._assert3d('shader');\n  p5._validateParameters('shader', arguments);\n\n  if (s._renderer === undefined) {\n    s._renderer = this._renderer;\n  }\n\n  if (s.isStrokeShader()) {\n    this._renderer.userStrokeShader = s;\n  } else {\n    this._renderer.userFillShader = s;\n    this._renderer._useNormalMaterial = false;\n  }\n\n  s.init();\n\n  return this;\n};\n\n/**\n * This function restores the default shaders in WEBGL mode. Code that runs\n * after resetShader() will not be affected by previously defined\n * shaders. Should be run after <a href=\"#/p5/shader\">shader()</a>.\n *\n * @method resetShader\n * @chainable\n */\np5.prototype.resetShader = function() {\n  this._renderer.userFillShader = this._renderer.userStrokeShader = null;\n  return this;\n};\n\n/**\n * Normal material for geometry. You can view all\n * possible materials in this\n * <a href=\"https://p5js.org/examples/3d-materials.html\">example</a>.\n * @method normalMaterial\n * @chainable\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n *\n * function draw() {\n *   background(200);\n *   normalMaterial();\n *   sphere(40);\n * }\n * </code>\n * </div>\n *\n * @alt\n * Red, green and blue gradient.\n *\n */\np5.prototype.normalMaterial = function() {\n  this._assert3d('normalMaterial');\n  p5._validateParameters('normalMaterial', arguments);\n  this._renderer.drawMode = constants.FILL;\n  this._renderer._useSpecularMaterial = false;\n  this._renderer._useNormalMaterial = true;\n  this._renderer.curFillColor = [1, 1, 1, 1];\n  this._renderer._setProperty('_doFill', true);\n  this.noStroke();\n  return this;\n};\n\n/**\n * Texture for geometry.  You can view other possible materials in this\n * <a href=\"https://p5js.org/examples/3d-materials.html\">example</a>.\n * @method texture\n * @param {p5.Image|p5.MediaElement|p5.Graphics} tex 2-dimensional graphics\n *                    to render as texture\n * @chainable\n * @example\n * <div>\n * <code>\n * let img;\n * function preload() {\n *   img = loadImage('assets/laDefense.jpg');\n * }\n *\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n *\n * function draw() {\n *   background(0);\n *   rotateZ(frameCount * 0.01);\n *   rotateX(frameCount * 0.01);\n *   rotateY(frameCount * 0.01);\n *   //pass image as texture\n *   texture(img);\n *   box(200, 200, 200);\n * }\n * </code>\n * </div>\n *\n * <div>\n * <code>\n * let pg;\n *\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n *   pg = createGraphics(200, 200);\n *   pg.textSize(75);\n * }\n *\n * function draw() {\n *   background(0);\n *   pg.background(255);\n *   pg.text('hello!', 0, 100);\n *   //pass image as texture\n *   texture(pg);\n *   rotateX(0.5);\n *   noStroke();\n *   plane(50);\n * }\n * </code>\n * </div>\n *\n * <div>\n * <code>\n * let vid;\n * function preload() {\n *   vid = createVideo('assets/fingers.mov');\n *   vid.hide();\n * }\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n *\n * function draw() {\n *   background(0);\n *   //pass video frame as texture\n *   texture(vid);\n *   rect(-40, -40, 80, 80);\n * }\n *\n * function mousePressed() {\n *   vid.loop();\n * }\n * </code>\n * </div>\n *\n * @alt\n * Rotating view of many images umbrella and grid roof on a 3d plane\n * black canvas\n * black canvas\n *\n */\np5.prototype.texture = function(tex) {\n  this._assert3d('texture');\n  p5._validateParameters('texture', arguments);\n\n  this._renderer.drawMode = constants.TEXTURE;\n  this._renderer._useSpecularMaterial = false;\n  this._renderer._useNormalMaterial = false;\n  this._renderer._tex = tex;\n  this._renderer._setProperty('_doFill', true);\n\n  return this;\n};\n\n/**\n * Sets the coordinate space for texture mapping. The default mode is IMAGE\n * which refers to the actual coordinates of the image.\n * NORMAL refers to a normalized space of values ranging from 0 to 1.\n * This function only works in WEBGL mode.\n *\n * With IMAGE, if an image is 100 x 200 pixels, mapping the image onto the entire\n * size of a quad would require the points (0,0) (100, 0) (100,200) (0,200).\n * The same mapping in NORMAL is (0,0) (1,0) (1,1) (0,1).\n * @method  textureMode\n * @param {Constant} mode either IMAGE or NORMAL\n * @example\n * <div>\n * <code>\n * let img;\n *\n * function preload() {\n *   img = loadImage('assets/laDefense.jpg');\n * }\n *\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n *\n * function draw() {\n *   texture(img);\n *   textureMode(NORMAL);\n *   beginShape();\n *   vertex(-50, -50, 0, 0);\n *   vertex(50, -50, 1, 0);\n *   vertex(50, 50, 1, 1);\n *   vertex(-50, 50, 0, 1);\n *   endShape();\n * }\n * </code>\n * </div>\n *\n * @alt\n * the underside of a white umbrella and gridded ceiling above\n *\n * <div>\n * <code>\n * let img;\n *\n * function preload() {\n *   img = loadImage('assets/laDefense.jpg');\n * }\n *\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n *\n * function draw() {\n *   texture(img);\n *   textureMode(NORMAL);\n *   beginShape();\n *   vertex(-50, -50, 0, 0);\n *   vertex(50, -50, img.width, 0);\n *   vertex(50, 50, img.width, img.height);\n *   vertex(-50, 50, 0, img.height);\n *   endShape();\n * }\n * </code>\n * </div>\n *\n * @alt\n * the underside of a white umbrella and gridded ceiling above\n *\n */\np5.prototype.textureMode = function(mode) {\n  if (mode !== constants.IMAGE && mode !== constants.NORMAL) {\n    console.warn(\n      'You tried to set ' + mode + ' textureMode only supports IMAGE & NORMAL '\n    );\n  } else {\n    this._renderer.textureMode = mode;\n  }\n};\n\n/**\n * Sets the global texture wrapping mode. This controls how textures behave\n * when their uv's go outside of the 0 - 1 range. There are three options:\n * CLAMP, REPEAT, and MIRROR.\n *\n * CLAMP causes the pixels at the edge of the texture to extend to the bounds\n * REPEAT causes the texture to tile repeatedly until reaching the bounds\n * MIRROR works similarly to REPEAT but it flips the texture with every new tile\n *\n * REPEAT & MIRROR are only available if the texture\n * is a power of two size (128, 256, 512, 1024, etc.).\n *\n * This method will affect all textures in your sketch until a subsequent\n * textureWrap call is made.\n *\n * If only one argument is provided, it will be applied to both the\n * horizontal and vertical axes.\n * @method textureWrap\n * @param {Constant} wrapX either CLAMP, REPEAT, or MIRROR\n * @param {Constant} [wrapY] either CLAMP, REPEAT, or MIRROR\n * @example\n * <div>\n * <code>\n * let img;\n * function preload() {\n *   img = loadImage('assets/rockies128.jpg');\n * }\n *\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n *   textureWrap(MIRROR);\n * }\n *\n * function draw() {\n *   background(0);\n *\n *   let dX = mouseX;\n *   let dY = mouseY;\n *\n *   let u = lerp(1.0, 2.0, dX);\n *   let v = lerp(1.0, 2.0, dY);\n *\n *   scale(width / 2);\n *\n *   texture(img);\n *\n *   beginShape(TRIANGLES);\n *   vertex(-1, -1, 0, 0, 0);\n *   vertex(1, -1, 0, u, 0);\n *   vertex(1, 1, 0, u, v);\n *\n *   vertex(1, 1, 0, u, v);\n *   vertex(-1, 1, 0, 0, v);\n *   vertex(-1, -1, 0, 0, 0);\n *   endShape();\n * }\n * </code>\n * </div>\n *\n * @alt\n * an image of the rocky mountains repeated in mirrored tiles\n *\n */\np5.prototype.textureWrap = function(wrapX, wrapY) {\n  wrapY = wrapY || wrapX;\n\n  this._renderer.textureWrapX = wrapX;\n  this._renderer.textureWrapY = wrapY;\n\n  var textures = this._renderer.textures;\n  for (var i = 0; i < textures.length; i++) {\n    textures[i].setWrapMode(wrapX, wrapY);\n  }\n};\n\n/**\n * Ambient material for geometry with a given color. You can view all\n * possible materials in this\n * <a href=\"https://p5js.org/examples/3d-materials.html\">example</a>.\n * @method  ambientMaterial\n * @param  {Number} v1  gray value, red or hue value\n *                         (depending on the current color mode),\n * @param  {Number} [v2] green or saturation value\n * @param  {Number} [v3] blue or brightness value\n * @param  {Number} [a]  opacity\n * @chainable\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n * function draw() {\n *   background(0);\n *   noStroke();\n *   ambientLight(200);\n *   ambientMaterial(70, 130, 230);\n *   sphere(40);\n * }\n * </code>\n * </div>\n *\n * @alt\n * radiating light source from top right of canvas\n *\n */\n/**\n * @method  ambientMaterial\n * @param  {Number[]|String|p5.Color} color  color, color Array, or CSS color string\n * @chainable\n */\np5.prototype.ambientMaterial = function(v1, v2, v3, a) {\n  this._assert3d('ambientMaterial');\n  p5._validateParameters('ambientMaterial', arguments);\n\n  var color = p5.prototype.color.apply(this, arguments);\n  this._renderer.curFillColor = color._array;\n  this._renderer._useSpecularMaterial = false;\n  this._renderer._useNormalMaterial = false;\n  this._renderer._enableLighting = true;\n  this._renderer._tex = null;\n\n  return this;\n};\n\n/**\n * Specular material for geometry with a given color. You can view all\n * possible materials in this\n * <a href=\"https://p5js.org/examples/3d-materials.html\">example</a>.\n * @method specularMaterial\n * @param  {Number} v1  gray value, red or hue value\n *                       (depending on the current color mode),\n * @param  {Number} [v2] green or saturation value\n * @param  {Number} [v3] blue or brightness value\n * @param  {Number} [a]  opacity\n * @chainable\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n * function draw() {\n *   background(0);\n *   noStroke();\n *   ambientLight(50);\n *   pointLight(250, 250, 250, 100, 100, 30);\n *   specularMaterial(250);\n *   sphere(40);\n * }\n * </code>\n * </div>\n *\n * @alt\n * diffused radiating light source from top right of canvas\n *\n */\n/**\n * @method specularMaterial\n * @param  {Number[]|String|p5.Color} color color Array, or CSS color string\n * @chainable\n */\np5.prototype.specularMaterial = function(v1, v2, v3, a) {\n  this._assert3d('specularMaterial');\n  p5._validateParameters('specularMaterial', arguments);\n\n  var color = p5.prototype.color.apply(this, arguments);\n  this._renderer.curFillColor = color._array;\n  this._renderer._useSpecularMaterial = true;\n  this._renderer._useNormalMaterial = false;\n  this._renderer._enableLighting = true;\n  this._renderer._tex = null;\n\n  return this;\n};\n\n/**\n * Sets the amount of gloss in the surface of shapes.\n * Used in combination with specularMaterial() in setting\n * the material properties of shapes. The default and minimum value is 1.\n * @method shininess\n * @param {Number} shine Degree of Shininess.\n *                       Defaults to 1.\n * @chainable\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n * function draw() {\n *   background(0);\n *   noStroke();\n *   let locX = mouseX - width / 2;\n *   let locY = mouseY - height / 2;\n *   ambientLight(60, 60, 60);\n *   pointLight(255, 255, 255, locX, locY, 50);\n *   specularMaterial(250);\n *   translate(-25, 0, 0);\n *   shininess(1);\n *   sphere(20);\n *   translate(50, 0, 0);\n *   shininess(20);\n *   sphere(20);\n * }\n * </code>\n * </div>\n * @alt\n * Shininess on Camera changes position with mouse\n */\np5.prototype.shininess = function(shine) {\n  this._assert3d('shininess');\n  p5._validateParameters('shininess', arguments);\n\n  if (shine < 1) {\n    shine = 1;\n  }\n  this._renderer._useShininess = shine;\n  return this;\n};\n\n/**\n * @private blends colors according to color components.\n * If alpha value is less than 1, we need to enable blending\n * on our gl context.  Otherwise opaque objects need to a depthMask.\n * @param  {Number[]} color [description]\n * @return {Number[]]}  Normalized numbers array\n */\np5.RendererGL.prototype._applyColorBlend = function(colors) {\n  var gl = this.GL;\n\n  var isTexture = this.drawMode === constants.TEXTURE;\n  if (isTexture || colors[colors.length - 1] < 1.0) {\n    gl.depthMask(isTexture);\n    gl.enable(gl.BLEND);\n    this._applyBlendMode();\n  } else {\n    gl.depthMask(true);\n    gl.disable(gl.BLEND);\n  }\n  return colors;\n};\n\n/**\n * @private sets blending in gl context to curBlendMode\n * @param  {Number[]} color [description]\n * @return {Number[]]}  Normalized numbers array\n */\np5.RendererGL.prototype._applyBlendMode = function() {\n  var gl = this.GL;\n  switch (this.curBlendMode) {\n    case constants.BLEND:\n    case constants.ADD:\n      gl.blendEquation(gl.FUNC_ADD);\n      gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n      break;\n    case constants.MULTIPLY:\n      gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n      gl.blendFuncSeparate(gl.ZERO, gl.SRC_COLOR, gl.ONE, gl.ONE);\n      break;\n    case constants.SCREEN:\n      gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n      gl.blendFuncSeparate(gl.ONE_MINUS_DST_COLOR, gl.ONE, gl.ONE, gl.ONE);\n      break;\n    case constants.EXCLUSION:\n      gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n      gl.blendFuncSeparate(\n        gl.ONE_MINUS_DST_COLOR,\n        gl.ONE_MINUS_SRC_COLOR,\n        gl.ONE,\n        gl.ONE\n      );\n      break;\n    case constants.REPLACE:\n      gl.blendEquation(gl.FUNC_ADD);\n      gl.blendFunc(gl.ONE, gl.ZERO);\n      break;\n    case constants.SUBTRACT:\n      gl.blendEquationSeparate(gl.FUNC_REVERSE_SUBTRACT, gl.FUNC_ADD);\n      gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE, gl.ONE, gl.ONE);\n      break;\n    case constants.DARKEST:\n      if (this.blendExt) {\n        gl.blendEquationSeparate(this.blendExt.MIN_EXT, gl.FUNC_ADD);\n        gl.blendFuncSeparate(gl.ONE, gl.ONE, gl.ONE, gl.ONE);\n      } else {\n        console.warn(\n          'blendMode(DARKEST) does not work in your browser in WEBGL mode.'\n        );\n      }\n      break;\n    case constants.LIGHTEST:\n      if (this.blendExt) {\n        gl.blendEquationSeparate(this.blendExt.MAX_EXT, gl.FUNC_ADD);\n        gl.blendFuncSeparate(gl.ONE, gl.ONE, gl.ONE, gl.ONE);\n      } else {\n        console.warn(\n          'blendMode(LIGHTEST) does not work in your browser in WEBGL mode.'\n        );\n      }\n      break;\n    default:\n      console.error(\n        'Oops! Somehow RendererGL set curBlendMode to an unsupported mode.'\n      );\n      break;\n  }\n};\n\nmodule.exports = p5;\n",
          "filepath": "data/repos/processing/p5.js-0.8/src/webgl/material.js",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      },
      {
        "id": "cdc76431-32e4-45aa-82bf-2cedcb7af302",
        "score": 0.015625,
        "payload": {
          "text": "var toonShader;\n\nfunction preload() {\n  toonShader = loadShader('vert.glsl', 'frag.glsl');\n}\n\nfunction setup() {\n  createCanvas(windowWidth, windowHeight, WEBGL);\n  noStroke();\n  shader(toonShader);\n  toonShader.setUniform('fraction', 1.0);\n}\n\nfunction draw() {\n  background(0);\n  var dirY = (mouseY / height - 0.5) * 2;\n  var dirX = (mouseX / width - 0.5) * 2;\n  directionalLight(255, 204, 204, -dirX, -dirY, -1);\n  ambientMaterial(0, 255, 255);\n  sphere(120);\n}\n",
          "filepath": "data/repos/processing/p5.js-0.8/test/manual-test-examples/webgl/customShader/toonShader/sketch.js",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      },
      {
        "id": "3f4db854-0576-444c-958b-acb59e315d36",
        "score": 0.015384615384615385,
        "payload": {
          "text": "/**\n * webgl texture mode example\n */\nvar img;\n\nfunction preload() {\n  img = loadImage('assets/UV_Grid_Sm.jpg');\n}\n\nfunction setup() {\n  createCanvas(windowWidth, windowHeight, WEBGL);\n}\n\nfunction draw() {\n  background(220);\n  noStroke();\n\n  texture(img);\n\n  push();\n  translate(-200, 0, 0);\n  textureMode(NORMAL);\n  beginShape();\n  vertex(-100, -100, 0, 0);\n  vertex(100, -100, 1, 0);\n  vertex(100, 100, 1, 1);\n  vertex(-100, 100, 0, 1);\n  endShape();\n  pop();\n\n  push();\n  translate(200, 0, 0);\n  textureMode(IMAGE);\n  beginShape();\n  vertex(-100, -100, 0, 0);\n  vertex(100, -100, img.width, 0);\n  vertex(100, 100, img.width, img.height);\n  vertex(-100, 100, 0, img.height);\n  endShape();\n  pop();\n}\n",
          "filepath": "data/repos/processing/p5.js-0.8/test/manual-test-examples/webgl/material/textureMode/sketch.js",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "processing__p5.js-3769",
    "model_patch": "diff --git a/src/webgl/p5.RendererGL.Retained.js b/src/webgl/p5.RendererGL.Retained.js\n--- a/src/webgl/p5.RendererGL.Retained.js\n+++ b/src/webgl/p5.RendererGL.Retained.js\n@@ -1,6 +1,7 @@\n //Retained Mode. The default mode for rendering 3D primitives\n //in WEBGL.\n 'use strict';\n+\n var p5 = require('../core/main');\n \n var hashCount = 0;\n@@ -42,7 +43,7 @@\n  * @param  {p5.Geometry}  obj contains geometry data\n  */\n p5.RendererGL.prototype.createBuffers = function(gId, obj) {\n-  var gl = this.GL;\n+  var gl = this.GL, shader;\n   //initialize the gl buffers for our geom groups\n   this._initBufferDefaults(gId);\n \n@@ -50,19 +51,21 @@\n \n   geometry.numberOfItems = obj.faces.length * 3;\n   geometry.lineVertexCount = obj.lineVertices.length;\n-\n-  var strokeShader = this._getRetainedStrokeShader();\n-  strokeShader.bindShader();\n-\n-  // initialize the stroke shader's 'aPosition' buffer, if used\n-  if (strokeShader.attributes.aPosition) {\n-    geometry.lineVertexBuffer = gl.createBuffer();\n-\n-    this._bindBuffer(\n-      geometry.lineVertexBuffer,\n-      gl.ARRAY_BUFFER,\n-      this._flatten(obj.lineVertices),\n-      Float32Array,\n-      gl.STATIC_DRAW\n-    );\n-\n-    strokeShader.enableAttrib(\n-      strokeShader.attributes.aPosition.location,\n-      3,\n-      gl.FLOAT,\n-      false,\n-      0,\n-      0\n-    );\n+  \n+  // Create buffers for all shaders that might be used\n+  var shaders = [this._getRetainedStrokeShader(), this._getRetainedFillShader()];\n+  \n+  for (var i = 0; i < shaders.length; i++) {\n+    shader = shaders[i];\n+    shader.bindShader();\n+\n+    // initialize the shader's 'aPosition' buffer, if used\n+    if (shader.attributes.aPosition) {\n+      geometry.vertexBuffer = gl.createBuffer();\n+\n+      this._bindBuffer(\n+        geometry.vertexBuffer,\n+        gl.ARRAY_BUFFER,\n+        this._vToNArray(obj.vertices),\n+        Float32Array,\n+        gl.STATIC_DRAW\n+      );\n+\n+      shader.enableAttrib(\n+        shader.attributes.aPosition.location,\n+        3,\n+        gl.FLOAT,\n+        false,\n+        0,\n+        0\n+      );\n+    }\n+\n+    // initialize the shader's 'aNormal' buffer, if used\n+    if (shader.attributes.aNormal) {\n+      geometry.normalBuffer = gl.createBuffer();\n+\n+      this._bindBuffer(\n+        geometry.normalBuffer,\n+        gl.ARRAY_BUFFER,\n+        this._vToNArray(obj.vertexNormals),\n+        Float32Array,\n+        gl.STATIC_DRAW\n+      );\n+\n+      shader.enableAttrib(\n+        shader.attributes.aNormal.location,\n+        3,\n+        gl.FLOAT,\n+        false,\n+        0,\n+        0\n+      );\n+    }\n+\n+    // initialize the shader's 'aTexCoord' buffer, if used\n+    if (shader.attributes.aTexCoord) {\n+      geometry.uvBuffer = gl.createBuffer();\n+\n+      this._bindBuffer(\n+        geometry.uvBuffer,\n+        gl.ARRAY_BUFFER,\n+        this._flatten(obj.uvs),\n+        Float32Array,\n+        gl.STATIC_DRAW\n+      );\n+\n+      shader.enableAttrib(\n+        shader.attributes.aTexCoord.location,\n+        2,\n+        gl.FLOAT,\n+        false,\n+        0,\n+        0\n+      );\n+    }\n+    shader.unbindShader();\n   }\n \n   // allocate space for faces",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 280.83,
      "issue_embedding_time_ms": 280.83,
      "retrieval_time_ms_jina": 1.06,
      "retrieval_time_ms": 1.06,
      "total_retrieval_time_ms": 281.89,
      "generation_time_ms": 8167.82,
      "total_io_time_ms": 8449.71,
      "input_total_token_limit": null,
      "issue_text_tokens": 556,
      "vlm_tokens": 0,
      "retrieved_tokens": 15919,
      "prompt_template_tokens": 545,
      "total_input_prompt_tokens": 17020,
      "output_generated_tokens": 872,
      "total_io_tokens": 17892,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nwebgl: render buffers are not not always created correctly\\n0.8.0 webgl.\\r\\n\\r\\n(from #3764)\\r\\n\\r\\nthe issue is that when creating a retained-mode geometry (any geometry, not just the glyph quad), it's checking the _current_ fill and stroke shaders for which buffers to create and which attributes to enable.\\r\\n\\r\\nhttps://github.com/processing/p5.js/blob/6640d149348dea0a1b3df61f0cf8442222403a9f/src/webgl/p5.RendererGL.Retained.js#L171-L172\\r\\n\\r\\nthis means that if you choose a shader that doesn't have a particular attribute, then create a (cached) geometry, that geometry won't have a buffer created for it that corresponds to that attribute. then, if you switch the current shader to one that _does_ have that attribute, it will fail to render because that buffer won't have been created.\\r\\n\\r\\nrepro, here: https://codepen.io/Spongman/pen/ZNoZoM?editors=0010\\r\\n\\r\\nthis test case creates and uses a shader that doesn't have a full suite of attributes. it then draws a sphere (in the `setup()` function). the sphere's geometry is created & cached. the bug is that the render buffers are also created at this time, and they're only created if the _current_ shader has the corresponding attribute. subsequently, when a regular fill shader is used to render the sphere (in the `draw()` function), the required render buffers are missing, and the sphere is drawn incorrectly, or not at all (probably depending on the webgl implementation):\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/1088194/58386210-0f0d9c80-7fb1-11e9-96db-0734d8bdcf3a.png)\\r\\n\\r\\n\\r\\n```javascript\\r\\nvar sh;\\r\\n\\r\\nfunction setup() {\\r\\n  createCanvas(windowWidth, windowHeight, WEBGL);\\r\\n  \\r\\n  sh = createShader(\\r\\n    'attribute vec3 aPosition; void main() { gl_Position = vec4(aPosition, 1.0); }',\\r\\n    'void main() { gl_FragColor = vec4(1.0,1.0,1.0,1.0); }'\\r\\n  );\\r\\n  \\r\\n  shader(sh);\\r\\n  noStroke();\\r\\n  sphere(200);\\r\\n}\\r\\n\\r\\nfunction windowResized() {\\r\\n  resizeCanvas(windowWidth, windowHeight);\\r\\n}\\r\\n\\r\\nfunction draw() {\\r\\n  background(0);\\r\\n  \\r\\n  // draw an orange sphere\\r\\n  fill(255, 128, 0);\\r\\n  directionalLight(255, 255, 255, 1, 1, -1);\\r\\n  sphere(200);\\r\\n}\\r\\n```\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of p5.RendererGL.Retained.js]\\n//Retained Mode. The default mode for rendering 3D primitives\\n//in WEBGL.\\n'use strict';\\n\\nvar p5 = require('../core/main');\\n\\nvar hashCount = 0;\\n/**\\n * _initBufferDefaults\\n * @private\\n * @description initializes buffer defaults. runs each time a new geometry is\\n * registered\\n * @param  {String} gId  key of the geometry object\\n */\\np5.RendererGL.prototype._initBufferDefaults = function(gId) {\\n  this._freeBuffers(gId);\\n\\n  //@TODO remove this limit on hashes in gHash\\n  hashCount++;\\n  if (hashCount > 1000) {\\n    var key = Object.keys(this.gHash)[0];\\n    delete this.gHash[key];\\n    hashCount--;\\n  }\\n\\n  //create a new entry in our gHash\\n  this.gHash[gId] = {};\\n};\\n\\np5.RendererGL.prototype._freeBuffers = function(gId) {\\n  var geometry = this.gHash[gId];\\n  if (!geometry) {\\n    return;\\n  }\\n\\n  delete this.gHash[gId];\\n  hashCount--;\\n\\n  var gl = this.GL;\\n  geometry.vertexBuffer && gl.deleteBuffer(geometry.vertexBuffer);\\n  geometry.normalBuffer && gl.deleteBuffer(geometry.normalBuffer);\\n  geometry.lineNormalBuffer && gl.deleteBuffer(geometry.lineNormalBuffer);\\n  geometry.uvBuffer && gl.deleteBuffer(geometry.uvBuffer);\\n  geometry.indexBuffer && gl.deleteBuffer(geometry.indexBuffer);\\n  geometry.lineVertexBuffer && gl.deleteBuffer(geometry.lineVertexBuffer);\\n};\\n/**\\n * createBuffers description\\n * @private\\n * @param  {String} gId    key of the geometry object\\n * @param  {p5.Geometry}  obj contains geometry data\\n */\\np5.RendererGL.prototype.createBuffers = function(gId, obj) {\\n  var gl = this.GL;\\n  //initialize the gl buffers for our geom groups\\n  this._initBufferDefaults(gId);\\n\\n  var geometry = this.gHash[gId];\\n\\n  geometry.numberOfItems = obj.faces.length * 3;\\n  geometry.lineVertexCount = obj.lineVertices.length;\\n\\n  var strokeShader = this._getRetainedStrokeShader();\\n  strokeShader.bindShader();\\n\\n  // initialize the stroke shader's 'aPosition' buffer, if used\\n  if (strokeShader.attributes.aPosition) {\\n    geometry.lineVertexBuffer = gl.createBuffer();\\n\\n    this._bindBuffer(\\n      geometry.lineVertexBuffer,\\n      gl.ARRAY_BUFFER,\\n      this._flatten(obj.lineVertices),\\n      Float32Array,\\n      gl.STATIC_DRAW\\n    );\\n\\n    strokeShader.enableAttrib(\\n      strokeShader.attributes.aPosition.location,\\n      3,\\n      gl.FLOAT,\\n      false,\\n      0,\\n      0\\n    );\\n  }\\n\\n  // initialize the stroke shader's 'aDirection' buffer, if used\\n  if (strokeShader.attributes.aDirection) {\\n    geometry.lineNormalBuffer = gl.createBuffer();\\n\\n    this._bindBuffer(\\n      geometry.lineNormalBuffer,\\n      gl.ARRAY_BUFFER,\\n      this._flatten(obj.lineNormals),\\n      Float32Array,\\n      gl.STATIC_DRAW\\n    );\\n\\n    strokeShader.enableAttrib(\\n      strokeShader.attributes.aDirection.location,\\n      4,\\n      gl.FLOAT,\\n      false,\\n      0,\\n      0\\n    );\\n  }\\n  strokeShader.unbindShader();\\n\\n  var fillShader = this._getRetainedFillShader();\\n  fillShader.bindShader();\\n\\n  // initialize the fill shader's 'aPosition' buffer, if used\\n  if (fillShader.attributes.aPosition) {\\n    geometry.vertexBuffer = gl.createBuffer();\\n\\n    // allocate space for vertex positions\\n    this._bindBuffer(\\n      geometry.vertexBuffer,\\n      gl.ARRAY_BUFFER,\\n      this._vToNArray(obj.vertices),\\n      Float32Array,\\n      gl.STATIC_DRAW\\n    );\\n\\n    fillShader.enableAttrib(\\n      fillShader.attributes.aPosition.location,\\n      3,\\n      gl.FLOAT,\\n      false,\\n      0,\\n      0\\n    );\\n  }\\n\\n  // allocate space for faces\\n  geometry.indexBuffer = gl.createBuffer();\\n  this._bindBuffer(\\n    geometry.indexBuffer,\\n    gl.ELEMENT_ARRAY_BUFFER,\\n    this._flatten(obj.faces),\\n    Uint16Array,\\n    gl.STATIC_DRAW\\n  );\\n\\n  // initialize the fill shader's 'aNormal' buffer, if used\\n  if (fillShader.attributes.aNormal) {\\n    geometry.normalBuffer = gl.createBuffer();\\n\\n    // allocate space for normals\\n    this._bindBuffer(\\n      geometry.normalBuffer,\\n      gl.ARRAY_BUFFER,\\n      this._vToNArray(obj.vertexNormals),\\n      Float32Array,\\n      gl.STATIC_DRAW\\n    );\\n\\n    fillShader.enableAttrib(\\n      fillShader.attributes.aNormal.location,\\n      3,\\n      gl.FLOAT,\\n      false,\\n      0,\\n      0\\n    );\\n  }\\n\\n  // initialize the fill shader's 'aTexCoord' buffer, if used\\n  if (fillShader.attributes.aTexCoord) {\\n    geometry.uvBuffer = gl.createBuffer();\\n\\n    // tex coords\\n    this._bindBuffer(\\n      geometry.uvBuffer,\\n      gl.ARRAY_BUFFER,\\n      this._flatten(obj.uvs),\\n      Float32Array,\\n      gl.STATIC_DRAW\\n    );\\n\\n    fillShader.enableAttrib(\\n      fillShader.attributes.aTexCoord.location,\\n      2,\\n      gl.FLOAT,\\n      false,\\n      0,\\n      0\\n    );\\n  }\\n  fillShader.unbindShader();\\n  return geometry;\\n};\\n\\n/**\\n * Draws buffers given a geometry key ID\\n * @private\\n * @param  {String} gId     ID in our geom hash\\n * @chainable\\n */\\np5.RendererGL.prototype.drawBuffers = function(gId) {\\n  var gl = this.GL;\\n  var geometry = this.gHash[gId];\\n\\n  if (this._doStroke && geometry.lineVertexCount > 0) {\\n    var strokeShader = this._getRetainedStrokeShader();\\n    this._setStrokeUniforms(strokeShader);\\n\\n    // bind the stroke shader's 'aPosition' buffer\\n    if (geometry.lineVertexBuffer) {\\n      this._bindBuffer(geometry.lineVertexBuffer, gl.ARRAY_BUFFER);\\n      strokeShader.enableAttrib(\\n        strokeShader.attributes.aPosition.location,\\n        3,\\n        gl.FLOAT,\\n        false,\\n        0,\\n        0\\n      );\\n    }\\n\\n    // bind the stroke shader's 'aDirection' buffer\\n    if (geometry.lineNormalBuffer) {\\n      this._bindBuffer(geometry.lineNormalBuffer, gl.ARRAY_BUFFER);\\n      strokeShader.enableAttrib(\\n        strokeShader.attributes.aDirection.location,\\n        4,\\n        gl.FLOAT,\\n        false,\\n        0,\\n        0\\n      );\\n    }\\n\\n    this._applyColorBlend(this.curStrokeColor);\\n    this._drawArrays(gl.TRIANGLES, gId);\\n    strokeShader.unbindShader();\\n  }\\n\\n  if (this._doFill !== false) {\\n    var fillShader = this._getRetainedFillShader();\\n    this._setFillUniforms(fillShader);\\n\\n    // bind the fill shader's 'aPosition' buffer\\n    if (geometry.vertexBuffer) {\\n      //vertex position buffer\\n      this._bindBuffer(geometry.vertexBuffer, gl.ARRAY_BUFFER);\\n      fillShader.enableAttrib(\\n        fillShader.attributes.aPosition.location,\\n        3,\\n        gl.FLOAT,\\n        false,\\n        0,\\n        0\\n      );\\n    }\\n\\n    if (geometry.indexBuffer) {\\n      //vertex index buffer\\n      this._bindBuffer(geometry.indexBuffer, gl.ELEMENT_ARRAY_BUFFER);\\n    }\\n\\n    // bind the fill shader's 'aNormal' buffer\\n    if (geometry.normalBuffer) {\\n      this._bindBuffer(geometry.normalBuffer, gl.ARRAY_BUFFER);\\n      fillShader.enableAttrib(\\n        fillShader.attributes.aNormal.location,\\n        3,\\n        gl.FLOAT,\\n        false,\\n        0,\\n        0\\n      );\\n    }\\n\\n    // bind the fill shader's 'aTexCoord' buffer\\n    if (geometry.uvBuffer) {\\n      // uv buffer\\n      this._bindBuffer(geometry.uvBuffer, gl.ARRAY_BUFFER);\\n      fillShader.enableAttrib(\\n        fillShader.attributes.aTexCoord.location,\\n        2,\\n        gl.FLOAT,\\n        false,\\n        0,\\n        0\\n      );\\n    }\\n\\n    this._applyColorBlend(this.curFillColor);\\n    this._drawElements(gl.TRIANGLES, gId);\\n    fillShader.unbindShader();\\n  }\\n  return this;\\n};\\n\\n/**\\n * Calls drawBuffers() with a scaled model/view matrix.\\n *\\n * This is used by various 3d primitive methods (in primitives.js, eg. plane,\\n * box, torus, etc...) to allow caching of un-scaled geometries. Those\\n * geometries are generally created with unit-length dimensions, cached as\\n * such, and then scaled appropriately in this method prior to rendering.\\n *\\n * @private\\n * @method drawBuffersScaled\\n * @param {String} gId     ID in our geom hash\\n * @param {Number} scaleX  the amount to scale in the X direction\\n * @param {Number} scaleY  the amount to scale in the Y direction\\n * @param {Number} scaleZ  the amount to scale in the Z direction\\n */\\np5.RendererGL.prototype.drawBuffersScaled = function(\\n  gId,\\n  scaleX,\\n  scaleY,\\n  scaleZ\\n) {\\n  var uMVMatrix = this.uMVMatrix.copy();\\n  try {\\n    this.uMVMatrix.scale(scaleX, scaleY, scaleZ);\\n    this.drawBuffers(gId);\\n  } finally {\\n    this.uMVMatrix = uMVMatrix;\\n  }\\n};\\n\\np5.RendererGL.prototype._drawArrays = function(drawMode, gId) {\\n  this.GL.drawArrays(drawMode, 0, this.gHash[gId].lineVertexCount);\\n  this._pixelsState._pixelsDirty = true;\\n  return this;\\n};\\n\\np5.RendererGL.prototype._drawElements = function(drawMode, gId) {\\n  this.GL.drawElements(\\n    drawMode,\\n    this.gHash[gId].numberOfItems,\\n    this.GL.UNSIGNED_SHORT,\\n    0\\n  );\\n  this._pixelsState._pixelsDirty = true;\\n};\\n\\np5.RendererGL.prototype._drawPoints = function(vertices, vertexBuffer) {\\n  var gl = this.GL;\\n  var pointShader = this._getImmediatePointShader();\\n  this._setPointUniforms(pointShader);\\n\\n  this._bindBuffer(\\n    vertexBuffer,\\n    gl.ARRAY_BUFFER,\\n    this._vToNArray(vertices),\\n    Float32Array,\\n    gl.STATIC_DRAW\\n  );\\n\\n  pointShader.enableAttrib(\\n    pointShader.attributes.aPosition.location,\\n    3,\\n    gl.FLOAT,\\n    false,\\n    0,\\n    0\\n  );\\n\\n  gl.drawArrays(gl.Points, 0, vertices.length);\\n\\n  pointShader.unbindShader();\\n  this._pixelsState._pixelsDirty = true;\\n};\\n\\nmodule.exports = p5.RendererGL;\\n\\n[end of p5.RendererGL.Retained.js]\\n[start of p5.Shader.js]\\nsuite('p5.Shader', function() {\\n  var myp5;\\n\\n  if (!window.Modernizr.webgl) {\\n    //assert(false, 'could not run gl tests');\\n    return;\\n  }\\n\\n  setup(function() {\\n    myp5 = new p5(function(p) {\\n      p.setup = function() {\\n        p.createCanvas(100, 100, p.WEBGL);\\n        p.pointLight(250, 250, 250, 100, 100, 0);\\n        p.ambientMaterial(250);\\n      };\\n    });\\n  });\\n\\n  var testUniforms = function(shaderName, uniforms, expectedUniforms) {\\n    // assert(expectedUniforms.length === Object.keys(uniforms).length,\\n    //   shaderName + ' expected ' + expectedUniforms.length + ' uniforms but has ' +\\n    //   Object.keys(uniforms).length);\\n\\n    // test each one\\n    for (var i = 0; i < expectedUniforms.length; i++) {\\n      var uniform = uniforms[expectedUniforms[i]];\\n      assert(\\n        uniform !== undefined,\\n        shaderName + ' missing expectedUniform: ' + expectedUniforms[i]\\n      );\\n    }\\n  };\\n\\n  var testAttributes = function(shaderName, attributes, expectedAttributes) {\\n    // assert(expectedAttributes.length === Object.keys(attributes).length,\\n    //   shaderName + ' expected ' + expectedAttributes.length +\\n    //   ' attributes but has ' + Object.keys(attributes).length);\\n\\n    // test each one\\n    for (var i = 0; i < expectedAttributes.length; i++) {\\n      var attribute = attributes[expectedAttributes[i]];\\n      assert(\\n        attribute !== undefined,\\n        shaderName + ' missing expected attribute: ' + expectedAttributes[i]\\n      );\\n    }\\n  };\\n\\n  var testShader = function(\\n    shaderName,\\n    shaderObj,\\n    expectedAttributes,\\n    expectedUniforms\\n  ) {\\n    shaderObj.bindShader();\\n    testAttributes(shaderName, shaderObj.attributes, expectedAttributes);\\n    testUniforms(shaderName, shaderObj.uniforms, expectedUniforms);\\n    shaderObj.unbindShader();\\n  };\\n\\n  teardown(function() {\\n    myp5.remove();\\n  });\\n\\n  suite('Shader', function() {\\n    test('Light Shader', function() {\\n      var expectedAttributes = ['aPosition', 'aNormal', 'aTexCoord'];\\n\\n      var expectedUniforms = [\\n        'uModelViewMatrix',\\n        'uProjectionMatrix',\\n        'uNormalMatrix',\\n        'uAmbientLightCount',\\n        'uDirectionalLightCount',\\n        'uPointLightCount',\\n        'uAmbientColor',\\n        'uLightingDirection',\\n        'uDirectionalColor',\\n        'uPointLightLocation',\\n        'uPointLightColor',\\n        'uSpecular',\\n        'uShininess',\\n        'uMaterialColor',\\n        'uSampler',\\n        'isTexture'\\n      ];\\n\\n      testShader(\\n        'Light Shader',\\n        myp5._renderer._getLightShader(),\\n        expectedAttributes,\\n        expectedUniforms\\n      );\\n    });\\n    test('Color Shader definition', function() {\\n      var expectedAttributes = ['aPosition'];\\n\\n      var expectedUniforms = [\\n        'uModelViewMatrix',\\n        'uProjectionMatrix',\\n        'uMaterialColor'\\n      ];\\n\\n      testShader(\\n        'Color Shader',\\n        myp5._renderer._getColorShader(),\\n        expectedAttributes,\\n        expectedUniforms\\n      );\\n    });\\n    test('Immediate Mode Shader definition', function() {\\n      var expectedAttributes = ['aPosition', 'aVertexColor'];\\n\\n      var expectedUniforms = [\\n        'uModelViewMatrix',\\n        'uProjectionMatrix',\\n        /*'uResolution',*/\\n        'uPointSize'\\n      ];\\n\\n      testShader(\\n        'Immediate Mode Shader',\\n        myp5._renderer._getImmediateModeShader(),\\n        expectedAttributes,\\n        expectedUniforms\\n      );\\n    });\\n    test('Normal Shader definition', function() {\\n      var expectedAttributes = ['aPosition', 'aNormal'];\\n\\n      var expectedUniforms = [\\n        'uModelViewMatrix',\\n        'uProjectionMatrix',\\n        'uNormalMatrix'\\n      ];\\n\\n      testShader(\\n        'Normal Shader',\\n        myp5._renderer._getNormalShader(),\\n        expectedAttributes,\\n        expectedUniforms\\n      );\\n    });\\n    test('Color Shader is set after fill()', function() {\\n      myp5.fill(0);\\n      var retainedColorShader = myp5._renderer._getColorShader();\\n      var texLightShader = myp5._renderer._getLightShader();\\n      var immediateColorShader = myp5._renderer._getImmediateModeShader();\\n      var selectedRetainedShader = myp5._renderer._getRetainedFillShader();\\n      var selectedImmediateShader = myp5._renderer._getImmediateFillShader();\\n\\n      // both color and light shader are valid, depending on\\n      // conditions set earlier.\\n      assert(\\n        retainedColorShader === selectedRetainedShader ||\\n          texLightShader === selectedRetainedShader,\\n        \\\"_renderer's retain mode shader was not color shader after fill\\\"\\n      );\\n      assert(\\n        immediateColorShader === selectedImmediateShader ||\\n          texLightShader === selectedImmediateShader,\\n        \\\"_renderer's immediate mode shader was not color shader after fill\\\"\\n      );\\n    });\\n    test('Normal Shader is set after normalMaterial()', function() {\\n      myp5.normalMaterial();\\n      var normalShader = myp5._renderer._getNormalShader();\\n      var selectedRetainedShader = myp5._renderer._getRetainedFillShader();\\n      var selectedImmediateShader = myp5._renderer._getRetainedFillShader();\\n      assert(\\n        normalShader === selectedRetainedShader,\\n        \\\"_renderer's retain mode shader was not normal shader\\\"\\n      );\\n      assert(\\n        normalShader === selectedImmediateShader,\\n        \\\"_renderer's retain mode shader was not normal shader\\\"\\n      );\\n    });\\n    test('Light shader set after ambientMaterial()', function() {\\n      var lightShader = myp5._renderer._getLightShader();\\n      myp5.ambientMaterial(128);\\n      var selectedRetainedShader = myp5._renderer._getRetainedFillShader();\\n      var selectedImmediateShader = myp5._renderer._getImmediateFillShader();\\n      assert(\\n        lightShader === selectedRetainedShader,\\n        \\\"_renderer's retain mode shader was not light shader \\\" +\\n          'after call to ambientMaterial()'\\n      );\\n      assert(\\n        lightShader === selectedImmediateShader,\\n        \\\"_renderer's immediate mode shader was not light shader\\\" +\\n          'after call to ambientMaterial()'\\n      );\\n    });\\n    test('Light shader set after specularMaterial()', function() {\\n      var lightShader = myp5._renderer._getLightShader();\\n      myp5.specularMaterial(128);\\n      var selectedRetainedShader = myp5._renderer._getRetainedFillShader();\\n      var selectedImmediateShader = myp5._renderer._getImmediateFillShader();\\n      assert(\\n        lightShader === selectedRetainedShader,\\n        \\\"_renderer's retain mode shader was not light shader \\\" +\\n          'after call to specularMaterial()'\\n      );\\n      assert(\\n        lightShader === selectedImmediateShader,\\n        \\\"_renderer's immediate mode shader was not light shader \\\" +\\n          'after call to specularMaterial()'\\n      );\\n    });\\n\\n    test('Able to setUniform empty arrays', function() {\\n      myp5.shader(myp5._renderer._getLightShader());\\n      var s = myp5._renderer.userFillShader;\\n\\n      s.setUniform('uMaterialColor', []);\\n      s.setUniform('uLightingDirection', []);\\n    });\\n\\n    test('Able to set shininess', function() {\\n      assert.deepEqual(myp5._renderer._useShininess, 1);\\n      myp5.shininess(50);\\n      assert.deepEqual(myp5._renderer._useShininess, 50);\\n    });\\n\\n    test('Shader is reset after resetShader is called', function() {\\n      myp5.shader(myp5._renderer._getColorShader());\\n      var prevShader = myp5._renderer.userFillShader;\\n      assert.isTrue(prevShader !== null);\\n\\n      myp5.resetShader();\\n      var curShader = myp5._renderer.userFillShader;\\n      assert.isTrue(curShader === null);\\n    });\\n  });\\n});\\n\\n[end of p5.Shader.js]\\n[start of p5.RendererGL.js]\\n'use strict';\\n\\nvar p5 = require('../core/main');\\nvar constants = require('../core/constants');\\nvar libtess = require('libtess');\\nrequire('./p5.Shader');\\nrequire('./p5.Camera');\\nrequire('../core/p5.Renderer');\\nrequire('./p5.Matrix');\\nvar fs = require('fs');\\n\\nvar defaultShaders = {\\n  immediateVert: fs.readFileSync(\\n    __dirname + '/shaders/immediate.vert',\\n    'utf-8'\\n  ),\\n  vertexColorVert: fs.readFileSync(\\n    __dirname + '/shaders/vertexColor.vert',\\n    'utf-8'\\n  ),\\n  vertexColorFrag: fs.readFileSync(\\n    __dirname + '/shaders/vertexColor.frag',\\n    'utf-8'\\n  ),\\n  normalVert: fs.readFileSync(__dirname + '/shaders/normal.vert', 'utf-8'),\\n  normalFrag: fs.readFileSync(__dirname + '/shaders/normal.frag', 'utf-8'),\\n  basicFrag: fs.readFileSync(__dirname + '/shaders/basic.frag', 'utf-8'),\\n  lightVert: fs.readFileSync(__dirname + '/shaders/light.vert', 'utf-8'),\\n  lightTextureFrag: fs.readFileSync(\\n    __dirname + '/shaders/light_texture.frag',\\n    'utf-8'\\n  ),\\n  phongVert: fs.readFileSync(__dirname + '/shaders/phong.vert', 'utf-8'),\\n  phongFrag: fs.readFileSync(__dirname + '/shaders/phong.frag', 'utf-8'),\\n  fontVert: fs.readFileSync(__dirname + '/shaders/font.vert', 'utf-8'),\\n  fontFrag: fs.readFileSync(__dirname + '/shaders/font.frag', 'utf-8'),\\n  lineVert: fs.readFileSync(__dirname + '/shaders/line.vert', 'utf-8'),\\n  lineFrag: fs.readFileSync(__dirname + '/shaders/line.frag', 'utf-8'),\\n  pointVert: fs.readFileSync(__dirname + '/shaders/point.vert', 'utf-8'),\\n  pointFrag: fs.readFileSync(__dirname + '/shaders/point.frag', 'utf-8')\\n};\\n\\n/**\\n * 3D graphics class\\n * @private\\n * @class p5.RendererGL\\n * @constructor\\n * @extends p5.Renderer\\n * @todo extend class to include public method for offscreen\\n * rendering (FBO).\\n *\\n */\\np5.RendererGL = function(elt, pInst, isMainCanvas, attr) {\\n  p5.Renderer.call(this, elt, pInst, isMainCanvas);\\n  this._setAttributeDefaults(pInst);\\n  this._initContext();\\n  this.isP3D = true; //lets us know we're in 3d mode\\n  this.GL = this.drawingContext;\\n\\n  // lights\\n\\n  this._enableLighting = false;\\n\\n  this.ambientLightColors = [];\\n  this.directionalLightDirections = [];\\n  this.directionalLightColors = [];\\n\\n  this.pointLightPositions = [];\\n  this.pointLightColors = [];\\n\\n  this.curFillColor = [1, 1, 1, 1];\\n  this.curStrokeColor = [0, 0, 0, 1];\\n  this.curBlendMode = constants.BLEND;\\n  this.blendExt = this.GL.getExtension('EXT_blend_minmax');\\n\\n  this._useSpecularMaterial = false;\\n  this._useNormalMaterial = false;\\n  this._useShininess = 1;\\n\\n  /**\\n   * model view, projection, & normal\\n   * matrices\\n   */\\n  this.uMVMatrix = new p5.Matrix();\\n  this.uPMatrix = new p5.Matrix();\\n  this.uNMatrix = new p5.Matrix('mat3');\\n\\n  // Camera\\n  this._curCamera = new p5.Camera(this);\\n  this._curCamera._computeCameraDefaultSettings();\\n  this._curCamera._setDefaultCamera();\\n\\n  //Geometry & Material hashes\\n  this.gHash = {};\\n\\n  this._defaultLightShader = undefined;\\n  this._defaultImmediateModeShader = undefined;\\n  this._defaultNormalShader = undefined;\\n  this._defaultColorShader = undefined;\\n  this._defaultPointShader = undefined;\\n\\n  this._pointVertexBuffer = this.GL.createBuffer();\\n\\n  this.userFillShader = undefined;\\n  this.userStrokeShader = undefined;\\n  this.userPointShader = undefined;\\n\\n  //Imediate Mode\\n  //default drawing is done in Retained Mode\\n  this.isImmediateDrawing = false;\\n  this.immediateMode = {};\\n\\n  this.pointSize = 5.0; //default point size\\n  this.curStrokeWeight = 1;\\n\\n  // array of textures created in this gl context via this.getTexture(src)\\n  this.textures = [];\\n\\n  this.textureMode = constants.IMAGE;\\n  // default wrap settings\\n  this.textureWrapX = constants.CLAMP;\\n  this.textureWrapY = constants.CLAMP;\\n  this._tex = null;\\n  this._curveTightness = 6;\\n\\n  // lookUpTable for coefficients needed to be calculated for bezierVertex, same are used for curveVertex\\n  this._lookUpTableBezier = [];\\n  // lookUpTable for coefficients needed to be calculated for quadraticVertex\\n  this._lookUpTableQuadratic = [];\\n\\n  // current curveDetail in the Bezier lookUpTable\\n  this._lutBezierDetail = 0;\\n  // current curveDetail in the Quadratic lookUpTable\\n  this._lutQuadraticDetail = 0;\\n\\n  this._tessy = this._initTessy();\\n\\n  this.fontInfos = {};\\n\\n  return this;\\n};\\n\\np5.RendererGL.prototype = Object.create(p5.Renderer.prototype);\\n\\n//////////////////////////////////////////////\\n// Setting\\n//////////////////////////////////////////////\\n\\np5.RendererGL.prototype._setAttributeDefaults = function(pInst) {\\n  var defaults = {\\n    alpha: false,\\n    depth: true,\\n    stencil: true,\\n    antialias: false,\\n    premultipliedAlpha: false,\\n    preserveDrawingBuffer: true,\\n    perPixelLighting: false\\n  };\\n  if (pInst._glAttributes === null) {\\n    pInst._glAttributes = defaults;\\n  } else {\\n    pInst._glAttributes = Object.assign(defaults, pInst._glAttributes);\\n  }\\n  return;\\n};\\n\\np5.RendererGL.prototype._initContext = function() {\\n  try {\\n    this.drawingContext =\\n      this.canvas.getContext('webgl', this._pInst._glAttributes) ||\\n      this.canvas.getContext('experimental-webgl', this._pInst._glAttributes);\\n    if (this.drawingContext === null) {\\n      throw new Error('Error creating webgl context');\\n    } else {\\n      console.log('p5.RendererGL: enabled webgl context');\\n      var gl = this.drawingContext;\\n      gl.enable(gl.DEPTH_TEST);\\n      gl.depthFunc(gl.LEQUAL);\\n      gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\\n      this._viewport = this.drawingContext.getParameter(\\n        this.drawingContext.VIEWPORT\\n      );\\n    }\\n  } catch (er) {\\n    throw er;\\n  }\\n};\\n\\n//This is helper function to reset the context anytime the attributes\\n//are changed with setAttributes()\\n\\np5.RendererGL.prototype._resetContext = function(options, callback) {\\n  var w = this.width;\\n  var h = this.height;\\n  var defaultId = this.canvas.id;\\n  var c = this.canvas;\\n  if (c) {\\n    c.parentNode.removeChild(c);\\n  }\\n  c = document.createElement('canvas');\\n  c.id = defaultId;\\n  if (this._pInst._userNode) {\\n    this._pInst._userNode.appendChild(c);\\n  } else {\\n    document.body.appendChild(c);\\n  }\\n  this._pInst.canvas = c;\\n\\n  var renderer = new p5.RendererGL(this._pInst.canvas, this._pInst, true);\\n  this._pInst._setProperty('_renderer', renderer);\\n  renderer.resize(w, h);\\n  renderer._applyDefaults();\\n  this._pInst._elements.push(renderer);\\n\\n  if (typeof callback === 'function') {\\n    //setTimeout with 0 forces the task to the back of the queue, this ensures that\\n    //we finish switching out the renderer\\n    setTimeout(function() {\\n      callback.apply(window._renderer, options);\\n    }, 0);\\n  }\\n};\\n/**\\n * @module Rendering\\n * @submodule Rendering\\n * @for p5\\n */\\n/**\\n * Set attributes for the WebGL Drawing context.\\n * This is a way of adjusting how the WebGL\\n * renderer works to fine-tune the display and performance.\\n * <br><br>\\n * Note that this will reinitialize the drawing context\\n * if called after the WebGL canvas is made.\\n * <br><br>\\n * If an object is passed as the parameter, all attributes\\n * not declared in the object will be set to defaults.\\n * <br><br>\\n * The available attributes are:\\n * <br>\\n * alpha - indicates if the canvas contains an alpha buffer\\n * default is false\\n * <br><br>\\n * depth - indicates whether the drawing buffer has a depth buffer\\n * of at least 16 bits - default is true\\n * <br><br>\\n * stencil - indicates whether the drawing buffer has a stencil buffer\\n * of at least 8 bits\\n * <br><br>\\n * antialias - indicates whether or not to perform anti-aliasing\\n * default is false\\n * <br><br>\\n * premultipliedAlpha - indicates that the page compositor will assume\\n * the drawing buffer contains colors with pre-multiplied alpha\\n * default is false\\n * <br><br>\\n * preserveDrawingBuffer - if true the buffers will not be cleared and\\n * and will preserve their values until cleared or overwritten by author\\n * (note that p5 clears automatically on draw loop)\\n * default is true\\n * <br><br>\\n * perPixelLighting - if true, per-pixel lighting will be used in the\\n * lighting shader.\\n * default is false\\n * <br><br>\\n * @method setAttributes\\n * @for p5\\n * @param  {String}  key Name of attribute\\n * @param  {Boolean}        value New value of named attribute\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(255);\\n *   push();\\n *   rotateZ(frameCount * 0.02);\\n *   rotateX(frameCount * 0.02);\\n *   rotateY(frameCount * 0.02);\\n *   fill(0, 0, 0);\\n *   box(50);\\n *   pop();\\n * }\\n * </code>\\n * </div>\\n * <br>\\n * Now with the antialias attribute set to true.\\n * <br>\\n * <div>\\n * <code>\\n * function setup() {\\n *   setAttributes('antialias', true);\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(255);\\n *   push();\\n *   rotateZ(frameCount * 0.02);\\n *   rotateX(frameCount * 0.02);\\n *   rotateY(frameCount * 0.02);\\n *   fill(0, 0, 0);\\n *   box(50);\\n *   pop();\\n * }\\n * </code>\\n * </div>\\n *\\n * <div>\\n * <code>\\n * // press the mouse button to enable perPixelLighting\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n *   noStroke();\\n *   fill(255);\\n * }\\n *\\n * var lights = [\\n *   { c: '#f00', t: 1.12, p: 1.91, r: 0.2 },\\n *   { c: '#0f0', t: 1.21, p: 1.31, r: 0.2 },\\n *   { c: '#00f', t: 1.37, p: 1.57, r: 0.2 },\\n *   { c: '#ff0', t: 1.12, p: 1.91, r: 0.7 },\\n *   { c: '#0ff', t: 1.21, p: 1.31, r: 0.7 },\\n *   { c: '#f0f', t: 1.37, p: 1.57, r: 0.7 }\\n * ];\\n *\\n * function draw() {\\n *   var t = millis() / 1000 + 1000;\\n *   background(0);\\n *   directionalLight(color('#222'), 1, 1, 1);\\n *\\n *   for (var i = 0; i < lights.length; i++) {\\n *     var light = lights[i];\\n *     pointLight(\\n *       color(light.c),\\n *       p5.Vector.fromAngles(t * light.t, t * light.p, width * light.r)\\n *     );\\n *   }\\n *\\n *   specularMaterial(255);\\n *   sphere(width * 0.1);\\n *\\n *   rotateX(t * 0.77);\\n *   rotateY(t * 0.83);\\n *   rotateZ(t * 0.91);\\n *   torus(width * 0.3, width * 0.07, 24, 10);\\n * }\\n *\\n * function mousePressed() {\\n *   setAttributes('perPixelLighting', true);\\n *   noStroke();\\n *   fill(255);\\n * }\\n * function mouseReleased() {\\n *   setAttributes('perPixelLighting', false);\\n *   noStroke();\\n *   fill(255);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt a rotating cube with smoother edges\\n */\\n/**\\n * @method setAttributes\\n * @for p5\\n * @param  {Object}  obj object with key-value pairs\\n */\\n\\np5.prototype.setAttributes = function(key, value) {\\n  var unchanged = true;\\n  if (typeof value !== 'undefined') {\\n    //first time modifying the attributes\\n    if (this._glAttributes === null) {\\n      this._glAttributes = {};\\n    }\\n    if (this._glAttributes[key] !== value) {\\n      //changing value of previously altered attribute\\n      this._glAttributes[key] = value;\\n      unchanged = false;\\n    }\\n    //setting all attributes with some change\\n  } else if (key instanceof Object) {\\n    if (this._glAttributes !== key) {\\n      this._glAttributes = key;\\n      unchanged = false;\\n    }\\n  }\\n  //@todo_FES\\n  if (!this._renderer.isP3D || unchanged) {\\n    return;\\n  }\\n\\n  if (!this._setupDone) {\\n    for (var x in this._renderer.gHash) {\\n      if (this._renderer.gHash.hasOwnProperty(x)) {\\n        console.error(\\n          'Sorry, Could not set the attributes, you need to call setAttributes() ' +\\n            'before calling the other drawing methods in setup()'\\n        );\\n        return;\\n      }\\n    }\\n  }\\n\\n  this.push();\\n  this._renderer._resetContext();\\n  this.pop();\\n\\n  if (this._renderer._curCamera) {\\n    this._renderer._curCamera._renderer = this._renderer;\\n  }\\n};\\n\\n/**\\n * @class p5.RendererGL\\n */\\n\\np5.RendererGL.prototype._update = function() {\\n  // reset model view and apply initial camera transform\\n  // (containing only look at info; no projection).\\n  this.uMVMatrix.set(\\n    this._curCamera.cameraMatrix.mat4[0],\\n    this._curCamera.cameraMatrix.mat4[1],\\n    this._curCamera.cameraMatrix.mat4[2],\\n    this._curCamera.cameraMatrix.mat4[3],\\n    this._curCamera.cameraMatrix.mat4[4],\\n    this._curCamera.cameraMatrix.mat4[5],\\n    this._curCamera.cameraMatrix.mat4[6],\\n    this._curCamera.cameraMatrix.mat4[7],\\n    this._curCamera.cameraMatrix.mat4[8],\\n    this._curCamera.cameraMatrix.mat4[9],\\n    this._curCamera.cameraMatrix.mat4[10],\\n    this._curCamera.cameraMatrix.mat4[11],\\n    this._curCamera.cameraMatrix.mat4[12],\\n    this._curCamera.cameraMatrix.mat4[13],\\n    this._curCamera.cameraMatrix.mat4[14],\\n    this._curCamera.cameraMatrix.mat4[15]\\n  );\\n\\n  // reset light data for new frame.\\n\\n  this.ambientLightColors.length = 0;\\n  this.directionalLightDirections.length = 0;\\n  this.directionalLightColors.length = 0;\\n\\n  this.pointLightPositions.length = 0;\\n  this.pointLightColors.length = 0;\\n\\n  this._enableLighting = false;\\n};\\n\\n/**\\n * [background description]\\n */\\np5.RendererGL.prototype.background = function() {\\n  var _col = this._pInst.color.apply(this._pInst, arguments);\\n  var _r = _col.levels[0] / 255;\\n  var _g = _col.levels[1] / 255;\\n  var _b = _col.levels[2] / 255;\\n  var _a = _col.levels[3] / 255;\\n  this.GL.clearColor(_r, _g, _b, _a);\\n  this.GL.depthMask(true);\\n  this.GL.clear(this.GL.COLOR_BUFFER_BIT | this.GL.DEPTH_BUFFER_BIT);\\n  this._pixelsState._pixelsDirty = true;\\n};\\n\\n//////////////////////////////////////////////\\n// COLOR\\n//////////////////////////////////////////////\\n/**\\n * Basic fill material for geometry with a given color\\n * @method  fill\\n * @class p5.RendererGL\\n * @param  {Number|Number[]|String|p5.Color} v1  gray value,\\n * red or hue value (depending on the current color mode),\\n * or color Array, or CSS color string\\n * @param  {Number}            [v2] green or saturation value\\n * @param  {Number}            [v3] blue or brightness value\\n * @param  {Number}            [a]  opacity\\n * @chainable\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(200, 200, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(0);\\n *   noStroke();\\n *   fill(100, 100, 240);\\n *   rotateX(frameCount * 0.01);\\n *   rotateY(frameCount * 0.01);\\n *   box(75, 75, 75);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * black canvas with purple cube spinning\\n *\\n */\\np5.RendererGL.prototype.fill = function(v1, v2, v3, a) {\\n  //see material.js for more info on color blending in webgl\\n  var color = p5.prototype.color.apply(this._pInst, arguments);\\n  this.curFillColor = color._array;\\n  this.drawMode = constants.FILL;\\n  this._useNormalMaterial = false;\\n  this._tex = null;\\n};\\n\\n/**\\n * Basic stroke material for geometry with a given color\\n * @method  stroke\\n * @param  {Number|Number[]|String|p5.Color} v1  gray value,\\n * red or hue value (depending on the current color mode),\\n * or color Array, or CSS color string\\n * @param  {Number}            [v2] green or saturation value\\n * @param  {Number}            [v3] blue or brightness value\\n * @param  {Number}            [a]  opacity\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(200, 200, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(0);\\n *   stroke(240, 150, 150);\\n *   fill(100, 100, 240);\\n *   rotateX(frameCount * 0.01);\\n *   rotateY(frameCount * 0.01);\\n *   box(75, 75, 75);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * black canvas with purple cube with pink outline spinning\\n *\\n */\\np5.RendererGL.prototype.stroke = function(r, g, b, a) {\\n  //@todo allow transparency in stroking currently doesn't have\\n  //any impact and causes problems with specularMaterial\\n  arguments[3] = 255;\\n  var color = p5.prototype.color.apply(this._pInst, arguments);\\n  this.curStrokeColor = color._array;\\n};\\n\\np5.RendererGL.prototype.strokeCap = function(cap) {\\n  // @TODO : to be implemented\\n  console.error('Sorry, strokeCap() is not yet implemented in WEBGL mode');\\n};\\n\\np5.RendererGL.prototype.blendMode = function(mode) {\\n  if (\\n    mode === constants.DARKEST ||\\n    mode === constants.LIGHTEST ||\\n    mode === constants.ADD ||\\n    mode === constants.BLEND ||\\n    mode === constants.SUBTRACT ||\\n    mode === constants.SCREEN ||\\n    mode === constants.EXCLUSION ||\\n    mode === constants.REPLACE ||\\n    mode === constants.MULTIPLY\\n  )\\n    this.curBlendMode = mode;\\n  else if (\\n    mode === constants.BURN ||\\n    mode === constants.OVERLAY ||\\n    mode === constants.HARD_LIGHT ||\\n    mode === constants.SOFT_LIGHT ||\\n    mode === constants.DODGE\\n  ) {\\n    console.warn(\\n      'BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.'\\n    );\\n  }\\n};\\n\\n/**\\n * Change weight of stroke\\n * @method  strokeWeight\\n * @param  {Number} stroke weight to be used for drawing\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(200, 400, WEBGL);\\n *   setAttributes('antialias', true);\\n * }\\n *\\n * function draw() {\\n *   background(0);\\n *   noStroke();\\n *   translate(0, -100, 0);\\n *   stroke(240, 150, 150);\\n *   fill(100, 100, 240);\\n *   push();\\n *   strokeWeight(8);\\n *   rotateX(frameCount * 0.01);\\n *   rotateY(frameCount * 0.01);\\n *   sphere(75);\\n *   pop();\\n *   push();\\n *   translate(0, 200, 0);\\n *   strokeWeight(1);\\n *   rotateX(frameCount * 0.01);\\n *   rotateY(frameCount * 0.01);\\n *   sphere(75);\\n *   pop();\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * black canvas with two purple rotating spheres with pink\\n * outlines the sphere on top has much heavier outlines,\\n *\\n */\\np5.RendererGL.prototype.strokeWeight = function(w) {\\n  if (this.curStrokeWeight !== w) {\\n    this.pointSize = w;\\n    this.curStrokeWeight = w;\\n  }\\n};\\n\\n// x,y are canvas-relative (pre-scaled by _pixelDensity)\\np5.RendererGL.prototype._getPixel = function(x, y) {\\n  var pixelsState = this._pixelsState;\\n  var imageData, index;\\n  if (pixelsState._pixelsDirty) {\\n    imageData = new Uint8Array(4);\\n    // prettier-ignore\\n    this.drawingContext.readPixels(\\n      x, y, 1, 1,\\n      this.drawingContext.RGBA, this.drawingContext.UNSIGNED_BYTE,\\n      imageData\\n    );\\n    index = 0;\\n  } else {\\n    imageData = pixelsState.pixels;\\n    index = (Math.floor(x) + Math.floor(y) * this.canvas.width) * 4;\\n  }\\n  return [\\n    imageData[index + 0],\\n    imageData[index + 1],\\n    imageData[index + 2],\\n    imageData[index + 3]\\n  ];\\n};\\n\\n/**\\n * Loads the pixels data for this canvas into the pixels[] attribute.\\n * Note that updatePixels() and set() do not work.\\n * Any pixel manipulation must be done directly to the pixels[] array.\\n *\\n * @private\\n * @method loadPixels\\n *\\n */\\n\\np5.RendererGL.prototype.loadPixels = function() {\\n  var pixelsState = this._pixelsState;\\n  if (!pixelsState._pixelsDirty) return;\\n  pixelsState._pixelsDirty = false;\\n\\n  //@todo_FES\\n  if (this._pInst._glAttributes.preserveDrawingBuffer !== true) {\\n    console.log(\\n      'loadPixels only works in WebGL when preserveDrawingBuffer ' + 'is true.'\\n    );\\n    return;\\n  }\\n\\n  //if there isn't a renderer-level temporary pixels buffer\\n  //make a new one\\n  var pixels = pixelsState.pixels;\\n  var len = this.GL.drawingBufferWidth * this.GL.drawingBufferHeight * 4;\\n  if (!(pixels instanceof Uint8Array) || pixels.length !== len) {\\n    pixels = new Uint8Array(len);\\n    this._pixelsState._setProperty('pixels', pixels);\\n  }\\n\\n  var pd = this._pInst._pixelDensity;\\n  // prettier-ignore\\n  this.GL.readPixels(\\n    0, 0, this.width * pd, this.height * pd,\\n    this.GL.RGBA, this.GL.UNSIGNED_BYTE,\\n    pixels\\n  );\\n};\\n\\n//////////////////////////////////////////////\\n// HASH | for geometry\\n//////////////////////////////////////////////\\n\\np5.RendererGL.prototype.geometryInHash = function(gId) {\\n  return this.gHash[gId] !== undefined;\\n};\\n\\n/**\\n * [resize description]\\n * @private\\n * @param  {Number} w [description]\\n * @param  {Number} h [description]\\n */\\np5.RendererGL.prototype.resize = function(w, h) {\\n  p5.Renderer.prototype.resize.call(this, w, h);\\n  this.GL.viewport(\\n    0,\\n    0,\\n    this.GL.drawingBufferWidth,\\n    this.GL.drawingBufferHeight\\n  );\\n  this._viewport = this.GL.getParameter(this.GL.VIEWPORT);\\n\\n  this._curCamera._resize();\\n\\n  //resize pixels buffer\\n  var pixelsState = this._pixelsState;\\n  pixelsState._pixelsDirty = true;\\n  if (typeof pixelsState.pixels !== 'undefined') {\\n    pixelsState._setProperty(\\n      'pixels',\\n      new Uint8Array(\\n        this.GL.drawingBufferWidth * this.GL.drawingBufferHeight * 4\\n      )\\n    );\\n  }\\n};\\n\\n/**\\n * clears color and depth buffers\\n * with r,g,b,a\\n * @private\\n * @param {Number} r normalized red val.\\n * @param {Number} g normalized green val.\\n * @param {Number} b normalized blue val.\\n * @param {Number} a normalized alpha val.\\n */\\np5.RendererGL.prototype.clear = function() {\\n  var _r = arguments[0] || 0;\\n  var _g = arguments[1] || 0;\\n  var _b = arguments[2] || 0;\\n  var _a = arguments[3] || 0;\\n  this.GL.clearColor(_r, _g, _b, _a);\\n  this.GL.clear(this.GL.COLOR_BUFFER_BIT | this.GL.DEPTH_BUFFER_BIT);\\n  this._pixelsState._pixelsDirty = true;\\n};\\n\\np5.RendererGL.prototype.applyMatrix = function(a, b, c, d, e, f) {\\n  if (arguments.length === 16) {\\n    p5.Matrix.prototype.apply.apply(this.uMVMatrix, arguments);\\n  } else {\\n    // prettier-ignore\\n    this.uMVMatrix.apply([\\n      a, b, 0, 0,\\n      c, d, 0, 0,\\n      0, 0, 1, 0,\\n      e, f, 0, 1,\\n    ]);\\n  }\\n};\\n\\n/**\\n * [translate description]\\n * @private\\n * @param  {Number} x [description]\\n * @param  {Number} y [description]\\n * @param  {Number} z [description]\\n * @chainable\\n * @todo implement handle for components or vector as args\\n */\\np5.RendererGL.prototype.translate = function(x, y, z) {\\n  if (x instanceof p5.Vector) {\\n    z = x.z;\\n    y = x.y;\\n    x = x.x;\\n  }\\n  this.uMVMatrix.translate([x, y, z]);\\n  return this;\\n};\\n\\n/**\\n * Scales the Model View Matrix by a vector\\n * @private\\n * @param  {Number | p5.Vector | Array} x [description]\\n * @param  {Number} [y] y-axis scalar\\n * @param  {Number} [z] z-axis scalar\\n * @chainable\\n */\\np5.RendererGL.prototype.scale = function(x, y, z) {\\n  this.uMVMatrix.scale(x, y, z);\\n  return this;\\n};\\n\\np5.RendererGL.prototype.rotate = function(rad, axis) {\\n  if (typeof axis === 'undefined') {\\n    return this.rotateZ(rad);\\n  }\\n  p5.Matrix.prototype.rotate.apply(this.uMVMatrix, arguments);\\n  return this;\\n};\\n\\np5.RendererGL.prototype.rotateX = function(rad) {\\n  this.rotate(rad, 1, 0, 0);\\n  return this;\\n};\\n\\np5.RendererGL.prototype.rotateY = function(rad) {\\n  this.rotate(rad, 0, 1, 0);\\n  return this;\\n};\\n\\np5.RendererGL.prototype.rotateZ = function(rad) {\\n  this.rotate(rad, 0, 0, 1);\\n  return this;\\n};\\n\\np5.RendererGL.prototype.push = function() {\\n  // get the base renderer style\\n  var style = p5.Renderer.prototype.push.apply(this);\\n\\n  // add webgl-specific style properties\\n  var properties = style.properties;\\n\\n  properties.uMVMatrix = this.uMVMatrix.copy();\\n  properties.uPMatrix = this.uPMatrix.copy();\\n  properties._curCamera = this._curCamera;\\n\\n  // make a copy of the current camera for the push state\\n  // this preserves any references stored using 'createCamera'\\n  this._curCamera = this._curCamera.copy();\\n\\n[end of p5.RendererGL.js]\\n[start of webgl_mode_architecture.md]\\n# p5.js WEBGL mode architecture\\n\\nThis document describes the structure of the p5.js WEBGL mode for p5.js contributors and maintainers\\u2014and any other interested parties. If you're interested in using 3D graphics in your sketches, [view this tutorial](https://github.com/processing/p5.js/wiki/Getting-started-with-WebGL-in-p5) instead.\\n\\n## Overview of Structure and Objects\\n\\nThe core objects in the WEBGL architecture are the p5.Renderer.GL, p5.Shader, p5.Texture, and p5.Geometry.\\nA single instance of p5.Renderer.GL manages its own p5.Shaders, p5.Textures, and p5.Geometry\\u2014a goal for this is to allow offscreen rendering using WebGL, but that hasn\\u2019t been tested yet.\\nShaders and textures are associated with a specific GL context via the renderer.\\n\\n### p5.RendererGL\\nThe p5.RendererGL object is the renderer for WEBGL / 3D Mode in p5.js.\\nDerived from p5.Renderer, it provides additional functionality not available in 2D mode, such as: `box()`, `cone()`, use of shaders, accelerated texture rendering, and lighting.\\n\\n* Manages\\u2014creates and caches\\u2014shaders (p5.Shader objects) and textures (p5.Texture objects)\\n* Prepares coordinates of shapes to be used as attribute arrays by shaders.\\n* Selects the correct shader for use when stroke, fill, texture, and various lighting methods are called, then supplies the appropriate uniforms to those shaders.\\n* Maintains data about lighting: a count of how many various types of lights are used and their parameters.\\n* Caches geometry for 3D primitives (in retained mode), with the exception of shapes created with begin/endShape, which are dynamically generated and pushed to GL every time one is drawn (in immediate mode).\\n\\nThe renderer manages choosing an appropriate p5.Shader for the current drawing conditions.\\n\\n### p5.Shader\\nThe p5.Shader class provides access to the uniforms and attributes of a GL program. \\n\\n* Compiles and links the vertex and fragment shader components\\n* Provides an API for accessing and setting shader attributes and uniforms\\n* Binds textures the shader needs before a shape is rendered\\n* Provides the bindShader() method for use in the render before a shape is drawn, then unbindShader() after the shape is drawn.\\n\\nThere are four default shaders, as documented in the Shader section.\\n\\n### p5.Texture\\nThe p5.Texture object manages GL state for a texture based on a `p5.Image`, `p5.MediaElement`, `p5.Element`, or `ImageData`.\\n\\n* Internally handles processing image data based on type, so that the p5.Renderer implementation doesn\\u2019t have to make special exceptions in its own methods when handling textures\\n* Updates conditionally every frame by making a best guess at whether or not image data has changed. Tries not to upload the texture if no change has been made, to help performance.\\n\\n### p5.Geometry\\nShapes rendered in retain mode are stored as p5.Geometry objects in a cache in the p5.Renderer object. \\nThe renderer maps strings to p5.Geometry objects based on the shape drawn and its parameters (for example, geometry for a box created with `box(70, 80, 90, 10, 20)` is mapped from `'box|70|80|90|10|20\\u2019`). Calls to functions that have retained geometry create a p5.Geometry object on the first pass and store it in a geometry hash using the aforementioned string ID. Later calls look for that ID in the hash, and if it is found use that to reference the existing object rather than creating a new one.\\n\\n* Stores vertices, normals, faces, line vertices, line normals, and texture coordinates for the geometry primitives\\n* Provides methods for computing the faces, normals, line vertices, and line normals for a set of vertices\\n\\n## Immediate Mode\\nAll attributes for drawing with Immediate Mode are stored in an object in the renderer, used to draw to the GL drawing context, and then discarded.\\n\\n## Geometry: Retain and Immediate Mode\\nRetained geometry is used for 3D primitives, while immediate mode is used for shapes created with begin/endShape.\\n\\n|Functions with retained geometry| Functions with immediate mode geometry |\\n|--------------------------------|----------------------------------------|\\n|plane()                         | bezier()                               |\\n|box()                           | curve()                                |\\n|sphere()                        | line()                                 |\\n|cylinder()                      | beginShape()                           |\\n|cone()                          | vertex()                               |\\n|ellipsoid()                     | endShape()                             |\\n|torus()                         | point()                                |\\n|triangle()                      | curveVertex()                          |\\n|arc()                           | bezierVertex()                         |\\n|point()                         | quadraticVertex()                      |\\n|ellipse()                       |\\n|rect()                          |\\n|quad()                          |\\n|text()                          |\\n\\n\\n\\n\\n\\n\\n## Texture Management\\nA p5.Renderer.GL instances manages an array of p5.Textures objects on an as-needed basis.\\nTextures are created for images and videos used with the `texture()` method or as uniforms provided to custom shaders.\\n\\nWhen the renderer needs a texture, it first checks if one has already been created for a given image/video, then provides that to a shader for rendering. A new texture is only created if an existing one cannot be found for the image/video.\\n\\n## Shaders\\n\\n### Types of Shaders\\n\\n#### Color Shader\\nProvides flat shading of objects, based on the current fill color.\\n\\n#### Light Shader (for lighting AND textures)\\nAccounts for:\\n* Lighting parameters set by `ambientLight()`, `directionalLight()`, and `pointLight()`\\n* Material parameters set by `ambientMaterial()`, and `specularMaterial()`\\n* Texture parameters, set by `texture()`\\n\\n#### Normal Shader\\nThe normal shader is set when `normalMaterial()` is in use. It uses the surface\\u2019s normal vector to determine a fragment color.\\n\\n### Shader Parameters\\n\\n#### Standard Model View & Camera Uniforms\\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|---------------------------------|-----------|---------------|------------|-------------|------------|\\n|`uniform mat4 uModelViewMatrix;` |x          |x              |x           |x            |x           |\\n|`uniform mat4 uProjectionMatrix;`|x          |x              |x           |x            |x           |\\n|`uniform vec4 uViewPort;`        |x          |               |            |             |            |\\n\\n\\n#### Geometry Attributes and Uniforms\\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|---------------------------------|-----------|---------------|------------|-------------|------------|\\n|`attribute vec3 aPosition;`      |x          |x              |x           |x            |x           |\\n|`attribute vec3 aNormal;`        |           |x              |            |x            |            | \\n|`attribute vec2 aTexCoord;`      |           |x              |            |x            |            |\\n|`uniform mat3 uNormalMatrix;`    |           |x              |            |x            |            |\\n|`attribute vec4 aDirection;`     |x          |               |            |             |            |\\n|`uniform float uStrokeWeight;`   |x          |               |            |             |            |\\n\\n#### Material Colors\\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|---------------------------------|-----------|---------------|------------|-------------|------------|\\n|`uniform vec4 uMaterialColor;`   |x          |x              |            |             |x           |\\n|`attribute vec4 aVertexColor;`   |           |               |x           |             |            |\\n\\n#### Light Parameters\\n\\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\\n|`uniform int uAmbientLightCount;`     |           |x              |            |             |            |\\n|`uniform int uAmbientLightCount;`     |           |x              |            |             |            |\\n|`uniform int uDirectionalLightCount;` |           |x              |            |             |            |\\n|`uniform int uPointLightCount;`       |           |x              |            |             |            |\\n|`uniform vec3 uAmbientColor[8];`      |           |x              |            |             |            |\\n|`uniform vec3 uLightingDirection[8];` |           |x              |            |             |            |\\n|`uniform vec3 uDirectionalColor[8];`  |           |x              |            |             |            |\\n|`uniform vec3 uPointLightLocation[8];`|           |x              |            |             |            |\\n|`uniform vec3 uPointLightColor[8];`   |           |x              |            |             |            |\\n|`uniform bool uSpecular;`             |           |x              |            |             |            |\\n|`uniform int  uShininess;`            |           |x              |            |             |            |\\n|`uniform bool uUseLighting;`          |           |x              |            |             |            |\\n\\n#### Texture Parameters\\n\\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\\n|`uniform sampler2D uSampler;`         |           |x              |            |             |            |\\n|`uniform bool isTexture;`             |           |x              |            |             |            |\\n\\n#### General Parameters\\n\\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\\n|`uniform float uResolution;`          |           |               |x           |             |            |\\n|`uniform float uPointSize;`           |           |               |x           |             |x           |\\n\\n#### Varying Parameters\\n\\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\\n|`varying vec3 vVertexNormal;`         |           |x              |            |             |            |\\n|`varying vec2 vVertTexCoord;`         |           |x              |            |             |            |\\n|`varying vec3 vLightWeighting;`       |           |x              |            |             |            |\\n|`varying highp vec2 vVertTexCoord;`   |           |               |            |x            |            |\\n|`varying vec4 vColor;`                |           |               |x           |             |            |\\n|`varying float vStrokeWeight`         |           |               |            |             |x           |\\n\\n## Next Steps\\n\\nComing soon!\\n\\n[end of webgl_mode_architecture.md]\\n[start of p5.Shader.js]\\n/**\\n * This module defines the p5.Shader class\\n * @module Lights, Camera\\n * @submodule Shaders\\n * @for p5\\n * @requires core\\n */\\n\\n'use strict';\\n\\nvar p5 = require('../core/main');\\n\\n/**\\n * Shader class for WEBGL Mode\\n * @class p5.Shader\\n * @param {p5.RendererGL} renderer an instance of p5.RendererGL that\\n * will provide the GL context for this new p5.Shader\\n * @param {String} vertSrc source code for the vertex shader (as a string)\\n * @param {String} fragSrc source code for the fragment shader (as a string)\\n */\\np5.Shader = function(renderer, vertSrc, fragSrc) {\\n  // TODO: adapt this to not take ids, but rather,\\n  // to take the source for a vertex and fragment shader\\n  // to enable custom shaders at some later date\\n  this._renderer = renderer;\\n  this._vertSrc = vertSrc;\\n  this._fragSrc = fragSrc;\\n  this._vertShader = -1;\\n  this._fragShader = -1;\\n  this._glProgram = 0;\\n  this._loadedAttributes = false;\\n  this.attributes = {};\\n  this._loadedUniforms = false;\\n  this.uniforms = {};\\n  this._bound = false;\\n  this.samplers = [];\\n};\\n\\n/**\\n * Creates, compiles, and links the shader based on its\\n * sources for the vertex and fragment shaders (provided\\n * to the constructor). Populates known attributes and\\n * uniforms from the shader.\\n * @method init\\n * @chainable\\n * @private\\n */\\np5.Shader.prototype.init = function() {\\n  if (this._glProgram === 0 /* or context is stale? */) {\\n    var gl = this._renderer.GL;\\n\\n    // @todo: once custom shading is allowed,\\n    // friendly error messages should be used here to share\\n    // compiler and linker errors.\\n\\n    //set up the shader by\\n    // 1. creating and getting a gl id for the shader program,\\n    // 2. compliling its vertex & fragment sources,\\n    // 3. linking the vertex and fragment shaders\\n    this._vertShader = gl.createShader(gl.VERTEX_SHADER);\\n    //load in our default vertex shader\\n    gl.shaderSource(this._vertShader, this._vertSrc);\\n    gl.compileShader(this._vertShader);\\n    // if our vertex shader failed compilation?\\n    if (!gl.getShaderParameter(this._vertShader, gl.COMPILE_STATUS)) {\\n      console.error(\\n        'Yikes! An error occurred compiling the vertex shader:' +\\n          gl.getShaderInfoLog(this._vertShader)\\n      );\\n      return null;\\n    }\\n\\n    this._fragShader = gl.createShader(gl.FRAGMENT_SHADER);\\n    //load in our material frag shader\\n    gl.shaderSource(this._fragShader, this._fragSrc);\\n    gl.compileShader(this._fragShader);\\n    // if our frag shader failed compilation?\\n    if (!gl.getShaderParameter(this._fragShader, gl.COMPILE_STATUS)) {\\n      console.error(\\n        'Darn! An error occurred compiling the fragment shader:' +\\n          gl.getShaderInfoLog(this._fragShader)\\n      );\\n      return null;\\n    }\\n\\n    this._glProgram = gl.createProgram();\\n    gl.attachShader(this._glProgram, this._vertShader);\\n    gl.attachShader(this._glProgram, this._fragShader);\\n    gl.linkProgram(this._glProgram);\\n    if (!gl.getProgramParameter(this._glProgram, gl.LINK_STATUS)) {\\n      console.error(\\n        'Snap! Error linking shader program: ' +\\n          gl.getProgramInfoLog(this._glProgram)\\n      );\\n    }\\n\\n    this._loadAttributes();\\n    this._loadUniforms();\\n  }\\n  return this;\\n};\\n\\n/**\\n * Queries the active attributes for this shader and loads\\n * their names and locations into the attributes array.\\n * @method _loadAttributes\\n * @private\\n */\\np5.Shader.prototype._loadAttributes = function() {\\n  if (this._loadedAttributes) {\\n    return;\\n  }\\n\\n  this.attributes = {};\\n\\n  var gl = this._renderer.GL;\\n\\n  var numAttributes = gl.getProgramParameter(\\n    this._glProgram,\\n    gl.ACTIVE_ATTRIBUTES\\n  );\\n  for (var i = 0; i < numAttributes; ++i) {\\n    var attributeInfo = gl.getActiveAttrib(this._glProgram, i);\\n    var name = attributeInfo.name;\\n    var location = gl.getAttribLocation(this._glProgram, name);\\n    var attribute = {};\\n    attribute.name = name;\\n    attribute.location = location;\\n    attribute.type = attributeInfo.type;\\n    attribute.size = attributeInfo.size;\\n    this.attributes[name] = attribute;\\n  }\\n\\n  this._loadedAttributes = true;\\n};\\n\\n/**\\n * Queries the active uniforms for this shader and loads\\n * their names and locations into the uniforms array.\\n * @method _loadUniforms\\n * @private\\n */\\np5.Shader.prototype._loadUniforms = function() {\\n  if (this._loadedUniforms) {\\n    return;\\n  }\\n\\n  var gl = this._renderer.GL;\\n\\n  // Inspect shader and cache uniform info\\n  var numUniforms = gl.getProgramParameter(this._glProgram, gl.ACTIVE_UNIFORMS);\\n\\n  var samplerIndex = 0;\\n  for (var i = 0; i < numUniforms; ++i) {\\n    var uniformInfo = gl.getActiveUniform(this._glProgram, i);\\n    var uniform = {};\\n    uniform.location = gl.getUniformLocation(this._glProgram, uniformInfo.name);\\n    uniform.size = uniformInfo.size;\\n    var uniformName = uniformInfo.name;\\n    //uniforms thats are arrays have their name returned as\\n    //someUniform[0] which is a bit silly so we trim it\\n    //off here. The size property tells us that its an array\\n    //so we dont lose any information by doing this\\n    if (uniformInfo.size > 1) {\\n      uniformName = uniformName.substring(0, uniformName.indexOf('[0]'));\\n    }\\n    uniform.name = uniformName;\\n    uniform.type = uniformInfo.type;\\n    if (uniform.type === gl.SAMPLER_2D) {\\n      uniform.samplerIndex = samplerIndex;\\n      samplerIndex++;\\n      this.samplers.push(uniform);\\n    }\\n    this.uniforms[uniformName] = uniform;\\n  }\\n  this._loadedUniforms = true;\\n};\\n\\np5.Shader.prototype.compile = function() {\\n  // TODO\\n};\\n\\n/**\\n * initializes (if needed) and binds the shader program.\\n * @method bindShader\\n * @private\\n */\\np5.Shader.prototype.bindShader = function() {\\n  this.init();\\n  if (!this._bound) {\\n    this.useProgram();\\n    this._bound = true;\\n\\n    this._setMatrixUniforms();\\n\\n    this.setUniform('uViewport', this._renderer._viewport);\\n  }\\n};\\n\\n/**\\n * @method unbindShader\\n * @chainable\\n * @private\\n */\\np5.Shader.prototype.unbindShader = function() {\\n  if (this._bound) {\\n    this.unbindTextures();\\n    //this._renderer.GL.useProgram(0); ??\\n    this._bound = false;\\n  }\\n  return this;\\n};\\n\\np5.Shader.prototype.bindTextures = function() {\\n  var gl = this._renderer.GL;\\n  for (var i = 0; i < this.samplers.length; i++) {\\n    var uniform = this.samplers[i];\\n    var tex = uniform.texture;\\n    if (tex === undefined) {\\n      // user hasn't yet supplied a texture for this slot.\\n      // (or there may not be one--maybe just lighting),\\n      // so we supply a default texture instead.\\n      tex = this._renderer._getEmptyTexture();\\n    }\\n    gl.activeTexture(gl.TEXTURE0 + uniform.samplerIndex);\\n    tex.bindTexture();\\n    tex.update();\\n    gl.uniform1i(uniform.location, uniform.samplerIndex);\\n  }\\n};\\n\\np5.Shader.prototype.updateTextures = function() {\\n  for (var i = 0; i < this.samplers.length; i++) {\\n    var uniform = this.samplers[i];\\n    var tex = uniform.texture;\\n    if (tex) {\\n      tex.update();\\n    }\\n  }\\n};\\n\\np5.Shader.prototype.unbindTextures = function() {\\n  // TODO: migrate stuff from material.js here\\n  // - OR - have material.js define this function\\n};\\n\\np5.Shader.prototype._setMatrixUniforms = function() {\\n  this.setUniform('uProjectionMatrix', this._renderer.uPMatrix.mat4);\\n  this.setUniform('uModelViewMatrix', this._renderer.uMVMatrix.mat4);\\n  this.setUniform('uViewMatrix', this._renderer._curCamera.cameraMatrix.mat4);\\n  if (this.uniforms.uNormalMatrix) {\\n    this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix);\\n    this.setUniform('uNormalMatrix', this._renderer.uNMatrix.mat3);\\n  }\\n};\\n\\n/**\\n * @method useProgram\\n * @chainable\\n * @private\\n */\\np5.Shader.prototype.useProgram = function() {\\n  var gl = this._renderer.GL;\\n  gl.useProgram(this._glProgram);\\n  return this;\\n};\\n\\n/**\\n * Wrapper around gl.uniform functions.\\n * As we store uniform info in the shader we can use that\\n * to do type checking on the supplied data and call\\n * the appropriate function.\\n * @method setUniform\\n * @chainable\\n * @param {String} uniformName the name of the uniform in the\\n * shader program\\n * @param {Object|Number|Boolean|Number[]} data the data to be associated\\n * with that uniform; type varies (could be a single numerical value, array,\\n * matrix, or texture / sampler reference)\\n */\\np5.Shader.prototype.setUniform = function(uniformName, data) {\\n  //@todo update all current gl.uniformXX calls\\n\\n  var uniform = this.uniforms[uniformName];\\n  if (!uniform) {\\n    return;\\n  }\\n\\n  var location = uniform.location;\\n\\n  var gl = this._renderer.GL;\\n  this.useProgram();\\n\\n  switch (uniform.type) {\\n    case gl.BOOL:\\n      if (data === true) {\\n        gl.uniform1i(location, 1);\\n      } else {\\n        gl.uniform1i(location, 0);\\n      }\\n      break;\\n    case gl.INT:\\n      if (uniform.size > 1) {\\n        data.length && gl.uniform1iv(location, data);\\n      } else {\\n        gl.uniform1i(location, data);\\n      }\\n      break;\\n    case gl.FLOAT:\\n      if (uniform.size > 1) {\\n        data.length && gl.uniform1fv(location, data);\\n      } else {\\n        gl.uniform1f(location, data);\\n      }\\n      break;\\n    case gl.FLOAT_MAT3:\\n      gl.uniformMatrix3fv(location, false, data);\\n      break;\\n    case gl.FLOAT_MAT4:\\n      gl.uniformMatrix4fv(location, false, data);\\n      break;\\n    case gl.FLOAT_VEC2:\\n      if (uniform.size > 1) {\\n        data.length && gl.uniform2fv(location, data);\\n      } else {\\n        gl.uniform2f(location, data[0], data[1]);\\n      }\\n      break;\\n    case gl.FLOAT_VEC3:\\n      if (uniform.size > 1) {\\n        data.length && gl.uniform3fv(location, data);\\n      } else {\\n        gl.uniform3f(location, data[0], data[1], data[2]);\\n      }\\n      break;\\n    case gl.FLOAT_VEC4:\\n      if (uniform.size > 1) {\\n        data.length && gl.uniform4fv(location, data);\\n      } else {\\n        gl.uniform4f(location, data[0], data[1], data[2], data[3]);\\n      }\\n      break;\\n    case gl.INT_VEC2:\\n      if (uniform.size > 1) {\\n        data.length && gl.uniform2iv(location, data);\\n      } else {\\n        gl.uniform2i(location, data[0], data[1]);\\n      }\\n      break;\\n    case gl.INT_VEC3:\\n      if (uniform.size > 1) {\\n        data.length && gl.uniform3iv(location, data);\\n      } else {\\n        gl.uniform3i(location, data[0], data[1], data[2]);\\n      }\\n      break;\\n    case gl.INT_VEC4:\\n      if (uniform.size > 1) {\\n        data.length && gl.uniform4iv(location, data);\\n      } else {\\n        gl.uniform4i(location, data[0], data[1], data[2], data[3]);\\n      }\\n      break;\\n    case gl.SAMPLER_2D:\\n      gl.activeTexture(gl.TEXTURE0 + uniform.samplerIndex);\\n      uniform.texture = this._renderer.getTexture(data);\\n      gl.uniform1i(uniform.location, uniform.samplerIndex);\\n      break;\\n    //@todo complete all types\\n  }\\n  return this;\\n};\\n\\n/* NONE OF THIS IS FAST OR EFFICIENT BUT BEAR WITH ME\\n *\\n * these shader \\\"type\\\" query methods are used by various\\n * facilities of the renderer to determine if changing\\n * the shader type for the required action (for example,\\n * do we need to load the default lighting shader if the\\n * current shader cannot handle lighting?)\\n *\\n **/\\n\\np5.Shader.prototype.isLightShader = function() {\\n  return (\\n    this.attributes.aNormal !== undefined ||\\n    this.uniforms.uUseLighting !== undefined ||\\n    this.uniforms.uAmbientLightCount !== undefined ||\\n    this.uniforms.uDirectionalLightCount !== undefined ||\\n    this.uniforms.uPointLightCount !== undefined ||\\n    this.uniforms.uAmbientColor !== undefined ||\\n    this.uniforms.uDirectionalColor !== undefined ||\\n    this.uniforms.uPointLightLocation !== undefined ||\\n    this.uniforms.uPointLightColor !== undefined ||\\n    this.uniforms.uLightingDirection !== undefined ||\\n    this.uniforms.uSpecular !== undefined\\n  );\\n};\\n\\np5.Shader.prototype.isTextureShader = function() {\\n  return this.samplerIndex > 0;\\n};\\n\\np5.Shader.prototype.isColorShader = function() {\\n  return (\\n    this.attributes.aVertexColor !== undefined ||\\n    this.uniforms.uMaterialColor !== undefined\\n  );\\n};\\n\\np5.Shader.prototype.isTexLightShader = function() {\\n  return this.isLightShader() && this.isTextureShader();\\n};\\n\\np5.Shader.prototype.isStrokeShader = function() {\\n  return this.uniforms.uStrokeWeight !== undefined;\\n};\\n\\n/**\\n * @method enableAttrib\\n * @chainable\\n * @private\\n */\\np5.Shader.prototype.enableAttrib = function(\\n  loc,\\n  size,\\n  type,\\n  normalized,\\n  stride,\\n  offset\\n) {\\n  var gl = this._renderer.GL;\\n  if (loc !== -1) {\\n    gl.enableVertexAttribArray(loc);\\n    gl.vertexAttribPointer(loc, size, type, normalized, stride, offset);\\n  }\\n  return this;\\n};\\n\\nmodule.exports = p5.Shader;\\n\\n[end of p5.Shader.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "p5.RendererGL.Retained.js",
        "p5.Shader.js",
        "p5.RendererGL.js",
        "webgl_mode_architecture.md",
        "p5.Shader.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "6d33501e-95a1-4db0-9e3c-59fe4879e0fd",
        "score": 0.01639344262295082,
        "payload": {
          "text": "//Retained Mode. The default mode for rendering 3D primitives\n//in WEBGL.\n'use strict';\n\nvar p5 = require('../core/main');\n\nvar hashCount = 0;\n/**\n * _initBufferDefaults\n * @private\n * @description initializes buffer defaults. runs each time a new geometry is\n * registered\n * @param  {String} gId  key of the geometry object\n */\np5.RendererGL.prototype._initBufferDefaults = function(gId) {\n  this._freeBuffers(gId);\n\n  //@TODO remove this limit on hashes in gHash\n  hashCount++;\n  if (hashCount > 1000) {\n    var key = Object.keys(this.gHash)[0];\n    delete this.gHash[key];\n    hashCount--;\n  }\n\n  //create a new entry in our gHash\n  this.gHash[gId] = {};\n};\n\np5.RendererGL.prototype._freeBuffers = function(gId) {\n  var geometry = this.gHash[gId];\n  if (!geometry) {\n    return;\n  }\n\n  delete this.gHash[gId];\n  hashCount--;\n\n  var gl = this.GL;\n  geometry.vertexBuffer && gl.deleteBuffer(geometry.vertexBuffer);\n  geometry.normalBuffer && gl.deleteBuffer(geometry.normalBuffer);\n  geometry.lineNormalBuffer && gl.deleteBuffer(geometry.lineNormalBuffer);\n  geometry.uvBuffer && gl.deleteBuffer(geometry.uvBuffer);\n  geometry.indexBuffer && gl.deleteBuffer(geometry.indexBuffer);\n  geometry.lineVertexBuffer && gl.deleteBuffer(geometry.lineVertexBuffer);\n};\n/**\n * createBuffers description\n * @private\n * @param  {String} gId    key of the geometry object\n * @param  {p5.Geometry}  obj contains geometry data\n */\np5.RendererGL.prototype.createBuffers = function(gId, obj) {\n  var gl = this.GL;\n  //initialize the gl buffers for our geom groups\n  this._initBufferDefaults(gId);\n\n  var geometry = this.gHash[gId];\n\n  geometry.numberOfItems = obj.faces.length * 3;\n  geometry.lineVertexCount = obj.lineVertices.length;\n\n  var strokeShader = this._getRetainedStrokeShader();\n  strokeShader.bindShader();\n\n  // initialize the stroke shader's 'aPosition' buffer, if used\n  if (strokeShader.attributes.aPosition) {\n    geometry.lineVertexBuffer = gl.createBuffer();\n\n    this._bindBuffer(\n      geometry.lineVertexBuffer,\n      gl.ARRAY_BUFFER,\n      this._flatten(obj.lineVertices),\n      Float32Array,\n      gl.STATIC_DRAW\n    );\n\n    strokeShader.enableAttrib(\n      strokeShader.attributes.aPosition.location,\n      3,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n\n  // initialize the stroke shader's 'aDirection' buffer, if used\n  if (strokeShader.attributes.aDirection) {\n    geometry.lineNormalBuffer = gl.createBuffer();\n\n    this._bindBuffer(\n      geometry.lineNormalBuffer,\n      gl.ARRAY_BUFFER,\n      this._flatten(obj.lineNormals),\n      Float32Array,\n      gl.STATIC_DRAW\n    );\n\n    strokeShader.enableAttrib(\n      strokeShader.attributes.aDirection.location,\n      4,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n  strokeShader.unbindShader();\n\n  var fillShader = this._getRetainedFillShader();\n  fillShader.bindShader();\n\n  // initialize the fill shader's 'aPosition' buffer, if used\n  if (fillShader.attributes.aPosition) {\n    geometry.vertexBuffer = gl.createBuffer();\n\n    // allocate space for vertex positions\n    this._bindBuffer(\n      geometry.vertexBuffer,\n      gl.ARRAY_BUFFER,\n      this._vToNArray(obj.vertices),\n      Float32Array,\n      gl.STATIC_DRAW\n    );\n\n    fillShader.enableAttrib(\n      fillShader.attributes.aPosition.location,\n      3,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n\n  // allocate space for faces\n  geometry.indexBuffer = gl.createBuffer();\n  this._bindBuffer(\n    geometry.indexBuffer,\n    gl.ELEMENT_ARRAY_BUFFER,\n    this._flatten(obj.faces),\n    Uint16Array,\n    gl.STATIC_DRAW\n  );\n\n  // initialize the fill shader's 'aNormal' buffer, if used\n  if (fillShader.attributes.aNormal) {\n    geometry.normalBuffer = gl.createBuffer();\n\n    // allocate space for normals\n    this._bindBuffer(\n      geometry.normalBuffer,\n      gl.ARRAY_BUFFER,\n      this._vToNArray(obj.vertexNormals),\n      Float32Array,\n      gl.STATIC_DRAW\n    );\n\n    fillShader.enableAttrib(\n      fillShader.attributes.aNormal.location,\n      3,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n\n  // initialize the fill shader's 'aTexCoord' buffer, if used\n  if (fillShader.attributes.aTexCoord) {\n    geometry.uvBuffer = gl.createBuffer();\n\n    // tex coords\n    this._bindBuffer(\n      geometry.uvBuffer,\n      gl.ARRAY_BUFFER,\n      this._flatten(obj.uvs),\n      Float32Array,\n      gl.STATIC_DRAW\n    );\n\n    fillShader.enableAttrib(\n      fillShader.attributes.aTexCoord.location,\n      2,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n  fillShader.unbindShader();\n  return geometry;\n};\n\n/**\n * Draws buffers given a geometry key ID\n * @private\n * @param  {String} gId     ID in our geom hash\n * @chainable\n */\np5.RendererGL.prototype.drawBuffers = function(gId) {\n  var gl = this.GL;\n  var geometry = this.gHash[gId];\n\n  if (this._doStroke && geometry.lineVertexCount > 0) {\n    var strokeShader = this._getRetainedStrokeShader();\n    this._setStrokeUniforms(strokeShader);\n\n    // bind the stroke shader's 'aPosition' buffer\n    if (geometry.lineVertexBuffer) {\n      this._bindBuffer(geometry.lineVertexBuffer, gl.ARRAY_BUFFER);\n      strokeShader.enableAttrib(\n        strokeShader.attributes.aPosition.location,\n        3,\n        gl.FLOAT,\n        false,\n        0,\n        0\n      );\n    }\n\n    // bind the stroke shader's 'aDirection' buffer\n    if (geometry.lineNormalBuffer) {\n      this._bindBuffer(geometry.lineNormalBuffer, gl.ARRAY_BUFFER);\n      strokeShader.enableAttrib(\n        strokeShader.attributes.aDirection.location,\n        4,\n        gl.FLOAT,\n        false,\n        0,\n        0\n      );\n    }\n\n    this._applyColorBlend(this.curStrokeColor);\n    this._drawArrays(gl.TRIANGLES, gId);\n    strokeShader.unbindShader();\n  }\n\n  if (this._doFill !== false) {\n    var fillShader = this._getRetainedFillShader();\n    this._setFillUniforms(fillShader);\n\n    // bind the fill shader's 'aPosition' buffer\n    if (geometry.vertexBuffer) {\n      //vertex position buffer\n      this._bindBuffer(geometry.vertexBuffer, gl.ARRAY_BUFFER);\n      fillShader.enableAttrib(\n        fillShader.attributes.aPosition.location,\n        3,\n        gl.FLOAT,\n        false,\n        0,\n        0\n      );\n    }\n\n    if (geometry.indexBuffer) {\n      //vertex index buffer\n      this._bindBuffer(geometry.indexBuffer, gl.ELEMENT_ARRAY_BUFFER);\n    }\n\n    // bind the fill shader's 'aNormal' buffer\n    if (geometry.normalBuffer) {\n      this._bindBuffer(geometry.normalBuffer, gl.ARRAY_BUFFER);\n      fillShader.enableAttrib(\n        fillShader.attributes.aNormal.location,\n        3,\n        gl.FLOAT,\n        false,\n        0,\n        0\n      );\n    }\n\n    // bind the fill shader's 'aTexCoord' buffer\n    if (geometry.uvBuffer) {\n      // uv buffer\n      this._bindBuffer(geometry.uvBuffer, gl.ARRAY_BUFFER);\n      fillShader.enableAttrib(\n        fillShader.attributes.aTexCoord.location,\n        2,\n        gl.FLOAT,\n        false,\n        0,\n        0\n      );\n    }\n\n    this._applyColorBlend(this.curFillColor);\n    this._drawElements(gl.TRIANGLES, gId);\n    fillShader.unbindShader();\n  }\n  return this;\n};\n\n/**\n * Calls drawBuffers() with a scaled model/view matrix.\n *\n * This is used by various 3d primitive methods (in primitives.js, eg. plane,\n * box, torus, etc...) to allow caching of un-scaled geometries. Those\n * geometries are generally created with unit-length dimensions, cached as\n * such, and then scaled appropriately in this method prior to rendering.\n *\n * @private\n * @method drawBuffersScaled\n * @param {String} gId     ID in our geom hash\n * @param {Number} scaleX  the amount to scale in the X direction\n * @param {Number} scaleY  the amount to scale in the Y direction\n * @param {Number} scaleZ  the amount to scale in the Z direction\n */\np5.RendererGL.prototype.drawBuffersScaled = function(\n  gId,\n  scaleX,\n  scaleY,\n  scaleZ\n) {\n  var uMVMatrix = this.uMVMatrix.copy();\n  try {\n    this.uMVMatrix.scale(scaleX, scaleY, scaleZ);\n    this.drawBuffers(gId);\n  } finally {\n    this.uMVMatrix = uMVMatrix;\n  }\n};\n\np5.RendererGL.prototype._drawArrays = function(drawMode, gId) {\n  this.GL.drawArrays(drawMode, 0, this.gHash[gId].lineVertexCount);\n  this._pixelsState._pixelsDirty = true;\n  return this;\n};\n\np5.RendererGL.prototype._drawElements = function(drawMode, gId) {\n  this.GL.drawElements(\n    drawMode,\n    this.gHash[gId].numberOfItems,\n    this.GL.UNSIGNED_SHORT,\n    0\n  );\n  this._pixelsState._pixelsDirty = true;\n};\n\np5.RendererGL.prototype._drawPoints = function(vertices, vertexBuffer) {\n  var gl = this.GL;\n  var pointShader = this._getImmediatePointShader();\n  this._setPointUniforms(pointShader);\n\n  this._bindBuffer(\n    vertexBuffer,\n    gl.ARRAY_BUFFER,\n    this._vToNArray(vertices),\n    Float32Array,\n    gl.STATIC_DRAW\n  );\n\n  pointShader.enableAttrib(\n    pointShader.attributes.aPosition.location,\n    3,\n    gl.FLOAT,\n    false,\n    0,\n    0\n  );\n\n  gl.drawArrays(gl.Points, 0, vertices.length);\n\n  pointShader.unbindShader();\n  this._pixelsState._pixelsDirty = true;\n};\n\nmodule.exports = p5.RendererGL;\n",
          "filepath": "data/repos/processing/p5.js-0.8/src/webgl/p5.RendererGL.Retained.js",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      },
      {
        "id": "79f6dc3e-8dfd-47fc-b285-18ad934bf12b",
        "score": 0.016129032258064516,
        "payload": {
          "text": "suite('p5.Shader', function() {\n  var myp5;\n\n  if (!window.Modernizr.webgl) {\n    //assert(false, 'could not run gl tests');\n    return;\n  }\n\n  setup(function() {\n    myp5 = new p5(function(p) {\n      p.setup = function() {\n        p.createCanvas(100, 100, p.WEBGL);\n        p.pointLight(250, 250, 250, 100, 100, 0);\n        p.ambientMaterial(250);\n      };\n    });\n  });\n\n  var testUniforms = function(shaderName, uniforms, expectedUniforms) {\n    // assert(expectedUniforms.length === Object.keys(uniforms).length,\n    //   shaderName + ' expected ' + expectedUniforms.length + ' uniforms but has ' +\n    //   Object.keys(uniforms).length);\n\n    // test each one\n    for (var i = 0; i < expectedUniforms.length; i++) {\n      var uniform = uniforms[expectedUniforms[i]];\n      assert(\n        uniform !== undefined,\n        shaderName + ' missing expectedUniform: ' + expectedUniforms[i]\n      );\n    }\n  };\n\n  var testAttributes = function(shaderName, attributes, expectedAttributes) {\n    // assert(expectedAttributes.length === Object.keys(attributes).length,\n    //   shaderName + ' expected ' + expectedAttributes.length +\n    //   ' attributes but has ' + Object.keys(attributes).length);\n\n    // test each one\n    for (var i = 0; i < expectedAttributes.length; i++) {\n      var attribute = attributes[expectedAttributes[i]];\n      assert(\n        attribute !== undefined,\n        shaderName + ' missing expected attribute: ' + expectedAttributes[i]\n      );\n    }\n  };\n\n  var testShader = function(\n    shaderName,\n    shaderObj,\n    expectedAttributes,\n    expectedUniforms\n  ) {\n    shaderObj.bindShader();\n    testAttributes(shaderName, shaderObj.attributes, expectedAttributes);\n    testUniforms(shaderName, shaderObj.uniforms, expectedUniforms);\n    shaderObj.unbindShader();\n  };\n\n  teardown(function() {\n    myp5.remove();\n  });\n\n  suite('Shader', function() {\n    test('Light Shader', function() {\n      var expectedAttributes = ['aPosition', 'aNormal', 'aTexCoord'];\n\n      var expectedUniforms = [\n        'uModelViewMatrix',\n        'uProjectionMatrix',\n        'uNormalMatrix',\n        'uAmbientLightCount',\n        'uDirectionalLightCount',\n        'uPointLightCount',\n        'uAmbientColor',\n        'uLightingDirection',\n        'uDirectionalColor',\n        'uPointLightLocation',\n        'uPointLightColor',\n        'uSpecular',\n        'uShininess',\n        'uMaterialColor',\n        'uSampler',\n        'isTexture'\n      ];\n\n      testShader(\n        'Light Shader',\n        myp5._renderer._getLightShader(),\n        expectedAttributes,\n        expectedUniforms\n      );\n    });\n    test('Color Shader definition', function() {\n      var expectedAttributes = ['aPosition'];\n\n      var expectedUniforms = [\n        'uModelViewMatrix',\n        'uProjectionMatrix',\n        'uMaterialColor'\n      ];\n\n      testShader(\n        'Color Shader',\n        myp5._renderer._getColorShader(),\n        expectedAttributes,\n        expectedUniforms\n      );\n    });\n    test('Immediate Mode Shader definition', function() {\n      var expectedAttributes = ['aPosition', 'aVertexColor'];\n\n      var expectedUniforms = [\n        'uModelViewMatrix',\n        'uProjectionMatrix',\n        /*'uResolution',*/\n        'uPointSize'\n      ];\n\n      testShader(\n        'Immediate Mode Shader',\n        myp5._renderer._getImmediateModeShader(),\n        expectedAttributes,\n        expectedUniforms\n      );\n    });\n    test('Normal Shader definition', function() {\n      var expectedAttributes = ['aPosition', 'aNormal'];\n\n      var expectedUniforms = [\n        'uModelViewMatrix',\n        'uProjectionMatrix',\n        'uNormalMatrix'\n      ];\n\n      testShader(\n        'Normal Shader',\n        myp5._renderer._getNormalShader(),\n        expectedAttributes,\n        expectedUniforms\n      );\n    });\n    test('Color Shader is set after fill()', function() {\n      myp5.fill(0);\n      var retainedColorShader = myp5._renderer._getColorShader();\n      var texLightShader = myp5._renderer._getLightShader();\n      var immediateColorShader = myp5._renderer._getImmediateModeShader();\n      var selectedRetainedShader = myp5._renderer._getRetainedFillShader();\n      var selectedImmediateShader = myp5._renderer._getImmediateFillShader();\n\n      // both color and light shader are valid, depending on\n      // conditions set earlier.\n      assert(\n        retainedColorShader === selectedRetainedShader ||\n          texLightShader === selectedRetainedShader,\n        \"_renderer's retain mode shader was not color shader after fill\"\n      );\n      assert(\n        immediateColorShader === selectedImmediateShader ||\n          texLightShader === selectedImmediateShader,\n        \"_renderer's immediate mode shader was not color shader after fill\"\n      );\n    });\n    test('Normal Shader is set after normalMaterial()', function() {\n      myp5.normalMaterial();\n      var normalShader = myp5._renderer._getNormalShader();\n      var selectedRetainedShader = myp5._renderer._getRetainedFillShader();\n      var selectedImmediateShader = myp5._renderer._getRetainedFillShader();\n      assert(\n        normalShader === selectedRetainedShader,\n        \"_renderer's retain mode shader was not normal shader\"\n      );\n      assert(\n        normalShader === selectedImmediateShader,\n        \"_renderer's retain mode shader was not normal shader\"\n      );\n    });\n    test('Light shader set after ambientMaterial()', function() {\n      var lightShader = myp5._renderer._getLightShader();\n      myp5.ambientMaterial(128);\n      var selectedRetainedShader = myp5._renderer._getRetainedFillShader();\n      var selectedImmediateShader = myp5._renderer._getImmediateFillShader();\n      assert(\n        lightShader === selectedRetainedShader,\n        \"_renderer's retain mode shader was not light shader \" +\n          'after call to ambientMaterial()'\n      );\n      assert(\n        lightShader === selectedImmediateShader,\n        \"_renderer's immediate mode shader was not light shader\" +\n          'after call to ambientMaterial()'\n      );\n    });\n    test('Light shader set after specularMaterial()', function() {\n      var lightShader = myp5._renderer._getLightShader();\n      myp5.specularMaterial(128);\n      var selectedRetainedShader = myp5._renderer._getRetainedFillShader();\n      var selectedImmediateShader = myp5._renderer._getImmediateFillShader();\n      assert(\n        lightShader === selectedRetainedShader,\n        \"_renderer's retain mode shader was not light shader \" +\n          'after call to specularMaterial()'\n      );\n      assert(\n        lightShader === selectedImmediateShader,\n        \"_renderer's immediate mode shader was not light shader \" +\n          'after call to specularMaterial()'\n      );\n    });\n\n    test('Able to setUniform empty arrays', function() {\n      myp5.shader(myp5._renderer._getLightShader());\n      var s = myp5._renderer.userFillShader;\n\n      s.setUniform('uMaterialColor', []);\n      s.setUniform('uLightingDirection', []);\n    });\n\n    test('Able to set shininess', function() {\n      assert.deepEqual(myp5._renderer._useShininess, 1);\n      myp5.shininess(50);\n      assert.deepEqual(myp5._renderer._useShininess, 50);\n    });\n\n    test('Shader is reset after resetShader is called', function() {\n      myp5.shader(myp5._renderer._getColorShader());\n      var prevShader = myp5._renderer.userFillShader;\n      assert.isTrue(prevShader !== null);\n\n      myp5.resetShader();\n      var curShader = myp5._renderer.userFillShader;\n      assert.isTrue(curShader === null);\n    });\n  });\n});\n",
          "filepath": "data/repos/processing/p5.js-0.8/test/unit/webgl/p5.Shader.js",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      },
      {
        "id": "a85388e1-0129-401e-9137-8c6498f8b7e0",
        "score": 0.015873015873015872,
        "payload": {
          "text": "'use strict';\n\nvar p5 = require('../core/main');\nvar constants = require('../core/constants');\nvar libtess = require('libtess');\nrequire('./p5.Shader');\nrequire('./p5.Camera');\nrequire('../core/p5.Renderer');\nrequire('./p5.Matrix');\nvar fs = require('fs');\n\nvar defaultShaders = {\n  immediateVert: fs.readFileSync(\n    __dirname + '/shaders/immediate.vert',\n    'utf-8'\n  ),\n  vertexColorVert: fs.readFileSync(\n    __dirname + '/shaders/vertexColor.vert',\n    'utf-8'\n  ),\n  vertexColorFrag: fs.readFileSync(\n    __dirname + '/shaders/vertexColor.frag',\n    'utf-8'\n  ),\n  normalVert: fs.readFileSync(__dirname + '/shaders/normal.vert', 'utf-8'),\n  normalFrag: fs.readFileSync(__dirname + '/shaders/normal.frag', 'utf-8'),\n  basicFrag: fs.readFileSync(__dirname + '/shaders/basic.frag', 'utf-8'),\n  lightVert: fs.readFileSync(__dirname + '/shaders/light.vert', 'utf-8'),\n  lightTextureFrag: fs.readFileSync(\n    __dirname + '/shaders/light_texture.frag',\n    'utf-8'\n  ),\n  phongVert: fs.readFileSync(__dirname + '/shaders/phong.vert', 'utf-8'),\n  phongFrag: fs.readFileSync(__dirname + '/shaders/phong.frag', 'utf-8'),\n  fontVert: fs.readFileSync(__dirname + '/shaders/font.vert', 'utf-8'),\n  fontFrag: fs.readFileSync(__dirname + '/shaders/font.frag', 'utf-8'),\n  lineVert: fs.readFileSync(__dirname + '/shaders/line.vert', 'utf-8'),\n  lineFrag: fs.readFileSync(__dirname + '/shaders/line.frag', 'utf-8'),\n  pointVert: fs.readFileSync(__dirname + '/shaders/point.vert', 'utf-8'),\n  pointFrag: fs.readFileSync(__dirname + '/shaders/point.frag', 'utf-8')\n};\n\n/**\n * 3D graphics class\n * @private\n * @class p5.RendererGL\n * @constructor\n * @extends p5.Renderer\n * @todo extend class to include public method for offscreen\n * rendering (FBO).\n *\n */\np5.RendererGL = function(elt, pInst, isMainCanvas, attr) {\n  p5.Renderer.call(this, elt, pInst, isMainCanvas);\n  this._setAttributeDefaults(pInst);\n  this._initContext();\n  this.isP3D = true; //lets us know we're in 3d mode\n  this.GL = this.drawingContext;\n\n  // lights\n\n  this._enableLighting = false;\n\n  this.ambientLightColors = [];\n  this.directionalLightDirections = [];\n  this.directionalLightColors = [];\n\n  this.pointLightPositions = [];\n  this.pointLightColors = [];\n\n  this.curFillColor = [1, 1, 1, 1];\n  this.curStrokeColor = [0, 0, 0, 1];\n  this.curBlendMode = constants.BLEND;\n  this.blendExt = this.GL.getExtension('EXT_blend_minmax');\n\n  this._useSpecularMaterial = false;\n  this._useNormalMaterial = false;\n  this._useShininess = 1;\n\n  /**\n   * model view, projection, & normal\n   * matrices\n   */\n  this.uMVMatrix = new p5.Matrix();\n  this.uPMatrix = new p5.Matrix();\n  this.uNMatrix = new p5.Matrix('mat3');\n\n  // Camera\n  this._curCamera = new p5.Camera(this);\n  this._curCamera._computeCameraDefaultSettings();\n  this._curCamera._setDefaultCamera();\n\n  //Geometry & Material hashes\n  this.gHash = {};\n\n  this._defaultLightShader = undefined;\n  this._defaultImmediateModeShader = undefined;\n  this._defaultNormalShader = undefined;\n  this._defaultColorShader = undefined;\n  this._defaultPointShader = undefined;\n\n  this._pointVertexBuffer = this.GL.createBuffer();\n\n  this.userFillShader = undefined;\n  this.userStrokeShader = undefined;\n  this.userPointShader = undefined;\n\n  //Imediate Mode\n  //default drawing is done in Retained Mode\n  this.isImmediateDrawing = false;\n  this.immediateMode = {};\n\n  this.pointSize = 5.0; //default point size\n  this.curStrokeWeight = 1;\n\n  // array of textures created in this gl context via this.getTexture(src)\n  this.textures = [];\n\n  this.textureMode = constants.IMAGE;\n  // default wrap settings\n  this.textureWrapX = constants.CLAMP;\n  this.textureWrapY = constants.CLAMP;\n  this._tex = null;\n  this._curveTightness = 6;\n\n  // lookUpTable for coefficients needed to be calculated for bezierVertex, same are used for curveVertex\n  this._lookUpTableBezier = [];\n  // lookUpTable for coefficients needed to be calculated for quadraticVertex\n  this._lookUpTableQuadratic = [];\n\n  // current curveDetail in the Bezier lookUpTable\n  this._lutBezierDetail = 0;\n  // current curveDetail in the Quadratic lookUpTable\n  this._lutQuadraticDetail = 0;\n\n  this._tessy = this._initTessy();\n\n  this.fontInfos = {};\n\n  return this;\n};\n\np5.RendererGL.prototype = Object.create(p5.Renderer.prototype);\n\n//////////////////////////////////////////////\n// Setting\n//////////////////////////////////////////////\n\np5.RendererGL.prototype._setAttributeDefaults = function(pInst) {\n  var defaults = {\n    alpha: false,\n    depth: true,\n    stencil: true,\n    antialias: false,\n    premultipliedAlpha: false,\n    preserveDrawingBuffer: true,\n    perPixelLighting: false\n  };\n  if (pInst._glAttributes === null) {\n    pInst._glAttributes = defaults;\n  } else {\n    pInst._glAttributes = Object.assign(defaults, pInst._glAttributes);\n  }\n  return;\n};\n\np5.RendererGL.prototype._initContext = function() {\n  try {\n    this.drawingContext =\n      this.canvas.getContext('webgl', this._pInst._glAttributes) ||\n      this.canvas.getContext('experimental-webgl', this._pInst._glAttributes);\n    if (this.drawingContext === null) {\n      throw new Error('Error creating webgl context');\n    } else {\n      console.log('p5.RendererGL: enabled webgl context');\n      var gl = this.drawingContext;\n      gl.enable(gl.DEPTH_TEST);\n      gl.depthFunc(gl.LEQUAL);\n      gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n      this._viewport = this.drawingContext.getParameter(\n        this.drawingContext.VIEWPORT\n      );\n    }\n  } catch (er) {\n    throw er;\n  }\n};\n\n//This is helper function to reset the context anytime the attributes\n//are changed with setAttributes()\n\np5.RendererGL.prototype._resetContext = function(options, callback) {\n  var w = this.width;\n  var h = this.height;\n  var defaultId = this.canvas.id;\n  var c = this.canvas;\n  if (c) {\n    c.parentNode.removeChild(c);\n  }\n  c = document.createElement('canvas');\n  c.id = defaultId;\n  if (this._pInst._userNode) {\n    this._pInst._userNode.appendChild(c);\n  } else {\n    document.body.appendChild(c);\n  }\n  this._pInst.canvas = c;\n\n  var renderer = new p5.RendererGL(this._pInst.canvas, this._pInst, true);\n  this._pInst._setProperty('_renderer', renderer);\n  renderer.resize(w, h);\n  renderer._applyDefaults();\n  this._pInst._elements.push(renderer);\n\n  if (typeof callback === 'function') {\n    //setTimeout with 0 forces the task to the back of the queue, this ensures that\n    //we finish switching out the renderer\n    setTimeout(function() {\n      callback.apply(window._renderer, options);\n    }, 0);\n  }\n};\n/**\n * @module Rendering\n * @submodule Rendering\n * @for p5\n */\n/**\n * Set attributes for the WebGL Drawing context.\n * This is a way of adjusting how the WebGL\n * renderer works to fine-tune the display and performance.\n * <br><br>\n * Note that this will reinitialize the drawing context\n * if called after the WebGL canvas is made.\n * <br><br>\n * If an object is passed as the parameter, all attributes\n * not declared in the object will be set to defaults.\n * <br><br>\n * The available attributes are:\n * <br>\n * alpha - indicates if the canvas contains an alpha buffer\n * default is false\n * <br><br>\n * depth - indicates whether the drawing buffer has a depth buffer\n * of at least 16 bits - default is true\n * <br><br>\n * stencil - indicates whether the drawing buffer has a stencil buffer\n * of at least 8 bits\n * <br><br>\n * antialias - indicates whether or not to perform anti-aliasing\n * default is false\n * <br><br>\n * premultipliedAlpha - indicates that the page compositor will assume\n * the drawing buffer contains colors with pre-multiplied alpha\n * default is false\n * <br><br>\n * preserveDrawingBuffer - if true the buffers will not be cleared and\n * and will preserve their values until cleared or overwritten by author\n * (note that p5 clears automatically on draw loop)\n * default is true\n * <br><br>\n * perPixelLighting - if true, per-pixel lighting will be used in the\n * lighting shader.\n * default is false\n * <br><br>\n * @method setAttributes\n * @for p5\n * @param  {String}  key Name of attribute\n * @param  {Boolean}        value New value of named attribute\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n *\n * function draw() {\n *   background(255);\n *   push();\n *   rotateZ(frameCount * 0.02);\n *   rotateX(frameCount * 0.02);\n *   rotateY(frameCount * 0.02);\n *   fill(0, 0, 0);\n *   box(50);\n *   pop();\n * }\n * </code>\n * </div>\n * <br>\n * Now with the antialias attribute set to true.\n * <br>\n * <div>\n * <code>\n * function setup() {\n *   setAttributes('antialias', true);\n *   createCanvas(100, 100, WEBGL);\n * }\n *\n * function draw() {\n *   background(255);\n *   push();\n *   rotateZ(frameCount * 0.02);\n *   rotateX(frameCount * 0.02);\n *   rotateY(frameCount * 0.02);\n *   fill(0, 0, 0);\n *   box(50);\n *   pop();\n * }\n * </code>\n * </div>\n *\n * <div>\n * <code>\n * // press the mouse button to enable perPixelLighting\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n *   noStroke();\n *   fill(255);\n * }\n *\n * var lights = [\n *   { c: '#f00', t: 1.12, p: 1.91, r: 0.2 },\n *   { c: '#0f0', t: 1.21, p: 1.31, r: 0.2 },\n *   { c: '#00f', t: 1.37, p: 1.57, r: 0.2 },\n *   { c: '#ff0', t: 1.12, p: 1.91, r: 0.7 },\n *   { c: '#0ff', t: 1.21, p: 1.31, r: 0.7 },\n *   { c: '#f0f', t: 1.37, p: 1.57, r: 0.7 }\n * ];\n *\n * function draw() {\n *   var t = millis() / 1000 + 1000;\n *   background(0);\n *   directionalLight(color('#222'), 1, 1, 1);\n *\n *   for (var i = 0; i < lights.length; i++) {\n *     var light = lights[i];\n *     pointLight(\n *       color(light.c),\n *       p5.Vector.fromAngles(t * light.t, t * light.p, width * light.r)\n *     );\n *   }\n *\n *   specularMaterial(255);\n *   sphere(width * 0.1);\n *\n *   rotateX(t * 0.77);\n *   rotateY(t * 0.83);\n *   rotateZ(t * 0.91);\n *   torus(width * 0.3, width * 0.07, 24, 10);\n * }\n *\n * function mousePressed() {\n *   setAttributes('perPixelLighting', true);\n *   noStroke();\n *   fill(255);\n * }\n * function mouseReleased() {\n *   setAttributes('perPixelLighting', false);\n *   noStroke();\n *   fill(255);\n * }\n * </code>\n * </div>\n *\n * @alt a rotating cube with smoother edges\n */\n/**\n * @method setAttributes\n * @for p5\n * @param  {Object}  obj object with key-value pairs\n */\n\np5.prototype.setAttributes = function(key, value) {\n  var unchanged = true;\n  if (typeof value !== 'undefined') {\n    //first time modifying the attributes\n    if (this._glAttributes === null) {\n      this._glAttributes = {};\n    }\n    if (this._glAttributes[key] !== value) {\n      //changing value of previously altered attribute\n      this._glAttributes[key] = value;\n      unchanged = false;\n    }\n    //setting all attributes with some change\n  } else if (key instanceof Object) {\n    if (this._glAttributes !== key) {\n      this._glAttributes = key;\n      unchanged = false;\n    }\n  }\n  //@todo_FES\n  if (!this._renderer.isP3D || unchanged) {\n    return;\n  }\n\n  if (!this._setupDone) {\n    for (var x in this._renderer.gHash) {\n      if (this._renderer.gHash.hasOwnProperty(x)) {\n        console.error(\n          'Sorry, Could not set the attributes, you need to call setAttributes() ' +\n            'before calling the other drawing methods in setup()'\n        );\n        return;\n      }\n    }\n  }\n\n  this.push();\n  this._renderer._resetContext();\n  this.pop();\n\n  if (this._renderer._curCamera) {\n    this._renderer._curCamera._renderer = this._renderer;\n  }\n};\n\n/**\n * @class p5.RendererGL\n */\n\np5.RendererGL.prototype._update = function() {\n  // reset model view and apply initial camera transform\n  // (containing only look at info; no projection).\n  this.uMVMatrix.set(\n    this._curCamera.cameraMatrix.mat4[0],\n    this._curCamera.cameraMatrix.mat4[1],\n    this._curCamera.cameraMatrix.mat4[2],\n    this._curCamera.cameraMatrix.mat4[3],\n    this._curCamera.cameraMatrix.mat4[4],\n    this._curCamera.cameraMatrix.mat4[5],\n    this._curCamera.cameraMatrix.mat4[6],\n    this._curCamera.cameraMatrix.mat4[7],\n    this._curCamera.cameraMatrix.mat4[8],\n    this._curCamera.cameraMatrix.mat4[9],\n    this._curCamera.cameraMatrix.mat4[10],\n    this._curCamera.cameraMatrix.mat4[11],\n    this._curCamera.cameraMatrix.mat4[12],\n    this._curCamera.cameraMatrix.mat4[13],\n    this._curCamera.cameraMatrix.mat4[14],\n    this._curCamera.cameraMatrix.mat4[15]\n  );\n\n  // reset light data for new frame.\n\n  this.ambientLightColors.length = 0;\n  this.directionalLightDirections.length = 0;\n  this.directionalLightColors.length = 0;\n\n  this.pointLightPositions.length = 0;\n  this.pointLightColors.length = 0;\n\n  this._enableLighting = false;\n};\n\n/**\n * [background description]\n */\np5.RendererGL.prototype.background = function() {\n  var _col = this._pInst.color.apply(this._pInst, arguments);\n  var _r = _col.levels[0] / 255;\n  var _g = _col.levels[1] / 255;\n  var _b = _col.levels[2] / 255;\n  var _a = _col.levels[3] / 255;\n  this.GL.clearColor(_r, _g, _b, _a);\n  this.GL.depthMask(true);\n  this.GL.clear(this.GL.COLOR_BUFFER_BIT | this.GL.DEPTH_BUFFER_BIT);\n  this._pixelsState._pixelsDirty = true;\n};\n\n//////////////////////////////////////////////\n// COLOR\n//////////////////////////////////////////////\n/**\n * Basic fill material for geometry with a given color\n * @method  fill\n * @class p5.RendererGL\n * @param  {Number|Number[]|String|p5.Color} v1  gray value,\n * red or hue value (depending on the current color mode),\n * or color Array, or CSS color string\n * @param  {Number}            [v2] green or saturation value\n * @param  {Number}            [v3] blue or brightness value\n * @param  {Number}            [a]  opacity\n * @chainable\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(200, 200, WEBGL);\n * }\n *\n * function draw() {\n *   background(0);\n *   noStroke();\n *   fill(100, 100, 240);\n *   rotateX(frameCount * 0.01);\n *   rotateY(frameCount * 0.01);\n *   box(75, 75, 75);\n * }\n * </code>\n * </div>\n *\n * @alt\n * black canvas with purple cube spinning\n *\n */\np5.RendererGL.prototype.fill = function(v1, v2, v3, a) {\n  //see material.js for more info on color blending in webgl\n  var color = p5.prototype.color.apply(this._pInst, arguments);\n  this.curFillColor = color._array;\n  this.drawMode = constants.FILL;\n  this._useNormalMaterial = false;\n  this._tex = null;\n};\n\n/**\n * Basic stroke material for geometry with a given color\n * @method  stroke\n * @param  {Number|Number[]|String|p5.Color} v1  gray value,\n * red or hue value (depending on the current color mode),\n * or color Array, or CSS color string\n * @param  {Number}            [v2] green or saturation value\n * @param  {Number}            [v3] blue or brightness value\n * @param  {Number}            [a]  opacity\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(200, 200, WEBGL);\n * }\n *\n * function draw() {\n *   background(0);\n *   stroke(240, 150, 150);\n *   fill(100, 100, 240);\n *   rotateX(frameCount * 0.01);\n *   rotateY(frameCount * 0.01);\n *   box(75, 75, 75);\n * }\n * </code>\n * </div>\n *\n * @alt\n * black canvas with purple cube with pink outline spinning\n *\n */\np5.RendererGL.prototype.stroke = function(r, g, b, a) {\n  //@todo allow transparency in stroking currently doesn't have\n  //any impact and causes problems with specularMaterial\n  arguments[3] = 255;\n  var color = p5.prototype.color.apply(this._pInst, arguments);\n  this.curStrokeColor = color._array;\n};\n\np5.RendererGL.prototype.strokeCap = function(cap) {\n  // @TODO : to be implemented\n  console.error('Sorry, strokeCap() is not yet implemented in WEBGL mode');\n};\n\np5.RendererGL.prototype.blendMode = function(mode) {\n  if (\n    mode === constants.DARKEST ||\n    mode === constants.LIGHTEST ||\n    mode === constants.ADD ||\n    mode === constants.BLEND ||\n    mode === constants.SUBTRACT ||\n    mode === constants.SCREEN ||\n    mode === constants.EXCLUSION ||\n    mode === constants.REPLACE ||\n    mode === constants.MULTIPLY\n  )\n    this.curBlendMode = mode;\n  else if (\n    mode === constants.BURN ||\n    mode === constants.OVERLAY ||\n    mode === constants.HARD_LIGHT ||\n    mode === constants.SOFT_LIGHT ||\n    mode === constants.DODGE\n  ) {\n    console.warn(\n      'BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.'\n    );\n  }\n};\n\n/**\n * Change weight of stroke\n * @method  strokeWeight\n * @param  {Number} stroke weight to be used for drawing\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(200, 400, WEBGL);\n *   setAttributes('antialias', true);\n * }\n *\n * function draw() {\n *   background(0);\n *   noStroke();\n *   translate(0, -100, 0);\n *   stroke(240, 150, 150);\n *   fill(100, 100, 240);\n *   push();\n *   strokeWeight(8);\n *   rotateX(frameCount * 0.01);\n *   rotateY(frameCount * 0.01);\n *   sphere(75);\n *   pop();\n *   push();\n *   translate(0, 200, 0);\n *   strokeWeight(1);\n *   rotateX(frameCount * 0.01);\n *   rotateY(frameCount * 0.01);\n *   sphere(75);\n *   pop();\n * }\n * </code>\n * </div>\n *\n * @alt\n * black canvas with two purple rotating spheres with pink\n * outlines the sphere on top has much heavier outlines,\n *\n */\np5.RendererGL.prototype.strokeWeight = function(w) {\n  if (this.curStrokeWeight !== w) {\n    this.pointSize = w;\n    this.curStrokeWeight = w;\n  }\n};\n\n// x,y are canvas-relative (pre-scaled by _pixelDensity)\np5.RendererGL.prototype._getPixel = function(x, y) {\n  var pixelsState = this._pixelsState;\n  var imageData, index;\n  if (pixelsState._pixelsDirty) {\n    imageData = new Uint8Array(4);\n    // prettier-ignore\n    this.drawingContext.readPixels(\n      x, y, 1, 1,\n      this.drawingContext.RGBA, this.drawingContext.UNSIGNED_BYTE,\n      imageData\n    );\n    index = 0;\n  } else {\n    imageData = pixelsState.pixels;\n    index = (Math.floor(x) + Math.floor(y) * this.canvas.width) * 4;\n  }\n  return [\n    imageData[index + 0],\n    imageData[index + 1],\n    imageData[index + 2],\n    imageData[index + 3]\n  ];\n};\n\n/**\n * Loads the pixels data for this canvas into the pixels[] attribute.\n * Note that updatePixels() and set() do not work.\n * Any pixel manipulation must be done directly to the pixels[] array.\n *\n * @private\n * @method loadPixels\n *\n */\n\np5.RendererGL.prototype.loadPixels = function() {\n  var pixelsState = this._pixelsState;\n  if (!pixelsState._pixelsDirty) return;\n  pixelsState._pixelsDirty = false;\n\n  //@todo_FES\n  if (this._pInst._glAttributes.preserveDrawingBuffer !== true) {\n    console.log(\n      'loadPixels only works in WebGL when preserveDrawingBuffer ' + 'is true.'\n    );\n    return;\n  }\n\n  //if there isn't a renderer-level temporary pixels buffer\n  //make a new one\n  var pixels = pixelsState.pixels;\n  var len = this.GL.drawingBufferWidth * this.GL.drawingBufferHeight * 4;\n  if (!(pixels instanceof Uint8Array) || pixels.length !== len) {\n    pixels = new Uint8Array(len);\n    this._pixelsState._setProperty('pixels', pixels);\n  }\n\n  var pd = this._pInst._pixelDensity;\n  // prettier-ignore\n  this.GL.readPixels(\n    0, 0, this.width * pd, this.height * pd,\n    this.GL.RGBA, this.GL.UNSIGNED_BYTE,\n    pixels\n  );\n};\n\n//////////////////////////////////////////////\n// HASH | for geometry\n//////////////////////////////////////////////\n\np5.RendererGL.prototype.geometryInHash = function(gId) {\n  return this.gHash[gId] !== undefined;\n};\n\n/**\n * [resize description]\n * @private\n * @param  {Number} w [description]\n * @param  {Number} h [description]\n */\np5.RendererGL.prototype.resize = function(w, h) {\n  p5.Renderer.prototype.resize.call(this, w, h);\n  this.GL.viewport(\n    0,\n    0,\n    this.GL.drawingBufferWidth,\n    this.GL.drawingBufferHeight\n  );\n  this._viewport = this.GL.getParameter(this.GL.VIEWPORT);\n\n  this._curCamera._resize();\n\n  //resize pixels buffer\n  var pixelsState = this._pixelsState;\n  pixelsState._pixelsDirty = true;\n  if (typeof pixelsState.pixels !== 'undefined') {\n    pixelsState._setProperty(\n      'pixels',\n      new Uint8Array(\n        this.GL.drawingBufferWidth * this.GL.drawingBufferHeight * 4\n      )\n    );\n  }\n};\n\n/**\n * clears color and depth buffers\n * with r,g,b,a\n * @private\n * @param {Number} r normalized red val.\n * @param {Number} g normalized green val.\n * @param {Number} b normalized blue val.\n * @param {Number} a normalized alpha val.\n */\np5.RendererGL.prototype.clear = function() {\n  var _r = arguments[0] || 0;\n  var _g = arguments[1] || 0;\n  var _b = arguments[2] || 0;\n  var _a = arguments[3] || 0;\n  this.GL.clearColor(_r, _g, _b, _a);\n  this.GL.clear(this.GL.COLOR_BUFFER_BIT | this.GL.DEPTH_BUFFER_BIT);\n  this._pixelsState._pixelsDirty = true;\n};\n\np5.RendererGL.prototype.applyMatrix = function(a, b, c, d, e, f) {\n  if (arguments.length === 16) {\n    p5.Matrix.prototype.apply.apply(this.uMVMatrix, arguments);\n  } else {\n    // prettier-ignore\n    this.uMVMatrix.apply([\n      a, b, 0, 0,\n      c, d, 0, 0,\n      0, 0, 1, 0,\n      e, f, 0, 1,\n    ]);\n  }\n};\n\n/**\n * [translate description]\n * @private\n * @param  {Number} x [description]\n * @param  {Number} y [description]\n * @param  {Number} z [description]\n * @chainable\n * @todo implement handle for components or vector as args\n */\np5.RendererGL.prototype.translate = function(x, y, z) {\n  if (x instanceof p5.Vector) {\n    z = x.z;\n    y = x.y;\n    x = x.x;\n  }\n  this.uMVMatrix.translate([x, y, z]);\n  return this;\n};\n\n/**\n * Scales the Model View Matrix by a vector\n * @private\n * @param  {Number | p5.Vector | Array} x [description]\n * @param  {Number} [y] y-axis scalar\n * @param  {Number} [z] z-axis scalar\n * @chainable\n */\np5.RendererGL.prototype.scale = function(x, y, z) {\n  this.uMVMatrix.scale(x, y, z);\n  return this;\n};\n\np5.RendererGL.prototype.rotate = function(rad, axis) {\n  if (typeof axis === 'undefined') {\n    return this.rotateZ(rad);\n  }\n  p5.Matrix.prototype.rotate.apply(this.uMVMatrix, arguments);\n  return this;\n};\n\np5.RendererGL.prototype.rotateX = function(rad) {\n  this.rotate(rad, 1, 0, 0);\n  return this;\n};\n\np5.RendererGL.prototype.rotateY = function(rad) {\n  this.rotate(rad, 0, 1, 0);\n  return this;\n};\n\np5.RendererGL.prototype.rotateZ = function(rad) {\n  this.rotate(rad, 0, 0, 1);\n  return this;\n};\n\np5.RendererGL.prototype.push = function() {\n  // get the base renderer style\n  var style = p5.Renderer.prototype.push.apply(this);\n\n  // add webgl-specific style properties\n  var properties = style.properties;\n\n  properties.uMVMatrix = this.uMVMatrix.copy();\n  properties.uPMatrix = this.uPMatrix.copy();\n  properties._curCamera = this._curCamera;\n\n  // make a copy of the current camera for the push state\n  // this preserves any references stored using 'createCamera'\n  this._curCamera = this._curCamera.copy();\n",
          "filepath": "data/repos/processing/p5.js-0.8/src/webgl/p5.RendererGL.js",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      },
      {
        "id": "06d327b7-3b0a-4ac4-b4c2-87e8d686bb8f",
        "score": 0.015625,
        "payload": {
          "text": "# p5.js WEBGL mode architecture\n\nThis document describes the structure of the p5.js WEBGL mode for p5.js contributors and maintainers\u2014and any other interested parties. If you're interested in using 3D graphics in your sketches, [view this tutorial](https://github.com/processing/p5.js/wiki/Getting-started-with-WebGL-in-p5) instead.\n\n## Overview of Structure and Objects\n\nThe core objects in the WEBGL architecture are the p5.Renderer.GL, p5.Shader, p5.Texture, and p5.Geometry.\nA single instance of p5.Renderer.GL manages its own p5.Shaders, p5.Textures, and p5.Geometry\u2014a goal for this is to allow offscreen rendering using WebGL, but that hasn\u2019t been tested yet.\nShaders and textures are associated with a specific GL context via the renderer.\n\n### p5.RendererGL\nThe p5.RendererGL object is the renderer for WEBGL / 3D Mode in p5.js.\nDerived from p5.Renderer, it provides additional functionality not available in 2D mode, such as: `box()`, `cone()`, use of shaders, accelerated texture rendering, and lighting.\n\n* Manages\u2014creates and caches\u2014shaders (p5.Shader objects) and textures (p5.Texture objects)\n* Prepares coordinates of shapes to be used as attribute arrays by shaders.\n* Selects the correct shader for use when stroke, fill, texture, and various lighting methods are called, then supplies the appropriate uniforms to those shaders.\n* Maintains data about lighting: a count of how many various types of lights are used and their parameters.\n* Caches geometry for 3D primitives (in retained mode), with the exception of shapes created with begin/endShape, which are dynamically generated and pushed to GL every time one is drawn (in immediate mode).\n\nThe renderer manages choosing an appropriate p5.Shader for the current drawing conditions.\n\n### p5.Shader\nThe p5.Shader class provides access to the uniforms and attributes of a GL program. \n\n* Compiles and links the vertex and fragment shader components\n* Provides an API for accessing and setting shader attributes and uniforms\n* Binds textures the shader needs before a shape is rendered\n* Provides the bindShader() method for use in the render before a shape is drawn, then unbindShader() after the shape is drawn.\n\nThere are four default shaders, as documented in the Shader section.\n\n### p5.Texture\nThe p5.Texture object manages GL state for a texture based on a `p5.Image`, `p5.MediaElement`, `p5.Element`, or `ImageData`.\n\n* Internally handles processing image data based on type, so that the p5.Renderer implementation doesn\u2019t have to make special exceptions in its own methods when handling textures\n* Updates conditionally every frame by making a best guess at whether or not image data has changed. Tries not to upload the texture if no change has been made, to help performance.\n\n### p5.Geometry\nShapes rendered in retain mode are stored as p5.Geometry objects in a cache in the p5.Renderer object. \nThe renderer maps strings to p5.Geometry objects based on the shape drawn and its parameters (for example, geometry for a box created with `box(70, 80, 90, 10, 20)` is mapped from `'box|70|80|90|10|20\u2019`). Calls to functions that have retained geometry create a p5.Geometry object on the first pass and store it in a geometry hash using the aforementioned string ID. Later calls look for that ID in the hash, and if it is found use that to reference the existing object rather than creating a new one.\n\n* Stores vertices, normals, faces, line vertices, line normals, and texture coordinates for the geometry primitives\n* Provides methods for computing the faces, normals, line vertices, and line normals for a set of vertices\n\n## Immediate Mode\nAll attributes for drawing with Immediate Mode are stored in an object in the renderer, used to draw to the GL drawing context, and then discarded.\n\n## Geometry: Retain and Immediate Mode\nRetained geometry is used for 3D primitives, while immediate mode is used for shapes created with begin/endShape.\n\n|Functions with retained geometry| Functions with immediate mode geometry |\n|--------------------------------|----------------------------------------|\n|plane()                         | bezier()                               |\n|box()                           | curve()                                |\n|sphere()                        | line()                                 |\n|cylinder()                      | beginShape()                           |\n|cone()                          | vertex()                               |\n|ellipsoid()                     | endShape()                             |\n|torus()                         | point()                                |\n|triangle()                      | curveVertex()                          |\n|arc()                           | bezierVertex()                         |\n|point()                         | quadraticVertex()                      |\n|ellipse()                       |\n|rect()                          |\n|quad()                          |\n|text()                          |\n\n\n\n\n\n\n## Texture Management\nA p5.Renderer.GL instances manages an array of p5.Textures objects on an as-needed basis.\nTextures are created for images and videos used with the `texture()` method or as uniforms provided to custom shaders.\n\nWhen the renderer needs a texture, it first checks if one has already been created for a given image/video, then provides that to a shader for rendering. A new texture is only created if an existing one cannot be found for the image/video.\n\n## Shaders\n\n### Types of Shaders\n\n#### Color Shader\nProvides flat shading of objects, based on the current fill color.\n\n#### Light Shader (for lighting AND textures)\nAccounts for:\n* Lighting parameters set by `ambientLight()`, `directionalLight()`, and `pointLight()`\n* Material parameters set by `ambientMaterial()`, and `specularMaterial()`\n* Texture parameters, set by `texture()`\n\n#### Normal Shader\nThe normal shader is set when `normalMaterial()` is in use. It uses the surface\u2019s normal vector to determine a fragment color.\n\n### Shader Parameters\n\n#### Standard Model View & Camera Uniforms\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|---------------------------------|-----------|---------------|------------|-------------|------------|\n|`uniform mat4 uModelViewMatrix;` |x          |x              |x           |x            |x           |\n|`uniform mat4 uProjectionMatrix;`|x          |x              |x           |x            |x           |\n|`uniform vec4 uViewPort;`        |x          |               |            |             |            |\n\n\n#### Geometry Attributes and Uniforms\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|---------------------------------|-----------|---------------|------------|-------------|------------|\n|`attribute vec3 aPosition;`      |x          |x              |x           |x            |x           |\n|`attribute vec3 aNormal;`        |           |x              |            |x            |            | \n|`attribute vec2 aTexCoord;`      |           |x              |            |x            |            |\n|`uniform mat3 uNormalMatrix;`    |           |x              |            |x            |            |\n|`attribute vec4 aDirection;`     |x          |               |            |             |            |\n|`uniform float uStrokeWeight;`   |x          |               |            |             |            |\n\n#### Material Colors\n|Parameter                        |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|---------------------------------|-----------|---------------|------------|-------------|------------|\n|`uniform vec4 uMaterialColor;`   |x          |x              |            |             |x           |\n|`attribute vec4 aVertexColor;`   |           |               |x           |             |            |\n\n#### Light Parameters\n\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\n|`uniform int uAmbientLightCount;`     |           |x              |            |             |            |\n|`uniform int uAmbientLightCount;`     |           |x              |            |             |            |\n|`uniform int uDirectionalLightCount;` |           |x              |            |             |            |\n|`uniform int uPointLightCount;`       |           |x              |            |             |            |\n|`uniform vec3 uAmbientColor[8];`      |           |x              |            |             |            |\n|`uniform vec3 uLightingDirection[8];` |           |x              |            |             |            |\n|`uniform vec3 uDirectionalColor[8];`  |           |x              |            |             |            |\n|`uniform vec3 uPointLightLocation[8];`|           |x              |            |             |            |\n|`uniform vec3 uPointLightColor[8];`   |           |x              |            |             |            |\n|`uniform bool uSpecular;`             |           |x              |            |             |            |\n|`uniform int  uShininess;`            |           |x              |            |             |            |\n|`uniform bool uUseLighting;`          |           |x              |            |             |            |\n\n#### Texture Parameters\n\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\n|`uniform sampler2D uSampler;`         |           |x              |            |             |            |\n|`uniform bool isTexture;`             |           |x              |            |             |            |\n\n#### General Parameters\n\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\n|`uniform float uResolution;`          |           |               |x           |             |            |\n|`uniform float uPointSize;`           |           |               |x           |             |x           |\n\n#### Varying Parameters\n\n|Parameter                             |Line Shader|TexLight Shader|Color Shader|Normal Shader|Point Shader|\n|--------------------------------------|-----------|---------------|------------|-------------|------------|\n|`varying vec3 vVertexNormal;`         |           |x              |            |             |            |\n|`varying vec2 vVertTexCoord;`         |           |x              |            |             |            |\n|`varying vec3 vLightWeighting;`       |           |x              |            |             |            |\n|`varying highp vec2 vVertTexCoord;`   |           |               |            |x            |            |\n|`varying vec4 vColor;`                |           |               |x           |             |            |\n|`varying float vStrokeWeight`         |           |               |            |             |x           |\n\n## Next Steps\n\nComing soon!\n",
          "filepath": "data/repos/processing/p5.js-0.8/developer_docs/webgl_mode_architecture.md",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      },
      {
        "id": "72e18b74-1fe2-49c3-9188-7822b49dc6a4",
        "score": 0.015384615384615385,
        "payload": {
          "text": "/**\n * This module defines the p5.Shader class\n * @module Lights, Camera\n * @submodule Shaders\n * @for p5\n * @requires core\n */\n\n'use strict';\n\nvar p5 = require('../core/main');\n\n/**\n * Shader class for WEBGL Mode\n * @class p5.Shader\n * @param {p5.RendererGL} renderer an instance of p5.RendererGL that\n * will provide the GL context for this new p5.Shader\n * @param {String} vertSrc source code for the vertex shader (as a string)\n * @param {String} fragSrc source code for the fragment shader (as a string)\n */\np5.Shader = function(renderer, vertSrc, fragSrc) {\n  // TODO: adapt this to not take ids, but rather,\n  // to take the source for a vertex and fragment shader\n  // to enable custom shaders at some later date\n  this._renderer = renderer;\n  this._vertSrc = vertSrc;\n  this._fragSrc = fragSrc;\n  this._vertShader = -1;\n  this._fragShader = -1;\n  this._glProgram = 0;\n  this._loadedAttributes = false;\n  this.attributes = {};\n  this._loadedUniforms = false;\n  this.uniforms = {};\n  this._bound = false;\n  this.samplers = [];\n};\n\n/**\n * Creates, compiles, and links the shader based on its\n * sources for the vertex and fragment shaders (provided\n * to the constructor). Populates known attributes and\n * uniforms from the shader.\n * @method init\n * @chainable\n * @private\n */\np5.Shader.prototype.init = function() {\n  if (this._glProgram === 0 /* or context is stale? */) {\n    var gl = this._renderer.GL;\n\n    // @todo: once custom shading is allowed,\n    // friendly error messages should be used here to share\n    // compiler and linker errors.\n\n    //set up the shader by\n    // 1. creating and getting a gl id for the shader program,\n    // 2. compliling its vertex & fragment sources,\n    // 3. linking the vertex and fragment shaders\n    this._vertShader = gl.createShader(gl.VERTEX_SHADER);\n    //load in our default vertex shader\n    gl.shaderSource(this._vertShader, this._vertSrc);\n    gl.compileShader(this._vertShader);\n    // if our vertex shader failed compilation?\n    if (!gl.getShaderParameter(this._vertShader, gl.COMPILE_STATUS)) {\n      console.error(\n        'Yikes! An error occurred compiling the vertex shader:' +\n          gl.getShaderInfoLog(this._vertShader)\n      );\n      return null;\n    }\n\n    this._fragShader = gl.createShader(gl.FRAGMENT_SHADER);\n    //load in our material frag shader\n    gl.shaderSource(this._fragShader, this._fragSrc);\n    gl.compileShader(this._fragShader);\n    // if our frag shader failed compilation?\n    if (!gl.getShaderParameter(this._fragShader, gl.COMPILE_STATUS)) {\n      console.error(\n        'Darn! An error occurred compiling the fragment shader:' +\n          gl.getShaderInfoLog(this._fragShader)\n      );\n      return null;\n    }\n\n    this._glProgram = gl.createProgram();\n    gl.attachShader(this._glProgram, this._vertShader);\n    gl.attachShader(this._glProgram, this._fragShader);\n    gl.linkProgram(this._glProgram);\n    if (!gl.getProgramParameter(this._glProgram, gl.LINK_STATUS)) {\n      console.error(\n        'Snap! Error linking shader program: ' +\n          gl.getProgramInfoLog(this._glProgram)\n      );\n    }\n\n    this._loadAttributes();\n    this._loadUniforms();\n  }\n  return this;\n};\n\n/**\n * Queries the active attributes for this shader and loads\n * their names and locations into the attributes array.\n * @method _loadAttributes\n * @private\n */\np5.Shader.prototype._loadAttributes = function() {\n  if (this._loadedAttributes) {\n    return;\n  }\n\n  this.attributes = {};\n\n  var gl = this._renderer.GL;\n\n  var numAttributes = gl.getProgramParameter(\n    this._glProgram,\n    gl.ACTIVE_ATTRIBUTES\n  );\n  for (var i = 0; i < numAttributes; ++i) {\n    var attributeInfo = gl.getActiveAttrib(this._glProgram, i);\n    var name = attributeInfo.name;\n    var location = gl.getAttribLocation(this._glProgram, name);\n    var attribute = {};\n    attribute.name = name;\n    attribute.location = location;\n    attribute.type = attributeInfo.type;\n    attribute.size = attributeInfo.size;\n    this.attributes[name] = attribute;\n  }\n\n  this._loadedAttributes = true;\n};\n\n/**\n * Queries the active uniforms for this shader and loads\n * their names and locations into the uniforms array.\n * @method _loadUniforms\n * @private\n */\np5.Shader.prototype._loadUniforms = function() {\n  if (this._loadedUniforms) {\n    return;\n  }\n\n  var gl = this._renderer.GL;\n\n  // Inspect shader and cache uniform info\n  var numUniforms = gl.getProgramParameter(this._glProgram, gl.ACTIVE_UNIFORMS);\n\n  var samplerIndex = 0;\n  for (var i = 0; i < numUniforms; ++i) {\n    var uniformInfo = gl.getActiveUniform(this._glProgram, i);\n    var uniform = {};\n    uniform.location = gl.getUniformLocation(this._glProgram, uniformInfo.name);\n    uniform.size = uniformInfo.size;\n    var uniformName = uniformInfo.name;\n    //uniforms thats are arrays have their name returned as\n    //someUniform[0] which is a bit silly so we trim it\n    //off here. The size property tells us that its an array\n    //so we dont lose any information by doing this\n    if (uniformInfo.size > 1) {\n      uniformName = uniformName.substring(0, uniformName.indexOf('[0]'));\n    }\n    uniform.name = uniformName;\n    uniform.type = uniformInfo.type;\n    if (uniform.type === gl.SAMPLER_2D) {\n      uniform.samplerIndex = samplerIndex;\n      samplerIndex++;\n      this.samplers.push(uniform);\n    }\n    this.uniforms[uniformName] = uniform;\n  }\n  this._loadedUniforms = true;\n};\n\np5.Shader.prototype.compile = function() {\n  // TODO\n};\n\n/**\n * initializes (if needed) and binds the shader program.\n * @method bindShader\n * @private\n */\np5.Shader.prototype.bindShader = function() {\n  this.init();\n  if (!this._bound) {\n    this.useProgram();\n    this._bound = true;\n\n    this._setMatrixUniforms();\n\n    this.setUniform('uViewport', this._renderer._viewport);\n  }\n};\n\n/**\n * @method unbindShader\n * @chainable\n * @private\n */\np5.Shader.prototype.unbindShader = function() {\n  if (this._bound) {\n    this.unbindTextures();\n    //this._renderer.GL.useProgram(0); ??\n    this._bound = false;\n  }\n  return this;\n};\n\np5.Shader.prototype.bindTextures = function() {\n  var gl = this._renderer.GL;\n  for (var i = 0; i < this.samplers.length; i++) {\n    var uniform = this.samplers[i];\n    var tex = uniform.texture;\n    if (tex === undefined) {\n      // user hasn't yet supplied a texture for this slot.\n      // (or there may not be one--maybe just lighting),\n      // so we supply a default texture instead.\n      tex = this._renderer._getEmptyTexture();\n    }\n    gl.activeTexture(gl.TEXTURE0 + uniform.samplerIndex);\n    tex.bindTexture();\n    tex.update();\n    gl.uniform1i(uniform.location, uniform.samplerIndex);\n  }\n};\n\np5.Shader.prototype.updateTextures = function() {\n  for (var i = 0; i < this.samplers.length; i++) {\n    var uniform = this.samplers[i];\n    var tex = uniform.texture;\n    if (tex) {\n      tex.update();\n    }\n  }\n};\n\np5.Shader.prototype.unbindTextures = function() {\n  // TODO: migrate stuff from material.js here\n  // - OR - have material.js define this function\n};\n\np5.Shader.prototype._setMatrixUniforms = function() {\n  this.setUniform('uProjectionMatrix', this._renderer.uPMatrix.mat4);\n  this.setUniform('uModelViewMatrix', this._renderer.uMVMatrix.mat4);\n  this.setUniform('uViewMatrix', this._renderer._curCamera.cameraMatrix.mat4);\n  if (this.uniforms.uNormalMatrix) {\n    this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix);\n    this.setUniform('uNormalMatrix', this._renderer.uNMatrix.mat3);\n  }\n};\n\n/**\n * @method useProgram\n * @chainable\n * @private\n */\np5.Shader.prototype.useProgram = function() {\n  var gl = this._renderer.GL;\n  gl.useProgram(this._glProgram);\n  return this;\n};\n\n/**\n * Wrapper around gl.uniform functions.\n * As we store uniform info in the shader we can use that\n * to do type checking on the supplied data and call\n * the appropriate function.\n * @method setUniform\n * @chainable\n * @param {String} uniformName the name of the uniform in the\n * shader program\n * @param {Object|Number|Boolean|Number[]} data the data to be associated\n * with that uniform; type varies (could be a single numerical value, array,\n * matrix, or texture / sampler reference)\n */\np5.Shader.prototype.setUniform = function(uniformName, data) {\n  //@todo update all current gl.uniformXX calls\n\n  var uniform = this.uniforms[uniformName];\n  if (!uniform) {\n    return;\n  }\n\n  var location = uniform.location;\n\n  var gl = this._renderer.GL;\n  this.useProgram();\n\n  switch (uniform.type) {\n    case gl.BOOL:\n      if (data === true) {\n        gl.uniform1i(location, 1);\n      } else {\n        gl.uniform1i(location, 0);\n      }\n      break;\n    case gl.INT:\n      if (uniform.size > 1) {\n        data.length && gl.uniform1iv(location, data);\n      } else {\n        gl.uniform1i(location, data);\n      }\n      break;\n    case gl.FLOAT:\n      if (uniform.size > 1) {\n        data.length && gl.uniform1fv(location, data);\n      } else {\n        gl.uniform1f(location, data);\n      }\n      break;\n    case gl.FLOAT_MAT3:\n      gl.uniformMatrix3fv(location, false, data);\n      break;\n    case gl.FLOAT_MAT4:\n      gl.uniformMatrix4fv(location, false, data);\n      break;\n    case gl.FLOAT_VEC2:\n      if (uniform.size > 1) {\n        data.length && gl.uniform2fv(location, data);\n      } else {\n        gl.uniform2f(location, data[0], data[1]);\n      }\n      break;\n    case gl.FLOAT_VEC3:\n      if (uniform.size > 1) {\n        data.length && gl.uniform3fv(location, data);\n      } else {\n        gl.uniform3f(location, data[0], data[1], data[2]);\n      }\n      break;\n    case gl.FLOAT_VEC4:\n      if (uniform.size > 1) {\n        data.length && gl.uniform4fv(location, data);\n      } else {\n        gl.uniform4f(location, data[0], data[1], data[2], data[3]);\n      }\n      break;\n    case gl.INT_VEC2:\n      if (uniform.size > 1) {\n        data.length && gl.uniform2iv(location, data);\n      } else {\n        gl.uniform2i(location, data[0], data[1]);\n      }\n      break;\n    case gl.INT_VEC3:\n      if (uniform.size > 1) {\n        data.length && gl.uniform3iv(location, data);\n      } else {\n        gl.uniform3i(location, data[0], data[1], data[2]);\n      }\n      break;\n    case gl.INT_VEC4:\n      if (uniform.size > 1) {\n        data.length && gl.uniform4iv(location, data);\n      } else {\n        gl.uniform4i(location, data[0], data[1], data[2], data[3]);\n      }\n      break;\n    case gl.SAMPLER_2D:\n      gl.activeTexture(gl.TEXTURE0 + uniform.samplerIndex);\n      uniform.texture = this._renderer.getTexture(data);\n      gl.uniform1i(uniform.location, uniform.samplerIndex);\n      break;\n    //@todo complete all types\n  }\n  return this;\n};\n\n/* NONE OF THIS IS FAST OR EFFICIENT BUT BEAR WITH ME\n *\n * these shader \"type\" query methods are used by various\n * facilities of the renderer to determine if changing\n * the shader type for the required action (for example,\n * do we need to load the default lighting shader if the\n * current shader cannot handle lighting?)\n *\n **/\n\np5.Shader.prototype.isLightShader = function() {\n  return (\n    this.attributes.aNormal !== undefined ||\n    this.uniforms.uUseLighting !== undefined ||\n    this.uniforms.uAmbientLightCount !== undefined ||\n    this.uniforms.uDirectionalLightCount !== undefined ||\n    this.uniforms.uPointLightCount !== undefined ||\n    this.uniforms.uAmbientColor !== undefined ||\n    this.uniforms.uDirectionalColor !== undefined ||\n    this.uniforms.uPointLightLocation !== undefined ||\n    this.uniforms.uPointLightColor !== undefined ||\n    this.uniforms.uLightingDirection !== undefined ||\n    this.uniforms.uSpecular !== undefined\n  );\n};\n\np5.Shader.prototype.isTextureShader = function() {\n  return this.samplerIndex > 0;\n};\n\np5.Shader.prototype.isColorShader = function() {\n  return (\n    this.attributes.aVertexColor !== undefined ||\n    this.uniforms.uMaterialColor !== undefined\n  );\n};\n\np5.Shader.prototype.isTexLightShader = function() {\n  return this.isLightShader() && this.isTextureShader();\n};\n\np5.Shader.prototype.isStrokeShader = function() {\n  return this.uniforms.uStrokeWeight !== undefined;\n};\n\n/**\n * @method enableAttrib\n * @chainable\n * @private\n */\np5.Shader.prototype.enableAttrib = function(\n  loc,\n  size,\n  type,\n  normalized,\n  stride,\n  offset\n) {\n  var gl = this._renderer.GL;\n  if (loc !== -1) {\n    gl.enableVertexAttribArray(loc);\n    gl.vertexAttribPointer(loc, size, type, normalized, stride, offset);\n  }\n  return this;\n};\n\nmodule.exports = p5.Shader;\n",
          "filepath": "data/repos/processing/p5.js-0.8/src/webgl/p5.Shader.js",
          "repo": "processing/p5.js",
          "version": "0.8",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "processing__p5.js-3680",
    "model_patch": "diff --git a/p5.RendererGL.Immediate.js b/p5.RendererGL.Immediate.js\n--- a/p5.RendererGL.Immediate.js\n+++ b/p5.RendererGL.Immediate.js\n@@ -155,7 +155,7 @@\n     this._drawStrokeImmediateMode();\n   }\n   if (this._doFill) {\n-    this._drawFillImmediateMode(\n+    this._drawFillImmediateModeFixed(\n       mode,\n       isCurve,\n       isBezier,\n@@ -167,6 +167,26 @@\n   this.immediateMode.uvCoords.length = 0;\n   this.isImmediateDrawing = false;\n \n+  return this;\n+};\n+\n+p5.RendererGL.prototype._drawFillImmediateModeFixed = function(\n+  mode,\n+  isCurve,\n+  isBezier,\n+  isQuadratic,\n+  isContour,\n+  shapeKind\n+) {\n+  var gl = this.GL;\n+  this.curFillShader.bindShader();\n+\n+  if (this.immediateMode.shapeMode === constants.LINE_STRIP ||\n+      this.immediateMode.shapeMode === constants.LINES) {\n+    this.immediateMode.shapeMode = constants.LINE_LOOP;\n+  }\n+\n+  this._drawFillImmediateMode(\n+    mode, isCurve, isBezier, isQuadratic, isContour, shapeKind);\n   return this;\n };",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 261.93,
      "issue_embedding_time_ms": 261.93,
      "retrieval_time_ms_jina": 2.0,
      "retrieval_time_ms": 2.0,
      "total_retrieval_time_ms": 263.93,
      "generation_time_ms": 3944.94,
      "total_io_time_ms": 4208.87,
      "input_total_token_limit": null,
      "issue_text_tokens": 481,
      "vlm_tokens": 0,
      "retrieved_tokens": 11476,
      "prompt_template_tokens": 537,
      "total_input_prompt_tokens": 12494,
      "output_generated_tokens": 296,
      "total_io_tokens": 12790,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nfill of certain shapes not working properly in Webgl mode \\n\\r\\n\\r\\n#### Nature of issue?\\r\\n\\r\\n- [x ] Found a bug\\r\\n- [ ] Existing feature enhancement\\r\\n- [ ] New feature request\\r\\n\\r\\n#### Most appropriate sub-area of p5.js?\\r\\n\\r\\n- [ ] Color\\r\\n- [ ] Core/Environment/Rendering\\r\\n- [ ] Data\\r\\n- [ ] Events\\r\\n- [ ] Image\\r\\n- [ ] IO\\r\\n- [ ] Math\\r\\n- [ ] Typography\\r\\n- [ ] Utilities\\r\\n- [ x] WebGL\\r\\n- [ ] Other (specify if possible)\\r\\n\\r\\n#### Which platform were you using when you encountered this?\\r\\n\\r\\n- [x ] Mobile/Tablet (touch devices)\\r\\n- [x ] Desktop/Laptop\\r\\n- [ ] Others (specify if possible)\\r\\n\\r\\n#### Details about the bug: \\r\\n\\r\\n- p5.js version 0.7.3: \\r\\n- Steps to reproduce this:\\r\\n\\r\\n\\r\\n**Here is a minimal working example**. It should draw the letter C (works in 2D), but in WEBGL it creates a strange fill from the lower extremity of the C letter to the origin (top left of the letter).\\r\\nAn example can be seen in <https://codepen.io/sixhat/pen/NmNgLj>\\r\\n\\r\\n<img width=\\\"346\\\" alt=\\\"p5-webgl-bug-fill\\\" src=\\\"https://user-images.githubusercontent.com/614881/55618773-373a0580-578f-11e9-9126-27b137dbc7ca.png\\\">\\r\\n\\r\\n\\r\\n```javascript\\r\\nlet points;\\r\\nfunction setup(){\\r\\n\\tcreateCanvas(innerWidth, innerHeight, WEBGL);\\r\\n\\t points = [\\r\\n\\t\\t{x: 0, y:0},\\r\\n\\t\\t{x: 4, y:0},\\r\\n\\t\\t{x: 4, y:1},\\r\\n\\t\\t{x: 1, y:1},\\r\\n\\t\\t{x: 1, y:2},\\r\\n\\t\\t{x: 4, y:2},\\r\\n\\t\\t{x: 4, y:3},\\r\\n\\t\\t{x: 0, y:3},\\r\\n\\t];\\r\\n}\\r\\n\\r\\nfunction draw(){\\r\\n\\tbackground(\\\"gray\\\");\\r\\n\\r\\n\\tbeginShape()\\r\\n\\tfor(let p of points){\\r\\n\\t\\tvertex(p.x*30,p.y*30, 0);\\r\\n\\t} \\r\\n\\tendShape(CLOSE)\\r\\n}\\r\\n```\\r\\n\\r\\n\\r\\n#### Feature enhancement details:\\r\\n\\r\\n\\r\\n\\r\\n#### New feature details:\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of p5.RendererGL.js]\\n'use strict';\\n\\nvar p5 = require('../core/main');\\nvar constants = require('../core/constants');\\nrequire('./p5.Shader');\\nrequire('../core/p5.Renderer');\\nrequire('./p5.Matrix');\\nvar fs = require('fs');\\n\\nvar defaultShaders = {\\n  immediateVert: fs.readFileSync(\\n    __dirname + '/shaders/immediate.vert',\\n    'utf-8'\\n  ),\\n  vertexColorVert: fs.readFileSync(\\n    __dirname + '/shaders/vertexColor.vert',\\n    'utf-8'\\n  ),\\n  vertexColorFrag: fs.readFileSync(\\n    __dirname + '/shaders/vertexColor.frag',\\n    'utf-8'\\n  ),\\n  normalVert: fs.readFileSync(__dirname + '/shaders/normal.vert', 'utf-8'),\\n  normalFrag: fs.readFileSync(__dirname + '/shaders/normal.frag', 'utf-8'),\\n  basicFrag: fs.readFileSync(__dirname + '/shaders/basic.frag', 'utf-8'),\\n  lightVert: fs.readFileSync(__dirname + '/shaders/light.vert', 'utf-8'),\\n  lightTextureFrag: fs.readFileSync(\\n    __dirname + '/shaders/light_texture.frag',\\n    'utf-8'\\n  ),\\n  phongVert: fs.readFileSync(__dirname + '/shaders/phong.vert', 'utf-8'),\\n  phongFrag: fs.readFileSync(__dirname + '/shaders/phong.frag', 'utf-8'),\\n  lineVert: fs.readFileSync(__dirname + '/shaders/line.vert', 'utf-8'),\\n  lineFrag: fs.readFileSync(__dirname + '/shaders/line.frag', 'utf-8')\\n};\\n\\n/**\\n * 3D graphics class\\n * @private\\n * @class p5.RendererGL\\n * @constructor\\n * @extends p5.Renderer\\n * @todo extend class to include public method for offscreen\\n * rendering (FBO).\\n *\\n */\\np5.RendererGL = function(elt, pInst, isMainCanvas, attr) {\\n  p5.Renderer.call(this, elt, pInst, isMainCanvas);\\n  this.attributes = {};\\n  attr = attr || {};\\n  this.attributes.alpha = attr.alpha === undefined ? true : attr.alpha;\\n  this.attributes.depth = attr.depth === undefined ? true : attr.depth;\\n  this.attributes.stencil = attr.stencil === undefined ? true : attr.stencil;\\n  this.attributes.antialias =\\n    attr.antialias === undefined ? false : attr.antialias;\\n  this.attributes.premultipliedAlpha =\\n    attr.premultipliedAlpha === undefined ? false : attr.premultipliedAlpha;\\n  this.attributes.preserveDrawingBuffer =\\n    attr.preserveDrawingBuffer === undefined\\n      ? true\\n      : attr.preserveDrawingBuffer;\\n  this.attributes.perPixelLighting =\\n    attr.perPixelLighting === undefined ? false : attr.perPixelLighting;\\n  this._initContext();\\n  this.isP3D = true; //lets us know we're in 3d mode\\n  this.GL = this.drawingContext;\\n\\n  // lights\\n\\n  this.ambientLightColors = [];\\n  this.directionalLightDirections = [];\\n  this.directionalLightColors = [];\\n\\n  this.pointLightPositions = [];\\n  this.pointLightColors = [];\\n\\n  /**\\n   * model view, projection, & normal\\n   * matrices\\n   */\\n  this.uMVMatrix = new p5.Matrix();\\n  this.uPMatrix = new p5.Matrix();\\n  this.uNMatrix = new p5.Matrix('mat3');\\n\\n  // Camera\\n  this._curCamera = null;\\n  // default camera settings, then use those to populate camera fields.\\n  this._computeCameraDefaultSettings();\\n  this.cameraFOV = this.defaultCameraFOV;\\n  this.cameraAspect = this.defaultAspect;\\n  this.cameraX = this.defaultCameraX;\\n  this.cameraY = this.defaultCameraY;\\n  this.cameraZ = this.defaultCameraZ;\\n  this.cameraNear = this.defaultCameraNear;\\n  this.cameraFar = this.defaultCameraFar;\\n  this.cameraMatrix = new p5.Matrix();\\n  this.camera(); // set default camera matrices\\n\\n  //Geometry & Material hashes\\n  this.gHash = {};\\n\\n  this._defaultLightShader = undefined;\\n  this._defaultImmediateModeShader = undefined;\\n  this._defaultNormalShader = undefined;\\n  this._defaultColorShader = undefined;\\n\\n  this.curFillShader = undefined;\\n  this.curStrokeShader = undefined;\\n\\n  this._useColorShader();\\n  this.setStrokeShader(this._getLineShader());\\n\\n  //Imediate Mode\\n  //default drawing is done in Retained Mode\\n  this.isImmediateDrawing = false;\\n  this.immediateMode = {};\\n\\n  // note: must call fill() and stroke () AFTER\\n  // default shader has been set.\\n  this.fill(255, 255, 255, 255);\\n  //this.stroke(0, 0, 0, 255);\\n  this.pointSize = 5.0; //default point size\\n  this.strokeWeight(1);\\n  this.stroke(0, 0, 0);\\n  // array of textures created in this gl context via this.getTexture(src)\\n  this.textures = [];\\n  return this;\\n};\\n\\np5.RendererGL.prototype = Object.create(p5.Renderer.prototype);\\n\\n//////////////////////////////////////////////\\n// Setting\\n//////////////////////////////////////////////\\n\\np5.RendererGL.prototype._initContext = function() {\\n  try {\\n    this.drawingContext =\\n      this.canvas.getContext('webgl', this.attributes) ||\\n      this.canvas.getContext('experimental-webgl', this.attributes);\\n    if (this.drawingContext === null) {\\n      throw new Error('Error creating webgl context');\\n    } else {\\n      console.log('p5.RendererGL: enabled webgl context');\\n      var gl = this.drawingContext;\\n      gl.enable(gl.DEPTH_TEST);\\n      gl.depthFunc(gl.LEQUAL);\\n      gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\\n      this._viewport = this.drawingContext.getParameter(\\n        this.drawingContext.VIEWPORT\\n      );\\n    }\\n  } catch (er) {\\n    throw er;\\n  }\\n};\\n\\n//This is helper function to reset the context anytime the attributes\\n//are changed with setAttributes()\\n\\np5.RendererGL.prototype._resetContext = function(attr, options, callback) {\\n  var w = this.width;\\n  var h = this.height;\\n  var defaultId = this.canvas.id;\\n  var c = this.canvas;\\n  if (c) {\\n    c.parentNode.removeChild(c);\\n  }\\n  c = document.createElement('canvas');\\n  c.id = defaultId;\\n  if (this._pInst._userNode) {\\n    this._pInst._userNode.appendChild(c);\\n  } else {\\n    document.body.appendChild(c);\\n  }\\n  this._pInst.canvas = c;\\n\\n  var renderer = new p5.RendererGL(this._pInst.canvas, this._pInst, true, attr);\\n  this._pInst._setProperty('_renderer', renderer);\\n  renderer.resize(w, h);\\n  renderer._applyDefaults();\\n  this._pInst._elements.push(renderer);\\n\\n  if (typeof callback === 'function') {\\n    //setTimeout with 0 forces the task to the back of the queue, this ensures that\\n    //we finish switching out the renderer\\n    setTimeout(function() {\\n      callback.apply(window._renderer, options);\\n    }, 0);\\n  }\\n};\\n/**\\n * @module Rendering\\n * @submodule Rendering\\n * @for p5\\n */\\n/**\\n * Set attributes for the WebGL Drawing context.\\n * This is a way of adjusting ways that the WebGL\\n * renderer works to fine-tune the display and performance.\\n * This should be put in setup().\\n * The available attributes are:\\n * <br>\\n * alpha - indicates if the canvas contains an alpha buffer\\n * default is true\\n * <br><br>\\n * depth - indicates whether the drawing buffer has a depth buffer\\n * of at least 16 bits - default is true\\n * <br><br>\\n * stencil - indicates whether the drawing buffer has a stencil buffer\\n * of at least 8 bits\\n * <br><br>\\n * antialias - indicates whether or not to perform anti-aliasing\\n * default is false\\n * <br><br>\\n * premultipliedAlpha - indicates that the page compositor will assume\\n * the drawing buffer contains colors with pre-multiplied alpha\\n * default is false\\n * <br><br>\\n * preserveDrawingBuffer - if true the buffers will not be cleared and\\n * and will preserve their values until cleared or overwritten by author\\n * (note that p5 clears automatically on draw loop)\\n * default is true\\n * <br><br>\\n * perPixelLighting - if true, per-pixel lighting will be used in the\\n * lighting shader.\\n * default is false\\n * <br><br>\\n * @method setAttributes\\n * @for p5\\n * @param  {String}  key Name of attribute\\n * @param  {Boolean}        value New value of named attribute\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(255);\\n *   push();\\n *   rotateZ(frameCount * 0.02);\\n *   rotateX(frameCount * 0.02);\\n *   rotateY(frameCount * 0.02);\\n *   fill(0, 0, 0);\\n *   box(50);\\n *   pop();\\n * }\\n * </code>\\n * </div>\\n * <br>\\n * Now with the antialias attribute set to true.\\n * <br>\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n *   setAttributes('antialias', true);\\n * }\\n *\\n * function draw() {\\n *   background(255);\\n *   push();\\n *   rotateZ(frameCount * 0.02);\\n *   rotateX(frameCount * 0.02);\\n *   rotateY(frameCount * 0.02);\\n *   fill(0, 0, 0);\\n *   box(50);\\n *   pop();\\n * }\\n * </code>\\n * </div>\\n *\\n * <div>\\n * <code>\\n * // press the mouse button to enable perPixelLighting\\n * function setup() {\\n *   createCanvas(100, 100, WEBGL);\\n *   noStroke();\\n *   fill(255);\\n * }\\n *\\n * var lights = [\\n *   { c: '#f00', t: 1.12, p: 1.91, r: 0.2 },\\n *   { c: '#0f0', t: 1.21, p: 1.31, r: 0.2 },\\n *   { c: '#00f', t: 1.37, p: 1.57, r: 0.2 },\\n *   { c: '#ff0', t: 1.12, p: 1.91, r: 0.7 },\\n *   { c: '#0ff', t: 1.21, p: 1.31, r: 0.7 },\\n *   { c: '#f0f', t: 1.37, p: 1.57, r: 0.7 }\\n * ];\\n *\\n * function draw() {\\n *   var t = millis() / 1000 + 1000;\\n *   background(0);\\n *   directionalLight(color('#222'), 1, 1, 1);\\n *\\n *   for (var i = 0; i < lights.length; i++) {\\n *     var light = lights[i];\\n *     pointLight(\\n *       color(light.c),\\n *       p5.Vector.fromAngles(t * light.t, t * light.p, width * light.r)\\n *     );\\n *   }\\n *\\n *   specularMaterial(255);\\n *   sphere(width * 0.1);\\n *\\n *   rotateX(t * 0.77);\\n *   rotateY(t * 0.83);\\n *   rotateZ(t * 0.91);\\n *   torus(width * 0.3, width * 0.07, 30, 10);\\n * }\\n *\\n * function mousePressed() {\\n *   setAttributes('perPixelLighting', true);\\n *   noStroke();\\n *   fill(255);\\n * }\\n * function mouseReleased() {\\n *   setAttributes('perPixelLighting', false);\\n *   noStroke();\\n *   fill(255);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt a rotating cube with smoother edges\\n */\\n/**\\n * @method setAttributes\\n * @for p5\\n * @param  {Object}  obj object with key-value pairs\\n */\\n\\np5.prototype.setAttributes = function(key, value) {\\n  this._assert3d('setAttributes');\\n  //@todo_FES\\n  var attr;\\n  if (typeof value !== 'undefined') {\\n    attr = {};\\n    attr[key] = value;\\n  } else if (key instanceof Object) {\\n    attr = key;\\n  }\\n  this.push();\\n  this._renderer._resetContext(attr);\\n  this.pop();\\n};\\n\\n/**\\n * @class p5.RendererGL\\n */\\n\\np5.RendererGL.prototype._computeCameraDefaultSettings = function() {\\n  this.defaultCameraFOV = 60 / 180 * Math.PI;\\n  this.defaultCameraAspect = this.width / this.height;\\n  this.defaultCameraX = 0;\\n  this.defaultCameraY = 0;\\n  this.defaultCameraZ =\\n    this.height / 2.0 / Math.tan(this.defaultCameraFOV / 2.0);\\n  this.defaultCameraNear = this.defaultCameraZ * 0.1;\\n  this.defaultCameraFar = this.defaultCameraZ * 10;\\n};\\n\\n//detect if user didn't set the camera\\n//then call this function below\\np5.RendererGL.prototype._setDefaultCamera = function() {\\n  if (this._curCamera === null) {\\n    this._computeCameraDefaultSettings();\\n    this.cameraFOV = this.defaultCameraFOV;\\n    this.cameraAspect = this.defaultAspect;\\n    this.cameraX = this.defaultCameraX;\\n    this.cameraY = this.defaultCameraY;\\n    this.cameraZ = this.defaultCameraZ;\\n    this.cameraNear = this.defaultCameraNear;\\n    this.cameraFar = this.defaultCameraFar;\\n\\n    this.perspective();\\n    this.camera();\\n    this._curCamera = 'default';\\n  }\\n};\\n\\np5.RendererGL.prototype._update = function() {\\n  // reset model view and apply initial camera transform\\n  // (containing only look at info; no projection).\\n  this.uMVMatrix.set(\\n    this.cameraMatrix.mat4[0],\\n    this.cameraMatrix.mat4[1],\\n    this.cameraMatrix.mat4[2],\\n    this.cameraMatrix.mat4[3],\\n    this.cameraMatrix.mat4[4],\\n    this.cameraMatrix.mat4[5],\\n    this.cameraMatrix.mat4[6],\\n    this.cameraMatrix.mat4[7],\\n    this.cameraMatrix.mat4[8],\\n    this.cameraMatrix.mat4[9],\\n    this.cameraMatrix.mat4[10],\\n    this.cameraMatrix.mat4[11],\\n    this.cameraMatrix.mat4[12],\\n    this.cameraMatrix.mat4[13],\\n    this.cameraMatrix.mat4[14],\\n    this.cameraMatrix.mat4[15]\\n  );\\n\\n  // reset light data for new frame.\\n\\n  this.ambientLightColors.length = 0;\\n  this.directionalLightDirections.length = 0;\\n  this.directionalLightColors.length = 0;\\n\\n  this.pointLightPositions.length = 0;\\n  this.pointLightColors.length = 0;\\n};\\n\\n/**\\n * [background description]\\n */\\np5.RendererGL.prototype.background = function() {\\n  var _col = this._pInst.color.apply(this._pInst, arguments);\\n  var _r = _col.levels[0] / 255;\\n  var _g = _col.levels[1] / 255;\\n  var _b = _col.levels[2] / 255;\\n  var _a = _col.levels[3] / 255;\\n  this.GL.clearColor(_r, _g, _b, _a);\\n  this.GL.depthMask(true);\\n  this.GL.clear(this.GL.COLOR_BUFFER_BIT | this.GL.DEPTH_BUFFER_BIT);\\n};\\n\\n//@TODO implement this\\n// p5.RendererGL.prototype.clear = function() {\\n//@TODO\\n// };\\n\\n//////////////////////////////////////////////\\n// COLOR\\n//////////////////////////////////////////////\\n/**\\n * Basic fill material for geometry with a given color\\n * @method  fill\\n * @class p5.RendererGL\\n * @param  {Number|Number[]|String|p5.Color} v1  gray value,\\n * red or hue value (depending on the current color mode),\\n * or color Array, or CSS color string\\n * @param  {Number}            [v2] green or saturation value\\n * @param  {Number}            [v3] blue or brightness value\\n * @param  {Number}            [a]  opacity\\n * @chainable\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(200, 200, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(0);\\n *   noStroke();\\n *   fill(100, 100, 240);\\n *   rotateX(frameCount * 0.01);\\n *   rotateY(frameCount * 0.01);\\n *   box(75, 75, 75);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * black canvas with purple cube spinning\\n *\\n */\\np5.RendererGL.prototype.fill = function(v1, v2, v3, a) {\\n  //see material.js for more info on color blending in webgl\\n  var color = p5.prototype.color.apply(this._pInst, arguments);\\n  this.curFillColor = color._array;\\n\\n  if (this.isImmediateDrawing) {\\n    this.setFillShader(this._getImmediateModeShader());\\n  } else {\\n    this.setFillShader(this._getColorShader());\\n  }\\n  this.drawMode = constants.FILL;\\n  this.curFillShader.setUniform('uMaterialColor', this.curFillColor);\\n};\\n\\n/**\\n * Basic stroke material for geometry with a given color\\n * @method  stroke\\n * @param  {Number|Number[]|String|p5.Color} v1  gray value,\\n * red or hue value (depending on the current color mode),\\n * or color Array, or CSS color string\\n * @param  {Number}            [v2] green or saturation value\\n * @param  {Number}            [v3] blue or brightness value\\n * @param  {Number}            [a]  opacity\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(200, 200, WEBGL);\\n * }\\n *\\n * function draw() {\\n *   background(0);\\n *   stroke(240, 150, 150);\\n *   fill(100, 100, 240);\\n *   rotateX(frameCount * 0.01);\\n *   rotateY(frameCount * 0.01);\\n *   box(75, 75, 75);\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * black canvas with purple cube with pink outline spinning\\n *\\n */\\np5.RendererGL.prototype.stroke = function(r, g, b, a) {\\n  //@todo allow transparency in stroking currently doesn't have\\n  //any impact and causes problems with specularMaterial\\n  arguments[3] = 255;\\n  var color = p5.prototype.color.apply(this._pInst, arguments);\\n  this.curStrokeColor = color._array;\\n  this.curStrokeShader.setUniform('uMaterialColor', this.curStrokeColor);\\n};\\n\\n/**\\n * Change weight of stroke\\n * @method  strokeWeight\\n * @param  {Number} stroke weight to be used for drawing\\n * @example\\n * <div>\\n * <code>\\n * function setup() {\\n *   createCanvas(200, 400, WEBGL);\\n *   setAttributes('antialias', true);\\n * }\\n *\\n * function draw() {\\n *   background(0);\\n *   noStroke();\\n *   translate(0, -100, 0);\\n *   stroke(240, 150, 150);\\n *   fill(100, 100, 240);\\n *   push();\\n *   strokeWeight(8);\\n *   rotateX(frameCount * 0.01);\\n *   rotateY(frameCount * 0.01);\\n *   sphere(75);\\n *   pop();\\n *   push();\\n *   translate(0, 200, 0);\\n *   strokeWeight(1);\\n *   rotateX(frameCount * 0.01);\\n *   rotateY(frameCount * 0.01);\\n *   sphere(75);\\n *   pop();\\n * }\\n * </code>\\n * </div>\\n *\\n * @alt\\n * black canvas with two purple rotating spheres with pink\\n * outlines the sphere on top has much heavier outlines,\\n *\\n */\\np5.RendererGL.prototype.strokeWeight = function(w) {\\n  if (this.curStrokeWeight !== w) {\\n    this.pointSize = w;\\n    this.curStrokeWeight = w;\\n    this.curStrokeShader.setUniform('uStrokeWeight', w);\\n  }\\n};\\n\\n/**\\n * Returns an array of [R,G,B,A] values for any pixel or grabs a section of\\n * an image. If no parameters are specified, the entire image is returned.\\n * Use the x and y parameters to get the value of one pixel. Get a section of\\n * the display window by specifying additional w and h parameters. When\\n * getting an image, the x and y parameters define the coordinates for the\\n * upper-left corner of the image, regardless of the current imageMode().\\n * <br><br>\\n * If the pixel requested is outside of the image window, [0,0,0,255] is\\n * returned.\\n * <br><br>\\n * Getting the color of a single pixel with get(x, y) is easy, but not as fast\\n * as grabbing the data directly from pixels[]. The equivalent statement to\\n * get(x, y) is using pixels[] with pixel density d\\n *\\n * @private\\n * @method get\\n * @param  {Number}               [x] x-coordinate of the pixel\\n * @param  {Number}               [y] y-coordinate of the pixel\\n * @param  {Number}               [w] width\\n * @param  {Number}               [h] height\\n * @return {Number[]|Color|p5.Image}  color of pixel at x,y in array format\\n *                                    [R, G, B, A] or <a href=\\\"#/p5.Image\\\">p5.Image</a>\\n */\\np5.RendererGL.prototype.get = function(x, y, w, h) {\\n  return p5.Renderer2D.prototype.get.apply(this, [x, y, w, h]);\\n};\\n\\n/**\\n * Loads the pixels data for this canvas into the pixels[] attribute.\\n * Note that updatePixels() and set() do not work.\\n * Any pixel manipulation must be done directly to the pixels[] array.\\n *\\n * @private\\n * @method loadPixels\\n *\\n */\\n\\np5.RendererGL.prototype.loadPixels = function() {\\n  //@todo_FES\\n  if (this.attributes.preserveDrawingBuffer !== true) {\\n    console.log(\\n      'loadPixels only works in WebGL when preserveDrawingBuffer ' + 'is true.'\\n    );\\n    return;\\n  }\\n  var pd = this._pInst._pixelDensity;\\n  var x = 0;\\n  var y = 0;\\n  var w = this.width;\\n  var h = this.height;\\n  w *= pd;\\n  h *= pd;\\n  //if there isn't a renderer-level temporary pixels buffer\\n  //make a new one\\n  if (typeof this.pixels === 'undefined') {\\n    this.pixels = new Uint8Array(\\n      this.GL.drawingBufferWidth * this.GL.drawingBufferHeight * 4\\n    );\\n  }\\n  this.GL.readPixels(\\n    x,\\n    y,\\n    w,\\n    h,\\n    this.GL.RGBA,\\n    this.GL.UNSIGNED_BYTE,\\n    this.pixels\\n  );\\n  this._pInst._setProperty('pixels', this.pixels);\\n};\\n\\n//////////////////////////////////////////////\\n// HASH | for geometry\\n//////////////////////////////////////////////\\n\\np5.RendererGL.prototype.geometryInHash = function(gId) {\\n  return this.gHash[gId] !== undefined;\\n};\\n\\n/**\\n * [resize description]\\n * @private\\n * @param  {Number} w [description]\\n * @param  {Number} h [description]\\n */\\np5.RendererGL.prototype.resize = function(w, h) {\\n  p5.Renderer.prototype.resize.call(this, w, h);\\n  this.GL.viewport(\\n    0,\\n    0,\\n    this.GL.drawingBufferWidth,\\n    this.GL.drawingBufferHeight\\n  );\\n  this._viewport = this.GL.getParameter(this.GL.VIEWPORT);\\n  // If we're using the default camera, update the aspect ratio\\n  if (this._curCamera === null || this._curCamera === 'default') {\\n    this._curCamera = null;\\n    // camera defaults are dependent on the width & height of the screen,\\n    // so we'll want to update them if the size of the screen changes.\\n    this._setDefaultCamera();\\n  }\\n  //resize pixels buffer\\n  if (typeof this.pixels !== 'undefined') {\\n    this.pixels = new Uint8Array(\\n      this.GL.drawingBufferWidth * this.GL.drawingBufferHeight * 4\\n    );\\n  }\\n};\\n\\n/**\\n * clears color and depth buffers\\n * with r,g,b,a\\n * @private\\n * @param {Number} r normalized red val.\\n * @param {Number} g normalized green val.\\n * @param {Number} b normalized blue val.\\n * @param {Number} a normalized alpha val.\\n */\\np5.RendererGL.prototype.clear = function() {\\n  var _r = arguments[0] || 0;\\n  var _g = arguments[1] || 0;\\n  var _b = arguments[2] || 0;\\n  var _a = arguments[3] || 0;\\n  this.GL.clearColor(_r, _g, _b, _a);\\n  this.GL.clear(this.GL.COLOR_BUFFER_BIT | this.GL.DEPTH_BUFFER_BIT);\\n};\\n\\n/**\\n * [translate description]\\n * @private\\n * @param  {Number} x [description]\\n * @param  {Number} y [description]\\n * @param  {Number} z [description]\\n * @chainable\\n * @todo implement handle for components or vector as args\\n */\\np5.RendererGL.prototype.translate = function(x, y, z) {\\n  if (x instanceof p5.Vector) {\\n    z = x.z;\\n    y = x.y;\\n    x = x.x;\\n  }\\n  this.uMVMatrix.translate([x, y, z]);\\n  return this;\\n};\\n\\n/**\\n * Scales the Model View Matrix by a vector\\n * @private\\n * @param  {Number | p5.Vector | Array} x [description]\\n * @param  {Number} [y] y-axis scalar\\n * @param  {Number} [z] z-axis scalar\\n * @chainable\\n */\\np5.RendererGL.prototype.scale = function(x, y, z) {\\n  this.uMVMatrix.scale(x, y, z);\\n  return this;\\n};\\n\\np5.RendererGL.prototype.rotate = function(rad, axis) {\\n  if (typeof axis === 'undefined') {\\n    return this.rotateZ(rad);\\n  }\\n  p5.Matrix.prototype.rotate.apply(this.uMVMatrix, arguments);\\n  return this;\\n};\\n\\np5.RendererGL.prototype.rotateX = function(rad) {\\n  this.rotate(rad, 1, 0, 0);\\n  return this;\\n};\\n\\np5.RendererGL.prototype.rotateY = function(rad) {\\n  this.rotate(rad, 0, 1, 0);\\n  return this;\\n};\\n\\np5.RendererGL.prototype.rotateZ = function(rad) {\\n  this.rotate(rad, 0, 0, 1);\\n  return this;\\n};\\n\\np5.RendererGL.prototype.push = function() {\\n  // get the base renderer style\\n  var style = p5.Renderer.prototype.push.apply(this);\\n\\n  // add webgl-specific style properties\\n  var properties = style.properties;\\n\\n  properties.uMVMatrix = this.uMVMatrix.copy();\\n  properties.cameraMatrix = this.cameraMatrix.copy();\\n\\n  return style;\\n};\\n\\np5.RendererGL.prototype.resetMatrix = function() {\\n  this.uMVMatrix = p5.Matrix.identity(this._pInst);\\n  return this;\\n};\\n\\n// Text/Typography\\n// @TODO:\\np5.RendererGL.prototype._applyTextProperties = function() {\\n  //@TODO finish implementation\\n  console.error('text commands not yet implemented in webgl');\\n};\\n\\n//////////////////////////////////////////////\\n// SHADER\\n//////////////////////////////////////////////\\n\\n/*\\n * Initializes and uses the specified shader, then returns\\n * that shader. Note: initialization and resetting the program\\n * is only used if needed (say, if a new value is provided)\\n * so it is safe to call this method with the same shader multiple\\n * times without a signficant performance hit).\\n *\\n * @method setFillShader\\n * @param {p5.Shader} [s] a p5.Shader object\\n * @return {p5.Shader} the current, updated fill shader\\n */\\np5.RendererGL.prototype.setFillShader = function(s) {\\n  if (this.curFillShader !== s) {\\n    // only do setup etc. if shader is actually new.\\n    this.curFillShader = s;\\n\\n    // safe to do this multiple times;\\n    // init() will bail early if has already been run.\\n    this.curFillShader.init();\\n    //this.curFillShader.useProgram();\\n  }\\n  // always return this.curFillShader, even if no change was made.\\n  return this.curFillShader;\\n};\\n\\n/*\\n * @method setStrokeShader\\n * @param {p5.Shader} [s] a p5.Shader object\\n * @return {p5.Shader} the current, updated stroke shader\\n */\\np5.RendererGL.prototype.setStrokeShader = function(s) {\\n  if (this.curStrokeShader !== s) {\\n[end of p5.RendererGL.js]\\n[start of p5.RendererGL.Immediate.js]\\n/**\\n * Welcome to RendererGL Immediate Mode.\\n * Immediate mode is used for drawing custom shapes\\n * from a set of vertices.  Immediate Mode is activated\\n * when you call <a href=\\\"#/p5/beginShape\\\">beginShape()</a> & de-activated when you call <a href=\\\"#/p5/endShape\\\">endShape()</a>.\\n * Immediate mode is a style of programming borrowed\\n * from OpenGL's (now-deprecated) immediate mode.\\n * It differs from p5.js' default, Retained Mode, which caches\\n * geometries and buffers on the CPU to reduce the number of webgl\\n * draw calls. Retained mode is more efficient & performative,\\n * however, Immediate Mode is useful for sketching quick\\n * geometric ideas.\\n */\\n'use strict';\\n\\nvar p5 = require('../core/main');\\nvar constants = require('../core/constants');\\n\\n/**\\n * Begin shape drawing.  This is a helpful way of generating\\n * custom shapes quickly.  However in WEBGL mode, application\\n * performance will likely drop as a result of too many calls to\\n * <a href=\\\"#/p5/beginShape\\\">beginShape()</a> / <a href=\\\"#/p5/endShape\\\">endShape()</a>.  As a high performance alternative,\\n * please use p5.js geometry primitives.\\n * @private\\n * @method beginShape\\n * @param  {Number} mode webgl primitives mode.  beginShape supports the\\n *                       following modes:\\n *                       POINTS,LINES,LINE_STRIP,LINE_LOOP,TRIANGLES,\\n *                       TRIANGLE_STRIP,and TRIANGLE_FAN.\\n * @chainable\\n */\\np5.RendererGL.prototype.beginShape = function(mode) {\\n  //default shape mode is line_strip\\n  this.immediateMode.shapeMode =\\n    mode !== undefined ? mode : constants.LINE_STRIP;\\n  //if we haven't yet initialized our\\n  //immediateMode vertices & buffers, create them now!\\n  if (this.immediateMode.vertices === undefined) {\\n    this.immediateMode.vertices = [];\\n    this.immediateMode.edges = [];\\n    this.immediateMode.lineVertices = [];\\n    this.immediateMode.vertexColors = [];\\n    this.immediateMode.lineNormals = [];\\n    this.immediateMode.uvCoords = [];\\n    this.immediateMode.vertexBuffer = this.GL.createBuffer();\\n    this.immediateMode.colorBuffer = this.GL.createBuffer();\\n    this.immediateMode.uvBuffer = this.GL.createBuffer();\\n    this.immediateMode.lineVertexBuffer = this.GL.createBuffer();\\n    this.immediateMode.lineNormalBuffer = this.GL.createBuffer();\\n  } else {\\n    this.immediateMode.vertices.length = 0;\\n    this.immediateMode.edges.length = 0;\\n    this.immediateMode.lineVertices.length = 0;\\n    this.immediateMode.lineNormals.length = 0;\\n    this.immediateMode.vertexColors.length = 0;\\n    this.immediateMode.uvCoords.length = 0;\\n  }\\n  this.isImmediateDrawing = true;\\n  return this;\\n};\\n/**\\n * adds a vertex to be drawn in a custom Shape.\\n * @private\\n * @method vertex\\n * @param  {Number} x x-coordinate of vertex\\n * @param  {Number} y y-coordinate of vertex\\n * @param  {Number} z z-coordinate of vertex\\n * @chainable\\n * @TODO implement handling of <a href=\\\"#/p5.Vector\\\">p5.Vector</a> args\\n */\\np5.RendererGL.prototype.vertex = function(x, y) {\\n  var z, u, v;\\n\\n  // default to (x, y) mode: all other arugments assumed to be 0.\\n  z = u = v = 0;\\n\\n  if (arguments.length === 3) {\\n    // (x, y, z) mode: (u, v) assumed to be 0.\\n    z = arguments[2];\\n  } else if (arguments.length === 4) {\\n    // (x, y, u, v) mode: z assumed to be 0.\\n    u = arguments[2];\\n    v = arguments[3];\\n  } else if (arguments.length === 5) {\\n    // (x, y, z, u, v) mode\\n    z = arguments[2];\\n    u = arguments[3];\\n    v = arguments[4];\\n  }\\n  var vert = new p5.Vector(x, y, z);\\n  this.immediateMode.vertices.push(vert);\\n  var vertexColor = this.curFillColor || [0.5, 0.5, 0.5, 1.0];\\n  this.immediateMode.vertexColors.push(\\n    vertexColor[0],\\n    vertexColor[1],\\n    vertexColor[2],\\n    vertexColor[3]\\n  );\\n\\n  this.immediateMode.uvCoords.push(u, v);\\n\\n  return this;\\n};\\n\\n/**\\n * End shape drawing and render vertices to screen.\\n * @chainable\\n */\\np5.RendererGL.prototype.endShape = function(\\n  mode,\\n  isCurve,\\n  isBezier,\\n  isQuadratic,\\n  isContour,\\n  shapeKind\\n) {\\n  this._useImmediateModeShader();\\n\\n  if (this._doStroke && this.drawMode !== constants.TEXTURE) {\\n    for (var i = 0; i < this.immediateMode.vertices.length - 1; i++) {\\n      this.immediateMode.edges.push([i, i + 1]);\\n    }\\n    if (mode === constants.CLOSE) {\\n      this.immediateMode.edges.push([\\n        this.immediateMode.vertices.length - 1,\\n        0\\n      ]);\\n    }\\n\\n    p5.Geometry.prototype._edgesToVertices.call(this.immediateMode);\\n    this._drawStrokeImmediateMode();\\n  }\\n  if (this._doFill) {\\n    this._drawFillImmediateMode(\\n      mode,\\n      isCurve,\\n      isBezier,\\n      isQuadratic,\\n      isContour,\\n      shapeKind\\n    );\\n  }\\n  //clear out our vertexPositions & colors arrays\\n  //after rendering\\n  this.immediateMode.vertices.length = 0;\\n  this.immediateMode.vertexColors.length = 0;\\n  this.immediateMode.uvCoords.length = 0;\\n  this.isImmediateDrawing = false;\\n\\n  return this;\\n};\\n\\np5.RendererGL.prototype._drawFillImmediateMode = function(\\n  mode,\\n  isCurve,\\n  isBezier,\\n  isQuadratic,\\n  isContour,\\n  shapeKind\\n) {\\n  var gl = this.GL;\\n  this.curFillShader.bindShader();\\n\\n  // initialize the fill shader's 'aPosition' buffer\\n  if (this.curFillShader.attributes.aPosition) {\\n    //vertex position Attribute\\n    this._bindBuffer(\\n      this.immediateMode.vertexBuffer,\\n      gl.ARRAY_BUFFER,\\n      this._vToNArray(this.immediateMode.vertices),\\n      Float32Array,\\n      gl.DYNAMIC_DRAW\\n    );\\n\\n    this.curFillShader.enableAttrib(\\n      this.curFillShader.attributes.aPosition.location,\\n      3,\\n      gl.FLOAT,\\n      false,\\n      0,\\n      0\\n    );\\n  }\\n\\n  // initialize the fill shader's 'aVertexColor' buffer\\n  if (\\n    this.drawMode === constants.FILL &&\\n    this.curFillShader.attributes.aVertexColor\\n  ) {\\n    this._bindBuffer(\\n      this.immediateMode.colorBuffer,\\n      gl.ARRAY_BUFFER,\\n      this.immediateMode.vertexColors,\\n      Float32Array,\\n      gl.DYNAMIC_DRAW\\n    );\\n\\n    this.curFillShader.enableAttrib(\\n      this.curFillShader.attributes.aVertexColor.location,\\n      4,\\n      gl.FLOAT,\\n      false,\\n      0,\\n      0\\n    );\\n  }\\n\\n  // initialize the fill shader's 'aTexCoord' buffer\\n  if (\\n    this.drawMode === constants.TEXTURE &&\\n    this.curFillShader.attributes.aTexCoord\\n  ) {\\n    //texture coordinate Attribute\\n    this._bindBuffer(\\n      this.immediateMode.uvBuffer,\\n      gl.ARRAY_BUFFER,\\n      this.immediateMode.uvCoords,\\n      Float32Array,\\n      gl.DYNAMIC_DRAW\\n    );\\n\\n    this.curFillShader.enableAttrib(\\n      this.curFillShader.attributes.aTexCoord.location,\\n      2,\\n      gl.FLOAT,\\n      false,\\n      0,\\n      0\\n    );\\n  }\\n\\n  //if (true || mode) {\\n  if (this.drawMode === constants.FILL || this.drawMode === constants.TEXTURE) {\\n    switch (this.immediateMode.shapeMode) {\\n      case constants.LINE_STRIP:\\n      case constants.LINES:\\n      case constants.TRIANGLES:\\n        this.immediateMode.shapeMode = constants.TRIANGLE_FAN;\\n        break;\\n    }\\n  } else {\\n    switch (this.immediateMode.shapeMode) {\\n      case constants.LINE_STRIP:\\n      case constants.LINES:\\n        this.immediateMode.shapeMode = constants.LINE_LOOP;\\n        break;\\n    }\\n  }\\n  //}\\n  //QUADS & QUAD_STRIP are not supported primitives modes\\n  //in webgl.\\n  if (\\n    this.immediateMode.shapeMode === constants.QUADS ||\\n    this.immediateMode.shapeMode === constants.QUAD_STRIP\\n  ) {\\n    throw new Error(\\n      'sorry, ' +\\n        this.immediateMode.shapeMode +\\n        ' not yet implemented in webgl mode.'\\n    );\\n  } else {\\n    this._applyColorBlend(this.curFillColor);\\n    gl.enable(gl.BLEND);\\n    gl.drawArrays(\\n      this.immediateMode.shapeMode,\\n      0,\\n      this.immediateMode.vertices.length\\n    );\\n\\n    this._pInst._pixelsDirty = true;\\n  }\\n  // todo / optimizations? leave bound until another shader is set?\\n  this.curFillShader.unbindShader();\\n};\\n\\np5.RendererGL.prototype._drawStrokeImmediateMode = function() {\\n  var gl = this.GL;\\n  this.curStrokeShader.bindShader();\\n\\n  // initialize the stroke shader's 'aPosition' buffer\\n  if (this.curStrokeShader.attributes.aPosition) {\\n    this._bindBuffer(\\n      this.immediateMode.lineVertexBuffer,\\n      gl.ARRAY_BUFFER,\\n      this._flatten(this.immediateMode.lineVertices),\\n      Float32Array,\\n      gl.STATIC_DRAW\\n    );\\n\\n    this.curStrokeShader.enableAttrib(\\n      this.curStrokeShader.attributes.aPosition.location,\\n      3,\\n      gl.FLOAT,\\n      false,\\n      0,\\n      0\\n    );\\n  }\\n\\n  // initialize the stroke shader's 'aDirection' buffer\\n  if (this.curStrokeShader.attributes.aDirection) {\\n    this._bindBuffer(\\n      this.immediateMode.lineNormalBuffer,\\n      gl.ARRAY_BUFFER,\\n      this._flatten(this.immediateMode.lineNormals),\\n      Float32Array,\\n      gl.STATIC_DRAW\\n    );\\n    this.curStrokeShader.enableAttrib(\\n      this.curStrokeShader.attributes.aDirection.location,\\n      4,\\n      gl.FLOAT,\\n      false,\\n      0,\\n      0\\n    );\\n  }\\n\\n  this._applyColorBlend(this.curStrokeColor);\\n  gl.drawArrays(gl.TRIANGLES, 0, this.immediateMode.lineVertices.length);\\n\\n  // todo / optimizations? leave bound until another shader is set?\\n  this.curStrokeShader.unbindShader();\\n\\n  this._pInst._pixelsDirty = true;\\n};\\n\\nmodule.exports = p5.RendererGL;\\n\\n[end of p5.RendererGL.Immediate.js]\\n[start of stroke.js]\\nsuite('stroke WebGL', function() {\\n  var myp5;\\n\\n  if (!window.Modernizr.webgl) {\\n    return;\\n  }\\n\\n  setup(function() {\\n    myp5 = new p5(function(p) {\\n      p.setup = function() {\\n        p.createCanvas(100, 100, p.WEBGL);\\n      };\\n    });\\n  });\\n\\n  teardown(function() {\\n    myp5.clear();\\n  });\\n\\n  suite('default stroke shader', function() {\\n    test('check default shader creation', function(done) {\\n      myp5.createCanvas(100, 100, myp5.WEBGL);\\n      assert(\\n        myp5._renderer.curStrokeShader === myp5._renderer._getLineShader(),\\n        'default stroke shader was not initialized with GL canvas'\\n      );\\n      assert(\\n        myp5._renderer.curFillShader === myp5._renderer._getColorShader(),\\n        'default fill shader was not initialized with GL canvas'\\n      );\\n      done();\\n    });\\n\\n    test('check activate and deactivating fill and stroke', function(done) {\\n      myp5.noStroke();\\n      assert(\\n        !myp5._renderer._doStroke,\\n        'stroke shader still active after noStroke()'\\n      );\\n      assert.isTrue(\\n        myp5._renderer._doFill,\\n        'fill shader deactivated by noStroke()'\\n      );\\n      myp5.stroke(0);\\n      myp5.noFill();\\n      assert(\\n        myp5._renderer._doStroke,\\n        'stroke shader not active after stroke()'\\n      );\\n      assert.isTrue(\\n        !myp5._renderer._doFill,\\n        'fill shader still active after noFill()'\\n      );\\n      done();\\n    });\\n  });\\n});\\n\\n[end of stroke.js]\\n[start of sketch.js]\\nfunction setup() {\\n  createCanvas(windowWidth, windowHeight, WEBGL);\\n}\\n\\nfunction draw() {\\n  background(255);\\n  translate(-width / 2, -height / 2, 0);\\n  rotateY(frameCount * 0.01);\\n\\n  var gap = 200;\\n  var w = 100;\\n  var h = 100;\\n\\n  for (var i = 0; i < 5; i++) {\\n    for (var j = 0; j < 5; j++) {\\n      fill(i * 40, j * 40, 0);\\n      quad(\\n        i * gap,\\n        j * gap,\\n        i * gap,\\n        j * gap + h,\\n        i * gap + w,\\n        j * gap + h,\\n        i * gap + w,\\n        j * gap\\n      );\\n    }\\n  }\\n}\\n\\n[end of sketch.js]\\n[start of p5.RendererGL.Retained.js]\\n//Retained Mode. The default mode for rendering 3D primitives\\n//in WEBGL.\\n'use strict';\\n\\nvar p5 = require('../core/main');\\n\\nvar hashCount = 0;\\n/**\\n * _initBufferDefaults\\n * @private\\n * @description initializes buffer defaults. runs each time a new geometry is\\n * registered\\n * @param  {String} gId  key of the geometry object\\n */\\np5.RendererGL.prototype._initBufferDefaults = function(gId) {\\n  this._freeBuffers(gId);\\n\\n  //@TODO remove this limit on hashes in gHash\\n  hashCount++;\\n  if (hashCount > 1000) {\\n    var key = Object.keys(this.gHash)[0];\\n    delete this.gHash[key];\\n    hashCount--;\\n  }\\n\\n  //create a new entry in our gHash\\n  this.gHash[gId] = {};\\n};\\n\\np5.RendererGL.prototype._freeBuffers = function(gId) {\\n  var geometry = this.gHash[gId];\\n  if (!geometry) {\\n    return;\\n  }\\n\\n  delete this.gHash[gId];\\n  hashCount--;\\n\\n  var gl = this.GL;\\n  geometry.vertexBuffer && gl.deleteBuffer(geometry.vertexBuffer);\\n  geometry.normalBuffer && gl.deleteBuffer(geometry.normalBuffer);\\n  geometry.lineNormalBuffer && gl.deleteBuffer(geometry.lineNormalBuffer);\\n  geometry.uvBuffer && gl.deleteBuffer(geometry.uvBuffer);\\n  geometry.indexBuffer && gl.deleteBuffer(geometry.indexBuffer);\\n  geometry.lineVertexBuffer && gl.deleteBuffer(geometry.lineVertexBuffer);\\n};\\n/**\\n * createBuffers description\\n * @private\\n * @param  {String} gId    key of the geometry object\\n * @param  {p5.Geometry}  obj contains geometry data\\n */\\np5.RendererGL.prototype.createBuffers = function(gId, obj) {\\n  var gl = this.GL;\\n  this._setDefaultCamera();\\n  //initialize the gl buffers for our geom groups\\n  this._initBufferDefaults(gId);\\n\\n  var geometry = this.gHash[gId];\\n\\n  geometry.numberOfItems = obj.faces.length * 3;\\n  geometry.lineVertexCount = obj.lineVertices.length;\\n\\n  this._useColorShader();\\n\\n  // initialize the stroke shader's 'aPosition' buffer, if used\\n  if (this.curStrokeShader.attributes.aPosition) {\\n    geometry.lineVertexBuffer = gl.createBuffer();\\n\\n    this._bindBuffer(\\n      geometry.lineVertexBuffer,\\n      gl.ARRAY_BUFFER,\\n      this._flatten(obj.lineVertices),\\n      Float32Array,\\n      gl.STATIC_DRAW\\n    );\\n\\n    this.curStrokeShader.enableAttrib(\\n      this.curStrokeShader.attributes.aPosition.location,\\n      3,\\n      gl.FLOAT,\\n      false,\\n      0,\\n      0\\n    );\\n  }\\n\\n  // initialize the stroke shader's 'aDirection' buffer, if used\\n  if (this.curStrokeShader.attributes.aDirection) {\\n    geometry.lineNormalBuffer = gl.createBuffer();\\n\\n    this._bindBuffer(\\n      geometry.lineNormalBuffer,\\n      gl.ARRAY_BUFFER,\\n      this._flatten(obj.lineNormals),\\n      Float32Array,\\n      gl.STATIC_DRAW\\n    );\\n\\n    this.curStrokeShader.enableAttrib(\\n      this.curStrokeShader.attributes.aDirection.location,\\n      4,\\n      gl.FLOAT,\\n      false,\\n      0,\\n      0\\n    );\\n  }\\n\\n  // initialize the fill shader's 'aPosition' buffer, if used\\n  if (this.curFillShader.attributes.aPosition) {\\n    geometry.vertexBuffer = gl.createBuffer();\\n\\n    // allocate space for vertex positions\\n    this._bindBuffer(\\n      geometry.vertexBuffer,\\n      gl.ARRAY_BUFFER,\\n      this._vToNArray(obj.vertices),\\n      Float32Array,\\n      gl.STATIC_DRAW\\n    );\\n\\n    this.curFillShader.enableAttrib(\\n      this.curFillShader.attributes.aPosition.location,\\n      3,\\n      gl.FLOAT,\\n      false,\\n      0,\\n      0\\n    );\\n  }\\n\\n  // allocate space for faces\\n  geometry.indexBuffer = gl.createBuffer();\\n  this._bindBuffer(\\n    geometry.indexBuffer,\\n    gl.ELEMENT_ARRAY_BUFFER,\\n    this._flatten(obj.faces),\\n    Uint16Array,\\n    gl.STATIC_DRAW\\n  );\\n\\n  // initialize the fill shader's 'aNormal' buffer, if used\\n  if (this.curFillShader.attributes.aNormal) {\\n    geometry.normalBuffer = gl.createBuffer();\\n\\n    // allocate space for normals\\n    this._bindBuffer(\\n      geometry.normalBuffer,\\n      gl.ARRAY_BUFFER,\\n      this._vToNArray(obj.vertexNormals),\\n      Float32Array,\\n      gl.STATIC_DRAW\\n    );\\n\\n    this.curFillShader.enableAttrib(\\n      this.curFillShader.attributes.aNormal.location,\\n      3,\\n      gl.FLOAT,\\n      false,\\n      0,\\n      0\\n    );\\n  }\\n\\n  // initialize the fill shader's 'aTexCoord' buffer, if used\\n  if (this.curFillShader.attributes.aTexCoord) {\\n    geometry.uvBuffer = gl.createBuffer();\\n\\n    // tex coords\\n    this._bindBuffer(\\n      geometry.uvBuffer,\\n      gl.ARRAY_BUFFER,\\n      this._flatten(obj.uvs),\\n      Float32Array,\\n      gl.STATIC_DRAW\\n    );\\n\\n    this.curFillShader.enableAttrib(\\n      this.curFillShader.attributes.aTexCoord.location,\\n      2,\\n      gl.FLOAT,\\n      false,\\n      0,\\n      0\\n    );\\n  }\\n  //}\\n};\\n\\n/**\\n * Draws buffers given a geometry key ID\\n * @private\\n * @param  {String} gId     ID in our geom hash\\n * @chainable\\n */\\np5.RendererGL.prototype.drawBuffers = function(gId) {\\n  this._setDefaultCamera();\\n  var gl = this.GL;\\n  this._useColorShader();\\n  var geometry = this.gHash[gId];\\n\\n  if (this._doStroke && geometry.lineVertexCount > 0) {\\n    this.curStrokeShader.bindShader();\\n\\n    // bind the stroke shader's 'aPosition' buffer\\n    if (geometry.lineVertexBuffer) {\\n      this._bindBuffer(geometry.lineVertexBuffer, gl.ARRAY_BUFFER);\\n      this.curStrokeShader.enableAttrib(\\n        this.curStrokeShader.attributes.aPosition.location,\\n        3,\\n        gl.FLOAT,\\n        false,\\n        0,\\n        0\\n      );\\n    }\\n\\n    // bind the stroke shader's 'aDirection' buffer\\n    if (geometry.lineNormalBuffer) {\\n      this._bindBuffer(geometry.lineNormalBuffer, gl.ARRAY_BUFFER);\\n      this.curStrokeShader.enableAttrib(\\n        this.curStrokeShader.attributes.aDirection.location,\\n        4,\\n        gl.FLOAT,\\n        false,\\n        0,\\n        0\\n      );\\n    }\\n\\n    this._applyColorBlend(this.curStrokeColor);\\n    this._drawArrays(gl.TRIANGLES, gId);\\n    this.curStrokeShader.unbindShader();\\n  }\\n\\n  if (this._doFill !== false) {\\n    this.curFillShader.bindShader();\\n\\n    // bind the fill shader's 'aPosition' buffer\\n    if (geometry.vertexBuffer) {\\n      //vertex position buffer\\n      this._bindBuffer(geometry.vertexBuffer, gl.ARRAY_BUFFER);\\n      this.curFillShader.enableAttrib(\\n        this.curFillShader.attributes.aPosition.location,\\n        3,\\n        gl.FLOAT,\\n        false,\\n        0,\\n        0\\n      );\\n    }\\n\\n    if (geometry.indexBuffer) {\\n      //vertex index buffer\\n      this._bindBuffer(geometry.indexBuffer, gl.ELEMENT_ARRAY_BUFFER);\\n    }\\n\\n    // bind the fill shader's 'aNormal' buffer\\n    if (geometry.normalBuffer) {\\n      this._bindBuffer(geometry.normalBuffer, gl.ARRAY_BUFFER);\\n      this.curFillShader.enableAttrib(\\n        this.curFillShader.attributes.aNormal.location,\\n        3,\\n        gl.FLOAT,\\n        false,\\n        0,\\n        0\\n      );\\n    }\\n\\n    // bind the fill shader's 'aTexCoord' buffer\\n    if (geometry.uvBuffer) {\\n      // uv buffer\\n      this._bindBuffer(geometry.uvBuffer, gl.ARRAY_BUFFER);\\n      this.curFillShader.enableAttrib(\\n        this.curFillShader.attributes.aTexCoord.location,\\n        2,\\n        gl.FLOAT,\\n        false,\\n        0,\\n        0\\n      );\\n    }\\n\\n    this._applyColorBlend(this.curFillColor);\\n    this._drawElements(gl.TRIANGLES, gId);\\n    this.curFillShader.unbindShader();\\n  }\\n  return this;\\n};\\n\\n/**\\n * Calls drawBuffers() with a scaled model/view matrix.\\n *\\n * This is used by various 3d primitive methods (in primitives.js, eg. plane,\\n * box, torus, etc...) to allow caching of un-scaled geometries. Those\\n * geometries are generally created with unit-length dimensions, cached as\\n * such, and then scaled appropriately in this method prior to rendering.\\n *\\n * @private\\n * @method drawBuffersScaled\\n * @param {String} gId     ID in our geom hash\\n * @param {Number} scaleX  the amount to scale in the X direction\\n * @param {Number} scaleY  the amount to scale in the Y direction\\n * @param {Number} scaleZ  the amount to scale in the Z direction\\n */\\np5.RendererGL.prototype.drawBuffersScaled = function(\\n  gId,\\n  scaleX,\\n  scaleY,\\n  scaleZ\\n) {\\n  var uMVMatrix = this.uMVMatrix.copy();\\n  try {\\n    this.uMVMatrix.scale(scaleX, scaleY, scaleZ);\\n    this.drawBuffers(gId);\\n  } finally {\\n    this.uMVMatrix = uMVMatrix;\\n  }\\n};\\n\\np5.RendererGL.prototype._drawArrays = function(drawMode, gId) {\\n  this.GL.drawArrays(drawMode, 0, this.gHash[gId].lineVertexCount);\\n  this._pInst._pixelsDirty = true;\\n  return this;\\n};\\n\\np5.RendererGL.prototype._drawElements = function(drawMode, gId) {\\n  this.GL.drawElements(\\n    drawMode,\\n    this.gHash[gId].numberOfItems,\\n    this.GL.UNSIGNED_SHORT,\\n    0\\n  );\\n  this._pInst._pixelsDirty = true;\\n};\\n\\nmodule.exports = p5.RendererGL;\\n\\n[end of p5.RendererGL.Retained.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "p5.RendererGL.js",
        "p5.RendererGL.Immediate.js",
        "stroke.js",
        "sketch.js",
        "p5.RendererGL.Retained.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "9c5fc1b5-8516-404f-8e43-6e0bafec896e",
        "score": 0.01639344262295082,
        "payload": {
          "text": "'use strict';\n\nvar p5 = require('../core/main');\nvar constants = require('../core/constants');\nrequire('./p5.Shader');\nrequire('../core/p5.Renderer');\nrequire('./p5.Matrix');\nvar fs = require('fs');\n\nvar defaultShaders = {\n  immediateVert: fs.readFileSync(\n    __dirname + '/shaders/immediate.vert',\n    'utf-8'\n  ),\n  vertexColorVert: fs.readFileSync(\n    __dirname + '/shaders/vertexColor.vert',\n    'utf-8'\n  ),\n  vertexColorFrag: fs.readFileSync(\n    __dirname + '/shaders/vertexColor.frag',\n    'utf-8'\n  ),\n  normalVert: fs.readFileSync(__dirname + '/shaders/normal.vert', 'utf-8'),\n  normalFrag: fs.readFileSync(__dirname + '/shaders/normal.frag', 'utf-8'),\n  basicFrag: fs.readFileSync(__dirname + '/shaders/basic.frag', 'utf-8'),\n  lightVert: fs.readFileSync(__dirname + '/shaders/light.vert', 'utf-8'),\n  lightTextureFrag: fs.readFileSync(\n    __dirname + '/shaders/light_texture.frag',\n    'utf-8'\n  ),\n  phongVert: fs.readFileSync(__dirname + '/shaders/phong.vert', 'utf-8'),\n  phongFrag: fs.readFileSync(__dirname + '/shaders/phong.frag', 'utf-8'),\n  lineVert: fs.readFileSync(__dirname + '/shaders/line.vert', 'utf-8'),\n  lineFrag: fs.readFileSync(__dirname + '/shaders/line.frag', 'utf-8')\n};\n\n/**\n * 3D graphics class\n * @private\n * @class p5.RendererGL\n * @constructor\n * @extends p5.Renderer\n * @todo extend class to include public method for offscreen\n * rendering (FBO).\n *\n */\np5.RendererGL = function(elt, pInst, isMainCanvas, attr) {\n  p5.Renderer.call(this, elt, pInst, isMainCanvas);\n  this.attributes = {};\n  attr = attr || {};\n  this.attributes.alpha = attr.alpha === undefined ? true : attr.alpha;\n  this.attributes.depth = attr.depth === undefined ? true : attr.depth;\n  this.attributes.stencil = attr.stencil === undefined ? true : attr.stencil;\n  this.attributes.antialias =\n    attr.antialias === undefined ? false : attr.antialias;\n  this.attributes.premultipliedAlpha =\n    attr.premultipliedAlpha === undefined ? false : attr.premultipliedAlpha;\n  this.attributes.preserveDrawingBuffer =\n    attr.preserveDrawingBuffer === undefined\n      ? true\n      : attr.preserveDrawingBuffer;\n  this.attributes.perPixelLighting =\n    attr.perPixelLighting === undefined ? false : attr.perPixelLighting;\n  this._initContext();\n  this.isP3D = true; //lets us know we're in 3d mode\n  this.GL = this.drawingContext;\n\n  // lights\n\n  this.ambientLightColors = [];\n  this.directionalLightDirections = [];\n  this.directionalLightColors = [];\n\n  this.pointLightPositions = [];\n  this.pointLightColors = [];\n\n  /**\n   * model view, projection, & normal\n   * matrices\n   */\n  this.uMVMatrix = new p5.Matrix();\n  this.uPMatrix = new p5.Matrix();\n  this.uNMatrix = new p5.Matrix('mat3');\n\n  // Camera\n  this._curCamera = null;\n  // default camera settings, then use those to populate camera fields.\n  this._computeCameraDefaultSettings();\n  this.cameraFOV = this.defaultCameraFOV;\n  this.cameraAspect = this.defaultAspect;\n  this.cameraX = this.defaultCameraX;\n  this.cameraY = this.defaultCameraY;\n  this.cameraZ = this.defaultCameraZ;\n  this.cameraNear = this.defaultCameraNear;\n  this.cameraFar = this.defaultCameraFar;\n  this.cameraMatrix = new p5.Matrix();\n  this.camera(); // set default camera matrices\n\n  //Geometry & Material hashes\n  this.gHash = {};\n\n  this._defaultLightShader = undefined;\n  this._defaultImmediateModeShader = undefined;\n  this._defaultNormalShader = undefined;\n  this._defaultColorShader = undefined;\n\n  this.curFillShader = undefined;\n  this.curStrokeShader = undefined;\n\n  this._useColorShader();\n  this.setStrokeShader(this._getLineShader());\n\n  //Imediate Mode\n  //default drawing is done in Retained Mode\n  this.isImmediateDrawing = false;\n  this.immediateMode = {};\n\n  // note: must call fill() and stroke () AFTER\n  // default shader has been set.\n  this.fill(255, 255, 255, 255);\n  //this.stroke(0, 0, 0, 255);\n  this.pointSize = 5.0; //default point size\n  this.strokeWeight(1);\n  this.stroke(0, 0, 0);\n  // array of textures created in this gl context via this.getTexture(src)\n  this.textures = [];\n  return this;\n};\n\np5.RendererGL.prototype = Object.create(p5.Renderer.prototype);\n\n//////////////////////////////////////////////\n// Setting\n//////////////////////////////////////////////\n\np5.RendererGL.prototype._initContext = function() {\n  try {\n    this.drawingContext =\n      this.canvas.getContext('webgl', this.attributes) ||\n      this.canvas.getContext('experimental-webgl', this.attributes);\n    if (this.drawingContext === null) {\n      throw new Error('Error creating webgl context');\n    } else {\n      console.log('p5.RendererGL: enabled webgl context');\n      var gl = this.drawingContext;\n      gl.enable(gl.DEPTH_TEST);\n      gl.depthFunc(gl.LEQUAL);\n      gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n      this._viewport = this.drawingContext.getParameter(\n        this.drawingContext.VIEWPORT\n      );\n    }\n  } catch (er) {\n    throw er;\n  }\n};\n\n//This is helper function to reset the context anytime the attributes\n//are changed with setAttributes()\n\np5.RendererGL.prototype._resetContext = function(attr, options, callback) {\n  var w = this.width;\n  var h = this.height;\n  var defaultId = this.canvas.id;\n  var c = this.canvas;\n  if (c) {\n    c.parentNode.removeChild(c);\n  }\n  c = document.createElement('canvas');\n  c.id = defaultId;\n  if (this._pInst._userNode) {\n    this._pInst._userNode.appendChild(c);\n  } else {\n    document.body.appendChild(c);\n  }\n  this._pInst.canvas = c;\n\n  var renderer = new p5.RendererGL(this._pInst.canvas, this._pInst, true, attr);\n  this._pInst._setProperty('_renderer', renderer);\n  renderer.resize(w, h);\n  renderer._applyDefaults();\n  this._pInst._elements.push(renderer);\n\n  if (typeof callback === 'function') {\n    //setTimeout with 0 forces the task to the back of the queue, this ensures that\n    //we finish switching out the renderer\n    setTimeout(function() {\n      callback.apply(window._renderer, options);\n    }, 0);\n  }\n};\n/**\n * @module Rendering\n * @submodule Rendering\n * @for p5\n */\n/**\n * Set attributes for the WebGL Drawing context.\n * This is a way of adjusting ways that the WebGL\n * renderer works to fine-tune the display and performance.\n * This should be put in setup().\n * The available attributes are:\n * <br>\n * alpha - indicates if the canvas contains an alpha buffer\n * default is true\n * <br><br>\n * depth - indicates whether the drawing buffer has a depth buffer\n * of at least 16 bits - default is true\n * <br><br>\n * stencil - indicates whether the drawing buffer has a stencil buffer\n * of at least 8 bits\n * <br><br>\n * antialias - indicates whether or not to perform anti-aliasing\n * default is false\n * <br><br>\n * premultipliedAlpha - indicates that the page compositor will assume\n * the drawing buffer contains colors with pre-multiplied alpha\n * default is false\n * <br><br>\n * preserveDrawingBuffer - if true the buffers will not be cleared and\n * and will preserve their values until cleared or overwritten by author\n * (note that p5 clears automatically on draw loop)\n * default is true\n * <br><br>\n * perPixelLighting - if true, per-pixel lighting will be used in the\n * lighting shader.\n * default is false\n * <br><br>\n * @method setAttributes\n * @for p5\n * @param  {String}  key Name of attribute\n * @param  {Boolean}        value New value of named attribute\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n * }\n *\n * function draw() {\n *   background(255);\n *   push();\n *   rotateZ(frameCount * 0.02);\n *   rotateX(frameCount * 0.02);\n *   rotateY(frameCount * 0.02);\n *   fill(0, 0, 0);\n *   box(50);\n *   pop();\n * }\n * </code>\n * </div>\n * <br>\n * Now with the antialias attribute set to true.\n * <br>\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n *   setAttributes('antialias', true);\n * }\n *\n * function draw() {\n *   background(255);\n *   push();\n *   rotateZ(frameCount * 0.02);\n *   rotateX(frameCount * 0.02);\n *   rotateY(frameCount * 0.02);\n *   fill(0, 0, 0);\n *   box(50);\n *   pop();\n * }\n * </code>\n * </div>\n *\n * <div>\n * <code>\n * // press the mouse button to enable perPixelLighting\n * function setup() {\n *   createCanvas(100, 100, WEBGL);\n *   noStroke();\n *   fill(255);\n * }\n *\n * var lights = [\n *   { c: '#f00', t: 1.12, p: 1.91, r: 0.2 },\n *   { c: '#0f0', t: 1.21, p: 1.31, r: 0.2 },\n *   { c: '#00f', t: 1.37, p: 1.57, r: 0.2 },\n *   { c: '#ff0', t: 1.12, p: 1.91, r: 0.7 },\n *   { c: '#0ff', t: 1.21, p: 1.31, r: 0.7 },\n *   { c: '#f0f', t: 1.37, p: 1.57, r: 0.7 }\n * ];\n *\n * function draw() {\n *   var t = millis() / 1000 + 1000;\n *   background(0);\n *   directionalLight(color('#222'), 1, 1, 1);\n *\n *   for (var i = 0; i < lights.length; i++) {\n *     var light = lights[i];\n *     pointLight(\n *       color(light.c),\n *       p5.Vector.fromAngles(t * light.t, t * light.p, width * light.r)\n *     );\n *   }\n *\n *   specularMaterial(255);\n *   sphere(width * 0.1);\n *\n *   rotateX(t * 0.77);\n *   rotateY(t * 0.83);\n *   rotateZ(t * 0.91);\n *   torus(width * 0.3, width * 0.07, 30, 10);\n * }\n *\n * function mousePressed() {\n *   setAttributes('perPixelLighting', true);\n *   noStroke();\n *   fill(255);\n * }\n * function mouseReleased() {\n *   setAttributes('perPixelLighting', false);\n *   noStroke();\n *   fill(255);\n * }\n * </code>\n * </div>\n *\n * @alt a rotating cube with smoother edges\n */\n/**\n * @method setAttributes\n * @for p5\n * @param  {Object}  obj object with key-value pairs\n */\n\np5.prototype.setAttributes = function(key, value) {\n  this._assert3d('setAttributes');\n  //@todo_FES\n  var attr;\n  if (typeof value !== 'undefined') {\n    attr = {};\n    attr[key] = value;\n  } else if (key instanceof Object) {\n    attr = key;\n  }\n  this.push();\n  this._renderer._resetContext(attr);\n  this.pop();\n};\n\n/**\n * @class p5.RendererGL\n */\n\np5.RendererGL.prototype._computeCameraDefaultSettings = function() {\n  this.defaultCameraFOV = 60 / 180 * Math.PI;\n  this.defaultCameraAspect = this.width / this.height;\n  this.defaultCameraX = 0;\n  this.defaultCameraY = 0;\n  this.defaultCameraZ =\n    this.height / 2.0 / Math.tan(this.defaultCameraFOV / 2.0);\n  this.defaultCameraNear = this.defaultCameraZ * 0.1;\n  this.defaultCameraFar = this.defaultCameraZ * 10;\n};\n\n//detect if user didn't set the camera\n//then call this function below\np5.RendererGL.prototype._setDefaultCamera = function() {\n  if (this._curCamera === null) {\n    this._computeCameraDefaultSettings();\n    this.cameraFOV = this.defaultCameraFOV;\n    this.cameraAspect = this.defaultAspect;\n    this.cameraX = this.defaultCameraX;\n    this.cameraY = this.defaultCameraY;\n    this.cameraZ = this.defaultCameraZ;\n    this.cameraNear = this.defaultCameraNear;\n    this.cameraFar = this.defaultCameraFar;\n\n    this.perspective();\n    this.camera();\n    this._curCamera = 'default';\n  }\n};\n\np5.RendererGL.prototype._update = function() {\n  // reset model view and apply initial camera transform\n  // (containing only look at info; no projection).\n  this.uMVMatrix.set(\n    this.cameraMatrix.mat4[0],\n    this.cameraMatrix.mat4[1],\n    this.cameraMatrix.mat4[2],\n    this.cameraMatrix.mat4[3],\n    this.cameraMatrix.mat4[4],\n    this.cameraMatrix.mat4[5],\n    this.cameraMatrix.mat4[6],\n    this.cameraMatrix.mat4[7],\n    this.cameraMatrix.mat4[8],\n    this.cameraMatrix.mat4[9],\n    this.cameraMatrix.mat4[10],\n    this.cameraMatrix.mat4[11],\n    this.cameraMatrix.mat4[12],\n    this.cameraMatrix.mat4[13],\n    this.cameraMatrix.mat4[14],\n    this.cameraMatrix.mat4[15]\n  );\n\n  // reset light data for new frame.\n\n  this.ambientLightColors.length = 0;\n  this.directionalLightDirections.length = 0;\n  this.directionalLightColors.length = 0;\n\n  this.pointLightPositions.length = 0;\n  this.pointLightColors.length = 0;\n};\n\n/**\n * [background description]\n */\np5.RendererGL.prototype.background = function() {\n  var _col = this._pInst.color.apply(this._pInst, arguments);\n  var _r = _col.levels[0] / 255;\n  var _g = _col.levels[1] / 255;\n  var _b = _col.levels[2] / 255;\n  var _a = _col.levels[3] / 255;\n  this.GL.clearColor(_r, _g, _b, _a);\n  this.GL.depthMask(true);\n  this.GL.clear(this.GL.COLOR_BUFFER_BIT | this.GL.DEPTH_BUFFER_BIT);\n};\n\n//@TODO implement this\n// p5.RendererGL.prototype.clear = function() {\n//@TODO\n// };\n\n//////////////////////////////////////////////\n// COLOR\n//////////////////////////////////////////////\n/**\n * Basic fill material for geometry with a given color\n * @method  fill\n * @class p5.RendererGL\n * @param  {Number|Number[]|String|p5.Color} v1  gray value,\n * red or hue value (depending on the current color mode),\n * or color Array, or CSS color string\n * @param  {Number}            [v2] green or saturation value\n * @param  {Number}            [v3] blue or brightness value\n * @param  {Number}            [a]  opacity\n * @chainable\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(200, 200, WEBGL);\n * }\n *\n * function draw() {\n *   background(0);\n *   noStroke();\n *   fill(100, 100, 240);\n *   rotateX(frameCount * 0.01);\n *   rotateY(frameCount * 0.01);\n *   box(75, 75, 75);\n * }\n * </code>\n * </div>\n *\n * @alt\n * black canvas with purple cube spinning\n *\n */\np5.RendererGL.prototype.fill = function(v1, v2, v3, a) {\n  //see material.js for more info on color blending in webgl\n  var color = p5.prototype.color.apply(this._pInst, arguments);\n  this.curFillColor = color._array;\n\n  if (this.isImmediateDrawing) {\n    this.setFillShader(this._getImmediateModeShader());\n  } else {\n    this.setFillShader(this._getColorShader());\n  }\n  this.drawMode = constants.FILL;\n  this.curFillShader.setUniform('uMaterialColor', this.curFillColor);\n};\n\n/**\n * Basic stroke material for geometry with a given color\n * @method  stroke\n * @param  {Number|Number[]|String|p5.Color} v1  gray value,\n * red or hue value (depending on the current color mode),\n * or color Array, or CSS color string\n * @param  {Number}            [v2] green or saturation value\n * @param  {Number}            [v3] blue or brightness value\n * @param  {Number}            [a]  opacity\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(200, 200, WEBGL);\n * }\n *\n * function draw() {\n *   background(0);\n *   stroke(240, 150, 150);\n *   fill(100, 100, 240);\n *   rotateX(frameCount * 0.01);\n *   rotateY(frameCount * 0.01);\n *   box(75, 75, 75);\n * }\n * </code>\n * </div>\n *\n * @alt\n * black canvas with purple cube with pink outline spinning\n *\n */\np5.RendererGL.prototype.stroke = function(r, g, b, a) {\n  //@todo allow transparency in stroking currently doesn't have\n  //any impact and causes problems with specularMaterial\n  arguments[3] = 255;\n  var color = p5.prototype.color.apply(this._pInst, arguments);\n  this.curStrokeColor = color._array;\n  this.curStrokeShader.setUniform('uMaterialColor', this.curStrokeColor);\n};\n\n/**\n * Change weight of stroke\n * @method  strokeWeight\n * @param  {Number} stroke weight to be used for drawing\n * @example\n * <div>\n * <code>\n * function setup() {\n *   createCanvas(200, 400, WEBGL);\n *   setAttributes('antialias', true);\n * }\n *\n * function draw() {\n *   background(0);\n *   noStroke();\n *   translate(0, -100, 0);\n *   stroke(240, 150, 150);\n *   fill(100, 100, 240);\n *   push();\n *   strokeWeight(8);\n *   rotateX(frameCount * 0.01);\n *   rotateY(frameCount * 0.01);\n *   sphere(75);\n *   pop();\n *   push();\n *   translate(0, 200, 0);\n *   strokeWeight(1);\n *   rotateX(frameCount * 0.01);\n *   rotateY(frameCount * 0.01);\n *   sphere(75);\n *   pop();\n * }\n * </code>\n * </div>\n *\n * @alt\n * black canvas with two purple rotating spheres with pink\n * outlines the sphere on top has much heavier outlines,\n *\n */\np5.RendererGL.prototype.strokeWeight = function(w) {\n  if (this.curStrokeWeight !== w) {\n    this.pointSize = w;\n    this.curStrokeWeight = w;\n    this.curStrokeShader.setUniform('uStrokeWeight', w);\n  }\n};\n\n/**\n * Returns an array of [R,G,B,A] values for any pixel or grabs a section of\n * an image. If no parameters are specified, the entire image is returned.\n * Use the x and y parameters to get the value of one pixel. Get a section of\n * the display window by specifying additional w and h parameters. When\n * getting an image, the x and y parameters define the coordinates for the\n * upper-left corner of the image, regardless of the current imageMode().\n * <br><br>\n * If the pixel requested is outside of the image window, [0,0,0,255] is\n * returned.\n * <br><br>\n * Getting the color of a single pixel with get(x, y) is easy, but not as fast\n * as grabbing the data directly from pixels[]. The equivalent statement to\n * get(x, y) is using pixels[] with pixel density d\n *\n * @private\n * @method get\n * @param  {Number}               [x] x-coordinate of the pixel\n * @param  {Number}               [y] y-coordinate of the pixel\n * @param  {Number}               [w] width\n * @param  {Number}               [h] height\n * @return {Number[]|Color|p5.Image}  color of pixel at x,y in array format\n *                                    [R, G, B, A] or <a href=\"#/p5.Image\">p5.Image</a>\n */\np5.RendererGL.prototype.get = function(x, y, w, h) {\n  return p5.Renderer2D.prototype.get.apply(this, [x, y, w, h]);\n};\n\n/**\n * Loads the pixels data for this canvas into the pixels[] attribute.\n * Note that updatePixels() and set() do not work.\n * Any pixel manipulation must be done directly to the pixels[] array.\n *\n * @private\n * @method loadPixels\n *\n */\n\np5.RendererGL.prototype.loadPixels = function() {\n  //@todo_FES\n  if (this.attributes.preserveDrawingBuffer !== true) {\n    console.log(\n      'loadPixels only works in WebGL when preserveDrawingBuffer ' + 'is true.'\n    );\n    return;\n  }\n  var pd = this._pInst._pixelDensity;\n  var x = 0;\n  var y = 0;\n  var w = this.width;\n  var h = this.height;\n  w *= pd;\n  h *= pd;\n  //if there isn't a renderer-level temporary pixels buffer\n  //make a new one\n  if (typeof this.pixels === 'undefined') {\n    this.pixels = new Uint8Array(\n      this.GL.drawingBufferWidth * this.GL.drawingBufferHeight * 4\n    );\n  }\n  this.GL.readPixels(\n    x,\n    y,\n    w,\n    h,\n    this.GL.RGBA,\n    this.GL.UNSIGNED_BYTE,\n    this.pixels\n  );\n  this._pInst._setProperty('pixels', this.pixels);\n};\n\n//////////////////////////////////////////////\n// HASH | for geometry\n//////////////////////////////////////////////\n\np5.RendererGL.prototype.geometryInHash = function(gId) {\n  return this.gHash[gId] !== undefined;\n};\n\n/**\n * [resize description]\n * @private\n * @param  {Number} w [description]\n * @param  {Number} h [description]\n */\np5.RendererGL.prototype.resize = function(w, h) {\n  p5.Renderer.prototype.resize.call(this, w, h);\n  this.GL.viewport(\n    0,\n    0,\n    this.GL.drawingBufferWidth,\n    this.GL.drawingBufferHeight\n  );\n  this._viewport = this.GL.getParameter(this.GL.VIEWPORT);\n  // If we're using the default camera, update the aspect ratio\n  if (this._curCamera === null || this._curCamera === 'default') {\n    this._curCamera = null;\n    // camera defaults are dependent on the width & height of the screen,\n    // so we'll want to update them if the size of the screen changes.\n    this._setDefaultCamera();\n  }\n  //resize pixels buffer\n  if (typeof this.pixels !== 'undefined') {\n    this.pixels = new Uint8Array(\n      this.GL.drawingBufferWidth * this.GL.drawingBufferHeight * 4\n    );\n  }\n};\n\n/**\n * clears color and depth buffers\n * with r,g,b,a\n * @private\n * @param {Number} r normalized red val.\n * @param {Number} g normalized green val.\n * @param {Number} b normalized blue val.\n * @param {Number} a normalized alpha val.\n */\np5.RendererGL.prototype.clear = function() {\n  var _r = arguments[0] || 0;\n  var _g = arguments[1] || 0;\n  var _b = arguments[2] || 0;\n  var _a = arguments[3] || 0;\n  this.GL.clearColor(_r, _g, _b, _a);\n  this.GL.clear(this.GL.COLOR_BUFFER_BIT | this.GL.DEPTH_BUFFER_BIT);\n};\n\n/**\n * [translate description]\n * @private\n * @param  {Number} x [description]\n * @param  {Number} y [description]\n * @param  {Number} z [description]\n * @chainable\n * @todo implement handle for components or vector as args\n */\np5.RendererGL.prototype.translate = function(x, y, z) {\n  if (x instanceof p5.Vector) {\n    z = x.z;\n    y = x.y;\n    x = x.x;\n  }\n  this.uMVMatrix.translate([x, y, z]);\n  return this;\n};\n\n/**\n * Scales the Model View Matrix by a vector\n * @private\n * @param  {Number | p5.Vector | Array} x [description]\n * @param  {Number} [y] y-axis scalar\n * @param  {Number} [z] z-axis scalar\n * @chainable\n */\np5.RendererGL.prototype.scale = function(x, y, z) {\n  this.uMVMatrix.scale(x, y, z);\n  return this;\n};\n\np5.RendererGL.prototype.rotate = function(rad, axis) {\n  if (typeof axis === 'undefined') {\n    return this.rotateZ(rad);\n  }\n  p5.Matrix.prototype.rotate.apply(this.uMVMatrix, arguments);\n  return this;\n};\n\np5.RendererGL.prototype.rotateX = function(rad) {\n  this.rotate(rad, 1, 0, 0);\n  return this;\n};\n\np5.RendererGL.prototype.rotateY = function(rad) {\n  this.rotate(rad, 0, 1, 0);\n  return this;\n};\n\np5.RendererGL.prototype.rotateZ = function(rad) {\n  this.rotate(rad, 0, 0, 1);\n  return this;\n};\n\np5.RendererGL.prototype.push = function() {\n  // get the base renderer style\n  var style = p5.Renderer.prototype.push.apply(this);\n\n  // add webgl-specific style properties\n  var properties = style.properties;\n\n  properties.uMVMatrix = this.uMVMatrix.copy();\n  properties.cameraMatrix = this.cameraMatrix.copy();\n\n  return style;\n};\n\np5.RendererGL.prototype.resetMatrix = function() {\n  this.uMVMatrix = p5.Matrix.identity(this._pInst);\n  return this;\n};\n\n// Text/Typography\n// @TODO:\np5.RendererGL.prototype._applyTextProperties = function() {\n  //@TODO finish implementation\n  console.error('text commands not yet implemented in webgl');\n};\n\n//////////////////////////////////////////////\n// SHADER\n//////////////////////////////////////////////\n\n/*\n * Initializes and uses the specified shader, then returns\n * that shader. Note: initialization and resetting the program\n * is only used if needed (say, if a new value is provided)\n * so it is safe to call this method with the same shader multiple\n * times without a signficant performance hit).\n *\n * @method setFillShader\n * @param {p5.Shader} [s] a p5.Shader object\n * @return {p5.Shader} the current, updated fill shader\n */\np5.RendererGL.prototype.setFillShader = function(s) {\n  if (this.curFillShader !== s) {\n    // only do setup etc. if shader is actually new.\n    this.curFillShader = s;\n\n    // safe to do this multiple times;\n    // init() will bail early if has already been run.\n    this.curFillShader.init();\n    //this.curFillShader.useProgram();\n  }\n  // always return this.curFillShader, even if no change was made.\n  return this.curFillShader;\n};\n\n/*\n * @method setStrokeShader\n * @param {p5.Shader} [s] a p5.Shader object\n * @return {p5.Shader} the current, updated stroke shader\n */\np5.RendererGL.prototype.setStrokeShader = function(s) {\n  if (this.curStrokeShader !== s) {",
          "filepath": "data/repos/processing/p5.js-0.7/src/webgl/p5.RendererGL.js",
          "repo": "processing/p5.js",
          "version": "0.7",
          "chunk_index": 0
        }
      },
      {
        "id": "b87c8685-4318-4878-b9e9-fe0407006bb6",
        "score": 0.016129032258064516,
        "payload": {
          "text": "/**\n * Welcome to RendererGL Immediate Mode.\n * Immediate mode is used for drawing custom shapes\n * from a set of vertices.  Immediate Mode is activated\n * when you call <a href=\"#/p5/beginShape\">beginShape()</a> & de-activated when you call <a href=\"#/p5/endShape\">endShape()</a>.\n * Immediate mode is a style of programming borrowed\n * from OpenGL's (now-deprecated) immediate mode.\n * It differs from p5.js' default, Retained Mode, which caches\n * geometries and buffers on the CPU to reduce the number of webgl\n * draw calls. Retained mode is more efficient & performative,\n * however, Immediate Mode is useful for sketching quick\n * geometric ideas.\n */\n'use strict';\n\nvar p5 = require('../core/main');\nvar constants = require('../core/constants');\n\n/**\n * Begin shape drawing.  This is a helpful way of generating\n * custom shapes quickly.  However in WEBGL mode, application\n * performance will likely drop as a result of too many calls to\n * <a href=\"#/p5/beginShape\">beginShape()</a> / <a href=\"#/p5/endShape\">endShape()</a>.  As a high performance alternative,\n * please use p5.js geometry primitives.\n * @private\n * @method beginShape\n * @param  {Number} mode webgl primitives mode.  beginShape supports the\n *                       following modes:\n *                       POINTS,LINES,LINE_STRIP,LINE_LOOP,TRIANGLES,\n *                       TRIANGLE_STRIP,and TRIANGLE_FAN.\n * @chainable\n */\np5.RendererGL.prototype.beginShape = function(mode) {\n  //default shape mode is line_strip\n  this.immediateMode.shapeMode =\n    mode !== undefined ? mode : constants.LINE_STRIP;\n  //if we haven't yet initialized our\n  //immediateMode vertices & buffers, create them now!\n  if (this.immediateMode.vertices === undefined) {\n    this.immediateMode.vertices = [];\n    this.immediateMode.edges = [];\n    this.immediateMode.lineVertices = [];\n    this.immediateMode.vertexColors = [];\n    this.immediateMode.lineNormals = [];\n    this.immediateMode.uvCoords = [];\n    this.immediateMode.vertexBuffer = this.GL.createBuffer();\n    this.immediateMode.colorBuffer = this.GL.createBuffer();\n    this.immediateMode.uvBuffer = this.GL.createBuffer();\n    this.immediateMode.lineVertexBuffer = this.GL.createBuffer();\n    this.immediateMode.lineNormalBuffer = this.GL.createBuffer();\n  } else {\n    this.immediateMode.vertices.length = 0;\n    this.immediateMode.edges.length = 0;\n    this.immediateMode.lineVertices.length = 0;\n    this.immediateMode.lineNormals.length = 0;\n    this.immediateMode.vertexColors.length = 0;\n    this.immediateMode.uvCoords.length = 0;\n  }\n  this.isImmediateDrawing = true;\n  return this;\n};\n/**\n * adds a vertex to be drawn in a custom Shape.\n * @private\n * @method vertex\n * @param  {Number} x x-coordinate of vertex\n * @param  {Number} y y-coordinate of vertex\n * @param  {Number} z z-coordinate of vertex\n * @chainable\n * @TODO implement handling of <a href=\"#/p5.Vector\">p5.Vector</a> args\n */\np5.RendererGL.prototype.vertex = function(x, y) {\n  var z, u, v;\n\n  // default to (x, y) mode: all other arugments assumed to be 0.\n  z = u = v = 0;\n\n  if (arguments.length === 3) {\n    // (x, y, z) mode: (u, v) assumed to be 0.\n    z = arguments[2];\n  } else if (arguments.length === 4) {\n    // (x, y, u, v) mode: z assumed to be 0.\n    u = arguments[2];\n    v = arguments[3];\n  } else if (arguments.length === 5) {\n    // (x, y, z, u, v) mode\n    z = arguments[2];\n    u = arguments[3];\n    v = arguments[4];\n  }\n  var vert = new p5.Vector(x, y, z);\n  this.immediateMode.vertices.push(vert);\n  var vertexColor = this.curFillColor || [0.5, 0.5, 0.5, 1.0];\n  this.immediateMode.vertexColors.push(\n    vertexColor[0],\n    vertexColor[1],\n    vertexColor[2],\n    vertexColor[3]\n  );\n\n  this.immediateMode.uvCoords.push(u, v);\n\n  return this;\n};\n\n/**\n * End shape drawing and render vertices to screen.\n * @chainable\n */\np5.RendererGL.prototype.endShape = function(\n  mode,\n  isCurve,\n  isBezier,\n  isQuadratic,\n  isContour,\n  shapeKind\n) {\n  this._useImmediateModeShader();\n\n  if (this._doStroke && this.drawMode !== constants.TEXTURE) {\n    for (var i = 0; i < this.immediateMode.vertices.length - 1; i++) {\n      this.immediateMode.edges.push([i, i + 1]);\n    }\n    if (mode === constants.CLOSE) {\n      this.immediateMode.edges.push([\n        this.immediateMode.vertices.length - 1,\n        0\n      ]);\n    }\n\n    p5.Geometry.prototype._edgesToVertices.call(this.immediateMode);\n    this._drawStrokeImmediateMode();\n  }\n  if (this._doFill) {\n    this._drawFillImmediateMode(\n      mode,\n      isCurve,\n      isBezier,\n      isQuadratic,\n      isContour,\n      shapeKind\n    );\n  }\n  //clear out our vertexPositions & colors arrays\n  //after rendering\n  this.immediateMode.vertices.length = 0;\n  this.immediateMode.vertexColors.length = 0;\n  this.immediateMode.uvCoords.length = 0;\n  this.isImmediateDrawing = false;\n\n  return this;\n};\n\np5.RendererGL.prototype._drawFillImmediateMode = function(\n  mode,\n  isCurve,\n  isBezier,\n  isQuadratic,\n  isContour,\n  shapeKind\n) {\n  var gl = this.GL;\n  this.curFillShader.bindShader();\n\n  // initialize the fill shader's 'aPosition' buffer\n  if (this.curFillShader.attributes.aPosition) {\n    //vertex position Attribute\n    this._bindBuffer(\n      this.immediateMode.vertexBuffer,\n      gl.ARRAY_BUFFER,\n      this._vToNArray(this.immediateMode.vertices),\n      Float32Array,\n      gl.DYNAMIC_DRAW\n    );\n\n    this.curFillShader.enableAttrib(\n      this.curFillShader.attributes.aPosition.location,\n      3,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n\n  // initialize the fill shader's 'aVertexColor' buffer\n  if (\n    this.drawMode === constants.FILL &&\n    this.curFillShader.attributes.aVertexColor\n  ) {\n    this._bindBuffer(\n      this.immediateMode.colorBuffer,\n      gl.ARRAY_BUFFER,\n      this.immediateMode.vertexColors,\n      Float32Array,\n      gl.DYNAMIC_DRAW\n    );\n\n    this.curFillShader.enableAttrib(\n      this.curFillShader.attributes.aVertexColor.location,\n      4,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n\n  // initialize the fill shader's 'aTexCoord' buffer\n  if (\n    this.drawMode === constants.TEXTURE &&\n    this.curFillShader.attributes.aTexCoord\n  ) {\n    //texture coordinate Attribute\n    this._bindBuffer(\n      this.immediateMode.uvBuffer,\n      gl.ARRAY_BUFFER,\n      this.immediateMode.uvCoords,\n      Float32Array,\n      gl.DYNAMIC_DRAW\n    );\n\n    this.curFillShader.enableAttrib(\n      this.curFillShader.attributes.aTexCoord.location,\n      2,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n\n  //if (true || mode) {\n  if (this.drawMode === constants.FILL || this.drawMode === constants.TEXTURE) {\n    switch (this.immediateMode.shapeMode) {\n      case constants.LINE_STRIP:\n      case constants.LINES:\n      case constants.TRIANGLES:\n        this.immediateMode.shapeMode = constants.TRIANGLE_FAN;\n        break;\n    }\n  } else {\n    switch (this.immediateMode.shapeMode) {\n      case constants.LINE_STRIP:\n      case constants.LINES:\n        this.immediateMode.shapeMode = constants.LINE_LOOP;\n        break;\n    }\n  }\n  //}\n  //QUADS & QUAD_STRIP are not supported primitives modes\n  //in webgl.\n  if (\n    this.immediateMode.shapeMode === constants.QUADS ||\n    this.immediateMode.shapeMode === constants.QUAD_STRIP\n  ) {\n    throw new Error(\n      'sorry, ' +\n        this.immediateMode.shapeMode +\n        ' not yet implemented in webgl mode.'\n    );\n  } else {\n    this._applyColorBlend(this.curFillColor);\n    gl.enable(gl.BLEND);\n    gl.drawArrays(\n      this.immediateMode.shapeMode,\n      0,\n      this.immediateMode.vertices.length\n    );\n\n    this._pInst._pixelsDirty = true;\n  }\n  // todo / optimizations? leave bound until another shader is set?\n  this.curFillShader.unbindShader();\n};\n\np5.RendererGL.prototype._drawStrokeImmediateMode = function() {\n  var gl = this.GL;\n  this.curStrokeShader.bindShader();\n\n  // initialize the stroke shader's 'aPosition' buffer\n  if (this.curStrokeShader.attributes.aPosition) {\n    this._bindBuffer(\n      this.immediateMode.lineVertexBuffer,\n      gl.ARRAY_BUFFER,\n      this._flatten(this.immediateMode.lineVertices),\n      Float32Array,\n      gl.STATIC_DRAW\n    );\n\n    this.curStrokeShader.enableAttrib(\n      this.curStrokeShader.attributes.aPosition.location,\n      3,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n\n  // initialize the stroke shader's 'aDirection' buffer\n  if (this.curStrokeShader.attributes.aDirection) {\n    this._bindBuffer(\n      this.immediateMode.lineNormalBuffer,\n      gl.ARRAY_BUFFER,\n      this._flatten(this.immediateMode.lineNormals),\n      Float32Array,\n      gl.STATIC_DRAW\n    );\n    this.curStrokeShader.enableAttrib(\n      this.curStrokeShader.attributes.aDirection.location,\n      4,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n\n  this._applyColorBlend(this.curStrokeColor);\n  gl.drawArrays(gl.TRIANGLES, 0, this.immediateMode.lineVertices.length);\n\n  // todo / optimizations? leave bound until another shader is set?\n  this.curStrokeShader.unbindShader();\n\n  this._pInst._pixelsDirty = true;\n};\n\nmodule.exports = p5.RendererGL;\n",
          "filepath": "data/repos/processing/p5.js-0.7/src/webgl/p5.RendererGL.Immediate.js",
          "repo": "processing/p5.js",
          "version": "0.7",
          "chunk_index": 0
        }
      },
      {
        "id": "722d1222-0c22-459d-88e8-dcb7007d65d9",
        "score": 0.015873015873015872,
        "payload": {
          "text": "suite('stroke WebGL', function() {\n  var myp5;\n\n  if (!window.Modernizr.webgl) {\n    return;\n  }\n\n  setup(function() {\n    myp5 = new p5(function(p) {\n      p.setup = function() {\n        p.createCanvas(100, 100, p.WEBGL);\n      };\n    });\n  });\n\n  teardown(function() {\n    myp5.clear();\n  });\n\n  suite('default stroke shader', function() {\n    test('check default shader creation', function(done) {\n      myp5.createCanvas(100, 100, myp5.WEBGL);\n      assert(\n        myp5._renderer.curStrokeShader === myp5._renderer._getLineShader(),\n        'default stroke shader was not initialized with GL canvas'\n      );\n      assert(\n        myp5._renderer.curFillShader === myp5._renderer._getColorShader(),\n        'default fill shader was not initialized with GL canvas'\n      );\n      done();\n    });\n\n    test('check activate and deactivating fill and stroke', function(done) {\n      myp5.noStroke();\n      assert(\n        !myp5._renderer._doStroke,\n        'stroke shader still active after noStroke()'\n      );\n      assert.isTrue(\n        myp5._renderer._doFill,\n        'fill shader deactivated by noStroke()'\n      );\n      myp5.stroke(0);\n      myp5.noFill();\n      assert(\n        myp5._renderer._doStroke,\n        'stroke shader not active after stroke()'\n      );\n      assert.isTrue(\n        !myp5._renderer._doFill,\n        'fill shader still active after noFill()'\n      );\n      done();\n    });\n  });\n});\n",
          "filepath": "data/repos/processing/p5.js-0.7/test/unit/webgl/stroke.js",
          "repo": "processing/p5.js",
          "version": "0.7",
          "chunk_index": 0
        }
      },
      {
        "id": "ca81cd30-3d57-4553-b1f7-052cf29468db",
        "score": 0.015625,
        "payload": {
          "text": "function setup() {\n  createCanvas(windowWidth, windowHeight, WEBGL);\n}\n\nfunction draw() {\n  background(255);\n  translate(-width / 2, -height / 2, 0);\n  rotateY(frameCount * 0.01);\n\n  var gap = 200;\n  var w = 100;\n  var h = 100;\n\n  for (var i = 0; i < 5; i++) {\n    for (var j = 0; j < 5; j++) {\n      fill(i * 40, j * 40, 0);\n      quad(\n        i * gap,\n        j * gap,\n        i * gap,\n        j * gap + h,\n        i * gap + w,\n        j * gap + h,\n        i * gap + w,\n        j * gap\n      );\n    }\n  }\n}\n",
          "filepath": "data/repos/processing/p5.js-0.7/test/manual-test-examples/webgl/origin/topleft_origin/sketch.js",
          "repo": "processing/p5.js",
          "version": "0.7",
          "chunk_index": 0
        }
      },
      {
        "id": "4c20e4c8-c5c0-443f-861d-0c9c40d4948c",
        "score": 0.015384615384615385,
        "payload": {
          "text": "//Retained Mode. The default mode for rendering 3D primitives\n//in WEBGL.\n'use strict';\n\nvar p5 = require('../core/main');\n\nvar hashCount = 0;\n/**\n * _initBufferDefaults\n * @private\n * @description initializes buffer defaults. runs each time a new geometry is\n * registered\n * @param  {String} gId  key of the geometry object\n */\np5.RendererGL.prototype._initBufferDefaults = function(gId) {\n  this._freeBuffers(gId);\n\n  //@TODO remove this limit on hashes in gHash\n  hashCount++;\n  if (hashCount > 1000) {\n    var key = Object.keys(this.gHash)[0];\n    delete this.gHash[key];\n    hashCount--;\n  }\n\n  //create a new entry in our gHash\n  this.gHash[gId] = {};\n};\n\np5.RendererGL.prototype._freeBuffers = function(gId) {\n  var geometry = this.gHash[gId];\n  if (!geometry) {\n    return;\n  }\n\n  delete this.gHash[gId];\n  hashCount--;\n\n  var gl = this.GL;\n  geometry.vertexBuffer && gl.deleteBuffer(geometry.vertexBuffer);\n  geometry.normalBuffer && gl.deleteBuffer(geometry.normalBuffer);\n  geometry.lineNormalBuffer && gl.deleteBuffer(geometry.lineNormalBuffer);\n  geometry.uvBuffer && gl.deleteBuffer(geometry.uvBuffer);\n  geometry.indexBuffer && gl.deleteBuffer(geometry.indexBuffer);\n  geometry.lineVertexBuffer && gl.deleteBuffer(geometry.lineVertexBuffer);\n};\n/**\n * createBuffers description\n * @private\n * @param  {String} gId    key of the geometry object\n * @param  {p5.Geometry}  obj contains geometry data\n */\np5.RendererGL.prototype.createBuffers = function(gId, obj) {\n  var gl = this.GL;\n  this._setDefaultCamera();\n  //initialize the gl buffers for our geom groups\n  this._initBufferDefaults(gId);\n\n  var geometry = this.gHash[gId];\n\n  geometry.numberOfItems = obj.faces.length * 3;\n  geometry.lineVertexCount = obj.lineVertices.length;\n\n  this._useColorShader();\n\n  // initialize the stroke shader's 'aPosition' buffer, if used\n  if (this.curStrokeShader.attributes.aPosition) {\n    geometry.lineVertexBuffer = gl.createBuffer();\n\n    this._bindBuffer(\n      geometry.lineVertexBuffer,\n      gl.ARRAY_BUFFER,\n      this._flatten(obj.lineVertices),\n      Float32Array,\n      gl.STATIC_DRAW\n    );\n\n    this.curStrokeShader.enableAttrib(\n      this.curStrokeShader.attributes.aPosition.location,\n      3,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n\n  // initialize the stroke shader's 'aDirection' buffer, if used\n  if (this.curStrokeShader.attributes.aDirection) {\n    geometry.lineNormalBuffer = gl.createBuffer();\n\n    this._bindBuffer(\n      geometry.lineNormalBuffer,\n      gl.ARRAY_BUFFER,\n      this._flatten(obj.lineNormals),\n      Float32Array,\n      gl.STATIC_DRAW\n    );\n\n    this.curStrokeShader.enableAttrib(\n      this.curStrokeShader.attributes.aDirection.location,\n      4,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n\n  // initialize the fill shader's 'aPosition' buffer, if used\n  if (this.curFillShader.attributes.aPosition) {\n    geometry.vertexBuffer = gl.createBuffer();\n\n    // allocate space for vertex positions\n    this._bindBuffer(\n      geometry.vertexBuffer,\n      gl.ARRAY_BUFFER,\n      this._vToNArray(obj.vertices),\n      Float32Array,\n      gl.STATIC_DRAW\n    );\n\n    this.curFillShader.enableAttrib(\n      this.curFillShader.attributes.aPosition.location,\n      3,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n\n  // allocate space for faces\n  geometry.indexBuffer = gl.createBuffer();\n  this._bindBuffer(\n    geometry.indexBuffer,\n    gl.ELEMENT_ARRAY_BUFFER,\n    this._flatten(obj.faces),\n    Uint16Array,\n    gl.STATIC_DRAW\n  );\n\n  // initialize the fill shader's 'aNormal' buffer, if used\n  if (this.curFillShader.attributes.aNormal) {\n    geometry.normalBuffer = gl.createBuffer();\n\n    // allocate space for normals\n    this._bindBuffer(\n      geometry.normalBuffer,\n      gl.ARRAY_BUFFER,\n      this._vToNArray(obj.vertexNormals),\n      Float32Array,\n      gl.STATIC_DRAW\n    );\n\n    this.curFillShader.enableAttrib(\n      this.curFillShader.attributes.aNormal.location,\n      3,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n\n  // initialize the fill shader's 'aTexCoord' buffer, if used\n  if (this.curFillShader.attributes.aTexCoord) {\n    geometry.uvBuffer = gl.createBuffer();\n\n    // tex coords\n    this._bindBuffer(\n      geometry.uvBuffer,\n      gl.ARRAY_BUFFER,\n      this._flatten(obj.uvs),\n      Float32Array,\n      gl.STATIC_DRAW\n    );\n\n    this.curFillShader.enableAttrib(\n      this.curFillShader.attributes.aTexCoord.location,\n      2,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n  //}\n};\n\n/**\n * Draws buffers given a geometry key ID\n * @private\n * @param  {String} gId     ID in our geom hash\n * @chainable\n */\np5.RendererGL.prototype.drawBuffers = function(gId) {\n  this._setDefaultCamera();\n  var gl = this.GL;\n  this._useColorShader();\n  var geometry = this.gHash[gId];\n\n  if (this._doStroke && geometry.lineVertexCount > 0) {\n    this.curStrokeShader.bindShader();\n\n    // bind the stroke shader's 'aPosition' buffer\n    if (geometry.lineVertexBuffer) {\n      this._bindBuffer(geometry.lineVertexBuffer, gl.ARRAY_BUFFER);\n      this.curStrokeShader.enableAttrib(\n        this.curStrokeShader.attributes.aPosition.location,\n        3,\n        gl.FLOAT,\n        false,\n        0,\n        0\n      );\n    }\n\n    // bind the stroke shader's 'aDirection' buffer\n    if (geometry.lineNormalBuffer) {\n      this._bindBuffer(geometry.lineNormalBuffer, gl.ARRAY_BUFFER);\n      this.curStrokeShader.enableAttrib(\n        this.curStrokeShader.attributes.aDirection.location,\n        4,\n        gl.FLOAT,\n        false,\n        0,\n        0\n      );\n    }\n\n    this._applyColorBlend(this.curStrokeColor);\n    this._drawArrays(gl.TRIANGLES, gId);\n    this.curStrokeShader.unbindShader();\n  }\n\n  if (this._doFill !== false) {\n    this.curFillShader.bindShader();\n\n    // bind the fill shader's 'aPosition' buffer\n    if (geometry.vertexBuffer) {\n      //vertex position buffer\n      this._bindBuffer(geometry.vertexBuffer, gl.ARRAY_BUFFER);\n      this.curFillShader.enableAttrib(\n        this.curFillShader.attributes.aPosition.location,\n        3,\n        gl.FLOAT,\n        false,\n        0,\n        0\n      );\n    }\n\n    if (geometry.indexBuffer) {\n      //vertex index buffer\n      this._bindBuffer(geometry.indexBuffer, gl.ELEMENT_ARRAY_BUFFER);\n    }\n\n    // bind the fill shader's 'aNormal' buffer\n    if (geometry.normalBuffer) {\n      this._bindBuffer(geometry.normalBuffer, gl.ARRAY_BUFFER);\n      this.curFillShader.enableAttrib(\n        this.curFillShader.attributes.aNormal.location,\n        3,\n        gl.FLOAT,\n        false,\n        0,\n        0\n      );\n    }\n\n    // bind the fill shader's 'aTexCoord' buffer\n    if (geometry.uvBuffer) {\n      // uv buffer\n      this._bindBuffer(geometry.uvBuffer, gl.ARRAY_BUFFER);\n      this.curFillShader.enableAttrib(\n        this.curFillShader.attributes.aTexCoord.location,\n        2,\n        gl.FLOAT,\n        false,\n        0,\n        0\n      );\n    }\n\n    this._applyColorBlend(this.curFillColor);\n    this._drawElements(gl.TRIANGLES, gId);\n    this.curFillShader.unbindShader();\n  }\n  return this;\n};\n\n/**\n * Calls drawBuffers() with a scaled model/view matrix.\n *\n * This is used by various 3d primitive methods (in primitives.js, eg. plane,\n * box, torus, etc...) to allow caching of un-scaled geometries. Those\n * geometries are generally created with unit-length dimensions, cached as\n * such, and then scaled appropriately in this method prior to rendering.\n *\n * @private\n * @method drawBuffersScaled\n * @param {String} gId     ID in our geom hash\n * @param {Number} scaleX  the amount to scale in the X direction\n * @param {Number} scaleY  the amount to scale in the Y direction\n * @param {Number} scaleZ  the amount to scale in the Z direction\n */\np5.RendererGL.prototype.drawBuffersScaled = function(\n  gId,\n  scaleX,\n  scaleY,\n  scaleZ\n) {\n  var uMVMatrix = this.uMVMatrix.copy();\n  try {\n    this.uMVMatrix.scale(scaleX, scaleY, scaleZ);\n    this.drawBuffers(gId);\n  } finally {\n    this.uMVMatrix = uMVMatrix;\n  }\n};\n\np5.RendererGL.prototype._drawArrays = function(drawMode, gId) {\n  this.GL.drawArrays(drawMode, 0, this.gHash[gId].lineVertexCount);\n  this._pInst._pixelsDirty = true;\n  return this;\n};\n\np5.RendererGL.prototype._drawElements = function(drawMode, gId) {\n  this.GL.drawElements(\n    drawMode,\n    this.gHash[gId].numberOfItems,\n    this.GL.UNSIGNED_SHORT,\n    0\n  );\n  this._pInst._pixelsDirty = true;\n};\n\nmodule.exports = p5.RendererGL;\n",
          "filepath": "data/repos/processing/p5.js-0.7/src/webgl/p5.RendererGL.Retained.js",
          "repo": "processing/p5.js",
          "version": "0.7",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1739",
    "model_patch": "diff --git a/html_comments.md b/html_comments.md\nindex 5f6e4c2..d3f8e5b 100644\n--- a/html_comments.md\n+++ b/html_comments.md\n@@ -29,6 +29,12 @@\n \n ### Example 9\n \n+<!-- My favorite operators are > and <!-->\n+\n+### Example 10\n+\n <!-- multi\n line\t\n comment\n -->\n+\n+### Example 11\n+\n    <!-- indented comment -->\n+\n     <!-- too much indentation -->\n+\n ### Example 12\n \n <!--> not a comment -->\n+\n <!---> not a comment -->\n+\n <!-- <!-- not a comment? --> -->\n+\n+### Example 13\n+\n+<!-- comment with --!> ending -->\n+\n+### Example 14\n+\n+<!-- another comment with --!> ending -->",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 259.95,
      "issue_embedding_time_ms": 259.95,
      "retrieval_time_ms_jina": 1.03,
      "retrieval_time_ms": 1.03,
      "total_retrieval_time_ms": 260.98,
      "generation_time_ms": 2482.88,
      "total_io_time_ms": 2743.86,
      "input_total_token_limit": null,
      "issue_text_tokens": 372,
      "vlm_tokens": 0,
      "retrieved_tokens": 1260,
      "prompt_template_tokens": 515,
      "total_input_prompt_tokens": 2147,
      "output_generated_tokens": 177,
      "total_io_tokens": 2324,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nComments aren't  fully supported\\n**Describe the bug**\\r\\nThe last version (1.1.1) doesn't fully supports comments. See screenshots:\\r\\nGithub:\\r\\n![image](https://user-images.githubusercontent.com/6815714/89559434-55e65b80-d81e-11ea-9edb-601f95808607.png)\\r\\n![image](https://user-images.githubusercontent.com/6815714/89559455-5d0d6980-d81e-11ea-9dd1-ed9e44f10fc5.png)\\r\\nMarked:\\r\\n![image](https://user-images.githubusercontent.com/6815714/89559506-6c8cb280-d81e-11ea-8113-f28488efb488.png)\\r\\n\\r\\nSupported:\\r\\n```\\r\\n\\r\\n```\\r\\n\\r\\nNot supported:\\r\\n```\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n**Expected behavior**\\r\\nComments with `--!>` at the ending are supported.\\nComments aren't  fully supported\\n**Describe the bug**\\r\\nThe last version (1.1.1) doesn't fully supports comments. See screenshots:\\r\\nGithub:\\r\\n![image](https://user-images.githubusercontent.com/6815714/89559434-55e65b80-d81e-11ea-9edb-601f95808607.png)\\r\\n![image](https://user-images.githubusercontent.com/6815714/89559455-5d0d6980-d81e-11ea-9dd1-ed9e44f10fc5.png)\\r\\nMarked:\\r\\n![image](https://user-images.githubusercontent.com/6815714/89559506-6c8cb280-d81e-11ea-8113-f28488efb488.png)\\r\\n\\r\\nSupported:\\r\\n```\\r\\n\\r\\n```\\r\\n\\r\\nNot supported:\\r\\n```\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n**Expected behavior**\\r\\nComments with `--!>` at the ending are supported.\\n\\n</issue>\\n\\n<code>\\n[start of html_comments.md]\\n### Example 1\\n\\n<!-- comment -->\\n\\n### Example 2\\n\\n<!---->\\n\\n### Example 3\\n\\n<!-- -->\\n\\n### Example 4\\n\\n<!-- - -->\\n\\n### Example 5\\n\\n<!-- -- -->\\n\\n### Example 6\\n\\n<!-- --->\\n\\n### Example 7\\n\\n<!----->\\n\\n### Example 8\\n\\n<!------>\\n\\n### Example 9\\n\\n<!-- My favorite operators are > and <!-->\\n\\n### Example 10\\n\\n<!-- multi\\nline\\t\\ncomment\\n-->\\n\\n### Example 11\\n\\n   <!-- indented comment -->\\n\\n    <!-- too much indentation -->\\n\\n### Example 12\\n\\n<!--> not a comment -->\\n\\n<!---> not a comment -->\\n\\n<!-- <!-- not a comment? --> -->\\n[end of html_comments.md]\\n[start of PULL_REQUEST_TEMPLATE.md]\\n\\n<!--\\n\\n\\tIf release PR, add ?template=release.md to the PR url to use the release PR template.\\n\\n\\tIf badging PR, add ?template=badges.md to the PR url to use the badges PR template.\\n\\n\\tOtherwise, you are stating this PR fixes an issue that has been submitted; or,\\n\\tdescribes the issue or proposal under consideration and contains the project-related code to implement.\\n\\n-->\\n\\n**Marked version:**\\n\\n<!-- The NPM version or commit hash having the issue -->\\n\\n**Markdown flavor:** Markdown.pl|CommonMark|GitHub Flavored Markdown|n/a\\n\\n## Description\\n\\n- Fixes #### (if fixing a known issue; otherwise, describe issue using the following format)\\n\\n<!--\\n\\n\\tIf no issue exists that you're aware of. The maintainers should be able to figure out if it's a duplicate.\\n\\n## Expectation\\n\\nDescribe the output you are expecting from marked\\n\\n## Result\\n\\nDescribe the output you received from marked\\n\\n## What was attempted\\n\\nDescribe what code combination got you there\\n\\n-->\\n\\n## Contributor\\n\\n- [ ] Test(s) exist to ensure functionality and minimize regression (if no tests added, list tests covering this PR); or,\\n- [ ] no tests required for this PR.\\n- [ ] If submitting new feature, it has been documented in the appropriate places.\\n\\n## Committer\\n\\nIn most cases, this should be a different person than the contributor.\\n\\n- [ ] Draft GitHub release notes have been updated.\\n- [ ] CI is green (no forced merge required).\\n- [ ] Merge PR\\n\\n[end of PULL_REQUEST_TEMPLATE.md]\\n[start of ISSUE_TEMPLATE.md]\\n**Marked version:**\\n\\n**Markdown flavor:** Markdown.pl|CommonMark|GitHub Flavored Markdown|n/a\\n\\n<!-- The NPM version or commit hash having the issue --> \\n\\n<!-- \\n\\n\\tIf submitting something other than a defect with Marked itself, please use the following:\\n\\n**Proposal type:** new feature | project operations | other\\n\\n## What pain point are you perceiving?\\n\\n## What solution are you suggesting?\\n\\n-->\\n\\n## Expectation\\n\\n**CommonMark Demo:** [demo](https://spec.commonmark.org/dingus/)\\n<!-- You can replace the link above with a permalink from: https://spec.commonmark.org/dingus/ -->\\n\\n<!-- Describe the output you are expecting from marked -->\\n\\n## Result\\n\\n**Marked Demo:** [demo](https://marked.js.org/demo/)\\n<!-- You can replace the link above with a permalink from: https://marked.js.org/demo/ -->\\n\\n<!-- Describe the output you received from marked -->\\n\\n## What was attempted\\n\\n<!-- Describe what code combination got you there -->\\n\\n<!-- \\n\\tIf error is thrown add the following:\\n\\n## Call stack & console log\\n\\n-->\\n\\n[end of ISSUE_TEMPLATE.md]\\n[start of inline_html_comments.md]\\nParagraph one.\\n\\n<!-- This is a simple comment -->\\n\\n<!--\\n\\tThis is another comment.\\n-->\\n\\nParagraph two.\\n\\n<!-- one comment block -- -- with two comments -->\\n\\nThe end.\\n\\n[end of inline_html_comments.md]\\n[start of LICENSE.md]\\n# License information\\n\\n## Contribution License Agreement\\n\\nIf you contribute code to this project, you are implicitly allowing your code\\nto be distributed under the MIT license. You are also implicitly verifying that\\nall code is your original work. `</legalese>`\\n\\n## Marked\\n\\nCopyright (c) 2011-2018, Christopher Jeffrey (https://github.com/chjj/)\\n\\nPermission is hereby granted, free of charge, to any person obtaining a copy\\nof this software and associated documentation files (the \\\"Software\\\"), to deal\\nin the Software without restriction, including without limitation the rights\\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\\ncopies of the Software, and to permit persons to whom the Software is\\nfurnished to do so, subject to the following conditions:\\n\\nThe above copyright notice and this permission notice shall be included in\\nall copies or substantial portions of the Software.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\\nTHE SOFTWARE.\\n\\n## Markdown\\n\\nCopyright \\u00a9 2004, John Gruber \\nhttp://daringfireball.net/ \\nAll rights reserved.\\n\\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\\n\\n* Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\\n* Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\\n* Neither the name \\u201cMarkdown\\u201d nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\\n\\nThis software is provided by the copyright holders and contributors \\u201cas is\\u201d and any express or implied warranties, including, but not limited to, the implied warranties of merchantability and fitness for a particular purpose are disclaimed. In no event shall the copyright owner or contributors be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this software, even if advised of the possibility of such damage.\\n\\n[end of LICENSE.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "html_comments.md",
        "PULL_REQUEST_TEMPLATE.md",
        "ISSUE_TEMPLATE.md",
        "inline_html_comments.md",
        "LICENSE.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "07644fe6-ce11-4e0a-9d72-6215e94c0162",
        "score": 0.01639344262295082,
        "payload": {
          "text": "### Example 1\n\n<!-- comment -->\n\n### Example 2\n\n<!---->\n\n### Example 3\n\n<!-- -->\n\n### Example 4\n\n<!-- - -->\n\n### Example 5\n\n<!-- -- -->\n\n### Example 6\n\n<!-- --->\n\n### Example 7\n\n<!----->\n\n### Example 8\n\n<!------>\n\n### Example 9\n\n<!-- My favorite operators are > and <!-->\n\n### Example 10\n\n<!-- multi\nline\t\ncomment\n-->\n\n### Example 11\n\n   <!-- indented comment -->\n\n    <!-- too much indentation -->\n\n### Example 12\n\n<!--> not a comment -->\n\n<!---> not a comment -->\n\n<!-- <!-- not a comment? --> -->",
          "filepath": "data/repos/markedjs/marked-1.1/test/specs/new/html_comments.md",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "e9fa175f-c8df-465c-b3df-9a136b464dd1",
        "score": 0.016129032258064516,
        "payload": {
          "text": "\n<!--\n\n\tIf release PR, add ?template=release.md to the PR url to use the release PR template.\n\n\tIf badging PR, add ?template=badges.md to the PR url to use the badges PR template.\n\n\tOtherwise, you are stating this PR fixes an issue that has been submitted; or,\n\tdescribes the issue or proposal under consideration and contains the project-related code to implement.\n\n-->\n\n**Marked version:**\n\n<!-- The NPM version or commit hash having the issue -->\n\n**Markdown flavor:** Markdown.pl|CommonMark|GitHub Flavored Markdown|n/a\n\n## Description\n\n- Fixes #### (if fixing a known issue; otherwise, describe issue using the following format)\n\n<!--\n\n\tIf no issue exists that you're aware of. The maintainers should be able to figure out if it's a duplicate.\n\n## Expectation\n\nDescribe the output you are expecting from marked\n\n## Result\n\nDescribe the output you received from marked\n\n## What was attempted\n\nDescribe what code combination got you there\n\n-->\n\n## Contributor\n\n- [ ] Test(s) exist to ensure functionality and minimize regression (if no tests added, list tests covering this PR); or,\n- [ ] no tests required for this PR.\n- [ ] If submitting new feature, it has been documented in the appropriate places.\n\n## Committer\n\nIn most cases, this should be a different person than the contributor.\n\n- [ ] Draft GitHub release notes have been updated.\n- [ ] CI is green (no forced merge required).\n- [ ] Merge PR\n",
          "filepath": "data/repos/markedjs/marked-1.1/.github/PULL_REQUEST_TEMPLATE.md",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "5a427a7e-44e7-4a35-9a48-1b024b2534d1",
        "score": 0.015873015873015872,
        "payload": {
          "text": "**Marked version:**\n\n**Markdown flavor:** Markdown.pl|CommonMark|GitHub Flavored Markdown|n/a\n\n<!-- The NPM version or commit hash having the issue --> \n\n<!-- \n\n\tIf submitting something other than a defect with Marked itself, please use the following:\n\n**Proposal type:** new feature | project operations | other\n\n## What pain point are you perceiving?\n\n## What solution are you suggesting?\n\n-->\n\n## Expectation\n\n**CommonMark Demo:** [demo](https://spec.commonmark.org/dingus/)\n<!-- You can replace the link above with a permalink from: https://spec.commonmark.org/dingus/ -->\n\n<!-- Describe the output you are expecting from marked -->\n\n## Result\n\n**Marked Demo:** [demo](https://marked.js.org/demo/)\n<!-- You can replace the link above with a permalink from: https://marked.js.org/demo/ -->\n\n<!-- Describe the output you received from marked -->\n\n## What was attempted\n\n<!-- Describe what code combination got you there -->\n\n<!-- \n\tIf error is thrown add the following:\n\n## Call stack & console log\n\n-->\n",
          "filepath": "data/repos/markedjs/marked-1.1/.github/ISSUE_TEMPLATE.md",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "3eaafe68-946c-4c2f-9462-c17786c4b554",
        "score": 0.015625,
        "payload": {
          "text": "Paragraph one.\n\n<!-- This is a simple comment -->\n\n<!--\n\tThis is another comment.\n-->\n\nParagraph two.\n\n<!-- one comment block -- -- with two comments -->\n\nThe end.\n",
          "filepath": "data/repos/markedjs/marked-1.1/test/specs/original/inline_html_comments.md",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "809c3929-93e5-433a-8056-b01eccfe6dd9",
        "score": 0.015384615384615385,
        "payload": {
          "text": "# License information\n\n## Contribution License Agreement\n\nIf you contribute code to this project, you are implicitly allowing your code\nto be distributed under the MIT license. You are also implicitly verifying that\nall code is your original work. `</legalese>`\n\n## Marked\n\nCopyright (c) 2011-2018, Christopher Jeffrey (https://github.com/chjj/)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n## Markdown\n\nCopyright \u00a9 2004, John Gruber \nhttp://daringfireball.net/ \nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n* Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n* Neither the name \u201cMarkdown\u201d nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n\nThis software is provided by the copyright holders and contributors \u201cas is\u201d and any express or implied warranties, including, but not limited to, the implied warranties of merchantability and fitness for a particular purpose are disclaimed. In no event shall the copyright owner or contributors be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this software, even if advised of the possibility of such damage.\n",
          "filepath": "data/repos/markedjs/marked-1.1/LICENSE.md",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1683",
    "model_patch": "diff --git a/src/Tokenizer.js b/src/Tokenizer.js\n--- a/src/Tokenizer.js\n+++ b/src/Tokenizer.js\n@@ -1,5 +1,6 @@\n const { defaults } = require('./defaults.js');\n const {\n+  unescape,\n   rtrim,\n   splitCells,\n   findClosingBracket\n@@ -162,7 +163,7 @@\n       let href = cap[2];\n       let title = '';\n       if (this.options.pedantic) {\n-        const link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n+        const link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(unescape(href));\n \n         if (link) {\n           href = link[1];\n@@ -172,7 +173,7 @@\n       } else {\n         title = cap[3] ? cap[3].slice(1, -1) : '';\n       }\n-      href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n+      href = unescape(href.trim().replace(/^<([\\s\\S]*)>$/, '$1'));\n       const token = outputLink(cap, {\n         href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n         title: title ? title.replace(this.rules.inline._escapes, '$1') : title",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 399.77,
      "issue_embedding_time_ms": 399.77,
      "retrieval_time_ms_jina": 0.85,
      "retrieval_time_ms": 0.85,
      "total_retrieval_time_ms": 400.63,
      "generation_time_ms": 4119.56,
      "total_io_time_ms": 4520.18,
      "input_total_token_limit": null,
      "issue_text_tokens": 786,
      "vlm_tokens": 0,
      "retrieved_tokens": 16035,
      "prompt_template_tokens": 512,
      "total_input_prompt_tokens": 17333,
      "output_generated_tokens": 305,
      "total_io_tokens": 17638,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nAlt text with escaped characters breaks image links\\nI'm not sure if this is a bug or not, but I would love any suggestions on how to resolve if possible.\\r\\n\\r\\nI have a situation where image links are not rendering as I would expect because the Alt text part of the image contains escaped square bracket characters.\\r\\n\\r\\nFor example:\\r\\n\\r\\n```md\\r\\n[![\\\\[Manny Pacquiao\\\\]](https://img.youtube.com/vi/s6bCmZmy9aQ/0.jpg)](https://youtu.be/s6bCmZmy9aQ)\\r\\n```\\r\\n\\r\\nThis results in the following:\\r\\n\\r\\n![image](https://user-images.githubusercontent.com/10571313/82298114-bd52f300-9a07-11ea-805b-854f69d2ecb0.png)\\r\\n\\r\\n[Here](https://marked.js.org/demo/?text=%23%20Expected%20result%0A%0A%5B!%5BManny%20Pacquiao%5D(https%3A%2F%2Fimg.youtube.com%2Fvi%2Fs6bCmZmy9aQ%2F0.jpg%20%22manny%22)%5D(https%3A%2F%2Fyoutu.be%2Fs6bCmZmy9aQ)%0A%0A%23%20Actual%20result%0A%0A%5B!%5B%5C%5BManny%20Pacquiao%5C%5D%5D(https%3A%2F%2Fimg.youtube.com%2Fvi%2Fs6bCmZmy9aQ%2F0.jpg%20%22manny%22)%5D(https%3A%2F%2Fyoutu.be%2Fs6bCmZmy9aQ)%0A%0A%0A&options=%7B%0A%20%22baseUrl%22%3A%20null%2C%0A%20%22breaks%22%3A%20true%2C%0A%20%22gfm%22%3A%20true%2C%0A%20%22headerIds%22%3A%20true%2C%0A%20%22headerPrefix%22%3A%20%22%22%2C%0A%20%22highlight%22%3A%20null%2C%0A%20%22langPrefix%22%3A%20%22language-%22%2C%0A%20%22mangle%22%3A%20true%2C%0A%20%22pedantic%22%3A%20false%2C%0A%20%22sanitize%22%3A%20false%2C%0A%20%22sanitizer%22%3A%20null%2C%0A%20%22silent%22%3A%20false%2C%0A%20%22smartLists%22%3A%20false%2C%0A%20%22smartypants%22%3A%20false%2C%0A%20%22tokenizer%22%3A%20null%2C%0A%20%22walkTokens%22%3A%20null%2C%0A%20%22xhtml%22%3A%20false%0A%7D&version=master) is the demo page with examples.\\r\\n\\r\\nI don't mind creating a pull request, but I'd love any pointers as to where this problem lies.\\n\\n</issue>\\n\\n<code>\\n[start of README.md]\\n<a href=\\\"https://marked.js.org\\\">\\n  <img width=\\\"60px\\\" height=\\\"60px\\\" src=\\\"https://marked.js.org/img/logo-black.svg\\\" align=\\\"right\\\" />\\n</a>\\n\\n# Marked\\n\\n[![npm](https://badgen.net/npm/v/marked)](https://www.npmjs.com/package/marked)\\n[![gzip size](https://badgen.net/badgesize/gzip/https://cdn.jsdelivr.net/npm/marked/marked.min.js)](https://cdn.jsdelivr.net/npm/marked/marked.min.js)\\n[![install size](https://badgen.net/packagephobia/install/marked)](https://packagephobia.now.sh/result?p=marked)\\n[![downloads](https://badgen.net/npm/dt/marked)](https://www.npmjs.com/package/marked)\\n[![dep](https://badgen.net/david/dep/markedjs/marked?label=deps)](https://david-dm.org/markedjs/marked)\\n[![dev dep](https://badgen.net/david/dev/markedjs/marked?label=devDeps)](https://david-dm.org/markedjs/marked?type=dev)\\n[![github actions](https://github.com/markedjs/marked/workflows/Tests/badge.svg)](https://github.com/markedjs/marked/actions)\\n[![snyk](https://snyk.io/test/npm/marked/badge.svg)](https://snyk.io/test/npm/marked)\\n\\n- \\u26a1 built for speed\\n- \\u2b07\\ufe0f low-level compiler for parsing markdown without caching or blocking for long periods of time\\n- \\u2696\\ufe0f light-weight while implementing all markdown features from the supported flavors & specifications\\n- \\ud83c\\udf10 works in a browser, on a server, or from a command line interface (CLI)\\n\\n## Demo\\n\\nCheckout the [demo page](https://marked.js.org/demo/) to see marked in action \\u26f9\\ufe0f\\n\\n## Docs\\n\\nOur [documentation pages](https://marked.js.org) are also rendered using marked \\ud83d\\udcaf\\n\\nAlso read about:\\n\\n* [Options](https://marked.js.org/#/USING_ADVANCED.md)\\n* [Extensibility](https://marked.js.org/#/USING_PRO.md)\\n\\n## Installation\\n\\n**CLI:** `npm install -g marked`\\n\\n**In-browser:** `npm install marked`\\n\\n## Usage\\n\\n### Warning: \\ud83d\\udea8 Marked does not [sanitize](https://marked.js.org/#/USING_ADVANCED.md#options) the output HTML. Please use a sanitize library, like [DOMPurify](https://github.com/cure53/DOMPurify) (recommended), [sanitize-html](https://github.com/apostrophecms/sanitize-html) or [insane](https://github.com/bevacqua/insane) on the output HTML! \\ud83d\\udea8\\n\\n**CLI**\\n\\n``` bash\\n$ marked -o hello.html\\nhello world\\n^D\\n$ cat hello.html\\n<p>hello world</p>\\n```\\n\\n**Browser**\\n\\n```html\\n<!doctype html>\\n<html>\\n<head>\\n  <meta charset=\\\"utf-8\\\"/>\\n  <title>Marked in the browser</title>\\n</head>\\n<body>\\n  <div id=\\\"content\\\"></div>\\n  <script src=\\\"https://cdn.jsdelivr.net/npm/marked/marked.min.js\\\"></script>\\n  <script>\\n    document.getElementById('content').innerHTML =\\n      marked('# Marked in the browser\\\\n\\\\nRendered by **marked**.');\\n  </script>\\n</body>\\n</html>\\n```\\n\\n## License\\n\\nCopyright (c) 2011-2018, Christopher Jeffrey. (MIT License)\\n\\n[end of README.md]\\n[start of Bug_report.md]\\n---\\nname: Bug report\\nabout: Marked says it does this thing but does not\\n\\n---\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior:\\n\\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\\n<!--\\n1. [Marked Demo](https://marked.js.org/demo/)\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\\n-->\\n\\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\\n<!--\\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\\n3. Actual output (or error) is...\\n-->\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n[end of Bug_report.md]\\n[start of marked-spec.js]\\nconst marked = require('../../src/marked.js');\\n\\ndescribe('Test heading ID functionality', () => {\\n  it('should add id attribute by default', () => {\\n    const renderer = new marked.Renderer();\\n    const slugger = new marked.Slugger();\\n    const header = renderer.heading('test', 1, 'test', slugger);\\n    expect(header).toBe('<h1 id=\\\"test\\\">test</h1>\\\\n');\\n  });\\n\\n  it('should NOT add id attribute when options set false', () => {\\n    const renderer = new marked.Renderer({ headerIds: false });\\n    const header = renderer.heading('test', 1, 'test');\\n    expect(header).toBe('<h1>test</h1>\\\\n');\\n  });\\n});\\n\\ndescribe('Test slugger functionality', () => {\\n  it('should use lowercase slug', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('Test')).toBe('test');\\n  });\\n\\n  it('should be unique to avoid collisions 1280', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('test')).toBe('test');\\n    expect(slugger.slug('test')).toBe('test-1');\\n    expect(slugger.slug('test')).toBe('test-2');\\n  });\\n\\n  it('should be unique when slug ends with number', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('test 1')).toBe('test-1');\\n    expect(slugger.slug('test')).toBe('test');\\n    expect(slugger.slug('test')).toBe('test-2');\\n  });\\n\\n  it('should be unique when slug ends with hyphen number', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('foo')).toBe('foo');\\n    expect(slugger.slug('foo')).toBe('foo-1');\\n    expect(slugger.slug('foo 1')).toBe('foo-1-1');\\n    expect(slugger.slug('foo-1')).toBe('foo-1-2');\\n    expect(slugger.slug('foo')).toBe('foo-2');\\n  });\\n\\n  it('should allow non-latin chars', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('\\u043f\\u0440\\u0438\\u0432\\u0435\\u0442')).toBe('\\u043f\\u0440\\u0438\\u0432\\u0435\\u0442');\\n  });\\n\\n  it('should remove ampersands 857', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('This & That Section')).toBe('this--that-section');\\n  });\\n\\n  it('should remove periods', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('file.txt')).toBe('filetxt');\\n  });\\n\\n  it('should remove html tags', () => {\\n    const slugger = new marked.Slugger();\\n    expect(slugger.slug('<em>html</em>')).toBe('html');\\n  });\\n});\\n\\ndescribe('Test paragraph token type', () => {\\n  it('should use the \\\"paragraph\\\" type on top level', () => {\\n    const md = 'A Paragraph.\\\\n\\\\n> A blockquote\\\\n\\\\n- list item\\\\n';\\n\\n    const tokens = marked.lexer(md);\\n\\n    expect(tokens[0].type).toBe('paragraph');\\n    expect(tokens[2].tokens[0].type).toBe('paragraph');\\n    expect(tokens[3].items[0].tokens[0].type).toBe('text');\\n  });\\n});\\n\\ndescribe('changeDefaults', () => {\\n  it('should change global defaults', () => {\\n    const { defaults, changeDefaults } = require('../../src/defaults');\\n    expect(defaults.test).toBeUndefined();\\n    changeDefaults({ test: true });\\n    expect(require('../../src/defaults').defaults.test).toBe(true);\\n  });\\n});\\n\\ndescribe('inlineLexer', () => {\\n  it('should send html to renderer.html', () => {\\n    const renderer = new marked.Renderer();\\n    spyOn(renderer, 'html').and.callThrough();\\n    const md = 'HTML Image: <img alt=\\\"MY IMAGE\\\" src=\\\"example.png\\\" />';\\n    marked(md, { renderer });\\n\\n    expect(renderer.html).toHaveBeenCalledWith('<img alt=\\\"MY IMAGE\\\" src=\\\"example.png\\\" />');\\n  });\\n});\\n\\ndescribe('use extension', () => {\\n  it('should use renderer', () => {\\n    const extension = {\\n      renderer: {\\n        paragraph(text) {\\n          return 'extension';\\n        }\\n      }\\n    };\\n    spyOn(extension.renderer, 'paragraph').and.callThrough();\\n    marked.use(extension);\\n    const html = marked('text');\\n    expect(extension.renderer.paragraph).toHaveBeenCalledWith('text');\\n    expect(html).toBe('extension');\\n  });\\n\\n  it('should use tokenizer', () => {\\n    const extension = {\\n      tokenizer: {\\n        paragraph(text) {\\n          return {\\n            type: 'paragraph',\\n            raw: text,\\n            text: 'extension'\\n          };\\n        }\\n      }\\n    };\\n    spyOn(extension.tokenizer, 'paragraph').and.callThrough();\\n    marked.use(extension);\\n    const html = marked('text');\\n    expect(extension.tokenizer.paragraph).toHaveBeenCalledWith('text');\\n    expect(html).toBe('<p>extension</p>\\\\n');\\n  });\\n\\n  it('should use walkTokens', () => {\\n    let walked = 0;\\n    const extension = {\\n      walkTokens(token) {\\n        walked++;\\n      }\\n    };\\n    marked.use(extension);\\n    marked('text');\\n    expect(walked).toBe(2);\\n  });\\n\\n  it('should use options from extension', () => {\\n    const extension = {\\n      headerIds: false\\n    };\\n    marked.use(extension);\\n    const html = marked('# heading');\\n    expect(html).toBe('<h1>heading</h1>\\\\n');\\n  });\\n\\n  it('should call all walkTokens in reverse order', () => {\\n    let walkedOnce = 0;\\n    let walkedTwice = 0;\\n    const extension1 = {\\n      walkTokens(token) {\\n        if (token.walkedOnce) {\\n          walkedTwice++;\\n        }\\n      }\\n    };\\n    const extension2 = {\\n      walkTokens(token) {\\n        walkedOnce++;\\n        token.walkedOnce = true;\\n      }\\n    };\\n    marked.use(extension1);\\n    marked.use(extension2);\\n    marked('text');\\n    expect(walkedOnce).toBe(2);\\n    expect(walkedTwice).toBe(2);\\n  });\\n\\n  it('should use last extension function and not override others', () => {\\n    const extension1 = {\\n      renderer: {\\n        paragraph(text) {\\n          return 'extension1 paragraph\\\\n';\\n        },\\n        html(html) {\\n          return 'extension1 html\\\\n';\\n        }\\n      }\\n    };\\n    const extension2 = {\\n      renderer: {\\n        paragraph(text) {\\n          return 'extension2 paragraph\\\\n';\\n        }\\n      }\\n    };\\n    marked.use(extension1);\\n    marked.use(extension2);\\n    const html = marked(`\\nparagraph\\n\\n<html />\\n\\n# heading\\n`);\\n    expect(html).toBe('extension2 paragraph\\\\nextension1 html\\\\n<h1 id=\\\"heading\\\">heading</h1>\\\\n');\\n  });\\n\\n  it('should use previous extension when returning false', () => {\\n    const extension1 = {\\n      renderer: {\\n        paragraph(text) {\\n          if (text !== 'original') {\\n            return 'extension1 paragraph\\\\n';\\n          }\\n          return false;\\n        }\\n      }\\n    };\\n    const extension2 = {\\n      renderer: {\\n        paragraph(text) {\\n          if (text !== 'extension1' && text !== 'original') {\\n            return 'extension2 paragraph\\\\n';\\n          }\\n          return false;\\n        }\\n      }\\n    };\\n    marked.use(extension1);\\n    marked.use(extension2);\\n    const html = marked(`\\nparagraph\\n\\nextension1\\n\\noriginal\\n`);\\n    expect(html).toBe('extension2 paragraph\\\\nextension1 paragraph\\\\n<p>original</p>\\\\n');\\n  });\\n\\n  it('should get options with this.options', () => {\\n    const extension = {\\n      renderer: {\\n        heading: () => {\\n          return this.options ? 'arrow options\\\\n' : 'arrow no options\\\\n';\\n        },\\n        html: function() {\\n          return this.options ? 'function options\\\\n' : 'function no options\\\\n';\\n        },\\n        paragraph() {\\n          return this.options ? 'shorthand options\\\\n' : 'shorthand no options\\\\n';\\n        }\\n      }\\n    };\\n    marked.use(extension);\\n    const html = marked(`\\n# heading\\n\\n<html />\\n\\nparagraph\\n`);\\n    expect(html).toBe('arrow no options\\\\nfunction options\\\\nshorthand options\\\\n');\\n  });\\n});\\n\\ndescribe('async highlight', () => {\\n  let highlight, markdown;\\n  beforeEach(() => {\\n    highlight = jasmine.createSpy('highlight', (text, lang, callback) => {\\n      setImmediate(() => {\\n        callback(null, `async ${text || ''}`);\\n      });\\n    });\\n    markdown = `\\n\\\\`\\\\`\\\\`lang1\\ntext 1\\n\\\\`\\\\`\\\\`\\n\\n> \\\\`\\\\`\\\\`lang2\\n> text 2\\n> \\\\`\\\\`\\\\`\\n\\n- \\\\`\\\\`\\\\`lang3\\n  text 3\\n  \\\\`\\\\`\\\\`\\n`;\\n  });\\n\\n  it('should highlight codeblocks async', (done) => {\\n    highlight.and.callThrough();\\n\\n    marked(markdown, { highlight }, (err, html) => {\\n      if (err) {\\n        fail(err);\\n      }\\n\\n      expect(html).toBe(`<pre><code class=\\\"language-lang1\\\">async text 1</code></pre>\\n<blockquote>\\n<pre><code class=\\\"language-lang2\\\">async text 2</code></pre>\\n</blockquote>\\n<ul>\\n<li><pre><code class=\\\"language-lang3\\\">async text 3</code></pre>\\n</li>\\n</ul>\\n`);\\n      done();\\n    });\\n  });\\n\\n  it('should call callback for each error in highlight', (done) => {\\n    highlight.and.callFake((lang, text, callback) => {\\n      callback(new Error('highlight error'));\\n    });\\n\\n    let numErrors = 0;\\n    marked(markdown, { highlight }, (err, html) => {\\n      expect(err).toBeTruthy();\\n      expect(html).toBeUndefined();\\n\\n      if (err) {\\n        numErrors++;\\n      }\\n\\n      if (numErrors === 3) {\\n        done();\\n      }\\n    });\\n  });\\n});\\n\\ndescribe('walkTokens', () => {\\n  it('should walk over every token', () => {\\n    const markdown = `\\nparagraph\\n\\n---\\n\\n# heading\\n\\n\\\\`\\\\`\\\\`\\ncode\\n\\\\`\\\\`\\\\`\\n\\n| a | b |\\n|---|---|\\n| 1 | 2 |\\n| 3 | 4 |\\n\\n> blockquote\\n\\n- list\\n\\n<div>html</div>\\n\\n[link](https://example.com)\\n\\n![image](https://example.com/image.jpg)\\n\\n**strong**\\n\\n*em*\\n\\n\\\\`codespan\\\\`\\n\\n~~del~~\\n\\nbr\\nbr\\n`;\\n    const tokens = marked.lexer(markdown, { ...marked.getDefaults(), breaks: true });\\n    const tokensSeen = [];\\n    marked.walkTokens(tokens, (token) => {\\n      tokensSeen.push([token.type, (token.raw || '').replace(/\\\\n/g, '')]);\\n    });\\n\\n    expect(tokensSeen).toEqual([\\n      ['paragraph', 'paragraph'],\\n      ['text', 'paragraph'],\\n      ['space', ''],\\n      ['hr', '---'],\\n      ['heading', '# heading'],\\n      ['text', 'heading'],\\n      ['code', '```code```'],\\n      ['table', '| a | b ||---|---|| 1 | 2 || 3 | 4 |'],\\n      ['text', 'a'],\\n      ['text', 'b'],\\n      ['text', '1'],\\n      ['text', '2'],\\n      ['text', '3'],\\n      ['text', '4'],\\n      ['blockquote', '> blockquote'],\\n      ['paragraph', 'blockquote'],\\n      ['text', 'blockquote'],\\n      ['list', '- list'],\\n      ['list_item', '- list'],\\n      ['text', 'list'],\\n      ['text', 'list'],\\n      ['space', ''],\\n      ['html', '<div>html</div>'],\\n      ['paragraph', '[link](https://example.com)'],\\n      ['link', '[link](https://example.com)'],\\n      ['text', 'link'],\\n      ['space', ''],\\n      ['paragraph', '![image](https://example.com/image.jpg)'],\\n      ['image', '![image](https://example.com/image.jpg)'],\\n      ['space', ''],\\n      ['paragraph', '**strong**'],\\n      ['strong', '**strong**'],\\n      ['text', 'strong'],\\n      ['space', ''],\\n      ['paragraph', '*em*'],\\n      ['em', '*em*'],\\n      ['text', 'em'],\\n      ['space', ''],\\n      ['paragraph', '`codespan`'],\\n      ['codespan', '`codespan`'],\\n      ['space', ''],\\n      ['paragraph', '~~del~~'],\\n      ['del', '~~del~~'],\\n      ['text', 'del'],\\n      ['space', ''],\\n      ['paragraph', 'brbr'],\\n      ['text', 'br'],\\n      ['br', ''],\\n      ['text', 'br']\\n    ]);\\n  });\\n});\\n\\n[end of marked-spec.js]\\n[start of marked.esm.js]\\n/**\\n * marked - a markdown parser\\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n\\n/**\\n * DO NOT EDIT THIS FILE\\n * The code in this file is generated from files in ./src/\\n */\\n\\nfunction createCommonjsModule(fn, module) {\\n\\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\\n}\\n\\nvar defaults = createCommonjsModule(function (module) {\\nfunction getDefaults() {\\n  return {\\n    baseUrl: null,\\n    breaks: false,\\n    gfm: true,\\n    headerIds: true,\\n    headerPrefix: '',\\n    highlight: null,\\n    langPrefix: 'language-',\\n    mangle: true,\\n    pedantic: false,\\n    renderer: null,\\n    sanitize: false,\\n    sanitizer: null,\\n    silent: false,\\n    smartLists: false,\\n    smartypants: false,\\n    tokenizer: null,\\n    walkTokens: null,\\n    xhtml: false\\n  };\\n}\\n\\nfunction changeDefaults(newDefaults) {\\n  module.exports.defaults = newDefaults;\\n}\\n\\nmodule.exports = {\\n  defaults: getDefaults(),\\n  getDefaults,\\n  changeDefaults\\n};\\n});\\nvar defaults_1 = defaults.defaults;\\nvar defaults_2 = defaults.getDefaults;\\nvar defaults_3 = defaults.changeDefaults;\\n\\n/**\\n * Helpers\\n */\\nconst escapeTest = /[&<>\\\"']/;\\nconst escapeReplace = /[&<>\\\"']/g;\\nconst escapeTestNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/;\\nconst escapeReplaceNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/g;\\nconst escapeReplacements = {\\n  '&': '&amp;',\\n  '<': '&lt;',\\n  '>': '&gt;',\\n  '\\\"': '&quot;',\\n  \\\"'\\\": '&#39;'\\n};\\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\\nfunction escape(html, encode) {\\n  if (encode) {\\n    if (escapeTest.test(html)) {\\n      return html.replace(escapeReplace, getEscapeReplacement);\\n    }\\n  } else {\\n    if (escapeTestNoEncode.test(html)) {\\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\\n    }\\n  }\\n\\n  return html;\\n}\\n\\nconst unescapeTest = /&(#(?:\\\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\\\w+));?/ig;\\n\\nfunction unescape(html) {\\n  // explicitly match decimal, hex, and named HTML entities\\n  return html.replace(unescapeTest, (_, n) => {\\n    n = n.toLowerCase();\\n    if (n === 'colon') return ':';\\n    if (n.charAt(0) === '#') {\\n      return n.charAt(1) === 'x'\\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\\n        : String.fromCharCode(+n.substring(1));\\n    }\\n    return '';\\n  });\\n}\\n\\nconst caret = /(^|[^\\\\[])\\\\^/g;\\nfunction edit(regex, opt) {\\n  regex = regex.source || regex;\\n  opt = opt || '';\\n  const obj = {\\n    replace: (name, val) => {\\n      val = val.source || val;\\n      val = val.replace(caret, '$1');\\n      regex = regex.replace(name, val);\\n      return obj;\\n    },\\n    getRegex: () => {\\n      return new RegExp(regex, opt);\\n    }\\n  };\\n  return obj;\\n}\\n\\nconst nonWordAndColonTest = /[^\\\\w:]/g;\\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\\nfunction cleanUrl(sanitize, base, href) {\\n  if (sanitize) {\\n    let prot;\\n    try {\\n      prot = decodeURIComponent(unescape(href))\\n        .replace(nonWordAndColonTest, '')\\n        .toLowerCase();\\n    } catch (e) {\\n      return null;\\n    }\\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\\n      return null;\\n    }\\n  }\\n  if (base && !originIndependentUrl.test(href)) {\\n    href = resolveUrl(base, href);\\n  }\\n  try {\\n    href = encodeURI(href).replace(/%25/g, '%');\\n  } catch (e) {\\n    return null;\\n  }\\n  return href;\\n}\\n\\nconst baseUrls = {};\\nconst justDomain = /^[^:]+:\\\\/*[^/]*$/;\\nconst protocol = /^([^:]+:)[\\\\s\\\\S]*$/;\\nconst domain = /^([^:]+:\\\\/*[^/]*)[\\\\s\\\\S]*$/;\\n\\nfunction resolveUrl(base, href) {\\n  if (!baseUrls[' ' + base]) {\\n    // we can ignore everything in base after the last slash of its path component,\\n    // but we might need to add _that_\\n    // https://tools.ietf.org/html/rfc3986#section-3\\n    if (justDomain.test(base)) {\\n      baseUrls[' ' + base] = base + '/';\\n    } else {\\n      baseUrls[' ' + base] = rtrim(base, '/', true);\\n    }\\n  }\\n  base = baseUrls[' ' + base];\\n  const relativeBase = base.indexOf(':') === -1;\\n\\n  if (href.substring(0, 2) === '//') {\\n    if (relativeBase) {\\n      return href;\\n    }\\n    return base.replace(protocol, '$1') + href;\\n  } else if (href.charAt(0) === '/') {\\n    if (relativeBase) {\\n      return href;\\n    }\\n    return base.replace(domain, '$1') + href;\\n  } else {\\n    return base + href;\\n  }\\n}\\n\\nconst noopTest = { exec: function noopTest() {} };\\n\\nfunction merge(obj) {\\n  let i = 1,\\n    target,\\n    key;\\n\\n  for (; i < arguments.length; i++) {\\n    target = arguments[i];\\n    for (key in target) {\\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\\n        obj[key] = target[key];\\n      }\\n    }\\n  }\\n\\n  return obj;\\n}\\n\\nfunction splitCells(tableRow, count) {\\n  // ensure that every cell-delimiting pipe has a space\\n  // before it to distinguish it from an escaped pipe\\n  const row = tableRow.replace(/\\\\|/g, (match, offset, str) => {\\n      let escaped = false,\\n        curr = offset;\\n      while (--curr >= 0 && str[curr] === '\\\\\\\\') escaped = !escaped;\\n      if (escaped) {\\n        // odd number of slashes means | is escaped\\n        // so we leave it alone\\n        return '|';\\n      } else {\\n        // add space before unescaped |\\n        return ' |';\\n      }\\n    }),\\n    cells = row.split(/ \\\\|/);\\n  let i = 0;\\n\\n  if (cells.length > count) {\\n    cells.splice(count);\\n  } else {\\n    while (cells.length < count) cells.push('');\\n  }\\n\\n  for (; i < cells.length; i++) {\\n    // leading or trailing whitespace is ignored per the gfm spec\\n    cells[i] = cells[i].trim().replace(/\\\\\\\\\\\\|/g, '|');\\n  }\\n  return cells;\\n}\\n\\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\\n// /c*$/ is vulnerable to REDOS.\\n// invert: Remove suffix of non-c chars instead. Default falsey.\\nfunction rtrim(str, c, invert) {\\n  const l = str.length;\\n  if (l === 0) {\\n    return '';\\n  }\\n\\n  // Length of suffix matching the invert condition.\\n  let suffLen = 0;\\n\\n  // Step left until we fail to match the invert condition.\\n  while (suffLen < l) {\\n    const currChar = str.charAt(l - suffLen - 1);\\n    if (currChar === c && !invert) {\\n      suffLen++;\\n    } else if (currChar !== c && invert) {\\n      suffLen++;\\n    } else {\\n      break;\\n    }\\n  }\\n\\n  return str.substr(0, l - suffLen);\\n}\\n\\nfunction findClosingBracket(str, b) {\\n  if (str.indexOf(b[1]) === -1) {\\n    return -1;\\n  }\\n  const l = str.length;\\n  let level = 0,\\n    i = 0;\\n  for (; i < l; i++) {\\n    if (str[i] === '\\\\\\\\') {\\n      i++;\\n    } else if (str[i] === b[0]) {\\n      level++;\\n    } else if (str[i] === b[1]) {\\n      level--;\\n      if (level < 0) {\\n        return i;\\n      }\\n    }\\n  }\\n  return -1;\\n}\\n\\nfunction checkSanitizeDeprecation(opt) {\\n  if (opt && opt.sanitize && !opt.silent) {\\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\\n  }\\n}\\n\\nvar helpers = {\\n  escape,\\n  unescape,\\n  edit,\\n  cleanUrl,\\n  resolveUrl,\\n  noopTest,\\n  merge,\\n  splitCells,\\n  rtrim,\\n  findClosingBracket,\\n  checkSanitizeDeprecation\\n};\\n\\nconst { defaults: defaults$1 } = defaults;\\nconst {\\n  rtrim: rtrim$1,\\n  splitCells: splitCells$1,\\n  escape: escape$1,\\n  findClosingBracket: findClosingBracket$1\\n} = helpers;\\n\\nfunction outputLink(cap, link, raw) {\\n  const href = link.href;\\n  const title = link.title ? escape$1(link.title) : null;\\n\\n  if (cap[0].charAt(0) !== '!') {\\n    return {\\n      type: 'link',\\n      raw,\\n      href,\\n      title,\\n      text: cap[1]\\n    };\\n  } else {\\n    return {\\n      type: 'image',\\n      raw,\\n      text: escape$1(cap[1]),\\n      href,\\n      title\\n    };\\n  }\\n}\\n\\nfunction indentCodeCompensation(raw, text) {\\n  const matchIndentToCode = raw.match(/^(\\\\s+)(?:```)/);\\n\\n  if (matchIndentToCode === null) {\\n    return text;\\n  }\\n\\n  const indentToCode = matchIndentToCode[1];\\n\\n  return text\\n    .split('\\\\n')\\n    .map(node => {\\n      const matchIndentInNode = node.match(/^\\\\s+/);\\n      if (matchIndentInNode === null) {\\n        return node;\\n      }\\n\\n      const [indentInNode] = matchIndentInNode;\\n\\n      if (indentInNode.length >= indentToCode.length) {\\n        return node.slice(indentToCode.length);\\n      }\\n\\n      return node;\\n    })\\n    .join('\\\\n');\\n}\\n\\n/**\\n * Tokenizer\\n */\\nvar Tokenizer_1 = class Tokenizer {\\n  constructor(options) {\\n    this.options = options || defaults$1;\\n  }\\n\\n  space(src) {\\n    const cap = this.rules.block.newline.exec(src);\\n    if (cap) {\\n      if (cap[0].length > 1) {\\n        return {\\n          type: 'space',\\n          raw: cap[0]\\n        };\\n      }\\n      return { raw: '\\\\n' };\\n    }\\n  }\\n\\n  code(src, tokens) {\\n    const cap = this.rules.block.code.exec(src);\\n    if (cap) {\\n      const lastToken = tokens[tokens.length - 1];\\n      // An indented code block cannot interrupt a paragraph.\\n      if (lastToken && lastToken.type === 'paragraph') {\\n        return {\\n          raw: cap[0],\\n          text: cap[0].trimRight()\\n        };\\n      }\\n\\n      const text = cap[0].replace(/^ {4}/gm, '');\\n      return {\\n        type: 'code',\\n        raw: cap[0],\\n        codeBlockStyle: 'indented',\\n        text: !this.options.pedantic\\n          ? rtrim$1(text, '\\\\n')\\n          : text\\n      };\\n    }\\n  }\\n\\n  fences(src) {\\n    const cap = this.rules.block.fences.exec(src);\\n    if (cap) {\\n      const raw = cap[0];\\n      const text = indentCodeCompensation(raw, cap[3] || '');\\n\\n      return {\\n        type: 'code',\\n        raw,\\n        lang: cap[2] ? cap[2].trim() : cap[2],\\n        text\\n      };\\n    }\\n  }\\n\\n  heading(src) {\\n    const cap = this.rules.block.heading.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[1].length,\\n        text: cap[2]\\n      };\\n    }\\n  }\\n\\n  nptable(src) {\\n    const cap = this.rules.block.nptable.exec(src);\\n    if (cap) {\\n      const item = {\\n        type: 'table',\\n        header: splitCells$1(cap[1].replace(/^ *| *\\\\| *$/g, '')),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        cells: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : [],\\n        raw: cap[0]\\n      };\\n\\n      if (item.header.length === item.align.length) {\\n        let l = item.align.length;\\n        let i;\\n        for (i = 0; i < l; i++) {\\n          if (/^ *-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'right';\\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'center';\\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\\n            item.align[i] = 'left';\\n          } else {\\n            item.align[i] = null;\\n          }\\n        }\\n\\n        l = item.cells.length;\\n        for (i = 0; i < l; i++) {\\n          item.cells[i] = splitCells$1(item.cells[i], item.header.length);\\n        }\\n\\n        return item;\\n      }\\n    }\\n  }\\n\\n  hr(src) {\\n    const cap = this.rules.block.hr.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'hr',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  blockquote(src) {\\n    const cap = this.rules.block.blockquote.exec(src);\\n    if (cap) {\\n      const text = cap[0].replace(/^ *> ?/gm, '');\\n\\n      return {\\n        type: 'blockquote',\\n        raw: cap[0],\\n        text\\n      };\\n    }\\n  }\\n\\n  list(src) {\\n    const cap = this.rules.block.list.exec(src);\\n    if (cap) {\\n      let raw = cap[0];\\n      const bull = cap[2];\\n      const isordered = bull.length > 1;\\n\\n      const list = {\\n        type: 'list',\\n        raw,\\n        ordered: isordered,\\n        start: isordered ? +bull : '',\\n        loose: false,\\n        items: []\\n      };\\n\\n      // Get each top-level item.\\n      const itemMatch = cap[0].match(this.rules.block.item);\\n\\n      let next = false,\\n        item,\\n        space,\\n        b,\\n        addBack,\\n        loose,\\n        istask,\\n        ischecked;\\n\\n      const l = itemMatch.length;\\n      for (let i = 0; i < l; i++) {\\n        item = itemMatch[i];\\n        raw = item;\\n\\n        // Remove the list item's bullet\\n        // so it is seen as the next token.\\n        space = item.length;\\n        item = item.replace(/^ *([*+-]|\\\\d+\\\\.) */, '');\\n\\n        // Outdent whatever the\\n        // list item contains. Hacky.\\n        if (~item.indexOf('\\\\n ')) {\\n          space -= item.length;\\n          item = !this.options.pedantic\\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\\n            : item.replace(/^ {1,4}/gm, '');\\n        }\\n\\n        // Determine whether the next list item belongs here.\\n        // Backpedal if it does not belong in this list.\\n        if (i !== l - 1) {\\n          b = this.rules.block.bullet.exec(itemMatch[i + 1])[0];\\n          if (bull.length > 1 ? b.length === 1\\n            : (b.length > 1 || (this.options.smartLists && b !== bull))) {\\n            addBack = itemMatch.slice(i + 1).join('\\\\n');\\n            list.raw = list.raw.substring(0, list.raw.length - addBack.length);\\n            i = l - 1;\\n          }\\n        }\\n\\n        // Determine whether item is loose or not.\\n        // Use: /(^|\\\\n)(?! )[^\\\\n]+\\\\n\\\\n(?!\\\\s*$)/\\n        // for discount behavior.\\n        loose = next || /\\\\n\\\\n(?!\\\\s*$)/.test(item);\\n        if (i !== l - 1) {\\n          next = item.charAt(item.length - 1) === '\\\\n';\\n          if (!loose) loose = next;\\n        }\\n\\n        if (loose) {\\n          list.loose = true;\\n        }\\n\\n        // Check for task list items\\n        istask = /^\\\\[[ xX]\\\\] /.test(item);\\n        ischecked = undefined;\\n        if (istask) {\\n          ischecked = item[1] !== ' ';\\n          item = item.replace(/^\\\\[[ xX]\\\\] +/, '');\\n        }\\n\\n        list.items.push({\\n          type: 'list_item',\\n          raw,\\n          task: istask,\\n          checked: ischecked,\\n          loose: loose,\\n          text: item\\n        });\\n      }\\n\\n      return list;\\n    }\\n  }\\n\\n  html(src) {\\n    const cap = this.rules.block.html.exec(src);\\n    if (cap) {\\n      return {\\n        type: this.options.sanitize\\n          ? 'paragraph'\\n          : 'html',\\n        raw: cap[0],\\n        pre: !this.options.sanitizer\\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\\n        text: this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape$1(cap[0])) : cap[0]\\n      };\\n    }\\n  }\\n\\n  def(src) {\\n    const cap = this.rules.block.def.exec(src);\\n    if (cap) {\\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\\n      const tag = cap[1].toLowerCase().replace(/\\\\s+/g, ' ');\\n      return {\\n        tag,\\n        raw: cap[0],\\n        href: cap[2],\\n        title: cap[3]\\n      };\\n    }\\n  }\\n\\n  table(src) {\\n    const cap = this.rules.block.table.exec(src);\\n    if (cap) {\\n      const item = {\\n        type: 'table',\\n        header: splitCells$1(cap[1].replace(/^ *| *\\\\| *$/g, '')),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        cells: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : []\\n      };\\n\\n      if (item.header.length === item.align.length) {\\n        item.raw = cap[0];\\n\\n        let l = item.align.length;\\n        let i;\\n        for (i = 0; i < l; i++) {\\n          if (/^ *-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'right';\\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'center';\\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\\n            item.align[i] = 'left';\\n          } else {\\n            item.align[i] = null;\\n          }\\n        }\\n\\n        l = item.cells.length;\\n        for (i = 0; i < l; i++) {\\n          item.cells[i] = splitCells$1(\\n            item.cells[i].replace(/^ *\\\\| *| *\\\\| *$/g, ''),\\n            item.header.length);\\n        }\\n\\n        return item;\\n      }\\n    }\\n  }\\n\\n  lheading(src) {\\n    const cap = this.rules.block.lheading.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\\n        text: cap[1]\\n      };\\n    }\\n  }\\n\\n  paragraph(src) {\\n    const cap = this.rules.block.paragraph.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'paragraph',\\n        raw: cap[0],\\n        text: cap[1].charAt(cap[1].length - 1) === '\\\\n'\\n          ? cap[1].slice(0, -1)\\n          : cap[1]\\n      };\\n    }\\n  }\\n\\n  text(src, tokens) {\\n    const cap = this.rules.block.text.exec(src);\\n    if (cap) {\\n      const lastToken = tokens[tokens.length - 1];\\n      if (lastToken && lastToken.type === 'text') {\\n        return {\\n          raw: cap[0],\\n          text: cap[0]\\n        };\\n      }\\n\\n      return {\\n        type: 'text',\\n        raw: cap[0],\\n        text: cap[0]\\n      };\\n    }\\n  }\\n\\n  escape(src) {\\n    const cap = this.rules.inline.escape.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'escape',\\n        raw: cap[0],\\n        text: escape$1(cap[1])\\n      };\\n    }\\n  }\\n\\n  tag(src, inLink, inRawBlock) {\\n    const cap = this.rules.inline.tag.exec(src);\\n    if (cap) {\\n      if (!inLink && /^<a /i.test(cap[0])) {\\n        inLink = true;\\n      } else if (inLink && /^<\\\\/a>/i.test(cap[0])) {\\n        inLink = false;\\n      }\\n      if (!inRawBlock && /^<(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        inRawBlock = true;\\n      } else if (inRawBlock && /^<\\\\/(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        inRawBlock = false;\\n      }\\n\\n      return {\\n        type: this.options.sanitize\\n          ? 'text'\\n          : 'html',\\n        raw: cap[0],\\n        inLink,\\n        inRawBlock,\\n        text: this.options.sanitize\\n          ? (this.options.sanitizer\\n            ? this.options.sanitizer(cap[0])\\n            : escape$1(cap[0]))\\n          : cap[0]\\n      };\\n    }\\n  }\\n\\n  link(src) {\\n    const cap = this.rules.inline.link.exec(src);\\n    if (cap) {\\n      const lastParenIndex = findClosingBracket$1(cap[2], '()');\\n      if (lastParenIndex > -1) {\\n        const start = cap[0].indexOf('!') === 0 ? 5 : 4;\\n        const linkLen = start + cap[1].length + lastParenIndex;\\n        cap[2] = cap[2].substring(0, lastParenIndex);\\n        cap[0] = cap[0].substring(0, linkLen).trim();\\n        cap[3] = '';\\n      }\\n      let href = cap[2];\\n      let title = '';\\n      if (this.options.pedantic) {\\n        const link = /^([^'\\\"]*[^\\\\s])\\\\s+(['\\\"])(.*)\\\\2/.exec(href);\\n\\n        if (link) {\\n          href = link[1];\\n          title = link[3];\\n        } else {\\n          title = '';\\n        }\\n      } else {\\n        title = cap[3] ? cap[3].slice(1, -1) : '';\\n      }\\n      href = href.trim().replace(/^<([\\\\s\\\\S]*)>$/, '$1');\\n      const token = outputLink(cap, {\\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\\n      }, cap[0]);\\n      return token;\\n    }\\n  }\\n\\n  reflink(src, links) {\\n    let cap;\\n    if ((cap = this.rules.inline.reflink.exec(src))\\n        || (cap = this.rules.inline.nolink.exec(src))) {\\n      let link = (cap[2] || cap[1]).replace(/\\\\s+/g, ' ');\\n      link = links[link.toLowerCase()];\\n      if (!link || !link.href) {\\n        const text = cap[0].charAt(0);\\n        return {\\n          type: 'text',\\n          raw: text,\\n          text\\n        };\\n      }\\n      const token = outputLink(cap, link, cap[0]);\\n      return token;\\n    }\\n  }\\n\\n  strong(src) {\\n    const cap = this.rules.inline.strong.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'strong',\\n        raw: cap[0],\\n        text: cap[4] || cap[3] || cap[2] || cap[1]\\n      };\\n    }\\n  }\\n\\n  em(src) {\\n    const cap = this.rules.inline.em.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'em',\\n        raw: cap[0],\\n        text: cap[6] || cap[5] || cap[4] || cap[3] || cap[2] || cap[1]\\n      };\\n    }\\n  }\\n\\n  codespan(src) {\\n    const cap = this.rules.inline.code.exec(src);\\n    if (cap) {\\n      let text = cap[2].replace(/\\\\n/g, ' ');\\n      const hasNonSpaceChars = /[^ ]/.test(text);\\n      const hasSpaceCharsOnBothEnds = text.startsWith(' ') && text.endsWith(' ');\\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\\n        text = text.substring(1, text.length - 1);\\n      }\\n      text = escape$1(text, true);\\n      return {\\n        type: 'codespan',\\n        raw: cap[0],\\n        text\\n      };\\n    }\\n  }\\n\\n  br(src) {\\n    const cap = this.rules.inline.br.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'br',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  del(src) {\\n    const cap = this.rules.inline.del.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'del',\\n        raw: cap[0],\\n        text: cap[1]\\n      };\\n    }\\n  }\\n\\n  autolink(src, mangle) {\\n    const cap = this.rules.inline.autolink.exec(src);\\n    if (cap) {\\n      let text, href;\\n      if (cap[2] === '@') {\\n        text = escape$1(this.options.mangle ? mangle(cap[1]) : cap[1]);\\n        href = 'mailto:' + text;\\n      } else {\\n        text = escape$1(cap[1]);\\n        href = text;\\n      }\\n\\n      return {\\n        type: 'link',\\n        raw: cap[0],\\n        text,\\n        href,\\n        tokens: [\\n          {\\n            type: 'text',\\n            raw: text,\\n            text\\n          }\\n        ]\\n      };\\n    }\\n  }\\n\\n  url(src, mangle) {\\n    let cap;\\n    if (cap = this.rules.inline.url.exec(src)) {\\n      let text, href;\\n      if (cap[2] === '@') {\\n        text = escape$1(this.options.mangle ? mangle(cap[0]) : cap[0]);\\n        href = 'mailto:' + text;\\n      } else {\\n        // do extended autolink path validation\\n        let prevCapZero;\\n        do {\\n          prevCapZero = cap[0];\\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\\n        } while (prevCapZero !== cap[0]);\\n        text = escape$1(cap[0]);\\n        if (cap[1] === 'www.') {\\n          href = 'http://' + text;\\n        } else {\\n          href = text;\\n        }\\n      }\\n      return {\\n        type: 'link',\\n        raw: cap[0],\\n        text,\\n        href,\\n        tokens: [\\n          {\\n            type: 'text',\\n            raw: text,\\n[end of marked.esm.js]\\n[start of marked.js]\\n/**\\n * marked - a markdown parser\\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n\\n/**\\n * DO NOT EDIT THIS FILE\\n * The code in this file is generated from files in ./src/\\n */\\n\\n(function (global, factory) {\\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\\n  typeof define === 'function' && define.amd ? define(factory) :\\n  (global = global || self, global.marked = factory());\\n}(this, (function () { 'use strict';\\n\\n  function _defineProperties(target, props) {\\n    for (var i = 0; i < props.length; i++) {\\n      var descriptor = props[i];\\n      descriptor.enumerable = descriptor.enumerable || false;\\n      descriptor.configurable = true;\\n      if (\\\"value\\\" in descriptor) descriptor.writable = true;\\n      Object.defineProperty(target, descriptor.key, descriptor);\\n    }\\n  }\\n\\n  function _createClass(Constructor, protoProps, staticProps) {\\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\\n    if (staticProps) _defineProperties(Constructor, staticProps);\\n    return Constructor;\\n  }\\n\\n  function _unsupportedIterableToArray(o, minLen) {\\n    if (!o) return;\\n    if (typeof o === \\\"string\\\") return _arrayLikeToArray(o, minLen);\\n    var n = Object.prototype.toString.call(o).slice(8, -1);\\n    if (n === \\\"Object\\\" && o.constructor) n = o.constructor.name;\\n    if (n === \\\"Map\\\" || n === \\\"Set\\\") return Array.from(o);\\n    if (n === \\\"Arguments\\\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\\n  }\\n\\n  function _arrayLikeToArray(arr, len) {\\n    if (len == null || len > arr.length) len = arr.length;\\n\\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\\n\\n    return arr2;\\n  }\\n\\n  function _createForOfIteratorHelperLoose(o) {\\n    var i = 0;\\n\\n    if (typeof Symbol === \\\"undefined\\\" || o[Symbol.iterator] == null) {\\n      if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) return function () {\\n        if (i >= o.length) return {\\n          done: true\\n        };\\n        return {\\n          done: false,\\n          value: o[i++]\\n        };\\n      };\\n      throw new TypeError(\\\"Invalid attempt to iterate non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\");\\n    }\\n\\n    i = o[Symbol.iterator]();\\n    return i.next.bind(i);\\n  }\\n\\n  function createCommonjsModule(fn, module) {\\n  \\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\\n  }\\n\\n  var defaults = createCommonjsModule(function (module) {\\n    function getDefaults() {\\n      return {\\n        baseUrl: null,\\n        breaks: false,\\n        gfm: true,\\n        headerIds: true,\\n        headerPrefix: '',\\n        highlight: null,\\n        langPrefix: 'language-',\\n        mangle: true,\\n        pedantic: false,\\n        renderer: null,\\n        sanitize: false,\\n        sanitizer: null,\\n        silent: false,\\n        smartLists: false,\\n        smartypants: false,\\n        tokenizer: null,\\n        walkTokens: null,\\n        xhtml: false\\n      };\\n    }\\n\\n    function changeDefaults(newDefaults) {\\n      module.exports.defaults = newDefaults;\\n    }\\n\\n    module.exports = {\\n      defaults: getDefaults(),\\n      getDefaults: getDefaults,\\n      changeDefaults: changeDefaults\\n    };\\n  });\\n  var defaults_1 = defaults.defaults;\\n  var defaults_2 = defaults.getDefaults;\\n  var defaults_3 = defaults.changeDefaults;\\n\\n  /**\\n   * Helpers\\n   */\\n  var escapeTest = /[&<>\\\"']/;\\n  var escapeReplace = /[&<>\\\"']/g;\\n  var escapeTestNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/;\\n  var escapeReplaceNoEncode = /[<>\\\"']|&(?!#?\\\\w+;)/g;\\n  var escapeReplacements = {\\n    '&': '&amp;',\\n    '<': '&lt;',\\n    '>': '&gt;',\\n    '\\\"': '&quot;',\\n    \\\"'\\\": '&#39;'\\n  };\\n\\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\\n    return escapeReplacements[ch];\\n  };\\n\\n  function escape(html, encode) {\\n    if (encode) {\\n      if (escapeTest.test(html)) {\\n        return html.replace(escapeReplace, getEscapeReplacement);\\n      }\\n    } else {\\n      if (escapeTestNoEncode.test(html)) {\\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\\n      }\\n    }\\n\\n    return html;\\n  }\\n\\n  var unescapeTest = /&(#(?:\\\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\\\w+));?/ig;\\n\\n  function unescape(html) {\\n    // explicitly match decimal, hex, and named HTML entities\\n    return html.replace(unescapeTest, function (_, n) {\\n      n = n.toLowerCase();\\n      if (n === 'colon') return ':';\\n\\n      if (n.charAt(0) === '#') {\\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\\n      }\\n\\n      return '';\\n    });\\n  }\\n\\n  var caret = /(^|[^\\\\[])\\\\^/g;\\n\\n  function edit(regex, opt) {\\n    regex = regex.source || regex;\\n    opt = opt || '';\\n    var obj = {\\n      replace: function replace(name, val) {\\n        val = val.source || val;\\n        val = val.replace(caret, '$1');\\n        regex = regex.replace(name, val);\\n        return obj;\\n      },\\n      getRegex: function getRegex() {\\n        return new RegExp(regex, opt);\\n      }\\n    };\\n    return obj;\\n  }\\n\\n  var nonWordAndColonTest = /[^\\\\w:]/g;\\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\\n\\n  function cleanUrl(sanitize, base, href) {\\n    if (sanitize) {\\n      var prot;\\n\\n      try {\\n        prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, '').toLowerCase();\\n      } catch (e) {\\n        return null;\\n      }\\n\\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\\n        return null;\\n      }\\n    }\\n\\n    if (base && !originIndependentUrl.test(href)) {\\n      href = resolveUrl(base, href);\\n    }\\n\\n    try {\\n      href = encodeURI(href).replace(/%25/g, '%');\\n    } catch (e) {\\n      return null;\\n    }\\n\\n    return href;\\n  }\\n\\n  var baseUrls = {};\\n  var justDomain = /^[^:]+:\\\\/*[^/]*$/;\\n  var protocol = /^([^:]+:)[\\\\s\\\\S]*$/;\\n  var domain = /^([^:]+:\\\\/*[^/]*)[\\\\s\\\\S]*$/;\\n\\n  function resolveUrl(base, href) {\\n    if (!baseUrls[' ' + base]) {\\n      // we can ignore everything in base after the last slash of its path component,\\n      // but we might need to add _that_\\n      // https://tools.ietf.org/html/rfc3986#section-3\\n      if (justDomain.test(base)) {\\n        baseUrls[' ' + base] = base + '/';\\n      } else {\\n        baseUrls[' ' + base] = rtrim(base, '/', true);\\n      }\\n    }\\n\\n    base = baseUrls[' ' + base];\\n    var relativeBase = base.indexOf(':') === -1;\\n\\n    if (href.substring(0, 2) === '//') {\\n      if (relativeBase) {\\n        return href;\\n      }\\n\\n      return base.replace(protocol, '$1') + href;\\n    } else if (href.charAt(0) === '/') {\\n      if (relativeBase) {\\n        return href;\\n      }\\n\\n      return base.replace(domain, '$1') + href;\\n    } else {\\n      return base + href;\\n    }\\n  }\\n\\n  var noopTest = {\\n    exec: function noopTest() {}\\n  };\\n\\n  function merge(obj) {\\n    var i = 1,\\n        target,\\n        key;\\n\\n    for (; i < arguments.length; i++) {\\n      target = arguments[i];\\n\\n      for (key in target) {\\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\\n          obj[key] = target[key];\\n        }\\n      }\\n    }\\n\\n    return obj;\\n  }\\n\\n  function splitCells(tableRow, count) {\\n    // ensure that every cell-delimiting pipe has a space\\n    // before it to distinguish it from an escaped pipe\\n    var row = tableRow.replace(/\\\\|/g, function (match, offset, str) {\\n      var escaped = false,\\n          curr = offset;\\n\\n      while (--curr >= 0 && str[curr] === '\\\\\\\\') {\\n        escaped = !escaped;\\n      }\\n\\n      if (escaped) {\\n        // odd number of slashes means | is escaped\\n        // so we leave it alone\\n        return '|';\\n      } else {\\n        // add space before unescaped |\\n        return ' |';\\n      }\\n    }),\\n        cells = row.split(/ \\\\|/);\\n    var i = 0;\\n\\n    if (cells.length > count) {\\n      cells.splice(count);\\n    } else {\\n      while (cells.length < count) {\\n        cells.push('');\\n      }\\n    }\\n\\n    for (; i < cells.length; i++) {\\n      // leading or trailing whitespace is ignored per the gfm spec\\n      cells[i] = cells[i].trim().replace(/\\\\\\\\\\\\|/g, '|');\\n    }\\n\\n    return cells;\\n  } // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\\n  // /c*$/ is vulnerable to REDOS.\\n  // invert: Remove suffix of non-c chars instead. Default falsey.\\n\\n\\n  function rtrim(str, c, invert) {\\n    var l = str.length;\\n\\n    if (l === 0) {\\n      return '';\\n    } // Length of suffix matching the invert condition.\\n\\n\\n    var suffLen = 0; // Step left until we fail to match the invert condition.\\n\\n    while (suffLen < l) {\\n      var currChar = str.charAt(l - suffLen - 1);\\n\\n      if (currChar === c && !invert) {\\n        suffLen++;\\n      } else if (currChar !== c && invert) {\\n        suffLen++;\\n      } else {\\n        break;\\n      }\\n    }\\n\\n    return str.substr(0, l - suffLen);\\n  }\\n\\n  function findClosingBracket(str, b) {\\n    if (str.indexOf(b[1]) === -1) {\\n      return -1;\\n    }\\n\\n    var l = str.length;\\n    var level = 0,\\n        i = 0;\\n\\n    for (; i < l; i++) {\\n      if (str[i] === '\\\\\\\\') {\\n        i++;\\n      } else if (str[i] === b[0]) {\\n        level++;\\n      } else if (str[i] === b[1]) {\\n        level--;\\n\\n        if (level < 0) {\\n          return i;\\n        }\\n      }\\n    }\\n\\n    return -1;\\n  }\\n\\n  function checkSanitizeDeprecation(opt) {\\n    if (opt && opt.sanitize && !opt.silent) {\\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\\n    }\\n  }\\n\\n  var helpers = {\\n    escape: escape,\\n    unescape: unescape,\\n    edit: edit,\\n    cleanUrl: cleanUrl,\\n    resolveUrl: resolveUrl,\\n    noopTest: noopTest,\\n    merge: merge,\\n    splitCells: splitCells,\\n    rtrim: rtrim,\\n    findClosingBracket: findClosingBracket,\\n    checkSanitizeDeprecation: checkSanitizeDeprecation\\n  };\\n\\n  var defaults$1 = defaults.defaults;\\n  var rtrim$1 = helpers.rtrim,\\n      splitCells$1 = helpers.splitCells,\\n      _escape = helpers.escape,\\n      findClosingBracket$1 = helpers.findClosingBracket;\\n\\n  function outputLink(cap, link, raw) {\\n    var href = link.href;\\n    var title = link.title ? _escape(link.title) : null;\\n\\n    if (cap[0].charAt(0) !== '!') {\\n      return {\\n        type: 'link',\\n        raw: raw,\\n        href: href,\\n        title: title,\\n        text: cap[1]\\n      };\\n    } else {\\n      return {\\n        type: 'image',\\n        raw: raw,\\n        text: _escape(cap[1]),\\n        href: href,\\n        title: title\\n      };\\n    }\\n  }\\n\\n  function indentCodeCompensation(raw, text) {\\n    var matchIndentToCode = raw.match(/^(\\\\s+)(?:```)/);\\n\\n    if (matchIndentToCode === null) {\\n      return text;\\n    }\\n\\n    var indentToCode = matchIndentToCode[1];\\n    return text.split('\\\\n').map(function (node) {\\n      var matchIndentInNode = node.match(/^\\\\s+/);\\n\\n      if (matchIndentInNode === null) {\\n        return node;\\n      }\\n\\n      var indentInNode = matchIndentInNode[0];\\n\\n      if (indentInNode.length >= indentToCode.length) {\\n        return node.slice(indentToCode.length);\\n      }\\n\\n      return node;\\n    }).join('\\\\n');\\n  }\\n  /**\\n   * Tokenizer\\n   */\\n\\n\\n  var Tokenizer_1 = /*#__PURE__*/function () {\\n    function Tokenizer(options) {\\n      this.options = options || defaults$1;\\n    }\\n\\n    var _proto = Tokenizer.prototype;\\n\\n    _proto.space = function space(src) {\\n      var cap = this.rules.block.newline.exec(src);\\n\\n      if (cap) {\\n        if (cap[0].length > 1) {\\n          return {\\n            type: 'space',\\n            raw: cap[0]\\n          };\\n        }\\n\\n        return {\\n          raw: '\\\\n'\\n        };\\n      }\\n    };\\n\\n    _proto.code = function code(src, tokens) {\\n      var cap = this.rules.block.code.exec(src);\\n\\n      if (cap) {\\n        var lastToken = tokens[tokens.length - 1]; // An indented code block cannot interrupt a paragraph.\\n\\n        if (lastToken && lastToken.type === 'paragraph') {\\n          return {\\n            raw: cap[0],\\n            text: cap[0].trimRight()\\n          };\\n        }\\n\\n        var text = cap[0].replace(/^ {4}/gm, '');\\n        return {\\n          type: 'code',\\n          raw: cap[0],\\n          codeBlockStyle: 'indented',\\n          text: !this.options.pedantic ? rtrim$1(text, '\\\\n') : text\\n        };\\n      }\\n    };\\n\\n    _proto.fences = function fences(src) {\\n      var cap = this.rules.block.fences.exec(src);\\n\\n      if (cap) {\\n        var raw = cap[0];\\n        var text = indentCodeCompensation(raw, cap[3] || '');\\n        return {\\n          type: 'code',\\n          raw: raw,\\n          lang: cap[2] ? cap[2].trim() : cap[2],\\n          text: text\\n        };\\n      }\\n    };\\n\\n    _proto.heading = function heading(src) {\\n      var cap = this.rules.block.heading.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'heading',\\n          raw: cap[0],\\n          depth: cap[1].length,\\n          text: cap[2]\\n        };\\n      }\\n    };\\n\\n    _proto.nptable = function nptable(src) {\\n      var cap = this.rules.block.nptable.exec(src);\\n\\n      if (cap) {\\n        var item = {\\n          type: 'table',\\n          header: splitCells$1(cap[1].replace(/^ *| *\\\\| *$/g, '')),\\n          align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n          cells: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : [],\\n          raw: cap[0]\\n        };\\n\\n        if (item.header.length === item.align.length) {\\n          var l = item.align.length;\\n          var i;\\n\\n          for (i = 0; i < l; i++) {\\n            if (/^ *-+: *$/.test(item.align[i])) {\\n              item.align[i] = 'right';\\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\\n              item.align[i] = 'center';\\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\\n              item.align[i] = 'left';\\n            } else {\\n              item.align[i] = null;\\n            }\\n          }\\n\\n          l = item.cells.length;\\n\\n          for (i = 0; i < l; i++) {\\n            item.cells[i] = splitCells$1(item.cells[i], item.header.length);\\n          }\\n\\n          return item;\\n        }\\n      }\\n    };\\n\\n    _proto.hr = function hr(src) {\\n      var cap = this.rules.block.hr.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'hr',\\n          raw: cap[0]\\n        };\\n      }\\n    };\\n\\n    _proto.blockquote = function blockquote(src) {\\n      var cap = this.rules.block.blockquote.exec(src);\\n\\n      if (cap) {\\n        var text = cap[0].replace(/^ *> ?/gm, '');\\n        return {\\n          type: 'blockquote',\\n          raw: cap[0],\\n          text: text\\n        };\\n      }\\n    };\\n\\n    _proto.list = function list(src) {\\n      var cap = this.rules.block.list.exec(src);\\n\\n      if (cap) {\\n        var raw = cap[0];\\n        var bull = cap[2];\\n        var isordered = bull.length > 1;\\n        var list = {\\n          type: 'list',\\n          raw: raw,\\n          ordered: isordered,\\n          start: isordered ? +bull : '',\\n          loose: false,\\n          items: []\\n        }; // Get each top-level item.\\n\\n        var itemMatch = cap[0].match(this.rules.block.item);\\n        var next = false,\\n            item,\\n            space,\\n            b,\\n            addBack,\\n            loose,\\n            istask,\\n            ischecked;\\n        var l = itemMatch.length;\\n\\n        for (var i = 0; i < l; i++) {\\n          item = itemMatch[i];\\n          raw = item; // Remove the list item's bullet\\n          // so it is seen as the next token.\\n\\n          space = item.length;\\n          item = item.replace(/^ *([*+-]|\\\\d+\\\\.) */, ''); // Outdent whatever the\\n          // list item contains. Hacky.\\n\\n          if (~item.indexOf('\\\\n ')) {\\n            space -= item.length;\\n            item = !this.options.pedantic ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '') : item.replace(/^ {1,4}/gm, '');\\n          } // Determine whether the next list item belongs here.\\n          // Backpedal if it does not belong in this list.\\n\\n\\n          if (i !== l - 1) {\\n            b = this.rules.block.bullet.exec(itemMatch[i + 1])[0];\\n\\n            if (bull.length > 1 ? b.length === 1 : b.length > 1 || this.options.smartLists && b !== bull) {\\n              addBack = itemMatch.slice(i + 1).join('\\\\n');\\n              list.raw = list.raw.substring(0, list.raw.length - addBack.length);\\n              i = l - 1;\\n            }\\n          } // Determine whether item is loose or not.\\n          // Use: /(^|\\\\n)(?! )[^\\\\n]+\\\\n\\\\n(?!\\\\s*$)/\\n          // for discount behavior.\\n\\n\\n          loose = next || /\\\\n\\\\n(?!\\\\s*$)/.test(item);\\n\\n          if (i !== l - 1) {\\n            next = item.charAt(item.length - 1) === '\\\\n';\\n            if (!loose) loose = next;\\n          }\\n\\n          if (loose) {\\n            list.loose = true;\\n          } // Check for task list items\\n\\n\\n          istask = /^\\\\[[ xX]\\\\] /.test(item);\\n          ischecked = undefined;\\n\\n          if (istask) {\\n            ischecked = item[1] !== ' ';\\n            item = item.replace(/^\\\\[[ xX]\\\\] +/, '');\\n          }\\n\\n          list.items.push({\\n            type: 'list_item',\\n            raw: raw,\\n            task: istask,\\n            checked: ischecked,\\n            loose: loose,\\n            text: item\\n          });\\n        }\\n\\n        return list;\\n      }\\n    };\\n\\n    _proto.html = function html(src) {\\n      var cap = this.rules.block.html.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: this.options.sanitize ? 'paragraph' : 'html',\\n          raw: cap[0],\\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\\n        };\\n      }\\n    };\\n\\n    _proto.def = function def(src) {\\n      var cap = this.rules.block.def.exec(src);\\n\\n      if (cap) {\\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\\n        var tag = cap[1].toLowerCase().replace(/\\\\s+/g, ' ');\\n        return {\\n          tag: tag,\\n          raw: cap[0],\\n          href: cap[2],\\n          title: cap[3]\\n        };\\n      }\\n    };\\n\\n    _proto.table = function table(src) {\\n      var cap = this.rules.block.table.exec(src);\\n\\n      if (cap) {\\n        var item = {\\n          type: 'table',\\n          header: splitCells$1(cap[1].replace(/^ *| *\\\\| *$/g, '')),\\n          align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n          cells: cap[3] ? cap[3].replace(/\\\\n$/, '').split('\\\\n') : []\\n        };\\n\\n        if (item.header.length === item.align.length) {\\n          item.raw = cap[0];\\n          var l = item.align.length;\\n          var i;\\n\\n          for (i = 0; i < l; i++) {\\n            if (/^ *-+: *$/.test(item.align[i])) {\\n              item.align[i] = 'right';\\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\\n              item.align[i] = 'center';\\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\\n              item.align[i] = 'left';\\n            } else {\\n              item.align[i] = null;\\n            }\\n          }\\n\\n          l = item.cells.length;\\n\\n          for (i = 0; i < l; i++) {\\n            item.cells[i] = splitCells$1(item.cells[i].replace(/^ *\\\\| *| *\\\\| *$/g, ''), item.header.length);\\n          }\\n\\n          return item;\\n        }\\n      }\\n    };\\n\\n    _proto.lheading = function lheading(src) {\\n      var cap = this.rules.block.lheading.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'heading',\\n          raw: cap[0],\\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\\n          text: cap[1]\\n        };\\n      }\\n    };\\n\\n    _proto.paragraph = function paragraph(src) {\\n      var cap = this.rules.block.paragraph.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'paragraph',\\n          raw: cap[0],\\n          text: cap[1].charAt(cap[1].length - 1) === '\\\\n' ? cap[1].slice(0, -1) : cap[1]\\n        };\\n      }\\n    };\\n\\n    _proto.text = function text(src, tokens) {\\n      var cap = this.rules.block.text.exec(src);\\n\\n      if (cap) {\\n        var lastToken = tokens[tokens.length - 1];\\n\\n        if (lastToken && lastToken.type === 'text') {\\n          return {\\n            raw: cap[0],\\n            text: cap[0]\\n          };\\n        }\\n\\n        return {\\n          type: 'text',\\n          raw: cap[0],\\n          text: cap[0]\\n        };\\n      }\\n    };\\n\\n    _proto.escape = function escape(src) {\\n      var cap = this.rules.inline.escape.exec(src);\\n\\n      if (cap) {\\n        return {\\n          type: 'escape',\\n          raw: cap[0],\\n          text: _escape(cap[1])\\n        };\\n      }\\n    };\\n\\n    _proto.tag = function tag(src, inLink, inRawBlock) {\\n      var cap = this.rules.inline.tag.exec(src);\\n\\n      if (cap) {\\n        if (!inLink && /^<a /i.test(cap[0])) {\\n          inLink = true;\\n        } else if (inLink && /^<\\\\/a>/i.test(cap[0])) {\\n          inLink = false;\\n        }\\n\\n        if (!inRawBlock && /^<(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n          inRawBlock = true;\\n        } else if (inRawBlock && /^<\\\\/(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n          inRawBlock = false;\\n        }\\n\\n        return {\\n          type: this.options.sanitize ? 'text' : 'html',\\n          raw: cap[0],\\n          inLink: inLink,\\n          inRawBlock: inRawBlock,\\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\\n        };\\n      }\\n    };\\n\\n    _proto.link = function link(src) {\\n      var cap = this.rules.inline.link.exec(src);\\n\\n      if (cap) {\\n        var lastParenIndex = findClosingBracket$1(cap[2], '()');\\n\\n        if (lastParenIndex > -1) {\\n          var start = cap[0].indexOf('!') === 0 ? 5 : 4;\\n          var linkLen = start + cap[1].length + lastParenIndex;\\n          cap[2] = cap[2].substring(0, lastParenIndex);\\n          cap[0] = cap[0].substring(0, linkLen).trim();\\n          cap[3] = '';\\n        }\\n\\n        var href = cap[2];\\n        var title = '';\\n\\n        if (this.options.pedantic) {\\n          var link = /^([^'\\\"]*[^\\\\s])\\\\s+(['\\\"])(.*)\\\\2/.exec(href);\\n\\n          if (link) {\\n            href = link[1];\\n            title = link[3];\\n          } else {\\n            title = '';\\n          }\\n        } else {\\n          title = cap[3] ? cap[3].slice(1, -1) : '';\\n        }\\n\\n        href = href.trim().replace(/^<([\\\\s\\\\S]*)>$/, '$1');\\n        var token = outputLink(cap, {\\n          href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\\n          title: title ? title.replace(this.rules.inline._escapes, '$1') : title\\n        }, cap[0]);\\n        return token;\\n      }\\n    };\\n\\n    _proto.reflink = function reflink(src, links) {\\n      var cap;\\n\\n      if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {\\n        var link = (cap[2] || cap[1]).replace(/\\\\s+/g, ' ');\\n        link = links[link.toLowerCase()];\\n\\n        if (!link || !link.href) {\\n          var text = cap[0].charAt(0);\\n          return {\\n            type: 'text',\\n            raw: text,\\n            text: text\\n          };\\n        }\\n\\n        var token = outputLink(cap, link, cap[0]);\\n        return token;\\n      }\\n    };\\n\\n    _proto.strong = function strong(src) {\\n      var cap = this.rules.inline.strong.exec(src);\\n[end of marked.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "README.md",
        "Bug_report.md",
        "marked-spec.js",
        "marked.esm.js",
        "marked.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "d8f92b88-8ce4-4189-9471-05a3e67e6c20",
        "score": 0.01639344262295082,
        "payload": {
          "text": "<a href=\"https://marked.js.org\">\n  <img width=\"60px\" height=\"60px\" src=\"https://marked.js.org/img/logo-black.svg\" align=\"right\" />\n</a>\n\n# Marked\n\n[![npm](https://badgen.net/npm/v/marked)](https://www.npmjs.com/package/marked)\n[![gzip size](https://badgen.net/badgesize/gzip/https://cdn.jsdelivr.net/npm/marked/marked.min.js)](https://cdn.jsdelivr.net/npm/marked/marked.min.js)\n[![install size](https://badgen.net/packagephobia/install/marked)](https://packagephobia.now.sh/result?p=marked)\n[![downloads](https://badgen.net/npm/dt/marked)](https://www.npmjs.com/package/marked)\n[![dep](https://badgen.net/david/dep/markedjs/marked?label=deps)](https://david-dm.org/markedjs/marked)\n[![dev dep](https://badgen.net/david/dev/markedjs/marked?label=devDeps)](https://david-dm.org/markedjs/marked?type=dev)\n[![github actions](https://github.com/markedjs/marked/workflows/Tests/badge.svg)](https://github.com/markedjs/marked/actions)\n[![snyk](https://snyk.io/test/npm/marked/badge.svg)](https://snyk.io/test/npm/marked)\n\n- \u26a1 built for speed\n- \u2b07\ufe0f low-level compiler for parsing markdown without caching or blocking for long periods of time\n- \u2696\ufe0f light-weight while implementing all markdown features from the supported flavors & specifications\n- \ud83c\udf10 works in a browser, on a server, or from a command line interface (CLI)\n\n## Demo\n\nCheckout the [demo page](https://marked.js.org/demo/) to see marked in action \u26f9\ufe0f\n\n## Docs\n\nOur [documentation pages](https://marked.js.org) are also rendered using marked \ud83d\udcaf\n\nAlso read about:\n\n* [Options](https://marked.js.org/#/USING_ADVANCED.md)\n* [Extensibility](https://marked.js.org/#/USING_PRO.md)\n\n## Installation\n\n**CLI:** `npm install -g marked`\n\n**In-browser:** `npm install marked`\n\n## Usage\n\n### Warning: \ud83d\udea8 Marked does not [sanitize](https://marked.js.org/#/USING_ADVANCED.md#options) the output HTML. Please use a sanitize library, like [DOMPurify](https://github.com/cure53/DOMPurify) (recommended), [sanitize-html](https://github.com/apostrophecms/sanitize-html) or [insane](https://github.com/bevacqua/insane) on the output HTML! \ud83d\udea8\n\n**CLI**\n\n``` bash\n$ marked -o hello.html\nhello world\n^D\n$ cat hello.html\n<p>hello world</p>\n```\n\n**Browser**\n\n```html\n<!doctype html>\n<html>\n<head>\n  <meta charset=\"utf-8\"/>\n  <title>Marked in the browser</title>\n</head>\n<body>\n  <div id=\"content\"></div>\n  <script src=\"https://cdn.jsdelivr.net/npm/marked/marked.min.js\"></script>\n  <script>\n    document.getElementById('content').innerHTML =\n      marked('# Marked in the browser\\n\\nRendered by **marked**.');\n  </script>\n</body>\n</html>\n```\n\n## License\n\nCopyright (c) 2011-2018, Christopher Jeffrey. (MIT License)\n",
          "filepath": "data/repos/markedjs/marked-1.1/README.md",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "9c19e5c8-694d-45f5-a235-a5ad403b4b98",
        "score": 0.016129032258064516,
        "payload": {
          "text": "---\nname: Bug report\nabout: Marked says it does this thing but does not\n\n---\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\n<!--\n1. [Marked Demo](https://marked.js.org/demo/)\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\n-->\n\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\n<!--\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\n3. Actual output (or error) is...\n-->\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n",
          "filepath": "data/repos/markedjs/marked-1.1/.github/ISSUE_TEMPLATE/Bug_report.md",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "4a8b1ec2-6fc0-4d62-9528-400726e058bb",
        "score": 0.015873015873015872,
        "payload": {
          "text": "const marked = require('../../src/marked.js');\n\ndescribe('Test heading ID functionality', () => {\n  it('should add id attribute by default', () => {\n    const renderer = new marked.Renderer();\n    const slugger = new marked.Slugger();\n    const header = renderer.heading('test', 1, 'test', slugger);\n    expect(header).toBe('<h1 id=\"test\">test</h1>\\n');\n  });\n\n  it('should NOT add id attribute when options set false', () => {\n    const renderer = new marked.Renderer({ headerIds: false });\n    const header = renderer.heading('test', 1, 'test');\n    expect(header).toBe('<h1>test</h1>\\n');\n  });\n});\n\ndescribe('Test slugger functionality', () => {\n  it('should use lowercase slug', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('Test')).toBe('test');\n  });\n\n  it('should be unique to avoid collisions 1280', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('test')).toBe('test');\n    expect(slugger.slug('test')).toBe('test-1');\n    expect(slugger.slug('test')).toBe('test-2');\n  });\n\n  it('should be unique when slug ends with number', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('test 1')).toBe('test-1');\n    expect(slugger.slug('test')).toBe('test');\n    expect(slugger.slug('test')).toBe('test-2');\n  });\n\n  it('should be unique when slug ends with hyphen number', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('foo')).toBe('foo');\n    expect(slugger.slug('foo')).toBe('foo-1');\n    expect(slugger.slug('foo 1')).toBe('foo-1-1');\n    expect(slugger.slug('foo-1')).toBe('foo-1-2');\n    expect(slugger.slug('foo')).toBe('foo-2');\n  });\n\n  it('should allow non-latin chars', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('\u043f\u0440\u0438\u0432\u0435\u0442')).toBe('\u043f\u0440\u0438\u0432\u0435\u0442');\n  });\n\n  it('should remove ampersands 857', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('This & That Section')).toBe('this--that-section');\n  });\n\n  it('should remove periods', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('file.txt')).toBe('filetxt');\n  });\n\n  it('should remove html tags', () => {\n    const slugger = new marked.Slugger();\n    expect(slugger.slug('<em>html</em>')).toBe('html');\n  });\n});\n\ndescribe('Test paragraph token type', () => {\n  it('should use the \"paragraph\" type on top level', () => {\n    const md = 'A Paragraph.\\n\\n> A blockquote\\n\\n- list item\\n';\n\n    const tokens = marked.lexer(md);\n\n    expect(tokens[0].type).toBe('paragraph');\n    expect(tokens[2].tokens[0].type).toBe('paragraph');\n    expect(tokens[3].items[0].tokens[0].type).toBe('text');\n  });\n});\n\ndescribe('changeDefaults', () => {\n  it('should change global defaults', () => {\n    const { defaults, changeDefaults } = require('../../src/defaults');\n    expect(defaults.test).toBeUndefined();\n    changeDefaults({ test: true });\n    expect(require('../../src/defaults').defaults.test).toBe(true);\n  });\n});\n\ndescribe('inlineLexer', () => {\n  it('should send html to renderer.html', () => {\n    const renderer = new marked.Renderer();\n    spyOn(renderer, 'html').and.callThrough();\n    const md = 'HTML Image: <img alt=\"MY IMAGE\" src=\"example.png\" />';\n    marked(md, { renderer });\n\n    expect(renderer.html).toHaveBeenCalledWith('<img alt=\"MY IMAGE\" src=\"example.png\" />');\n  });\n});\n\ndescribe('use extension', () => {\n  it('should use renderer', () => {\n    const extension = {\n      renderer: {\n        paragraph(text) {\n          return 'extension';\n        }\n      }\n    };\n    spyOn(extension.renderer, 'paragraph').and.callThrough();\n    marked.use(extension);\n    const html = marked('text');\n    expect(extension.renderer.paragraph).toHaveBeenCalledWith('text');\n    expect(html).toBe('extension');\n  });\n\n  it('should use tokenizer', () => {\n    const extension = {\n      tokenizer: {\n        paragraph(text) {\n          return {\n            type: 'paragraph',\n            raw: text,\n            text: 'extension'\n          };\n        }\n      }\n    };\n    spyOn(extension.tokenizer, 'paragraph').and.callThrough();\n    marked.use(extension);\n    const html = marked('text');\n    expect(extension.tokenizer.paragraph).toHaveBeenCalledWith('text');\n    expect(html).toBe('<p>extension</p>\\n');\n  });\n\n  it('should use walkTokens', () => {\n    let walked = 0;\n    const extension = {\n      walkTokens(token) {\n        walked++;\n      }\n    };\n    marked.use(extension);\n    marked('text');\n    expect(walked).toBe(2);\n  });\n\n  it('should use options from extension', () => {\n    const extension = {\n      headerIds: false\n    };\n    marked.use(extension);\n    const html = marked('# heading');\n    expect(html).toBe('<h1>heading</h1>\\n');\n  });\n\n  it('should call all walkTokens in reverse order', () => {\n    let walkedOnce = 0;\n    let walkedTwice = 0;\n    const extension1 = {\n      walkTokens(token) {\n        if (token.walkedOnce) {\n          walkedTwice++;\n        }\n      }\n    };\n    const extension2 = {\n      walkTokens(token) {\n        walkedOnce++;\n        token.walkedOnce = true;\n      }\n    };\n    marked.use(extension1);\n    marked.use(extension2);\n    marked('text');\n    expect(walkedOnce).toBe(2);\n    expect(walkedTwice).toBe(2);\n  });\n\n  it('should use last extension function and not override others', () => {\n    const extension1 = {\n      renderer: {\n        paragraph(text) {\n          return 'extension1 paragraph\\n';\n        },\n        html(html) {\n          return 'extension1 html\\n';\n        }\n      }\n    };\n    const extension2 = {\n      renderer: {\n        paragraph(text) {\n          return 'extension2 paragraph\\n';\n        }\n      }\n    };\n    marked.use(extension1);\n    marked.use(extension2);\n    const html = marked(`\nparagraph\n\n<html />\n\n# heading\n`);\n    expect(html).toBe('extension2 paragraph\\nextension1 html\\n<h1 id=\"heading\">heading</h1>\\n');\n  });\n\n  it('should use previous extension when returning false', () => {\n    const extension1 = {\n      renderer: {\n        paragraph(text) {\n          if (text !== 'original') {\n            return 'extension1 paragraph\\n';\n          }\n          return false;\n        }\n      }\n    };\n    const extension2 = {\n      renderer: {\n        paragraph(text) {\n          if (text !== 'extension1' && text !== 'original') {\n            return 'extension2 paragraph\\n';\n          }\n          return false;\n        }\n      }\n    };\n    marked.use(extension1);\n    marked.use(extension2);\n    const html = marked(`\nparagraph\n\nextension1\n\noriginal\n`);\n    expect(html).toBe('extension2 paragraph\\nextension1 paragraph\\n<p>original</p>\\n');\n  });\n\n  it('should get options with this.options', () => {\n    const extension = {\n      renderer: {\n        heading: () => {\n          return this.options ? 'arrow options\\n' : 'arrow no options\\n';\n        },\n        html: function() {\n          return this.options ? 'function options\\n' : 'function no options\\n';\n        },\n        paragraph() {\n          return this.options ? 'shorthand options\\n' : 'shorthand no options\\n';\n        }\n      }\n    };\n    marked.use(extension);\n    const html = marked(`\n# heading\n\n<html />\n\nparagraph\n`);\n    expect(html).toBe('arrow no options\\nfunction options\\nshorthand options\\n');\n  });\n});\n\ndescribe('async highlight', () => {\n  let highlight, markdown;\n  beforeEach(() => {\n    highlight = jasmine.createSpy('highlight', (text, lang, callback) => {\n      setImmediate(() => {\n        callback(null, `async ${text || ''}`);\n      });\n    });\n    markdown = `\n\\`\\`\\`lang1\ntext 1\n\\`\\`\\`\n\n> \\`\\`\\`lang2\n> text 2\n> \\`\\`\\`\n\n- \\`\\`\\`lang3\n  text 3\n  \\`\\`\\`\n`;\n  });\n\n  it('should highlight codeblocks async', (done) => {\n    highlight.and.callThrough();\n\n    marked(markdown, { highlight }, (err, html) => {\n      if (err) {\n        fail(err);\n      }\n\n      expect(html).toBe(`<pre><code class=\"language-lang1\">async text 1</code></pre>\n<blockquote>\n<pre><code class=\"language-lang2\">async text 2</code></pre>\n</blockquote>\n<ul>\n<li><pre><code class=\"language-lang3\">async text 3</code></pre>\n</li>\n</ul>\n`);\n      done();\n    });\n  });\n\n  it('should call callback for each error in highlight', (done) => {\n    highlight.and.callFake((lang, text, callback) => {\n      callback(new Error('highlight error'));\n    });\n\n    let numErrors = 0;\n    marked(markdown, { highlight }, (err, html) => {\n      expect(err).toBeTruthy();\n      expect(html).toBeUndefined();\n\n      if (err) {\n        numErrors++;\n      }\n\n      if (numErrors === 3) {\n        done();\n      }\n    });\n  });\n});\n\ndescribe('walkTokens', () => {\n  it('should walk over every token', () => {\n    const markdown = `\nparagraph\n\n---\n\n# heading\n\n\\`\\`\\`\ncode\n\\`\\`\\`\n\n| a | b |\n|---|---|\n| 1 | 2 |\n| 3 | 4 |\n\n> blockquote\n\n- list\n\n<div>html</div>\n\n[link](https://example.com)\n\n![image](https://example.com/image.jpg)\n\n**strong**\n\n*em*\n\n\\`codespan\\`\n\n~~del~~\n\nbr\nbr\n`;\n    const tokens = marked.lexer(markdown, { ...marked.getDefaults(), breaks: true });\n    const tokensSeen = [];\n    marked.walkTokens(tokens, (token) => {\n      tokensSeen.push([token.type, (token.raw || '').replace(/\\n/g, '')]);\n    });\n\n    expect(tokensSeen).toEqual([\n      ['paragraph', 'paragraph'],\n      ['text', 'paragraph'],\n      ['space', ''],\n      ['hr', '---'],\n      ['heading', '# heading'],\n      ['text', 'heading'],\n      ['code', '```code```'],\n      ['table', '| a | b ||---|---|| 1 | 2 || 3 | 4 |'],\n      ['text', 'a'],\n      ['text', 'b'],\n      ['text', '1'],\n      ['text', '2'],\n      ['text', '3'],\n      ['text', '4'],\n      ['blockquote', '> blockquote'],\n      ['paragraph', 'blockquote'],\n      ['text', 'blockquote'],\n      ['list', '- list'],\n      ['list_item', '- list'],\n      ['text', 'list'],\n      ['text', 'list'],\n      ['space', ''],\n      ['html', '<div>html</div>'],\n      ['paragraph', '[link](https://example.com)'],\n      ['link', '[link](https://example.com)'],\n      ['text', 'link'],\n      ['space', ''],\n      ['paragraph', '![image](https://example.com/image.jpg)'],\n      ['image', '![image](https://example.com/image.jpg)'],\n      ['space', ''],\n      ['paragraph', '**strong**'],\n      ['strong', '**strong**'],\n      ['text', 'strong'],\n      ['space', ''],\n      ['paragraph', '*em*'],\n      ['em', '*em*'],\n      ['text', 'em'],\n      ['space', ''],\n      ['paragraph', '`codespan`'],\n      ['codespan', '`codespan`'],\n      ['space', ''],\n      ['paragraph', '~~del~~'],\n      ['del', '~~del~~'],\n      ['text', 'del'],\n      ['space', ''],\n      ['paragraph', 'brbr'],\n      ['text', 'br'],\n      ['br', ''],\n      ['text', 'br']\n    ]);\n  });\n});\n",
          "filepath": "data/repos/markedjs/marked-1.1/test/unit/marked-spec.js",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "24b223e4-5c90-4d6f-be93-8671dc73076e",
        "score": 0.015625,
        "payload": {
          "text": "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar defaults = createCommonjsModule(function (module) {\nfunction getDefaults() {\n  return {\n    baseUrl: null,\n    breaks: false,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: null,\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartLists: false,\n    smartypants: false,\n    tokenizer: null,\n    walkTokens: null,\n    xhtml: false\n  };\n}\n\nfunction changeDefaults(newDefaults) {\n  module.exports.defaults = newDefaults;\n}\n\nmodule.exports = {\n  defaults: getDefaults(),\n  getDefaults,\n  changeDefaults\n};\n});\nvar defaults_1 = defaults.defaults;\nvar defaults_2 = defaults.getDefaults;\nvar defaults_3 = defaults.changeDefaults;\n\n/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = /[&<>\"']/g;\nconst escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\nconst escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\nconst escapeReplacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape(html, encode) {\n  if (encode) {\n    if (escapeTest.test(html)) {\n      return html.replace(escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (escapeTestNoEncode.test(html)) {\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nconst caret = /(^|[^\\[])\\^/g;\nfunction edit(regex, opt) {\n  regex = regex.source || regex;\n  opt = opt || '';\n  const obj = {\n    replace: (name, val) => {\n      val = val.source || val;\n      val = val.replace(caret, '$1');\n      regex = regex.replace(name, val);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(regex, opt);\n    }\n  };\n  return obj;\n}\n\nconst nonWordAndColonTest = /[^\\w:]/g;\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    let prot;\n    try {\n      prot = decodeURIComponent(unescape(href))\n        .replace(nonWordAndColonTest, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nconst baseUrls = {};\nconst justDomain = /^[^:]+:\\/*[^/]*$/;\nconst protocol = /^([^:]+:)[\\s\\S]*$/;\nconst domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (justDomain.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n  const relativeBase = base.indexOf(':') === -1;\n\n  if (href.substring(0, 2) === '//') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(protocol, '$1') + href;\n  } else if (href.charAt(0) === '/') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(domain, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\n\nconst noopTest = { exec: function noopTest() {} };\n\nfunction merge(obj) {\n  let i = 1,\n    target,\n    key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n      let escaped = false,\n        curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(/ \\|/);\n  let i = 0;\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n// /c*$/ is vulnerable to REDOS.\n// invert: Remove suffix of non-c chars instead. Default falsey.\nfunction rtrim(str, c, invert) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.substr(0, l - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  const l = str.length;\n  let level = 0,\n    i = 0;\n  for (; i < l; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkSanitizeDeprecation(opt) {\n  if (opt && opt.sanitize && !opt.silent) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n}\n\nvar helpers = {\n  escape,\n  unescape,\n  edit,\n  cleanUrl,\n  resolveUrl,\n  noopTest,\n  merge,\n  splitCells,\n  rtrim,\n  findClosingBracket,\n  checkSanitizeDeprecation\n};\n\nconst { defaults: defaults$1 } = defaults;\nconst {\n  rtrim: rtrim$1,\n  splitCells: splitCells$1,\n  escape: escape$1,\n  findClosingBracket: findClosingBracket$1\n} = helpers;\n\nfunction outputLink(cap, link, raw) {\n  const href = link.href;\n  const title = link.title ? escape$1(link.title) : null;\n\n  if (cap[0].charAt(0) !== '!') {\n    return {\n      type: 'link',\n      raw,\n      href,\n      title,\n      text: cap[1]\n    };\n  } else {\n    return {\n      type: 'image',\n      raw,\n      text: escape$1(cap[1]),\n      href,\n      title\n    };\n  }\n}\n\nfunction indentCodeCompensation(raw, text) {\n  const matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n  if (matchIndentToCode === null) {\n    return text;\n  }\n\n  const indentToCode = matchIndentToCode[1];\n\n  return text\n    .split('\\n')\n    .map(node => {\n      const matchIndentInNode = node.match(/^\\s+/);\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      const [indentInNode] = matchIndentInNode;\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    })\n    .join('\\n');\n}\n\n/**\n * Tokenizer\n */\nvar Tokenizer_1 = class Tokenizer {\n  constructor(options) {\n    this.options = options || defaults$1;\n  }\n\n  space(src) {\n    const cap = this.rules.block.newline.exec(src);\n    if (cap) {\n      if (cap[0].length > 1) {\n        return {\n          type: 'space',\n          raw: cap[0]\n        };\n      }\n      return { raw: '\\n' };\n    }\n  }\n\n  code(src, tokens) {\n    const cap = this.rules.block.code.exec(src);\n    if (cap) {\n      const lastToken = tokens[tokens.length - 1];\n      // An indented code block cannot interrupt a paragraph.\n      if (lastToken && lastToken.type === 'paragraph') {\n        return {\n          raw: cap[0],\n          text: cap[0].trimRight()\n        };\n      }\n\n      const text = cap[0].replace(/^ {4}/gm, '');\n      return {\n        type: 'code',\n        raw: cap[0],\n        codeBlockStyle: 'indented',\n        text: !this.options.pedantic\n          ? rtrim$1(text, '\\n')\n          : text\n      };\n    }\n  }\n\n  fences(src) {\n    const cap = this.rules.block.fences.exec(src);\n    if (cap) {\n      const raw = cap[0];\n      const text = indentCodeCompensation(raw, cap[3] || '');\n\n      return {\n        type: 'code',\n        raw,\n        lang: cap[2] ? cap[2].trim() : cap[2],\n        text\n      };\n    }\n  }\n\n  heading(src) {\n    const cap = this.rules.block.heading.exec(src);\n    if (cap) {\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[1].length,\n        text: cap[2]\n      };\n    }\n  }\n\n  nptable(src) {\n    const cap = this.rules.block.nptable.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : [],\n        raw: cap[0]\n      };\n\n      if (item.header.length === item.align.length) {\n        let l = item.align.length;\n        let i;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.cells.length;\n        for (i = 0; i < l; i++) {\n          item.cells[i] = splitCells$1(item.cells[i], item.header.length);\n        }\n\n        return item;\n      }\n    }\n  }\n\n  hr(src) {\n    const cap = this.rules.block.hr.exec(src);\n    if (cap) {\n      return {\n        type: 'hr',\n        raw: cap[0]\n      };\n    }\n  }\n\n  blockquote(src) {\n    const cap = this.rules.block.blockquote.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ *> ?/gm, '');\n\n      return {\n        type: 'blockquote',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n\n  list(src) {\n    const cap = this.rules.block.list.exec(src);\n    if (cap) {\n      let raw = cap[0];\n      const bull = cap[2];\n      const isordered = bull.length > 1;\n\n      const list = {\n        type: 'list',\n        raw,\n        ordered: isordered,\n        start: isordered ? +bull : '',\n        loose: false,\n        items: []\n      };\n\n      // Get each top-level item.\n      const itemMatch = cap[0].match(this.rules.block.item);\n\n      let next = false,\n        item,\n        space,\n        b,\n        addBack,\n        loose,\n        istask,\n        ischecked;\n\n      const l = itemMatch.length;\n      for (let i = 0; i < l; i++) {\n        item = itemMatch[i];\n        raw = item;\n\n        // Remove the list item's bullet\n        // so it is seen as the next token.\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+\\.) */, '');\n\n        // Outdent whatever the\n        // list item contains. Hacky.\n        if (~item.indexOf('\\n ')) {\n          space -= item.length;\n          item = !this.options.pedantic\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n            : item.replace(/^ {1,4}/gm, '');\n        }\n\n        // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n        if (i !== l - 1) {\n          b = this.rules.block.bullet.exec(itemMatch[i + 1])[0];\n          if (bull.length > 1 ? b.length === 1\n            : (b.length > 1 || (this.options.smartLists && b !== bull))) {\n            addBack = itemMatch.slice(i + 1).join('\\n');\n            list.raw = list.raw.substring(0, list.raw.length - addBack.length);\n            i = l - 1;\n          }\n        }\n\n        // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === '\\n';\n          if (!loose) loose = next;\n        }\n\n        if (loose) {\n          list.loose = true;\n        }\n\n        // Check for task list items\n        istask = /^\\[[ xX]\\] /.test(item);\n        ischecked = undefined;\n        if (istask) {\n          ischecked = item[1] !== ' ';\n          item = item.replace(/^\\[[ xX]\\] +/, '');\n        }\n\n        list.items.push({\n          type: 'list_item',\n          raw,\n          task: istask,\n          checked: ischecked,\n          loose: loose,\n          text: item\n        });\n      }\n\n      return list;\n    }\n  }\n\n  html(src) {\n    const cap = this.rules.block.html.exec(src);\n    if (cap) {\n      return {\n        type: this.options.sanitize\n          ? 'paragraph'\n          : 'html',\n        raw: cap[0],\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape$1(cap[0])) : cap[0]\n      };\n    }\n  }\n\n  def(src) {\n    const cap = this.rules.block.def.exec(src);\n    if (cap) {\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n      const tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n      return {\n        tag,\n        raw: cap[0],\n        href: cap[2],\n        title: cap[3]\n      };\n    }\n  }\n\n  table(src) {\n    const cap = this.rules.block.table.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        item.raw = cap[0];\n\n        let l = item.align.length;\n        let i;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.cells.length;\n        for (i = 0; i < l; i++) {\n          item.cells[i] = splitCells$1(\n            item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''),\n            item.header.length);\n        }\n\n        return item;\n      }\n    }\n  }\n\n  lheading(src) {\n    const cap = this.rules.block.lheading.exec(src);\n    if (cap) {\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1]\n      };\n    }\n  }\n\n  paragraph(src) {\n    const cap = this.rules.block.paragraph.exec(src);\n    if (cap) {\n      return {\n        type: 'paragraph',\n        raw: cap[0],\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1]\n      };\n    }\n  }\n\n  text(src, tokens) {\n    const cap = this.rules.block.text.exec(src);\n    if (cap) {\n      const lastToken = tokens[tokens.length - 1];\n      if (lastToken && lastToken.type === 'text') {\n        return {\n          raw: cap[0],\n          text: cap[0]\n        };\n      }\n\n      return {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0]\n      };\n    }\n  }\n\n  escape(src) {\n    const cap = this.rules.inline.escape.exec(src);\n    if (cap) {\n      return {\n        type: 'escape',\n        raw: cap[0],\n        text: escape$1(cap[1])\n      };\n    }\n  }\n\n  tag(src, inLink, inRawBlock) {\n    const cap = this.rules.inline.tag.exec(src);\n    if (cap) {\n      if (!inLink && /^<a /i.test(cap[0])) {\n        inLink = true;\n      } else if (inLink && /^<\\/a>/i.test(cap[0])) {\n        inLink = false;\n      }\n      if (!inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        inRawBlock = true;\n      } else if (inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        inRawBlock = false;\n      }\n\n      return {\n        type: this.options.sanitize\n          ? 'text'\n          : 'html',\n        raw: cap[0],\n        inLink,\n        inRawBlock,\n        text: this.options.sanitize\n          ? (this.options.sanitizer\n            ? this.options.sanitizer(cap[0])\n            : escape$1(cap[0]))\n          : cap[0]\n      };\n    }\n  }\n\n  link(src) {\n    const cap = this.rules.inline.link.exec(src);\n    if (cap) {\n      const lastParenIndex = findClosingBracket$1(cap[2], '()');\n      if (lastParenIndex > -1) {\n        const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n        const linkLen = start + cap[1].length + lastParenIndex;\n        cap[2] = cap[2].substring(0, lastParenIndex);\n        cap[0] = cap[0].substring(0, linkLen).trim();\n        cap[3] = '';\n      }\n      let href = cap[2];\n      let title = '';\n      if (this.options.pedantic) {\n        const link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        } else {\n          title = '';\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n      href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n      const token = outputLink(cap, {\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n      }, cap[0]);\n      return token;\n    }\n  }\n\n  reflink(src, links) {\n    let cap;\n    if ((cap = this.rules.inline.reflink.exec(src))\n        || (cap = this.rules.inline.nolink.exec(src))) {\n      let link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = links[link.toLowerCase()];\n      if (!link || !link.href) {\n        const text = cap[0].charAt(0);\n        return {\n          type: 'text',\n          raw: text,\n          text\n        };\n      }\n      const token = outputLink(cap, link, cap[0]);\n      return token;\n    }\n  }\n\n  strong(src) {\n    const cap = this.rules.inline.strong.exec(src);\n    if (cap) {\n      return {\n        type: 'strong',\n        raw: cap[0],\n        text: cap[4] || cap[3] || cap[2] || cap[1]\n      };\n    }\n  }\n\n  em(src) {\n    const cap = this.rules.inline.em.exec(src);\n    if (cap) {\n      return {\n        type: 'em',\n        raw: cap[0],\n        text: cap[6] || cap[5] || cap[4] || cap[3] || cap[2] || cap[1]\n      };\n    }\n  }\n\n  codespan(src) {\n    const cap = this.rules.inline.code.exec(src);\n    if (cap) {\n      let text = cap[2].replace(/\\n/g, ' ');\n      const hasNonSpaceChars = /[^ ]/.test(text);\n      const hasSpaceCharsOnBothEnds = text.startsWith(' ') && text.endsWith(' ');\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n        text = text.substring(1, text.length - 1);\n      }\n      text = escape$1(text, true);\n      return {\n        type: 'codespan',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n\n  br(src) {\n    const cap = this.rules.inline.br.exec(src);\n    if (cap) {\n      return {\n        type: 'br',\n        raw: cap[0]\n      };\n    }\n  }\n\n  del(src) {\n    const cap = this.rules.inline.del.exec(src);\n    if (cap) {\n      return {\n        type: 'del',\n        raw: cap[0],\n        text: cap[1]\n      };\n    }\n  }\n\n  autolink(src, mangle) {\n    const cap = this.rules.inline.autolink.exec(src);\n    if (cap) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape$1(this.options.mangle ? mangle(cap[1]) : cap[1]);\n        href = 'mailto:' + text;\n      } else {\n        text = escape$1(cap[1]);\n        href = text;\n      }\n\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n\n  url(src, mangle) {\n    let cap;\n    if (cap = this.rules.inline.url.exec(src)) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape$1(this.options.mangle ? mangle(cap[0]) : cap[0]);\n        href = 'mailto:' + text;\n      } else {\n        // do extended autolink path validation\n        let prevCapZero;\n        do {\n          prevCapZero = cap[0];\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n        } while (prevCapZero !== cap[0]);\n        text = escape$1(cap[0]);\n        if (cap[1] === 'www.') {\n          href = 'http://' + text;\n        } else {\n          href = text;\n        }\n      }\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,",
          "filepath": "data/repos/markedjs/marked-1.1/lib/marked.esm.js",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      },
      {
        "id": "d07150e2-9ab9-4a05-8a5e-ea1e7bbb00dd",
        "score": 0.015384615384615385,
        "payload": {
          "text": "/**\n * marked - a markdown parser\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.marked = factory());\n}(this, (function () { 'use strict';\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _createForOfIteratorHelperLoose(o) {\n    var i = 0;\n\n    if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n      if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n      throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n\n    i = o[Symbol.iterator]();\n    return i.next.bind(i);\n  }\n\n  function createCommonjsModule(fn, module) {\n  \treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n  }\n\n  var defaults = createCommonjsModule(function (module) {\n    function getDefaults() {\n      return {\n        baseUrl: null,\n        breaks: false,\n        gfm: true,\n        headerIds: true,\n        headerPrefix: '',\n        highlight: null,\n        langPrefix: 'language-',\n        mangle: true,\n        pedantic: false,\n        renderer: null,\n        sanitize: false,\n        sanitizer: null,\n        silent: false,\n        smartLists: false,\n        smartypants: false,\n        tokenizer: null,\n        walkTokens: null,\n        xhtml: false\n      };\n    }\n\n    function changeDefaults(newDefaults) {\n      module.exports.defaults = newDefaults;\n    }\n\n    module.exports = {\n      defaults: getDefaults(),\n      getDefaults: getDefaults,\n      changeDefaults: changeDefaults\n    };\n  });\n  var defaults_1 = defaults.defaults;\n  var defaults_2 = defaults.getDefaults;\n  var defaults_3 = defaults.changeDefaults;\n\n  /**\n   * Helpers\n   */\n  var escapeTest = /[&<>\"']/;\n  var escapeReplace = /[&<>\"']/g;\n  var escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\n  var escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n  var escapeReplacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\n    return escapeReplacements[ch];\n  };\n\n  function escape(html, encode) {\n    if (encode) {\n      if (escapeTest.test(html)) {\n        return html.replace(escapeReplace, getEscapeReplacement);\n      }\n    } else {\n      if (escapeTestNoEncode.test(html)) {\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n      }\n    }\n\n    return html;\n  }\n\n  var unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\n  function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(unescapeTest, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n\n      return '';\n    });\n  }\n\n  var caret = /(^|[^\\[])\\^/g;\n\n  function edit(regex, opt) {\n    regex = regex.source || regex;\n    opt = opt || '';\n    var obj = {\n      replace: function replace(name, val) {\n        val = val.source || val;\n        val = val.replace(caret, '$1');\n        regex = regex.replace(name, val);\n        return obj;\n      },\n      getRegex: function getRegex() {\n        return new RegExp(regex, opt);\n      }\n    };\n    return obj;\n  }\n\n  var nonWordAndColonTest = /[^\\w:]/g;\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n  function cleanUrl(sanitize, base, href) {\n    if (sanitize) {\n      var prot;\n\n      try {\n        prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, '').toLowerCase();\n      } catch (e) {\n        return null;\n      }\n\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return null;\n      }\n    }\n\n    if (base && !originIndependentUrl.test(href)) {\n      href = resolveUrl(base, href);\n    }\n\n    try {\n      href = encodeURI(href).replace(/%25/g, '%');\n    } catch (e) {\n      return null;\n    }\n\n    return href;\n  }\n\n  var baseUrls = {};\n  var justDomain = /^[^:]+:\\/*[^/]*$/;\n  var protocol = /^([^:]+:)[\\s\\S]*$/;\n  var domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\n  function resolveUrl(base, href) {\n    if (!baseUrls[' ' + base]) {\n      // we can ignore everything in base after the last slash of its path component,\n      // but we might need to add _that_\n      // https://tools.ietf.org/html/rfc3986#section-3\n      if (justDomain.test(base)) {\n        baseUrls[' ' + base] = base + '/';\n      } else {\n        baseUrls[' ' + base] = rtrim(base, '/', true);\n      }\n    }\n\n    base = baseUrls[' ' + base];\n    var relativeBase = base.indexOf(':') === -1;\n\n    if (href.substring(0, 2) === '//') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(protocol, '$1') + href;\n    } else if (href.charAt(0) === '/') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(domain, '$1') + href;\n    } else {\n      return base + href;\n    }\n  }\n\n  var noopTest = {\n    exec: function noopTest() {}\n  };\n\n  function merge(obj) {\n    var i = 1,\n        target,\n        key;\n\n    for (; i < arguments.length; i++) {\n      target = arguments[i];\n\n      for (key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n          obj[key] = target[key];\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  function splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n      var escaped = false,\n          curr = offset;\n\n      while (--curr >= 0 && str[curr] === '\\\\') {\n        escaped = !escaped;\n      }\n\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n        cells = row.split(/ \\|/);\n    var i = 0;\n\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) {\n        cells.push('');\n      }\n    }\n\n    for (; i < cells.length; i++) {\n      // leading or trailing whitespace is ignored per the gfm spec\n      cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n\n    return cells;\n  } // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n  // /c*$/ is vulnerable to REDOS.\n  // invert: Remove suffix of non-c chars instead. Default falsey.\n\n\n  function rtrim(str, c, invert) {\n    var l = str.length;\n\n    if (l === 0) {\n      return '';\n    } // Length of suffix matching the invert condition.\n\n\n    var suffLen = 0; // Step left until we fail to match the invert condition.\n\n    while (suffLen < l) {\n      var currChar = str.charAt(l - suffLen - 1);\n\n      if (currChar === c && !invert) {\n        suffLen++;\n      } else if (currChar !== c && invert) {\n        suffLen++;\n      } else {\n        break;\n      }\n    }\n\n    return str.substr(0, l - suffLen);\n  }\n\n  function findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n      return -1;\n    }\n\n    var l = str.length;\n    var level = 0,\n        i = 0;\n\n    for (; i < l; i++) {\n      if (str[i] === '\\\\') {\n        i++;\n      } else if (str[i] === b[0]) {\n        level++;\n      } else if (str[i] === b[1]) {\n        level--;\n\n        if (level < 0) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  function checkSanitizeDeprecation(opt) {\n    if (opt && opt.sanitize && !opt.silent) {\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n    }\n  }\n\n  var helpers = {\n    escape: escape,\n    unescape: unescape,\n    edit: edit,\n    cleanUrl: cleanUrl,\n    resolveUrl: resolveUrl,\n    noopTest: noopTest,\n    merge: merge,\n    splitCells: splitCells,\n    rtrim: rtrim,\n    findClosingBracket: findClosingBracket,\n    checkSanitizeDeprecation: checkSanitizeDeprecation\n  };\n\n  var defaults$1 = defaults.defaults;\n  var rtrim$1 = helpers.rtrim,\n      splitCells$1 = helpers.splitCells,\n      _escape = helpers.escape,\n      findClosingBracket$1 = helpers.findClosingBracket;\n\n  function outputLink(cap, link, raw) {\n    var href = link.href;\n    var title = link.title ? _escape(link.title) : null;\n\n    if (cap[0].charAt(0) !== '!') {\n      return {\n        type: 'link',\n        raw: raw,\n        href: href,\n        title: title,\n        text: cap[1]\n      };\n    } else {\n      return {\n        type: 'image',\n        raw: raw,\n        text: _escape(cap[1]),\n        href: href,\n        title: title\n      };\n    }\n  }\n\n  function indentCodeCompensation(raw, text) {\n    var matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n    if (matchIndentToCode === null) {\n      return text;\n    }\n\n    var indentToCode = matchIndentToCode[1];\n    return text.split('\\n').map(function (node) {\n      var matchIndentInNode = node.match(/^\\s+/);\n\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      var indentInNode = matchIndentInNode[0];\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    }).join('\\n');\n  }\n  /**\n   * Tokenizer\n   */\n\n\n  var Tokenizer_1 = /*#__PURE__*/function () {\n    function Tokenizer(options) {\n      this.options = options || defaults$1;\n    }\n\n    var _proto = Tokenizer.prototype;\n\n    _proto.space = function space(src) {\n      var cap = this.rules.block.newline.exec(src);\n\n      if (cap) {\n        if (cap[0].length > 1) {\n          return {\n            type: 'space',\n            raw: cap[0]\n          };\n        }\n\n        return {\n          raw: '\\n'\n        };\n      }\n    };\n\n    _proto.code = function code(src, tokens) {\n      var cap = this.rules.block.code.exec(src);\n\n      if (cap) {\n        var lastToken = tokens[tokens.length - 1]; // An indented code block cannot interrupt a paragraph.\n\n        if (lastToken && lastToken.type === 'paragraph') {\n          return {\n            raw: cap[0],\n            text: cap[0].trimRight()\n          };\n        }\n\n        var text = cap[0].replace(/^ {4}/gm, '');\n        return {\n          type: 'code',\n          raw: cap[0],\n          codeBlockStyle: 'indented',\n          text: !this.options.pedantic ? rtrim$1(text, '\\n') : text\n        };\n      }\n    };\n\n    _proto.fences = function fences(src) {\n      var cap = this.rules.block.fences.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var text = indentCodeCompensation(raw, cap[3] || '');\n        return {\n          type: 'code',\n          raw: raw,\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: text\n        };\n      }\n    };\n\n    _proto.heading = function heading(src) {\n      var cap = this.rules.block.heading.exec(src);\n\n      if (cap) {\n        return {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[1].length,\n          text: cap[2]\n        };\n      }\n    };\n\n    _proto.nptable = function nptable(src) {\n      var cap = this.rules.block.nptable.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : [],\n          raw: cap[0]\n        };\n\n        if (item.header.length === item.align.length) {\n          var l = item.align.length;\n          var i;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.cells.length;\n\n          for (i = 0; i < l; i++) {\n            item.cells[i] = splitCells$1(item.cells[i], item.header.length);\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.hr = function hr(src) {\n      var cap = this.rules.block.hr.exec(src);\n\n      if (cap) {\n        return {\n          type: 'hr',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.blockquote = function blockquote(src) {\n      var cap = this.rules.block.blockquote.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ *> ?/gm, '');\n        return {\n          type: 'blockquote',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    _proto.list = function list(src) {\n      var cap = this.rules.block.list.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var bull = cap[2];\n        var isordered = bull.length > 1;\n        var list = {\n          type: 'list',\n          raw: raw,\n          ordered: isordered,\n          start: isordered ? +bull : '',\n          loose: false,\n          items: []\n        }; // Get each top-level item.\n\n        var itemMatch = cap[0].match(this.rules.block.item);\n        var next = false,\n            item,\n            space,\n            b,\n            addBack,\n            loose,\n            istask,\n            ischecked;\n        var l = itemMatch.length;\n\n        for (var i = 0; i < l; i++) {\n          item = itemMatch[i];\n          raw = item; // Remove the list item's bullet\n          // so it is seen as the next token.\n\n          space = item.length;\n          item = item.replace(/^ *([*+-]|\\d+\\.) */, ''); // Outdent whatever the\n          // list item contains. Hacky.\n\n          if (~item.indexOf('\\n ')) {\n            space -= item.length;\n            item = !this.options.pedantic ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '') : item.replace(/^ {1,4}/gm, '');\n          } // Determine whether the next list item belongs here.\n          // Backpedal if it does not belong in this list.\n\n\n          if (i !== l - 1) {\n            b = this.rules.block.bullet.exec(itemMatch[i + 1])[0];\n\n            if (bull.length > 1 ? b.length === 1 : b.length > 1 || this.options.smartLists && b !== bull) {\n              addBack = itemMatch.slice(i + 1).join('\\n');\n              list.raw = list.raw.substring(0, list.raw.length - addBack.length);\n              i = l - 1;\n            }\n          } // Determine whether item is loose or not.\n          // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n          // for discount behavior.\n\n\n          loose = next || /\\n\\n(?!\\s*$)/.test(item);\n\n          if (i !== l - 1) {\n            next = item.charAt(item.length - 1) === '\\n';\n            if (!loose) loose = next;\n          }\n\n          if (loose) {\n            list.loose = true;\n          } // Check for task list items\n\n\n          istask = /^\\[[ xX]\\] /.test(item);\n          ischecked = undefined;\n\n          if (istask) {\n            ischecked = item[1] !== ' ';\n            item = item.replace(/^\\[[ xX]\\] +/, '');\n          }\n\n          list.items.push({\n            type: 'list_item',\n            raw: raw,\n            task: istask,\n            checked: ischecked,\n            loose: loose,\n            text: item\n          });\n        }\n\n        return list;\n      }\n    };\n\n    _proto.html = function html(src) {\n      var cap = this.rules.block.html.exec(src);\n\n      if (cap) {\n        return {\n          type: this.options.sanitize ? 'paragraph' : 'html',\n          raw: cap[0],\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.def = function def(src) {\n      var cap = this.rules.block.def.exec(src);\n\n      if (cap) {\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        var tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n        return {\n          tag: tag,\n          raw: cap[0],\n          href: cap[2],\n          title: cap[3]\n        };\n      }\n    };\n\n    _proto.table = function table(src) {\n      var cap = this.rules.block.table.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          item.raw = cap[0];\n          var l = item.align.length;\n          var i;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.cells.length;\n\n          for (i = 0; i < l; i++) {\n            item.cells[i] = splitCells$1(item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''), item.header.length);\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.lheading = function lheading(src) {\n      var cap = this.rules.block.lheading.exec(src);\n\n      if (cap) {\n        return {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1]\n        };\n      }\n    };\n\n    _proto.paragraph = function paragraph(src) {\n      var cap = this.rules.block.paragraph.exec(src);\n\n      if (cap) {\n        return {\n          type: 'paragraph',\n          raw: cap[0],\n          text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1]\n        };\n      }\n    };\n\n    _proto.text = function text(src, tokens) {\n      var cap = this.rules.block.text.exec(src);\n\n      if (cap) {\n        var lastToken = tokens[tokens.length - 1];\n\n        if (lastToken && lastToken.type === 'text') {\n          return {\n            raw: cap[0],\n            text: cap[0]\n          };\n        }\n\n        return {\n          type: 'text',\n          raw: cap[0],\n          text: cap[0]\n        };\n      }\n    };\n\n    _proto.escape = function escape(src) {\n      var cap = this.rules.inline.escape.exec(src);\n\n      if (cap) {\n        return {\n          type: 'escape',\n          raw: cap[0],\n          text: _escape(cap[1])\n        };\n      }\n    };\n\n    _proto.tag = function tag(src, inLink, inRawBlock) {\n      var cap = this.rules.inline.tag.exec(src);\n\n      if (cap) {\n        if (!inLink && /^<a /i.test(cap[0])) {\n          inLink = true;\n        } else if (inLink && /^<\\/a>/i.test(cap[0])) {\n          inLink = false;\n        }\n\n        if (!inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          inRawBlock = true;\n        } else if (inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          inRawBlock = false;\n        }\n\n        return {\n          type: this.options.sanitize ? 'text' : 'html',\n          raw: cap[0],\n          inLink: inLink,\n          inRawBlock: inRawBlock,\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.link = function link(src) {\n      var cap = this.rules.inline.link.exec(src);\n\n      if (cap) {\n        var lastParenIndex = findClosingBracket$1(cap[2], '()');\n\n        if (lastParenIndex > -1) {\n          var start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          var linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n\n        var href = cap[2];\n        var title = '';\n\n        if (this.options.pedantic) {\n          var link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          } else {\n            title = '';\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n\n        href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n        var token = outputLink(cap, {\n          href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n          title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n        }, cap[0]);\n        return token;\n      }\n    };\n\n    _proto.reflink = function reflink(src, links) {\n      var cap;\n\n      if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {\n        var link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = links[link.toLowerCase()];\n\n        if (!link || !link.href) {\n          var text = cap[0].charAt(0);\n          return {\n            type: 'text',\n            raw: text,\n            text: text\n          };\n        }\n\n        var token = outputLink(cap, link, cap[0]);\n        return token;\n      }\n    };\n\n    _proto.strong = function strong(src) {\n      var cap = this.rules.inline.strong.exec(src);",
          "filepath": "data/repos/markedjs/marked-1.1/lib/marked.js",
          "repo": "markedjs/marked",
          "version": "1.1",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-1936",
    "model_patch": "diff --git a/marked.js b/marked.js\nindex 8f1e2c3..b9a4d5f 100644\n--- a/marked.js\n+++ b/marked.js\n@@ -1,6 +1,7 @@\n           }\n \n         case 'list':\n+          let lastItemIndex = token.items.length - 1;\n           {\n             marked.walkTokens(token.items, (item, i) => {\n               if (i === lastItemIndex && item.tokens && item.tokens.length > 0) {\n@@ -8,6 +9,20 @@\n                   let lastToken = item.tokens[item.tokens.length - 1];\n                   if (lastToken.type === 'space') {\n                     item.tokens.pop();\n+                    // Add the space token to the parent level\n+                    token.tokens.push(lastToken);\n+                  }\n+                }\n+              }\n+              callback(item);\n+            });\n+            break;\n+          }\n+\n+        case 'space':\n+          {\n+            // Ensure space is added between list and paragraph\n+            if (token.tokens && token.tokens.length > 0) {\n+              let lastToken = token.tokens[token.tokens.length - 1];\n+              if (lastToken.type !== 'space') {\n+                token.tokens.push({ type: 'space' });\n               }\n             });\n             break;",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 180.89,
      "issue_embedding_time_ms": 180.89,
      "retrieval_time_ms_jina": 1.2,
      "retrieval_time_ms": 1.2,
      "total_retrieval_time_ms": 182.09,
      "generation_time_ms": 4032.15,
      "total_io_time_ms": 4214.24,
      "input_total_token_limit": null,
      "issue_text_tokens": 271,
      "vlm_tokens": 0,
      "retrieved_tokens": 2634,
      "prompt_template_tokens": 523,
      "total_input_prompt_tokens": 3428,
      "output_generated_tokens": 286,
      "total_io_tokens": 3714,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nLexer: Space after list appears in last list_item\\nmarked 2.0.0\\r\\n\\r\\nSorry if it is not a bug, but a feature... \\r\\n\\r\\nIn a semantic tree (marked.lexer) an empty space between List and Paragraph appears in a last `list_item`. It looks unlogical. \\r\\n\\r\\nWhile traverse the tree, you should write additional code for exclude this empty space from `list_item`. And then write code to add space between List and Paragraph. \\r\\n\\r\\nExpected: Space node should be at the first level of the semantic tree, between the List and the next Paragraph  \\r\\n\\r\\nfor reproduce, please visit: \\r\\nhttps://codesandbox.io/s/markedjs-klt1h?file=/src/marked8lexer.js\\r\\n\\r\\n```javascript\\r\\nimport marked from \\\"marked\\\";\\r\\n\\r\\nconst markdownText = `This is paragraph \\r\\n\\r\\nthis is a list with 3 items: \\r\\n\\r\\n- item one \\r\\n- item two \\r\\n- item tree \\r\\n\\r\\nHere is another paragrah.`;\\r\\n\\r\\nconst lexerArray = marked.lexer(markdownText);\\r\\n\\r\\nconsole.log(lexerArray);\\r\\n```\\r\\n![Screenshot from 2021-02-15 19-40-18](https://user-images.githubusercontent.com/1222611/107973010-b8869400-6fc5-11eb-839b-ac9d66c0500d.png)\\r\\n\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of broken.md]\\n# Markdown is broken\\n\\nI have a lot of scraps of markdown engine oddities that I've collected over the\\nyears. What you see below is slightly messy, but it's what I've managed to\\ncobble together to illustrate the differences between markdown engines, and\\nwhy, if there ever is a markdown specification, it has to be absolutely\\nthorough. There are a lot more of these little differences I have documented\\nelsewhere. I know I will find them lingering on my disk one day, but until\\nthen, I'll continue to add whatever strange nonsensical things I find.\\n\\nSome of these examples may only mention a particular engine compared to marked.\\nHowever, the examples with markdown.pl could easily be swapped out for\\ndiscount, upskirt, or markdown.js, and you would very easily see even more\\ninconsistencies.\\n\\nA lot of this was written when I was very unsatisfied with the inconsistencies\\nbetween markdown engines. Please excuse the frustration noticeable in my\\nwriting.\\n\\n## Examples of markdown's \\\"stupid\\\" list parsing\\n\\n```\\n$ markdown.pl\\n\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n\\n<ul>\\n<li>item2</li>\\n</ul>\\n\\n<p><p>text</p></li>\\n</ul></p>\\n```\\n\\n\\n```\\n$ marked\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n<ul>\\n<li>item2</li>\\n</ul>\\n<p>text</p>\\n</li>\\n</ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\n```\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\n```\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello<blockquote>\\n<p>world</p>\\n</blockquote>\\n</li>\\n</ul>\\n```\\n\\nAgain, which looks correct to you?\\n\\n- - -\\n\\nEXAMPLE:\\n\\n```\\n$ markdown.pl\\n* hello\\n  * world\\n    * hi\\n          code\\n^D\\n<ul>\\n<li>hello\\n<ul>\\n<li>world</li>\\n<li>hi\\n  code</li>\\n</ul></li>\\n</ul>\\n```\\n\\nThe code isn't a code block even though it's after the bullet margin. I know,\\nlets give it two more spaces, effectively making it 8 spaces past the bullet.\\n\\n```\\n$ markdown.pl\\n* hello\\n  * world\\n    * hi\\n            code\\n^D\\n<ul>\\n<li>hello\\n<ul>\\n<li>world</li>\\n<li>hi\\n    code</li>\\n</ul></li>\\n</ul>\\n```\\n\\nAnd, it's still not a code block. Did you also notice that the 3rd item isn't\\neven its own list? Markdown screws that up too because of its indentation\\nunaware parsing.\\n\\n- - -\\n\\nLet's look at some more examples of markdown's list parsing:\\n\\n```\\n$ markdown.pl\\n\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n\\n<ul>\\n<li>item2</li>\\n</ul>\\n\\n<p><p>text</p></li>\\n</ul></p>\\n```\\n\\nMisnested tags.\\n\\n\\n```\\n$ marked\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n<ul>\\n<li>item2</li>\\n</ul>\\n<p>text</p>\\n</li>\\n</ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\n```\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\nMore misnested tags.\\n\\n\\n```\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello<blockquote>\\n<p>world</p>\\n</blockquote>\\n</li>\\n</ul>\\n```\\n\\nAgain, which looks correct to you?\\n\\n- - -\\n\\n# Why quality matters - Part 2\\n\\n``` bash\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\n``` bash\\n$ sundown # upskirt\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello\\n&gt; world</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul><li>hello <blockquote><p>world</p></blockquote></li></ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/23\\n\\n``` bash\\n$ markdown.pl # upskirt/markdown.js/discount\\n* hello\\n      var a = 1;\\n* world\\n^D\\n<ul>\\n<li>hello\\nvar a = 1;</li>\\n<li>world</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n      var a = 1;\\n* world\\n^D\\n<ul><li>hello\\n<pre>code>var a = 1;</code></pre></li>\\n<li>world</li></ul>\\n```\\n\\nWhich looks more reasonable? Why shouldn't code blocks be able to appear in\\nlist items in a sane way?\\n\\n- - -\\n\\n``` bash\\n$ markdown.js\\n<div>hello</div>\\n\\n<span>hello</span>\\n^D\\n<p>&lt;div&gt;hello&lt;/div&gt;</p>\\n\\n<p>&lt;span&gt;hello&lt;/span&gt;</p>\\n```\\n\\n``` bash\\n$ marked\\n<div>hello</div>\\n\\n<span>hello</span>\\n^D\\n<div>hello</div>\\n\\n\\n<p><span>hello</span>\\n</p>\\n```\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/27\\n\\n``` bash\\n$ markdown.js\\n[![an image](/image)](/link)\\n^D\\n<p><a href=\\\"/image)](/link\\\">![an image</a></p>\\n```\\n\\n``` bash\\n$ marked\\n[![an image](/image)](/link)\\n^D\\n<p><a href=\\\"/link\\\"><img src=\\\"/image\\\" alt=\\\"an image\\\"></a>\\n</p>\\n```\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/24\\n\\n``` bash\\n$ markdown.js\\n> a\\n\\n> b\\n\\n> c\\n^D\\n<blockquote><p>a</p><p>bundefined&gt; c</p></blockquote>\\n```\\n\\n``` bash\\n$ marked\\n> a\\n\\n> b\\n\\n> c\\n^D\\n<blockquote><p>a\\n\\n</p></blockquote>\\n<blockquote><p>b\\n\\n</p></blockquote>\\n<blockquote><p>c\\n</p></blockquote>\\n```\\n\\n- - -\\n\\n``` bash\\n$ markdown.pl\\n* hello\\n  * world\\n    how\\n\\n    are\\n    you\\n\\n  * today\\n* hi\\n^D\\n<ul>\\n<li><p>hello</p>\\n\\n<ul>\\n<li>world\\nhow</li>\\n</ul>\\n\\n<p>are\\nyou</p>\\n\\n<ul>\\n<li>today</li>\\n</ul></li>\\n<li>hi</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n  * world\\n    how\\n\\n    are\\n    you\\n\\n  * today\\n* hi\\n^D\\n<ul>\\n<li><p>hello</p>\\n<ul>\\n<li><p>world\\nhow</p>\\n<p>are\\nyou</p>\\n</li>\\n<li><p>today</p>\\n</li>\\n</ul>\\n</li>\\n<li>hi</li>\\n</ul>\\n```\\n\\n[end of broken.md]\\n[start of hard_wrapped_paragraphs_with_list_like_lines.md]\\nIn Markdown 1.0.0 and earlier. Version\\n8. This line turns into a list item.\\nBecause a hard-wrapped line in the\\nmiddle of a paragraph looked like a\\nlist item.\\n\\nHere's one with a bullet.\\n* criminey.\\n\\n[end of hard_wrapped_paragraphs_with_list_like_lines.md]\\n[start of marked.js]\\n          }\\n\\n        case 'list':\\n          {\\n            marked.walkTokens(token.items, callback);\\n            break;\\n          }\\n\\n        default:\\n          {\\n            if (token.tokens) {\\n              marked.walkTokens(token.tokens, callback);\\n            }\\n          }\\n      }\\n    }\\n  };\\n  /**\\n   * Parse Inline\\n   */\\n\\n\\n  marked.parseInline = function (src, opt) {\\n    // throw error in case of non string input\\n    if (typeof src === 'undefined' || src === null) {\\n      throw new Error('marked.parseInline(): input parameter is undefined or null');\\n    }\\n\\n    if (typeof src !== 'string') {\\n      throw new Error('marked.parseInline(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\\n    }\\n\\n    opt = merge$2({}, marked.defaults, opt || {});\\n    checkSanitizeDeprecation$1(opt);\\n\\n    try {\\n      var tokens = Lexer_1.lexInline(src, opt);\\n\\n      if (opt.walkTokens) {\\n        marked.walkTokens(tokens, opt.walkTokens);\\n      }\\n\\n      return Parser_1.parseInline(tokens, opt);\\n    } catch (e) {\\n      e.message += '\\\\nPlease report this to https://github.com/markedjs/marked.';\\n\\n      if (opt.silent) {\\n        return '<p>An error occurred:</p><pre>' + escape$2(e.message + '', true) + '</pre>';\\n      }\\n\\n      throw e;\\n    }\\n  };\\n  /**\\n   * Expose\\n   */\\n\\n\\n  marked.Parser = Parser_1;\\n  marked.parser = Parser_1.parse;\\n  marked.Renderer = Renderer_1;\\n  marked.TextRenderer = TextRenderer_1;\\n  marked.Lexer = Lexer_1;\\n  marked.lexer = Lexer_1.lex;\\n  marked.Tokenizer = Tokenizer_1;\\n  marked.Slugger = Slugger_1;\\n  marked.parse = marked;\\n  var marked_1 = marked;\\n\\n  return marked_1;\\n\\n})));\\n[end of marked.js]\\n[start of Bug_report.md]\\n---\\nname: Bug report\\nabout: Marked says it does this thing but does not\\n\\n---\\n**Marked version:**\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior:\\n\\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\\n<!--\\n1. [Marked Demo](https://marked.js.org/demo/)\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\\n-->\\n\\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\\n<!--\\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\\n3. Actual output (or error) is...\\n-->\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n[end of Bug_report.md]\\n[start of main.md]\\n[test]: http://google.com/ \\\"Google\\\"\\n\\n# A heading\\n\\nJust a note, I've found that I can't test my markdown parser vs others.\\nFor example, both markdown.js and showdown code blocks in lists wrong. They're\\nalso completely [inconsistent][test] with regards to paragraphs in list items.\\n\\nA link. Not anymore.\\n\\n<aside>This will make me fail the test because\\nmarkdown.js doesnt acknowledge arbitrary html blocks =/</aside>\\n\\n* List Item 1\\n\\n* List Item 2\\n  * New List Item 1\\n    Hi, this is a list item.\\n  * New List Item 2\\n    Another item\\n        Code goes here.\\n        Lots of it...\\n  * New List Item 3\\n    The last item\\n\\n* List Item 3\\nThe final item.\\n\\n* List Item 4\\nThe real final item.\\n\\nParagraph.\\n\\n> * bq Item 1\\n> * bq Item 2\\n>   * New bq Item 1\\n>   * New bq Item 2\\n>   Text here\\n\\n* * *\\n\\n> Another blockquote!\\n> I really need to get\\n> more creative with\\n> mockup text..\\n> markdown.js breaks here again\\n\\nAnother Heading\\n-------------\\n\\nHello *world*. Here is a [link](//hello).\\nAnd an image ![alt](src).\\n\\n    Code goes here.\\n    Lots of it...\\n\\n[end of main.md]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "broken.md",
        "hard_wrapped_paragraphs_with_list_like_lines.md",
        "marked.js",
        "Bug_report.md",
        "main.md"
      ]
    },
    "retrieved_documents": [
      {
        "id": "f2ed88c1-f83b-4d56-b026-8b2fc1ea942a",
        "score": 0.01639344262295082,
        "payload": {
          "text": "# Markdown is broken\n\nI have a lot of scraps of markdown engine oddities that I've collected over the\nyears. What you see below is slightly messy, but it's what I've managed to\ncobble together to illustrate the differences between markdown engines, and\nwhy, if there ever is a markdown specification, it has to be absolutely\nthorough. There are a lot more of these little differences I have documented\nelsewhere. I know I will find them lingering on my disk one day, but until\nthen, I'll continue to add whatever strange nonsensical things I find.\n\nSome of these examples may only mention a particular engine compared to marked.\nHowever, the examples with markdown.pl could easily be swapped out for\ndiscount, upskirt, or markdown.js, and you would very easily see even more\ninconsistencies.\n\nA lot of this was written when I was very unsatisfied with the inconsistencies\nbetween markdown engines. Please excuse the frustration noticeable in my\nwriting.\n\n## Examples of markdown's \"stupid\" list parsing\n\n```\n$ markdown.pl\n\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n\n<ul>\n<li>item2</li>\n</ul>\n\n<p><p>text</p></li>\n</ul></p>\n```\n\n\n```\n$ marked\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n<ul>\n<li>item2</li>\n</ul>\n<p>text</p>\n</li>\n</ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\n```\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\n```\n$ marked\n* hello\n  > world\n^D\n<ul>\n<li>hello<blockquote>\n<p>world</p>\n</blockquote>\n</li>\n</ul>\n```\n\nAgain, which looks correct to you?\n\n- - -\n\nEXAMPLE:\n\n```\n$ markdown.pl\n* hello\n  * world\n    * hi\n          code\n^D\n<ul>\n<li>hello\n<ul>\n<li>world</li>\n<li>hi\n  code</li>\n</ul></li>\n</ul>\n```\n\nThe code isn't a code block even though it's after the bullet margin. I know,\nlets give it two more spaces, effectively making it 8 spaces past the bullet.\n\n```\n$ markdown.pl\n* hello\n  * world\n    * hi\n            code\n^D\n<ul>\n<li>hello\n<ul>\n<li>world</li>\n<li>hi\n    code</li>\n</ul></li>\n</ul>\n```\n\nAnd, it's still not a code block. Did you also notice that the 3rd item isn't\neven its own list? Markdown screws that up too because of its indentation\nunaware parsing.\n\n- - -\n\nLet's look at some more examples of markdown's list parsing:\n\n```\n$ markdown.pl\n\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n\n<ul>\n<li>item2</li>\n</ul>\n\n<p><p>text</p></li>\n</ul></p>\n```\n\nMisnested tags.\n\n\n```\n$ marked\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n<ul>\n<li>item2</li>\n</ul>\n<p>text</p>\n</li>\n</ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\n```\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\nMore misnested tags.\n\n\n```\n$ marked\n* hello\n  > world\n^D\n<ul>\n<li>hello<blockquote>\n<p>world</p>\n</blockquote>\n</li>\n</ul>\n```\n\nAgain, which looks correct to you?\n\n- - -\n\n# Why quality matters - Part 2\n\n``` bash\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\n``` bash\n$ sundown # upskirt\n* hello\n  > world\n^D\n<ul>\n<li>hello\n&gt; world</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n  > world\n^D\n<ul><li>hello <blockquote><p>world</p></blockquote></li></ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/23\n\n``` bash\n$ markdown.pl # upskirt/markdown.js/discount\n* hello\n      var a = 1;\n* world\n^D\n<ul>\n<li>hello\nvar a = 1;</li>\n<li>world</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n      var a = 1;\n* world\n^D\n<ul><li>hello\n<pre>code>var a = 1;</code></pre></li>\n<li>world</li></ul>\n```\n\nWhich looks more reasonable? Why shouldn't code blocks be able to appear in\nlist items in a sane way?\n\n- - -\n\n``` bash\n$ markdown.js\n<div>hello</div>\n\n<span>hello</span>\n^D\n<p>&lt;div&gt;hello&lt;/div&gt;</p>\n\n<p>&lt;span&gt;hello&lt;/span&gt;</p>\n```\n\n``` bash\n$ marked\n<div>hello</div>\n\n<span>hello</span>\n^D\n<div>hello</div>\n\n\n<p><span>hello</span>\n</p>\n```\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/27\n\n``` bash\n$ markdown.js\n[![an image](/image)](/link)\n^D\n<p><a href=\"/image)](/link\">![an image</a></p>\n```\n\n``` bash\n$ marked\n[![an image](/image)](/link)\n^D\n<p><a href=\"/link\"><img src=\"/image\" alt=\"an image\"></a>\n</p>\n```\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/24\n\n``` bash\n$ markdown.js\n> a\n\n> b\n\n> c\n^D\n<blockquote><p>a</p><p>bundefined&gt; c</p></blockquote>\n```\n\n``` bash\n$ marked\n> a\n\n> b\n\n> c\n^D\n<blockquote><p>a\n\n</p></blockquote>\n<blockquote><p>b\n\n</p></blockquote>\n<blockquote><p>c\n</p></blockquote>\n```\n\n- - -\n\n``` bash\n$ markdown.pl\n* hello\n  * world\n    how\n\n    are\n    you\n\n  * today\n* hi\n^D\n<ul>\n<li><p>hello</p>\n\n<ul>\n<li>world\nhow</li>\n</ul>\n\n<p>are\nyou</p>\n\n<ul>\n<li>today</li>\n</ul></li>\n<li>hi</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n  * world\n    how\n\n    are\n    you\n\n  * today\n* hi\n^D\n<ul>\n<li><p>hello</p>\n<ul>\n<li><p>world\nhow</p>\n<p>are\nyou</p>\n</li>\n<li><p>today</p>\n</li>\n</ul>\n</li>\n<li>hi</li>\n</ul>\n```\n",
          "filepath": "data/repos/markedjs/marked-2.0/docs/broken.md",
          "repo": "markedjs/marked",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "b9ebcb1d-ad6e-4205-8921-8897e5097cbb",
        "score": 0.016129032258064516,
        "payload": {
          "text": "In Markdown 1.0.0 and earlier. Version\n8. This line turns into a list item.\nBecause a hard-wrapped line in the\nmiddle of a paragraph looked like a\nlist item.\n\nHere's one with a bullet.\n* criminey.\n",
          "filepath": "data/repos/markedjs/marked-2.0/test/specs/original/hard_wrapped_paragraphs_with_list_like_lines.md",
          "repo": "markedjs/marked",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "cabea191-d7f9-493d-b35d-adc445a3ae35",
        "score": 0.015873015873015872,
        "payload": {
          "text": "          }\n\n        case 'list':\n          {\n            marked.walkTokens(token.items, callback);\n            break;\n          }\n\n        default:\n          {\n            if (token.tokens) {\n              marked.walkTokens(token.tokens, callback);\n            }\n          }\n      }\n    }\n  };\n  /**\n   * Parse Inline\n   */\n\n\n  marked.parseInline = function (src, opt) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked.parseInline(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked.parseInline(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    opt = merge$2({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation$1(opt);\n\n    try {\n      var tokens = Lexer_1.lexInline(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(tokens, opt.walkTokens);\n      }\n\n      return Parser_1.parseInline(tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape$2(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  };\n  /**\n   * Expose\n   */\n\n\n  marked.Parser = Parser_1;\n  marked.parser = Parser_1.parse;\n  marked.Renderer = Renderer_1;\n  marked.TextRenderer = TextRenderer_1;\n  marked.Lexer = Lexer_1;\n  marked.lexer = Lexer_1.lex;\n  marked.Tokenizer = Tokenizer_1;\n  marked.Slugger = Slugger_1;\n  marked.parse = marked;\n  var marked_1 = marked;\n\n  return marked_1;\n\n})));",
          "filepath": "data/repos/markedjs/marked-2.0/lib/marked.js",
          "repo": "markedjs/marked",
          "version": "2.0",
          "chunk_index": 4
        }
      },
      {
        "id": "5036d3b1-27c4-4240-bf6d-b48015aa8661",
        "score": 0.015625,
        "payload": {
          "text": "---\nname: Bug report\nabout: Marked says it does this thing but does not\n\n---\n**Marked version:**\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\n<!--\n1. [Marked Demo](https://marked.js.org/demo/)\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\n-->\n\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\n<!--\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\n3. Actual output (or error) is...\n-->\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n",
          "filepath": "data/repos/markedjs/marked-2.0/.github/ISSUE_TEMPLATE/Bug_report.md",
          "repo": "markedjs/marked",
          "version": "2.0",
          "chunk_index": 0
        }
      },
      {
        "id": "29b0a5e2-5018-4e47-8da7-771b95f91624",
        "score": 0.015384615384615385,
        "payload": {
          "text": "[test]: http://google.com/ \"Google\"\n\n# A heading\n\nJust a note, I've found that I can't test my markdown parser vs others.\nFor example, both markdown.js and showdown code blocks in lists wrong. They're\nalso completely [inconsistent][test] with regards to paragraphs in list items.\n\nA link. Not anymore.\n\n<aside>This will make me fail the test because\nmarkdown.js doesnt acknowledge arbitrary html blocks =/</aside>\n\n* List Item 1\n\n* List Item 2\n  * New List Item 1\n    Hi, this is a list item.\n  * New List Item 2\n    Another item\n        Code goes here.\n        Lots of it...\n  * New List Item 3\n    The last item\n\n* List Item 3\nThe final item.\n\n* List Item 4\nThe real final item.\n\nParagraph.\n\n> * bq Item 1\n> * bq Item 2\n>   * New bq Item 1\n>   * New bq Item 2\n>   Text here\n\n* * *\n\n> Another blockquote!\n> I really need to get\n> more creative with\n> mockup text..\n> markdown.js breaks here again\n\nAnother Heading\n-------------\n\nHello *world*. Here is a [link](//hello).\nAnd an image ![alt](src).\n\n    Code goes here.\n    Lots of it...\n",
          "filepath": "data/repos/markedjs/marked-2.0/test/specs/new/main.md",
          "repo": "markedjs/marked",
          "version": "2.0",
          "chunk_index": 0
        }
      }
    ]
  },
  {
    "instance_id": "markedjs__marked-2811",
    "model_patch": "diff --git a/src/Tokenizer.js b/src/Tokenizer.js\n--- a/src/Tokenizer.js\n+++ b/src/Tokenizer.js\n@@ -1,5 +1,6 @@\n /**\n  * Tokenizer\n+ * Updated to handle CJK characters and punctuation correctly.\n  */\n class Tokenizer {\n   constructor(options) {\n@@ -200,7 +201,7 @@\n     }\n   }\n \n-  strong(src) {\n+  strong(src, maskedSrc, prevChar = '') {\n     const cap = this.rules.inline.strong.exec(src);\n     if (cap) {\n       const prevChar = prevChar || src[0];\n@@ -208,7 +209,7 @@\n       // workaround for match with CJK characters and punctuation\n       if (prevChar && /[\\u3000-\\u303F\\u4E00-\\u9FFF\\uFF00-\\uFFEF]/.test(prevChar)) {\n         return;\n-      }\n+      } \n       return {\n         type: 'strong',\n         raw: cap[0],\n@@ -220,7 +221,7 @@\n     }\n   }\n \n-  codespan(src) {\n+  codespan(src, maskedSrc, prevChar = '') {\n     const cap = this.rules.inline.code.exec(src);\n     if (cap) {\n       const text = cap[2].replace(/\\n/g, ' ');\n@@ -228,7 +229,7 @@\n       // workaround for match with CJK characters and punctuation\n       if (prevChar && /[\\u3000-\\u303F\\u4E00-\\u9FFF\\uFF00-\\uFFEF]/.test(prevChar)) {\n         return;\n-      }\n+      } \n       return {\n         type: 'codespan',\n         raw: cap[0],\n@@ -240,7 +241,7 @@\n     }\n   }\n \n-  link(src) {\n+  link(src, maskedSrc, prevChar = '') {\n     const cap = this.rules.inline.link.exec(src);\n     if (cap) {\n       const lastParenIndex = findClosingBracket(cap[2], '()');\n@@ -248,7 +249,7 @@\n       if (lastParenIndex > -1) {\n         const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n         const link = cap[0].substring(start, start + lastParenIndex);\n-        if (this.lexer.state.inLink) {\n+        if (this.lexer.state.inLink || (prevChar && /[\\u3000-\\u303F\\u4E00-\\u9FFF\\uFF00-\\uFFEF]/.test(prevChar))) {\n           return;\n         }\n         const href = link.replace(/\\\\([\\[\\]])/g, '$1');",
    "model_name_or_path": "text_dense_jina",
    "metrics": {
      "issue_embedding_time_ms_jina": 887.65,
      "issue_embedding_time_ms": 887.65,
      "retrieval_time_ms_jina": 0.82,
      "retrieval_time_ms": 0.82,
      "total_retrieval_time_ms": 888.47,
      "generation_time_ms": 7709.83,
      "total_io_time_ms": 8598.29,
      "input_total_token_limit": null,
      "issue_text_tokens": 1207,
      "vlm_tokens": 0,
      "retrieved_tokens": 14625,
      "prompt_template_tokens": 519,
      "total_input_prompt_tokens": 16351,
      "output_generated_tokens": 590,
      "total_io_tokens": 16941,
      "input_prompt_text": "[{\"type\": \"text\", \"text\": \"You will be provided with a partial code base and an issue statement explaining a problem to resolve.\\n<issue>\\nSyntax parse fails with Japanese punctuation (`\\u3001`), strong syntax and code syntax\\n**Marked version:**\\r\\n\\r\\n* v4.0.18\\r\\n\\r\\n**Describe the bug**\\r\\nA clear and concise description of what the bug is.\\r\\n\\r\\nCopy from https://github.com/volca/markdown-preview/issues/135.\\r\\n\\r\\nThe case below, it does not parse syntax correctly.\\r\\n\\r\\n```bash\\r\\n% cat test.md\\r\\n* \\u00d7: \\u3042\\u308c\\u3001**`foo`\\u3053\\u308c**\\u3001\\u305d\\u308c\\r\\n* \\u25cb: \\u3042\\u308c\\u3001 **`foo`\\u3053\\u308c**\\u3001\\u305d\\u308c\\r\\n* \\u00d7: \\u3042\\u308c\\u3001**`foo`\\u3053\\u308c** \\u3001\\u305d\\u308c\\r\\n\\r\\n* \\u25cb: \\u3042\\u308c\\u3001**foo\\u3053\\u308c**\\u3001\\u305d\\u308c\\r\\n* \\u25cb: \\u3042\\u308c\\u3001 **foo\\u3053\\u308c**\\u3001\\u305d\\u308c\\r\\n* \\u25cb: \\u3042\\u308c\\u3001**foo\\u3053\\u308c** \\u3001\\u305d\\u308c\\r\\n\\r\\n% npx marked --version\\r\\n4.0.18\\r\\n\\r\\n% npx marked < test.md\\r\\n<ul>\\r\\n<li><p>\\u00d7: \\u3042\\u308c\\u3001**<code>foo</code>\\u3053\\u308c**\\u3001\\u305d\\u308c</p>\\r\\n</li>\\r\\n<li><p>\\u25cb: \\u3042\\u308c\\u3001 <strong><code>foo</code>\\u3053\\u308c</strong>\\u3001\\u305d\\u308c</p>\\r\\n</li>\\r\\n<li><p>\\u00d7: \\u3042\\u308c\\u3001**<code>foo</code>\\u3053\\u308c** \\u3001\\u305d\\u308c</p>\\r\\n</li>\\r\\n<li><p>\\u25cb: \\u3042\\u308c\\u3001<strong>foo\\u3053\\u308c</strong>\\u3001\\u305d\\u308c</p>\\r\\n</li>\\r\\n<li><p>\\u25cb: \\u3042\\u308c\\u3001 <strong>foo\\u3053\\u308c</strong>\\u3001\\u305d\\u308c</p>\\r\\n</li>\\r\\n<li><p>\\u25cb: \\u3042\\u308c\\u3001<strong>foo\\u3053\\u308c</strong> \\u3001\\u305d\\u308c</p>\\r\\n</li>\\r\\n</ul>\\r\\n```\\r\\n\\r\\nWith Japanese punctuation (`\\u3001`), strong syntax (`**`), and code syntax (`` ` ``),\\r\\nit needs some space to make them parsed correctly (The former 3 examples).\\r\\n\\r\\nAlthough, without code syntax, no extra space is required (The latter 3 examples).\\r\\n\\r\\nSo it isn't a syntax parsing problem with CJK symbol characters?\\r\\n\\r\\n**To Reproduce**\\r\\nSteps to reproduce the behavior:\\r\\n\\r\\nAs above.\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n**Expected behavior**\\r\\nA clear and concise description of what you expected to happen.\\r\\n\\r\\nParse the syntax correctly as [Pandoc](https://github.com/jgm/pandoc).\\r\\n\\r\\n```bash\\r\\n% pandoc --version\\r\\npandoc.exe 2.18\\r\\nCompiled with pandoc-types 1.22.2, texmath 0.12.5, skylighting 0.12.3,\\r\\nciteproc 0.7, ipynb 0.2, hslua 2.2.0\\r\\nScripting engine: Lua 5.4\\r\\nUser data directory: C:\\\\Users\\\\yasuda\\\\AppData\\\\Roaming\\\\pandoc\\r\\nCopyright (C) 2006-2022 John MacFarlane. Web:  https://pandoc.org\\r\\nThis is free software; see the source for copying conditions. There is no\\r\\nwarranty, not even for merchantability or fitness for a particular purpose.\\r\\n\\r\\n% pandoc < test.md\\r\\n<ul>\\r\\n<li><p>\\u00d7: \\u3042\\u308c\\u3001<strong><code>foo</code>\\u3053\\u308c</strong>\\u3001\\u305d\\u308c</p></li>\\r\\n<li><p>\\u25cb: \\u3042\\u308c\\u3001 <strong><code>foo</code>\\u3053\\u308c</strong>\\u3001\\u305d\\u308c</p></li>\\r\\n<li><p>\\u00d7: \\u3042\\u308c\\u3001<strong><code>foo</code>\\u3053\\u308c</strong> \\u3001\\u305d\\u308c</p></li>\\r\\n<li><p>\\u25cb: \\u3042\\u308c\\u3001<strong>foo\\u3053\\u308c</strong>\\u3001\\u305d\\u308c</p></li>\\r\\n<li><p>\\u25cb: \\u3042\\u308c\\u3001 <strong>foo\\u3053\\u308c</strong>\\u3001\\u305d\\u308c</p></li>\\r\\n<li><p>\\u25cb: \\u3042\\u308c\\u3001<strong>foo\\u3053\\u308c</strong> \\u3001\\u305d\\u308c</p></li>\\r\\n</ul>\\r\\n```\\r\\n\\nlink inside of  Strong delimiter, the strong delimiter not work\\n**Marked version: https://github.com/markedjs/marked/blob/009427f65dadd5dff9ec0189e008677aea9fbcfa/lib/marked.js**\\r\\n\\r\\n**Describe the bug**\\r\\nWhen there is a link inside of a strong delimiter, followed closely by a character other than `[ .!,;] ....`, the strong delimiter is broken.\\r\\n\\r\\n**To Reproduce**\\r\\n![image](https://user-images.githubusercontent.com/11593903/117394732-a582c080-af31-11eb-919b-c15cf5f16069.png)\\r\\n\\r\\n```\\r\\n**STRONG**.  OK  \\r\\n**STRONG**\\u3002  OK  \\r\\n**STRONG**\\uff01  OK  \\r\\n**STRONG**M  OK\\r\\n\\r\\n**[STRONG]( http://abc.com )**!    OK  \\r\\n**[STRONG]( http://abc.com )**.    OK  \\r\\n**[STRONG]( http://abc.com )**\\uff01   bad!  \\r\\n**[STRONG]( http://abc.com )** \\uff01   OK   \\r\\n**[STRONG]( http://abc.com )**M   bad!  \\r\\n**[STRONG]( http://abc.com )** M   OK     \\r\\n```\\r\\n\\r\\n**Info**\\r\\nOld Version don't have this issue.  \\r\\n- A chrome extension called [Markdown Preview Plus](https://chrome.google.com/webstore/detail/febilkbfcbhebfnokafefeacimjdckgl) uses a relatively new version of marked, and it has this same problem.\\r\\n- The [browserify-markdown-editor](https://github.com/thlorenz/browserify-markdown-editor) uses an old version of marked ( 0.2.9 ), and it don't have this problem. https://thlorenz.com/browserify-markdown-editor/ \\r\\n\\r\\n\\r\\n**Expected behavior**  \\r\\nThe strong delimiter should bolden the wrapped text no matter of what's inside and what's behind.\\r\\n\\n\\n</issue>\\n\\n<code>\\n[start of broken.md]\\n# Markdown is broken\\n\\nI have a lot of scraps of markdown engine oddities that I've collected over the\\nyears. What you see below is slightly messy, but it's what I've managed to\\ncobble together to illustrate the differences between markdown engines, and\\nwhy, if there ever is a markdown specification, it has to be absolutely\\nthorough. There are a lot more of these little differences I have documented\\nelsewhere. I know I will find them lingering on my disk one day, but until\\nthen, I'll continue to add whatever strange nonsensical things I find.\\n\\nSome of these examples may only mention a particular engine compared to marked.\\nHowever, the examples with markdown.pl could easily be swapped out for\\ndiscount, upskirt, or markdown.js, and you would very easily see even more\\ninconsistencies.\\n\\nA lot of this was written when I was very unsatisfied with the inconsistencies\\nbetween markdown engines. Please excuse the frustration noticeable in my\\nwriting.\\n\\n## Examples of markdown's \\\"stupid\\\" list parsing\\n\\n```\\n$ markdown.pl\\n\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n\\n<ul>\\n<li>item2</li>\\n</ul>\\n\\n<p><p>text</p></li>\\n</ul></p>\\n```\\n\\n\\n```\\n$ marked\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n<ul>\\n<li>item2</li>\\n</ul>\\n<p>text</p>\\n</li>\\n</ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\n```\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\n```\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello<blockquote>\\n<p>world</p>\\n</blockquote>\\n</li>\\n</ul>\\n```\\n\\nAgain, which looks correct to you?\\n\\n- - -\\n\\nEXAMPLE:\\n\\n```\\n$ markdown.pl\\n* hello\\n  * world\\n    * hi\\n          code\\n^D\\n<ul>\\n<li>hello\\n<ul>\\n<li>world</li>\\n<li>hi\\n  code</li>\\n</ul></li>\\n</ul>\\n```\\n\\nThe code isn't a code block even though it's after the bullet margin. I know,\\nlets give it two more spaces, effectively making it 8 spaces past the bullet.\\n\\n```\\n$ markdown.pl\\n* hello\\n  * world\\n    * hi\\n            code\\n^D\\n<ul>\\n<li>hello\\n<ul>\\n<li>world</li>\\n<li>hi\\n    code</li>\\n</ul></li>\\n</ul>\\n```\\n\\nAnd, it's still not a code block. Did you also notice that the 3rd item isn't\\neven its own list? Markdown screws that up too because of its indentation\\nunaware parsing.\\n\\n- - -\\n\\nLet's look at some more examples of markdown's list parsing:\\n\\n```\\n$ markdown.pl\\n\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n\\n<ul>\\n<li>item2</li>\\n</ul>\\n\\n<p><p>text</p></li>\\n</ul></p>\\n```\\n\\nMisnested tags.\\n\\n\\n```\\n$ marked\\n  * item1\\n\\n    * item2\\n\\n  text\\n^D\\n<ul>\\n<li><p>item1</p>\\n<ul>\\n<li>item2</li>\\n</ul>\\n<p>text</p>\\n</li>\\n</ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\n```\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\nMore misnested tags.\\n\\n\\n```\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello<blockquote>\\n<p>world</p>\\n</blockquote>\\n</li>\\n</ul>\\n```\\n\\nAgain, which looks correct to you?\\n\\n- - -\\n\\n# Why quality matters - Part 2\\n\\n``` bash\\n$ markdown.pl\\n* hello\\n  > world\\n^D\\n<p><ul>\\n<li>hello</p>\\n\\n<blockquote>\\n  <p>world</li>\\n</ul></p>\\n</blockquote>\\n```\\n\\n``` bash\\n$ sundown # upskirt\\n* hello\\n  > world\\n^D\\n<ul>\\n<li>hello\\n&gt; world</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n  > world\\n^D\\n<ul><li>hello <blockquote><p>world</p></blockquote></li></ul>\\n```\\n\\nWhich looks correct to you?\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/23\\n\\n``` bash\\n$ markdown.pl # upskirt/markdown.js/discount\\n* hello\\n      var a = 1;\\n* world\\n^D\\n<ul>\\n<li>hello\\nvar a = 1;</li>\\n<li>world</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n      var a = 1;\\n* world\\n^D\\n<ul><li>hello\\n<pre>code>var a = 1;</code></pre></li>\\n<li>world</li></ul>\\n```\\n\\nWhich looks more reasonable? Why shouldn't code blocks be able to appear in\\nlist items in a sane way?\\n\\n- - -\\n\\n``` bash\\n$ markdown.js\\n<div>hello</div>\\n\\n<span>hello</span>\\n^D\\n<p>&lt;div&gt;hello&lt;/div&gt;</p>\\n\\n<p>&lt;span&gt;hello&lt;/span&gt;</p>\\n```\\n\\n``` bash\\n$ marked\\n<div>hello</div>\\n\\n<span>hello</span>\\n^D\\n<div>hello</div>\\n\\n\\n<p><span>hello</span>\\n</p>\\n```\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/27\\n\\n``` bash\\n$ markdown.js\\n[![an image](/image)](/link)\\n^D\\n<p><a href=\\\"/image)](/link\\\">![an image</a></p>\\n```\\n\\n``` bash\\n$ marked\\n[![an image](/image)](/link)\\n^D\\n<p><a href=\\\"/link\\\"><img src=\\\"/image\\\" alt=\\\"an image\\\"></a>\\n</p>\\n```\\n\\n- - -\\n\\nSee: https://github.com/evilstreak/markdown-js/issues/24\\n\\n``` bash\\n$ markdown.js\\n> a\\n\\n> b\\n\\n> c\\n^D\\n<blockquote><p>a</p><p>bundefined&gt; c</p></blockquote>\\n```\\n\\n``` bash\\n$ marked\\n> a\\n\\n> b\\n\\n> c\\n^D\\n<blockquote><p>a\\n\\n</p></blockquote>\\n<blockquote><p>b\\n\\n</p></blockquote>\\n<blockquote><p>c\\n</p></blockquote>\\n```\\n\\n- - -\\n\\n``` bash\\n$ markdown.pl\\n* hello\\n  * world\\n    how\\n\\n    are\\n    you\\n\\n  * today\\n* hi\\n^D\\n<ul>\\n<li><p>hello</p>\\n\\n<ul>\\n<li>world\\nhow</li>\\n</ul>\\n\\n<p>are\\nyou</p>\\n\\n<ul>\\n<li>today</li>\\n</ul></li>\\n<li>hi</li>\\n</ul>\\n```\\n\\n``` bash\\n$ marked\\n* hello\\n  * world\\n    how\\n\\n    are\\n    you\\n\\n  * today\\n* hi\\n^D\\n<ul>\\n<li><p>hello</p>\\n<ul>\\n<li><p>world\\nhow</p>\\n<p>are\\nyou</p>\\n</li>\\n<li><p>today</p>\\n</li>\\n</ul>\\n</li>\\n<li>hi</li>\\n</ul>\\n```\\n\\n[end of broken.md]\\n[start of Bug_report.md]\\n---\\nname: Bug report\\nabout: Marked says it does this thing but does not\\n\\n---\\n**Marked version:**\\n\\n**Describe the bug**\\nA clear and concise description of what the bug is.\\n\\n**To Reproduce**\\nSteps to reproduce the behavior:\\n\\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\\n<!--\\n1. [Marked Demo](https://marked.js.org/demo/)\\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\\n-->\\n\\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\\n<!--\\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\\n3. Actual output (or error) is...\\n-->\\n\\n**Expected behavior**\\nA clear and concise description of what you expected to happen.\\n\\n[end of Bug_report.md]\\n[start of marked.min.js]\\n/**\\n * marked v5.0.0 - a markdown parser\\n * Copyright (c) 2011-2023, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n[end of marked.min.js]\\n[start of marked.umd.js]\\n/**\\n * marked v5.0.0 - a markdown parser\\n * Copyright (c) 2011-2023, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n\\n/**\\n * DO NOT EDIT THIS FILE\\n * The code in this file is generated from files in ./src/\\n */\\n\\n(function (global, factory) {\\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.marked = {}));\\n})(this, (function (exports) { 'use strict';\\n\\n  function _defineProperties(target, props) {\\n    for (var i = 0; i < props.length; i++) {\\n      var descriptor = props[i];\\n      descriptor.enumerable = descriptor.enumerable || false;\\n      descriptor.configurable = true;\\n      if (\\\"value\\\" in descriptor) descriptor.writable = true;\\n      Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\\n    }\\n  }\\n  function _createClass(Constructor, protoProps, staticProps) {\\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\\n    if (staticProps) _defineProperties(Constructor, staticProps);\\n    Object.defineProperty(Constructor, \\\"prototype\\\", {\\n      writable: false\\n    });\\n    return Constructor;\\n  }\\n  function _extends() {\\n    _extends = Object.assign ? Object.assign.bind() : function (target) {\\n      for (var i = 1; i < arguments.length; i++) {\\n        var source = arguments[i];\\n        for (var key in source) {\\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\\n            target[key] = source[key];\\n          }\\n        }\\n      }\\n      return target;\\n    };\\n    return _extends.apply(this, arguments);\\n  }\\n  function _unsupportedIterableToArray(o, minLen) {\\n    if (!o) return;\\n    if (typeof o === \\\"string\\\") return _arrayLikeToArray(o, minLen);\\n    var n = Object.prototype.toString.call(o).slice(8, -1);\\n    if (n === \\\"Object\\\" && o.constructor) n = o.constructor.name;\\n    if (n === \\\"Map\\\" || n === \\\"Set\\\") return Array.from(o);\\n    if (n === \\\"Arguments\\\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\\n  }\\n  function _arrayLikeToArray(arr, len) {\\n    if (len == null || len > arr.length) len = arr.length;\\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\\n    return arr2;\\n  }\\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) {\\n    var it = typeof Symbol !== \\\"undefined\\\" && o[Symbol.iterator] || o[\\\"@@iterator\\\"];\\n    if (it) return (it = it.call(o)).next.bind(it);\\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \\\"number\\\") {\\n      if (it) o = it;\\n      var i = 0;\\n      return function () {\\n        if (i >= o.length) return {\\n          done: true\\n        };\\n        return {\\n          done: false,\\n          value: o[i++]\\n        };\\n      };\\n    }\\n    throw new TypeError(\\\"Invalid attempt to iterate non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\");\\n  }\\n  function _toPrimitive(input, hint) {\\n    if (typeof input !== \\\"object\\\" || input === null) return input;\\n    var prim = input[Symbol.toPrimitive];\\n    if (prim !== undefined) {\\n      var res = prim.call(input, hint || \\\"default\\\");\\n      if (typeof res !== \\\"object\\\") return res;\\n      throw new TypeError(\\\"@@toPrimitive must return a primitive value.\\\");\\n    }\\n    return (hint === \\\"string\\\" ? String : Number)(input);\\n  }\\n  function _toPropertyKey(arg) {\\n    var key = _toPrimitive(arg, \\\"string\\\");\\n    return typeof key === \\\"symbol\\\" ? key : String(key);\\n  }\\n\\n  function getDefaults() {\\n    return {\\n      async: false,\\n      baseUrl: null,\\n      breaks: false,\\n      extensions: null,\\n      gfm: true,\\n      headerIds: true,\\n      headerPrefix: '',\\n      highlight: null,\\n      hooks: null,\\n      langPrefix: 'language-',\\n      mangle: true,\\n      pedantic: false,\\n      renderer: null,\\n      sanitize: false,\\n      sanitizer: null,\\n      silent: false,\\n      smartypants: false,\\n      tokenizer: null,\\n      walkTokens: null,\\n      xhtml: false\\n    };\\n  }\\n  exports.defaults = getDefaults();\\n  function changeDefaults(newDefaults) {\\n    exports.defaults = newDefaults;\\n  }\\n\\n  /**\\n   * Helpers\\n   */\\n  var escapeTest = /[&<>\\\"']/;\\n  var escapeReplace = new RegExp(escapeTest.source, 'g');\\n  var escapeTestNoEncode = /[<>\\\"']|&(?!(#\\\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\\\w+);)/;\\n  var escapeReplaceNoEncode = new RegExp(escapeTestNoEncode.source, 'g');\\n  var escapeReplacements = {\\n    '&': '&amp;',\\n    '<': '&lt;',\\n    '>': '&gt;',\\n    '\\\"': '&quot;',\\n    \\\"'\\\": '&#39;'\\n  };\\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\\n    return escapeReplacements[ch];\\n  };\\n  function escape(html, encode) {\\n    if (encode) {\\n      if (escapeTest.test(html)) {\\n        return html.replace(escapeReplace, getEscapeReplacement);\\n      }\\n    } else {\\n      if (escapeTestNoEncode.test(html)) {\\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\\n      }\\n    }\\n    return html;\\n  }\\n  var unescapeTest = /&(#(?:\\\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\\\w+));?/ig;\\n\\n  /**\\n   * @param {string} html\\n   */\\n  function unescape(html) {\\n    // explicitly match decimal, hex, and named HTML entities\\n    return html.replace(unescapeTest, function (_, n) {\\n      n = n.toLowerCase();\\n      if (n === 'colon') return ':';\\n      if (n.charAt(0) === '#') {\\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\\n      }\\n      return '';\\n    });\\n  }\\n  var caret = /(^|[^\\\\[])\\\\^/g;\\n\\n  /**\\n   * @param {string | RegExp} regex\\n   * @param {string} opt\\n   */\\n  function edit(regex, opt) {\\n    regex = typeof regex === 'string' ? regex : regex.source;\\n    opt = opt || '';\\n    var obj = {\\n      replace: function replace(name, val) {\\n        val = val.source || val;\\n        val = val.replace(caret, '$1');\\n        regex = regex.replace(name, val);\\n        return obj;\\n      },\\n      getRegex: function getRegex() {\\n        return new RegExp(regex, opt);\\n      }\\n    };\\n    return obj;\\n  }\\n  var nonWordAndColonTest = /[^\\\\w:]/g;\\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\\n\\n  /**\\n   * @param {boolean} sanitize\\n   * @param {string} base\\n   * @param {string} href\\n   */\\n  function cleanUrl(sanitize, base, href) {\\n    if (sanitize) {\\n      var prot;\\n      try {\\n        prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, '').toLowerCase();\\n      } catch (e) {\\n        return null;\\n      }\\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\\n        return null;\\n      }\\n    }\\n    if (base && !originIndependentUrl.test(href)) {\\n      href = resolveUrl(base, href);\\n    }\\n    try {\\n      href = encodeURI(href).replace(/%25/g, '%');\\n    } catch (e) {\\n      return null;\\n    }\\n    return href;\\n  }\\n  var baseUrls = {};\\n  var justDomain = /^[^:]+:\\\\/*[^/]*$/;\\n  var protocol = /^([^:]+:)[\\\\s\\\\S]*$/;\\n  var domain = /^([^:]+:\\\\/*[^/]*)[\\\\s\\\\S]*$/;\\n\\n  /**\\n   * @param {string} base\\n   * @param {string} href\\n   */\\n  function resolveUrl(base, href) {\\n    if (!baseUrls[' ' + base]) {\\n      // we can ignore everything in base after the last slash of its path component,\\n      // but we might need to add _that_\\n      // https://tools.ietf.org/html/rfc3986#section-3\\n      if (justDomain.test(base)) {\\n        baseUrls[' ' + base] = base + '/';\\n      } else {\\n        baseUrls[' ' + base] = rtrim(base, '/', true);\\n      }\\n    }\\n    base = baseUrls[' ' + base];\\n    var relativeBase = base.indexOf(':') === -1;\\n    if (href.substring(0, 2) === '//') {\\n      if (relativeBase) {\\n        return href;\\n      }\\n      return base.replace(protocol, '$1') + href;\\n    } else if (href.charAt(0) === '/') {\\n      if (relativeBase) {\\n        return href;\\n      }\\n      return base.replace(domain, '$1') + href;\\n    } else {\\n      return base + href;\\n    }\\n  }\\n  var noopTest = {\\n    exec: function noopTest() {}\\n  };\\n  function splitCells(tableRow, count) {\\n    // ensure that every cell-delimiting pipe has a space\\n    // before it to distinguish it from an escaped pipe\\n    var row = tableRow.replace(/\\\\|/g, function (match, offset, str) {\\n        var escaped = false,\\n          curr = offset;\\n        while (--curr >= 0 && str[curr] === '\\\\\\\\') escaped = !escaped;\\n        if (escaped) {\\n          // odd number of slashes means | is escaped\\n          // so we leave it alone\\n          return '|';\\n        } else {\\n          // add space before unescaped |\\n          return ' |';\\n        }\\n      }),\\n      cells = row.split(/ \\\\|/);\\n    var i = 0;\\n\\n    // First/last cell in a row cannot be empty if it has no leading/trailing pipe\\n    if (!cells[0].trim()) {\\n      cells.shift();\\n    }\\n    if (cells.length > 0 && !cells[cells.length - 1].trim()) {\\n      cells.pop();\\n    }\\n    if (cells.length > count) {\\n      cells.splice(count);\\n    } else {\\n      while (cells.length < count) cells.push('');\\n    }\\n    for (; i < cells.length; i++) {\\n      // leading or trailing whitespace is ignored per the gfm spec\\n      cells[i] = cells[i].trim().replace(/\\\\\\\\\\\\|/g, '|');\\n    }\\n    return cells;\\n  }\\n\\n  /**\\n   * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\\n   * /c*$/ is vulnerable to REDOS.\\n   *\\n   * @param {string} str\\n   * @param {string} c\\n   * @param {boolean} invert Remove suffix of non-c chars instead. Default falsey.\\n   */\\n  function rtrim(str, c, invert) {\\n    var l = str.length;\\n    if (l === 0) {\\n      return '';\\n    }\\n\\n    // Length of suffix matching the invert condition.\\n    var suffLen = 0;\\n\\n    // Step left until we fail to match the invert condition.\\n    while (suffLen < l) {\\n      var currChar = str.charAt(l - suffLen - 1);\\n      if (currChar === c && !invert) {\\n        suffLen++;\\n      } else if (currChar !== c && invert) {\\n        suffLen++;\\n      } else {\\n        break;\\n      }\\n    }\\n    return str.slice(0, l - suffLen);\\n  }\\n  function findClosingBracket(str, b) {\\n    if (str.indexOf(b[1]) === -1) {\\n      return -1;\\n    }\\n    var l = str.length;\\n    var level = 0,\\n      i = 0;\\n    for (; i < l; i++) {\\n      if (str[i] === '\\\\\\\\') {\\n        i++;\\n      } else if (str[i] === b[0]) {\\n        level++;\\n      } else if (str[i] === b[1]) {\\n        level--;\\n        if (level < 0) {\\n          return i;\\n        }\\n      }\\n    }\\n    return -1;\\n  }\\n  function checkDeprecations(opt, callback) {\\n    if (!opt || opt.silent) {\\n      return;\\n    }\\n    if (callback) {\\n      console.warn('marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async');\\n    }\\n    if (opt.sanitize || opt.sanitizer) {\\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\\n    }\\n    if (opt.highlight || opt.langPrefix) {\\n      console.warn('marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight.');\\n    }\\n    if (opt.mangle) {\\n      console.warn('marked(): mangle parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-mangle.');\\n    }\\n    if (opt.baseUrl) {\\n      console.warn('marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url.');\\n    }\\n    if (opt.smartypants) {\\n      console.warn('marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants.');\\n    }\\n    if (opt.xhtml) {\\n      console.warn('marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml.');\\n    }\\n    if (opt.headerIds || opt.headerPrefix) {\\n      console.warn('marked(): headerIds and headerPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-gfm-heading-id.');\\n    }\\n  }\\n\\n  // copied from https://stackoverflow.com/a/5450113/806777\\n  /**\\n   * @param {string} pattern\\n   * @param {number} count\\n   */\\n  function repeatString(pattern, count) {\\n    if (count < 1) {\\n      return '';\\n    }\\n    var result = '';\\n    while (count > 1) {\\n      if (count & 1) {\\n        result += pattern;\\n      }\\n      count >>= 1;\\n      pattern += pattern;\\n    }\\n    return result + pattern;\\n  }\\n\\n  function outputLink(cap, link, raw, lexer) {\\n    var href = link.href;\\n    var title = link.title ? escape(link.title) : null;\\n    var text = cap[1].replace(/\\\\\\\\([\\\\[\\\\]])/g, '$1');\\n    if (cap[0].charAt(0) !== '!') {\\n      lexer.state.inLink = true;\\n      var token = {\\n        type: 'link',\\n        raw: raw,\\n        href: href,\\n        title: title,\\n        text: text,\\n        tokens: lexer.inlineTokens(text)\\n      };\\n      lexer.state.inLink = false;\\n      return token;\\n    }\\n    return {\\n      type: 'image',\\n      raw: raw,\\n      href: href,\\n      title: title,\\n      text: escape(text)\\n    };\\n  }\\n  function indentCodeCompensation(raw, text) {\\n    var matchIndentToCode = raw.match(/^(\\\\s+)(?:```)/);\\n    if (matchIndentToCode === null) {\\n      return text;\\n    }\\n    var indentToCode = matchIndentToCode[1];\\n    return text.split('\\\\n').map(function (node) {\\n      var matchIndentInNode = node.match(/^\\\\s+/);\\n      if (matchIndentInNode === null) {\\n        return node;\\n      }\\n      var indentInNode = matchIndentInNode[0];\\n      if (indentInNode.length >= indentToCode.length) {\\n        return node.slice(indentToCode.length);\\n      }\\n      return node;\\n    }).join('\\\\n');\\n  }\\n\\n  /**\\n   * Tokenizer\\n   */\\n  var Tokenizer = /*#__PURE__*/function () {\\n    function Tokenizer(options) {\\n      this.options = options || exports.defaults;\\n    }\\n    var _proto = Tokenizer.prototype;\\n    _proto.space = function space(src) {\\n      var cap = this.rules.block.newline.exec(src);\\n      if (cap && cap[0].length > 0) {\\n        return {\\n          type: 'space',\\n          raw: cap[0]\\n        };\\n      }\\n    };\\n    _proto.code = function code(src) {\\n      var cap = this.rules.block.code.exec(src);\\n      if (cap) {\\n        var text = cap[0].replace(/^ {1,4}/gm, '');\\n        return {\\n          type: 'code',\\n          raw: cap[0],\\n          codeBlockStyle: 'indented',\\n          text: !this.options.pedantic ? rtrim(text, '\\\\n') : text\\n        };\\n      }\\n    };\\n    _proto.fences = function fences(src) {\\n      var cap = this.rules.block.fences.exec(src);\\n      if (cap) {\\n        var raw = cap[0];\\n        var text = indentCodeCompensation(raw, cap[3] || '');\\n        return {\\n          type: 'code',\\n          raw: raw,\\n          lang: cap[2] ? cap[2].trim().replace(this.rules.inline._escapes, '$1') : cap[2],\\n          text: text\\n        };\\n      }\\n    };\\n    _proto.heading = function heading(src) {\\n      var cap = this.rules.block.heading.exec(src);\\n      if (cap) {\\n        var text = cap[2].trim();\\n\\n        // remove trailing #s\\n        if (/#$/.test(text)) {\\n          var trimmed = rtrim(text, '#');\\n          if (this.options.pedantic) {\\n            text = trimmed.trim();\\n          } else if (!trimmed || / $/.test(trimmed)) {\\n            // CommonMark requires space before trailing #s\\n            text = trimmed.trim();\\n          }\\n        }\\n        return {\\n          type: 'heading',\\n          raw: cap[0],\\n          depth: cap[1].length,\\n          text: text,\\n          tokens: this.lexer.inline(text)\\n        };\\n      }\\n    };\\n    _proto.hr = function hr(src) {\\n      var cap = this.rules.block.hr.exec(src);\\n      if (cap) {\\n        return {\\n          type: 'hr',\\n          raw: cap[0]\\n        };\\n      }\\n    };\\n    _proto.blockquote = function blockquote(src) {\\n      var cap = this.rules.block.blockquote.exec(src);\\n      if (cap) {\\n        var text = cap[0].replace(/^ *>[ \\\\t]?/gm, '');\\n        var top = this.lexer.state.top;\\n        this.lexer.state.top = true;\\n        var tokens = this.lexer.blockTokens(text);\\n        this.lexer.state.top = top;\\n        return {\\n          type: 'blockquote',\\n          raw: cap[0],\\n          tokens: tokens,\\n          text: text\\n        };\\n      }\\n    };\\n    _proto.list = function list(src) {\\n      var cap = this.rules.block.list.exec(src);\\n      if (cap) {\\n        var raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine, line, nextLine, rawLine, itemContents, endEarly;\\n        var bull = cap[1].trim();\\n        var isordered = bull.length > 1;\\n        var list = {\\n          type: 'list',\\n          raw: '',\\n          ordered: isordered,\\n          start: isordered ? +bull.slice(0, -1) : '',\\n          loose: false,\\n          items: []\\n        };\\n        bull = isordered ? \\\"\\\\\\\\d{1,9}\\\\\\\\\\\" + bull.slice(-1) : \\\"\\\\\\\\\\\" + bull;\\n        if (this.options.pedantic) {\\n          bull = isordered ? bull : '[*+-]';\\n        }\\n\\n        // Get next list item\\n        var itemRegex = new RegExp(\\\"^( {0,3}\\\" + bull + \\\")((?:[\\\\t ][^\\\\\\\\n]*)?(?:\\\\\\\\n|$))\\\");\\n\\n        // Check if current bullet point can start a new List Item\\n        while (src) {\\n          endEarly = false;\\n          if (!(cap = itemRegex.exec(src))) {\\n            break;\\n          }\\n          if (this.rules.block.hr.test(src)) {\\n            // End list if bullet was actually HR (possibly move into itemRegex?)\\n            break;\\n          }\\n          raw = cap[0];\\n          src = src.substring(raw.length);\\n          line = cap[2].split('\\\\n', 1)[0].replace(/^\\\\t+/, function (t) {\\n            return ' '.repeat(3 * t.length);\\n          });\\n          nextLine = src.split('\\\\n', 1)[0];\\n          if (this.options.pedantic) {\\n            indent = 2;\\n            itemContents = line.trimLeft();\\n          } else {\\n            indent = cap[2].search(/[^ ]/); // Find first non-space char\\n            indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\\n            itemContents = line.slice(indent);\\n            indent += cap[1].length;\\n          }\\n          blankLine = false;\\n          if (!line && /^ *$/.test(nextLine)) {\\n            // Items begin with at most one blank line\\n            raw += nextLine + '\\\\n';\\n            src = src.substring(nextLine.length + 1);\\n            endEarly = true;\\n          }\\n          if (!endEarly) {\\n            var nextBulletRegex = new RegExp(\\\"^ {0,\\\" + Math.min(3, indent - 1) + \\\"}(?:[*+-]|\\\\\\\\d{1,9}[.)])((?:[ \\\\t][^\\\\\\\\n]*)?(?:\\\\\\\\n|$))\\\");\\n            var hrRegex = new RegExp(\\\"^ {0,\\\" + Math.min(3, indent - 1) + \\\"}((?:- *){3,}|(?:_ *){3,}|(?:\\\\\\\\* *){3,})(?:\\\\\\\\n+|$)\\\");\\n            var fencesBeginRegex = new RegExp(\\\"^ {0,\\\" + Math.min(3, indent - 1) + \\\"}(?:```|~~~)\\\");\\n            var headingBeginRegex = new RegExp(\\\"^ {0,\\\" + Math.min(3, indent - 1) + \\\"}#\\\");\\n\\n            // Check if following lines should be included in List Item\\n            while (src) {\\n              rawLine = src.split('\\\\n', 1)[0];\\n              nextLine = rawLine;\\n\\n              // Re-align to follow commonmark nesting rules\\n              if (this.options.pedantic) {\\n                nextLine = nextLine.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\\n              }\\n\\n              // End list item if found code fences\\n              if (fencesBeginRegex.test(nextLine)) {\\n                break;\\n              }\\n\\n              // End list item if found start of new heading\\n              if (headingBeginRegex.test(nextLine)) {\\n                break;\\n              }\\n\\n              // End list item if found start of new bullet\\n              if (nextBulletRegex.test(nextLine)) {\\n                break;\\n              }\\n\\n              // Horizontal rule found\\n              if (hrRegex.test(src)) {\\n                break;\\n              }\\n              if (nextLine.search(/[^ ]/) >= indent || !nextLine.trim()) {\\n                // Dedent if possible\\n                itemContents += '\\\\n' + nextLine.slice(indent);\\n              } else {\\n                // not enough indentation\\n                if (blankLine) {\\n                  break;\\n                }\\n\\n                // paragraph continuation unless last line was a different block level element\\n                if (line.search(/[^ ]/) >= 4) {\\n                  // indented code block\\n                  break;\\n                }\\n                if (fencesBeginRegex.test(line)) {\\n                  break;\\n                }\\n                if (headingBeginRegex.test(line)) {\\n                  break;\\n                }\\n                if (hrRegex.test(line)) {\\n                  break;\\n                }\\n                itemContents += '\\\\n' + nextLine;\\n              }\\n              if (!blankLine && !nextLine.trim()) {\\n                // Check if current line is blank\\n                blankLine = true;\\n              }\\n              raw += rawLine + '\\\\n';\\n              src = src.substring(rawLine.length + 1);\\n              line = nextLine.slice(indent);\\n            }\\n          }\\n          if (!list.loose) {\\n            // If the previous item ended with a blank line, the list is loose\\n            if (endsWithBlankLine) {\\n              list.loose = true;\\n            } else if (/\\\\n *\\\\n *$/.test(raw)) {\\n              endsWithBlankLine = true;\\n            }\\n          }\\n\\n          // Check for task list items\\n          if (this.options.gfm) {\\n            istask = /^\\\\[[ xX]\\\\] /.exec(itemContents);\\n            if (istask) {\\n              ischecked = istask[0] !== '[ ] ';\\n              itemContents = itemContents.replace(/^\\\\[[ xX]\\\\] +/, '');\\n            }\\n          }\\n          list.items.push({\\n            type: 'list_item',\\n            raw: raw,\\n            task: !!istask,\\n            checked: ischecked,\\n            loose: false,\\n            text: itemContents\\n          });\\n          list.raw += raw;\\n        }\\n\\n        // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\\n        list.items[list.items.length - 1].raw = raw.trimRight();\\n        list.items[list.items.length - 1].text = itemContents.trimRight();\\n        list.raw = list.raw.trimRight();\\n        var l = list.items.length;\\n\\n        // Item child tokens handled here at end because we needed to have the final item to trim it first\\n        for (i = 0; i < l; i++) {\\n          this.lexer.state.top = false;\\n          list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\\n          if (!list.loose) {\\n            // Check if list should be loose\\n            var spacers = list.items[i].tokens.filter(function (t) {\\n              return t.type === 'space';\\n            });\\n            var hasMultipleLineBreaks = spacers.length > 0 && spacers.some(function (t) {\\n              return /\\\\n.*\\\\n/.test(t.raw);\\n            });\\n            list.loose = hasMultipleLineBreaks;\\n          }\\n        }\\n\\n        // Set all items to loose if list is loose\\n        if (list.loose) {\\n          for (i = 0; i < l; i++) {\\n            list.items[i].loose = true;\\n          }\\n        }\\n        return list;\\n      }\\n    };\\n    _proto.html = function html(src) {\\n      var cap = this.rules.block.html.exec(src);\\n      if (cap) {\\n        var token = {\\n          type: 'html',\\n          block: true,\\n          raw: cap[0],\\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\\n          text: cap[0]\\n        };\\n        if (this.options.sanitize) {\\n          var text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\\n          token.type = 'paragraph';\\n          token.text = text;\\n          token.tokens = this.lexer.inline(text);\\n        }\\n        return token;\\n      }\\n    };\\n    _proto.def = function def(src) {\\n      var cap = this.rules.block.def.exec(src);\\n      if (cap) {\\n        var tag = cap[1].toLowerCase().replace(/\\\\s+/g, ' ');\\n        var href = cap[2] ? cap[2].replace(/^<(.*)>$/, '$1').replace(this.rules.inline._escapes, '$1') : '';\\n        var title = cap[3] ? cap[3].substring(1, cap[3].length - 1).replace(this.rules.inline._escapes, '$1') : cap[3];\\n        return {\\n          type: 'def',\\n          tag: tag,\\n          raw: cap[0],\\n          href: href,\\n          title: title\\n        };\\n      }\\n    };\\n    _proto.table = function table(src) {\\n      var cap = this.rules.block.table.exec(src);\\n      if (cap) {\\n        var item = {\\n          type: 'table',\\n          header: splitCells(cap[1]).map(function (c) {\\n            return {\\n              text: c\\n            };\\n          }),\\n[end of marked.umd.js]\\n[start of marked.esm.js]\\n/**\\n * marked v5.0.0 - a markdown parser\\n * Copyright (c) 2011-2023, Christopher Jeffrey. (MIT Licensed)\\n * https://github.com/markedjs/marked\\n */\\n\\n/**\\n * DO NOT EDIT THIS FILE\\n * The code in this file is generated from files in ./src/\\n */\\n\\nfunction getDefaults() {\\n  return {\\n    async: false,\\n    baseUrl: null,\\n    breaks: false,\\n    extensions: null,\\n    gfm: true,\\n    headerIds: true,\\n    headerPrefix: '',\\n    highlight: null,\\n    hooks: null,\\n    langPrefix: 'language-',\\n    mangle: true,\\n    pedantic: false,\\n    renderer: null,\\n    sanitize: false,\\n    sanitizer: null,\\n    silent: false,\\n    smartypants: false,\\n    tokenizer: null,\\n    walkTokens: null,\\n    xhtml: false\\n  };\\n}\\n\\nlet defaults = getDefaults();\\n\\nfunction changeDefaults(newDefaults) {\\n  defaults = newDefaults;\\n}\\n\\n/**\\n * Helpers\\n */\\nconst escapeTest = /[&<>\\\"']/;\\nconst escapeReplace = new RegExp(escapeTest.source, 'g');\\nconst escapeTestNoEncode = /[<>\\\"']|&(?!(#\\\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\\\w+);)/;\\nconst escapeReplaceNoEncode = new RegExp(escapeTestNoEncode.source, 'g');\\nconst escapeReplacements = {\\n  '&': '&amp;',\\n  '<': '&lt;',\\n  '>': '&gt;',\\n  '\\\"': '&quot;',\\n  \\\"'\\\": '&#39;'\\n};\\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\\nfunction escape(html, encode) {\\n  if (encode) {\\n    if (escapeTest.test(html)) {\\n      return html.replace(escapeReplace, getEscapeReplacement);\\n    }\\n  } else {\\n    if (escapeTestNoEncode.test(html)) {\\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\\n    }\\n  }\\n\\n  return html;\\n}\\n\\nconst unescapeTest = /&(#(?:\\\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\\\w+));?/ig;\\n\\n/**\\n * @param {string} html\\n */\\nfunction unescape(html) {\\n  // explicitly match decimal, hex, and named HTML entities\\n  return html.replace(unescapeTest, (_, n) => {\\n    n = n.toLowerCase();\\n    if (n === 'colon') return ':';\\n    if (n.charAt(0) === '#') {\\n      return n.charAt(1) === 'x'\\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\\n        : String.fromCharCode(+n.substring(1));\\n    }\\n    return '';\\n  });\\n}\\n\\nconst caret = /(^|[^\\\\[])\\\\^/g;\\n\\n/**\\n * @param {string | RegExp} regex\\n * @param {string} opt\\n */\\nfunction edit(regex, opt) {\\n  regex = typeof regex === 'string' ? regex : regex.source;\\n  opt = opt || '';\\n  const obj = {\\n    replace: (name, val) => {\\n      val = val.source || val;\\n      val = val.replace(caret, '$1');\\n      regex = regex.replace(name, val);\\n      return obj;\\n    },\\n    getRegex: () => {\\n      return new RegExp(regex, opt);\\n    }\\n  };\\n  return obj;\\n}\\n\\nconst nonWordAndColonTest = /[^\\\\w:]/g;\\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\\n\\n/**\\n * @param {boolean} sanitize\\n * @param {string} base\\n * @param {string} href\\n */\\nfunction cleanUrl(sanitize, base, href) {\\n  if (sanitize) {\\n    let prot;\\n    try {\\n      prot = decodeURIComponent(unescape(href))\\n        .replace(nonWordAndColonTest, '')\\n        .toLowerCase();\\n    } catch (e) {\\n      return null;\\n    }\\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\\n      return null;\\n    }\\n  }\\n  if (base && !originIndependentUrl.test(href)) {\\n    href = resolveUrl(base, href);\\n  }\\n  try {\\n    href = encodeURI(href).replace(/%25/g, '%');\\n  } catch (e) {\\n    return null;\\n  }\\n  return href;\\n}\\n\\nconst baseUrls = {};\\nconst justDomain = /^[^:]+:\\\\/*[^/]*$/;\\nconst protocol = /^([^:]+:)[\\\\s\\\\S]*$/;\\nconst domain = /^([^:]+:\\\\/*[^/]*)[\\\\s\\\\S]*$/;\\n\\n/**\\n * @param {string} base\\n * @param {string} href\\n */\\nfunction resolveUrl(base, href) {\\n  if (!baseUrls[' ' + base]) {\\n    // we can ignore everything in base after the last slash of its path component,\\n    // but we might need to add _that_\\n    // https://tools.ietf.org/html/rfc3986#section-3\\n    if (justDomain.test(base)) {\\n      baseUrls[' ' + base] = base + '/';\\n    } else {\\n      baseUrls[' ' + base] = rtrim(base, '/', true);\\n    }\\n  }\\n  base = baseUrls[' ' + base];\\n  const relativeBase = base.indexOf(':') === -1;\\n\\n  if (href.substring(0, 2) === '//') {\\n    if (relativeBase) {\\n      return href;\\n    }\\n    return base.replace(protocol, '$1') + href;\\n  } else if (href.charAt(0) === '/') {\\n    if (relativeBase) {\\n      return href;\\n    }\\n    return base.replace(domain, '$1') + href;\\n  } else {\\n    return base + href;\\n  }\\n}\\n\\nconst noopTest = { exec: function noopTest() {} };\\n\\nfunction splitCells(tableRow, count) {\\n  // ensure that every cell-delimiting pipe has a space\\n  // before it to distinguish it from an escaped pipe\\n  const row = tableRow.replace(/\\\\|/g, (match, offset, str) => {\\n      let escaped = false,\\n        curr = offset;\\n      while (--curr >= 0 && str[curr] === '\\\\\\\\') escaped = !escaped;\\n      if (escaped) {\\n        // odd number of slashes means | is escaped\\n        // so we leave it alone\\n        return '|';\\n      } else {\\n        // add space before unescaped |\\n        return ' |';\\n      }\\n    }),\\n    cells = row.split(/ \\\\|/);\\n  let i = 0;\\n\\n  // First/last cell in a row cannot be empty if it has no leading/trailing pipe\\n  if (!cells[0].trim()) { cells.shift(); }\\n  if (cells.length > 0 && !cells[cells.length - 1].trim()) { cells.pop(); }\\n\\n  if (cells.length > count) {\\n    cells.splice(count);\\n  } else {\\n    while (cells.length < count) cells.push('');\\n  }\\n\\n  for (; i < cells.length; i++) {\\n    // leading or trailing whitespace is ignored per the gfm spec\\n    cells[i] = cells[i].trim().replace(/\\\\\\\\\\\\|/g, '|');\\n  }\\n  return cells;\\n}\\n\\n/**\\n * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\\n * /c*$/ is vulnerable to REDOS.\\n *\\n * @param {string} str\\n * @param {string} c\\n * @param {boolean} invert Remove suffix of non-c chars instead. Default falsey.\\n */\\nfunction rtrim(str, c, invert) {\\n  const l = str.length;\\n  if (l === 0) {\\n    return '';\\n  }\\n\\n  // Length of suffix matching the invert condition.\\n  let suffLen = 0;\\n\\n  // Step left until we fail to match the invert condition.\\n  while (suffLen < l) {\\n    const currChar = str.charAt(l - suffLen - 1);\\n    if (currChar === c && !invert) {\\n      suffLen++;\\n    } else if (currChar !== c && invert) {\\n      suffLen++;\\n    } else {\\n      break;\\n    }\\n  }\\n\\n  return str.slice(0, l - suffLen);\\n}\\n\\nfunction findClosingBracket(str, b) {\\n  if (str.indexOf(b[1]) === -1) {\\n    return -1;\\n  }\\n  const l = str.length;\\n  let level = 0,\\n    i = 0;\\n  for (; i < l; i++) {\\n    if (str[i] === '\\\\\\\\') {\\n      i++;\\n    } else if (str[i] === b[0]) {\\n      level++;\\n    } else if (str[i] === b[1]) {\\n      level--;\\n      if (level < 0) {\\n        return i;\\n      }\\n    }\\n  }\\n  return -1;\\n}\\n\\nfunction checkDeprecations(opt, callback) {\\n  if (!opt || opt.silent) {\\n    return;\\n  }\\n\\n  if (callback) {\\n    console.warn('marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async');\\n  }\\n\\n  if (opt.sanitize || opt.sanitizer) {\\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\\n  }\\n\\n  if (opt.highlight || opt.langPrefix) {\\n    console.warn('marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight.');\\n  }\\n\\n  if (opt.mangle) {\\n    console.warn('marked(): mangle parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-mangle.');\\n  }\\n\\n  if (opt.baseUrl) {\\n    console.warn('marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url.');\\n  }\\n\\n  if (opt.smartypants) {\\n    console.warn('marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants.');\\n  }\\n\\n  if (opt.xhtml) {\\n    console.warn('marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml.');\\n  }\\n\\n  if (opt.headerIds || opt.headerPrefix) {\\n    console.warn('marked(): headerIds and headerPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-gfm-heading-id.');\\n  }\\n}\\n\\n// copied from https://stackoverflow.com/a/5450113/806777\\n/**\\n * @param {string} pattern\\n * @param {number} count\\n */\\nfunction repeatString(pattern, count) {\\n  if (count < 1) {\\n    return '';\\n  }\\n  let result = '';\\n  while (count > 1) {\\n    if (count & 1) {\\n      result += pattern;\\n    }\\n    count >>= 1;\\n    pattern += pattern;\\n  }\\n  return result + pattern;\\n}\\n\\nfunction outputLink(cap, link, raw, lexer) {\\n  const href = link.href;\\n  const title = link.title ? escape(link.title) : null;\\n  const text = cap[1].replace(/\\\\\\\\([\\\\[\\\\]])/g, '$1');\\n\\n  if (cap[0].charAt(0) !== '!') {\\n    lexer.state.inLink = true;\\n    const token = {\\n      type: 'link',\\n      raw,\\n      href,\\n      title,\\n      text,\\n      tokens: lexer.inlineTokens(text)\\n    };\\n    lexer.state.inLink = false;\\n    return token;\\n  }\\n  return {\\n    type: 'image',\\n    raw,\\n    href,\\n    title,\\n    text: escape(text)\\n  };\\n}\\n\\nfunction indentCodeCompensation(raw, text) {\\n  const matchIndentToCode = raw.match(/^(\\\\s+)(?:```)/);\\n\\n  if (matchIndentToCode === null) {\\n    return text;\\n  }\\n\\n  const indentToCode = matchIndentToCode[1];\\n\\n  return text\\n    .split('\\\\n')\\n    .map(node => {\\n      const matchIndentInNode = node.match(/^\\\\s+/);\\n      if (matchIndentInNode === null) {\\n        return node;\\n      }\\n\\n      const [indentInNode] = matchIndentInNode;\\n\\n      if (indentInNode.length >= indentToCode.length) {\\n        return node.slice(indentToCode.length);\\n      }\\n\\n      return node;\\n    })\\n    .join('\\\\n');\\n}\\n\\n/**\\n * Tokenizer\\n */\\nclass Tokenizer {\\n  constructor(options) {\\n    this.options = options || defaults;\\n  }\\n\\n  space(src) {\\n    const cap = this.rules.block.newline.exec(src);\\n    if (cap && cap[0].length > 0) {\\n      return {\\n        type: 'space',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  code(src) {\\n    const cap = this.rules.block.code.exec(src);\\n    if (cap) {\\n      const text = cap[0].replace(/^ {1,4}/gm, '');\\n      return {\\n        type: 'code',\\n        raw: cap[0],\\n        codeBlockStyle: 'indented',\\n        text: !this.options.pedantic\\n          ? rtrim(text, '\\\\n')\\n          : text\\n      };\\n    }\\n  }\\n\\n  fences(src) {\\n    const cap = this.rules.block.fences.exec(src);\\n    if (cap) {\\n      const raw = cap[0];\\n      const text = indentCodeCompensation(raw, cap[3] || '');\\n\\n      return {\\n        type: 'code',\\n        raw,\\n        lang: cap[2] ? cap[2].trim().replace(this.rules.inline._escapes, '$1') : cap[2],\\n        text\\n      };\\n    }\\n  }\\n\\n  heading(src) {\\n    const cap = this.rules.block.heading.exec(src);\\n    if (cap) {\\n      let text = cap[2].trim();\\n\\n      // remove trailing #s\\n      if (/#$/.test(text)) {\\n        const trimmed = rtrim(text, '#');\\n        if (this.options.pedantic) {\\n          text = trimmed.trim();\\n        } else if (!trimmed || / $/.test(trimmed)) {\\n          // CommonMark requires space before trailing #s\\n          text = trimmed.trim();\\n        }\\n      }\\n\\n      return {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[1].length,\\n        text,\\n        tokens: this.lexer.inline(text)\\n      };\\n    }\\n  }\\n\\n  hr(src) {\\n    const cap = this.rules.block.hr.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'hr',\\n        raw: cap[0]\\n      };\\n    }\\n  }\\n\\n  blockquote(src) {\\n    const cap = this.rules.block.blockquote.exec(src);\\n    if (cap) {\\n      const text = cap[0].replace(/^ *>[ \\\\t]?/gm, '');\\n      const top = this.lexer.state.top;\\n      this.lexer.state.top = true;\\n      const tokens = this.lexer.blockTokens(text);\\n      this.lexer.state.top = top;\\n      return {\\n        type: 'blockquote',\\n        raw: cap[0],\\n        tokens,\\n        text\\n      };\\n    }\\n  }\\n\\n  list(src) {\\n    let cap = this.rules.block.list.exec(src);\\n    if (cap) {\\n      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine,\\n        line, nextLine, rawLine, itemContents, endEarly;\\n\\n      let bull = cap[1].trim();\\n      const isordered = bull.length > 1;\\n\\n      const list = {\\n        type: 'list',\\n        raw: '',\\n        ordered: isordered,\\n        start: isordered ? +bull.slice(0, -1) : '',\\n        loose: false,\\n        items: []\\n      };\\n\\n      bull = isordered ? `\\\\\\\\d{1,9}\\\\\\\\${bull.slice(-1)}` : `\\\\\\\\${bull}`;\\n\\n      if (this.options.pedantic) {\\n        bull = isordered ? bull : '[*+-]';\\n      }\\n\\n      // Get next list item\\n      const itemRegex = new RegExp(`^( {0,3}${bull})((?:[\\\\t ][^\\\\\\\\n]*)?(?:\\\\\\\\n|$))`);\\n\\n      // Check if current bullet point can start a new List Item\\n      while (src) {\\n        endEarly = false;\\n        if (!(cap = itemRegex.exec(src))) {\\n          break;\\n        }\\n\\n        if (this.rules.block.hr.test(src)) { // End list if bullet was actually HR (possibly move into itemRegex?)\\n          break;\\n        }\\n\\n        raw = cap[0];\\n        src = src.substring(raw.length);\\n\\n        line = cap[2].split('\\\\n', 1)[0].replace(/^\\\\t+/, (t) => ' '.repeat(3 * t.length));\\n        nextLine = src.split('\\\\n', 1)[0];\\n\\n        if (this.options.pedantic) {\\n          indent = 2;\\n          itemContents = line.trimLeft();\\n        } else {\\n          indent = cap[2].search(/[^ ]/); // Find first non-space char\\n          indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\\n          itemContents = line.slice(indent);\\n          indent += cap[1].length;\\n        }\\n\\n        blankLine = false;\\n\\n        if (!line && /^ *$/.test(nextLine)) { // Items begin with at most one blank line\\n          raw += nextLine + '\\\\n';\\n          src = src.substring(nextLine.length + 1);\\n          endEarly = true;\\n        }\\n\\n        if (!endEarly) {\\n          const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\\\\\d{1,9}[.)])((?:[ \\\\t][^\\\\\\\\n]*)?(?:\\\\\\\\n|$))`);\\n          const hrRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\\\\\* *){3,})(?:\\\\\\\\n+|$)`);\\n          const fencesBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\\\\`\\\\`\\\\`|~~~)`);\\n          const headingBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`);\\n\\n          // Check if following lines should be included in List Item\\n          while (src) {\\n            rawLine = src.split('\\\\n', 1)[0];\\n            nextLine = rawLine;\\n\\n            // Re-align to follow commonmark nesting rules\\n            if (this.options.pedantic) {\\n              nextLine = nextLine.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\\n            }\\n\\n            // End list item if found code fences\\n            if (fencesBeginRegex.test(nextLine)) {\\n              break;\\n            }\\n\\n            // End list item if found start of new heading\\n            if (headingBeginRegex.test(nextLine)) {\\n              break;\\n            }\\n\\n            // End list item if found start of new bullet\\n            if (nextBulletRegex.test(nextLine)) {\\n              break;\\n            }\\n\\n            // Horizontal rule found\\n            if (hrRegex.test(src)) {\\n              break;\\n            }\\n\\n            if (nextLine.search(/[^ ]/) >= indent || !nextLine.trim()) { // Dedent if possible\\n              itemContents += '\\\\n' + nextLine.slice(indent);\\n            } else {\\n              // not enough indentation\\n              if (blankLine) {\\n                break;\\n              }\\n\\n              // paragraph continuation unless last line was a different block level element\\n              if (line.search(/[^ ]/) >= 4) { // indented code block\\n                break;\\n              }\\n              if (fencesBeginRegex.test(line)) {\\n                break;\\n              }\\n              if (headingBeginRegex.test(line)) {\\n                break;\\n              }\\n              if (hrRegex.test(line)) {\\n                break;\\n              }\\n\\n              itemContents += '\\\\n' + nextLine;\\n            }\\n\\n            if (!blankLine && !nextLine.trim()) { // Check if current line is blank\\n              blankLine = true;\\n            }\\n\\n            raw += rawLine + '\\\\n';\\n            src = src.substring(rawLine.length + 1);\\n            line = nextLine.slice(indent);\\n          }\\n        }\\n\\n        if (!list.loose) {\\n          // If the previous item ended with a blank line, the list is loose\\n          if (endsWithBlankLine) {\\n            list.loose = true;\\n          } else if (/\\\\n *\\\\n *$/.test(raw)) {\\n            endsWithBlankLine = true;\\n          }\\n        }\\n\\n        // Check for task list items\\n        if (this.options.gfm) {\\n          istask = /^\\\\[[ xX]\\\\] /.exec(itemContents);\\n          if (istask) {\\n            ischecked = istask[0] !== '[ ] ';\\n            itemContents = itemContents.replace(/^\\\\[[ xX]\\\\] +/, '');\\n          }\\n        }\\n\\n        list.items.push({\\n          type: 'list_item',\\n          raw,\\n          task: !!istask,\\n          checked: ischecked,\\n          loose: false,\\n          text: itemContents\\n        });\\n\\n        list.raw += raw;\\n      }\\n\\n      // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\\n      list.items[list.items.length - 1].raw = raw.trimRight();\\n      list.items[list.items.length - 1].text = itemContents.trimRight();\\n      list.raw = list.raw.trimRight();\\n\\n      const l = list.items.length;\\n\\n      // Item child tokens handled here at end because we needed to have the final item to trim it first\\n      for (i = 0; i < l; i++) {\\n        this.lexer.state.top = false;\\n        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\\n\\n        if (!list.loose) {\\n          // Check if list should be loose\\n          const spacers = list.items[i].tokens.filter(t => t.type === 'space');\\n          const hasMultipleLineBreaks = spacers.length > 0 && spacers.some(t => /\\\\n.*\\\\n/.test(t.raw));\\n\\n          list.loose = hasMultipleLineBreaks;\\n        }\\n      }\\n\\n      // Set all items to loose if list is loose\\n      if (list.loose) {\\n        for (i = 0; i < l; i++) {\\n          list.items[i].loose = true;\\n        }\\n      }\\n\\n      return list;\\n    }\\n  }\\n\\n  html(src) {\\n    const cap = this.rules.block.html.exec(src);\\n    if (cap) {\\n      const token = {\\n        type: 'html',\\n        block: true,\\n        raw: cap[0],\\n        pre: !this.options.sanitizer\\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\\n        text: cap[0]\\n      };\\n      if (this.options.sanitize) {\\n        const text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\\n        token.type = 'paragraph';\\n        token.text = text;\\n        token.tokens = this.lexer.inline(text);\\n      }\\n      return token;\\n    }\\n  }\\n\\n  def(src) {\\n    const cap = this.rules.block.def.exec(src);\\n    if (cap) {\\n      const tag = cap[1].toLowerCase().replace(/\\\\s+/g, ' ');\\n      const href = cap[2] ? cap[2].replace(/^<(.*)>$/, '$1').replace(this.rules.inline._escapes, '$1') : '';\\n      const title = cap[3] ? cap[3].substring(1, cap[3].length - 1).replace(this.rules.inline._escapes, '$1') : cap[3];\\n      return {\\n        type: 'def',\\n        tag,\\n        raw: cap[0],\\n        href,\\n        title\\n      };\\n    }\\n  }\\n\\n  table(src) {\\n    const cap = this.rules.block.table.exec(src);\\n    if (cap) {\\n      const item = {\\n        type: 'table',\\n        header: splitCells(cap[1]).map(c => { return { text: c }; }),\\n        align: cap[2].replace(/^ *|\\\\| *$/g, '').split(/ *\\\\| */),\\n        rows: cap[3] && cap[3].trim() ? cap[3].replace(/\\\\n[ \\\\t]*$/, '').split('\\\\n') : []\\n      };\\n\\n      if (item.header.length === item.align.length) {\\n        item.raw = cap[0];\\n\\n        let l = item.align.length;\\n        let i, j, k, row;\\n        for (i = 0; i < l; i++) {\\n          if (/^ *-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'right';\\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\\n            item.align[i] = 'center';\\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\\n            item.align[i] = 'left';\\n          } else {\\n            item.align[i] = null;\\n          }\\n        }\\n\\n        l = item.rows.length;\\n        for (i = 0; i < l; i++) {\\n          item.rows[i] = splitCells(item.rows[i], item.header.length).map(c => { return { text: c }; });\\n        }\\n\\n        // parse child tokens inside headers and cells\\n\\n        // header child tokens\\n        l = item.header.length;\\n        for (j = 0; j < l; j++) {\\n          item.header[j].tokens = this.lexer.inline(item.header[j].text);\\n        }\\n\\n        // cell child tokens\\n        l = item.rows.length;\\n        for (j = 0; j < l; j++) {\\n          row = item.rows[j];\\n          for (k = 0; k < row.length; k++) {\\n            row[k].tokens = this.lexer.inline(row[k].text);\\n          }\\n        }\\n\\n        return item;\\n      }\\n    }\\n  }\\n\\n  lheading(src) {\\n    const cap = this.rules.block.lheading.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'heading',\\n        raw: cap[0],\\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\\n        text: cap[1],\\n        tokens: this.lexer.inline(cap[1])\\n      };\\n    }\\n  }\\n\\n  paragraph(src) {\\n    const cap = this.rules.block.paragraph.exec(src);\\n    if (cap) {\\n      const text = cap[1].charAt(cap[1].length - 1) === '\\\\n'\\n        ? cap[1].slice(0, -1)\\n        : cap[1];\\n      return {\\n        type: 'paragraph',\\n        raw: cap[0],\\n        text,\\n        tokens: this.lexer.inline(text)\\n      };\\n    }\\n  }\\n\\n  text(src) {\\n    const cap = this.rules.block.text.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'text',\\n        raw: cap[0],\\n        text: cap[0],\\n        tokens: this.lexer.inline(cap[0])\\n      };\\n    }\\n  }\\n\\n  escape(src) {\\n    const cap = this.rules.inline.escape.exec(src);\\n    if (cap) {\\n      return {\\n        type: 'escape',\\n        raw: cap[0],\\n        text: escape(cap[1])\\n      };\\n    }\\n  }\\n\\n  tag(src) {\\n    const cap = this.rules.inline.tag.exec(src);\\n    if (cap) {\\n      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\\n        this.lexer.state.inLink = true;\\n      } else if (this.lexer.state.inLink && /^<\\\\/a>/i.test(cap[0])) {\\n        this.lexer.state.inLink = false;\\n      }\\n      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        this.lexer.state.inRawBlock = true;\\n      } else if (this.lexer.state.inRawBlock && /^<\\\\/(pre|code|kbd|script)(\\\\s|>)/i.test(cap[0])) {\\n        this.lexer.state.inRawBlock = false;\\n      }\\n\\n      return {\\n        type: this.options.sanitize\\n          ? 'text'\\n[end of marked.esm.js]\\n\\n</code>\\n\\nHere is an example of a patch file. It consists of changes to the code base. It specifies the file names, the line numbers of each change, and the removed and added lines. A single patch file can contain changes to multiple files.\\n\\n<patch>\\ndiff --git a/file.py b/file.py\\n--- a/file.py\\n+++ b/file.py\\n@@ -1,27 +1,35 @@\\n def euclidean(a, b):\\n-    while b:\\n-        a, b = b, a % b\\n-    return a\\n+    if b == 0:\\n+        return a\\n+    return euclidean(b, a % b)\\n \\n def bresenham(x0, y0, x1, y1):\\n+    points = []\\n+    dx = abs(x1 - x0)\\n+    dy = abs(y1 - y0)\\n+    sx = 1 if x0 < x1 else -1\\n+    sy = 1 if y0 < y1 else -1\\n+    err = dx - dy\\n+    \\n     while True:\\n-        plot(x0, y0)\\n+        points.append((x0, y0))\\n         if x0 == x1 and y0 == y1:\\n             break\\n-        e2 = 2 * err\\n-        if e2 > -dy:\\n-            err -= dy\\n-            x0 += sx\\n-        if e2 < dx:\\n-            err += dx\\n-            y0 += sy\\n+        e2 = 2 * err\\n+        if e2 > -dy:\\n+            err -= dy\\n+            x0 += sx\\n+        if e2 < dx:\\n+            err += dx\\n+            y0 += sy\\n+    return points\\n+</patch>\\n\\nI need you to solve the provided issue by generating a single patch file that I can apply directly to this repository using git apply. Please respond with a single patch file in the format shown above.\\n\\nRespond below: \\n\"}]",
      "retrieved_file_paths": [
        "broken.md",
        "Bug_report.md",
        "marked.min.js",
        "marked.umd.js",
        "marked.esm.js"
      ]
    },
    "retrieved_documents": [
      {
        "id": "1c1acd04-e03e-47b7-b7ca-b9cce94dd64f",
        "score": 0.01639344262295082,
        "payload": {
          "text": "# Markdown is broken\n\nI have a lot of scraps of markdown engine oddities that I've collected over the\nyears. What you see below is slightly messy, but it's what I've managed to\ncobble together to illustrate the differences between markdown engines, and\nwhy, if there ever is a markdown specification, it has to be absolutely\nthorough. There are a lot more of these little differences I have documented\nelsewhere. I know I will find them lingering on my disk one day, but until\nthen, I'll continue to add whatever strange nonsensical things I find.\n\nSome of these examples may only mention a particular engine compared to marked.\nHowever, the examples with markdown.pl could easily be swapped out for\ndiscount, upskirt, or markdown.js, and you would very easily see even more\ninconsistencies.\n\nA lot of this was written when I was very unsatisfied with the inconsistencies\nbetween markdown engines. Please excuse the frustration noticeable in my\nwriting.\n\n## Examples of markdown's \"stupid\" list parsing\n\n```\n$ markdown.pl\n\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n\n<ul>\n<li>item2</li>\n</ul>\n\n<p><p>text</p></li>\n</ul></p>\n```\n\n\n```\n$ marked\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n<ul>\n<li>item2</li>\n</ul>\n<p>text</p>\n</li>\n</ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\n```\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\n```\n$ marked\n* hello\n  > world\n^D\n<ul>\n<li>hello<blockquote>\n<p>world</p>\n</blockquote>\n</li>\n</ul>\n```\n\nAgain, which looks correct to you?\n\n- - -\n\nEXAMPLE:\n\n```\n$ markdown.pl\n* hello\n  * world\n    * hi\n          code\n^D\n<ul>\n<li>hello\n<ul>\n<li>world</li>\n<li>hi\n  code</li>\n</ul></li>\n</ul>\n```\n\nThe code isn't a code block even though it's after the bullet margin. I know,\nlets give it two more spaces, effectively making it 8 spaces past the bullet.\n\n```\n$ markdown.pl\n* hello\n  * world\n    * hi\n            code\n^D\n<ul>\n<li>hello\n<ul>\n<li>world</li>\n<li>hi\n    code</li>\n</ul></li>\n</ul>\n```\n\nAnd, it's still not a code block. Did you also notice that the 3rd item isn't\neven its own list? Markdown screws that up too because of its indentation\nunaware parsing.\n\n- - -\n\nLet's look at some more examples of markdown's list parsing:\n\n```\n$ markdown.pl\n\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n\n<ul>\n<li>item2</li>\n</ul>\n\n<p><p>text</p></li>\n</ul></p>\n```\n\nMisnested tags.\n\n\n```\n$ marked\n  * item1\n\n    * item2\n\n  text\n^D\n<ul>\n<li><p>item1</p>\n<ul>\n<li>item2</li>\n</ul>\n<p>text</p>\n</li>\n</ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\n```\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\nMore misnested tags.\n\n\n```\n$ marked\n* hello\n  > world\n^D\n<ul>\n<li>hello<blockquote>\n<p>world</p>\n</blockquote>\n</li>\n</ul>\n```\n\nAgain, which looks correct to you?\n\n- - -\n\n# Why quality matters - Part 2\n\n``` bash\n$ markdown.pl\n* hello\n  > world\n^D\n<p><ul>\n<li>hello</p>\n\n<blockquote>\n  <p>world</li>\n</ul></p>\n</blockquote>\n```\n\n``` bash\n$ sundown # upskirt\n* hello\n  > world\n^D\n<ul>\n<li>hello\n&gt; world</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n  > world\n^D\n<ul><li>hello <blockquote><p>world</p></blockquote></li></ul>\n```\n\nWhich looks correct to you?\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/23\n\n``` bash\n$ markdown.pl # upskirt/markdown.js/discount\n* hello\n      var a = 1;\n* world\n^D\n<ul>\n<li>hello\nvar a = 1;</li>\n<li>world</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n      var a = 1;\n* world\n^D\n<ul><li>hello\n<pre>code>var a = 1;</code></pre></li>\n<li>world</li></ul>\n```\n\nWhich looks more reasonable? Why shouldn't code blocks be able to appear in\nlist items in a sane way?\n\n- - -\n\n``` bash\n$ markdown.js\n<div>hello</div>\n\n<span>hello</span>\n^D\n<p>&lt;div&gt;hello&lt;/div&gt;</p>\n\n<p>&lt;span&gt;hello&lt;/span&gt;</p>\n```\n\n``` bash\n$ marked\n<div>hello</div>\n\n<span>hello</span>\n^D\n<div>hello</div>\n\n\n<p><span>hello</span>\n</p>\n```\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/27\n\n``` bash\n$ markdown.js\n[![an image](/image)](/link)\n^D\n<p><a href=\"/image)](/link\">![an image</a></p>\n```\n\n``` bash\n$ marked\n[![an image](/image)](/link)\n^D\n<p><a href=\"/link\"><img src=\"/image\" alt=\"an image\"></a>\n</p>\n```\n\n- - -\n\nSee: https://github.com/evilstreak/markdown-js/issues/24\n\n``` bash\n$ markdown.js\n> a\n\n> b\n\n> c\n^D\n<blockquote><p>a</p><p>bundefined&gt; c</p></blockquote>\n```\n\n``` bash\n$ marked\n> a\n\n> b\n\n> c\n^D\n<blockquote><p>a\n\n</p></blockquote>\n<blockquote><p>b\n\n</p></blockquote>\n<blockquote><p>c\n</p></blockquote>\n```\n\n- - -\n\n``` bash\n$ markdown.pl\n* hello\n  * world\n    how\n\n    are\n    you\n\n  * today\n* hi\n^D\n<ul>\n<li><p>hello</p>\n\n<ul>\n<li>world\nhow</li>\n</ul>\n\n<p>are\nyou</p>\n\n<ul>\n<li>today</li>\n</ul></li>\n<li>hi</li>\n</ul>\n```\n\n``` bash\n$ marked\n* hello\n  * world\n    how\n\n    are\n    you\n\n  * today\n* hi\n^D\n<ul>\n<li><p>hello</p>\n<ul>\n<li><p>world\nhow</p>\n<p>are\nyou</p>\n</li>\n<li><p>today</p>\n</li>\n</ul>\n</li>\n<li>hi</li>\n</ul>\n```\n",
          "filepath": "data/repos/markedjs/marked-5.0/docs/broken.md",
          "repo": "markedjs/marked",
          "version": "5.0",
          "chunk_index": 0
        }
      },
      {
        "id": "2c0e56ba-d3e4-418d-a18f-e656412f9229",
        "score": 0.016129032258064516,
        "payload": {
          "text": "---\nname: Bug report\nabout: Marked says it does this thing but does not\n\n---\n**Marked version:**\n\n**Describe the bug**\nA clear and concise description of what the bug is.\n\n**To Reproduce**\nSteps to reproduce the behavior:\n\n<!-- If possible, use the Marked Demo permalink and compare to the CommonMark Dingus permalink to demonstrate the bug -->\n<!--\n1. [Marked Demo](https://marked.js.org/demo/)\n2. [CommonMark Demo](https://spec.commonmark.org/dingus/)\n-->\n\n<!-- If you need a specific version and options to reproduce the bug, use the following template -->\n<!--\n1. Install marked `npm install --save marked@0.3.19` with the version you are using\n2. Run marked with input string and options such as `marked('hello *world*', {gfm: true})`\n3. Actual output (or error) is...\n-->\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n",
          "filepath": "data/repos/markedjs/marked-5.0/.github/ISSUE_TEMPLATE/Bug_report.md",
          "repo": "markedjs/marked",
          "version": "5.0",
          "chunk_index": 0
        }
      },
      {
        "id": "e09d85be-7c9f-4577-9c0a-c9485977796e",
        "score": 0.015873015873015872,
        "payload": {
          "text": "/**\n * marked v5.0.0 - a markdown parser\n * Copyright (c) 2011-2023, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */",
          "filepath": "data/repos/markedjs/marked-5.0/marked.min.js",
          "repo": "markedjs/marked",
          "version": "5.0",
          "chunk_index": 0
        }
      },
      {
        "id": "52c609d9-5108-4273-8fc5-8b732f55485b",
        "score": 0.015625,
        "payload": {
          "text": "/**\n * marked v5.0.0 - a markdown parser\n * Copyright (c) 2011-2023, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.marked = {}));\n})(this, (function (exports) { 'use strict';\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n    }\n  }\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n  function _extends() {\n    _extends = Object.assign ? Object.assign.bind() : function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    return _extends.apply(this, arguments);\n  }\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n    return arr2;\n  }\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) {\n    var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n    if (it) return (it = it.call(o)).next.bind(it);\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  function _toPrimitive(input, hint) {\n    if (typeof input !== \"object\" || input === null) return input;\n    var prim = input[Symbol.toPrimitive];\n    if (prim !== undefined) {\n      var res = prim.call(input, hint || \"default\");\n      if (typeof res !== \"object\") return res;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n    return (hint === \"string\" ? String : Number)(input);\n  }\n  function _toPropertyKey(arg) {\n    var key = _toPrimitive(arg, \"string\");\n    return typeof key === \"symbol\" ? key : String(key);\n  }\n\n  function getDefaults() {\n    return {\n      async: false,\n      baseUrl: null,\n      breaks: false,\n      extensions: null,\n      gfm: true,\n      headerIds: true,\n      headerPrefix: '',\n      highlight: null,\n      hooks: null,\n      langPrefix: 'language-',\n      mangle: true,\n      pedantic: false,\n      renderer: null,\n      sanitize: false,\n      sanitizer: null,\n      silent: false,\n      smartypants: false,\n      tokenizer: null,\n      walkTokens: null,\n      xhtml: false\n    };\n  }\n  exports.defaults = getDefaults();\n  function changeDefaults(newDefaults) {\n    exports.defaults = newDefaults;\n  }\n\n  /**\n   * Helpers\n   */\n  var escapeTest = /[&<>\"']/;\n  var escapeReplace = new RegExp(escapeTest.source, 'g');\n  var escapeTestNoEncode = /[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/;\n  var escapeReplaceNoEncode = new RegExp(escapeTestNoEncode.source, 'g');\n  var escapeReplacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\n    return escapeReplacements[ch];\n  };\n  function escape(html, encode) {\n    if (encode) {\n      if (escapeTest.test(html)) {\n        return html.replace(escapeReplace, getEscapeReplacement);\n      }\n    } else {\n      if (escapeTestNoEncode.test(html)) {\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n      }\n    }\n    return html;\n  }\n  var unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\n  /**\n   * @param {string} html\n   */\n  function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(unescapeTest, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n      return '';\n    });\n  }\n  var caret = /(^|[^\\[])\\^/g;\n\n  /**\n   * @param {string | RegExp} regex\n   * @param {string} opt\n   */\n  function edit(regex, opt) {\n    regex = typeof regex === 'string' ? regex : regex.source;\n    opt = opt || '';\n    var obj = {\n      replace: function replace(name, val) {\n        val = val.source || val;\n        val = val.replace(caret, '$1');\n        regex = regex.replace(name, val);\n        return obj;\n      },\n      getRegex: function getRegex() {\n        return new RegExp(regex, opt);\n      }\n    };\n    return obj;\n  }\n  var nonWordAndColonTest = /[^\\w:]/g;\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n  /**\n   * @param {boolean} sanitize\n   * @param {string} base\n   * @param {string} href\n   */\n  function cleanUrl(sanitize, base, href) {\n    if (sanitize) {\n      var prot;\n      try {\n        prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, '').toLowerCase();\n      } catch (e) {\n        return null;\n      }\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return null;\n      }\n    }\n    if (base && !originIndependentUrl.test(href)) {\n      href = resolveUrl(base, href);\n    }\n    try {\n      href = encodeURI(href).replace(/%25/g, '%');\n    } catch (e) {\n      return null;\n    }\n    return href;\n  }\n  var baseUrls = {};\n  var justDomain = /^[^:]+:\\/*[^/]*$/;\n  var protocol = /^([^:]+:)[\\s\\S]*$/;\n  var domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\n  /**\n   * @param {string} base\n   * @param {string} href\n   */\n  function resolveUrl(base, href) {\n    if (!baseUrls[' ' + base]) {\n      // we can ignore everything in base after the last slash of its path component,\n      // but we might need to add _that_\n      // https://tools.ietf.org/html/rfc3986#section-3\n      if (justDomain.test(base)) {\n        baseUrls[' ' + base] = base + '/';\n      } else {\n        baseUrls[' ' + base] = rtrim(base, '/', true);\n      }\n    }\n    base = baseUrls[' ' + base];\n    var relativeBase = base.indexOf(':') === -1;\n    if (href.substring(0, 2) === '//') {\n      if (relativeBase) {\n        return href;\n      }\n      return base.replace(protocol, '$1') + href;\n    } else if (href.charAt(0) === '/') {\n      if (relativeBase) {\n        return href;\n      }\n      return base.replace(domain, '$1') + href;\n    } else {\n      return base + href;\n    }\n  }\n  var noopTest = {\n    exec: function noopTest() {}\n  };\n  function splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n        var escaped = false,\n          curr = offset;\n        while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n        if (escaped) {\n          // odd number of slashes means | is escaped\n          // so we leave it alone\n          return '|';\n        } else {\n          // add space before unescaped |\n          return ' |';\n        }\n      }),\n      cells = row.split(/ \\|/);\n    var i = 0;\n\n    // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n    if (!cells[0].trim()) {\n      cells.shift();\n    }\n    if (cells.length > 0 && !cells[cells.length - 1].trim()) {\n      cells.pop();\n    }\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) cells.push('');\n    }\n    for (; i < cells.length; i++) {\n      // leading or trailing whitespace is ignored per the gfm spec\n      cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n    return cells;\n  }\n\n  /**\n   * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n   * /c*$/ is vulnerable to REDOS.\n   *\n   * @param {string} str\n   * @param {string} c\n   * @param {boolean} invert Remove suffix of non-c chars instead. Default falsey.\n   */\n  function rtrim(str, c, invert) {\n    var l = str.length;\n    if (l === 0) {\n      return '';\n    }\n\n    // Length of suffix matching the invert condition.\n    var suffLen = 0;\n\n    // Step left until we fail to match the invert condition.\n    while (suffLen < l) {\n      var currChar = str.charAt(l - suffLen - 1);\n      if (currChar === c && !invert) {\n        suffLen++;\n      } else if (currChar !== c && invert) {\n        suffLen++;\n      } else {\n        break;\n      }\n    }\n    return str.slice(0, l - suffLen);\n  }\n  function findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n      return -1;\n    }\n    var l = str.length;\n    var level = 0,\n      i = 0;\n    for (; i < l; i++) {\n      if (str[i] === '\\\\') {\n        i++;\n      } else if (str[i] === b[0]) {\n        level++;\n      } else if (str[i] === b[1]) {\n        level--;\n        if (level < 0) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  }\n  function checkDeprecations(opt, callback) {\n    if (!opt || opt.silent) {\n      return;\n    }\n    if (callback) {\n      console.warn('marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async');\n    }\n    if (opt.sanitize || opt.sanitizer) {\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n    }\n    if (opt.highlight || opt.langPrefix) {\n      console.warn('marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight.');\n    }\n    if (opt.mangle) {\n      console.warn('marked(): mangle parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-mangle.');\n    }\n    if (opt.baseUrl) {\n      console.warn('marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url.');\n    }\n    if (opt.smartypants) {\n      console.warn('marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants.');\n    }\n    if (opt.xhtml) {\n      console.warn('marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml.');\n    }\n    if (opt.headerIds || opt.headerPrefix) {\n      console.warn('marked(): headerIds and headerPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-gfm-heading-id.');\n    }\n  }\n\n  // copied from https://stackoverflow.com/a/5450113/806777\n  /**\n   * @param {string} pattern\n   * @param {number} count\n   */\n  function repeatString(pattern, count) {\n    if (count < 1) {\n      return '';\n    }\n    var result = '';\n    while (count > 1) {\n      if (count & 1) {\n        result += pattern;\n      }\n      count >>= 1;\n      pattern += pattern;\n    }\n    return result + pattern;\n  }\n\n  function outputLink(cap, link, raw, lexer) {\n    var href = link.href;\n    var title = link.title ? escape(link.title) : null;\n    var text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n    if (cap[0].charAt(0) !== '!') {\n      lexer.state.inLink = true;\n      var token = {\n        type: 'link',\n        raw: raw,\n        href: href,\n        title: title,\n        text: text,\n        tokens: lexer.inlineTokens(text)\n      };\n      lexer.state.inLink = false;\n      return token;\n    }\n    return {\n      type: 'image',\n      raw: raw,\n      href: href,\n      title: title,\n      text: escape(text)\n    };\n  }\n  function indentCodeCompensation(raw, text) {\n    var matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n    if (matchIndentToCode === null) {\n      return text;\n    }\n    var indentToCode = matchIndentToCode[1];\n    return text.split('\\n').map(function (node) {\n      var matchIndentInNode = node.match(/^\\s+/);\n      if (matchIndentInNode === null) {\n        return node;\n      }\n      var indentInNode = matchIndentInNode[0];\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n      return node;\n    }).join('\\n');\n  }\n\n  /**\n   * Tokenizer\n   */\n  var Tokenizer = /*#__PURE__*/function () {\n    function Tokenizer(options) {\n      this.options = options || exports.defaults;\n    }\n    var _proto = Tokenizer.prototype;\n    _proto.space = function space(src) {\n      var cap = this.rules.block.newline.exec(src);\n      if (cap && cap[0].length > 0) {\n        return {\n          type: 'space',\n          raw: cap[0]\n        };\n      }\n    };\n    _proto.code = function code(src) {\n      var cap = this.rules.block.code.exec(src);\n      if (cap) {\n        var text = cap[0].replace(/^ {1,4}/gm, '');\n        return {\n          type: 'code',\n          raw: cap[0],\n          codeBlockStyle: 'indented',\n          text: !this.options.pedantic ? rtrim(text, '\\n') : text\n        };\n      }\n    };\n    _proto.fences = function fences(src) {\n      var cap = this.rules.block.fences.exec(src);\n      if (cap) {\n        var raw = cap[0];\n        var text = indentCodeCompensation(raw, cap[3] || '');\n        return {\n          type: 'code',\n          raw: raw,\n          lang: cap[2] ? cap[2].trim().replace(this.rules.inline._escapes, '$1') : cap[2],\n          text: text\n        };\n      }\n    };\n    _proto.heading = function heading(src) {\n      var cap = this.rules.block.heading.exec(src);\n      if (cap) {\n        var text = cap[2].trim();\n\n        // remove trailing #s\n        if (/#$/.test(text)) {\n          var trimmed = rtrim(text, '#');\n          if (this.options.pedantic) {\n            text = trimmed.trim();\n          } else if (!trimmed || / $/.test(trimmed)) {\n            // CommonMark requires space before trailing #s\n            text = trimmed.trim();\n          }\n        }\n        return {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[1].length,\n          text: text,\n          tokens: this.lexer.inline(text)\n        };\n      }\n    };\n    _proto.hr = function hr(src) {\n      var cap = this.rules.block.hr.exec(src);\n      if (cap) {\n        return {\n          type: 'hr',\n          raw: cap[0]\n        };\n      }\n    };\n    _proto.blockquote = function blockquote(src) {\n      var cap = this.rules.block.blockquote.exec(src);\n      if (cap) {\n        var text = cap[0].replace(/^ *>[ \\t]?/gm, '');\n        var top = this.lexer.state.top;\n        this.lexer.state.top = true;\n        var tokens = this.lexer.blockTokens(text);\n        this.lexer.state.top = top;\n        return {\n          type: 'blockquote',\n          raw: cap[0],\n          tokens: tokens,\n          text: text\n        };\n      }\n    };\n    _proto.list = function list(src) {\n      var cap = this.rules.block.list.exec(src);\n      if (cap) {\n        var raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine, line, nextLine, rawLine, itemContents, endEarly;\n        var bull = cap[1].trim();\n        var isordered = bull.length > 1;\n        var list = {\n          type: 'list',\n          raw: '',\n          ordered: isordered,\n          start: isordered ? +bull.slice(0, -1) : '',\n          loose: false,\n          items: []\n        };\n        bull = isordered ? \"\\\\d{1,9}\\\\\" + bull.slice(-1) : \"\\\\\" + bull;\n        if (this.options.pedantic) {\n          bull = isordered ? bull : '[*+-]';\n        }\n\n        // Get next list item\n        var itemRegex = new RegExp(\"^( {0,3}\" + bull + \")((?:[\\t ][^\\\\n]*)?(?:\\\\n|$))\");\n\n        // Check if current bullet point can start a new List Item\n        while (src) {\n          endEarly = false;\n          if (!(cap = itemRegex.exec(src))) {\n            break;\n          }\n          if (this.rules.block.hr.test(src)) {\n            // End list if bullet was actually HR (possibly move into itemRegex?)\n            break;\n          }\n          raw = cap[0];\n          src = src.substring(raw.length);\n          line = cap[2].split('\\n', 1)[0].replace(/^\\t+/, function (t) {\n            return ' '.repeat(3 * t.length);\n          });\n          nextLine = src.split('\\n', 1)[0];\n          if (this.options.pedantic) {\n            indent = 2;\n            itemContents = line.trimLeft();\n          } else {\n            indent = cap[2].search(/[^ ]/); // Find first non-space char\n            indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n            itemContents = line.slice(indent);\n            indent += cap[1].length;\n          }\n          blankLine = false;\n          if (!line && /^ *$/.test(nextLine)) {\n            // Items begin with at most one blank line\n            raw += nextLine + '\\n';\n            src = src.substring(nextLine.length + 1);\n            endEarly = true;\n          }\n          if (!endEarly) {\n            var nextBulletRegex = new RegExp(\"^ {0,\" + Math.min(3, indent - 1) + \"}(?:[*+-]|\\\\d{1,9}[.)])((?:[ \\t][^\\\\n]*)?(?:\\\\n|$))\");\n            var hrRegex = new RegExp(\"^ {0,\" + Math.min(3, indent - 1) + \"}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)\");\n            var fencesBeginRegex = new RegExp(\"^ {0,\" + Math.min(3, indent - 1) + \"}(?:```|~~~)\");\n            var headingBeginRegex = new RegExp(\"^ {0,\" + Math.min(3, indent - 1) + \"}#\");\n\n            // Check if following lines should be included in List Item\n            while (src) {\n              rawLine = src.split('\\n', 1)[0];\n              nextLine = rawLine;\n\n              // Re-align to follow commonmark nesting rules\n              if (this.options.pedantic) {\n                nextLine = nextLine.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n              }\n\n              // End list item if found code fences\n              if (fencesBeginRegex.test(nextLine)) {\n                break;\n              }\n\n              // End list item if found start of new heading\n              if (headingBeginRegex.test(nextLine)) {\n                break;\n              }\n\n              // End list item if found start of new bullet\n              if (nextBulletRegex.test(nextLine)) {\n                break;\n              }\n\n              // Horizontal rule found\n              if (hrRegex.test(src)) {\n                break;\n              }\n              if (nextLine.search(/[^ ]/) >= indent || !nextLine.trim()) {\n                // Dedent if possible\n                itemContents += '\\n' + nextLine.slice(indent);\n              } else {\n                // not enough indentation\n                if (blankLine) {\n                  break;\n                }\n\n                // paragraph continuation unless last line was a different block level element\n                if (line.search(/[^ ]/) >= 4) {\n                  // indented code block\n                  break;\n                }\n                if (fencesBeginRegex.test(line)) {\n                  break;\n                }\n                if (headingBeginRegex.test(line)) {\n                  break;\n                }\n                if (hrRegex.test(line)) {\n                  break;\n                }\n                itemContents += '\\n' + nextLine;\n              }\n              if (!blankLine && !nextLine.trim()) {\n                // Check if current line is blank\n                blankLine = true;\n              }\n              raw += rawLine + '\\n';\n              src = src.substring(rawLine.length + 1);\n              line = nextLine.slice(indent);\n            }\n          }\n          if (!list.loose) {\n            // If the previous item ended with a blank line, the list is loose\n            if (endsWithBlankLine) {\n              list.loose = true;\n            } else if (/\\n *\\n *$/.test(raw)) {\n              endsWithBlankLine = true;\n            }\n          }\n\n          // Check for task list items\n          if (this.options.gfm) {\n            istask = /^\\[[ xX]\\] /.exec(itemContents);\n            if (istask) {\n              ischecked = istask[0] !== '[ ] ';\n              itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n            }\n          }\n          list.items.push({\n            type: 'list_item',\n            raw: raw,\n            task: !!istask,\n            checked: ischecked,\n            loose: false,\n            text: itemContents\n          });\n          list.raw += raw;\n        }\n\n        // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n        list.items[list.items.length - 1].raw = raw.trimRight();\n        list.items[list.items.length - 1].text = itemContents.trimRight();\n        list.raw = list.raw.trimRight();\n        var l = list.items.length;\n\n        // Item child tokens handled here at end because we needed to have the final item to trim it first\n        for (i = 0; i < l; i++) {\n          this.lexer.state.top = false;\n          list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n          if (!list.loose) {\n            // Check if list should be loose\n            var spacers = list.items[i].tokens.filter(function (t) {\n              return t.type === 'space';\n            });\n            var hasMultipleLineBreaks = spacers.length > 0 && spacers.some(function (t) {\n              return /\\n.*\\n/.test(t.raw);\n            });\n            list.loose = hasMultipleLineBreaks;\n          }\n        }\n\n        // Set all items to loose if list is loose\n        if (list.loose) {\n          for (i = 0; i < l; i++) {\n            list.items[i].loose = true;\n          }\n        }\n        return list;\n      }\n    };\n    _proto.html = function html(src) {\n      var cap = this.rules.block.html.exec(src);\n      if (cap) {\n        var token = {\n          type: 'html',\n          block: true,\n          raw: cap[0],\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: cap[0]\n        };\n        if (this.options.sanitize) {\n          var text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\n          token.type = 'paragraph';\n          token.text = text;\n          token.tokens = this.lexer.inline(text);\n        }\n        return token;\n      }\n    };\n    _proto.def = function def(src) {\n      var cap = this.rules.block.def.exec(src);\n      if (cap) {\n        var tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n        var href = cap[2] ? cap[2].replace(/^<(.*)>$/, '$1').replace(this.rules.inline._escapes, '$1') : '';\n        var title = cap[3] ? cap[3].substring(1, cap[3].length - 1).replace(this.rules.inline._escapes, '$1') : cap[3];\n        return {\n          type: 'def',\n          tag: tag,\n          raw: cap[0],\n          href: href,\n          title: title\n        };\n      }\n    };\n    _proto.table = function table(src) {\n      var cap = this.rules.block.table.exec(src);\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells(cap[1]).map(function (c) {\n            return {\n              text: c\n            };\n          }),",
          "filepath": "data/repos/markedjs/marked-5.0/lib/marked.umd.js",
          "repo": "markedjs/marked",
          "version": "5.0",
          "chunk_index": 0
        }
      },
      {
        "id": "1ca5f504-be2d-4ad3-b5fc-cc52274c6879",
        "score": 0.015384615384615385,
        "payload": {
          "text": "/**\n * marked v5.0.0 - a markdown parser\n * Copyright (c) 2011-2023, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\nfunction getDefaults() {\n  return {\n    async: false,\n    baseUrl: null,\n    breaks: false,\n    extensions: null,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    hooks: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: null,\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartypants: false,\n    tokenizer: null,\n    walkTokens: null,\n    xhtml: false\n  };\n}\n\nlet defaults = getDefaults();\n\nfunction changeDefaults(newDefaults) {\n  defaults = newDefaults;\n}\n\n/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = new RegExp(escapeTest.source, 'g');\nconst escapeTestNoEncode = /[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/;\nconst escapeReplaceNoEncode = new RegExp(escapeTestNoEncode.source, 'g');\nconst escapeReplacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape(html, encode) {\n  if (encode) {\n    if (escapeTest.test(html)) {\n      return html.replace(escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (escapeTestNoEncode.test(html)) {\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\n/**\n * @param {string} html\n */\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nconst caret = /(^|[^\\[])\\^/g;\n\n/**\n * @param {string | RegExp} regex\n * @param {string} opt\n */\nfunction edit(regex, opt) {\n  regex = typeof regex === 'string' ? regex : regex.source;\n  opt = opt || '';\n  const obj = {\n    replace: (name, val) => {\n      val = val.source || val;\n      val = val.replace(caret, '$1');\n      regex = regex.replace(name, val);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(regex, opt);\n    }\n  };\n  return obj;\n}\n\nconst nonWordAndColonTest = /[^\\w:]/g;\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n/**\n * @param {boolean} sanitize\n * @param {string} base\n * @param {string} href\n */\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    let prot;\n    try {\n      prot = decodeURIComponent(unescape(href))\n        .replace(nonWordAndColonTest, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nconst baseUrls = {};\nconst justDomain = /^[^:]+:\\/*[^/]*$/;\nconst protocol = /^([^:]+:)[\\s\\S]*$/;\nconst domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\n/**\n * @param {string} base\n * @param {string} href\n */\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (justDomain.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n  const relativeBase = base.indexOf(':') === -1;\n\n  if (href.substring(0, 2) === '//') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(protocol, '$1') + href;\n  } else if (href.charAt(0) === '/') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(domain, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\n\nconst noopTest = { exec: function noopTest() {} };\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n      let escaped = false,\n        curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(/ \\|/);\n  let i = 0;\n\n  // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n  if (!cells[0].trim()) { cells.shift(); }\n  if (cells.length > 0 && !cells[cells.length - 1].trim()) { cells.pop(); }\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n/**\n * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n * /c*$/ is vulnerable to REDOS.\n *\n * @param {string} str\n * @param {string} c\n * @param {boolean} invert Remove suffix of non-c chars instead. Default falsey.\n */\nfunction rtrim(str, c, invert) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.slice(0, l - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  const l = str.length;\n  let level = 0,\n    i = 0;\n  for (; i < l; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkDeprecations(opt, callback) {\n  if (!opt || opt.silent) {\n    return;\n  }\n\n  if (callback) {\n    console.warn('marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async');\n  }\n\n  if (opt.sanitize || opt.sanitizer) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n\n  if (opt.highlight || opt.langPrefix) {\n    console.warn('marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight.');\n  }\n\n  if (opt.mangle) {\n    console.warn('marked(): mangle parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-mangle.');\n  }\n\n  if (opt.baseUrl) {\n    console.warn('marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url.');\n  }\n\n  if (opt.smartypants) {\n    console.warn('marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants.');\n  }\n\n  if (opt.xhtml) {\n    console.warn('marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml.');\n  }\n\n  if (opt.headerIds || opt.headerPrefix) {\n    console.warn('marked(): headerIds and headerPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-gfm-heading-id.');\n  }\n}\n\n// copied from https://stackoverflow.com/a/5450113/806777\n/**\n * @param {string} pattern\n * @param {number} count\n */\nfunction repeatString(pattern, count) {\n  if (count < 1) {\n    return '';\n  }\n  let result = '';\n  while (count > 1) {\n    if (count & 1) {\n      result += pattern;\n    }\n    count >>= 1;\n    pattern += pattern;\n  }\n  return result + pattern;\n}\n\nfunction outputLink(cap, link, raw, lexer) {\n  const href = link.href;\n  const title = link.title ? escape(link.title) : null;\n  const text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n  if (cap[0].charAt(0) !== '!') {\n    lexer.state.inLink = true;\n    const token = {\n      type: 'link',\n      raw,\n      href,\n      title,\n      text,\n      tokens: lexer.inlineTokens(text)\n    };\n    lexer.state.inLink = false;\n    return token;\n  }\n  return {\n    type: 'image',\n    raw,\n    href,\n    title,\n    text: escape(text)\n  };\n}\n\nfunction indentCodeCompensation(raw, text) {\n  const matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n  if (matchIndentToCode === null) {\n    return text;\n  }\n\n  const indentToCode = matchIndentToCode[1];\n\n  return text\n    .split('\\n')\n    .map(node => {\n      const matchIndentInNode = node.match(/^\\s+/);\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      const [indentInNode] = matchIndentInNode;\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    })\n    .join('\\n');\n}\n\n/**\n * Tokenizer\n */\nclass Tokenizer {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  space(src) {\n    const cap = this.rules.block.newline.exec(src);\n    if (cap && cap[0].length > 0) {\n      return {\n        type: 'space',\n        raw: cap[0]\n      };\n    }\n  }\n\n  code(src) {\n    const cap = this.rules.block.code.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ {1,4}/gm, '');\n      return {\n        type: 'code',\n        raw: cap[0],\n        codeBlockStyle: 'indented',\n        text: !this.options.pedantic\n          ? rtrim(text, '\\n')\n          : text\n      };\n    }\n  }\n\n  fences(src) {\n    const cap = this.rules.block.fences.exec(src);\n    if (cap) {\n      const raw = cap[0];\n      const text = indentCodeCompensation(raw, cap[3] || '');\n\n      return {\n        type: 'code',\n        raw,\n        lang: cap[2] ? cap[2].trim().replace(this.rules.inline._escapes, '$1') : cap[2],\n        text\n      };\n    }\n  }\n\n  heading(src) {\n    const cap = this.rules.block.heading.exec(src);\n    if (cap) {\n      let text = cap[2].trim();\n\n      // remove trailing #s\n      if (/#$/.test(text)) {\n        const trimmed = rtrim(text, '#');\n        if (this.options.pedantic) {\n          text = trimmed.trim();\n        } else if (!trimmed || / $/.test(trimmed)) {\n          // CommonMark requires space before trailing #s\n          text = trimmed.trim();\n        }\n      }\n\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[1].length,\n        text,\n        tokens: this.lexer.inline(text)\n      };\n    }\n  }\n\n  hr(src) {\n    const cap = this.rules.block.hr.exec(src);\n    if (cap) {\n      return {\n        type: 'hr',\n        raw: cap[0]\n      };\n    }\n  }\n\n  blockquote(src) {\n    const cap = this.rules.block.blockquote.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ *>[ \\t]?/gm, '');\n      const top = this.lexer.state.top;\n      this.lexer.state.top = true;\n      const tokens = this.lexer.blockTokens(text);\n      this.lexer.state.top = top;\n      return {\n        type: 'blockquote',\n        raw: cap[0],\n        tokens,\n        text\n      };\n    }\n  }\n\n  list(src) {\n    let cap = this.rules.block.list.exec(src);\n    if (cap) {\n      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine,\n        line, nextLine, rawLine, itemContents, endEarly;\n\n      let bull = cap[1].trim();\n      const isordered = bull.length > 1;\n\n      const list = {\n        type: 'list',\n        raw: '',\n        ordered: isordered,\n        start: isordered ? +bull.slice(0, -1) : '',\n        loose: false,\n        items: []\n      };\n\n      bull = isordered ? `\\\\d{1,9}\\\\${bull.slice(-1)}` : `\\\\${bull}`;\n\n      if (this.options.pedantic) {\n        bull = isordered ? bull : '[*+-]';\n      }\n\n      // Get next list item\n      const itemRegex = new RegExp(`^( {0,3}${bull})((?:[\\t ][^\\\\n]*)?(?:\\\\n|$))`);\n\n      // Check if current bullet point can start a new List Item\n      while (src) {\n        endEarly = false;\n        if (!(cap = itemRegex.exec(src))) {\n          break;\n        }\n\n        if (this.rules.block.hr.test(src)) { // End list if bullet was actually HR (possibly move into itemRegex?)\n          break;\n        }\n\n        raw = cap[0];\n        src = src.substring(raw.length);\n\n        line = cap[2].split('\\n', 1)[0].replace(/^\\t+/, (t) => ' '.repeat(3 * t.length));\n        nextLine = src.split('\\n', 1)[0];\n\n        if (this.options.pedantic) {\n          indent = 2;\n          itemContents = line.trimLeft();\n        } else {\n          indent = cap[2].search(/[^ ]/); // Find first non-space char\n          indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n          itemContents = line.slice(indent);\n          indent += cap[1].length;\n        }\n\n        blankLine = false;\n\n        if (!line && /^ *$/.test(nextLine)) { // Items begin with at most one blank line\n          raw += nextLine + '\\n';\n          src = src.substring(nextLine.length + 1);\n          endEarly = true;\n        }\n\n        if (!endEarly) {\n          const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\d{1,9}[.)])((?:[ \\t][^\\\\n]*)?(?:\\\\n|$))`);\n          const hrRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)`);\n          const fencesBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\\`\\`\\`|~~~)`);\n          const headingBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`);\n\n          // Check if following lines should be included in List Item\n          while (src) {\n            rawLine = src.split('\\n', 1)[0];\n            nextLine = rawLine;\n\n            // Re-align to follow commonmark nesting rules\n            if (this.options.pedantic) {\n              nextLine = nextLine.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n            }\n\n            // End list item if found code fences\n            if (fencesBeginRegex.test(nextLine)) {\n              break;\n            }\n\n            // End list item if found start of new heading\n            if (headingBeginRegex.test(nextLine)) {\n              break;\n            }\n\n            // End list item if found start of new bullet\n            if (nextBulletRegex.test(nextLine)) {\n              break;\n            }\n\n            // Horizontal rule found\n            if (hrRegex.test(src)) {\n              break;\n            }\n\n            if (nextLine.search(/[^ ]/) >= indent || !nextLine.trim()) { // Dedent if possible\n              itemContents += '\\n' + nextLine.slice(indent);\n            } else {\n              // not enough indentation\n              if (blankLine) {\n                break;\n              }\n\n              // paragraph continuation unless last line was a different block level element\n              if (line.search(/[^ ]/) >= 4) { // indented code block\n                break;\n              }\n              if (fencesBeginRegex.test(line)) {\n                break;\n              }\n              if (headingBeginRegex.test(line)) {\n                break;\n              }\n              if (hrRegex.test(line)) {\n                break;\n              }\n\n              itemContents += '\\n' + nextLine;\n            }\n\n            if (!blankLine && !nextLine.trim()) { // Check if current line is blank\n              blankLine = true;\n            }\n\n            raw += rawLine + '\\n';\n            src = src.substring(rawLine.length + 1);\n            line = nextLine.slice(indent);\n          }\n        }\n\n        if (!list.loose) {\n          // If the previous item ended with a blank line, the list is loose\n          if (endsWithBlankLine) {\n            list.loose = true;\n          } else if (/\\n *\\n *$/.test(raw)) {\n            endsWithBlankLine = true;\n          }\n        }\n\n        // Check for task list items\n        if (this.options.gfm) {\n          istask = /^\\[[ xX]\\] /.exec(itemContents);\n          if (istask) {\n            ischecked = istask[0] !== '[ ] ';\n            itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n          }\n        }\n\n        list.items.push({\n          type: 'list_item',\n          raw,\n          task: !!istask,\n          checked: ischecked,\n          loose: false,\n          text: itemContents\n        });\n\n        list.raw += raw;\n      }\n\n      // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n      list.items[list.items.length - 1].raw = raw.trimRight();\n      list.items[list.items.length - 1].text = itemContents.trimRight();\n      list.raw = list.raw.trimRight();\n\n      const l = list.items.length;\n\n      // Item child tokens handled here at end because we needed to have the final item to trim it first\n      for (i = 0; i < l; i++) {\n        this.lexer.state.top = false;\n        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n\n        if (!list.loose) {\n          // Check if list should be loose\n          const spacers = list.items[i].tokens.filter(t => t.type === 'space');\n          const hasMultipleLineBreaks = spacers.length > 0 && spacers.some(t => /\\n.*\\n/.test(t.raw));\n\n          list.loose = hasMultipleLineBreaks;\n        }\n      }\n\n      // Set all items to loose if list is loose\n      if (list.loose) {\n        for (i = 0; i < l; i++) {\n          list.items[i].loose = true;\n        }\n      }\n\n      return list;\n    }\n  }\n\n  html(src) {\n    const cap = this.rules.block.html.exec(src);\n    if (cap) {\n      const token = {\n        type: 'html',\n        block: true,\n        raw: cap[0],\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: cap[0]\n      };\n      if (this.options.sanitize) {\n        const text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\n        token.type = 'paragraph';\n        token.text = text;\n        token.tokens = this.lexer.inline(text);\n      }\n      return token;\n    }\n  }\n\n  def(src) {\n    const cap = this.rules.block.def.exec(src);\n    if (cap) {\n      const tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n      const href = cap[2] ? cap[2].replace(/^<(.*)>$/, '$1').replace(this.rules.inline._escapes, '$1') : '';\n      const title = cap[3] ? cap[3].substring(1, cap[3].length - 1).replace(this.rules.inline._escapes, '$1') : cap[3];\n      return {\n        type: 'def',\n        tag,\n        raw: cap[0],\n        href,\n        title\n      };\n    }\n  }\n\n  table(src) {\n    const cap = this.rules.block.table.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells(cap[1]).map(c => { return { text: c }; }),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        rows: cap[3] && cap[3].trim() ? cap[3].replace(/\\n[ \\t]*$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        item.raw = cap[0];\n\n        let l = item.align.length;\n        let i, j, k, row;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.rows.length;\n        for (i = 0; i < l; i++) {\n          item.rows[i] = splitCells(item.rows[i], item.header.length).map(c => { return { text: c }; });\n        }\n\n        // parse child tokens inside headers and cells\n\n        // header child tokens\n        l = item.header.length;\n        for (j = 0; j < l; j++) {\n          item.header[j].tokens = this.lexer.inline(item.header[j].text);\n        }\n\n        // cell child tokens\n        l = item.rows.length;\n        for (j = 0; j < l; j++) {\n          row = item.rows[j];\n          for (k = 0; k < row.length; k++) {\n            row[k].tokens = this.lexer.inline(row[k].text);\n          }\n        }\n\n        return item;\n      }\n    }\n  }\n\n  lheading(src) {\n    const cap = this.rules.block.lheading.exec(src);\n    if (cap) {\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1],\n        tokens: this.lexer.inline(cap[1])\n      };\n    }\n  }\n\n  paragraph(src) {\n    const cap = this.rules.block.paragraph.exec(src);\n    if (cap) {\n      const text = cap[1].charAt(cap[1].length - 1) === '\\n'\n        ? cap[1].slice(0, -1)\n        : cap[1];\n      return {\n        type: 'paragraph',\n        raw: cap[0],\n        text,\n        tokens: this.lexer.inline(text)\n      };\n    }\n  }\n\n  text(src) {\n    const cap = this.rules.block.text.exec(src);\n    if (cap) {\n      return {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0],\n        tokens: this.lexer.inline(cap[0])\n      };\n    }\n  }\n\n  escape(src) {\n    const cap = this.rules.inline.escape.exec(src);\n    if (cap) {\n      return {\n        type: 'escape',\n        raw: cap[0],\n        text: escape(cap[1])\n      };\n    }\n  }\n\n  tag(src) {\n    const cap = this.rules.inline.tag.exec(src);\n    if (cap) {\n      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\n        this.lexer.state.inLink = true;\n      } else if (this.lexer.state.inLink && /^<\\/a>/i.test(cap[0])) {\n        this.lexer.state.inLink = false;\n      }\n      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = true;\n      } else if (this.lexer.state.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = false;\n      }\n\n      return {\n        type: this.options.sanitize\n          ? 'text'",
          "filepath": "data/repos/markedjs/marked-5.0/lib/marked.esm.js",
          "repo": "markedjs/marked",
          "version": "5.0",
          "chunk_index": 0
        }
      }
    ]
  }
]